(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[3928],{93928:(qe,be,t)=>{"use strict";t.r(be),t.d(be,{POSExitViewModel:()=>R});var m=t(10467),A=t(23823),G=t(81669),J=t(72099),Y=t(98669),oe=t(24028),X=t(49710),k=t(32026),H=t(86739),ue=t(18569),q=t(17560),ye=t(38859),re=t(32647),O=t(8787),B=t(71548),me=t(78906),D=t(35725),x=t(72669),p=t(31562),W=t(75706),T=t(2360);class R extends A.g{get Parent(){return this._parent}get DTPayModes(){return this.DTPayModesObj.Table}get DtReport(){return this.DtReportObj.Table}constructor(){super(),this.ButtonClick=new G.Yk,this.DayClose=new J.c(0),this.HoldVisibility=!1,this.DraftVisibility=!1,this.ExitVisible=!1,this.OptionsVisible=!1,this.GridVisible=!1,this.PrintVisibility=!1,this.Shift=new Y.y$,this.PrintDate=new oe.P6(0),this.CancelVisible=!0,this.BackVisible=!1,this.ShowDenomHelp=!1,this.NumericPADView=null,this.TouchVisibility=!1,this.LoginVisi=!1,this.ReportVisibility=!1,this.DtExit=[],this.IsPayMode=!1,this.IsShiftClose=!1,this.IsDiff=!1,this.ManagerLoggedin=!1,this.oReport=null,this.Denom=null,this.DenomXML="",this.RegName="",this.CloseType=0,this.DtDiffPosting=new O.VB,this.ClassName="POSExitViewModel"}POSExitViewModel_1(j,F,ne,v){this.DayClose.Visible=!1,this._parent=j,this.OptionsVisible=F,this.HoldVisibility=ne,this.DraftVisibility=v,this.DayClose.Label="Day Close",!F&&!ne&&!v&&(this.ExitVisible=!0),this.OptionsVisible?(this.Title="Options",this.Options_CashIN=H.d.SessionManager.IsActionAssigned(this._parent.CostCenterID,"Options - Cash In"),this.Options_CashOut=H.d.SessionManager.IsActionAssigned(this._parent.CostCenterID,"Options - Cash Out"),this.Options_CashRegister=H.d.SessionManager.IsActionAssigned(this._parent.CostCenterID,"Options - Cash Register"),H.d.SessionManager.Preferences.ContainsKey("PosShifts")&&""!=H.d.SessionManager.Preferences.PosShifts.toString()&&parseInt(H.d.SessionManager.Preferences.PosShifts.toString())>5e4&&(this.Options_ShiftClose=!0),this.Options_ShiftClose&&(this.Shift.CCID=parseInt(H.d.SessionManager.Preferences.PosShifts.toString()),this.Shift.TypeID=1),this.Options_DayClose=!0):this.Title=this.HoldVisibility?H.d.GetResource("Com_SaveAsHold"):v?H.d.GetResource("Remarks"):"Exit",this.ButtonClick.Subscribe(this,"OnButtonClick"),this.ExitVisible&&this.InitGrid()}InitGrid(){this.Exit_UserExit=H.d.SessionManager.IsActionAssigned(this._parent.CostCenterID,"User Exit"),this.Exit_UserClose=H.d.SessionManager.IsActionAssigned(this._parent.CostCenterID,"User Close"),this.Exit_ShiftClose=H.d.SessionManager.IsActionAssigned(this._parent.CostCenterID,"Shift Close"),this.Exit_DayClose=H.d.SessionManager.IsActionAssigned(this._parent.CostCenterID,"Day Close"),this.DTPayModesObj=new X.vv,this.DTPayModesObj.Columns=[],this.DTPayModesObj.Table=[],this.DTPayModesObj.TableColumns.push("Name"),this.DTPayModesObj.TableColumns.push("NameWithKey"),this.DTPayModesObj.TableColumns.push("Amount"),this.DTPayModesObj.DataTypes.Double.push("Amount"),this.DTPayModesObj.TableColumns.push("Type"),this.DTPayModesObj.TableColumns.push("SysColumnName"),this.DTPayModesObj.TableColumns.push("DenomXML"),this.DtReportObj=new X.vv,this.DtReportObj.Columns=[],this.DtReportObj.Table=[],this.DtReportObj.TableColumns.push("NameWithKey"),this.DtReportObj.TableColumns.push("Amount"),this.DtReportObj.TableColumns.push("AmountActual"),this.DtReportObj.DataTypes.Double.push("AmountActual"),this.DtReportObj.TableColumns.push("SysColumnName"),this.DtReportObj.TableColumns.push("Type"),this.DtReportObj.TableColumns.push("StyleIsBold"),this.DtReportObj.TableColumns.push("Row_Background"),this.Parent.ScreenObject.Preferences.ContainsKey("PosPostings")&&"true"==this.Parent.ScreenObject.Preferences.PosPostings.toLowerCase()&&this.DtReportObj.TableColumns.push("PostJV"),this.ExitGrid=new X.vv,this.ExitGrid.Columns=[],this.ExitGrid.Table=[],this.ExitGrid.Width="",this.ExitGrid.Height=250,this.ExitGrid.RowHeight=this.Parent.GridRowHeight,this.ExitGrid.BeginEdit.Subscribe(this,"OnExitGridBeginEdit");let j=[],F=new ue.O7;F.Header="Name",F.DisplayMember="NameWithKey",F.DisableTab=!0,F.Width=220,F.ReadOnly=!0,F.DisableTab=!0,j.push(F),F=new ue.O7,F.Header="Value",F.DisplayMember="Amount",F.DataType="FLOAT",F.DecimalPoints=H.d.SessionManager.Preferences.DecimalsinAmount,F.Width=180,j.push(F),this.ExitGrid.Columns=j}IsHoldDocsExits(){let j=H.d.document.GetDocumentDrafts(this.Parent.ScreenObject.RegisterNodeID,this.Parent.CostCenterID,2,!1,!0,this.Parent.ScreenObject.LocationID,this.Parent.ScreenObject.DivisionID);return!O.J0.IsEmpty(j)&&j.Tables.length>0&&j.Tables[0].length>0}OnButtonClick(j){var F=this;return(0,m.A)(function*(){if(null!=j){let ne=0;!O.J0.IsEmpty(F.ExitGrid)&&F.ExitGrid.gridObj&&null!=F.ExitGrid.gridObj.getActiveCellNode()&&F.ExitGrid.gridObj.getEditorLock().commitCurrentEdit();const{LoginViewModel:v}=yield Promise.resolve().then(t.bind(t,51908)),{LoginScreenComponent:E}=yield Promise.resolve().then(t.bind(t,28925));switch(j.toString()){case"Login":let L=yield new v(F.router);L.IsPosMangr=!0,L.ShowRememberMe=!1,L.ShowDefaultCompany=!1;const{ReportViewModel:I}=yield Promise.resolve().then(t.bind(t,35725));H.d.page.ShowDialog(L,E).subscribe(()=>{if(L.IsLoggedIn){F.BackVisible=!0,F.LoginVisi=!1;let se=new I;se.ReportViewModel_1(18),se.ShowHeaderButtons=!1,se.SearchVisibility=!1,F.Report=se,F.ReportVisibility=!0}});break;case"Cancel":case"Back":H.d.page.HideDialog(F.PopUpGUID);break;case"DayClose":if(ne=yield F.ValidatePosUser(),0==ne){if(H.d.SessionManager.Preferences.ContainsKey("ActionWhenHoldDocsExistsOnPOSDayClose")&&!O.J0.IsEmpty(H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSDayClose.toString())&&"None"!=H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSDayClose&&F.IsHoldDocsExits()){if("Stop"==H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSDayClose)return void alert("There are some Hold documents exits, can not allow Day Close.");{let se=yield new W.MessageDialogViewModel;if(se.MessageDialogViewModel_6(F,"Confirmation","There are some Hold documents exits, do you want to proceed to Day Close.?","Yes","No"),yield H.d.page.openDialog(se,T.MessageDialogViewModelComponent,{ShowCenter:!0,Title:se.lblTitle}),"Yes"!=se.res)return}}if(H.d.SessionManager.Preferences.ContainsKey("ActionWhenHoldDocsExistsOnPOSDayClose")&&!O.J0.IsEmpty(H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSDayClose.toString())&&"None"!=H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSDayClose&&F.IsHoldDocsExits()){if("Stop"==H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSDayClose)return void alert("There are some Hold documents exits, can not allow Day Close.");{let se=yield new W.MessageDialogViewModel;if(se.MessageDialogViewModel_6(F,"Confirmation","There are some Hold documents exits, do you want to proceed to Day Close.?","Yes","No"),yield H.d.page.openDialog(se,T.MessageDialogViewModelComponent,{ShowCenter:!0,Title:se.lblTitle}),"Yes"!=se.res)return}}if(H.d.SessionManager.Preferences.PosShifts.length>0&&parseInt(H.d.SessionManager.Preferences.PosShifts)>5e4&&F.Parent.ScreenObject.ShiftNodeID>0){let se;if(se=H.d.admin.POSLogin(F.Parent.ScreenObject.RegisterNodeID,F.Parent.ScreenObject.ShiftNodeID,F.Parent.DocumentDate,104,"","","").obj,se<0)return F.DisplayMessage="Close all shifts before DayClose",void(F.MessageVisibility=!0)}if(F.CloseType=1,H.d.SessionManager.Preferences.ContainsKey("DontShowPaymodeWhileDayClose")&&""!=H.d.SessionManager.Preferences.DontShowPaymodeWhileDayClose&&(0,re.yG0)(H.d.SessionManager.Preferences.DontShowPaymodeWhileDayClose)){let se,z={RetVal:0};me.a.POSLogin(F.Parent.ScreenObject.RegisterNodeID,F.Parent.ScreenObject.ShiftNodeID,F.Parent.DocumentDate,F.CloseType,"","","",z),se=z.RetVal,H.d.page.HideDialog(F.PopUpGUID),H.d.page.removeActiveTab()}else F.ExitVisible=!1,F.GridVisible=!0,F.IsShiftClose=!1,F.Paymodes(null)}break;case"ShiftClose":if(ne=yield F.ValidatePosUser(),0==ne){if(H.d.SessionManager.Preferences.ContainsKey("ActionWhenHoldDocsExistsOnPOSShiftClose")&&!O.J0.IsEmpty(H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSShiftClose.toString())&&"None"!=H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSShiftClose&&F.IsHoldDocsExits()){if("Stop"==H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSShiftClose)return void alert("There are some Hold documents exits, can not allow Shift Close.");{let se=yield new W.MessageDialogViewModel;if(se.MessageDialogViewModel_6(F,"Confirmation","There are some Hold documents exits, do you want to proceed to Shift Close.?","Yes","No"),yield H.d.page.openDialog(se,T.MessageDialogViewModelComponent,{ShowCenter:!0,Title:se.lblTitle}),"Yes"!=se.res)return}}if(H.d.SessionManager.Preferences.ContainsKey("ActionWhenHoldDocsExistsOnPOSShiftClose")&&!O.J0.IsEmpty(H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSShiftClose.toString())&&"None"!=H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSShiftClose&&F.IsHoldDocsExits()){if("Stop"==H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSShiftClose)return void alert("There are some Hold documents exits, can not allow Shift Close.");{let se=yield new W.MessageDialogViewModel;if(se.MessageDialogViewModel_6(F,"Confirmation","There are some Hold documents exits, do you want to proceed to Shift Close.?","Yes","No"),yield H.d.page.openDialog(se,T.MessageDialogViewModelComponent,{ShowCenter:!0,Title:se.lblTitle}),"Yes"!=se.res)return}}if(F.CloseType=2,H.d.SessionManager.Preferences.ContainsKey("DontShowPaymodeWhileShiftClose")&&""!=H.d.SessionManager.Preferences.DontShowPaymodeWhileShiftClose&&(0,re.yG0)(H.d.SessionManager.Preferences.DontShowPaymodeWhileShiftClose)){let se,z={RetVal:0};me.a.POSLogin(F.Parent.ScreenObject.RegisterNodeID,F.Parent.ScreenObject.ShiftNodeID,F.Parent.DocumentDate,F.CloseType,"","","",z),se=z.RetVal,H.d.page.HideDialog(F.PopUpGUID),H.d.page.removeActiveTab()}else F.ExitVisible=!1,F.GridVisible=!0,F.IsShiftClose=!0,F.Paymodes(null)}break;case"UserClose":if(ne=yield F.ValidatePosUser(),0==ne){if(H.d.SessionManager.Preferences.ContainsKey("ActionWhenHoldDocsExistsOnPOSUserClose")&&!O.J0.IsEmpty(H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSUserClose.toString())&&"None"!=H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSUserClose&&F.IsHoldDocsExits()){if("Stop"==H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSUserClose)return void alert("There are some Hold documents exits, can not allow User Close.");{let se=yield new W.MessageDialogViewModel;if(se.MessageDialogViewModel_6(F,"Confirmation","There are some Hold documents exits, do you want to proceed to User Close.?","Yes","No"),yield H.d.page.openDialog(se,T.MessageDialogViewModelComponent,{ShowCenter:!0,Title:se.lblTitle}),"Yes"!=se.res)return}}if(H.d.SessionManager.Preferences.ContainsKey("ActionWhenHoldDocsExistsOnPOSUserClose")&&!O.J0.IsEmpty(H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSUserClose.toString())&&"None"!=H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSUserClose&&F.IsHoldDocsExits()){if("Stop"==H.d.SessionManager.Preferences.ActionWhenHoldDocsExistsOnPOSUserClose)return void alert("There are some Hold documents exits, can not allow User Close.");{let se=yield new W.MessageDialogViewModel;if(se.MessageDialogViewModel_6(F,"Confirmation","There are some Hold documents exits, do you want to proceed to User Close.?","Yes","No"),yield H.d.page.openDialog(se,T.MessageDialogViewModelComponent,{ShowCenter:!0,Title:se.lblTitle}),"Yes"!=se.res)return}}if(F.CloseType=3,H.d.SessionManager.Preferences.ContainsKey("DontShowPaymodeWhileUserClose")&&""!=H.d.SessionManager.Preferences.DontShowPaymodeWhileUserClose&&(0,re.yG0)(H.d.SessionManager.Preferences.DontShowPaymodeWhileUserClose)){let se;se=H.d.admin.POSLogin(F.Parent.ScreenObject.RegisterNodeID,F.Parent.ScreenObject.ShiftNodeID,F.Parent.DocumentDate,F.CloseType,"","","").obj,H.d.page.HideDialog(F.PopUpGUID),H.d.page.removeActiveTab()}else F.ExitVisible=!1,F.GridVisible=!0,F.IsShiftClose=!1,F.Paymodes(null)}break;case"UserExit":if(ne=yield F.ValidatePosUser(),0==ne&&confirm("Do you really want to exit?")){let z=new q.v;F.CloseType=0,F.CloseSession(),z.OnChange.Subscribe(x.RibbonExtViewModel,"OnTabItemClick")}break;case"LockScreen":if(confirm("Do you really want to lock?")){let se=yield new v(F.router);se.IsUserLock=!0,se.CancelVisiblity=!1,se.ShowRememberMe=!1,se.ShowDefaultCompany=!1,se.Title="Un Lock",H.d.page.HideDialog(F.PopUpGUID),H.d.page.ShowDialog(se,E)}break;case"CashOut":if(H.d.SessionManager.Preferences.ContainsKey("CashOut")&&""!=H.d.SessionManager.Preferences.CashOut&&"0"!=H.d.SessionManager.Preferences.CashOut){H.d.page.HideDialog(F.PopUpGUID);const{PostVoucherSaveViewModel:se}=yield Promise.resolve().then(t.bind(t,37147)),{PostVoucherSaveComponent:z}=yield Promise.resolve().then(t.bind(t,45684));let N=new se(F.Parent,parseInt(H.d.SessionManager.Preferences.CashOut),0,0,1,1,!1,!1);H.d.page.ShowDialog(N,z,{ShowCenter:!0,NoWidth:!1})}break;case"CashIN":if(H.d.SessionManager.Preferences.ContainsKey("CashIn")&&""!=H.d.SessionManager.Preferences.CashIn&&"0"!=H.d.SessionManager.Preferences.CashIn){H.d.page.HideDialog(F.PopUpGUID);const{PostVoucherSaveViewModel:se}=yield Promise.resolve().then(t.bind(t,37147)),{PostVoucherSaveComponent:z}=yield Promise.resolve().then(t.bind(t,45684));let N=new se(F.Parent,parseInt(H.d.SessionManager.Preferences.CashIn),0,0,1,1,!1,!1);H.d.page.ShowDialog(N,z,{ShowCenter:!0,NoWidth:!1})}break;case"CashRegister":H.d.page.HideDialog(F.PopUpGUID);const{POSCashRegisterViewModel:ce}=yield t.e(7347).then(t.bind(t,27347)),{POSCashRegisterComponent:Ce}=yield t.e(1474).then(t.bind(t,89093));let he=new ce(F.Parent);H.d.page.ShowDialog(he,Ce,{ShowCenter:!0,NoWidth:!1});break;case"HoldDoc":if(0!=F.Parent.DocID)return F.DisplayMessage=H.d.GetResource("Documentalreadysaved"),void(F.MessageVisibility=!0);if(null==F.Parent.HoldDocName||""==F.Parent.HoldDocName.Text.trim())return F.DisplayMessage="Enter Name",void(F.MessageVisibility=!0);F.Parent.SaveDraft(!1,!1),H.d.page.HideDialog(F.PopUpGUID);break;case"OK":if(F.IsPayMode)2==F.CloseType&&(F.DayClose.IsChecked=!1,F.DayClose.Visible=!0),F.TouchVisibility=!1,F.FillGrid(!1),F.BackVisible=H.d.SessionManager.IsActionAssigned(F.Parent.CostCenterID,"CanEditPayMode"),F.IsDiff&&(F.LoginVisi=!0);else{if("1"!=H.d.SessionManager.UserID&&F.IsDiff&&H.d.SessionManager.IsActionAssigned(F.Parent.CostCenterID,"DonotcloseifDiffinPayMode"))return F.DisplayMessage="Difference in PayModes",void(F.MessageVisibility=!0);4==F.CloseType?(F.CallPrint(F.Parent.ScreenObject.ShiftNodeID),H.d.page.HideDialog(F.PopUpGUID)):F.CloseSession()}break;case"Previous":F.BackVisible=!1,F.CancelVisible=!0,F.ShowDenomHelp=!0,F.LoginVisi=!1,F.ReportVisibility=!1,F.IsPayMode=!0,F.IsDiff=!1,F.ExitGrid.Columns[1].ReadOnly=!1,F.ExitGrid.Height=250,F.ExitGrid.RefreshColumns(),F.ExitGrid.Table=F.DtExit,F.DtReport.Clear(),F.TouchVisibility=F.Parent.FooterTouchVisible,F.DayClose.Visible&&(F.DayClose.Visible=!1);break;case"PrintDayClose":F.PrintVisibility=!0,F.OptionsVisible=!1,F.Shift.Visible=!1,F.PrintDate.Label=H.d.GetResource("Doc_Date");break;case"PrintShiftClose":F.PrintVisibility=!0,F.OptionsVisible=!1,F.Shift.Visible=!0,F.Shift.Label="Shift",F.PrintDate.Label=H.d.GetResource("Doc_Date");break;case"PrintOK":if(!F.PrintDate.Date)return F.DisplayMessage="select Date",void(F.MessageVisibility=!0);if(F.Shift.Visible&&0==F.Shift.SelectedValue)return F.DisplayMessage="select shift",void(F.MessageVisibility=!0);F.CloseType=F.Shift.Visible?5:4,F.InitGrid(),F.GridVisible=!0,F.PrintVisibility=!1,F.FillGrid(!0)}}})()}ValidatePosUser(){return(0,m.A)(function*(){let j=0,F=!1,ne=H.d.page.tabs.find(v=>v.params?.obj instanceof p.POSDocumentViewModel);if(null!=ne){let E,v=ne.params?.obj;if(E=v.ScreenObject.GridData.filter(L=>L.ProductID_Key>0),E.length>0)return F=yield v.CheckingPosRows(),F||(j=1),j}return H.d.page.tabs.forEach(v=>{if(null!=v.params.obj&&"POSDocumentViewModel"==v.params.obj.ClassName)for(let E=0;E<v.params.obj.ScreenObject.GridData.length;E++)v.params.obj.ScreenObject.GridDataColumns.Contains("ProductID_Key")&&!O.J0.IsEmpty(v.params.obj.ScreenObject.GridData[E].ProductID_Key)&&(v.params.obj.CheckingPosRows(),j++)}),j})()}OnExitGridBeginEdit(j,F,ne){return!(!this.IsPayMode||"Amount"!=F||"5"!=j.Type.toString()||0==j.DenomXML.toString().length)||(this.IsPayMode&&"Amount"==F&&null!=this.NumericPADView&&""!=j[F].toString()&&(this.NumericPADView.txt.Text=j[F].toString()),!1)}Paymodes(j){let F=null;null==j?(this.ShowDenomHelp=!0,this.IsPayMode=!0):j.Tables.length>10&&j.Columns[10].Contains("DetailsXML")&&j.Tables[10].length>0&&""!=j.Tables[10][0].DetailsXML.toString()&&F.ReadXml(j.Tables[10][0].DetailsXML.toString()),this.DTPayModesObj.Clear();let ne=this.Parent.ScreenObject.Data.Tables[0].filter(E=>E.SectionID>4&&11!=E.SectionID,"SectionID");if(ne.length>0){let E=2;for(let L=0;L<ne.length;L++){const I=ne[L];if(I.SysColumnName.toString().toLowerCase().Contains("currid")||I.SysColumnName.toString().toLowerCase().Contains("exchrt"))continue;let ie={};if(ie.Name=I.ResourceData.toString(),ie.NameWithKey=E<=10?I.ResourceData.toString()+" (F"+E+")":I.ResourceData.toString(),ie.SysColumnName=I.SysColumnName.toString(),ie.Type=I.SectionID.toString(),!O.J0.IsEmpty(F)&&F.Tables.length>0&&F.Columns[0].Contains("SysColName")){var v=F.Tables[0].filter(ce=>ce.SysColName==I.SysColumnName.toString());v.length>0&&!O.J0.IsEmpty(v[0].Amount)&&(ie.Amount=v[0].Amount.toString())}this.DTPayModes.push(ie),E++}}null==j&&(this.ExitGrid.Table=this.DTPayModes),this.ExitGrid.ColumnNo=1,this.ExitGrid.LineNo=0,this.ExitGrid.SetFocusongrid=!0,this.TouchVisibility=this.Parent.FooterTouchVisible}FillGrid(j){!j&&this.Parent.ScreenObject.Preferences.ContainsKey("POSDiffJVFields")&&""!=this.Parent.ScreenObject.Preferences.POSDiffJVFields&&this.DtDiffPosting.ReadXml(this.Parent.ScreenObject.Preferences.POSDiffJVFields);let ne=window.innerHeight-320;ne<400&&(ne=400),this.ExitGrid.Columns[1].ReadOnly=!0,this.ExitGrid.Height=ne,this.ExitGrid.RefreshColumns(),this.CancelVisible=!!(j||this.Parent.ScreenObject.Preferences.ContainsKey("Cancelinclose")&&"true"==this.Parent.ScreenObject.Preferences.Cancelinclose.toLowerCase()),this.ShowDenomHelp=!1,this.IsPayMode=!1;let v,E=0;if(j)v=this.PrintDate.Date,this.Shift.Visible&&(E=this.Shift.SelectedValue);else{this.IsShiftClose&&(E=this.Parent.ScreenObject.ShiftNodeID);let I=this.Parent.ScreenObject.HeaderFields.find(ie=>ie instanceof oe.Lc&&"docdate"==ie.DBColumnName.toLowerCase());v=null!=I&&""!=I.DefaultValue?O.J0.ParseDate(I.DefaultValue):this.Parent.DocumentDate}let L=me.a.GetPOSDetails(this.Parent.PosSessionID,v,this.CloseType,this.Parent.ScreenObject.RegisterNodeID,E,"");if(L.Tables.length>1&&L.Columns[1].Contains("Prefix")&&j){if(L.Tables.length>10&&L.Columns[10].Contains("Isclose")&&L.Tables[10].length>0&&"Not close"==L.Tables[10][0].Isclose.toString())return this.DisplayMessage=4==this.CloseType?"Day not closed":"Shift not closed",this.MessageVisibility=!0,this.GridVisible=!1,void(this.PrintVisibility=!0);this.Paymodes(L)}this.DtExit=JSON.parse(JSON.stringify(this.ExitGrid.Table)),this.CloseData(L)}CloseData(j){var F=this;return(0,m.A)(function*(){if(null==F.oReport){const{ReportViewModel:v}=yield Promise.resolve().then(t.bind(t,35725));F.oReport=new v,F.oReport.ReportViewModel_1(190)}else F.oReport.Data.Clear();if(j.Tables.length>1&&j.Columns[1].Contains("Prefix")){j.Columns[j.Tables.length-1].Contains("Name")&&j.Tables[j.Tables.length-1].length>0&&(F.RegName=j.Tables[j.Tables.length-1][0].Name.toString());let v=F.Parent.ScreenObject.Preferences.POSFields.toString().split(","),E=null;F.Parent.ScreenObject.Preferences.ContainsKey("POSJVFields")&&(E=F.Parent.ScreenObject.Preferences.POSJVFields.toString().split(","));let L,I=0,ie=null,ce=null;j.Tables[1].length>0&&""!=j.Tables[1][0].orders.toString()&&(ie=j.Tables[1][0].orders.toString().split(",")),j.Tables[1].length>0&&""!=j.Tables[1][0].GiftVSale.toString()&&(ce=j.Tables[1][0].GiftVSale.toString().split(",")),L=F.AddRow("Sales(vouchers)","",!1,!0);let Ce=j.Tables[1].filter(he=>38==he.documenttype);for(let he=0;he<Ce.length;he++)null!=ie&&ie.Contains(Ce[he].costcenterid.toString())||null!=ce&&ce.Contains(Ce[he].costcenterid.toString())||(F.AddRow(Ce[he].DocumentName.toString()+"-Starting No",Ce[he].Prefix.toString()+Ce[he].MinNumber.toString(),!1,!1),F.AddRow(Ce[he].DocumentName.toString()+"-Ending No",Ce[he].Prefix.toString()+Ce[he].MAXNumber.toString(),!1,!1),""!=Ce[he].cnt.toString()&&(I+=parseInt(Ce[he].cnt.toString())));L.Amount=I;for(let he=0;he<v.length;he++){let se=F.Parent.ScreenObject.ColumnSource.find(z=>z.DisplayMember.toLowerCase()==v[he].toLowerCase());null!=se&&(L=F.AddRow(se.Header,j.Tables[0].length>0?j.Tables[0][0][he].toString():"FLOAT"==se.DataType?"0":"","FLOAT"==se.DataType,!1),F.DtReportObj.TableColumns.Contains("PostJV")&&null!=E&&E.Contains(v[he])&&(L.SysColumnName=v[he],L.PostJV=1))}if(null!=ie&&ie.length>0){F.AddRow("","",!1,!0),I=0,L=F.AddRow("Orders(vouchers)","",!1,!0);for(let he=0;he<Ce.length;he++)ie.Contains(Ce[he].costcenterid.toString())&&(F.AddRow(Ce[he].DocumentName.toString()+"-Starting No",Ce[he].Prefix.toString()+Ce[he].MinNumber.toString(),!1,!1),F.AddRow(Ce[he].DocumentName.toString()+"-Ending No",Ce[he].Prefix.toString()+Ce[he].MAXNumber.toString(),!1,!1),""!=Ce[he].cnt.toString()&&(I+=parseInt(Ce[he].cnt.toString())));if(L.Amount=I,j.Tables.length>8&&j.Tables[8].length>0)for(let he=0;he<v.length;he++){let se=F.Parent.ScreenObject.ColumnSource.find(z=>z.DisplayMember.toLowerCase()==v[he].toLowerCase());null!=se&&(L=F.AddRow(se.Header,j.Tables[8][0][he].toString(),"FLOAT"==se.DataType,!1))}}if(null!=ce&&ce.length>0){F.AddRow("","",!1,!0),I=0,L=F.AddRow("Gift (vouchers)","",!1,!0);for(let he=0;he<Ce.length;he++)ce.Contains(Ce[he].costcenterid.toString())&&(F.AddRow(Ce[he].DocumentName.toString()+"-Starting No",Ce[he].Prefix.toString()+Ce[he].MinNumber.toString(),!1,!1),F.AddRow(Ce[he].DocumentName.toString()+"-Ending No",Ce[he].Prefix.toString()+Ce[he].MAXNumber.toString(),!1,!1),""!=Ce[he].cnt.toString()&&(I+=parseInt(Ce[he].cnt.toString())));if(L.Amount=I,j.Tables.length>9&&j.Tables[9].length>0)for(let he=0;he<v.length;he++){let se=F.Parent.ScreenObject.ColumnSource.filter(z=>z.DisplayMember.toLowerCase()==v[he].toLowerCase());null!=se&&(L=F.AddRow(se.Header,j.Tables[9][0][he].toString(),"FLOAT"==se.DataType,!1))}}F.AddRow("","",!1,!1),I=0,L=F.AddRow("Return(vouchers)","",!1,!0),Ce=j.Tables[1].filter(he=>39==he.documenttype);for(let he=0;he<Ce.length;he++)F.AddRow(Ce[he].DocumentName.toString()+"-Starting No",Ce[he].Prefix.toString()+Ce[he].MinNumber.toString(),!1,!1),F.AddRow(Ce[he].DocumentName.toString()+"-Ending No",Ce[he].Prefix.toString()+Ce[he].MAXNumber.toString(),!1,!1),""!=Ce[he].cnt.toString()&&(I+=parseInt(Ce[he].cnt.toString()));if(L.Amount=I,j.Tables.length>4&&j.Tables[4].length>0)for(let he=0;he<v.length;he++){let se=F.Parent.ScreenObject.ColumnSource.find(z=>z.DisplayMember.toLowerCase()==v[he].toLowerCase());null!=se&&(L=F.AddRow(se.Header,j.Tables[4][0][he].toString(),"FLOAT"==se.DataType,!1))}if(F.AddRow("","",!1,!1),F.Parent.ScreenObject.Preferences.ContainsKey("POSFields")&&""!=F.Parent.ScreenObject.Preferences.POSFields)for(let he=0;he<v.length;he++)if(null==F.Parent.ScreenObject.ColumnSource.find(z=>z.DisplayMember.toLowerCase()==v[he].toLowerCase())){let z=F.DTPayModes.filter(N=>N.SysColumnName.toLowerCase()==v[he].toLowerCase());if(z.length>0){F.AddRow(z[0].Name.toString(),"",!1,!0),z[0].Name="  "+z[0].Name;let ee,N=0;if("5"==z[0].Type.toString()){if(j.Tables.length>2&&j.Tables[2].length>0&&j.Columns[2].Contains("Amount"))for(let Z=0;Z<j.Tables[2].length;Z++)L="300"==j.Tables[2][Z].RefCCID.toString()?F.AddRow("  Opening "+z[0].Name.toString(),j.Tables[2][Z].Amount.toString(),!0,!1):F.AddRow(z[0].Name.toString()+" IN",j.Tables[2][Z].Amount.toString(),!0,!1),L.SysColumnName=z[0].SysColumnName.toString(),L.Type=z[0].Type.toString(),""!=j.Tables[2][Z].Amount.toString()&&(!F.Parent.ScreenObject.Preferences.ContainsKey("DonotConsiderOpeningInPaymode")||""==F.Parent.ScreenObject.Preferences.DonotConsiderOpeningInPaymode||!(0,re.yG0)(F.Parent.ScreenObject.Preferences.DonotConsiderOpeningInPaymode)||"300"!=j.Tables[2][Z].RefCCID.toString())&&(N+=parseFloat(j.Tables[2][Z].Amount.toString()));j.Tables.length>3&&j.Tables[3].length>0&&j.Columns[3].Contains("Amount")&&""!=j.Tables[3][0].Amount.toString()&&(L=F.AddRow(z[0].Name.toString()+" OUT",j.Tables[3][0].Amount.toString(),!0,!1),L.SysColumnName=z[0].SysColumnName.toString(),L.Type=z[0].Type.toString(),""!=j.Tables[3][0].Amount.toString()&&(N-=parseFloat(j.Tables[3][0].Amount.toString())))}if("5"==z[0].Type.toString()?(ee=0,j.Tables[0].length>0&&""!=j.Tables[0][0][j.Columns[0][he]].toString()&&(ee+=parseFloat(j.Tables[0][0][j.Columns[0][he]].toString())),j.Tables.length>5&&j.Tables[5].length>0&&""!=j.Tables[5][0][j.Columns[0][0]].toString()&&(ee-=parseFloat(j.Tables[5][0][j.Columns[0][0]].toString())),N+=ee,L=F.AddRow(z[0].Name.toString()+" Sales",ee.toString(),!0,!1),F.DtReportObj.TableColumns.Contains("PostJV")&&null!=E&&E.Contains(v[he])&&(L.SysColumnName=v[he],L.PostJV=1)):(L=F.AddRow(z[0].Name.toString(),j.Tables[0].length>0?j.Tables[0][0][j.Columns[0][he]].toString():"0",!0,!1),j.Tables[0].length>0&&""!=j.Tables[0][0][j.Columns[0][he]].toString()&&(N+=parseFloat(j.Tables[0][0][j.Columns[0][he]].toString())),F.DtReportObj.TableColumns.Contains("PostJV")&&null!=E&&E.Contains(v[he])&&(L.SysColumnName=v[he],L.PostJV=1)),L.SysColumnName=z[0].SysColumnName.toString(),L.Type=z[0].Type.toString(),j.Tables.length>7&&j.Tables[7].length>0&&""!=j.Tables[7][0][j.Columns[0][he]].toString()&&(L=F.AddRow(z[0].Name.toString()+" Reciept",j.Tables[7][0][j.Columns[0][he]].toString(),!0,!1),N+=parseFloat(j.Tables[7][0][j.Columns[0][he]].toString())),j.Tables.length>8&&j.Tables[8].length>0&&""!=j.Tables[8][0][j.Columns[0][he]].toString()&&(L=F.AddRow(z[0].Name.toString()+" Orders",j.Tables[8][0][j.Columns[0][he]].toString(),!0,!1),N+=parseFloat(j.Tables[8][0][j.Columns[0][he]].toString())),j.Tables.length>9&&j.Tables[9].length>0&&""!=j.Tables[9][0][j.Columns[0][he]].toString()&&(L=F.AddRow(z[0].Name.toString()+" Gift vouchers",j.Tables[9][0][j.Columns[0][he]].toString(),!0,!1),N+=parseFloat(j.Tables[9][0][j.Columns[0][he]].toString())),j.Tables.length>4&&j.Tables[4].length>0&&""!=j.Tables[4][0][j.Columns[0][he]].toString()&&("5"==z[0].Type.toString()?(ee=0,""!=j.Tables[4][0][he].toString()&&(ee+=parseFloat(j.Tables[4][0][j.Columns[0][he]].toString())),j.Tables.length>6&&j.Tables[6].length>0&&""!=j.Tables[6][0][j.Columns[0][0]].toString()&&(ee-=parseFloat(j.Tables[6][0][j.Columns[0][0]].toString())),N-=ee,null!=L&&F.DtReportObj.TableColumns.Contains("PostJV")&&"1"==L.PostJV.toString()&&""!=L.AmountActual.toString()&&ee>0&&(L.AmountActual=parseFloat(L.AmountActual.toString())-ee),L=F.AddRow("  Sales Return",ee.toString(),!0,!1)):(null!=L&&F.DtReportObj.TableColumns.Contains("PostJV")&&"1"==L.PostJV.toString()&&""!=L.AmountActual.toString()&&""!=j.Tables[4][0][j.Columns[0][he]].toString()&&(L.AmountActual=parseFloat(L.AmountActual.toString())-parseFloat(j.Tables[4][0][j.Columns[0][he]].toString())),L=F.AddRow("  Sales Return",j.Tables[4][0][j.Columns[0][he]].toString(),!0,!1),N-=parseFloat(j.Tables[4][0][he].toString())),L.SysColumnName=z[0].SysColumnName.toString(),L.Type=z[0].Type.toString()),L=F.AddRow(z[0].Name.toString()+" @Register",O.J0.IsEmpty(z[0].Amount)?"0":z[0].Amount.toString(),!0,!1),L.SysColumnName=z[0].SysColumnName.toString(),L.Type=z[0].Type.toString(),F.DtDiffPosting.Tables.length>0&&F.DtDiffPosting.Columns[0].Contains("Name")){var ne=F.DtDiffPosting.Tables[0].filter(Z=>Z.Name==-L.Type.toString());F.DtReportObj.TableColumns.Contains("PostJV")&&ne.length>0&&(L.SysColumnName="RegPOs",L.PostJV=1)}if(N=O.J0.IsEmpty(z[0].Amount)?-N:parseFloat(z[0].Amount.toString())-N,N=parseFloat(N.ToString("N"+H.d.SessionManager.Preferences.DecimalsinAmount)),0!=N&&!F.IsDiff&&(F.IsDiff=!0),L=F.AddRow(z[0].Name.toString()+" Diff",N.toString(),!0,!1),L.SysColumnName=z[0].SysColumnName.toString(),L.Type=z[0].Type.toString(),F.DtDiffPosting.Tables.length>0&&F.DtDiffPosting.Columns[0].Contains("Name")){let Z=F.DtDiffPosting.Tables[0].filter(fe=>fe.Name==L.Type);F.DtReportObj.TableColumns.Contains("PostJV")&&Z.length>0&&(L.SysColumnName="DiffPOs",L.PostJV=1)}}else{let N=F.Parent.ScreenObject.Data.Tables[0].filter(ee=>ee.SysColumnName.toLowerCase()==v[he].toLowerCase());N.length>0&&(j.Tables[0].length>0&&(L=F.AddRow(N[0].ResourceData.toString(),j.Tables[0][0][j.Columns[0][he]].toString(),!1,!1)),F.DtReportObj.TableColumns.Contains("PostJV")&&null!=E&&E.Contains(v[he])&&(L.SysColumnName=v[he],L.PostJV=1))}}if(null!=F.Denom&&null!=F.Denom.GrdDenomination&&null!=F.Denom.GrdDenomination.Table&&F.Denom.GrdDenomination.Table.length>0&&F.Denom.GrdDenomination.TableColumns.Contains("Notes")&&F.Denom.GrdDenomination.TableColumns.Contains("NotesTender")){L=F.AddRow("Denominations","",!1,!0);for(let he=0;he<F.Denom.GrdDenomination.Table.length;he++)!O.J0.IsEmpty(F.Denom.GrdDenomination.Table[he].Notes.toString())&&!O.J0.IsEmpty(F.Denom.GrdDenomination.Table[he].NotesTender.toString())&&(L=F.AddRow(F.Denom.GrdDenomination.Table[he].Notes.toString()+" X "+F.Denom.GrdDenomination.Table[he].NotesTender.toString(),(parseFloat(F.Denom.GrdDenomination.Table[he].Notes.toString())*parseFloat(F.Denom.GrdDenomination.Table[he].NotesTender.toString())).toString(),!1,!1));F.AddRow("Total",F.Denom.GetTotal().toString(),!1,!1)}}F.ExitGrid.Table=F.DtReport,F.ExitGrid.refreshDatawithIDs()})()}AddRow(j,F,ne,v){let E=new ye.Ji(this.oReport.ReportColumns.length);v&&(E.Cells[0].IsNormal=!1,E.Cells[0].CellAppearance=this.oReport.ReportColumns[0].DataAppearance.Clone(),E.Cells[0].CellAppearance.IsBold=!0,E.Cells[0].IsNormal=!1,E.Cells[1].CellAppearance=this.oReport.ReportColumns[1].DataAppearance.Clone(),E.Cells[1].CellAppearance.IsBold=!0),E.Cells[0].Text=j;let L=0;ne?(L=O.J0.DoubleTryParse(F),this.oReport.SetCellValue(L,this.oReport.ReportColumns[1].DataFormat,"FLOAT",E.Cells[1])):E.Cells[1].Text=F,this.oReport.Data.push(E);let I=this.DtReportObj.NewRow();return I.NameWithKey=j,v&&(I.StyleIsBold="1"),ne?(I.Amount=E.Cells[1].Text,I.AmountActual=L,j.Contains("Diff")&&(L>0&&(I.Row_Background="GREEN"),L<0&&(I.Row_Background="RED"))):I.Amount=F,this.DtReport.push(I),I}GetJVXML(j,F){if(F.IsValid=!0,!this.DtReportObj.TableColumns.Contains("PostJV"))return"";let v=this.Parent.ScreenObject.GenerateQueryfromList(this.Parent.ScreenObject._CCFields,!0,{message:""},!1,!1);H.d.SessionManager.RegisterCCID>0&&this.Parent.ScreenObject.RegisterNodeID>0&&!v.toString().Contains("dcCCNID"+(H.d.SessionManager.RegisterCCID-5e4).toString()+"=")&&(v+=" dcCCNID"+(H.d.SessionManager.RegisterCCID-5e4).toString()+"="+this.Parent.ScreenObject.RegisterNodeID.toString()+", "),this.Parent.ScreenObject.Preferences.ContainsKey("PosJVOn")&&"2"==this.Parent.ScreenObject.Preferences.PosJVOn&&H.d.SessionManager.Preferences.PosShifts.length>0&&parseInt(H.d.SessionManager.Preferences.PosShifts)>5e4&&this.Parent.ScreenObject.ShiftNodeID>0&&!v.toString().Contains("dcCCNID"+(parseInt(H.d.SessionManager.Preferences.PosShifts)-5e4).toString()+"=")&&(v+=" dcCCNID"+(parseInt(H.d.SessionManager.Preferences.PosShifts)-5e4).toString()+"="+this.Parent.ScreenObject.ShiftNodeID.toString()+", ");let E,L,ie,I="";for(let se=0;se<this.DtReport.length;se++)if("1"==O.J0.StringValue(this.DtReport[se].PostJV)&&!O.J0.IsEmpty(this.DtReport[se].AmountActual)&&(ie="DiffPOs"==this.DtReport[se].SysColumnName.toString()?this.DtDiffPosting.Tables[0].filter(z=>z.Name==this.DtReport[se].Type.toString()):"RegPOs"==this.DtReport[se].SysColumnName.toString()?this.DtDiffPosting.Tables[0].filter(z=>z.Name="-"+this.DtReport[se].Type.toString()):this.Parent.ScreenObject.Data.Tables[0].filter(z=>z.SysColumnName==this.DtReport[se].SysColumnName.toString()),ie.length>0)){if(E=O.J0.IntTryParse(ie[0].DebitAccount.toString()),L=O.J0.IntTryParse(ie[0].CreditAccount.toString()),E<=0&&ie[0].Table.Columns.Contains("DrRefColID")&&""!=ie[0].DrRefColID.toString()&&parseInt(ie[0].DrRefColID.toString())>0){let z=this.Parent.ScreenObject._CCFields.find(N=>N.DBColumnName.toLowerCase()==ie[0].DRSysColumnName.toString().toLowerCase());null!=z&&z instanceof Y.y$&&z.SelectedValue>0&&(E=this.Parent.ScreenObject.GetAccountByRef(parseInt(ie[0].DrRefID.toString()),parseInt(ie[0].DrRefColID.toString()),z.SelectedValue))}if(L<=0&&ie[0].Table.Columns.Contains("CrRefColID")&&""!=ie[0].CrRefColID.toString()&&parseInt(ie[0].CrRefColID.toString())>0){let z=this.Parent.ScreenObject._CCFields.find(N=>N.DBColumnName.toLowerCase()==ie[0].CRSysColumnName.toString().toLowerCase());null!=z&&z instanceof Y.y$&&z.SelectedValue>0&&(L=this.Parent.ScreenObject.GetAccountByRef(parseInt(ie[0].CrRefID.toString()),parseInt(ie[0].CrRefColID.toString()),z.SelectedValue))}if(this.DtReportObj.TableColumns.Contains("DebitAccount")||this.DtReportObj.TableColumns.push("DebitAccount"),this.DtReportObj.TableColumns.Contains("CreditAccount")||this.DtReportObj.TableColumns.push("CreditAccount"),!(E>0))return F.IsValid=!1,this.DisplayMessage="DebitAccount not defined for "+this.DtReport[se].NameWithKey.toString(),this.MessageVisibility=!0,"";if(this.DtReport[se].DebitAccount=E,!(L>0))return F.IsValid=!1,this.DisplayMessage="Credit not defined for "+this.DtReport[se].NameWithKey.toString(),this.MessageVisibility=!0,"";this.DtReport[se].CreditAccount=L,I+=E+",",I+=L+","}I.length>1&&(I=I.Remove(0,I.length));let ce=this.Parent.ScreenObject.CheckIsBillWise(I),Ce=1,he="";for(let se=0;se<this.DtReport.length;se++)"1"==O.J0.StringValue(this.DtReport[se].PostJV)&&O.J0.IsEmpty(this.DtReport[se].AmountActual)&&0!=parseFloat(this.DtReport[se].AmountActual.toString())&&(he+='<Row><Transactions   DocDetailsID="0"  DocSeqNo="'+Ce+'" Amount="'+this.DtReport[se].AmountActual.toString().Replace("-","")+'" ',he+=' AmtFc="'+this.DtReport[se].AmountActual.toString().Replace("-","")+'"  CurrencyID="1"  ExchangeRate="1" ',parseFloat(this.DtReport[se].AmountActual.toString())>0?he+='DebitAccount="'+this.DtReport[se].DebitAccount.toString()+'" CreditAccount="-99" ></Transactions> ':he+='CreditAccount="'+this.DtReport[se].DebitAccount.toString()+'" DebitAccount="-99" ></Transactions> ',he+=' <Numeric /> <Alpha /> <CostCenters  Query="'+v+'"  /> <EXTRAXML>',null!=ce&&ce.Tables.length>0&&ce.Columns[0].Contains("AccountId")&&(ie=ce.Tables[0].filter(z=>z.AccountId==this.DtReport[se].DebitAccount.toString()),ie.length>0&&"true"==ie[0].IsBillwise.toString().toLowerCase()&&(he+='<BillWise> <Row DocSeqNo="'+Ce+'" AccountID="'+this.DtReport[se].DebitAccount.toString(),he+='" AmountFC="'+this.DtReport[se].AmountActual.toString()+'" AdjAmount="'+this.DtReport[se].AmountActual.toString()+'"',he+=' AdjCurrID="1" AdjExchRT="1" Narration=""  IsDocPDC="0" IsNewReference="1" ></Row></BillWise>')),he+="   </EXTRAXML>  </Row>",Ce++,he+='<Row><Transactions   DocDetailsID="0"  DocSeqNo="'+Ce+'" Amount="'+this.DtReport[se].AmountActual.toString().Replace("-","")+'" ',he+=' AmtFc="'+this.DtReport[se].AmountActual.toString().Replace("-","")+'"  CurrencyID="1"  ExchangeRate="1" ',parseFloat(this.DtReport[se].AmountActual.toString())>0?he+='DebitAccount="-99" CreditAccount="'+this.DtReport[se].CreditAccount.toString()+'" ></Transactions> ':he+='CreditAccount="-99" DebitAccount="'+this.DtReport[se].CreditAccount.toString()+'" ></Transactions> ',he+=' <Numeric /> <Alpha /> <CostCenters  Query="'+v+'"  /> <EXTRAXML>',null!=ce&&ce.Tables.length>0&&ce.Columns[0].Contains("AccountId")&&(ie=ce.Tables[0].filter(z=>z.AccountId==this.DtReport[se].CreditAccount.toString()),ie.length>0&&"true"==ie[0].IsBillwise.toString().toLowerCase()&&(he+='<BillWise> <Row DocSeqNo="'+Ce+'" AccountID="'+this.DtReport[se].CreditAccount.toString(),he+='" AmountFC="-'+this.DtReport[se].AmountActual.toString()+'" AdjAmount="-'+this.DtReport[se].AmountActual.toString()+'"',he+=' AdjCurrID="1" AdjExchRT="1" Narration=""  IsDocPDC="0" IsNewReference="1" ></Row></BillWise>')),he+="   </EXTRAXML>  </Row>",Ce++);return he.length>0&&(he="<DocumentXML>"+he+"</DocumentXML>"),he.toString()}CloseSession(){let j,F,v="",E="";if(this.CloseType>0&&(E+="<XML>",this.DTPayModes.forEach(ie=>{E+='<Row Type="'+O.J0.String(ie.Type),E+='" SysColName="'+O.J0.String(ie.SysColumnName),E+='" Name="'+O.J0.String(ie.Name),E+='" Amount="'+O.J0.String(ie.Amount)+'" />',"5"==ie.Type.toString()&&0!=O.J0.String(ie.DenomXML).length&&(this.DenomXML=ie.DenomXML.toString())}),E+="</XML>"),1==this.CloseType&&this.Parent.ScreenObject.Preferences.ContainsKey("PosJVOn")&&"1"==this.Parent.ScreenObject.Preferences.PosJVOn||2==this.CloseType&&this.Parent.ScreenObject.Preferences.ContainsKey("PosJVOn")&&"2"==this.Parent.ScreenObject.Preferences.PosJVOn){let ie={IsValid:""};if(v=this.GetJVXML(!0,ie),j=ie.IsValid,!j)return this.Parent.DisplayMessage=this.DisplayMessage,this.Parent.MessageVisibility=!0,void H.d.page.HideDialog(this.PopUpGUID)}let L=this.Parent.ScreenObject.ShiftNodeID;5==this.CloseType&&this.Shift.Visible&&this.Shift.SelectedValue>0&&(L=this.Shift.SelectedValue),F=H.d.admin.POSLogin(this.Parent.ScreenObject.RegisterNodeID,L,this.Parent.DocumentDate,this.CloseType,this.DenomXML,v,E.toString()).obj,(F>0||-100==F)&&(this.DayClose.IsChecked&&this.DayClose.Visible?F=H.d.admin.POSLogin(this.Parent.ScreenObject.RegisterNodeID,L,this.Parent.DocumentDate,1,"","","").obj:-100==F&&(confirm("All shifts are closed.Closing the Day.")||H.d.admin.POSLogin(this.Parent.ScreenObject.RegisterNodeID,L,this.Parent.DocumentDate,1,"","","")),this.CloseType>0&&(this.Parent.ScreenObject.Preferences.ContainsKey("DonotConsiderOpeningInPaymode")&&""!=this.Parent.ScreenObject.Preferences.DonotConsiderOpeningInPaymode&&(0,re.yG0)(this.Parent.ScreenObject.Preferences.DonotConsiderOpeningInPaymode)&&(this.ExitGrid.SelectedItem=null,this.Denom=new k.AddDenominationViewModel(this,null),this.Denom.Currency.Label="Closing Imprest",H.d.page.ShowDialog(this.Denom,B.AddDenominationComponent)),this.CallPrint(L)),H.d.page.HideDialog(this.PopUpGUID),H.d.page.removeActiveTab())}AddDenom(){this.ExitGrid.SelectedItem.DenomXML=this.Denom.GetXML(),this.ExitGrid.SelectedItem.Amount=this.Denom.GetTotal(),H.d.page.HideDialog(this.PopUpGUID)}CallPrint(j){this.NewPrintCode(j)}ExportFile(j,F,ne){this.DisplayMessage="Print"==j?"Printing data please wait...":"Exporting data please wait...";let v={};F.InitPrintOrExport(v),v.Type=j;let E="";E=null!=F.FromDatePicker?F.FromDatePicker.Date.ToString("dd/MMM/yyyy"):this.Parent.DocumentDate.ToString("dd/MMM/yyyy"),v.PrintDataOnSeperatePageBy=H.d.SessionManager.Preferences.ContainsKey("PrintDataOnSeperatePageBy")?H.d.SessionManager.Preferences.PrintDataOnSeperatePageBy:"",v.DimensionFiltersKeys.Clear(),v.DimensionFiltersValues.Clear(),v.DimensionFiltersKeys.push(H.d.SessionManager.RegisterCCID),v.DimensionFiltersValues.push(this.Parent.ScreenObject.RegisterNodeID.toString()),H.d.SessionManager.Preferences.PosShifts.length>0&&parseInt(H.d.SessionManager.Preferences.PosShifts)>5e4&&(v.DimensionFiltersKeys.push(H.d.SessionManager.Preferences.PosShifts),v.DimensionFiltersValues.push(ne.toString())),H.d.SessionManager.DivisionID>0&&(v.DimensionFiltersKeys.push(50001),v.DimensionFiltersValues.push(H.d.SessionManager.DivisionID.toString())),H.d.SessionManager.LocationID>0&&(v.DimensionFiltersKeys.push(50002),v.DimensionFiltersValues.push(H.d.SessionManager.LocationID.toString())),"PDF"==j?v.lst=[]:"Print"==j?(v.lst=[],v.Type="PDF"):("Excel"==j||"OpenXML"==j)&&(v.lst=[]),v.al="al",H.d.report.ExportReport(F.Data,F.ReportColumns,v,"POSEXIT",[],[],E).subscribe(L=>{"Print"==j?H.d.SessionManager.printTab(L.FileName):(H.d.SessionManager.Download(L.FileName,"khasim"),O.J0.IsEmpty(L.Message)&&!O.J0.IsEmpty(L.FileName)&&(this.DisplayMessage="Exported Successfully"))},L=>{console.log(L)})}NewPrintCode(j){let F="<XML><Row ColID='FROMDATE' Value='"+this.Parent.DocumentDate.ToString("dd MMM yyyy")+"'/>";F+="<Row ColID='TODATE' Value='"+this.Parent.DocumentDate.ToString("dd MMM yyyy")+"'/>",F+="<Row ColID='"+H.d.SessionManager.RegisterCCID+"' Value='"+this.Parent.ScreenObject.RegisterNodeID+"'/>",this.Parent.ScreenObject.LocationID>0&&(F+="<Row ColID='50002' Value='"+this.Parent.ScreenObject.LocationID+"'/>"),H.d.SessionManager.Preferences.PosShifts.length>0&&parseInt(H.d.SessionManager.Preferences.PosShifts)>5e4&&j>0&&(F+="<Row ColID='"+H.d.SessionManager.Preferences.PosShifts+"' Value='"+j+"'/>"),F+="</XML>";let ne=new D.ReportViewModel;return ne.RecordCount="",ne.PostFilterData=[],ne.ReportSummaryData=[],ne.ReportSummaryDataColumns=[],ne.ReportViewModel_Document(50,F,190,!0,this,null),this.ExportFile("Print",ne,j),""}GetReportDataTable(){let F=[];return this.ExitGrid.Table.forEach(ne=>{let v={};v.RegID=this.Parent.ScreenObject.RegisterNodeID,v.RegName=this.Parent.ScreenObject.RegisterNodeID.toString(),v.Name=ne.NameWithKey,v.StyleIsBold=ne.StyleIsBold,v.Value=v[this.Parent.DocumentDate.ToString("ddMMMyyyy")]=ne.Amount.toString(),F.push(v)}),F.length>0&&(F[0].CloseType=3==this.CloseType?"UserClose":2==this.CloseType?"ShiftClose":"DAY CLOSE"),F}OnPreviewKeyDown(j){if(this.IsPayMode)if(112==j.keyCode)this.IsPayMode&&(null!=this.ExitGrid.SelectedItem&&"5"==this.ExitGrid.SelectedItem.Type.toString()?(this.Denom.Currency.Label="Cash Collection",this.Denom=new k.AddDenominationViewModel(this,this.ExitGrid.SelectedItem.DenomXML.toString()),H.d.page.ShowDialog(this.Denom,B.AddDenominationComponent)):this.ExitGrid.Table.forEach(F=>{"5"==F.Type.toString()&&(this.ExitGrid.SelectedItem=F,this.Denom.Currency.Label="Cash Collection",this.Denom=new k.AddDenominationViewModel(this,this.ExitGrid.SelectedItem.DenomXML.toString()),H.d.page.ShowDialog(this.Denom,B.AddDenominationComponent))}));else if(j.keyCode>=91&&j.keyCode<=101){let F=j.keyCode-91;F<this.ExitGrid.Table.length&&(this.ExitGrid.ColumnNo=1,this.ExitGrid.LineNo=F+1,this.ExitGrid.SetFocusongrid=!0)}}}},88281:(qe,be,t)=>{"use strict";t.d(be,{m:()=>H});var m=t(32057);function A(ue,q){1&ue&&m.eu8(0)}function G(ue,q){if(1&ue&&(m.j41(0,"div"),m.EFF(1,"\n            "),m.DNE(2,A,1,0,"ng-container",5),m.EFF(3,"\n        "),m.k0s()),2&ue){m.XpG();const ye=m.sdS(11);m.R7$(2),m.Y8G("ngTemplateOutlet",ye)}}function J(ue,q){1&ue&&m.eu8(0)}function Y(ue,q){if(1&ue&&(m.j41(0,"div"),m.EFF(1,"\n            "),m.DNE(2,J,1,0,"ng-container",5),m.EFF(3,"\n        "),m.k0s()),2&ue){m.XpG();const ye=m.sdS(14);m.R7$(2),m.Y8G("ngTemplateOutlet",ye)}}function oe(ue,q){if(1&ue&&(m.j41(0,"div"),m.EFF(1,"\n        "),m.eu8(2,9),m.EFF(3,"\n    "),m.k0s()),2&ue){const ye=m.XpG(2);m.R7$(2),m.Y8G("obj",ye.obj.Grid)}}function X(ue,q){if(1&ue){const ye=m.RV6();m.EFF(0,"\n    "),m.DNE(1,oe,4,1,"div",4),m.EFF(2,"\n    "),m.j41(3,"div",6),m.EFF(4," \n        "),m.j41(5,"div"),m.EFF(6,"    \n          "),m.j41(7,"button",7),m.bIt("click",function(){m.eBV(ye);const O=m.XpG();return m.Njj(O.obj.OnButtonClick("Cancel"))}),m.nrm(8,"i",8),m.EFF(9),m.nI1(10,"translate"),m.k0s(),m.EFF(11," \n        "),m.k0s(),m.EFF(12,"       \n    "),m.k0s(),m.EFF(13,"\n")}if(2&ue){const ye=m.XpG();m.R7$(),m.Y8G("ngIf",ye.obj.IsShown),m.R7$(8),m.JRh(m.bMT(10,2,"Cancel"))}}function k(ue,q){if(1&ue){const ye=m.RV6();m.EFF(0,"\n    "),m.j41(1,"div",3),m.EFF(2,"\n        "),m.eu8(3,10),m.EFF(4,"\n    "),m.k0s(),m.EFF(5,"\n    "),m.j41(6,"div",6),m.EFF(7," \n        "),m.j41(8,"div"),m.EFF(9,"\n          "),m.j41(10,"button",7),m.bIt("click",function(){m.eBV(ye);const O=m.XpG();return m.Njj(O.obj.ButtonClick.Call("Save"))}),m.nrm(11,"i",11),m.EFF(12),m.nI1(13,"translate"),m.k0s(),m.EFF(14," \n          "),m.j41(15,"button",7),m.bIt("click",function(){m.eBV(ye);const O=m.XpG();return m.Njj(O.obj.ButtonClick.Call("Cancel"))}),m.EFF(16),m.nI1(17,"translate"),m.k0s(),m.EFF(18," \n        "),m.k0s(),m.EFF(19,"       \n    "),m.k0s(),m.EFF(20,"\n")}if(2&ue){const ye=m.XpG();m.R7$(3),m.Y8G("obj",ye.obj.Name)("group",ye.group),m.R7$(9),m.JRh(m.bMT(13,4,"Save")),m.R7$(4),m.JRh(m.bMT(17,6,"Cancel"))}}let H=(()=>{class ue{constructor(){this.constructorName=""}ngOnInit(){this.constructorName=this.obj.ClassName}static#e=this.\u0275fac=function(re){return new(re||ue)};static#t=this.\u0275cmp=m.VBU({type:ue,selectors:[["app-dialog"]],inputs:{obj:"obj"},decls:15,vars:2,consts:[["StatusAssignGridViewModel",""],["QuickAddLookupsViewModel",""],[1,"master-screen",2,"width","599px"],[1,"PACTHeaderFields","dialogSubBody"],[4,"ngIf"],[4,"ngTemplateOutlet"],[1,"Pactdailogfooter"],[1,"primary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"],["FieldDirective","",3,"obj"],["FieldDirective","",3,"obj","group"],[1,"fa-light","fa-floppy-disk"]],template:function(re,O){1&re&&(m.j41(0,"div",2),m.EFF(1,"\n    "),m.j41(2,"div",3),m.EFF(3,"\n        "),m.DNE(4,G,4,1,"div",4),m.EFF(5,"\n        "),m.DNE(6,Y,4,1,"div",4),m.EFF(7,"\n    "),m.k0s(),m.EFF(8," \n"),m.k0s(),m.EFF(9,"\n"),m.DNE(10,X,14,4,"ng-template",null,0,m.C5r),m.EFF(12,"\n\n"),m.DNE(13,k,21,8,"ng-template",null,1,m.C5r)),2&re&&(m.R7$(4),m.Y8G("ngIf","StatusAssignGridViewModel"==O.constructorName),m.R7$(2),m.Y8G("ngIf","QuickAddLookupsViewModel"==O.constructorName))},encapsulation:2})}return ue})()},16435:(qe,be,t)=>{"use strict";t.d(be,{EQ:()=>k,NP:()=>q,Y6:()=>H,ii:()=>B,mr:()=>re,ph:()=>X,yg:()=>ye});var m=t(9120),A=t(31168),G=t(18088),J=t(48955),Y=t(21050);class X{constructor(){this.ComponentID=0,this.TaxMap=0,this.DrAccount=0,this.CrAccount=0,this.Type=0,this.SNo=0,this.IsEditable=1,this.IsReadOnly=0,this.IsVisible=1,this.Decimals=0,this.ComponentName="",this.Formula="",this.AddToNet="",this.FieldType="",this.Applicable="",this.Behaviour="",this.Expression="",this.CarryForward="",this.IncludeRExclude="",this.Message="",this.Action="",this.CalculateArrears="",this.CalculateAdjustments="",this.MaxOTHrs=0,this.ROff=0,this.Percentage=0,this.MaxLeaves=0,this.AtATime=0,this.MaxCarryForwardDays=0,this.MaxEncashDays=0,this.dOTDailyValue=0,this.dPrevAccEar=0,this.dPrevAccAdj=0,this.dActual="0",this.dEarned="0",this.dArrear="0",this.dAdjusted="0",this.LoanSlNo="",this.LoanDocNo="",this.LoanInvDocDetailsID="",this.LoanApprovedAmt="",this.LoanInstNo="",this.LoanActInstNo="",this.LoanActInstAmt="",this.LoanInstAmt="",this.LoanBalAmt="",this.LoanPayStatus="",this.LoanNodeNo="",this.LeaveTotOPBal="",this.LeaveMonOPBal="",this.ActLeaveTaken="",this.LeaveTaken="",this.LeaveNetBal="",this.EncashLeavetaken="",this.ExtraFieldSNo="",this.ExtraFieldDataType="",this.ExtraFieldUserColumnType="",this.ExtraFieldName="",this.ExtraFieldCaption="",this.ExtraFieldValue="",this.sEarDedType="0",this.IsAccrualType=!1,this.isArrCalculated=!1}}class k{constructor(){this.GradeID=1,this.EmpGradeID=1,this.CurrencyID=1,this.DocID=0,this.StatusID=0,this.VacationComponentID=-1,this.EmpSeqNo="",this.EmpCode="",this.EmpName="",this.DocNo="",this.DocStatus="",this.sErrorMessage="",this.totOTHours="0.00",this.sRemarks="",this.sResignType="",this.sEmpWorkingCountry="",this.sArrCalcMonthPaydays="",this.sArrsCalcMonths="",this.sAdjCalcMonthPaydays="",this.sAdjsCalcMonths="",this.DaysAttended=0,this.PaidLeaves=0,this.TotalLeaves=0,this.WeeklyOffs=0,this.Holidays=0,this.LOPDays=0,this.UnpaidDays=0,this.PaidDays=0,this.TotalDays=0,this.MonthDays=0,this.dServiceDays=0,this.dServiceYears=0,this.dblLeavesLOP=0,this.dblTotVacDays=0,this.dblTotMVacDays=0,this.dblTotVacAmount=0,this.dblTotVacEncashDays=0,this.dblTotVacEncashAmount=0,this.dblTotVacExcessDays=0,this.dblTotVacExcessAmount=0,this.dblTotVacNetAmount=0,this.ActDaysAttended=0,this.UnPaidWeeklyOffs=0,this.UnPaidHolidays=0,this.GratuityAmount=0,this.NetSalary=0,this.dPTApplicableAmt=0,this.BasicMonthly=0,this.dblGrossSalary=0,this.totEarnings=0,this.totEarArrears=0,this.totEarAdjustments=0,this.totOTAmount=0,this.totDeductions=0,this.totDedArrears=0,this.totDedAdjustments=0,this.totActEarnings=0,this.totActDeductions=0,this.totLoans=0,this.totOPBalLeaves=0,this.totLeavesTaken=0,this.totNetBalLeaves=0,this.totAccrualsAct=0,this.totAccrualsEar=0,this.totAccrualsArr=0,this.totAccrualsAdj=0,this.dVacDaysUptoLastMonth=0,this.dGosi=0,this.PreviousMonthPaidDays=0,this.PreviousMonthVacationDays=0,this.PTIndex=-1,this.WID=0,this.iExtLoansCnt=0,this.DateOfJoining=A.J0.GetEmptyDate(),this.DateOfRelieve=A.J0.GetEmptyDate(),this.AppraisalMonth=A.J0.GetEmptyDate(),this.IsAlreadyProcessed=!1,this.IsAllowOT=!1,this.IsFinalSettlement=!1}}class H{constructor(){this.EmpSeqNo=0,this.AppliedDays=0,this.NotAttendedDays=0,this.Salary=0,this.Encash=0,this.LOP=0,this.Deductions=0,this.Loans=0,this.OpSalary=0,this.NetSalary=0,this.LOPDays=0,this.EncashDays=0,this.ClosingBalance=0,this.PaidDays=0,this.CreditDays=0,this.ExcessDays=0,this.IsEncashDays=!1,this.PayExcessDaysboolean=!1,this.IsEncashVacationboolean=!1,this.IsLeaveboolean=!1,this.ActRejoinDate=""}}class ue{constructor(){this.ID=0,this.SNo=0,this.EmpNode=0,this.TypeId=0,this.ComponentID=0,this.EnCash=0,this.ExcessdaysSalary=0,this.SName="",this.TypeName="",this.ComponentName="",this.Formula="",this.Percentage="",this.Amount="",this.ActualAmount="",this.PercActualAmount=""}}class q{constructor(){this.EmpNode=1,this.ShiftNode=1,this.ADocID=0}}class ye{constructor(){this.fldDict=new G.bT,this.arrLstCPFields=Array(),this.sEmpSeqNo="0",this.dtAsonDate=new Date,this.dAdjDays=0,this.dsAllEmpsData=null,this.oVacAmountField=null,this.iDocID=0,this.lstAccrAccumulateSNos=new Array,this.isValidGWSlabs=!1,this.isValidBulkAppraisal=!1,this.sEmpType="",this.sGender="",this.sMaritalStatus="",this.sNationality="",this.sReligion="",this.oCPField=null,this.lstHolidays=new Array,this.dGosi=0,this.dtHolidayDef=null,this.arrLstOthMPFields=new Array,this.arrLstCPFields=Array(7),this.arrLstCPFields[0]=Array(),this.arrLstCPFields[1]=Array(),this.arrLstCPFields[2]=Array(),this.arrLstCPFields[3]=Array(),this.arrLstCPFields[4]=Array(),this.arrLstCPFields[5]=Array(),this.arrLstCPFields[6]=Array(),this.othMPField=new k,this.arrLstOthMPFields.push(this.othMPField)}Intialize(){this.LoadStructure()}LoadStructure(){if(""!=this.sEmpSeqNo&&parseInt(this.sEmpSeqNo)>0&&(this.dsAllEmpsData=m.d.empService.LoadStructure(this.sEmpSeqNo,this.PayrollMonth.ToString("dd/MMM/yyyy"),this.PayrollMonthStart.ToString("dd/MMM/yyyy"),this.PayrollMonthEnd.ToString("dd/MMM/yyyy")),this.dsData=m.d.empService.LoadStructure_1(this.PayrollMonthEnd.ToString("dd/MMM/yyyy"),"AND EmpSeqNo IN("+this.sEmpSeqNo+")"),this.dsData1=m.d.empService.GetQueryData(0,"dvDimsData","","",""),null!=this.dsAllEmpsData&&this.dsAllEmpsData.Tables.length>0&&this.dsAllEmpsData.Tables[0].length>0)){this.drcAllEmpsData=this.dsAllEmpsData.Tables[0].filter(Z=>Z.EmpSeqNo=this.sEmpSeqNo),this.dtStructure=this.othMPField.IsFinalSettlement?this.dsAllEmpsData.Tables[37]:this.dsAllEmpsData.Tables[1],this.drcEmpPay=this.dsAllEmpsData.Tables[2].filter(Z=>Z.EmpSeqNo=this.sEmpSeqNo),this.drcEmpPay.length>0&&(this.othMPField.BasicMonthly=A.J0.StringIsNullOrEmpty(this.drcEmpPay[0].BasicMonthly)?0:parseFloat(this.drcEmpPay[0].BasicMonthly)),this.drcEmpGrades=this.dsAllEmpsData.Tables[12].filter(Z=>Z.EmpSeqNo==this.sEmpSeqNo),this.drcPTDimension=this.dsAllEmpsData.Tables[13].filter(Z=>Z.EmpSeqNo==this.sEmpSeqNo),this.drcAssLeaves=this.dsAllEmpsData.Tables[8].filter(Z=>Z.EmpSeqNo==this.sEmpSeqNo);let W,D=m.d.SessionManager.Preferences.WeeklyOffsDefBasedOn.split(","),x=" 1=1 ",p="";if(this.drcWOffDef=this.dsAllEmpsData.Tables[4],W=this.dsAllEmpsData.Tables[4],null!=D&&D.length>0)for(let Z=0;Z<D.length;Z++)null!=D[Z]&&""!=D[Z]&&(p="CCNID"+(parseInt(D[Z])-5e4),this.drcCCData=this.dsData.Tables[0].filter(fe=>fe.EmpSeqNo=this.sEmpSeqNo),null!=this.drcCCData&&this.drcCCData.length>0&&(p.Contains("CCNID51")?(x+=" AND ( "+p+"="+this.drcCCData[0].EmpSeqNo+" OR "+p+"= 1)",W=W.filter(fe=>fe[p]==this.drcCCData[0].EmpSeqNo||1==fe[p])):(x+=" AND ( "+p+"="+this.drcCCData[0][p]+" OR "+p+"= 1)",W=W.filter(fe=>fe[p]==this.drcCCData[0][p]||1==fe[p]))));" 1=1 "!=x&&(this.drcWOffDef=W);let T=this.dsAllEmpsData.Tables[5];if(D=m.d.SessionManager.Preferences.HolidaysBasedOn.split(","),x=" 1=1 ",p="",null!=D&&D.length>0)for(let Z=0;Z<D.length;Z++)null!=D[Z]&&""!=D[Z]&&(p="CCNID"+(parseInt(D[Z])-5e4),this.drcCCData=this.dsData.Tables[0].filter(fe=>fe.EmpSeqNo==this.sEmpSeqNo),null!=this.drcCCData&&this.drcCCData.length>0&&(p.Contains("CCNID51")?(x+=" AND ( "+p+"="+this.drcCCData[0].EmpSeqNo+" OR "+p+"= 1)",T=T.filter(fe=>fe[p]==this.drcCCData[0].EmpSeqNo||1==fe[p])):(x+=" AND ( "+p+"="+this.drcCCData[0][p]+" OR "+p+"= 1)",T=T.filter(fe=>fe[p]==this.drcCCData[0][p]||1==fe[p]))));if(" 1=1 "!=x&&(this.drcHolidayDef=T),this.drcDependentInfo=this.dsAllEmpsData.Tables[23].filter(Z=>Z.EmpSeqNo==this.sEmpSeqNo),this.drcLatesProc=this.dsAllEmpsData.Tables[31].filter(Z=>Z.EmpSeqNo==this.sEmpSeqNo),this.drcApprisal=this.dsAllEmpsData.Tables[34].filter(Z=>Z.EmpSeqNo==this.sEmpSeqNo),this.drcApprisal.length>0&&(this.AppraisalMonth=A.J0.ParseDate(this.drcApprisal[0].CEffectFrom)),this.drcAllApprisal=this.dsAllEmpsData.Tables[35].filter(Z=>Z.EmpSeqNo==this.sEmpSeqNo),null!=this.drcAllApprisal&&this.drcAllApprisal.length>0&&(this.drcAllApprisal=this.dsAllEmpsData.Tables[35].filter(Z=>Z.CEffectFrom<=this.PayrollMonthEnd.ToString("dd MMM yyyy")),null!=this.drcAllApprisal&&this.drcAllApprisal.length>1&&(this.drcStructure=this.dtStructure.filter(Z=>1==Z.Type&&"Yes"==Z.Applicable&&Z.GradeID==this.othMPField.GradeID),null!=this.drcStructure&&this.drcStructure.length>0)))for(let Z=0;Z<this.drcStructure.length;Z++)!A.J0.IsEmpty(m.d.SessionManager.Preferences.GosiComponent)&&m.d.SessionManager.Preferences.GosiComponent==this.drcStructure[Z].ComponentID.toString()&&(this.dGosi=parseFloat(this.drcAllApprisal[1]["Earning"+parseInt(this.drcStructure[Z].SNo)]));let R=0,le=0,j=0;this.lstAccrAccumulateSNos=new Array;let ce,F=0,ne=0,v=0,E=0,L=0,I=0,ie=0;if(this.othMPField.dPTApplicableAmt=this.othMPField.dblGrossSalary=0,"Actual Days"==m.d.SessionManager.Preferences.PayDays){let Z=A.J0.GetDateDifference(this.PayrollMonthEnd,this.PayrollMonthStart);R=parseInt(Z.toString())+1}else R=parseInt(m.d.SessionManager.Preferences.PayDays);if(this.othMPField.MonthDays=R,this.othMPField.DateOfJoining=A.J0.ParseDate(this.drcAllEmpsData[0].CDOJ),this.othMPField.DateOfRelieve=A.J0.ParseDate(null==this.drcAllEmpsData[0].CDORelieve||null==this.drcAllEmpsData[0].CDORelieve?"01-Jan-9000":this.drcAllEmpsData[0].CDORelieve),this.othMPField.dServiceDays=A.J0.GetDateDifference(this.dtAsonDate,this.othMPField.DateOfJoining)+1,this.othMPField.IsAllowOT=!(null==this.drcAllEmpsData[0].IsAllowOT||null==this.drcAllEmpsData[0].IsAllowOT||"No"==this.drcAllEmpsData[0].IsAllowOT.toString()),this.othMPField.GradeID="True"==m.d.SessionManager.Preferences.GradeWiseMonthlyPayroll.toString()&&null!=this.drcEmpGrades&&this.drcEmpGrades.length>0?parseInt(this.drcEmpGrades[0].GradeID):1,this.LeaveYearStartmonth=new Date(parseInt(this.PayrollMonthStart.ToString("yyyy")),parseInt(m.d.SessionManager.Preferences.LeaveYear.toString()),1),this.LeaveYearEndmonth=this.LeaveYearStartmonth.AddMonths(12).AddDays(-1),m.d.SessionManager.Preferences.ContainsKey("ConsiderGlobalPreferencesBasedOnGrade")&&"True"==m.d.SessionManager.Preferences.ConsiderGlobalPreferencesBasedOnGrade&&(this.drLeaveYear=this.dsAllEmpsData.Tables[40].filter(Z=>"LeaveYear"==Z.Name&&Z.GradeID==this.othMPField.GradeID),null!=this.drLeaveYear&&this.drLeaveYear.length>0&&(this.LeaveYearStartmonth=new Date(parseInt(this.PayrollMonthStart.ToString("yyyy")),parseInt(this.drLeaveYear[0].Value.toString()),1),this.LeaveYearEndmonth=this.LeaveYearStartmonth.AddMonths(12).AddDays(-1))),this.drcStructure=this.dtStructure.filter(Z=>Z.GradeID==this.othMPField.GradeID),ce=this.drcStructure,this.drcStructure=this.dtStructure.filter(Z=>1==Z.Type&&"Yes"==Z.Applicable&&"OverTime"!=Z.FieldType&&Z.GradeID==this.othMPField.GradeID),null!=this.drcStructure&&this.drcStructure.length>0)for(let Z=0;Z<this.drcStructure.length;Z++)this.oCPField=new X,this.oCPField.SNo=parseInt(this.drcStructure[Z].SNo),this.oCPField.ComponentID=parseInt(this.drcStructure[Z].ComponentID),this.oCPField.ComponentName=this.drcStructure[Z].ComponentName.toString(),this.oCPField.Formula=this.drcStructure[Z].Formula.toString(),this.oCPField.AddToNet=this.drcStructure[Z].AddToNet.toString(),this.oCPField.FieldType=this.drcStructure[Z].FieldType.toString(),this.oCPField.ROff=parseFloat(this.drcStructure[Z].ROff),this.oCPField.Behaviour=A.J0.IsEmpty(this.drcStructure[Z].Behaviour)?"":this.drcStructure[Z].Behaviour.toString(),("Accruals"==this.oCPField.Behaviour||"Accruals-AccumulateForPreviousYears"==this.oCPField.Behaviour)&&(this.oCPField.IsAccrualType=!0,"Accruals-AccumulateForPreviousYears"==this.oCPField.Behaviour&&this.lstAccrAccumulateSNos.push(this.oCPField.SNo)),"EmployeeMaster"==this.oCPField.FieldType?(this.oCPField.dActual=this.drcEmpPay.length>0?parseFloat(this.drcEmpPay[0]["Earning"+this.oCPField.SNo]).ToString(m.d.SessionManager.sPayrollDecimals):m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.oCPField.dEarned=this.oCPField.dActual):(this.oCPField.dActual=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.oCPField.dEarned=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals)),this.oCPField.dArrear=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.oCPField.dAdjusted=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.arrLstCPFields[0].push(this.oCPField);if(this.drcStructure=ce,this.drcStructure=this.dtStructure.filter(Z=>1==Z.Type&&"Yes"==Z.Applicable&&"OverTime"==Z.FieldType&&Z.GradeID==this.othMPField.GradeID),null!=this.drcStructure&&this.drcStructure.length>0)for(let Z=0;Z<this.drcStructure.length;Z++){if(this.oCPField=new X,this.oCPField.SNo=parseInt(this.drcStructure[Z].SNo),this.oCPField.ComponentID=parseInt(this.drcStructure[Z].ComponentID),this.oCPField.ComponentName=this.drcStructure[Z].ComponentName.toString(),this.oCPField.Formula=this.drcStructure[Z].Formula.toString(),this.oCPField.AddToNet=this.drcStructure[Z].AddToNet.toString(),this.oCPField.FieldType=this.drcStructure[Z].FieldType.toString(),this.oCPField.ROff=parseFloat(this.drcStructure[Z].ROff),this.othMPField.IsAllowOT)if("True"==m.d.SessionManager.Preferences.GetDailyAttendanceDataInMonthlyPayroll){let fe=A.J0.DTComputeSUM(this.dsAllEmpsData.Tables[14].filter(U=>U.EmpSeqNo==+this.sEmpSeqNo),"OT"+(Z+1),!0);this.oCPField.dActual=fe.ToString(m.d.SessionManager.sPayrollDecimals2)}else this.oCPField.dActual=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals2),this.oCPField.dEarned=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals);else this.oCPField.dActual=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals2),this.oCPField.dEarned=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals);this.oCPField.dArrear=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.oCPField.dAdjusted=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.arrLstCPFields[1].push(this.oCPField)}if(this.drcStructure=ce,this.drcStructure=this.dtStructure.filter(Z=>2==Z.Type&&"Yes"==Z.Applicable&&"OverTime"!=Z.FieldType&&Z.GradeID==this.othMPField.GradeID),null!=this.drcStructure&&this.drcStructure.length>0)for(let Z=0;Z<this.drcStructure.length;Z++)this.oCPField=new X,this.oCPField.SNo=parseInt(this.drcStructure[Z].SNo),this.oCPField.ComponentID=parseInt(this.drcStructure[Z].ComponentID),this.oCPField.ComponentName=this.drcStructure[Z].ComponentName.toString(),this.oCPField.Formula=this.drcStructure[Z].Formula.toString(),this.oCPField.AddToNet=this.drcStructure[Z].AddToNet.toString(),this.oCPField.FieldType=this.drcStructure[Z].FieldType.toString(),this.oCPField.ROff=parseFloat(this.drcStructure[Z].ROff),"PT"==this.oCPField.ComponentName&&(this.othMPField.PTIndex=Z),"EmployeeMaster"==this.oCPField.FieldType?(this.oCPField.dActual=m.d.SessionManager.Round(this.drcEmpPay.length>0?parseFloat(this.drcEmpPay[0]["Deduction"+this.oCPField.SNo]):0,m.d.SessionManager.sPayrollDecimals),this.oCPField.dEarned=this.oCPField.dActual):(this.oCPField.dActual=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.oCPField.dEarned=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals)),this.oCPField.dArrear=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.oCPField.dAdjusted=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.arrLstCPFields[2].push(this.oCPField);if(this.drcStructure=ce,this.drcStructure=this.dtStructure.filter(Z=>2==Z.Type&&"Yes"==Z.Applicable&&"OverTime"==Z.FieldType&&Z.GradeID==this.othMPField.GradeID),null!=this.drcStructure&&this.drcStructure.length>0)for(let Z=0;Z<this.drcStructure.length;Z++)this.oCPField=new X,this.oCPField.SNo=parseInt(this.drcStructure[Z].SNo),this.oCPField.ComponentID=parseInt(this.drcStructure[Z].ComponentID),this.oCPField.ComponentName=this.drcStructure[Z].ComponentName.toString(),this.oCPField.Formula=this.drcStructure[Z].Formula.toString(),this.oCPField.AddToNet=this.drcStructure[Z].AddToNet.toString(),this.oCPField.FieldType=this.drcStructure[Z].FieldType.toString(),this.oCPField.ROff=parseFloat(this.drcStructure[Z].ROff),this.oCPField.dActual=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals2),this.oCPField.dEarned=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.oCPField.dArrear=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.oCPField.dAdjusted=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.arrLstCPFields[3].push(this.oCPField);this.othMPField.iExtLoansCnt=0;let z,Ce=0,he=0,se=0;if(this.drcStructure=ce,this.drcStructure=this.dtStructure.filter(Z=>3==Z.Type&&Z.GradeID==this.othMPField.GradeID),null!=this.drcStructure&&null!=this.drcStructure&&this.drcStructure.length>0){let Z=0;for(let fe=0;fe<this.drcStructure.length;fe++){if(this.oCPField=new X,this.oCPField.SNo=parseInt(this.drcStructure[fe].SNo),this.oCPField.ComponentID=parseInt(this.drcStructure[fe].ComponentID),this.oCPField.ComponentName=this.drcStructure[fe].ComponentName.toString(),this.oCPField.Formula=this.drcStructure[fe].Formula,this.oCPField.AddToNet=this.drcStructure[fe].AddToNet,this.oCPField.FieldType=this.drcStructure[fe].FieldType,this.oCPField.ROff=null==this.drcStructure[fe].ROff||null==this.drcStructure[fe].ROff||""==this.drcStructure[fe].ROff.toString()?0:parseFloat(this.drcStructure[fe].ROff),this.oCPField.IsEditable=0,this.oCPField.IsReadOnly=1,this.oCPField.IsVisible=1,z=this.dsAllEmpsData.Tables[10].filter(U=>U.EmpSeqNo==this.sEmpSeqNo&&U.LoanCompID==this.oCPField.ComponentID&&U.InstBalance>0&&U.DeductionMonth<=this.PayrollMonth.ToString("dd/MMM/yyyy")),null!=z&&null!=z&&z.length>0){Z++,he=se=0,this.oCPField.LoanSlNo=Z.toString(),this.oCPField.LoanDocNo=z[0].DocNo.toString(),this.oCPField.LoanInvDocDetailsID=z[0].InvDocDetailsID.toString(),this.oCPField.LoanApprovedAmt=z[0].ApprovedAmt.toString();let U="";1==z.length?(this.oCPField.LoanInstNo=z[0].InstallmentNo.toString()+"/"+z[0].NoOfInstallments.toString(),this.oCPField.LoanActInstNo=z[0].InstallmentNo.toString(),U=z[0].InstallmentNo.toString()):(this.oCPField.LoanInstNo=z[z.length-1].InstallmentNo.toString()+"/"+z[0].NoOfInstallments.toString(),this.oCPField.LoanActInstNo=z[z.length-1].InstallmentNo.toString(),U=z[z.length-1].InstallmentNo.toString());let Ee=this.dsAllEmpsData.Tables[10].filter(Me=>Me.EmpSeqNo==this.sEmpSeqNo&&Me.LoanCompID==this.oCPField.ComponentID&&Me.InstallmentNo<=U).Compute("sum","Paid");null!=Ee&&null!=Ee&&(he=parseFloat(Ee)),Ce=parseFloat(this.oCPField.LoanApprovedAmt)-he,Ee=this.dsAllEmpsData.Tables[10].filter(Me=>Me.EmpSeqNo==this.sEmpSeqNo&&Me.LoanCompID==this.oCPField.ComponentID&&Me.InstallmentNo<=U).Compute("sum","InstBalance"),null!=Ee&&null!=Ee&&(se=parseFloat(Ee)),this.oCPField.LoanActInstAmt=se.toString(),this.oCPField.LoanInstAmt=se.ToString(m.d.SessionManager.sPayrollDecimals),this.oCPField.LoanBalAmt=Ce.ToString(m.d.SessionManager.sPayrollDecimals),this.oCPField.LoanPayStatus="0",this.oCPField.dActual=parseFloat(this.oCPField.LoanActInstAmt).ToString(m.d.SessionManager.sPayrollDecimals),this.oCPField.dEarned=parseFloat(this.oCPField.LoanInstAmt).ToString(m.d.SessionManager.sPayrollDecimals),this.othMPField.iExtLoansCnt++}else this.oCPField.IsVisible=0,this.oCPField.dActual=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.oCPField.dEarned=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals);this.oCPField.dArrear=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.oCPField.dAdjusted=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.arrLstCPFields[4].push(this.oCPField)}}if(this.drcStructure=ce,this.drcStructure=this.dtStructure.filter(Z=>4==Z.Type&&Z.GradeID==+this.othMPField.GradeID&&"Yes"==Z.IsCalculate),null!=this.drcStructure&&this.drcStructure.length>0){let Z=0,fe=0,U=0,Ee=0;for(let Me=0;Me<this.drcStructure.length;Me++){this.oCPField=new X,this.oCPField.SNo=parseInt(this.drcStructure[Me].SNo),this.oCPField.ComponentID=parseInt(this.drcStructure[Me].ComponentID),this.oCPField.ComponentName=this.drcStructure[Me].ComponentName.toString(),this.oCPField.Formula=this.drcStructure[Me].Formula,this.oCPField.AddToNet=this.drcStructure[Me].AddToNet,this.oCPField.FieldType=this.drcStructure[Me].FieldType,this.oCPField.ROff=null==this.drcStructure[Me].ROff||null==this.drcStructure[Me].ROff||""==this.drcStructure[Me].ROff.toString()?0:parseFloat(this.drcStructure[Me].ROff),this.oCPField.Percentage=parseFloat(this.drcStructure[Me].Percentage),this.drcAssLeaves=this.dsAllEmpsData.Tables[8].filter(st=>st.EmpSeqNo==this.sEmpSeqNo&&st.LeaveType==this.oCPField.ComponentName),this.drcAssLeaves.length>0&&(Z=parseFloat(this.drcAssLeaves[0].Total));let Re={dTaken:U,dAvail:Ee};A.J0.ParseDate(this.PayrollMonthStart)<=A.J0.ParseDate(this.LeaveYearEndmonth)&&A.J0.ParseDate(this.PayrollMonthStart)!=A.J0.ParseDate(this.LeaveYearStartmonth)&&(this.GetLeavesTaken(this.LeaveYearStartmonth.ToString("dd/MMM/yyyy"),this.PayrollMonthStart.AddDays(-1).ToString("dd/MMM/yyyy"),this.oCPField.ComponentID.toString(),Re),U=Re.dTaken,Ee=Re.dAvail),Re={dTaken:fe,dAvail:Ee},this.GetLeavesTaken(this.PayrollMonthStart.ToString("dd/MMM/yyyy"),this.PayrollMonthEnd.ToString("dd/MMM/yyyy"),this.oCPField.ComponentID.toString(),Re),fe=Re.dTaken,Ee=Re.dAvail,-1!=this.oCPField.MaxLeaves?(this.oCPField.LeaveTotOPBal=(Z-U).ToString(m.d.SessionManager.sPayrollDecimals2),this.oCPField.LeaveMonOPBal=Ee.ToString(m.d.SessionManager.sPayrollDecimals2),this.oCPField.LeaveTaken=fe.ToString(m.d.SessionManager.sPayrollDecimals2),this.oCPField.LeaveNetBal=(Z-U-fe).ToString(m.d.SessionManager.sPayrollDecimals2)):(this.oCPField.LeaveTotOPBal=(0).ToString(m.d.SessionManager.sPayrollDecimals2),this.oCPField.LeaveMonOPBal=(0).ToString(m.d.SessionManager.sPayrollDecimals2),this.oCPField.LeaveTaken=fe.ToString(m.d.SessionManager.sPayrollDecimals2),this.oCPField.LeaveNetBal=(0).ToString(m.d.SessionManager.sPayrollDecimals2)),L+=parseFloat(this.oCPField.LeaveTaken),this.oCPField.dActual=(0).ToString(m.d.SessionManager.sPayrollDecimals2),this.oCPField.dEarned=(0).ToString(m.d.SessionManager.sPayrollDecimals2),this.oCPField.dArrear=(0).ToString(m.d.SessionManager.sPayrollDecimals2),this.oCPField.dAdjusted=(0).ToString(m.d.SessionManager.sPayrollDecimals2),parseFloat(this.oCPField.LeaveTaken)>0&&this.oCPField.Percentage>0&&(I+=parseFloat(this.oCPField.LeaveTaken)*this.oCPField.Percentage/100),this.arrLstCPFields[5].push(this.oCPField)}}if(this.lstHolidays.Clear(),null!=this.dtHolidayDef&&this.dtHolidayDef.length>0)for(let Z=0;Z<this.dtHolidayDef.length;Z++)this.lstHolidays.push(A.J0.ParseDate(this.dtHolidayDef[Z].HolidayDate));v+=this.GetUnpaidDays();let N=this.othMPField.DateOfJoining>this.PayrollMonthStart?this.othMPField.DateOfJoining:this.PayrollMonthStart,ee=this.othMPField.DateOfRelieve<this.PayrollMonthEnd?this.othMPField.DateOfRelieve:this.PayrollMonthEnd;if(le=-1,j=-1,this.drcWOffDef.length>0)F=this.CalculateWeeklyOffsFromDef();else{let Z="",fe="";switch(Z="NONE"!=this.drcAllEmpsData[0].WeeklyOff1.toString().toUpperCase()?this.drcAllEmpsData[0].WeeklyOff1.toString():m.d.SessionManager.Preferences.WeeklyOff1.toString(),"NONE"!=this.drcAllEmpsData[0].WeeklyOff2.toString().toUpperCase()?this.drcAllEmpsData[0].WeeklyOff2.toString().toUpperCase()!=Z.toUpperCase()&&(fe=this.drcAllEmpsData[0].WeeklyOff2.toString()):fe=m.d.SessionManager.Preferences.WeeklyOff2.toString(),Z){case"Sunday":le=0;break;case"Monday":le=1;break;case"Tuesday":le=2;break;case"Wednesday":le=3;break;case"Thursday":le=4;break;case"Friday":le=5;break;case"Saturday":le=6}switch(fe){case"Sunday":j=0;break;case"Monday":j=1;break;case"Tuesday":j=2;break;case"Wednesday":j=3;break;case"Thursday":j=4;break;case"Friday":j=5;break;case"Saturday":j=6}if(-1!=le){let U=N;for(parseInt(U.getDay().toString())<le?U=U.AddDays(le-parseInt(U.getDay().toString())):parseInt(U.getDay().toString())>le&&(U=U.AddDays(7-(parseInt(U.getDay().toString())-le)));U<=ee;)this.lstHolidays.Contains(U)||F++,U=U.AddDays(7)}if(-1!=j&&le!=j){let U=N;for(parseInt(U.getDay().toString())<j?U=U.AddDays(j-parseInt(U.getDay().toString())):parseInt(U.getDay().toString())>j&&(U=U.AddDays(7-(parseInt(U.getDay().toString())-j)));U<=ee;)this.lstHolidays.Contains(U)||F++,U=U.AddDays(7)}}for(let Z=0;Z<this.lstHolidays.length;Z++)this.lstHolidays[Z]>=this.othMPField.DateOfJoining&&this.lstHolidays[Z]<=this.othMPField.DateOfRelieve&&ne++;ie=F+ne,E=R-(ie+L+v),this.othMPField.DaysAttended=ie,this.othMPField.TotalLeaves=L,this.othMPField.PaidLeaves=I,this.othMPField.WeeklyOffs=F,this.othMPField.Holidays=ne,this.othMPField.LOPDays=E,this.othMPField.UnpaidDays=v,this.othMPField.TotalDays=ie+L+E+v,this.othMPField.PaidDays=ie+I}}ExecuteAllFormulas(){try{if(Logger.InfoLog("CommonMonthlyPayroll::Entering ExecuteAllFormulas()"),this.othMPField.dblGrossSalary=0,this.ExecuteFormulas(!0),this.ExecuteFormulas(!1),this.ExecuteFormulas(!1),this.ExecuteFormulas(!0),this.ExecuteFormulas(!1),this.ExecuteFormulas(!1),this.othMPField.dblGrossSalary=this.othMPField.totEarnings,this.othMPField.PTIndex>=0){let W=this.dsAllEmpsData.Tables[3];if(this.drcPTDimension.length>0){let T=this.dsAllEmpsData.Tables[3];if(T=T.filter(R=>R.NodeID==A.J0.String(this.drcPTDimension[0].PTDimension)&&""!=R.Formula),null!=T&&T.length>0&&!A.J0.IsEmpty(T[0].Formula)){let R=this.fldDict,le=parseFloat(m.d.eval.EvaluateExpression(T[0].Formula.toString(),R));this.arrLstCPFields[2][this.othMPField.PTIndex].dEarned=le.ToString(m.d.SessionManager.sPayrollDecimals),this.arrLstCPFields[2][this.othMPField.PTIndex].dActual=le.ToString(m.d.SessionManager.sPayrollDecimals)}else W=W.filter(R=>R.NodeID==A.J0.String(this.drcPTDimension[0].PTDimension)&&R.FromSlab<=this.othMPField.dPTApplicableAmt&&R.ToSlab>=this.othMPField.dPTApplicableAmt),W.length>0?(this.arrLstCPFields[2][this.othMPField.PTIndex].dEarned=parseFloat(W[0].Amount).ToString(m.d.SessionManager.sPayrollDecimals),this.arrLstCPFields[2][this.othMPField.PTIndex].dActual=parseFloat(W[0].Amount).ToString(m.d.SessionManager.sPayrollDecimals)):(this.arrLstCPFields[2][this.othMPField.PTIndex].dEarned=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.arrLstCPFields[2][this.othMPField.PTIndex].dActual=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals))}}this.othMPField.totEarnings=this.othMPField.totDeductions=this.othMPField.totActEarnings=0,this.othMPField.totActDeductions=this.othMPField.totLoans=this.othMPField.totOPBalLeaves=0,this.othMPField.totLeavesTaken=this.othMPField.totNetBalLeaves=0,this.othMPField.totEarArrears=this.othMPField.totDedArrears=0,this.othMPField.totEarAdjustments=this.othMPField.totDedAdjustments=0,this.othMPField.totOTAmount=0;for(let W=0;W<this.arrLstCPFields[0].length;W++)""!=this.arrLstCPFields[0][W].SNo.toString()&&null!=this.arrLstCPFields[0][W].AddToNet&&""!=this.arrLstCPFields[0][W].AddToNet&&("Net"==this.arrLstCPFields[0][W].AddToNet||"NetAndTax"==this.arrLstCPFields[0][W].AddToNet)&&(this.othMPField.totActEarnings+=parseFloat(this.arrLstCPFields[0][W].dActual),this.othMPField.totEarnings+=parseFloat(this.arrLstCPFields[0][W].dEarned),this.othMPField.totEarArrears+=parseFloat(this.arrLstCPFields[0][W].dArrear),this.othMPField.totEarAdjustments+=parseFloat(this.arrLstCPFields[0][W].dAdjusted));let x,D=new Date(1,1,1,0,0,0);for(let W=0;W<this.arrLstCPFields[1].length;W++)""!=this.arrLstCPFields[1][W].SNo.toString()&&null!=this.arrLstCPFields[1][W].AddToNet&&""!=this.arrLstCPFields[1][W].AddToNet&&("Net"==this.arrLstCPFields[1][W].AddToNet||"NetAndTax"==this.arrLstCPFields[1][W].AddToNet)&&(x=this.arrLstCPFields[1][W].dActual.toString().split("."),D=D.AddHours(parseFloat(x[0])),x.length>1&&(1==x[1].length&&(x[1]=x[1]+"0"),D=D.AddMinutes(parseFloat(x[1]))),this.othMPField.totOTAmount+=parseFloat(this.arrLstCPFields[1][W].dEarned));let p=D.getMinutes().toString();1==p.length&&(p="0"+p),this.othMPField.totOTHours=D.getHours()+"."+p;for(let W=0;W<this.arrLstCPFields[2].length;W++)""!=this.arrLstCPFields[2][W].SNo.toString()&&null!=this.arrLstCPFields[2][W].AddToNet&&""!=this.arrLstCPFields[2][W].AddToNet&&("Net"==this.arrLstCPFields[2][W].AddToNet||"NetAndTax"==this.arrLstCPFields[2][W].AddToNet)&&(this.othMPField.totActDeductions+=parseFloat(this.arrLstCPFields[2][W].dActual),this.othMPField.totDeductions+=parseFloat(this.arrLstCPFields[2][W].dEarned),this.othMPField.totDedArrears+=parseFloat(this.arrLstCPFields[2][W].dArrear),this.othMPField.totDedAdjustments+=parseFloat(this.arrLstCPFields[2][W].dAdjusted));for(let W=0;W<this.arrLstCPFields[4].length;W++)""!=this.arrLstCPFields[4][W].SNo.toString()&&1==this.arrLstCPFields[4][W].IsVisible&&null!=this.arrLstCPFields[4][W].LoanInstAmt&&""!=this.arrLstCPFields[4][W].LoanInstAmt.toString()&&parseFloat(this.arrLstCPFields[4][W].LoanInstAmt)>0&&(this.othMPField.totLoans+=parseFloat(this.arrLstCPFields[4][W].LoanInstAmt));for(let W=0;W<this.arrLstCPFields[5].length;W++)""!=this.arrLstCPFields[5][W].SNo.toString()&&(null!=this.arrLstCPFields[5][W].LeaveTotOPBal&&""!=this.arrLstCPFields[5][W].LeaveTotOPBal.toString()&&(this.othMPField.totOPBalLeaves+=parseFloat(this.arrLstCPFields[5][W].LeaveTotOPBal)),null!=this.arrLstCPFields[5][W].LeaveTaken&&""!=this.arrLstCPFields[5][W].LeaveTaken.toString()&&(this.othMPField.totLeavesTaken+=parseFloat(this.arrLstCPFields[5][W].LeaveTaken)),null!=this.arrLstCPFields[5][W].LeaveNetBal&&""!=this.arrLstCPFields[5][W].LeaveNetBal.toString()&&(this.othMPField.totNetBalLeaves+=parseFloat(this.arrLstCPFields[5][W].LeaveNetBal)));this.othMPField.NetSalary=parseFloat(A.J0.GetAmountsBasedOnPref(this.othMPField.totEarnings+this.othMPField.totEarArrears+this.othMPField.totEarAdjustments+this.othMPField.totOTAmount-(this.othMPField.totDeductions+this.othMPField.totDedArrears+this.othMPField.totDedAdjustments+this.othMPField.totLoans),m.d.SessionManager.sPayrollDecimals.replace("N",""))),Logger.InfoLog("CommonMonthlyPayroll::Exiting ExecuteAllFormulas()")}catch(D){Logger.ErrorLog("CommonMonthlyPayroll::EXCEPTION ExecuteAllFormulas()"+D.stack)}}ExecuteFormulas(D){try{Logger.InfoLog("CommonMonthlyPayroll::Entering ExecuteFormulas()"),this.fldDict=new G.bT;let p,x="0";this.othMPField.totEarnings=this.othMPField.totDeductions=this.othMPField.totActEarnings=0,this.othMPField.totActDeductions=this.othMPField.totLoans=this.othMPField.totOPBalLeaves=0,this.othMPField.totLeavesTaken=this.othMPField.totNetBalLeaves=0,this.othMPField.totEarArrears=this.othMPField.totDedArrears=0,this.othMPField.totEarAdjustments=this.othMPField.totDedAdjustments=0,this.othMPField.totOTAmount=0,p=new J.Nl("Basic",""),this.fldDict.push("Basic",p),this.fldDict.Basic.setFieldValue(this.othMPField.BasicMonthly),p=new J.Nl("Gross",""),this.fldDict.push("Gross",p),this.fldDict.Gross.setFieldValue(this.othMPField.dblGrossSalary),p=new J.Nl("ServiceDays",""),this.fldDict.push("ServiceDays",p),this.fldDict.ServiceDays.setFieldValue(this.othMPField.dServiceDays),p=new J.Nl("ServiceYears",""),this.fldDict.push("ServiceYears",p),this.fldDict.ServiceYears.setFieldValue(this.othMPField.dServiceYears),p=new J.Nl("ResignType",""),this.fldDict.push("ResignType",p),this.fldDict.ResignType.setFieldValue(this.othMPField.sResignType),p=new J.Nl("GratuityAmount",""),this.fldDict.push("GratuityAmount",p),this.fldDict.GratuityAmount.setFieldValue(this.othMPField.GratuityAmount),p=new J.Nl("WeeklyOffs",""),this.fldDict.push("WeeklyOffs",p),this.fldDict.WeeklyOffs.setFieldValue(this.othMPField.WeeklyOffs),p=new J.Nl("LeavesTaken",""),this.fldDict.push("LeavesTaken",p),this.fldDict.LeavesTaken.setFieldValue(this.othMPField.TotalLeaves),p=new J.Nl("VacDaysTaken",""),this.fldDict.push("VacDaysTaken",p),this.fldDict.VacDaysTaken.setFieldValue(this.othMPField.dblTotVacDays),p=new J.Nl("VacDays",""),this.fldDict.push("VacDays",p),this.fldDict.VacDays.setFieldValue(this.othMPField.dblTotMVacDays),p=new J.Nl("VacAmount",""),this.fldDict.push("VacAmount",p),this.fldDict.VacAmount.setFieldValue(this.othMPField.dblTotVacAmount),p=new J.Nl("VacEncashDays",""),this.fldDict.push("VacEncashDays",p),this.fldDict.VacEncashDays.setFieldValue(this.othMPField.dblTotVacEncashDays),p=new J.Nl("VacEncashAmount",""),this.fldDict.push("VacEncashAmount",p),this.fldDict.VacEncashAmount.setFieldValue(this.othMPField.dblTotVacEncashAmount),p=new J.Nl("VacExcessDays",""),this.fldDict.push("VacExcessDays",p),this.fldDict.VacExcessDays.setFieldValue(this.othMPField.dblTotVacExcessDays),p=new J.Nl("VacExcessAmount",""),this.fldDict.push("VacExcessAmount",p),this.fldDict.VacExcessAmount.setFieldValue(this.othMPField.dblTotVacExcessAmount),p=new J.Nl("VacNetAmount",""),this.fldDict.push("VacNetAmount",p),this.fldDict.VacNetAmount.setFieldValue(this.othMPField.dblTotVacNetAmount),p=new J.Nl("TotalDays",""),this.fldDict.push("TotalDays",p),this.fldDict.TotalDays.setFieldValue(this.othMPField.TotalDays),p=new J.Nl("DaysAttended",""),this.fldDict.push("DaysAttended",p),this.fldDict.DaysAttended.setFieldValue(D?this.othMPField.TotalDays:this.othMPField.DaysAttended+this.othMPField.TotalLeaves),p=new J.Nl("UnpaidDays",""),this.fldDict.push("UnpaidDays",p),this.fldDict.UnpaidDays.setFieldValue(this.othMPField.UnpaidDays),p=new J.Nl("LOPDays",""),this.fldDict.push("LOPDays",p),this.fldDict.LOPDays.setFieldValue(this.othMPField.LOPDays),p=new J.Nl("Holidays",""),this.fldDict.push("Holidays",p),this.fldDict.Holidays.setFieldValue(this.othMPField.Holidays),p=new J.Nl("AdjDays",""),this.fldDict.push("AdjDays",p),this.fldDict.AdjDays.setFieldValue(this.dAdjDays),p=new J.Nl("EmpType",""),this.fldDict.push("EmpType",p),this.fldDict.EmpType.setFieldValue(this.drcAllEmpsData[0].sEmpType.toString()),p=new J.Nl("Gender",""),this.fldDict.push("Gender",p),this.fldDict.Gender.setFieldValue(this.drcAllEmpsData[0].sGender.toString()),p=new J.Nl("MaritalStatus",""),this.fldDict.push("MaritalStatus",p),this.fldDict.MaritalStatus.setFieldValue(this.drcAllEmpsData[0].sMaritalStatus.toString()),p=new J.Nl("Nationality",""),this.fldDict.push("Nationality",p),this.fldDict.Nationality.setFieldValue(this.drcAllEmpsData[0].sNationality.toString()),p=new J.Nl("Religion",""),this.fldDict.push("Religion",p),this.fldDict.Religion.setFieldValue(this.drcAllEmpsData[0].sReligion.toString()),this.isValidGWSlabs&&(this.fldDict.EmpType.setFieldValue(this.sEmpType),this.fldDict.Gender.setFieldValue(this.sGender),this.fldDict.MaritalStatus.setFieldValue(this.sMaritalStatus),this.fldDict.Nationality.setFieldValue(this.sNationality),this.fldDict.Religion.setFieldValue(this.sReligion)),p=new J.Nl("ChildrenCount",""),this.fldDict.push("ChildrenCount",p),null!=this.drcDependentInfo?(this.drcDependentInfo.RowFilter="EmpSeqNo="+this.sEmpSeqNo+" AND Relation='Children'",this.fldDict.ChildrenCount.setFieldValue(this.drcDependentInfo.length)):this.fldDict.ChildrenCount.setFieldValue(0),p=new J.Nl("ChildrenDays",""),this.fldDict.push("ChildrenDays",p);let W=0;if(null!=this.drcDependentInfo&&null!=this.drcDependentInfo&&(this.drcDependentInfo=this.drcDependentInfo.filter(N=>N.EmpSeqNo=this.sEmpSeqNo&&"Children"==N.Relation)),null!=this.drcDependentInfo&&this.drcDependentInfo.length>0){let N=this.drcDependentInfo;for(let ee=0;ee<N.length;ee++)if(A.J0.ParseDate(N.Rows[ee].ChildDOB)>=this.PayrollMonthStart&&A.J0.ParseDate(N.Rows[ee].ChildDOB)<=this.PayrollMonthEnd)W+=A.J0.GetDateDifference(this.PayrollMonthEnd,A.J0.ParseDate(N.Rows[ee].ChildDOB))+1;else{let Z=0,fe=0,U=0,Ee={iY:Z,iM:fe,iD:U};A.J0.GetYearsMonthsDays(A.J0.ParseDate(N.Rows[ee].ChildDOB),this.PayrollMonthEnd,Ee),Z=Ee.iY,fe=Ee.iM,U=Ee.iD,18==Z&&0==fe?W+=A.J0.GetDateDifference(this.PayrollMonthEnd,this.PayrollMonthStart)+1-U:Z<18&&(W+=A.J0.GetDateDifference(this.PayrollMonthEnd,this.PayrollMonthStart)+1)}}this.fldDict.ChildrenDays.setFieldValue(W),p=new J.Nl("PayrollMonthNo",""),this.fldDict.push("PayrollMonthNo",p),this.fldDict.PayrollMonthNo.setFieldValue(this.PayrollMonth.iMonth()),p=new J.Nl("PayrollYearNo",""),this.fldDict.push("PayrollYearNo",p),this.fldDict.PayrollYearNo.setFieldValue(this.PayrollMonth.getFullYear()),p=new J.Nl("DOJMonth",""),this.fldDict.push("DOJMonth",p),this.fldDict.DOJMonth.setFieldValue(A.J0.ParseDate(this.drcAllEmpsData[0].CDOJ).iMonth()),p=new J.Nl("DOJYear",""),this.fldDict.push("DOJYear",p),this.fldDict.DOJYear.setFieldValue(A.J0.ParseDate(this.drcAllEmpsData[0].CDOJ).getFullYear()),p=new J.Nl("DORMonth",""),this.fldDict.push("DORMonth",p),A.J0.IsEmpty(this.drcAllEmpsData[0].CDORelieve)?this.fldDict.DORMonth.setFieldValue(1):this.fldDict.DORMonth.setFieldValue(A.J0.ParseDate(this.drcAllEmpsData[0].CDORelieve).iMonth()),p=new J.Nl("DORYear",""),this.fldDict.push("DORYear",p),A.J0.IsEmpty(this.drcAllEmpsData[0].CDORelieve)?this.fldDict.DORYear.setFieldValue(2200):this.fldDict.DORYear.setFieldValue(A.J0.ParseDate(this.drcAllEmpsData[0].CDORelieve).getFullYear()),p=new J.Nl("EmpConfirmationDate",""),this.fldDict.Add("EmpConfirmationDate",p);let T=new Date;A.J0.isValidDate(this.drcAllEmpsData[0].CDOC)&&(T=A.J0.ParseDate(this.drcAllEmpsData[0].CDOC)),this.fldDict.EmpConfirmationDate.setFieldValue(T),p=new J.Nl("LeaveFromDate",""),this.fldDict.Add("LeaveFromDate",p),this.fldDict.LeaveFromDate.setFieldValue(new Date),p=new J.Nl("LeaveNoOfDays",""),this.fldDict.Add("LeaveNoOfDays",p),this.fldDict.LeaveNoOfDays.setFieldValue(0),p=new J.Nl("EmpVacationDays",""),this.fldDict.Add("EmpVacationDays",p),this.fldDict.EmpVacationDays.setFieldValue(this.drcAllEmpsData[0].VacDaysPerMonth),p=new J.Nl("AppraisalMonthNo",""),this.fldDict.push("AppraisalMonthNo",p),this.fldDict.AppraisalMonthNo.setFieldValue(this.drcApprisal.length>0?this.AppraisalMonth.iMonth():0),this.isValidBulkAppraisal&&this.fldDict.AppraisalMonthNo.setFieldValue(this.EffectFrom.iMonth()),p=new J.Nl("VacDaysPayYes",""),this.fldDict.push("VacDaysPayYes",p),this.fldDict.VacDaysPayYes.setFieldValue(0),p=new J.Nl("VacDaysPayNo",""),this.fldDict.push("VacDaysPayNo",p),this.fldDict.VacDaysPayNo.setFieldValue(0),p=new J.Nl("PreviousGosiValue",""),this.fldDict.push("PreviousGosiValue",p),this.fldDict.PreviousGosiValue.setFieldValue(this.dGosi),p=new J.Nl("ActDaysAttended",""),this.fldDict.push("ActDaysAttended",p),this.fldDict.ActDaysAttended.setFieldValue(this.othMPField.ActDaysAttended),p=new J.Nl("PreviousMonthPaidDays",""),this.fldDict.push("PreviousMonthPaidDays",p),this.fldDict.PreviousMonthPaidDays.setFieldValue(this.othMPField.PreviousMonthPaidDays),p=new J.Nl("PaidDays",""),this.fldDict.push("PaidDays",p),this.fldDict.PaidDays.setFieldValue(this.othMPField.PaidDays),p=new J.Nl("PreviousMonthVacationDays",""),this.fldDict.push("PreviousMonthVacationDays",p),this.fldDict.PreviousMonthVacationDays.setFieldValue(this.othMPField.PreviousMonthVacationDays),p=new J.Nl("DailyAttExists",""),this.fldDict.push("DailyAttExists",p),this.fldDict.DailyAttExists.setFieldValue(0);let R=0;R=this.PayrollMonthEnd.Subtract(this.othMPField.DateOfJoining).Days+1,p=new J.Nl("ServiceDaysTPME",""),this.fldDict.push("ServiceDaysTPME",p),this.fldDict.ServiceDaysTPME.setFieldValue(R);let le=0,j=0,F=0,ne=0,v=0,E=0,L=0,I=0,ie=0,ce=0,Ce=0;null!=this.drcLatesProc&&(this.drcLatesProc=this.drcLatesProc.filter(N=>N.EmpSeqNo==this.sEmpSeqNo),this.drcLatesProc.length>0&&(le=parseFloat(this.drcLatesProc[0].TotCheckInLateMins),j=parseFloat(this.drcLatesProc[0].TotCheckOutEarlyMins),F=parseFloat(this.drcLatesProc[0].TotBreak1MoreMins),ne=parseFloat(this.drcLatesProc[0].TotBreak2MoreMins),v=parseFloat(this.drcLatesProc[0].TotBreak3MoreMins),E=parseFloat(this.drcLatesProc[0].TotBreak4MoreMins),L=parseFloat(this.drcLatesProc[0].TotBreak5MoreMins),I=parseFloat(this.drcLatesProc[0].TotLateHrsToDeduct),ie=parseFloat(this.drcLatesProc[0].TotLateLeavesToDeduct),ce=parseFloat(this.drcLatesProc[0].TotWorkingMinsLessBy),Ce=parseFloat(this.drcLatesProc[0].TotAbsentMinsLessBy))),p=new J.Nl("TotCheckInLateMins",""),this.fldDict.push("TotCheckInLateMins",p),this.fldDict.TotCheckInLateMins.setFieldValue(le),p=new J.Nl("TotCheckOutEarlyMins",""),this.fldDict.push("TotCheckOutEarlyMins",p),this.fldDict.TotCheckOutEarlyMins.setFieldValue(j),p=new J.Nl("TotBreak1MoreMins",""),this.fldDict.push("TotBreak1MoreMins",p),this.fldDict.TotBreak1MoreMins.setFieldValue(F),p=new J.Nl("TotBreak2MoreMins",""),this.fldDict.push("TotBreak2MoreMins",p),this.fldDict.TotBreak2MoreMins.setFieldValue(ne),p=new J.Nl("TotBreak3MoreMins",""),this.fldDict.push("TotBreak3MoreMins",p),this.fldDict.TotBreak3MoreMins.setFieldValue(v),p=new J.Nl("TotBreak4MoreMins",""),this.fldDict.push("TotBreak4MoreMins",p),this.fldDict.TotBreak4MoreMins.setFieldValue(E),p=new J.Nl("TotBreak5MoreMins",""),this.fldDict.push("TotBreak5MoreMins",p),this.fldDict.TotBreak5MoreMins.setFieldValue(L),p=new J.Nl("TotLateHrsToDeduct",""),this.fldDict.push("TotLateHrsToDeduct",p),this.fldDict.TotLateHrsToDeduct.setFieldValue(I),p=new J.Nl("TotLateLeavesToDeduct",""),this.fldDict.push("TotLateLeavesToDeduct",p),this.fldDict.TotLateLeavesToDeduct.setFieldValue(ie),p=new J.Nl("TotWorkingMinsLessBy",""),this.fldDict.push("TotWorkingMinsLessBy",p),this.fldDict.TotWorkingMinsLessBy.setFieldValue(ce),p=new J.Nl("TotAbsentMinsLessBy",""),this.fldDict.push("TotAbsentMinsLessBy",p),this.fldDict.TotAbsentMinsLessBy.setFieldValue(Ce),this.drcCCData=this.dsData.Tables[0].filter(N=>N.EmpSeqNo==this.sEmpSeqNo);let he="",se="";if(p=new J.Nl("RptManagerCode",""),this.fldDict.push("RptManagerCode",p),p=new J.Nl("RptManagerName",""),this.fldDict.push("RptManagerName",p),this.drcCCData.length>0&&!A.J0.IsEmpty(this.drcCCData[0].RptManager)){let N=this.dsData1.filter(ee=>"RptManager"==ee.SysColName&&ee.NodeID==this.drcCCData[0].RptManager.toString());N.length>0&&(he=N[0].Code.toString(),se=N[0].Name.toString())}if(this.fldDict.RptManagerCode.setFieldValue(he),this.fldDict.RptManagerName.setFieldValue(se),this.drcCCData.length>0)for(let N=0;N<Object.keys(this.dsData.Tables[0][0]).length;N++){const ee=Object.keys(this.dsData.Tables[0][0])[N];if(!ee.Contains("CCNID"))continue;let Z=this.dsData1.filter(fe=>fe.SysColName==ee);if(Z.length>0){let fe=Z[0].UserColumnName.toString();if(p=new J.Nl(Z[0].UserColumnName.toString()+"Code",""),this.fldDict.push(Z[0].UserColumnName.toString()+"Code",p),p=new J.Nl(Z[0].UserColumnName.toString()+"Name",""),this.fldDict.push(Z[0].UserColumnName.toString()+"Name",p),Z=this.dsData1.filter(U=>U.SysColName==ee&&U.NodeID==this.drcCCData[0][ee].toString()),Z.length>0?(this.fldDict[Z[0].UserColumnName.toString()+"Code"].setFieldValue(Z[0].Code.toString()),this.fldDict[Z[0].UserColumnName.toString()+"Name"].setFieldValue(Z[0].Name.toString())):(this.fldDict[fe+"Code"].setFieldValue(""),this.fldDict[fe+"Name"].setFieldValue("")),this.isValidGWSlabs){let U=this.Parent.ScreenObject.GetCustomField(ee);if(null!=U&&null!=U){let Ee="";(U instanceof Y.y$||U instanceof Y.bQ)&&(Ee=U.SelectedValue.toString()),"0"==Ee&&(Ee="1"),Z=this.dsData1.filter(Me=>Me.SysColName==ee&&Me.NodeID==Ee),Z.length>0?(this.fldDict[Z[0].UserColumnName.toString()+"Code"].setFieldValue(Z[0].Code.toString()),this.fldDict[Z[0].UserColumnName.toString()+"Name"].setFieldValue(Z[0].Name.toString())):(this.fldDict[fe+"Code"].setFieldValue(""),this.fldDict[fe+"Name"].setFieldValue(""))}}}}p=new J.Nl("Vac_EMPLOYEE_BASIC",""),this.fldDict.push("Vac_EMPLOYEE_BASIC",p),this.fldDict.Vac_EMPLOYEE_BASIC.setFieldValue(0),p=new J.Nl("VacEncash_EMPLOYEE_BASIC",""),this.fldDict.push("VacEncash_EMPLOYEE_BASIC",p),this.fldDict.VacEncash_EMPLOYEE_BASIC.setFieldValue(0),p=new J.Nl("VacExcess_EMPLOYEE_BASIC",""),this.fldDict.push("VacExcess_EMPLOYEE_BASIC",p),this.fldDict.VacExcess_EMPLOYEE_BASIC.setFieldValue(0),p=new J.Nl("UnPaidWeeklyOffs",""),this.fldDict.push("UnPaidWeeklyOffs",p),this.fldDict.UnPaidWeeklyOffs.setFieldValue(0),p=new J.Nl("UnPaidHolidays",""),this.fldDict.push("UnPaidHolidays",p),this.fldDict.UnPaidHolidays.setFieldValue(0);for(let N=0;N<this.arrLstCPFields[0].length;N++)A.J0.IsEmpty(this.arrLstCPFields[0][N].SNo)||(p=new J.Nl(this.arrLstCPFields[0][N].ComponentName,""),this.fldDict.push(this.arrLstCPFields[0][N].ComponentName,p),this.fldDict[this.arrLstCPFields[0][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[0][N].dActual).ToString(m.d.SessionManager.sPayrollDecimals)),p=new J.Nl("Calc"+this.arrLstCPFields[0][N].ComponentName,""),this.fldDict.push("Calc"+this.arrLstCPFields[0][N].ComponentName,p),this.fldDict["Calc"+this.arrLstCPFields[0][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[0][N].dEarned).ToString(m.d.SessionManager.sPayrollDecimals)),p=new J.Nl("Arr_"+this.arrLstCPFields[0][N].ComponentName,""),this.fldDict.push("Arr_"+this.arrLstCPFields[0][N].ComponentName,p),this.fldDict["Arr_"+this.arrLstCPFields[0][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[0][N].dArrear).ToString(m.d.SessionManager.sPayrollDecimals)),p=new J.Nl("Adj_"+this.arrLstCPFields[0][N].ComponentName,""),this.fldDict.push("Adj_"+this.arrLstCPFields[0][N].ComponentName,p),this.fldDict["Adj_"+this.arrLstCPFields[0][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[0][N].dAdjusted).ToString(m.d.SessionManager.sPayrollDecimals)),"DailyAttendance"==this.arrLstCPFields[0][N].Behaviour&&(this.fldDict.ContainsKey(this.arrLstCPFields[0][N].Formula)||(p=new J.Nl(this.arrLstCPFields[0][N].Formula,""),this.fldDict.push(this.arrLstCPFields[0][N].Formula,p),this.fldDict[this.arrLstCPFields[0][N].Formula].setFieldValue(0))),p=new J.Nl("Vac_"+this.arrLstCPFields[0][N].ComponentName,""),this.fldDict.push("Vac_"+this.arrLstCPFields[0][N].ComponentName,p),this.fldDict["Vac_"+this.arrLstCPFields[0][N].ComponentName].setFieldValue(0),p=new J.Nl("VacEncash_"+this.arrLstCPFields[0][N].ComponentName,""),this.fldDict.push("VacEncash_"+this.arrLstCPFields[0][N].ComponentName,p),this.fldDict["VacEncash_"+this.arrLstCPFields[0][N].ComponentName].setFieldValue(0),p=new J.Nl("VacExcess_"+this.arrLstCPFields[0][N].ComponentName,""),this.fldDict.push("VacExcess_"+this.arrLstCPFields[0][N].ComponentName,p),this.fldDict["VacExcess_"+this.arrLstCPFields[0][N].ComponentName].setFieldValue(0));for(let N=0;N<this.arrLstCPFields[1].length;N++)A.J0.IsEmpty(this.arrLstCPFields[1][N].SNo)||(p=new J.Nl(this.arrLstCPFields[1][N].ComponentName,""),this.fldDict.push(this.arrLstCPFields[1][N].ComponentName,p),this.fldDict[this.arrLstCPFields[1][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[1][N].dActual).ToString(m.d.SessionManager.sPayrollDecimals2)),p=new J.Nl("Calc"+this.arrLstCPFields[1][N].ComponentName,""),this.fldDict.push("Calc"+this.arrLstCPFields[1][N].ComponentName,p),this.fldDict["Calc"+this.arrLstCPFields[1][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[1][N].dEarned).ToString(m.d.SessionManager.sPayrollDecimals)),p=new J.Nl("Arr_"+this.arrLstCPFields[1][N].ComponentName,""),this.fldDict.push("Arr_"+this.arrLstCPFields[1][N].ComponentName,p),this.fldDict["Arr_"+this.arrLstCPFields[1][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[1][N].dArrear).ToString(m.d.SessionManager.sPayrollDecimals)),p=new J.Nl("Adj_"+this.arrLstCPFields[1][N].ComponentName,""),this.fldDict.push("Adj_"+this.arrLstCPFields[1][N].ComponentName,p),this.fldDict["Adj_"+this.arrLstCPFields[1][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[1][N].dAdjusted).ToString(m.d.SessionManager.sPayrollDecimals)));for(let N=0;N<this.arrLstCPFields[2].length;N++)""!=this.arrLstCPFields[2][N].SNo.toString()&&(p=new J.Nl(this.arrLstCPFields[2][N].ComponentName,""),this.fldDict.push(this.arrLstCPFields[2][N].ComponentName,p),this.fldDict[this.arrLstCPFields[2][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[2][N].dActual).ToString(m.d.SessionManager.sPayrollDecimals)),p=new J.Nl("Calc"+this.arrLstCPFields[2][N].ComponentName,""),this.fldDict.push("Calc"+this.arrLstCPFields[2][N].ComponentName,p),this.fldDict["Calc"+this.arrLstCPFields[2][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[2][N].dEarned).ToString(m.d.SessionManager.sPayrollDecimals)),p=new J.Nl("Arr_"+this.arrLstCPFields[2][N].ComponentName,""),this.fldDict.push("Arr_"+this.arrLstCPFields[2][N].ComponentName,p),this.fldDict["Arr_"+this.arrLstCPFields[2][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[2][N].dArrear).ToString(m.d.SessionManager.sPayrollDecimals)),p=new J.Nl("Adj_"+this.arrLstCPFields[2][N].ComponentName,""),this.fldDict.push("Adj_"+this.arrLstCPFields[2][N].ComponentName,p),this.fldDict["Adj_"+this.arrLstCPFields[2][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[2][N].dAdjusted).ToString(m.d.SessionManager.sPayrollDecimals)),"DailyAttendance"==this.arrLstCPFields[2][N].Behaviour&&(this.fldDict.ContainsKey(this.arrLstCPFields[2][N].Formula)||(p=new J.Nl(this.arrLstCPFields[2][N].Formula,""),this.fldDict.push(this.arrLstCPFields[2][N].Formula,p),this.fldDict[this.arrLstCPFields[2][N].Formula].setFieldValue(0))),p=new J.Nl("Vac_"+this.arrLstCPFields[2][N].ComponentName,""),this.fldDict.push("Vac_"+this.arrLstCPFields[2][N].ComponentName,p),this.fldDict["Vac_"+this.arrLstCPFields[2][N].ComponentName].setFieldValue(0),p=new J.Nl("VacEncash_"+this.arrLstCPFields[2][N].ComponentName,""),this.fldDict.push("VacEncash_"+this.arrLstCPFields[2][N].ComponentName,p),this.fldDict["VacEncash_"+this.arrLstCPFields[2][N].ComponentName].setFieldValue(0),p=new J.Nl("VacExcess_"+this.arrLstCPFields[2][N].ComponentName,""),this.fldDict.push("VacExcess_"+this.arrLstCPFields[2][N].ComponentName,p),this.fldDict["VacExcess_"+this.arrLstCPFields[2][N].ComponentName].setFieldValue(0));for(let N=0;N<this.arrLstCPFields[4].length;N++)""!=this.arrLstCPFields[4][N].SNo.toString()&&(p=new J.Nl(this.arrLstCPFields[4][N].ComponentName,""),this.fldDict.push(this.arrLstCPFields[4][N].ComponentName,p),p=new J.Nl(this.arrLstCPFields[4][N].ComponentName+"BalAmt",""),this.fldDict.push(this.arrLstCPFields[4][N].ComponentName+"BalAmt",p)),1==this.arrLstCPFields[4][N].IsVisible&&null!=this.arrLstCPFields[4][N].LoanInstAmt&&""!=this.arrLstCPFields[4][N].LoanInstAmt.toString()&&parseFloat(this.arrLstCPFields[4][N].LoanInstAmt)>0?(this.fldDict[this.arrLstCPFields[4][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[4][N].LoanInstAmt).ToString(m.d.SessionManager.sPayrollDecimals)),this.fldDict[this.arrLstCPFields[4][N].ComponentName+"BalAmt"].setFieldValue(parseFloat(this.arrLstCPFields[4][N].LoanBalAmt).ToString(m.d.SessionManager.sPayrollDecimals))):(this.fldDict[this.arrLstCPFields[4][N].ComponentName].setFieldValue(0),this.fldDict[this.arrLstCPFields[4][N].ComponentName+"BalAmt"].setFieldValue(0)),p=new J.Nl("Vac_"+this.arrLstCPFields[4][N].ComponentName,""),this.fldDict.push("Vac_"+this.arrLstCPFields[4][N].ComponentName,p),this.fldDict["Vac_"+this.arrLstCPFields[4][N].ComponentName].setFieldValue(0),p=new J.Nl("VacEncash_"+this.arrLstCPFields[4][N].ComponentName,""),this.fldDict.push("VacEncash_"+this.arrLstCPFields[4][N].ComponentName,p),this.fldDict["VacEncash_"+this.arrLstCPFields[4][N].ComponentName].setFieldValue(0),p=new J.Nl("VacExcess_"+this.arrLstCPFields[4][N].ComponentName,""),this.fldDict.push("VacExcess_"+this.arrLstCPFields[4][N].ComponentName,p),this.fldDict["VacExcess_"+this.arrLstCPFields[4][N].ComponentName].setFieldValue(0);for(let N=0;N<this.arrLstCPFields[5].length;N++)""!=this.arrLstCPFields[5][N].SNo.toString()&&(p=new J.Nl(this.arrLstCPFields[5][N].ComponentName,""),this.fldDict.push(this.arrLstCPFields[5][N].ComponentName,p),this.fldDict[this.arrLstCPFields[5][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[5][N].LeaveTaken).ToString(m.d.SessionManager.sPayrollDecimals2)),p=new J.Nl(this.arrLstCPFields[5][N].ComponentName+"_Bal",""),this.fldDict.push(this.arrLstCPFields[5][N].ComponentName+"_Bal",p),this.fldDict[this.arrLstCPFields[5][N].ComponentName+"_Bal"].setFieldValue(parseFloat(this.arrLstCPFields[5][N].LeaveTotOPBal).ToString(m.d.SessionManager.sPayrollDecimals2)));for(let N=0;N<this.arrLstCPFields[6].length;N++)""!=this.arrLstCPFields[6][N].SNo.toString()&&(p=new J.Nl(this.arrLstCPFields[6][N].ComponentName,""),this.fldDict.push(this.arrLstCPFields[6][N].ComponentName,p),this.fldDict[this.arrLstCPFields[6][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[6][N].dEarned).ToString(m.d.SessionManager.sPayrollDecimals)));let z=this.fldDict;for(let N=0;N<this.arrLstCPFields[0].length;N++)""!=this.arrLstCPFields[0][N].SNo.toString()&&null!=this.arrLstCPFields[0][N].Formula&&""!=this.arrLstCPFields[0][N].Formula&&(this.arrLstCPFields[0][N].dEarned=parseFloat(m.d.eval.EvaluateExpression(this.arrLstCPFields[0][N].Formula,z)).ToString(m.d.SessionManager.sPayrollDecimals).Replace(",",""),this.fldDict["Calc"+this.arrLstCPFields[0][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[0][N].dEarned).ToString(m.d.SessionManager.sPayrollDecimals)),D&&"Formula"==this.arrLstCPFields[0][N].FieldType&&(this.arrLstCPFields[0][N].dActual=this.arrLstCPFields[0][N].dEarned.Replace(",",""),this.fldDict[this.arrLstCPFields[0][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[0][N].dActual).ToString(m.d.SessionManager.sPayrollDecimals))));for(let N=0;N<this.arrLstCPFields[1].length;N++)""!=this.arrLstCPFields[1][N].SNo.toString()&&null!=this.arrLstCPFields[1][N].Formula&&""!=this.arrLstCPFields[1][N].Formula&&(this.arrLstCPFields[1][N].dEarned=parseFloat(m.d.eval.EvaluateExpression(this.arrLstCPFields[1][N].Formula,z)).ToString(m.d.SessionManager.sPayrollDecimals).Replace(",",""),this.fldDict["Calc"+this.arrLstCPFields[1][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[1][N].dEarned).ToString(m.d.SessionManager.sPayrollDecimals)));for(let N=0;N<this.arrLstCPFields[2].length;N++)""!=this.arrLstCPFields[2][N].SNo.toString()&&null!=this.arrLstCPFields[2][N].Formula&&""!=this.arrLstCPFields[2][N].Formula&&("ESI"==this.arrLstCPFields[2][N].ComponentName?this.arrLstCPFields[2][N].dEarned=Math.ceil(parseFloat(m.d.eval.EvaluateExpression(this.arrLstCPFields[2][N].Formula,z))).ToString(m.d.SessionManager.sPayrollDecimals).Replace(",",""):(x=parseFloat(m.d.eval.EvaluateExpression(this.arrLstCPFields[2][N].Formula,z)).ToString(m.d.SessionManager.sPayrollDecimals),"PT"==this.arrLstCPFields[2][N].ComponentName?(this.othMPField.dPTApplicableAmt=parseFloat(x),this.arrLstCPFields[2][N].dEarned=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals)):this.arrLstCPFields[2][N].dEarned=parseFloat(x).ToString(m.d.SessionManager.sPayrollDecimals).Replace(",",""),this.fldDict["Calc"+this.arrLstCPFields[2][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[2][N].dEarned).ToString(m.d.SessionManager.sPayrollDecimals))),D&&"Formula"==this.arrLstCPFields[2][N].FieldType&&(this.arrLstCPFields[2][N].dActual="PT"==this.arrLstCPFields[2][N].ComponentName?m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals):this.arrLstCPFields[2][N].dEarned.Replace(",",""),this.fldDict[this.arrLstCPFields[2][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[2][N].dActual).ToString(m.d.SessionManager.sPayrollDecimals))));for(let N=0;N<this.arrLstCPFields[6].length;N++)""!=this.arrLstCPFields[6][N].SNo.toString()&&null!=this.arrLstCPFields[6][N].Formula&&""!=this.arrLstCPFields[6][N].Formula&&(this.arrLstCPFields[6][N].dEarned=parseFloat(m.d.eval.EvaluateExpression(this.arrLstCPFields[6][N].Formula,z)).ToString(m.d.SessionManager.sPayrollDecimals).Replace(",",""),this.fldDict[this.arrLstCPFields[6][N].ComponentName].setFieldValue(parseFloat(this.arrLstCPFields[6][N].dEarned).ToString(m.d.SessionManager.sPayrollDecimals)));Logger.InfoLog("CommonMonthlyPayroll::Exiting ExecuteFormulas()")}catch(x){Logger.ErrorLog("CommonMonthlyPayroll::EXCEPTION ExecuteFormulas()"+x.stack)}}CalculateWeeklyOffsFromDef(){Logger.InfoLog("CommonMonthlyPayroll::Entering CalculateWeeklyOffsFromDef()");let D=0;try{if(null!=this.drcWOffDef&&this.drcWOffDef.length>0){let le,p=1,T=this.othMPField.DateOfRelieve<this.PayrollMonthEnd?this.othMPField.DateOfRelieve:this.PayrollMonthEnd,R=this.othMPField.DateOfJoining>this.PayrollMonthStart?this.othMPField.DateOfJoining:this.PayrollMonthStart;for(;R<=T;){for(le=R.AddDays(6);R<=le&&R<=T;){if(A.J0.StringIsNullOrEmpty(this.drcWOffDef[0]["Week"+p.toString()+"_W1"].toString())||R.getDay().toString().toLowerCase()!=this.drcWOffDef[0]["Week"+p.toString()+"_W1"].toString().toLowerCase()){if(!A.J0.StringIsNullOrEmpty(this.drcWOffDef[0]["Week"+p.toString()+"_W2"].toString())&&R.getDay().toString().toLowerCase()==this.drcWOffDef[0]["Week"+p.toString()+"_W2"].toString().toLowerCase()){if(this.lstHolidays.Contains(R)){R=R.AddDays(1);continue}D++}}else{if(this.lstHolidays.Contains(R)){R=R.AddDays(1);continue}D++}R=R.AddDays(1)}p++}}Logger.InfoLog("CommonMonthlyPayroll::Exiting CalculateWeeklyOffsFromDef()")}catch(x){Logger.ErrorLog("CommonMonthlyPayroll::EXCEPTION CalculateWeeklyOffsFromDef()"+x.stack)}return D}GetLeavesTaken(D,x,p,W){Logger.InfoLog("CommonMonthlyPayroll::Entering GetLeavesTaken()"),W.dTaken=W.dAvail=0;let T=m.d.empService.GetLeavesTaken(this.sEmpSeqNo,D,x,p);null!=T&&T.Tables.length>0&&T.Tables[0].length>0&&(null!=T.Tables[0][0].LeavesTaken&&null!=T.Tables[0][0].LeavesTaken&&""!=T.Tables[0][0].LeavesTaken.toString()&&(W.dTaken=parseFloat(T.Tables[0][0].LeavesTaken)),null!=T.Tables[0][0].AvailableLeaves&&null!=T.Tables[0][0].AvailableLeaves&&""!=T.Tables[0][0].AvailableLeaves.toString()&&(W.dAvail=parseFloat(T.Tables[0][0].AvailableLeaves))),Logger.InfoLog("CommonMonthlyPayroll::Exiting GetLeavesTaken()")}GetUnpaidDays(){let D,x,p=0,W=0;if(this.othMPField.DateOfJoining.getDate(),this.PayrollMonth.DaysInMonth(),this.othMPField.DateOfJoining>this.PayrollMonthStart)if("Actual Days"!=m.d.SessionManager.Preferences.PayDays){let le=parseInt(m.d.SessionManager.Preferences.PayDays);for(D=this.PayrollMonthStart,x=this.othMPField.DateOfJoining;D<x;)D.getDate()!=D.DaysInMonth()?(D.getDate()>le||p++,D=D.AddDays(1)):(p+=le-D.getDate()+1,D=D.AddDays(1));if(this.othMPField.DateOfRelieve<this.PayrollMonthEnd)for(D=this.othMPField.DateOfRelieve.AddDays(1),x=this.PayrollMonthEnd;D<=x&&!(m.d.SessionManager.Preferences.ContainsKey("ConsiderUnpaidDaysBasedOnPayDays")&&"TRUE"==m.d.SessionManager.Preferences.ConsiderUnpaidDaysBasedOnPayDays.toString().toUpperCase()&&(W=A.J0.GetDateDifference(D,this.PayrollMonthStart)+1,W>le));)D.getDate()!=D.DaysInMonth()?(D.getDate()>le||p++,D=D.AddDays(1)):(p+=le-D.getDate()+1,D=D.AddDays(1))}else p+=A.J0.GetDateDifference(this.othMPField.DateOfJoining,this.PayrollMonthStart),this.othMPField.DateOfRelieve<this.PayrollMonthEnd&&(p+=A.J0.GetDateDifference(this.PayrollMonthEnd,this.othMPField.DateOfRelieve));else if(this.othMPField.DateOfRelieve<this.PayrollMonthEnd)if("Actual Days"!=m.d.SessionManager.Preferences.PayDays){let le=parseInt(m.d.SessionManager.Preferences.PayDays);for(D=this.othMPField.DateOfRelieve.AddDays(1),x=this.PayrollMonthEnd;D<=x&&!(m.d.SessionManager.Preferences.ContainsKey("ConsiderUnpaidDaysBasedOnPayDays")&&"TRUE"==m.d.SessionManager.Preferences.ConsiderUnpaidDaysBasedOnPayDays.toString().toUpperCase()&&(W=A.J0.GetDateDifference(D,this.PayrollMonthStart)+1,W>le));)D.getDate()!=D.DaysInMonth()?(D.getDate()>le||p++,D=D.AddDays(1)):(p+=le-D.getDate()+1,D=D.AddDays(1))}else p+=A.J0.GetDateDifference(this.PayrollMonthEnd,this.othMPField.DateOfRelieve);return p}GetVacationAmountDetails(D,x){Logger.InfoLog("CommonMonthlyPayroll::Entering GetVacationAmountDetails()"),this.arrLstVacAmountFields=new Array;let p,j,R=0,le=0;if(null!=D&&null!=D&&D.Tables.length>0&&D.Tables[2].length>0){let F=D.Tables[2],ne=D.Tables[3];if(p=D.Tables[4],null!=F&&F.length>0)for(let v=0;v<F.length;v++){if(this.oVacAmountField=new ue,this.oVacAmountField.ID=parseInt(F[v].ID),this.oVacAmountField.SNo=parseInt(F[v].SNO),this.oVacAmountField.TypeId=parseInt(F[v].TYPEID),2==this.oVacAmountField.TypeId?(this.oVacAmountField.SName="Earning"+this.oVacAmountField.SNo,this.oVacAmountField.TypeName="Earnings"):3==this.oVacAmountField.TypeId?(this.oVacAmountField.SName="",this.oVacAmountField.TypeName="Deductions"):4==this.oVacAmountField.TypeId&&(this.oVacAmountField.SName="",this.oVacAmountField.TypeName="Loans"),this.oVacAmountField.EmpNode=parseInt(F[v].EMPNODE),this.oVacAmountField.ComponentID=parseInt(F[v].COMPONENTID),this.oVacAmountField.ComponentName=F[v].COMPONENTNAME.toString(),this.oVacAmountField.Percentage=parseFloat(F[v].PERCENTAGE).ToString(m.d.SessionManager.sPayrollDecimals),this.oVacAmountField.EnCash=parseInt(F[v].ENCASH),this.oVacAmountField.ExcessdaysSalary=parseInt(F[v].EXCESSDAYSSALARY),this.oVacAmountField.Formula=F[v].FORMULA.toString().replace("Field",F[v].COMPONENTNAME.toString()),this.oVacAmountField.ActualAmount="EMPLOYEE_BASIC"==this.oVacAmountField.ComponentName&&2==this.oVacAmountField.TypeId?parseFloat(ne[0].BasicMonthly).ToString(m.d.SessionManager.sPayrollDecimals):"EMPLOYEE_BASIC"!=this.oVacAmountField.ComponentName.toString()&&2==this.oVacAmountField.TypeId?parseFloat(ne[0]["Earning"+this.oVacAmountField.SNo]).ToString(m.d.SessionManager.sPayrollDecimals):m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.oVacAmountField.PercActualAmount=parseFloat(this.oVacAmountField.ActualAmount)>0&&parseFloat(this.oVacAmountField.Percentage)>0?(parseFloat(this.oVacAmountField.ActualAmount)*parseFloat(this.oVacAmountField.Percentage)/100).ToString(m.d.SessionManager.sPayrollDecimals):m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),R=le=0,-1==parseFloat(this.oVacAmountField.Percentage)){let E=m.d.empService.GetQueryData(1,"AllowencesData",this.iDocID,this.oVacAmountField.ComponentID,this.oVacAmountField.EmpNode);E&&E.length>0&&(le=parseFloat(E[0][Object.keys(E[0])[0]])),j=m.d.empService.GetQueryData(1,"AllowencesData1",this.oVacAmountField.SNo.toString(),this.oVacAmountField.EmpNode,""),j&&j.length>0&&(R=parseFloat(j[0][Object.keys(j[0])[0]])),this.oVacAmountField.ActualAmount=(R-le).ToString(m.d.SessionManager.sPayrollDecimals)}else-3==parseFloat(this.oVacAmountField.Percentage)&&(j=m.d.empService.GetQueryData(1,"AllowencesData2",this.oVacAmountField.SNo.toString(),this.oVacAmountField.EmpNode,""),j&&j.length>0&&(R=parseFloat(j[0][Object.keys(j[0])[0]])),this.oVacAmountField.ActualAmount=R.ToString(m.d.SessionManager.sPayrollDecimals));4==this.oVacAmountField.TypeId&&x?(p.RowFilter="",null!=p&&p.length>0&&(p.RowFilter="LoanTypeID="+this.oVacAmountField.ComponentID,p.length>0&&(this.oVacAmountField.Amount=parseFloat(p[0].LoanAmount).ToString(m.d.SessionManager.sPayrollDecimals),this.oVacAmountField.ActualAmount=parseFloat(p[0].LoanAmount).ToString(m.d.SessionManager.sPayrollDecimals)))):this.oVacAmountField.Amount=m.d.SessionManager.Round(0,m.d.SessionManager.sPayrollDecimals),this.arrLstVacAmountFields.push(this.oVacAmountField)}}Logger.InfoLog("CommonMonthlyPayroll::Exiting GetVacationAmountDetails()")}}class re{constructor(){this.lstPrevAdj=Array()}AggregateLeaves(D,x,p,W,T,R,le,j=0,F=!1,ne=!1){let ie,ce,z,v=0,E=0,L=0,I=0,Ce=m.d.SessionManager.Preferences.WeeklyOffsDefBasedOn.split(","),he=" 1=1 ",se="";if(z=x.Tables[2],null!=Ce&&null!=Ce&&Ce.length>0)for(let U=0;U<Ce.length;U++)A.J0.IsEmpty(Ce[U])||(se="CCNID"+(parseInt(Ce[U])-5e4),ie=T.Tables[0].filter(Ee=>Ee.EmpSeqNo==D),null!=ie&&ie.length>0&&(se.Contains("CCNID51")?(he+=" AND ( "+se+"="+ie[0].EmpSeqNo+" OR "+se+"= 1)",z=z.filter(Ee=>Ee[se]==ie[0].EmpSeqNo||1==Ee[se])):(he+=" AND ( "+se+"="+ie[0][se]+" OR "+se+"= 1)",z=z.filter(Ee=>Ee[se]==ie[0][se]||1==Ee[se]))));" 1=1 "!=he&&(this.drcWOffAdjDef=z);let ee,Z,fe,N=x.Tables[3];if(Ce=m.d.SessionManager.Preferences.HolidaysBasedOn.split(","),he=" 1=1 ",se="",null!=Ce&&null!=Ce&&Ce.length>0)for(let U=0;U<Ce.length;U++)A.J0.IsEmpty(Ce[U])||(se="CCNID"+(parseInt(Ce[U])-5e4),ie=T.Tables[0].filter(Ee=>Ee.EmpSeqNo==D),null!=ie&&ie.length>0&&(se.Contains("CCNID51")?(he+=" AND ( "+se+"="+ie[0].EmpSeqNo+" OR "+se+"= 1)",N=N.filter(Ee=>Ee[se]==ie[0].EmpSeqNo||1==Ee[se])):(he+=" AND ( "+se+"="+ie[0][se]+" OR "+se+"= 1)",N=N.filter(Ee=>Ee[se]==ie[0][se]||1==Ee[se]))));if(" 1=1 "!=he&&(ce=N),null!=ce&&ce.length>0&&(this.dtHolidayAdjDef=ce),fe=x.Tables[0].filter(F?U=>U.EmpSeqNo==D&&U.ComponentID==j:U=>U.EmpSeqNo==D&&U.ComponentID!=j),!A.J0.IsEmpty(fe)&&null!=fe&&fe.length>0)for(let U=0;U<fe.length;U++){ee=A.J0.ParseDate(fe[U].FromDate),Z=A.J0.ParseDate(fe[U].ToDate),I=parseInt(fe[U].ComponentID);let Ee=m.d.SessionManager.Preferences.ConsiderLOPBasedOn.toString(),Me=null;Ee.length>0&&(Me=Ee.split(","));let Re=x.Tables[1].filter(st=>st.GradeID==le&&4==st.Type&&st.ComponentID==I);if(null!=Re&&Re.length>0&&(L=A.J0.Double(Re[0].Percentage)),ee>=p)Z<=W?(E=parseFloat(fe[U].NoOfDays),null==Me||null!=Me&&!Me.Contains(I.toString())?(L>0&&L<100||ne)&&(E=ne?E*L/100:E*(100-L)/100,v+=E):v+=E):ee<=W&&(E=this.GetNoOfDays(ee,W,I,x,R,le),null==Me||null!=Me&&!Me.Contains(I.toString())?(L>0&&L<100||ne)&&(E=ne?E*L/100:E*(100-L)/100,v+=E):v+=E);else if(Z<=W?Z>=p&&(E=this.GetNoOfDays(p,Z,I,x,R,le),null==Me||null!=Me&&!Me.Contains(I.toString())?(L>0&&L<100||ne)&&(E=ne?E*L/100:E*(100-L)/100,v+=E):v+=E):(E=this.GetNoOfDays(p,W,I,x,R,le),null==Me||null!=Me&&!Me.Contains(I.toString())?(L>0&&L<100||ne)&&(E=ne?E*L/100:E*(100-L)/100,v+=E):v+=E),ee<=p&&!ne){let st,je,ct,ot,we,Pe={PayrollMonth:st,PayrollMonthStart:je,PayrollMonthEnd:ct};if(A.J0.SetPayrollDate_1(A.J0.ParseDate(ee),Pe),st=Pe.PayrollMonth,je=Pe.PayrollMonthStart,ct=Pe.PayrollMonthEnd,we=this.GetPrevAdj(ee,Z,je,ct,Me,L,I,ne,R,le,x,fe[U]),ot=ct.AddMonths(1),Z>ct)do{let w={PayrollMonth:st,PayrollMonthStart:je,PayrollMonthEnd:ct};A.J0.SetPayrollDate_1(A.J0.ParseDate(ot),w),st=w.PayrollMonth,je=w.PayrollMonthStart,ct=w.PayrollMonthEnd,we=this.GetPrevAdj(ee,Z,je,ct,Me,L,I,ne,R,le,x,fe[U]),ot=ot.AddMonths(1)}while(ot<=Z)}}return v}GetPrevAdj(D,x,p,W,T,R,le,j,F,ne,v,E){let L=0,I=0;D>=p?x<=W?(I=parseFloat(E.NoOfDays),null==T||null!=T&&!T.Contains(le.toString())?(R>0&&R<100||j)&&(I=j?I*R/100:I*(100-R)/100,L+=I):L+=I):D<=W&&(I=this.GetNoOfDays(D,W,le,v,F,ne),null==T||null!=T&&!T.Contains(le.toString())?(R>0&&R<100||j)&&(I=j?I*R/100:I*(100-R)/100,L+=I):L+=I):x<=W?x>=p&&(I=this.GetNoOfDays(p,x,le,v,F,ne),null==T||null!=T&&!T.Contains(le.toString())?(R>0&&R<100||j)&&(I=j?I*R/100:I*(100-R)/100,L+=I):L+=I):(I=this.GetNoOfDays(p,W,le,v,F,ne),null==T||null!=T&&!T.Contains(le.toString())?(R>0&&R<100||j)&&(I=j?I*R/100:I*(100-R)/100,L+=I):L+=I);let ie=new O,ce=!1;if(null!=this.lstPrevAdj&&this.lstPrevAdj.length>0)for(let Ce=0;Ce<this.lstPrevAdj.length;Ce++)if(this.lstPrevAdj[Ce].PrevMonth.ToString("dd MMM yyyy")==p.ToString("dd MMM yyyy")){ce=!0,this.lstPrevAdj[Ce].dDays=this.lstPrevAdj[Ce].dDays-L;break}return ce||(ie.dDays=-L,ie.PrevMonth=p,this.lstPrevAdj.push(ie)),L}GetNoOfDays(D,x,p,W,T,R){let le=0,j=0,F=0,ne=null,v=W.Tables[1].filter(E=>E.GradeID==R&&4==E.Type&&E.ComponentID==p);if(null!=v&&v.length>0){let E=D,L=v[0].IncludeRExclude.toString();if(le=A.J0.GetDateDifference(x,D)+1,"IncludeBoth"==L||""==L)return le;if("IncludeWeeklyOffs"==L)for(;E<=x;)A.J0.IsEmpty(this.dtHolidayAdjDef)||(ne=this.dtHolidayAdjDef.filter(I=>I.HolidayDate==E.ToString("dd/MMM/yyyy"))),null!=ne&&ne.length>0&&F++,E=E.AddDays(1);else if("IncludeHolidays"==L)for(;E<=x;)null!=this.drcWOffAdjDef&&this.drcWOffAdjDef.length>0?this.CheckIsWeeklyOffFromDef(E,W,D,x,T)&&j++:("NONE"!=T.drcAllEmpsData[0].WeeklyOff1.toString().toUpperCase()?E.getDay().toString()==T.drcAllEmpsData[0].WeeklyOff1.toString()&&j++:E.getDay().toString()==m.d.SessionManager.Preferences.WeeklyOff1&&j++,"NONE"!=T.drcAllEmpsData[0].WeeklyOff2.toString().toUpperCase()?T.drcAllEmpsData[0].WeeklyOff2.toString().toUpperCase()!=T.drcAllEmpsData[0].WeeklyOff1.toString().toUpperCase()&&E.getDay().toString()==T.drcAllEmpsData[0].WeeklyOff2.toString()&&j++:E.getDay().toString()==m.d.SessionManager.Preferences.WeeklyOff2&&j++),E=E.AddDays(1);else if("ExcludeBoth"==L)for(;E<=x;){let I=!1;A.J0.IsEmpty(this.dtHolidayAdjDef)||(ne=this.dtHolidayAdjDef.filter(ie=>ie.HolidayDate==E.ToString("dd/MMM/yyyy"))),null!=ne&&ne.length>0&&(F++,I=!0),null!=this.drcWOffAdjDef&&this.drcWOffAdjDef.length>0?this.CheckIsWeeklyOffFromDef(E,W,D,x,T)&&!I&&j++:("NONE"!=T.drcAllEmpsData[0].WeeklyOff1.toString().toUpperCase()?E.getDay().toString()==T.drcAllEmpsData[0].WeeklyOff1.toString()&&!I&&j++:E.getDay().toString()==m.d.SessionManager.Preferences.WeeklyOff1&&!I&&j++,"NONE"!=T.drcAllEmpsData[0].WeeklyOff2.toString().toUpperCase()?T.drcAllEmpsData[0].WeeklyOff2.toString().toUpperCase()!=T.drcAllEmpsData[0].WeeklyOff1.toString().toUpperCase()&&E.getDay().toString()==T.drcAllEmpsData[0].WeeklyOff2.toString()&&!I&&j++:E.getDay().toString()==m.d.SessionManager.Preferences.WeeklyOff2&&!I&&j++),E=E.AddDays(1)}else if("ExcludeWeeklyOffs"==L)for(;E<=x;)null!=this.drcWOffAdjDef&&this.drcWOffAdjDef.length>0?this.CheckIsWeeklyOffFromDef(E,W,D,x,T)&&j++:("NONE"!=T.drcAllEmpsData[0].WeeklyOff1.toString().toUpperCase()?E.getDay().toString()==T.drcAllEmpsData[0].WeeklyOff1.toString()&&j++:E.getDay().toString()==m.d.SessionManager.Preferences.WeeklyOff1&&j++,"NONE"!=T.drcAllEmpsData[0].WeeklyOff2.toString().toUpperCase()?T.drcAllEmpsData[0].WeeklyOff2.toString().toUpperCase()!=T.drcAllEmpsData[0].WeeklyOff1.toString().toUpperCase()&&E.getDay().toString()==T.drcAllEmpsData[0].WeeklyOff2.toString()&&j++:E.getDay().toString()==m.d.SessionManager.Preferences.WeeklyOff2&&j++),E=E.AddDays(1);else if("ExcludeHolidays"==L)for(;E<=x;)A.J0.IsEmpty(this.dtHolidayAdjDef)||(ne=this.dtHolidayAdjDef.filter(I=>I.HolidayDate==E.ToString("dd/MMM/yyyy"))),null!=ne&&ne.length>0&&F++,E=E.AddDays(1)}return le-(j+F)}CheckIsWeeklyOffFromDef(D,x,p,W,T){if(null!=this.drcWOffAdjDef&&this.drcWOffAdjDef.length>0){let ne,R=1,j=T.DateOfRelieve<W?T.DateOfRelieve:W,F=T.DateOfJoining>p?T.DateOfJoining:p;for(;F<=j;){for(ne=F.AddDays(6);F<=ne&&F<=j;){if(x.Columns[2].Contains("Week"+R.toString()+"_W1")&&!A.J0.IsEmpty(this.drcWOffAdjDef[0]["Week"+R.toString()+"_W1"].toString())&&F.getDayName().toString().toLowerCase()==this.drcWOffAdjDef[0]["Week"+R.toString()+"_W1"].toString().toLowerCase()){if(F.ToString("dd MMM yyyy")==D.ToString("dd MMM yyyy"))return!0}else if(x.Columns[2].Contains("Week"+R.toString()+"_W2")&&!A.J0.IsEmpty(this.drcWOffAdjDef[0]["Week"+R.toString()+"_W2"].toString())&&F.getDayName().toString().toLowerCase()==this.drcWOffAdjDef[0]["Week"+R.toString()+"_W2"].toString().toLowerCase()&&F.ToString("dd MMM yyyy")==D.ToString("dd MMM yyyy"))return!0;F=F.AddDays(1)}R++}}return!1}}class O{constructor(){this.dDays=0}}class B{constructor(){this.sEmpIds="",this.lstGradeEmps=new Array,this.GradePayrollMonth=A.J0.GetEmptyDate(),this.GradePayrollMonthStart=A.J0.GetEmptyDate(),this.GradePayrollMonthEnd=A.J0.GetEmptyDate(),this.GradedtFF=A.J0.GetEmptyDate(),this.GradedtTT=A.J0.GetEmptyDate()}}},72669:(qe,be,t)=>{"use strict";t.r(be),t.d(be,{RibbonExtViewModel:()=>H,TimeSpan:()=>O});var m=t(10467),A=t(33588),G=t(9120),J=t(21050),Y=t(31168),oe=t(88281),X=t(55028),k=t(16435);let H=(()=>{class B{static#e=this.CRMFeatureActions=[6558,6498,6516,6517,3003,6499,3004,6467,6466,6439,6438,6458,6459,6447,6449,6450,6508,6557];static#t=this.PRDFeatureActions=[6334,6327,6354,6388,6389,6355,491,492,506,523,546];constructor(D){this.iEmpIndex=0,B.router=D}static#n=this.PayrollFeatureActions=[4101];static#i=this.RentalFeatureActions=[274,190,3739,8112,611,514,3527,3552,3782,3742,3015,3016,601,602,3706,3705,513,9360,210,212];static onMenuClick(D){let x={};G.d.page.ShowLoading=!0,B.OncmdLoadPage(D,x).then(p=>{if(!x.component)return void(G.d.page.ShowLoading=!1);let W;"FeatureActionID"==x.basedon?W=G.d.page.tabs.find(T=>T.instance instanceof x.component&&T.instance.FeatureActionID==D.FeatureActionID):"CostCenterID"==x.basedon?W=G.d.page.tabs.find(T=>T.instance instanceof x.component&&T.instance.CostCenterID==D.FeatureID):"Unique"==x.basedon&&(W=G.d.page.tabs.find(T=>T.instance instanceof x.component)),W?(G.d.page.tabs.map(T=>T.active=!1),W.active=!0,G.d.page.ShowLoading=!1):(x.title=D.ScreenName,G.d.page.addNewTab(x))})}static OncmdLoadPage(D,x){var p=this;return(0,m.A)(function*(){if(D&&D instanceof A.aF){let W=D,T=0,R=0,le="";if(null!=W.ScreenName&&(le=W.ScreenName),W.FeatureID>0&&(T=W.FeatureID),R=W.ScreenType,133!=T)if(145==T){if(R=7,Y.J0.IsEmpty(G.d.SessionManager.Preferences["CRM-Products"])||"0"==G.d.SessionManager.Preferences["CRM-Products"].toString())return;W.FeatureActionTypeID=2,T=parseInt(G.d.SessionManager.Preferences["CRM-Products"].toString())}else if(163!=T)if(71==T){R=7;let ne=G.d.common.GetDataSet("REVM001","");null!=ne&&ne.Tables.length>0&&ne.Tables[0].length>0&&(W.FeatureActionTypeID=2,T=parseInt(ne.Tables[0][0].FeatureID.toString()),W.FeatureActionID=parseInt(ne.Tables[0][0].featureactionid.toString()),W.FeatureID=T)}else if(215==W.FeatureActionTypeID){if(2==T||3==T){const{ReportViewModel:ne}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,58106)),{ReportViewComponent:v}=yield Promise.all([t.e(8986),t.e(3540),t.e(9893)]).then(t.bind(t,51159));let E=new ne;return E.ReportViewModel_Query(T,-1,le,0,null,!1,!0),void(0==E.ReturnType&&Object.assign(x,{component:v,params:{obj:E}}))}}else{if(494==W.FeatureID){const{BulkEditComponent:ne}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(8962),t.e(2076)]).then(t.bind(t,78962)),{BulkEditViewModel:v}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(334),t.e(8565),t.e(7366),t.e(2076)]).then(t.bind(t,97366));let E=new v(W.FeatureActionID);return void Object.assign(x,{component:ne,params:{obj:E}})}if(506==W.FeatureID){const{WebConfigViewModel:ne}=yield Promise.all([t.e(9710),t.e(2076)]).then(t.bind(t,20355)),{WebConfigComponent:v}=yield Promise.all([t.e(9924),t.e(1940),t.e(8986),t.e(333),t.e(9710),t.e(2076),t.e(9524)]).then(t.bind(t,90231));let E=new ne;return E.WebConfigViewModel_1(le),void Object.assign(x,{component:v,params:{obj:E}})}if(498==W.FeatureID){const{ReportViewModel:ne}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,58106)),{ReportViewComponent:v}=yield Promise.all([t.e(8986),t.e(3540),t.e(9893)]).then(t.bind(t,51159));let E=new ne;return E.ReportViewModel_1(W.FeatureActionID),void(0==E.ReturnType&&Object.assign(x,{component:v,params:{obj:E}}))}if(499==W.FeatureID){const{DBViewViewModel:ne}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(334),t.e(8828),t.e(8565),t.e(1759),t.e(7366),t.e(6616),t.e(5424),t.e(2076)]).then(t.bind(t,33043)),{DBViewComponent:v}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2586),t.e(3524),t.e(2076)]).then(t.bind(t,63524));let E=new ne;return E.DBViewViewModel_1(W.FeatureActionID),void Object.assign(x,{component:v,params:{obj:E}})}if(1003==W.FeatureID){const{RCalenderViewModel:ne}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,61952)),{ResourceTimelineComponent:v}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(2016)]).then(t.bind(t,34873));let E=new ne;return E._RCalenderViewModel(!1),void Object.assign(x,{component:v,params:{obj:E}})}if(9e3==W.FeatureID||9001==W.FeatureID){const{GSTModule:ne}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(7038)]).then(t.bind(t,34657));return void Object.assign(x,ne.LoadScreen(W,le))}if(-44==W.FeatureID){const{LookupsViewModel:ne}=yield Promise.all([t.e(9710),t.e(2076),t.e(2546)]).then(t.bind(t,52546)),{LookupComponent:v}=yield t.e(2409).then(t.bind(t,74790));let E=new ne;return E.LookupsViewModel(le,W.FeatureActionID),void Object.assign(x,{component:v,params:{obj:E}})}if(106==W.FeatureID&&3756!=W.FeatureActionID){const{UpdatePayTermsViewModel:ne}=yield Promise.all([t.e(9710),t.e(2076),t.e(446)]).then(t.bind(t,50446)),{UpdatepaytermsComponent:v}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(7445)]).then(t.bind(t,87445));let E=new ne(W.ScreenName);return void Object.assign(x,{component:v,params:{obj:E}})}}const{TreeViewPageComponent:F}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,40465));switch(W.FeatureActionID){case 2:case 88:case 89:case 2810:case 3004:case 3602:case 6194:case 6337:case 6379:case 6384:case 6450:case 6498:case 6508:case 6467:case 6517:case 3085:Object.assign(x,{component:F,params:{ScreenName:W.ScreenName,FeatureActionID:W.FeatureActionID,CostCenterID:W.FeatureID,Call:"C4"},basedon:"FeatureActionID"});break;case 21:Object.assign(x,{component:F,params:{ScreenName:W.ScreenName,PactScreenID:21,FeatureActionID:W.FeatureActionID,CostCenterID:W.FeatureID,Call:"C3"},basedon:"FeatureActionID"});break;case 564:const{BulkDocumentPostingViewModel:ne}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(4767)]).then(t.bind(t,17148)),{BulkDocumentPostingComponent:v}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(3712)]).then(t.bind(t,7683));let E=G.d.page.tabs.find(Pt=>Pt.params?.obj instanceof ne);if(E)G.d.page.SetActiveTab(E);else{let Pt=new ne;G.d.page.addNewTab({title:W.ScreenName,component:v,params:{obj:Pt}})}break;case 133:Object.assign(x,{component:F,params:{ScreenName:W.ScreenName,FeatureActionID:W.FeatureActionID,CostCenterID:W.FeatureID,Call:"C3"},basedon:"FeatureActionID"});break;case 3737:const{ProductSearchCatalogViewModel:L}=yield Promise.all([t.e(9924),t.e(44),t.e(6395),t.e(9710),t.e(2076)]).then(t.bind(t,58776)),{ProductSearchCatalogComponent:I}=yield t.e(126).then(t.bind(t,47745));G.d.page.ShowDialog(new L(p,268,3,null,null),I);break;case 140:const{GenerateBillsViewModel:ie}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(9380)]).then(t.bind(t,36999)),{GenerateBillsComponent:ce}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(9613)]).then(t.bind(t,99613));let Ce=new ie(le);Object.assign(x,{component:ce,params:{obj:Ce}});break;case 67:const{AddUOMComponent:he}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(8208)]).then(t.bind(t,78208)),{AddUOMViewModel:se}=yield Promise.all([t.e(9710),t.e(2076),t.e(9331)]).then(t.bind(t,21712));let z=new se;return void Object.assign(x,{component:he,params:{obj:z}});case 70:const{AddeditcurrencyComponent:N}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(3172)]).then(t.bind(t,43172)),{AddCurrencyViewModel:ee}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(6344)]).then(t.bind(t,26344));let Z=new ee;Z.PactScreenID="70",Object.assign(x,{component:N,params:{obj:Z}});break;case 2078:const{LookupsViewModel:fe}=yield Promise.all([t.e(9710),t.e(2076),t.e(2546)]).then(t.bind(t,52546)),{LookupComponent:U}=yield t.e(2409).then(t.bind(t,74790));let Ee=new fe;13==R&&"MASTERS"==le.toUpperCase()?Ee.LookupsViewModel(le,0,!0):Ee.LookupsViewModel(le),Object.assign(x,{component:U,params:{obj:Ee}});break;case 3471:const{BRSViewModel:Me}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(8798),t.e(2076),t.e(2034)]).then(t.bind(t,92034)),{BrsComponent:Re}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(2844)]).then(t.bind(t,20463));let st=new Me(le);st.BRDDialog.IsQuit&&Object.assign(x,{component:Re,params:{obj:st}});break;case 3472:const{BRSMatchViewModel:je}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(8798),t.e(2076),t.e(2034)]).then(t.bind(t,92034));let ct=new je(le);ct.BRDDialog.IsQuit&&Object.assign(x,{component:Re,params:{obj:ct}});break;case 3672:const{DimensionWiseLockViewModel:ot}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(2057)]).then(t.bind(t,4438)),{DimensionWiseLockComponent:Pe}=yield Promise.all([t.e(9924),t.e(1940),t.e(8986),t.e(333),t.e(9710),t.e(2076),t.e(9585)]).then(t.bind(t,49603));let we=new ot;Object.assign(x,{component:Pe,params:{obj:we}});break;case 4752:case 4872:const{PostDepreciationViewModel:w}=yield Promise.all([t.e(9924),t.e(2993),t.e(44),t.e(6411),t.e(7541),t.e(3495),t.e(9710),t.e(2076),t.e(4122)]).then(t.bind(t,91741)),{PosDepreciationComponent:Le}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(6467),t.e(2076)]).then(t.bind(t,96467));let xe=new w(le,!1,4872==W.FeatureActionID);Object.assign(x,{component:Le,params:{obj:xe}});break;case 2869:const{ChequeBookViewModel:ke}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(4974)]).then(t.bind(t,64974)),{ChequeBookComponent:Ve}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(3460)]).then(t.bind(t,51079));let _e=new ke;Object.assign(x,{component:Ve,params:{obj:_e}});break;case 3700:Object.assign(x,{component:F,params:{ScreenName:W.ScreenName,FeatureActionID:W.FeatureActionID,CostCenterID:40,Call:"C3"},basedon:"FeatureActionID"});break;case 2088:Object.assign(x,{component:F,params:{ScreenName:W.ScreenName,FeatureActionID:W.FeatureActionID,CostCenterID:45,Call:"C3"},basedon:"FeatureActionID"});break;case 3498:case 3498:Object.assign(x,{component:F,params:{ScreenName:W.ScreenName,FeatureActionID:W.FeatureActionID,CostCenterID:49,Call:"C4"},basedon:"FeatureActionID"});break;case 1971:Object.assign(x,{component:F,params:{ScreenName:W.ScreenName,FeatureActionID:W.FeatureActionID,CostCenterID:162,Call:"C4"},basedon:"FeatureActionID"});break;case 3756:const{PaymentTermViewModel:Te}=yield Promise.all([t.e(6411),t.e(9710),t.e(2076),t.e(1016)]).then(t.bind(t,28635)),{PaymentTermComponent:Oe}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(1560)]).then(t.bind(t,69179));let Xe=new Te;Object.assign(x,{component:Oe,params:{obj:Xe}});break;case 2767:const{RCalenderViewModel:Ue}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,61952)),{CRMFullCalendarComponent:it}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2586),t.e(2122),t.e(2076)]).then(t.bind(t,49741));let Tt=new Ue;Tt._RCalenderViewModel(!1),Object.assign(x,{component:it,params:{obj:Tt}});break;case 3136:const{FavoritesComponent:bt}=yield t.e(5744).then(t.bind(t,43363)),{FavoritesViewModel:yt}=yield Promise.all([t.e(9183),t.e(2076)]).then(t.bind(t,61564));let vt;return vt=0!=W.FeatureActionTypeID&&1==W.ISDoctype?new yt(W.FeatureActionTypeID):new yt,void Object.assign(x,{component:bt,params:{obj:vt},basedon:"FeatureActionID"});case 3769:const{ResetPasswordComponent:Et}=yield t.e(1660).then(t.bind(t,49279)),{ResetPasswordViewModel:Ft}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,95273));return void G.d.page.ShowDialog(new Ft,Et,{Title:G.d.GetResource("ResetPassword"),ShowCenter:!0});case 35:case 85:const{ReOrderLevelNewViewModel:Mt}=yield Promise.all([t.e(9924),t.e(2993),t.e(44),t.e(5275),t.e(3495),t.e(6716),t.e(617),t.e(9710),t.e(2076)]).then(t.bind(t,55379)),{ReOrderLevelComponent:qt}=yield t.e(4784).then(t.bind(t,2403));let Bt=new Mt(le,35==W.FeatureActionID?112:165,null);Object.assign(x,{component:qt,params:{obj:Bt}});break;case 5567:const{PostedDocumentViewModel:$t}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(8828),t.e(2076)]).then(t.bind(t,36447)),{PostedDocumentComponent:fn}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(1284)]).then(t.bind(t,38903));let Wt=new $t;return void Object.assign(x,{component:fn,params:{obj:Wt}});case 2879:const{ShowJVViewModel:yn}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,12451)),{ShowJVComponent:ai}=yield t.e(7254).then(t.bind(t,57254));let Qt=new yn;Qt.ShowJVViewModel_4(),Object.assign(x,{component:ai,params:{obj:Qt}});break;case 3763:const{ChequeDiscPostedDocumentViewModel:gi}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(5622)]).then(t.bind(t,85622)),{ChequeDiscPostedDocumentComponent:Ge}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(6338)]).then(t.bind(t,96338));let Ze=new gi;Object.assign(x,{component:Ge,params:{obj:Ze}});break;case 3681:const{DocumentFlowChartComponent:Fe}=yield t.e(1028).then(t.bind(t,48647)),{DocumentFlowChartViewModel:We}=yield t.e(8893).then(t.bind(t,41274));let dt=new We(!1,"");Object.assign(x,{component:Fe,params:{obj:dt}});break;case 3682:const{StickNoteViewModel:xt}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,70459)),{StickynotesComponent:jt}=yield t.e(7426).then(t.bind(t,97426));if(!G.d.page.tabs.find(Pt=>Pt.instance instanceof jt)){let Pt=new xt;Pt.DisplayName=W.ScreenName,Object.assign(x,{component:jt,params:{obj:Pt}})}break;case 1700:break;default:if(p.RentalFeatureActions.Contains(W.FeatureActionID)){const{RibbonExtRental:Pt}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(9817)]).then(t.bind(t,12198));Object.assign(x,Pt.LoadRentalScreen(W))}else if(p.CRMFeatureActions.Contains(W.FeatureActionID)){const{RibbonExtCrm:Pt}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(1727),t.e(2460),t.e(7257),t.e(2076)]).then(t.bind(t,89638));Object.assign(x,Pt.LoadCRMScreen(W,le))}else if(p.PRDFeatureActions.Contains(W.FeatureActionID)){const{RibbonExtPrd:Pt}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(6926),t.e(3468),t.e(2076)]).then(t.bind(t,21087));Object.assign(x,Pt.LoadPRDScreen(W,le))}else if(p.PayrollFeatureActions.Contains(W.FeatureActionID)){const{RibbonExtPay:Pt}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(334),t.e(8565),t.e(2076)]).then(t.bind(t,48565));Object.assign(x,Pt.LoadPayrollScreen(W,le))}else{if(50054==T||256==W.FeatureID||258==W.FeatureID||260==W.FeatureID||261==W.FeatureID||262==W.FeatureID||263==W.FeatureID||264==W.FeatureID||266==W.FeatureID||141==W.FeatureID||40054==W.FeatureID||40088==W.FeatureID||40095==W.FeatureID){try{const{RibbonExtPay:Pt}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(334),t.e(8565),t.e(2076)]).then(t.bind(t,48565));Object.assign(x,Pt.LoadPayrollScreen(W,le))}catch(Pt){Logger.ErrorLog("Payroll ViewModel Load Error",Pt.stack)}return}if(267==W.FeatureID){const{RCalenderViewModel:Pt}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,61952)),{CRMFullCalendarComponent:Ct}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2586),t.e(2122),t.e(2076)]).then(t.bind(t,49741));let nn=new Pt;nn._RCalenderViewModel(!1,W.FeatureID),Object.assign(x,{component:Ct,params:{obj:nn}});break}if(136!=W.FeatureID)if(T>=5e4)if(2==W.FeatureActionTypeID)Object.assign(x,{component:F,params:{ScreenName:W.ScreenName,FeatureActionID:W.FeatureActionID,CostCenterID:T,Call:"C3"},basedon:"CostCenterID"});else if(1==W.FeatureActionTypeID){const{AddEditCostcenterComponent:Pt}=yield Promise.all([t.e(1940),t.e(1851),t.e(2454),t.e(3556)]).then(t.bind(t,40073)),{AddCostCenterViewModel:Ct}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,38256));let nn,an;an=Pt,nn=new Ct(T),nn.AddCostCenterViewModel_1(0,T,0,le,!1),G.d.page.addNewTab({component:an,params:{obj:nn}})}else 30==W.FeatureActionTypeID&&Object.assign(x,{component:F,params:{ScreenName:W.ScreenName,FeatureActionID:W.FeatureActionID,CostCenterID:W.FeatureID,Call:"C3"},basedon:"CostCenterID"});else if(50==W.FeatureID){const{ReportViewModel:Pt}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,58106)),{ReportViewComponent:Ct}=yield Promise.all([t.e(8986),t.e(3540),t.e(9893)]).then(t.bind(t,51159));let nn=new Pt;nn.ReportViewModel_1(W.FeatureActionTypeID),0==nn.ReturnType&&Object.assign(x,{component:Ct,params:{obj:nn}})}else{if(106==W.FeatureID&&167==W.FeatureActionTypeID){const{UpdatePayTermsViewModel:Pt}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(5290),t.e(2076)]).then(t.bind(t,85290)),{UpdatepaytermsComponent:Ct}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,74121));let nn=new Pt(W.ScreenName);Object.assign(x,{component:Ct,params:{obj:nn}});break}if(501==W.FeatureID){const{SalesDashboardViewModel:Pt}=yield Promise.all([t.e(9924),t.e(2993),t.e(44),t.e(6411),t.e(7541),t.e(3495),t.e(9710),t.e(2076),t.e(3370)]).then(t.bind(t,73370)),{SalesDashboardComponent:Ct}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(4344)]).then(t.bind(t,54344));let nn=G.d.page.tabs.find(an=>an.instance instanceof Ct);if(nn)nn.active=!0;else{let an=new Pt;Object.assign(x,{component:Ct,params:{obj:an}})}}else if(500==W.FeatureID){const{GeneralDashboardViewModel:Pt}=yield t.e(2076).then(t.bind(t,58111)),{GeneralDashboardComponent:Ct}=yield Promise.all([t.e(9924),t.e(1940),t.e(8986),t.e(333),t.e(9710),t.e(2076),t.e(2910)]).then(t.bind(t,91260));let nn=G.d.page.tabs.find(an=>an.instance instanceof Ct);if(nn)nn.active=!0;else{let an=new Pt;Object.assign(x,{component:Ct,params:{obj:an}})}}else if(69!=W.FeatureID&&W.FeatureID>=4e4&&W.FeatureID<=5e4){if(1===G.d.SessionManager.DonotAllowDataEntry)return;if(le=W.DisplayName?W.DisplayName:W.ScreenName,38==W.ISDoctype||39==W.ISDoctype){const{PosScreenComponent:Pt}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(5344),t.e(9775),t.e(2076)]).then(t.bind(t,22156)),{POSDocumentViewModel:Ct}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,9181));let nn=G.d.document.GetPosRegisters(T);if(1==nn.Tables.length&&nn.Columns[0].Contains("IsMultiple")){p.POSRegister=new J.y$,p.POSRegister.TypeID=1,p.POSRegister.CCID=nn.Tables[0][0].CostCenterID;let di="";for(let Ai=0;Ai<nn.Tables[0].length;Ai++)di+=nn.Tables[0][Ai].NodeID.toString(),Ai<nn.Tables[0].length-1&&(di+=" , ");p.POSRegister.CustomWhere=di.length>0?" a.NodeID in ( "+di+") ":" 1<>1 ";const{POSRegisterComponent:Li}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,88200));if(yield G.d.page.openDialog(p.POSRegister,Li,{HideClose:!0,ShowCenter:!0,Title:G.d.GetResource("Select Register")}),null!=p.POSRegister.SelectedValue&&0!=p.POSRegister.SelectedValue){let Ai=new Ct(T,le,!1,null,p.POSRegister.SelectedValue);Object.assign(x,{component:Pt,params:{obj:Ai}})}return}let an=new Ct(T,le,!1);return void Object.assign(x,{component:Pt,params:{obj:an}})}if(T>4e4&&T<5e4){const{DocumentsListViewModel:Pt}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(3148)]).then(t.bind(t,767));if(0!=G.d.SessionManager.RoleType||G.d.page.QuickDocumentData?.LadingDocs.ContainsKey(T)){const{DocumentsListComponent:Ct}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(7760)]).then(t.bind(t,37760));let nn=G.d.page.tabs.find(an=>an.params?.obj instanceof Pt&&an.params?.obj.CostCenterID==T);if(nn)G.d.page.SetActiveTab(nn);else{let an=new Pt(T,le);Object.assign(x,{component:Ct,params:{obj:an}})}}else{const{AddEditDocumentComponent:Ct}=yield Promise.all([t.e(9924),t.e(6833),t.e(855),t.e(9710),t.e(2076),t.e(5543)]).then(t.bind(t,19214)),{AddEditDocumentViewModel:nn}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,32668));let an=new nn(T,le,!1);Object.assign(x,{component:Ct,params:{obj:an}})}return}}}}}}})()}static LoadDefaultTab(){return(0,m.A)(function*(){try{if(G.d.IsMobile){if(G.d.SessionManager.IsFmUser)if(1==G.d.SessionManager.FmUserType){const{TechnicianDashboardComponent:x}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,77760));G.d.page.addNewTab({title:"Techniciann",component:x})}else if(2==G.d.SessionManager.FmUserType){const{SupervisorDashboardComponent:x}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,8313));G.d.page.addNewTab({title:"Supervisorr",component:x})}else if(3!=G.d.SessionManager.FmUserType&&(4==G.d.SessionManager.FmUserType||6==G.d.SessionManager.FmUserType)){const{TenantDashboardComponent:x}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,81461));G.d.page.addNewTab({title:"Tenantt",component:x})}return}if(G.d.SessionManager.IsEmpUser&&1==G.d.SessionManager.RoleType){const{EssDashboardComponent:x}=yield Promise.all([t.e(2298),t.e(9183),t.e(2076)]).then(t.bind(t,9917));return void G.d.page.addNewTab({title:"My Profile",component:x})}let D=G.d.SessionManager.dsRibbon;if(null==D)return;if(D.Table4&&D.Table4.length>0){let x;return void D.Table4.forEach(p=>{let W=new A.aF,T={};W.FeatureActionID=parseInt(p.FeatureActionID.toString()),W.ScreenName=p.ScreenName,W.FeatureID=parseInt(p.FeatureID.toString()),W.FeatureActionTypeID=parseInt(p.FeatureActionTypeID.toString()),Y.J0.IsEmpty(p.DocumentType)||(W.ISDoctype=parseInt(p.DocumentType.toString())),B.OncmdLoadPage(W,T).then(R=>{if(!T.component)return;let le;if("FeatureActionID"==T.basedon?le=G.d.page.tabs.find(j=>j.instance instanceof T.component&&j.instance.FeatureActionID==W.FeatureActionID):"CostCenterID"==T.basedon?le=G.d.page.tabs.find(j=>j.instance instanceof T.component&&j.instance.CostCenterID==W.FeatureID):"Unique"==T.basedon&&(le=G.d.page.tabs.find(j=>j.instance instanceof T.component)),le)G.d.page.tabs.map(j=>j.active=!1),le.active=!0;else{T.title=W.ScreenName;let j=G.d.page.tabs.find(F=>F.title==T.title);j?G.d.page.SetActiveTab(j):G.d.page.addNewTab(T)}parseInt(p.IsDefault)&&(x=le)})})}if(D&&D.Table3.length>0){let x=new A.aF,p={};return x.FeatureActionID=parseInt(D.Table3[0].FeatureActionID.toString()),x.ScreenName=D.Table3[0].ScreenName,x.FeatureID=parseInt(D.Table3[0].FeatureID.toString()),void B.OncmdLoadPage(x,p).then(W=>{if(!p.component)return;let T;if("FeatureActionID"==p.basedon?T=G.d.page.tabs.find(R=>R.instance instanceof p.component&&R.instance.FeatureActionID==x.FeatureActionID):"CostCenterID"==p.basedon?T=G.d.page.tabs.find(R=>R.instance instanceof p.component&&R.instance.CostCenterID==x.FeatureID):"Unique"==p.basedon&&(T=G.d.page.tabs.find(R=>R.instance instanceof p.component)),T)G.d.page.tabs.map(R=>R.active=!1),T.active=!0;else{p.title=x.ScreenName;let R=G.d.page.tabs.find(le=>le.title==p.title);R?G.d.page.SetActiveTab(R):G.d.page.addNewTab(p)}})}if(G.d.IsMobile&&G.d.IsNativeMobile){let x=G.d.page.tabs.find(p=>"Home"==p.title);if(x)("Home"==x.title||"Modules"==x.title)&&(G.d.page.SubMenuItemFound=!1,G.d.page.searchList=[]),G.d.page.SetActiveTab(x);else{const{ModulesTabComponent:p}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,29228));G.d.page.addNewTab({title:"Home",component:p,params:{isHome:!0}})}}else{let x={};const{FavoritesViewModel:p}=yield Promise.all([t.e(9183),t.e(2076)]).then(t.bind(t,61564)),{FavoritesComponent:W}=yield t.e(5744).then(t.bind(t,43363));let T=new p;Object.assign(x,{component:W,params:{obj:T}}),x.title="Favourites",G.d.page.addNewTab(x)}}catch(D){Logger.ErrorLog("LoginViewModel:OnStartupScreens:: ",D)}})()}static OnTabItemClick(D){var x=this;return(0,m.A)(function*(){switch(D.toString()){case"ALLCompanies":case"NewCompany":case"EditCompany":case"AssignUsersToCompany":case"Logs":case"SwitchTemplate":case"SetGuid":case"GST":case"SignOut":case"Exit":case"Lang":case"About":break;case"UserSessions":const{LicenseTabViewModel:p}=yield Promise.all([t.e(9710),t.e(2076),t.e(7978)]).then(t.bind(t,65597));let W=new p;W.RefreshData();const{UserSessionsComponent:T}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(5588)]).then(t.bind(t,3207));G.d.page.ShowDialog(W,T);break;case"ChangeCompany":{const{LoginViewModel:F}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,20608)),{LoginScreenComponent:ne}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,51306));let v=yield new F(G.d.router);v.SetVisibilityFalse(),v.IsLoggedIn=!0,v.IsChangeCompany=!0,v.Default=!0,setTimeout(()=>{if(v.RememberMe){let L=G.d.admin.GetClientUserDetails(0,G.d.SessionManager.UserName);v.CompanyList=L.Tables[1],G.d.page.tabs.Clear(),G.d.page.ShowDialog(v,ne).subscribe(()=>{x.LoadDefaultTab()})}else G.d.page.Ribbon.ClearMenu(),G.d.page.tabs.Clear(),G.d.page.ShowDialog(new F(G.d.router),ne).subscribe(()=>{x.LoadDefaultTab()})},500)}break;case"ChangeLocation":const{LoginViewModel:R}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,20608)),{LoginScreenComponent:le}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,51306));let j=yield new R(G.d.router);j.UserName=G.d.SessionManager.UserName,j.Password=G.d.SessionManager.Password,j.SetVisibilityFalse(),j.Default=!0,j.IsEdit=!1,setTimeout(()=>{let F=G.d.admin.GetClientUserDetails(G.d.SessionManager.CompanyIndex,G.d.SessionManager.UserName);if(F.Tables.length>3){let ne=null;ne=F.Columns[3].Contains("RoleID")?F.Tables[3].filter(E=>0==E.IsGroup&&(0==E.RoleID||E.RoleID==G.d.SessionManager.RoleID)).ToTable(!0,["NodeID","Code","Name","IsGroup","lft"]):F.Tables[3];let v=G.d.report.GetDataTable("ChangeL","");if(G.d.SessionManager.LicenseSettings.ContainsKey("MaxLocations")){let L,E=Y.J0.IntTryParse(G.d.SessionManager.LicenseSettings.MaxLocations);if(E>0){if(null!=v&&v.length>0&&(L=Y.J0.IntTryParse(v[0].ML.toString()),L>E))return void alert("Un-Authorized License file. Maximum Locations Allowed "+E+" Only");for(let I=ne.length-1;I>=E;I--)(0,X.yG0)(ne[I].IsGroup.toString())||ne.RemoveAt(I)}}ne=ne.filter(E=>0==E.IsGroup),j.LocationList=ne,j.LocationList.SortBy([{name:"Name",desc:!1}]),j.IsLocation=!0,j.Default=!1,j.IsChangeCompany=!1,j.IsChangeLocation=!0,j.Title=G.d.GetResource("SelectLocation"),j.LoginText=G.d.GetResource("Select"),j.LoginCancel=G.d.GetResource("All"),j.CancelVisiblity=!1,j.AllVisiblity=!0,null==j.SelectedLocation&&j.LocationList.length>0&&(j.SelectedLocation=j.LocationList[0]),G.d.page.tabs.Clear(),G.d.page.HideDialog(x.PopUpGUID),G.d.page.ShowDialog(j,le).subscribe(()=>{x.LoadDefaultTab()})}},500)}})()}static Relogin(D){return(0,m.A)(function*(){G.d.SessionManager.UserID="0",G.d.SessionManager.LoginDimension=0,G.d.SessionManager.LoginDimID=0,G.d.SessionManager.IsFmUser=!1,G.d.SessionManager.FmUserType=0,G.d.SessionManager.FmUserInfo=void 0,G.d.ForwardProgress.KillSession(),G.d.page.WindowTitle="PACT RevenU",D.navigate(["/login"]),G.d.IsMobile||window.location.reload()})()}static Signout(D){return(0,m.A)(function*(){localStorage.setItem("AutoLogin","false"),G.d.SessionManager.UserID="0",G.d.SessionManager.LoginDimension=0,G.d.SessionManager.LoginDimID=0,G.d.SessionManager.IsFmUser=!1,G.d.SessionManager.FmUserType=0,G.d.SessionManager.FmUserInfo=void 0,G.d.ForwardProgress.KillSession(),G.d.SessionManager.MenuTabs.Clear(),G.d.page.WindowTitle="PACT RevenU";const{CostCenterPicker:x}=yield Promise.all([t.e(2993),t.e(5275),t.e(6716),t.e(9710),t.e(2076)]).then(t.bind(t,34335)),{IPrefetchFilter:p}=yield Promise.all([t.e(2993),t.e(5275),t.e(2076)]).then(t.bind(t,57656));yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(3148)]).then(t.bind(t,767)),x.dicDSBuffers.Clear(),x.DSAccountTypes=null,p.dtExDocs.Clear(),G.d.IsMobile||G.d.common.deleteAPIAttachmentFolderContents(),localStorage.removeItem("PactToken"),G.d.SessionManager.JwtToken="",D.navigate(["/login"]),G.d.IsMobile||window.location.reload()})()}static ShowQuickAdd(D,x,p,W,T,R=null){return(0,m.A)(function*(){let F,ne,v,E,j=!1;if(3==T){if(j=G.d.admin.GetQuickAddPref(D,!0),2==D){let L=0;if(G.d.SessionManager.Preferences.ContainsKey("IsControlAccounts")&&"TRUE"==G.d.SessionManager.Preferences.IsControlAccounts.toUpperCase()&&(L=1),j){const{QuickAccountComponent:I}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,65263)),{QuickAccoutViewModel:ie}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(5945),t.e(5054),t.e(32),t.e(2076)]).then(t.bind(t,57651));ne=I,F=new ie(0,0,0,!0,0,L)}else{const{AddEditAccountComponent:I}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(5054),t.e(2076),t.e(1175)]).then(t.bind(t,42673)),{AddEditAccountViewModel:ie}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,4637));E=I,v=new ie(p,0,0,"",!0,L)}}else if(3==D)if(j){const{QuickProductComponent:L}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,72016)),{QuickAddProductViewModel:I}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(5945),t.e(4840),t.e(9065),t.e(2076)]).then(t.bind(t,79065));ne=L,F=new I(0,0,"",0,!0)}else{const{AddProductComponent:L}=yield Promise.all([t.e(1940),t.e(1851),t.e(4840),t.e(8794)]).then(t.bind(t,24840)),{AddProductScreenViewModel:I}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,88662));E=L,v=new I(0,"",0,!0)}else if(D>5e4)if(j){const{QuickAddCostCenterComponent:L}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,77203)),{QuickAddCostCenterViewModel:I}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(5945),t.e(2454),t.e(3878),t.e(2076)]).then(t.bind(t,53878));ne=L,F=new I,F.QuickAddCostCenterViewModel(0,D,0,"",!0)}else{const{AddEditCostcenterComponent:L}=yield Promise.all([t.e(1940),t.e(1851),t.e(2454),t.e(3556)]).then(t.bind(t,40073)),{AddCostCenterViewModel:I}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,38256));E=L,v=new I(D),v.AddCostCenterViewModel_1(0,D,0,"",!0)}}else if(W&&G.d.SessionManager.IsActionAssigned(D,"Create")||!W&&G.d.SessionManager.IsActionAssigned(D,"Update")){let L=G.d.admin.GetQuickAddPref(D,!1);if(2==D){let I=0,ie=0,ce=null;if(0==p&&G.d.SessionManager.Preferences.ContainsKey("IsControlAccounts")&&"TRUE"==G.d.SessionManager.Preferences.IsControlAccounts.toUpperCase()){const{ControlaccountComponent:Ce}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(6214)]).then(t.bind(t,73833)),{ControlAccountDialog:he}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(5945),t.e(5054),t.e(32),t.e(2076)]).then(t.bind(t,57651));let se=Ce,z=new he;if(0==z.ControlType)G.d.page.ShowDialog(z,se,{Title:"Select",ShowCenter:!0}).subscribe((0,m.A)(function*(){if(0==z.ControlType)return 0;if(I=z.ControlType,2==I&&G.d.SessionManager.Preferences.ContainsKey("DebtorsControlGroup")&&G.d.SessionManager.Preferences.DebtorsControlGroup.length>0?(ce=G.d.SessionManager.Preferences.DebtorsControlGroup.toString().split(","),ie=null!=ce&&ce.length>1?parseInt(ce[0]):parseInt(G.d.SessionManager.Preferences.DebtorsControlGroup)):3==I&&G.d.SessionManager.Preferences.ContainsKey("CreditorsControlGroup")&&G.d.SessionManager.Preferences.CreditorsControlGroup.length>0&&(ce=G.d.SessionManager.Preferences.CreditorsControlGroup.toString().split(","),ie=null!=ce&&ce.length>1?parseInt(ce[0]):parseInt(G.d.SessionManager.Preferences.CreditorsControlGroup)),W&&L){const{QuickAccountComponent:N}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,65263)),{QuickAccoutViewModel:ee}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(5945),t.e(5054),t.e(32),t.e(2076)]).then(t.bind(t,57651));ne=N,F=new ee(0,0,ie,!1,0,I)}else{const{AddEditAccountComponent:N}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(5054),t.e(2076),t.e(1175)]).then(t.bind(t,42673)),{AddEditAccountViewModel:ee}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,4637));E=N,v=new ee(p,0,0,"",!1,I)}return F?G.d.page.ShowDialog(F,ne).subscribe(()=>{2==T&&R&&R.obj[R.callback](F.RetValue)}):v&&G.d.page.addNewTab({component:E,params:{obj:v}}),0}));else if(I=z.ControlType,2==I&&G.d.SessionManager.Preferences.ContainsKey("DebtorsControlGroup")&&G.d.SessionManager.Preferences.DebtorsControlGroup.length>0?(ce=G.d.SessionManager.Preferences.DebtorsControlGroup.toString().split(","),ie=null!=ce&&ce.length>1?parseInt(ce[0]):parseInt(G.d.SessionManager.Preferences.DebtorsControlGroup)):3==I&&G.d.SessionManager.Preferences.ContainsKey("CreditorsControlGroup")&&G.d.SessionManager.Preferences.CreditorsControlGroup.length>0&&(ce=G.d.SessionManager.Preferences.CreditorsControlGroup.toString().split(","),ie=null!=ce&&ce.length>1?parseInt(ce[0]):parseInt(G.d.SessionManager.Preferences.CreditorsControlGroup)),W&&L){const{QuickAccountComponent:N}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,65263)),{QuickAccoutViewModel:ee}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(5945),t.e(5054),t.e(32),t.e(2076)]).then(t.bind(t,57651));ne=N,F=new ee(0,0,ie,!1,0,I)}else{const{AddEditAccountComponent:N}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(5054),t.e(2076),t.e(1175)]).then(t.bind(t,42673)),{AddEditAccountViewModel:ee}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,4637));E=N,v=new ee(p,0,0,"",!1,I)}}else if(W&&L){const{QuickAccountComponent:Ce}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,65263)),{QuickAccoutViewModel:he}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(5945),t.e(5054),t.e(32),t.e(2076)]).then(t.bind(t,57651));ne=Ce,F=new he(0,0,0,!1,0,I)}else{const{AddEditAccountComponent:Ce}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(5054),t.e(2076),t.e(1175)]).then(t.bind(t,42673)),{AddEditAccountViewModel:he}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,4637));E=Ce,v=new he(p,0,0,"",!1,I)}}else if(3==D)if(W&&L){const{QuickProductComponent:I}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,72016)),{QuickAddProductViewModel:ie}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(5945),t.e(4840),t.e(9065),t.e(2076)]).then(t.bind(t,79065));ne=I,F=new ie(p,0,"",0,!1)}else{const{AddProductComponent:I}=yield Promise.all([t.e(1940),t.e(1851),t.e(4840),t.e(8794)]).then(t.bind(t,24840)),{AddProductScreenViewModel:ie}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,88662));E=I,v=new ie(p,"",0,!1)}else if(16==D){const{BatchNumberComponent:I}=yield t.e(3026).then(t.bind(t,70645)),{BatchNumberViewModel:ie}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,99199));let ce=new ie(null);ce.BatchNumberViewModel_1(!0),yield G.d.page.openDialog(ce,I,{ShowCenter:!0})}else if(76==D){const{RibbonExtPrd:I}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(6926),t.e(3468),t.e(2076)]).then(t.bind(t,21087));I.LoadDimension(D,p)}else if(44==D){if(W){const{QuickAddLookupsViewModel:I}=yield Promise.all([t.e(9710),t.e(2076),t.e(2546)]).then(t.bind(t,52546));let ie=new I;ie.QuickAddLookupsViewModel(x,p),G.d.page.ShowDialog(ie,oe.m,{ShowCenter:!0}).subscribe(ce=>{R.obj[R.callback](ie.NodeID)})}}else if(92==D){const{RibbonExtRental:I}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(9817)]).then(t.bind(t,12198));I.ShowQuickAdd_REN(D,p)}else if(93==D){const{RibbonExtRental:I}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(9817)]).then(t.bind(t,12198));I.ShowQuickAdd_REN(D,p)}else if(94==D){const{RibbonExtRental:I}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(9817)]).then(t.bind(t,12198));I.ShowQuickAdd_REN(D,p)}else if(95==D){const{RibbonExtRental:I}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(9817)]).then(t.bind(t,12198));I.ShowQuickAdd_REN(D,p)}else if(D>5e4)if(50051==D){const{RibbonExtPay:I}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(334),t.e(8565),t.e(2076)]).then(t.bind(t,48565));I.ShowQuickAdd_Payroll(D,p)}else if(W&&L){const{QuickAddCostCenterComponent:I}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,77203)),{QuickAddCostCenterViewModel:ie}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(5945),t.e(2454),t.e(3878),t.e(2076)]).then(t.bind(t,53878));ne=I,F=new ie,F.QuickAddCostCenterViewModel(p,D,0,"",!1)}else{const{AddEditCostcenterComponent:I}=yield Promise.all([t.e(1940),t.e(1851),t.e(2454),t.e(3556)]).then(t.bind(t,40073)),{AddCostCenterViewModel:ie}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,38256));E=I,v=new ie(D),v.AddCostCenterViewModel_1(p,D,0,"",!1)}}F?G.d.page.ShowDialog(F,ne).subscribe(()=>{2==T&&R&&R.obj[R.callback](F.RetValue)}):v&&G.d.page.addNewTab({component:E,params:{obj:v}})})()}static SearchListView(D){return(0,m.A)(function*(){if(D.GridViewID>0){const{ProductSearchCatalogViewModel:x}=yield Promise.all([t.e(9924),t.e(44),t.e(6395),t.e(9710),t.e(2076)]).then(t.bind(t,58776)),{ProductSearchCatalogComponent:p}=yield t.e(126).then(t.bind(t,47745));G.d.page.ShowDialog(new x(null,0,0,null,D),p)}})()}static LoadDocument(D){let x={};B.DocumentObj(x,parseInt(D.CostCenterID)).then(p=>{let W=x.params.obj;W.ScreenObject.DocPrefix.ComboBox.SelectedValue=Y.J0.IsEmpty(D.Prefix)?D.DocPrefix.toString():D.Prefix.toString(),W.ScreenObject.DocPrefix.TextBox.Text=Y.J0.IsEmpty(D.DocNoStr)?D.DocNumber.toString():D.DocNoStr.toString(),W.OnDocPrefixChanged("lostFocus"),W.ScreenObject.FillDocumentPrefix(!0),G.d.page.addNewTab(x)})}static LoadDocumentObj(D){return(0,m.A)(function*(){const{AddEditDocumentViewModel:x}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,32668));let p=new x(parseInt(D.CostCenterID),"",!0);return p.ScreenObject.DocPrefix.ComboBox.SelectedValue=Y.J0.IsEmpty(D.Prefix)?D.DocPrefix.toString():D.Prefix.toString(),p.ScreenObject.DocPrefix.TextBox.Text=Y.J0.IsEmpty(D.DocNoStr)?D.DocNumber.toString():D.DocNoStr.toString(),p.OnDocPrefixChanged("lostFocus"),p.ScreenObject.FillDocumentPrefix(!0),p})()}static LoadDocumentBid(D,x){let p={};B.DocumentObj(p,parseInt(D.CostCenterID)).then(W=>{let T=p.params.obj;T.ScreenObject.DocPrefix.ComboBox.SelectedValue=Y.J0.IsEmpty(D.Prefix)?D.DocPrefix.toString():D.Prefix.toString(),T.ScreenObject.DocPrefix.TextBox.Text=Y.J0.IsEmpty(D.DocNoStr)?D.DocNumber.toString():D.DocNoStr.toString(),T.OnDocPrefixChanged("lostFocus"),T.ScreenObject.FillDocumentPrefix(!0),T.parentRptRefresh=x,G.d.page.addNewTab(p)})}static LoadDocumentByDocID(D){let x=G.d.document.GetDocDetailsByDOcID(parseInt(D.DocID),parseInt(D.CostCenterID));null!=x&&x.Tables.length>0&&x.Tables[0].length>0&&!x.Columns[0].Contains("ErrorMessage")&&(x.Tables[0][0].CostCenterID=x.Tables[0][0].CCID,G.d.page.HideDialog(this.PopUpGUID),B.LoadDocument(x.Tables[0][0]))}static DocumentObj(D,x,p=""){return(0,m.A)(function*(){const{AddEditDocumentComponent:W}=yield Promise.all([t.e(9924),t.e(6833),t.e(855),t.e(9710),t.e(2076),t.e(5543)]).then(t.bind(t,19214)),{AddEditDocumentViewModel:T}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,32668));let R=new T(x,p,!0);Object.assign(D,{component:W,params:{obj:R}})})()}static LoadDocument_2(D,x,p="",W=null){let T={};B.DocumentObj(T,D).then(R=>{let j={value:new Date},F=T.params.obj;if(F.ScreenObject.DocID=x,F.DocFlowXMl=p,x>0)F.ScreenObject.DocID=x,F.ScreenObject.OnDocPrefixChanged("lostFocus",0,x,j,!0),F._Ddate=j.value,F.ScreenObject.FillDocumentPrefix(!0);else if("AddEditRenContractViewModel"==W.ClassName){let ne=W,v=null;if(F.ScreenObject._CCFields.forEach(E=>{if(E instanceof J.y$){let I=E;if(I.CCID==ne.PropertyCCID||I.CCID==ne.UnitCCID||I.CCID==ne.TenantCCID)null==v&&(ne.cntrct.UnitID=ne.Unit.SelectedValue,ne.cntrct.TenantID=ne.Tenant.SelectedValue,ne.cntrct.PropertyID=ne.Property.SelectedValue,v=G.d.rental.GetPostingDetails(ne.cntrct,0,95,0,0,0,ne.cntrct.PropertyID,ne.cntrct.UnitID,ne.cntrct.TenantID,ne.RentRecAc.SelectedValue,ne.RentRecAc.MultiIDS)),I.CCID==ne.UnitCCID&&null!=v&&v.Tables.length>0&&v.Tables[0].length>0&&!Y.J0.IsEmpty(v.Tables[0][0].UnitID)?I.SelectedValue=parseInt(v.Tables[0][0].UnitID.toString()):I.CCID==ne.PropertyCCID&&null!=v&&v.Tables.length>0&&v.Tables[0].length>0&&!Y.J0.IsEmpty(v.Tables[0][0].PropertyID)?I.SelectedValue=parseInt(v.Tables[0][0].PropertyID.toString()):I.CCID==ne.TenantCCID&&null!=v&&v.Tables.length>0&&v.Tables[0].length>0&&!Y.J0.IsEmpty(v.Tables[0][0].TenantID)&&(I.SelectedValue=parseInt(v.Tables[0][0].TenantID.toString()));else{var L=ne.ScreenObject.GetCustomCCField_1(I.CCID);null!=L&&L.SelectedValue>0&&(I.SelectedValue=L.SelectedValue)}}}),F.ScreenObject.FillListViews(!1),!Y.J0.IsEmpty(p)){let E=new Y.VB;if(E.LoadXml(p),null!=E.DocumentElement.attributes&&null!=E.DocumentElement.attributes.LinkCCID&&null!=E.DocumentElement.attributes.LinkDocID&&!Y.J0.IsEmpty(E.DocumentElement.attributes.LinkCCID.value)&&!Y.J0.IsEmpty(E.DocumentElement.attributes.LinkDocID.value)){if(null!=F.ScreenObject.Link&&null!=F.ScreenObject.Link.LinkCombo){let I=F.ScreenObject.Link.LinkCombo.Items.find(ie=>null!=ie.Parent&&ie.Parent==E.DocumentElement.attributes.LinkCCID.value);I&&(F.ScreenObject.Link.LinkCombo.SelectedValue=I.Value,F.OLinkSelectionChanged(null))}let L=F.ScreenObject.Link.DocumentList.Items.find(I=>I.Value==E.DocumentElement.attributes.LinkDocID.value);L&&(L.IsChecked=!0,F.OnLinkDocumentCheckedChanged(L))}}}G.d.page.addNewTab(T)})}static AutoPostDocs(D){return(0,m.A)(function*(){const{DashBoardNotifViewModel:x}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(8828),t.e(1759),t.e(2076)]).then(t.bind(t,4140));let p=new x(0);p.dt=D,p.AutoPost()})()}static OpenRecurDocument(D){return(0,m.A)(function*(){const{DashBoardNotifViewModel:x}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(8828),t.e(1759),t.e(2076)]).then(t.bind(t,4140));new x(0).LoadDocument(D,!1)})()}static LoadDocument_VoucherNo_Obj(D){var x=this;return(0,m.A)(function*(){let p=G.d.report.GetDocumentDetailsByVoucherNo(D);if(Y.J0.Int(p.obj)>0){let T;return T=p.Tables[0].length>0?p.Tables[0][0]:p.Tables[1][0],yield x.LoadDocumentObj(T)}return null})()}static LoadDocument_VoucherNo(D){let x=G.d.report.GetDocumentDetailsByVoucherNo(D);if(Y.J0.Int(x.obj)>0){let W;W=x.Tables[0].length>0?x.Tables[0][0]:x.Tables[1][0],this.LoadDocument(W)}}static LoadDocument_VoucherNoBidding(D,x){let p=G.d.report.GetDocumentDetailsByVoucherNo(D);if(Y.J0.Int(p.obj)>0){let T;T=p.Tables[0].length>0?p.Tables[0][0]:p.Tables[1][0],this.LoadDocumentBid(T,x)}}static GetDocumentObject(D,x,p,W=null){return Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,32668)).then(({AddEditDocumentViewModel:T})=>new T(D,x,p,W))}static OnDocPrefixChanged(D,x){let p={value:D._Ddate};D.ScreenObject.OnDocPrefixChanged("lostFocus",0,x,p,!1),D._Ddate=p.value}static ShowDocumentNumberViewModelRental(D){return(0,m.A)(function*(){const{DocumentNumberComponent:x}=yield t.e(7292).then(t.bind(t,14911)),{DocumentNumberViewModel:p}=yield Promise.all([t.e(9924),t.e(44),t.e(6762),t.e(2076)]).then(t.bind(t,34381));let W=new p(D,D.ScreenObject.Data.Tables[8],!0,null);W.DocumentNumberViewModel_1(D),G.d.page.ShowDialog(W,x,{HideClose:!0,ShowCenter:!0,Title:G.d.GetResource("DocumentNumberTitle")})})()}static PrintVoucher(D,x){var p=this;return(0,m.A)(function*(){let W=G.d.report.GetDataTable("DOC001",x);if(W.length>0&&0!=Y.J0.Int(W[0].DocID)){const{AddEditDocumentViewModel:T}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,32668));let R=new T(0,"EMPTY_LOAD");R.CostCenterID=Y.J0.Int(W[0].CostCenterID),R.IsInventoryVoucher=1==W[0].IsInv,R.ScreenObject.Preferences.push("AskForVoucherPrintFormat","False"),R.ScreenObject.Preferences.push("PreviewFromReport","1"),D.DisplayMessage="Preview Loading..",R.PrintVoucher(!0,W[0].DocID.ToString(),!1,"",-1,null,!1,"",!1,p)}else alert("Document not found.")})()}static PrintMaster(D,x,p,W,T,R=!0,le=""){return(0,m.A)(function*(){let j=null;const{VoucherExportExcel:F}=yield t.e(9560).then(t.bind(t,17179)),{VPTDialogViewModel:ne}=yield t.e(5063).then(t.bind(t,57444)),{VPTDialogComponent:v}=yield t.e(4904).then(t.bind(t,22523));let I,E=null,L=!1;if("Export"==x&&(L=!0),E=F.GetLocationPrintLayouts(p,T,W),(null==E||0==E.Tables.length||0==E.Tables[0].length)&&(D.DisplayMessage=G.d.GetResource("Err_PrintLayoutNotDefined")),E.Tables[0].length>1&&R){let ie;I=new Promise((Ce,he)=>{ie=Ce});let ce=new ne(E.Tables[0],L,!1);ce.IsExcelVisible=!1,ce.IsPDFChecked=!0,G.d.page.ShowDialog(ce,v,{ShowCenter:!0,NoWidth:!0}).subscribe(()=>{ce.IsOkClicked&&(j=ce.SelectedRow,ie("hi"))})}else I=new Promise((ie,ce)=>{j=E.Tables[0][0],ie("hi")});I.then(()=>{if(null!=j){let he="PDF";D.DisplayMessage="Preview"==x?"Preview Loading...":"Export"==x?"Exporting please wait...":"Preview please wait...",G.d.report.ExportPDF_Masters(p,W.toString(),parseInt(j.DocPrintLayoutID),he,le).subscribe(se=>{console.log(se),"Export"==x?G.d.SessionManager.Download(se.FileName,"abcd"):("Print"==x||"Preview"==x||"SaveAndPrint"==x)&&setTimeout(()=>{G.d.SessionManager.printTab(se.FileName)},500),Y.J0.IsEmpty(se.Message)&&!Y.J0.IsEmpty(se.FileName)&&(D.DisplayMessage="Exported Successfully")},se=>{console.log(se)})}})})()}static GetposDayclose(D){return this.DayCloseReport(D)}static AddRow_1(D,x,p,W,T,R,le){let j={},F=D.filter(ne=>ne.RegID==T&&ne.Name==x);return F.length>0&&""!=x?(j=F[0],j[le.ToString("ddMMMyyyy")]=p):(j={},j.RegID=T,j.RegName=R,j[le.ToString("ddMMMyyyy")]=p,j.Name=x,W&&(j.StyleIsBold="1"),j.Value=p,D.push(j)),j}static DayCloseReport(D){let x=[],p=[],W=D.GetDimensionFilter("dcCCNID");W+=" and docdate between CONVERT(FLOAT,CONVERT(DATETIME,'"+D.oReportDialog.FromDate.Date.ToString("dd MMM yyyy")+"'))",W+="and  CONVERT(FLOAT,CONVERT(DATETIME,'"+D.oReportDialog.ToDate.Date.ToString("dd MMM yyyy")+"'))";let T=G.d.document.GetPOSDetails(0,new Date,1,0,0,W);var R=D.oReportDialog.CostCenterFilters.find(j=>j.CostCenterID==G.d.SessionManager.RegisterCCID);return p.push("RegID"),p.push("RegName"),p.push("Name"),p.push("StyleIsBold"),p.push("Value"),null!=R&&null!=R.SelectedNodes&&R.SelectedNodes.forEach(j=>{if(!j.IsGroup){let F=D.oReportDialog.FromDate.Date;for(;F<=D.oReportDialog.ToDate.Date;){p.Contains(F.ToString("ddMMMyyyy"))||p.push(F.ToString("ddMMMyyyy"));let v,ne=T.Tables[1].filter(E=>E.Reg==j.Id&&new Date(E.DocDate).toDateString()==new Date(F).toDateString());if(ne.length>0)for(let E=0;E<ne.length;E++)this.AddRow_1(x,Y.J0.String(ne[E].DocumentName)+"-Starting No",ne[E].Prefix.toString()+ne[E].MinNumber.toString(),!1,j.Id,j.Text[0],F),this.AddRow_1(x,Y.J0.String(ne[E].DocumentName)+"-Ending No",ne[E].Prefix.toString()+ne[E].MAXNumber.toString(),!1,j.Id,j.Text[0],F);else{ne=T.Tables[1].filter(E=>E.Reg==j.Id);for(let E=0;E<ne.length;E++)this.AddRow_1(x,Y.J0.String(ne[E].DocumentName)+"-Starting No","",!1,j.Id,j.Text[0],F),this.AddRow_1(x,Y.J0.String(ne[E].DocumentName)+"-Ending No","",!1,j.Id,j.Text[0],F)}this.AddRow_1(x,"","",!1,j.Id,j.Text[0],F),ne=T.Tables[0].filter(E=>E.Reg==j.Id&&new Date(E.DocDate).toDateString()==new Date(F).toDateString());for(let E=0;E<T.Tables[10].length;E++)if("3"==Y.J0.String(T.Tables[10][E].SectionID))v=this.AddRow_1(x,T.Tables[10][E].resourcedata.toString(),ne.length>0?ne[0][T.Columns[0][E]].toString():"0",!1,j.Id,j.Text[0],F);else{this.AddRow_1(x,T.Tables[10][E].resourcedata.toString(),"",!0,j.Id,j.Text[0],F);let ie,L="  "+T.Tables[10][E].resourcedata.toString(),I=0;if("5"==T.Tables[10][E].SectionID.toString()){if(T.Tables.length>2&&T.Tables[2].length>0&&T.Columns[2].Contains("Amount"))if(ne=T.Tables[2].filter(ce=>ce.Reg==j.Id&&new Date(ce.DocDate).toDateString()==new Date(F).toDateString()),ne.length>0)for(let ce=0;ce<ne.length;ce++)v="300"==ne[ce].RefCCID.toString()?this.AddRow_1(x,"  Opening "+L,ne[ce].Amount.toString(),!1,j.Id,j.Text[0],F):this.AddRow_1(x,L+" IN",ne[ce].Amount.toString(),!1,j.Id,j.Text[0],F),""!=T.Tables[2][ce].Amount.toString()&&"300"==T.Tables[2][ce].RefCCID.toString()&&(I+=parseFloat(ne[ce].Amount.toString()));else{ne=T.Tables[2].filter(ce=>ce.Reg==j.Id);for(let ce=0;ce<ne.length;ce++)v="300"==ne[ce].RefCCID.toString()?this.AddRow_1(x,"  Opening "+L,"0",!1,j.Id,j.Text[0],F):this.AddRow_1(x,L+" IN","0",!1,j.Id,j.Text[0],F)}T.Tables.length>3&&T.Tables[3].length>0&&T.Columns[3].Contains("Amount")&&""!=T.Tables[3][0].Amount.toString()&&(ne=T.Tables[3].filter(ce=>ce.Reg=j.Id&&new Date(ce.DocDate).toDateString()==new Date(F).toDateString()),ne.length>0?(v=this.AddRow_1(x,L+" OUT",ne[0].Amount.toString(),!1,j.Id,j.Text[0],F),""!=ne[0].Amount.toString()&&(I-=parseFloat(ne[0].Amount.toString()))):(ne=T.Tables[3].filter(ce=>ce.Reg==j.Id),ne.length>0&&(v=this.AddRow_1(x,L+" OUT","0",!1,j.Id,j.Text[0],F)))),ne=T.Tables[0].filter(ce=>ce.Reg==j.Id&&new Date(ce.DocDate).toDateString()==new Date(F).toDateString()),ie=0,ne.length>0&&""!=ne[0][T.Columns[0][E]].toString()&&(ie+=parseFloat(ne[0][T.Columns[0][E]].toString())),ne=T.Tables[5].filter(ce=>ce.Reg==j.Id&&new Date(ce.DocDate).toDateString()==new Date(F).toDateString()),ne.length>0&&""!=ne[0][T.Columns[5][0]].toString()&&(ie-=parseFloat(ne[0][T.Columns[5][0]].toString())),I+=ie,v=this.AddRow_1(x,L+" Sales",ie.toString(),!1,j.Id,j.Text[0],F)}else ne=T.Tables[0].filter(ce=>ce.Reg==j.Id&&new Date(ce.DocDate).toDateString()==new Date(F).toDateString()),ne.length>0?(v=this.AddRow_1(x,L,ne[0][T.Columns[0][E]].toString(),!1,j.Id,j.Text[0],F),""!=ne[0][T.Columns[0][E]].toString()&&(I+=parseFloat(ne[0][T.Columns[0][E]].toString()))):v=this.AddRow_1(x,L,"0",!1,j.Id,j.Text[0],F);T.Tables.length>7&&T.Tables[7].length>0&&(ne=T.Tables[7].filter(ce=>ce.Reg==j.Id&&new Date(ce.DocDate).toDateString()==new Date(F).toDateString()),ne.length>0&&""!=ne[0][T.Columns[7][E]].toString()?(v=this.AddRow_1(x,L+" Reciept",ne[0][T.Columns[7][E]].toString(),!1,j.Id,j.Text[0],F),I+=parseFloat(ne[0][T.Columns[7][E]].toString())):(ne=T.Tables[7].filter(ce=>ce.Reg==j.Id),ne.length>0&&(v=this.AddRow_1(x,L+" Reciept","0",!1,j.Id,j.Text[0],F)))),T.Tables.length>8&&T.Tables[8].length>0&&(ne=T.Tables[8].filter(ce=>ce.Reg==j.Id&&new Date(ce.DocDate).toDateString()==new Date(F).toDateString()),ne.length>0&&""!=ne[0][T.Columns[8][E]].toString()?(v=this.AddRow_1(x,L+" Orders",ne[0][T.Columns[8][E]].toString(),!1,j.Id,j.Text[0],F),I+=parseFloat(ne[0][T.Columns[8][E]].toString())):(ne=T.Tables[8].filter(ce=>ce.Reg==j.Id),ne.length>0&&(v=this.AddRow_1(x,L+" Orders","0",!1,j.Id,j.Text[0],F)))),T.Tables.length>9&&T.Tables[9].length>0&&(ne=T.Tables[9].filter(ce=>ce.Reg==j.Id&&new Date(ce.DocDate).toDateString()==new Date(F).toDateString()),ne.length>0&&""!=ne[0][T.Columns[9][E]].toString()?(v=this.AddRow_1(x,L+" Gift Voucher",ne[0][T.Columns[9][E]].toString(),!1,j.Id,j.Text[0],F),I+=parseFloat(ne[0][T.Columns[9][E]].toString())):(ne=T.Tables[9].filter(ce=>ce.Reg==j.Id),ne.length>0&&(v=this.AddRow_1(x,L+" Gift Voucher","0",!1,j.Id,j.Text[0],F)))),ne=T.Tables[4].filter(ce=>ce.Reg==j.Id&&new Date(ce.DocDate).toDateString()==new Date(F).toDateString()),ne.length>0&&""!=ne[0][T.Columns[4][E]].toString()?"5"==T.Tables[10][E].SectionID.toString()?(ie=0,ie+=parseFloat(ne[0][T.Columns[4][E]].toString()),T.Columns[6].Contains("Reg")&&(ne=T.Tables[6].filter(ce=>ce.Reg==j.Id&&new Date(ce.DocDate).toDateString()==new Date(F).toDateString()),ne.length>0&&""!=ne[0][T.Columns[6][0]].toString()&&(ie-=parseFloat(ne[0][T.Columns[6][0]].toString()))),I-=ie,v=this.AddRow_1(x,L+" Sales Return",ie.toString(),!1,j.Id,j.Text[0],F)):(v=this.AddRow_1(x,L+" Sales Return",ne[0][T.Columns[4][E]].toString(),!1,j.Id,j.Text[0],F),I-=parseFloat(ne[0][T.Columns[4][E]].toString())):(ne=T.Tables[4].filter(ce=>ce.Reg==j.Id),ne.length>0&&(v=this.AddRow_1(x,L+" Sales Return","0",!1,j.Id,j.Text[0],F)))}F=F.AddDays(1)}}}),x}static LoadScreenFromActivity(D){var x=this;return(0,m.A)(function*(){const{AddDContactViewModel:p}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,37425)),{RibbonExtCrm:W}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(1727),t.e(2460),t.e(7257),t.e(2076)]).then(t.bind(t,89638)),{AddEditDocumentViewModel:T}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,32668)),{AddEditDocumentComponent:R}=yield Promise.all([t.e(9924),t.e(6833),t.e(855),t.e(9710),t.e(2076),t.e(5543)]).then(t.bind(t,19214)),{AddEditLeadComponent:le}=yield Promise.all([t.e(1851),t.e(2460),t.e(255)]).then(t.bind(t,95317)),{AddEditOpportunityComponent:j}=yield Promise.all([t.e(1851),t.e(1971)]).then(t.bind(t,62554)),{AddEditCaseComponent:F}=yield t.e(4423).then(t.bind(t,86804)),{AddEditCampaignComponent:ne}=yield t.e(4047).then(t.bind(t,96428)),{AddCustomerComponent:v}=yield Promise.all([t.e(1851),t.e(1783)]).then(t.bind(t,49110)),{AddEditRentalContractComponent:E}=yield t.e(220).then(t.bind(t,87839)),{AddContactsComponent:L}=yield t.e(8379).then(t.bind(t,50760));G.d.page.HideDialog(x.PopUpGUID);let I=null;if(86==D.FeatureID||89==D.FeatureID||73==D.FeatureID||88==D.FeatureID||83==D.FeatureID?I=W.GetCRMActivityScreen(D):65==D.FeatureID?I=new p(D.DBColumnID,!1,0):95==D.FeatureID&&(I=x.GetAddEditRenContractViewModel(95,D.DBColumnID,!1,0,0)),D.FeatureID>=4e4&&D.FeatureID<5e4){let ie;if(ie=new T(parseInt(D.FeatureID),D.DBColumnName,!0),ie=Y.J0.IsEmpty(D.ScreenName)?new T(parseInt(D.FeatureID),"",!0):new T(parseInt(D.FeatureID),D.DBColumnName,!0),G.d.page.addNewTab({component:R,params:{obj:ie}}),Y.J0.IsEmpty(D.ScreenName)){ie.ScreenObject.DocID=D.DBColumnID;let ce=ie.ScreenObject.GetEditDataByDOCID();null!=ce&&ie.ScreenObject.IsDocEdit&&ce.Tables.length>0&&ce.Tables[0].length>0&&ie.ScreenObject.LoadEditData(ce,!1)}else ie.ScreenObject.DocPrefix.ComboBox.SelectedValue=D.GroupName,ie.ScreenObject.DocPrefix.TextBox.Text=D.ScreenName,ie.OnDocPrefixChanged("lostFocus");ie.ScreenObject.FillDocumentPrefix(!0)}else 86==D.FeatureID?G.d.page.addNewTab({component:le,params:{obj:I}}):89==D.FeatureID?G.d.page.addNewTab({component:j,params:{obj:I}}):73==D.FeatureID?G.d.page.addNewTab({component:F,params:{obj:I}}):88==D.FeatureID?G.d.page.addNewTab({component:ne,params:{obj:I}}):83==D.FeatureID?G.d.page.addNewTab({component:v,params:{obj:I}}):65==D.FeatureID?G.d.page.addNewTab({component:L,params:{obj:I}}):95==D.FeatureID&&G.d.page.addNewTab({component:E,params:{obj:I}})})()}static GetContactParentID(D){let x=-1;return"AddEditAccountScreenViewModel"==D.ClassName?x=D.AccountID:"AddCustomerViewModel"==D.ClassName?x=D.CustomerID:"AddCostCenterViewModel"==D.ClassName?x=D.NodeID:null!=D&&"AddEditMachineViewModel"==D.ClassName?x=D.ResID:"AddEditBatchViewModel"==D.ClassName?x=D.BatchID:"AddEditCustomerViewModel"==D.ClassName?x=D.CustomerID:"AddEditLeads"==D.ClassName?x=D.LeadID:"AddEditOpportunity"==D.ClassName?x=D.OppID:"AddEditEmpMasterViewModel"==D.ClassName&&(x=D.NodeID),x}static GetContactIsPopup(D){let x=!1,p=null;return"AddEditAccountViewModel"==D.ClassName||"AddCostCenterViewModel"==D.ClassName||"AddCustomerViewModel"==D.ClassName?p=D.ScreenObject.Data.Tables[5].filter(W=>"ContactAsPopup"==W.Name):"AddEditCustomerViewModel"==D.ClassName?p=D.ScreenObject.Data.Tables[6].filter(W=>"ContactAsPopup"==W.Name):"AddEditLeads"==D.ClassName||"AddEditOpportunity"==D.ClassName?p=D.ScreenObject.Data.Tables[4].filter(W=>"ContactAsPopup"==W.Name):"AddEditEmpMasterViewModel"==D.ClassName&&(p=D.ScreenObject.Data.Tables[5].filter(W=>"ContactAsPopup"==W.Name)),null!=p&&p.length>0&&(x=""!=p[0].Value.toString()&&"True"==p[0].Value.toString()),x}static ShowAddProductScreenViewModel(D,x,p,W){return(0,m.A)(function*(){const{AddProductComponent:T}=yield Promise.all([t.e(1940),t.e(1851),t.e(4840),t.e(8794)]).then(t.bind(t,24840)),{AddProductScreenViewModel:R}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,88662));G.d.page.addNewTab({component:T,params:{obj:new R(D,x,p,W)}})})()}static GetAddEditRenContractViewModel(D,x,p,W,T){return(0,m.A)(function*(){const{AddEditRenContractViewModel:R}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,91100));let le=new R;return le.AddEditRenContractViewModel_1(D,x,p,W,T),le})()}static LoadDraftRentalContract(D,x){return(0,m.A)(function*(){const{AddEditRentalContractComponent:p}=yield t.e(220).then(t.bind(t,87839)),{AddEditRenContractViewModel:W}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,91100));let T=D,R=new W;R.ContractID=0,R.AddEditRenContractViewModel_1(T.CostCenterID,0,!1,0,0,"");let le=G.d.rental.GetQuotationDetails(x);null!=le&&le.Tables.Count>0&&le.Tables[0].Rows.Count>0&&(le.Tables[0].Rows[0].ContractID=null),R.LoadEditData(le);let F,j=G.d.rental.GetNextContractNo(T.CostCenterID,0);R.SlNO.Text=j.toString(),R.draftid=x,R.DraftVisible(!0),R.ContractID=0,R.RefershTitle(),F={obj:R},G.d.page.addNewTab({title:"Add Tenancy",component:p,params:F})})()}static#s=this.DefProdID=0;static#o=this.sCrAccount="0";static#r=this.sDrAccount="0";static GetPay_BioPostData(D){var x=this;return(0,m.A)(function*(){if(D.dgv.Table.length>0){if(!D.IsAutoPost&&!confirm("Are you sure want to post.?"))return;let R=(new Date).OnlyDate();D.sbPostErrLog="";let ne,v,E,L,le="",j="",F="",I=null,ie=D.dgv.Table.ToTable(!0,["EmpCode"]);for(let N=0;N<ie.length;N++)F.length>0&&(F+=","),v=D.dsbEmps.Tables[0].filter(ee=>ee.Code==ie[N].EmpCode.toString()),F+=v[0].NodeID.toString();D.DispMessage="Posting data, Please wait....",D.MsgVisibility=!0;let ce=null;(40067==parseInt(D.DPCDocumentName.SelectedValue)||40087==parseInt(D.DPCDocumentName.SelectedValue))&&(ce=G.d.empService.GetQueryData(0,"BIO005",F,D.FromDate.Date.ToString("dd MMM yyy"),D.ToDate.Date.ToString("dd MMM yyy")));let Ce=[],he=null,se=!1,z=!1;if(1==D.bOverrideAttendanceDoc&&(Ce=G.d.empService.GetQueryData(0,"BIO006",F,D.FromDate.Date.ToString("dd MMM yyy"),D.ToDate.Date.ToString("dd MMM yyy"))),G.d.SessionManager.Preferences.ContainsKey("PostBiometricDataGroupBy")&&""!=G.d.SessionManager.Preferences.PostBiometricDataGroupBy.toString()){let N=G.d.SessionManager.Preferences.PostBiometricDataGroupBy.toString().split(","),ee=D.bAutoPostAtaTime;if(40089==parseInt(D.DPCDocumentName.SelectedValue)&&ee&&(G.d.SessionManager.Preferences.ContainsKey("PostDocAutoWhilePostBiometricData")&&""!=G.d.SessionManager.Preferences.PostDocAutoWhilePostBiometricData&&(0,X.yG0)(G.d.SessionManager.Preferences.PostDocAutoWhilePostBiometricData)||D.IsAutoPost)){const{ControlGenerator:Z}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,57316));let Me,fe="",U="",Ee=(new Z).GetScreenInfo(40089);Me=Ee.Tables[0].filter(je=>"CreditAccount"==je.SysColumnName),null!=Me&&Me.length>0&&null!=Me[0].UserDefaultValue&&""!=Me[0].UserDefaultValue.toString().Trim()&&(x.sCrAccount=Me[0].UserDefaultValue.toString()),Me=Ee.Tables[0].Select("SysColumnName='DebitAccount'"),null!=Me&&Me.length>0&&null!=Me[0].UserDefaultValue&&""!=Me[0].UserDefaultValue.toString().Trim()&&(x.sDrAccount=Me[0].UserDefaultValue.toString()),Me=Ee.Tables[0].Select("SysColumnName='ProductID'"),null!=Me&&Me.length>0&&null!=Me[0].UserDefaultValue&&""!=Me[0].UserDefaultValue.toString().Trim()&&(x.DefProdID=parseInt(Me[0].UserDefaultValue));let Re,st=D.GetGroupByFilterEmployees();if(null!=st&&st.length>0){let je="";if(null!=N&&N.length>0){for(let ot=0;ot<N.length;ot++)null!=N[ot]&&""!=N[ot].toString().Trim()&&(je.length>0&&(je+=","),"-1"==N[ot]?je+="RptManager,RptManager_Name":"-2"==N[ot]?je+="EmpSeqNo,Emp_Name":"-3"==N[ot]?(je+="DateWise",z=!0):je+="CCNID"+(parseInt(N[ot])-5e4)+",CCNID"+(parseInt(N[ot])-5e4)+"_Name");if(z&&(st.Columns.push("DateWise"),st.forEach(ot=>{ot.DateWise=1})),je.length>0){let ot=[],Pe=st;if(z){let Ke,xe;for(Ke=D.FromDate.Date;Ke<=D.ToDate.Date;)xe={},xe.TDates=Ke.Date().ToString("dd MMM yyyy"),ot.push(xe),Ke=Ke.AddDays(1)}else ot=Pe.ToTable(!0,je.split(","));let we=ot,w=st,Le=null;if(null!=ot&&ot.length>0){D.dgv.TableColumns.Contains("Flag")&&D.dgv.TableColumns.Remove("Flag"),D.dgv.TableColumns.push("Flag"),D.dgv.TableColumns.Flag.DefaultValue="0";let Ke="",xe="";for(let ke=0;ke<ot.length;ke++){Re=new k.NP,Ke="",xe="",we=ot,w=st;for(let Ve=0;Ve<Object.keys(ot[0]).length;Ve++){let _e=Object.keys(ot[0])[Ve];_e.endsWith("_Name")?(xe.length>0&&(xe+=" AND "),xe+=_e+" = '"+ot[ke][_e].toString()+"' "):_e.Contains("TDates")?(Ke.length>0&&(Ke+=" AND "),Ke+="TDates='"+ot[ke].TDates+"'",we=we.filter(Te=>Te.TDates==ot[ke].TDates),w=w.filter(Te=>Te.TDates==ot[ke].TDates)):(Ke.length>0&&(Ke+=" AND "),Ke+=_e+"="+ot[ke][_e].toString(),we=we.filter(Te=>Te[_e]==ot[ke][_e].toString()),w=w.filter(Te=>Te[_e]==ot[ke][_e].toString()))}if(Ke.length>0){if(le="",Le=null,Le=z?we:w,null!=Le&&Le.length>0)for(let _e=0;_e<D.dgv.Table.length;_e++){let Te=D.dgv.Table[_e].EmpCode.toString().Trim(),Oe=new Date(D.dgv.Table[_e].PunchDate).ToString("dd MMM yyyy"),Xe=!1;if(z?Oe.toString()==Le[0].TDates.toString()&&(Xe=!0):Le.filter(Ue=>Ue.EmpCode==Te).length>0&&(Xe=!0),"1"!=Y.J0.String(D.dgv.Table[_e].Flag)&&Xe)if(D.dgv.Table[_e].Flag="1",v=D.dsbEmps.Tables[0].filter(Ue=>Ue.Code==Te),se=!1,null!=v&&v.length>0){let Ue,it;if(1==D.bOverrideAttendanceDoc&&40089==parseInt(D.DPCDocumentName.SelectedValue)&&(he=Ce.filter(Tt=>Tt.dcCCNID51==v[0].NodeID&&new Date(Tt.dcAlpha39).ToString("dd MMM yyy")==new Date(D.dgv.Table[_e].PunchDate).ToString("dd MMM yyy")),null!=he&&he.length>0&&(se=!0)),1==se&&(Re.ADocID=parseInt(he[0].DocID)),Re.EmpNode=parseInt(v[0].NodeID),D.bUseROffTimings?(Ue="ROffStartTime",it="ROffEndTime"):(Ue="ActStartTime",it="ActEndTime"),40089==parseInt(D.DPCDocumentName.SelectedValue)){if(1==se&&40089==parseInt(D.DPCDocumentName.SelectedValue))if(null!=he[0].cdcAlpha1&&null!=he[0].cdcAlpha1&&""!=he[0].cdcAlpha1.toString()){let Tt,bt;Tt=new Date(he[0].cdcAlpha1).AddHours(Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][it]).getHours()).AddMinutes(Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][it]).getMinutes()),bt=new Date(he[0].cdcAlpha1).AddHours(new Date(he[0].cdcAlpha2).getHours()).AddMinutes(new Date(he[0].cdcAlpha2).getMinutes()),((null==he[0].cdcAlpha3||null==he[0].cdcAlpha3||""==he[0].cdcAlpha3.toString())&&Tt!=bt||null!=he[0].cdcAlpha4&&null!=he[0].cdcAlpha4&&""!=he[0].cdcAlpha4.toString()&&Tt>new Date(he[0].cdcAlpha4))&&(Re.CheckoutDate=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][Ue])>Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][it])?new Date(D.dgv.Table[_e].PunchDate).AddDays(1).ToString("dd MMM yyyy"):new Date(D.dgv.Table[_e].PunchDate).ToString("dd MMM yyyy"),Re.CheckoutTime=new Date(new Date(Re.CheckoutDate).getFullYear(),new Date(Re.CheckoutDate).iMonth(),new Date(Re.CheckoutDate).getDate(),Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][it]).getHours(),Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][it]).getMinutes(),Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][it]).getSeconds()).ToString("dd MMM yyyy HH:mm"),Re.CheckinDate=new Date(he[0].cdcAlpha1).ToString("dd MMM yyyy"),Re.CheckinTime=new Date(he[0].cdcAlpha2).ToString("dd MMM yyyy HH:mm"))}else null!=he[0].cdcAlpha3&&null!=he[0].cdcAlpha3&&""!=he[0].cdcAlpha3.toString()&&(null==he[0].cdcAlpha1||null==he[0].cdcAlpha1||""==he[0].cdcAlpha1.toString())&&(Re.CheckinDate=new Date(D.dgv.Table[_e].PunchDate).ToString("dd MMM yyyy"),Re.CheckinTime=new Date(new Date(Re.CheckinDate).getFullYear(),new Date(Re.CheckinDate).iMonth(),new Date(Re.CheckinDate).getDate(),Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][Ue]).getHours(),Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][Ue]).getMinutes(),Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][Ue]).getSeconds()).ToString("dd MMM yyyy HH:mm"));else Re.CheckinDate=new Date(D.dgv.Table[_e].PunchDate).ToString("dd MMM yyyy"),40089==parseInt(D.DPCDocumentName.SelectedValue)&&(Re.DailyPayrollDate=new Date(D.dgv.Table[_e].PunchDate).ToString("dd MMM yyyy")),E=D.dsbEmps.Tables[1].filter(Tt=>Tt.Code==D.dgv.Table[_e].ShiftCode),null!=E&&E.length>0&&(Re.ShiftNode=parseInt(E[0].NodeID)),Re.CheckinTime=new Date(new Date(Re.CheckinDate).getFullYear(),new Date(Re.CheckinDate).iMonth(),new Date(Re.CheckinDate).getDate(),Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][Ue]).getHours(),Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][Ue]).getMinutes(),Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][Ue]).getSeconds()).ToString("dd MMM yyyy HH:mm"),D.bOverrideAttendanceDoc&&40089==parseInt(D.DPCDocumentName.SelectedValue)&&Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][Ue])==Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][it])||(Re.CheckoutDate=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][Ue])>Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][it])?new Date(D.dgv.Table[_e].PunchDate).AddDays(1).ToString("dd MMM yyyy"):new Date(D.dgv.Table[_e].PunchDate).ToString("dd MMM yyyy"),Re.CheckoutTime=new Date(new Date(Re.CheckoutDate).getFullYear(),new Date(Re.CheckoutDate).iMonth(),new Date(Re.CheckoutDate).getDate(),Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][it]).getHours(),Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][it]).getMinutes(),Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[_e][it]).getSeconds()).ToString("dd MMM yyyy HH:mm"));Re.TotalTime=null!=Re.CheckinDate&&null!=Re.CheckinTime&&null!=Re.CheckoutDate&&null!=Re.CheckoutTime?B.CalculateTotalTime(new Date(Re.CheckinTime),new Date(Re.CheckinTime),new Date(Re.CheckoutTime),new Date(Re.CheckoutTime)):""}}else D.dgv.Table[_e].Remarks="Employee Code - '"+Te+"' not found in RevenU / Relieved "}se?Re.ADocID>0&&null!=Re.CheckoutDate&&null!=Re.CheckoutTime&&(U+="\r\n",U+=" UPDATE T SET T.dcAlpha3='"+Re.CheckoutDate+"',T.dcAlpha4='"+Re.CheckoutTime+"',T.dcAlpha5='"+Re.TotalTime+"' FROM INV_DocDetails I WITH(NOLOCK)",U+="JOIN COM_DocTextData T WITH(NOLOCK) ON T.InvDocDetailsID=I.InvDocDetailsID\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tWHERE I.CostCenterID=40089 AND I.DOCID="+Re.ADocID):Re.EmpNode>1&&(fe+="<ROWS>",fe+="<DocumentXML>",fe+=B.GetAttXML(Re),fe+="</DocumentXML>",fe+="</ROWS>")}}}}}}if(fe.length>0||U.length>0){fe.length>0&&(fe.Insert(0,"<ATT>"),fe+="</ATT>");let je=[];je.push(fe.toString()),je.push(U.toString()),je.push(G.d.SessionManager.GetSysInfo()),je.push("Web"),je.push(G.d.SessionManager.UserID),je.push(G.d.SessionManager.LanguageID),G.d.empService.GetData(je,"spPAY_PostAttendanceBiometric")}D.MsgVisibility=!1}else{let Z=D.GetGroupByFilterEmployees();if(null!=Z&&Z.length>0){let fe="";if(null!=N&&N.length>0){for(let Ee=0;Ee<N.length;Ee++)null!=N[Ee]&&""!=N[Ee].toString().Trim()&&(fe.length>0&&(fe+=","),"-1"==N[Ee]?fe+="RptManager,RptManager_Name":"-2"==N[Ee]?fe+="EmpSeqNo,Emp_Name":"-3"==N[Ee]?(fe+="DateWise",z=!0):fe+="CCNID"+(parseInt(N[Ee])-5e4)+",CCNID"+(parseInt(N[Ee])-5e4)+"_Name");if(z&&Z.forEach(Ee=>{Ee.DateWise=1}),fe.length>0){let Ee=[],Me=Z;if(z){let je,ct;for(je=D.FromDate.Date;je<=D.ToDate.Date;)ct={},ct.TDates=je.Date().ToString("dd MMM yyyy"),Ee.push(ct),je=je.AddDays(1)}else Ee=Me.ToTable(!0,fe.split(","));let Re=Ee,st=Z;if(null!=Ee&&Ee.length>0){D.dgv.TableColumns.Contains("Flag")&&D.dgv.TableColumns.Remove("Flag"),D.dgv.TableColumns.push("Flag");let je="",ct="";for(let ot=0;ot<Ee.length;ot++){je="",ct="",Re=Ee,st=Z;for(let Pe=0;Pe<Object.keys(Ee[0]).length;Pe++){let we=Object.keys(Ee[0])[Pe];we.endsWith("_Name")?(ct.length>0&&(ct+=" AND "),ct+=we+" = '"+Ee[ot][we].toString()+"' "):we.Contains("TDates")?(je.length>0&&(je+=" AND "),je+="TDates='"+Ee[ot].TDates+"'",Re=Re.filter(w=>w.TDates==Ee[ot].TDates),st=st.filter(w=>w.TDates==Ee[ot].TDates)):(je.length>0&&(je+=" AND "),je+=we+"="+Ee[ot][we].toString(),Re=Re.filter(w=>w[we]==Ee[ot][we].toString()),st=st.filter(w=>w[we]==Ee[ot][we].toString()))}if(je.length>0){le="";let Pe=null;if(Pe=z?Re:st,null!=Pe&&Pe.length>0){let we=-1;I=yield B.GetDocumentObject(parseInt(D.DPCDocumentName.SelectedValue),"",!1,"Biometric"),I.ScreenObject.GridDataObj.Clear();for(let w=0;w<D.dgv.Table.length;w++){let Le=D.dgv.Table[w].EmpCode.toString().Trim(),Ke=new Date(D.dgv.Table[w].PunchDate).ToString("dd MMM yyyy"),xe=!1;if(z?Ke.toString()==Pe[0].TDates.toString()&&(xe=!0):Pe.filter(ke=>ke.EmpCode==Le).length>0&&(xe=!0),"1"!=Y.J0.String(D.dgv.Table[w].Flag)&&xe)if(D.dgv.Table[w].Flag="1",v=D.dsbEmps.Tables[0].filter(ke=>ke.Code==Le),se=!1,null!=v&&v.length>0){if(1==D.bOverrideAttendanceDoc&&40089==parseInt(D.DPCDocumentName.SelectedValue)&&(he=Ce.filter(_e=>_e.dcCCNID51==v[0].NodeID&&new Date(_e.dcAlpha39).ToString("dd MMM yyy")==new Date(D.dgv.Table[w].PunchDate).ToString("dd MMM yyy")),null!=he&&he.length>0&&(se=!0)),1==se){let Te={value:new Date};I=yield B.GetDocumentObject(parseInt(D.DPCDocumentName.SelectedValue),"",!0,"Biometric"),I.ScreenObject.OnDocPrefixChanged("lostFocus",0,parseInt(he[0].DocID),Te,!1),I._Ddate=Te.value,I.ScreenObject.DocID=parseInt(he[0].DocID),we=0}else we++,ne=I.ScreenObject.GridDataObj.NewRow(),I.ScreenObject.GridData.push(ne);let ke,Ve;if(I.ScreenObject.ParentFlagName="PostingFromBiometric",I.IsGetAllEmployees=!0,I.dsAllEmployeeData=ce,I.sbBioErrLogs="",I.ScreenObject.GridDataColumns.Contains("dcCCNID51Code")&&(I.ScreenObject.GridData[we].dcCCNID51Code=v[0].Code),I.ScreenObject.GridData[we].dcCCNID51_key=v[0].NodeID,I.ScreenObject.GridData[we].dcCCNID51=v[0].Name,I.FillDefaultProd(I.ScreenObject.GridData[we],"dcCCNID51"),I.Celleditend(I.ScreenObject.GridData[we],"dcCCNID51",0),D.bUseROffTimings?(ke="ROffStartTime",Ve="ROffEndTime"):(ke="ActStartTime",Ve="ActEndTime"),40089==parseInt(D.DPCDocumentName.SelectedValue)||40090==parseInt(D.DPCDocumentName.SelectedValue))if(1==se&&40089==parseInt(D.DPCDocumentName.SelectedValue))if(null!=he[0].cdcAlpha1&&null!=he[0].cdcAlpha1&&""!=he[0].cdcAlpha1.toString()){let _e,Te;_e=new Date(he[0].cdcAlpha1).AddHours(Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][Ve]).getHours()).AddMinutes(Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][Ve]).getMinutes()),Te=new Date(he[0].cdcAlpha1).AddHours(new Date(he[0].cdcAlpha2).getHours()).AddMinutes(new Date(he[0].cdcAlpha2).getMinutes()),((null==he[0].cdcAlpha3||null==he[0].cdcAlpha3||""==he[0].cdcAlpha3.toString())&&_e!=Te||null!=he[0].cdcAlpha4&&null!=he[0].cdcAlpha4&&""!=he[0].cdcAlpha4.toString()&&_e>new Date(he[0].cdcAlpha4))&&(Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][ke])>Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][Ve])?(I.ScreenObject.GridData[we].dcAlpha3=new Date(D.dgv.Table[w].PunchDate).AddDays(1).ToString(G.d.SessionManager.Preferences["Date Format"]),I.ScreenObject.GridData[we].dcAlpha3_Key=new Date(D.dgv.Table[w].PunchDate).AddDays(1)):(I.ScreenObject.GridData[we].dcAlpha3=new Date(D.dgv.Table[w].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),I.ScreenObject.GridData[we].dcAlpha3_Key=new Date(D.dgv.Table[w].PunchDate)),I.ScreenObject.GridData[we].dcAlpha4=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][Ve]).ToString("HH:mm"),I.ScreenObject.GridData[we].dcAlpha4_Key=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][Ve]),I.Celleditend(I.ScreenObject.GridData[we],"dcAlpha4",parseInt(D.DPCDocumentName.SelectedValue)))}else null!=he[0].cdcAlpha3&&null!=he[0].cdcAlpha3&&""!=he[0].cdcAlpha3.toString()&&(null==he[0].cdcAlpha1||null==he[0].cdcAlpha1||""==he[0].cdcAlpha1.toString())&&(I.ScreenObject.GridData[we].dcAlpha1=new Date(D.dgv.Table[w].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),I.ScreenObject.GridData[we].dcAlpha1_Key=new Date(D.dgv.Table[w].PunchDate),I.ScreenObject.GridData[we].dcAlpha2=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][ke]).ToString("HH:mm"),I.ScreenObject.GridData[we].dcAlpha2_Key=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][ke]),I.Celleditend(I.ScreenObject.GridData[we],"dcAlpha2",parseInt(D.DPCDocumentName.SelectedValue)));else I.ScreenObject.GridData[we].dcAlpha1=new Date(D.dgv.Table[w].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),I.ScreenObject.GridData[we].dcAlpha1_Key=new Date(D.dgv.Table[w].PunchDate),40089==parseInt(D.DPCDocumentName.SelectedValue)&&(I.ScreenObject.GridData[we].dcAlpha39=new Date(D.dgv.Table[w].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),I.ScreenObject.GridData[we].dcAlpha39_Key=new Date(D.dgv.Table[w].PunchDate)),E=D.dsbEmps.Tables[1].filter(_e=>_e.Code==D.dgv.Table[w].ShiftCode),null!=E&&E.length>0&&(I.ScreenObject.GridDataColumns.Contains("dcCCNID73Code")&&(I.ScreenObject.GridData[we].dcCCNID73Code=E[0].Code),I.ScreenObject.GridDataColumns.Contains("dcCCNID73")&&(I.ScreenObject.GridData[we].dcCCNID73=E[0].Name),I.ScreenObject.GridDataColumns.Contains("dcCCNID73_Key")&&(I.ScreenObject.GridData[we].dcCCNID73_Key=E[0].NodeID),I.ScreenObject.GridDataColumns.Contains("dcCCNID73")&&I.Celleditend(I.ScreenObject.GridData[we],"dcCCNID73",0)),I.ScreenObject.GridData[we].dcAlpha2=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][ke]).ToString("HH:mm"),I.ScreenObject.GridData[we].dcAlpha2_Key=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][ke]),D.bOverrideAttendanceDoc&&40089==parseInt(D.DPCDocumentName.SelectedValue)&&Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][ke])==Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][Ve])||(Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][ke])>Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][Ve])?(I.ScreenObject.GridData[we].dcAlpha3=new Date(D.dgv.Table[w].PunchDate).AddDays(1).ToString(G.d.SessionManager.Preferences["Date Format"]),I.ScreenObject.GridData[we].dcAlpha3_Key=new Date(D.dgv.Table[w].PunchDate).AddDays(1)):(I.ScreenObject.GridData[we].dcAlpha3=new Date(D.dgv.Table[w].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),I.ScreenObject.GridData[we].dcAlpha3_Key=new Date(D.dgv.Table[w].PunchDate)),I.ScreenObject.GridData[we].dcAlpha4=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][Ve]).ToString("HH:mm"),I.ScreenObject.GridData[we].dcAlpha4_Key=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][Ve]),I.Celleditend(I.ScreenObject.GridData[we],"dcAlpha4",parseInt(D.DPCDocumentName.SelectedValue)));else if(40067==parseInt(D.DPCDocumentName.SelectedValue)||40087==parseInt(D.DPCDocumentName.SelectedValue)){if(I.ScreenObject.GridData[we].dcAlpha1=new Date(D.dgv.Table[w].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),I.ScreenObject.GridData[we].dcAlpha1_Key=new Date(D.dgv.Table[w].PunchDate),I.Celleditend(I.ScreenObject.GridData[we],"dcAlpha1",parseInt(D.DPCDocumentName.SelectedValue)),E=D.dsbEmps.Tables[1].filter(_e=>_e.Code==D.dgv.Table[w].ShiftCode),null!=E&&E.length>0&&(I.ScreenObject.GridDataColumns.Contains("dcCCNID73Code")&&(I.ScreenObject.GridData[we].dcCCNID73Code=E[0].Code),I.ScreenObject.GridDataColumns.Contains("dcCCNID73")&&(I.ScreenObject.GridData[we].dcCCNID73=E[0].Name),I.ScreenObject.GridData[we].dcCCNID73_Key=E[0].NodeID,I.Celleditend(I.ScreenObject.GridData[we],"dcCCNID73",0)),I.ScreenObject.GridData[we].dcAlpha2=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][ke]).ToString("HH:mm"),I.ScreenObject.GridData[we].dcAlpha2_Key=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][ke]),I.ScreenObject.GridData[we].dcAlpha3=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][Ve]).ToString("HH:mm"),I.ScreenObject.GridData[we].dcAlpha3_Key=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[w][Ve]),D.bDocColumns){if(D.dgv.TableColumns.Contains("IN Device No"))if(null!=(p=I.ScreenObject.ColumnSource.FirstOrDefault(_e=>_e.DisplayMember==D.dgvDocColumns.Table[0].Destination.toString()))&&I.ScreenObject.GridDataColumns.Contains(p.DisplayMember))if("LISTBOX"==p.DataType){if(I.ScreenObject.GridDataColumns.Contains(p.DisplayMember+"_Key"))try{L=D.dsbDims.Tables[0].Select("CODE='"+D.dgv.Table[w]["IN Device No"]+"' AND CostcenterID="+(5e4+parseInt(p.DisplayMember.Replace("dcCCNID","")))),null!=L&&L.length>0&&(I.ScreenObject.GridData[we][p.DisplayMember+"_Key"]=L[0].NODEID)}catch{I.ScreenObject.GridData[we][p.DisplayMember]=D.dgv.Table[w]["IN Device No"]}}else I.ScreenObject.GridData[we][p.DisplayMember]=D.dgv.Table[w]["IN Device No"];else if(null==(W=I.ScreenObject._TextFields.find(_e=>_e.DBColumnName.toString()==D.dgvDocColumns.Table[0].Destination.toString()))&&(W=I.ScreenObject._CCFields.find(_e=>_e.DBColumnName.toString()==D.dgvDocColumns.Table[0].Destination.toString())),null==W&&(W=I.ScreenObject.HeaderFields.file(_e=>_e.DBColumnName.toString()==D.dgvDocColumns.Table[0].Destination.toString())),null!=W){let _e=D.dgv.Table[w]["IN Device No"].toString();I.ScreenObject.fillcontrolValue(W,_e)}if(D.dgv.TableColumns.Contains("OUT Device No"))if(null!=(p=I.ScreenObject.ColumnSource.FirstOrDefault(Te=>Te.DisplayMember==D.dgvDocColumns.Table[1].Destination.toString()))&&I.ScreenObject.GridDataColumns.Contains(p.DisplayMember))if("LISTBOX"==p.DataType){if(I.ScreenObject.GridDataColumns.Contains(p.DisplayMember+"_Key"))try{L=D.dsbDims.Tables[0].filter(Te=>Te.CODE==D.dgv.Table[w]["OUT Device No"]&&Te.CostcenterID==5e4+parseInt(p.DisplayMember.Replace("dcCCNID",""))),null!=L&&L.length>0&&(I.ScreenObject.GridData[we][p.DisplayMember+"_Key"]=L[0].NODEID)}catch{I.ScreenObject.GridData[we][p.DisplayMember]=D.dgv.Table[w]["OUT Device No"]}}else I.ScreenObject.GridData[we][p.DisplayMember]=D.dgv.Table[w]["OUT Device No"];else if(null==(W=I.ScreenObject._TextFields.find(Oe=>Oe.DBColumnName.toString()==D.dgvDocColumns.Table[1].Destination.toString()))&&(W=I.ScreenObject._CCFields.find(Oe=>Oe.DBColumnName.toString()==D.dgvDocColumns.Table[1].Destination.toString())),null==W&&(W=I.ScreenObject.HeaderFields.find(Oe=>Oe.DBColumnName.toString()==D.dgvDocColumns.Table[1].Destination.toString())),null!=W){let Oe=D.dgv.Table[w]["OUT Device No"].toString();I.ScreenObject.fillcontrolValue(W,Oe)}}D.bDirection&&null!=(p=I.ScreenObject.ColumnSource.FirstOrDefault(Te=>"LineNarration"==Te.DisplayMember))&&I.ScreenObject.GridDataColumns.Contains(p.DisplayMember)&&(I.ScreenObject.GridData[we][p.DisplayMember]=D.dgv.Table[w].Remarks),I.Celleditend(I.ScreenObject.GridData[we],"dcAlpha3",parseInt(D.DPCDocumentName.SelectedValue))}I.CalculateTotals(I.ScreenObject.GridData[we],!1)}else D.dgv.Table[w].Remarks="Employee Code - '"+Le+"' not found in RevenU / Relieved "}if(""!=j.Trim()&&(I.DisplayMessage=j,I.MessageVisibility=!0),I.UpdateFooter=!0,I.RefreshGrid=!0,G.d.SessionManager.Preferences.ContainsKey("PostDocAutoWhilePostBiometricData")&&""!=G.d.SessionManager.Preferences.PostDocAutoWhilePostBiometricData&&(0,X.yG0)(G.d.SessionManager.Preferences.PostDocAutoWhilePostBiometricData)||D.IsAutoPost){let w=yield I.SaveInventoryDocument("Save",!0);I.sbBioErrLogs.length>0&&(D.sbPostErrLog+=I.sbBioErrLogs,I.sbBioErrLogs=""),w||(le=ct+" "+I.DisplayMessage,D.sbPostErrLog+='<Row Error="'+le+'"></Row>')}else{const{AddEditDocumentComponent:w}=yield Promise.all([t.e(9924),t.e(6833),t.e(855),t.e(9710),t.e(2076),t.e(5543)]).then(t.bind(t,19214));null!=(T=I.ScreenObject._StaticFields.find(Ke=>"CommonNarration"==Ke.DBColumnName))&&(T.SetFocus=!0);let Le={};Object.assign(Le,{component:w,params:{obj:I}}),G.d.page.addNewTab(Le)}I.IsGetAllEmployees=!1,I.dsAllEmployeeData=null,D.MsgVisibility=!1}}}}}}}}}else{I=yield B.GetDocumentObject(parseInt(D.DPCDocumentName.SelectedValue),"",!1),I.ScreenObject.GridDataObj.Clear(),I.ScreenObject.ParentFlagName="PostingFromBiometric",I.IsGetAllEmployees=!0,I.dsAllEmployeeData=ce,I.sbBioErrLogs="";let N=-1;for(let ee=0;ee<D.dgv.Table.length;ee++){let Z=D.dgv.Table[ee].EmpCode.toString().Trim();if(v=D.dsbEmps.Tables[0].filter(fe=>fe.Code==Z),se=!1,null!=v&&v.length>0){if(1==D.bOverrideAttendanceDoc&&40089==parseInt(D.DPCDocumentName.SelectedValue)&&(he=Ce.filter(Ee=>Ee.dcCCNID51==v[0].NodeID&&new Date(Ee.dcAlpha39).ToString("dd MMM yyy")==new Date(D.dgv.Table[ee].PunchDate).ToString("dd MMM yyy")),null!=he&&he.length>0&&(se=!0)),1==se){let Me={value:new Date};I.ScreenObject.OnDocPrefixChanged("lostFocus",0,parseInt(he[0].DocID),Me,!1),I._Ddate=Me.value,N=0}else N++,ne=I.ScreenObject.GridDataObj.NewRow(),I.ScreenObject.GridData.push(ne);let fe,U;if(I.ScreenObject.GridDataColumns.Contains("dcCCNID51Code")&&(I.ScreenObject.GridData[N].dcCCNID51Code=v[0].Code),I.ScreenObject.GridData[N].dcCCNID51_key=v[0].NodeID,I.ScreenObject.GridData[N].dcCCNID51=v[0].Name,I.FillDefaultProd(I.ScreenObject.GridData[N],"dcCCNID51"),I.Celleditend(I.ScreenObject.GridData[N],"dcCCNID51",0),D.bUseROffTimings?(fe="ROffStartTime",U="ROffEndTime"):(fe="ActStartTime",U="ActEndTime"),40089==parseInt(D.DPCDocumentName.SelectedValue)||40090==parseInt(D.DPCDocumentName.SelectedValue))if(1==se&&40089==parseInt(D.DPCDocumentName.SelectedValue))if(null!=he[0].cdcAlpha1&&null!=he[0].cdcAlpha1&&""!=he[0].cdcAlpha1.toString()){let Ee=new Date(he[0].cdcAlpha1);(null==he[0].cdcAlpha3||null==he[0].cdcAlpha3||""==Y.J0.String(he[0].cdcAlpha3)||null!=he[0].cdcAlpha4&&null!=he[0].cdcAlpha4&&""!=he[0].cdcAlpha4.toString()&&Ee.AddHours(Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][U]).getHours()).AddMinutes(Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][U]).getMinutes())>new Date(he[0].cdcAlpha4))&&(Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][fe])>Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][U])?(I.ScreenObject.GridData[N].dcAlpha3=new Date(D.dgv.Table[ee].PunchDate).AddDays(1).ToString(G.d.SessionManager.Preferences["Date Format"]),I.ScreenObject.GridData[N].dcAlpha3_Key=new Date(D.dgv.Table[ee].PunchDate).AddDays(1)):(I.ScreenObject.GridData[N].dcAlpha3=new Date(D.dgv.Table[ee].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),I.ScreenObject.GridData[N].dcAlpha3_Key=new Date(D.dgv.Table[ee].PunchDate)),I.ScreenObject.GridData[N].dcAlpha4=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][U]).ToString("HH:mm"),I.ScreenObject.GridData[N].dcAlpha4_Key=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][U]),I.Celleditend(I.ScreenObject.GridData[N],"dcAlpha4",parseInt(D.DPCDocumentName.SelectedValue)))}else null!=he[0].cdcAlpha3&&null!=he[0].cdcAlpha3&&""!=he[0].cdcAlpha3.toString()&&(null==he[0].cdcAlpha1||null==he[0].cdcAlpha1||""==he[0].cdcAlpha1.toString())&&(I.ScreenObject.GridData[N].dcAlpha1=new Date(D.dgv.Table[ee].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),I.ScreenObject.GridData[N].dcAlpha1_Key=new Date(D.dgv.Table[ee].PunchDate),I.ScreenObject.GridData[N].dcAlpha2=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][fe]).ToString("HH:mm"),I.ScreenObject.GridData[N].dcAlpha2_Key=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][fe]),I.Celleditend(I.ScreenObject.GridData[N],"dcAlpha2",parseInt(D.DPCDocumentName.SelectedValue)));else I.ScreenObject.GridData[N].dcAlpha1=new Date(D.dgv.Table[ee].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),I.ScreenObject.GridData[N].dcAlpha1_Key=new Date(D.dgv.Table[ee].PunchDate),40089==parseInt(D.DPCDocumentName.SelectedValue)&&(I.ScreenObject.GridData[N].dcAlpha39=new Date(D.dgv.Table[ee].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),I.ScreenObject.GridData[N].dcAlpha39_Key=new Date(D.dgv.Table[ee].PunchDate)),E=D.dsbEmps.Tables[1].filter(Ee=>Ee.Code==D.dgv.Table[ee].ShiftCode),null!=E&&E.length>0&&(I.ScreenObject.GridDataColumns.Contains("dcCCNID73Code")&&(I.ScreenObject.GridData[N].dcCCNID73Code=E[0].Code),I.ScreenObject.GridDataColumns.Contains("dcCCNID73")&&(I.ScreenObject.GridData[N].dcCCNID73=E[0].Name),I.ScreenObject.GridData[N].dcCCNID73_Key=E[0].NodeID,I.Celleditend(I.ScreenObject.GridData[N],"dcCCNID73",0)),I.ScreenObject.GridData[N].dcAlpha2=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][fe]).ToString("HH:mm"),I.ScreenObject.GridData[N].dcAlpha2_Key=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][fe]),D.bOverrideAttendanceDoc&&40089==parseInt(D.DPCDocumentName.SelectedValue)&&Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][fe])==Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][U])||(Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][fe])>Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][U])?(I.ScreenObject.GridData[N].dcAlpha3=new Date(D.dgv.Table[ee].PunchDate).AddDays(1).ToString(G.d.SessionManager.Preferences["Date Format"]),I.ScreenObject.GridData[N].dcAlpha3_Key=new Date(D.dgv.Table[ee].PunchDate).AddDays(1)):(I.ScreenObject.GridData[N].dcAlpha3=new Date(D.dgv.Table[ee].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),I.ScreenObject.GridData[N].dcAlpha3_Key=new Date(D.dgv.Table[ee].PunchDate)),I.ScreenObject.GridData[N].dcAlpha4=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][U]).ToString("HH:mm"),I.ScreenObject.GridData[N].dcAlpha4_Key=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][U]),I.Celleditend(I.ScreenObject.GridData[N],"dcAlpha4",parseInt(D.DPCDocumentName.SelectedValue)));else if(40067==parseInt(D.DPCDocumentName.SelectedValue)||40087==parseInt(D.DPCDocumentName.SelectedValue)){if(I.ScreenObject.GridData[N].dcAlpha1=new Date(D.dgv.Table[ee].PunchDate).ToString(G.d.SessionManager.Preferences["Date Format"]),I.ScreenObject.GridData[N].dcAlpha1_Key=new Date(D.dgv.Table[ee].PunchDate),I.Celleditend(I.ScreenObject.GridData[N],"dcAlpha1",parseInt(D.DPCDocumentName.SelectedValue)),E=D.dsbEmps.Tables[1].filter(Ee=>Ee.Code==D.dgv.Table[ee].ShiftCode),null!=E&&E.length>0&&(I.ScreenObject.GridDataColumns.Contains("dcCCNID73Code")&&(I.ScreenObject.GridData[N].dcCCNID73Code=E[0].Code),I.ScreenObject.GridDataColumns.Contains("dcCCNID73")&&(I.ScreenObject.GridData[N].dcCCNID73=E[0].Name),I.ScreenObject.GridData[N].dcCCNID73_Key=E[0].NodeID,I.Celleditend(I.ScreenObject.GridData[N],"dcCCNID73",0)),I.ScreenObject.GridData[N].dcAlpha2=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][fe]).ToString("HH:mm"),I.ScreenObject.GridData[N].dcAlpha2_Key=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][fe]),I.ScreenObject.GridData[N].dcAlpha3=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][U]).ToString("HH:mm"),I.ScreenObject.GridData[N].dcAlpha3_Key=Y.J0.ParseDate(R.ToString("dd/MMM/yyyy")+" "+D.dgv.Table[ee][U]),D.bDocColumns){var W;if(D.dgv.TableColumns.Contains("IN Device No"))if(null!=(p=I.ScreenObject.ColumnSource.FirstOrDefault(Me=>Me.DisplayMember==D.dgvDocColumns.Table[0].Destination.toString()))&&I.ScreenObject.GridDataColumns.Contains(p.DisplayMember))if("LISTBOX"==p.DataType){if(I.ScreenObject.GridDataColumns.Contains(p.DisplayMember+"_Key"))try{L=D.dsbDims.Tables[0].Select("CODE='"+D.dgv.Table[ee]["IN Device No"]+"' AND CostcenterID="+(5e4+parseInt(p.DisplayMember.Replace("dcCCNID","")))),null!=L&&L.length>0&&(I.ScreenObject.GridData[N][p.DisplayMember+"_Key"]=L[0].NODEID)}catch{I.ScreenObject.GridData[N][p.DisplayMember]=D.dgv.Table[ee]["IN Device No"]}}else I.ScreenObject.GridData[N][p.DisplayMember]=D.dgv.Table[ee]["IN Device No"];else if(null==(W=I.ScreenObject._TextFields.find(Re=>Re.DBColumnName.toString()==D.dgvDocColumns.Table[0].Destination.toString()))&&(W=I.ScreenObject._CCFields.find(Re=>Re.DBColumnName.toString()==D.dgvDocColumns.Table[0].Destination.toString())),null==W&&(W=I.ScreenObject.HeaderFields.find(Re=>Re.DBColumnName.toString()==D.dgvDocColumns.Table[0].Destination.toString())),null!=W){let Re=D.dgv.Table[ee]["IN Device No"].toString();I.ScreenObject.fillcontrolValue(W,Re)}if(D.dgv.TableColumns.Contains("OUT Device No"))if(null!=(p=I.ScreenObject.ColumnSource.FirstOrDefault(Me=>Me.DisplayMember==D.dgvDocColumns.Table[1].Destination.toString()))&&I.ScreenObject.GridDataColumns.Contains(p.DisplayMember))if("LISTBOX"==p.DataType){if(I.ScreenObject.GridDataColumns.Contains(p.DisplayMember+"_Key"))try{L=D.dsbDims.Tables[0].Select("CODE='"+D.dgv.Table[ee]["OUT Device No"]+"' AND CostcenterID="+(5e4+parseInt(p.DisplayMember.Replace("dcCCNID","")))),null!=L&&L.length>0&&(I.ScreenObject.GridData[N][p.DisplayMember+"_Key"]=L[0].NODEID)}catch{I.ScreenObject.GridData[N][p.DisplayMember]=D.dgv.Table[ee]["OUT Device No"]}}else I.ScreenObject.GridData[N][p.DisplayMember]=D.dgv.Table[ee]["OUT Device No"];else if(null==(W=I.ScreenObject._TextFields.find(Re=>Re.DBColumnName.toString()==D.dgvDocColumns.Table[1].Destination.toString()))&&(W=I.ScreenObject._CCFields.find(Re=>Re.DBColumnName.toString()==D.dgvDocColumns.Table[1].Destination.toString())),null==W&&(W=I.ScreenObject.HeaderFields.find(Re=>Re.DBColumnName.toString()==D.dgvDocColumns.Table[1].Destination.toString())),null!=W){let Re=D.dgv.Table[ee]["OUT Device No"].toString();I.ScreenObject.fillcontrolValue(W,Re)}}var p;D.bDirection&&null!=(p=I.ScreenObject.ColumnSource.FirstOrDefault(Me=>"LineNarration"==Me.DisplayMember))&&I.ScreenObject.GridDataColumns.Contains(p.DisplayMember)&&(I.ScreenObject.GridData[N][p.DisplayMember]=D.dgv.Table[ee].Remarks),I.Celleditend(I.ScreenObject.GridData[N],"dcAlpha3",parseInt(D.DPCDocumentName.SelectedValue))}I.CalculateTotals(I.ScreenObject.GridData[N],!1)}else D.dgv.Table[ee].Remarks="Employee Code - '"+Z+"' not found in RevenU / Relieved "}if(""!=j.Trim()&&(I.DisplayMessage=j,I.MessageVisibility=!0),I.UpdateFooter=!0,I.RefreshGrid=!0,G.d.SessionManager.Preferences.ContainsKey("PostDocAutoWhilePostBiometricData")&&""!=G.d.SessionManager.Preferences.PostDocAutoWhilePostBiometricData&&(0,X.yG0)(G.d.SessionManager.Preferences.PostDocAutoWhilePostBiometricData)||D.IsAutoPost){let ee=yield I.SaveInventoryDocument("Save",!0);I.sbBioErrLogs.length>0&&(D.sbPostErrLog+=I.sbBioErrLogs,I.sbBioErrLogs=""),ee||(le=I.DisplayMessage,D.sbPostErrLog+='<Row Error="'+le+'"></Row>')}else{const{AddEditDocumentComponent:ee}=yield Promise.all([t.e(9924),t.e(6833),t.e(855),t.e(9710),t.e(2076),t.e(5543)]).then(t.bind(t,19214));var T;null!=(T=I.ScreenObject._StaticFields.find(U=>"CommonNarration"==U.DBColumnName))&&(T.SetFocus=!0);let fe={};Object.assign(fe,{component:ee,params:{obj:I}}),G.d.page.addNewTab(fe)}I.IsGetAllEmployees=!1,I.dsAllEmployeeData=null,D.MsgVisibility=!1}if(G.d.SessionManager.Preferences.ContainsKey("PostDocAutoWhilePostBiometricData")&&""!=G.d.SessionManager.Preferences.PostDocAutoWhilePostBiometricData&&(0,X.yG0)(G.d.SessionManager.Preferences.PostDocAutoWhilePostBiometricData))if(D.sbPostErrLog.length>0){let N="";D.ListVisbility=!0,D.sbPostErrLog="<FailedRecord>"+D.sbPostErrLog+"</FailedRecord>",D.dgvFailedRecord.Clear();let ee=new Y.VB;ee.LoadXml(D.sbPostErrLog.toString());let Z=ee.SelectSingleNode("FailedRecord");if(null!=Z){let fe;if(Z.childNodes.length>0)for(let U=0;U<Z.childNodes.length;U++)fe=D.dgvFailedRecord.NewRow(),D.dgvFailedRecord.addRow(fe),null!=Z.childNodes[U].attributes.DADate&&(D.dgvFailedRecord.Table[U].AttendanceDate=Z.childNodes[U].attributes.DADate.value),null!=Z.childNodes[U].attributes.Code&&(D.dgvFailedRecord.Table[U].Code=Z.childNodes[U].attributes.Code.value),null!=Z.childNodes[U].attributes.Name&&(D.dgvFailedRecord.Table[U].Name=Z.childNodes[U].attributes.Name.value),D.dgvFailedRecord.Table[U].Message=Z.childNodes[U].attributes.Error.value,N+=Z.childNodes[U].attributes.Error.value}D.IsAutoPost&&Y.J0.WriteErrorsToFile(N,"BiometricDocPostErrors"),D.DisplayMessage=I.ScreenObject.Preferences.ContainsKey("SkipEmployeesWhoGetErrorsWhileSaving")&&""!=I.ScreenObject.Preferences.SkipEmployeesWhoGetErrorsWhileSaving&&(0,X.yG0)(I.ScreenObject.Preferences.SkipEmployeesWhoGetErrorsWhileSaving)?"Posted With Error":"Erros occurred while Posting",D.MessageVisibility=!0}else D.ListVisbility=!1,D.DisplayMessage="Posted Successfully.",D.MessageVisibility=!0}})()}static GetAttXML(D){let x="",p="",W="",T="",R="";return W+='<Alpha Query="',W+=" dcAlpha1='"+D.CheckinDate+"',dcAlpha2='"+D.CheckinTime+"',dcAlpha3='"+D.CheckoutDate+"',dcAlpha4='"+D.CheckoutTime+"',dcAlpha5='"+D.TotalTime+"',dcAlpha39='"+D.DailyPayrollDate+"',dcAlpha6='-1',dcAlpha7='-1',dcAlpha8='Desktop',dcAlpha16='-1',dcAlpha17='-1',dcAlpha18='Desktop',dcAlpha32='Manual',dcAlpha33='Normal',dcAlpha34='Normal' ",W+='" ></Alpha>',R="",T+='<CostCenters Query="',R+=" dcCCNID51="+D.EmpNode+",",R+=" dcCCNID73="+D.ShiftNode+",",R.length>0&&(T+=R),T+='" ></CostCenters>',p+='" DocDetailsID="',p+='" ProductID="'+this.DefProdID+'" Quantity="0',p+='" Unit="1" UOMConversion="1" UOMConvertedQty="0',p+='" Rate="0" Gross="0" IsQtyIgnored="1" AverageRate="0',p+='" StockValue="0" StockValueFC="0" RefNO="',p+='" BillDate="'+new Date,p+='" CurrencyID="1" ExchangeRate="1',p+='" DebitAccount="'+this.sDrAccount+'" CreditAccount="'+this.sCrAccount,p+='" CommonNarratio',x+="<Row>",x+="<AccountsXML></AccountsXML>",x+='<Transactions DocSeqNo="1" VoucherType="11',x+='" LinkedInvDocDetailsID="0" LinkedFieldName="',x+='" LineNarration="',x+=p.toString()+'" ></Transactions>',x+=W.toString(),x+=T.toString(),x+="<EXTRAXML></EXTRAXML>",x+="</Row>",x.toString()}static CalculateTotalTime(D,x,p,W){if(x=new Date(D.getFullYear(),D.iMonth(),D.getDate(),x.getHours(),x.getMinutes(),x.getSeconds()),(W=new Date(p.getFullYear(),p.iMonth(),p.getDate(),W.getHours(),W.getMinutes(),W.getSeconds()))<x)return"00.00";let T=W.Subtract(x);return T.Hours<0&&(T=T.add(O.FromDays(1))),(24*T.Days+T.Hours).PrefixZero(2)+"."+T.Minutes.PrefixZero(2)}}return B})();const ue=1e3,q=6e4,ye=60*q,re=24*ye;class O{static interval(me,D){if(Number.isNaN(me))throw new Error("value can't be NaN");const p=O.round(me*D+(me>=0?.5:-.5));return(p>O.maxValue.totalMilliseconds||p<O.minValue.totalMilliseconds)&&console.log("TimeSpanTooLong"),new O(p)}static round(me){return me<0?Math.ceil(me):me>0?Math.floor(me):0}static timeToMilliseconds(me,D,x){const p=3600*me+60*D+x;return(p>O.maxValue.TotalSeconds||p<O.minValue.TotalSeconds)&&console.log("TimeSpanTooLong"),p*ue}static get zero(){return new O(0)}static get maxValue(){return new O(Number.MAX_SAFE_INTEGER)}static get minValue(){return new O(Number.MIN_SAFE_INTEGER)}static FromDays(me){return O.interval(me,re)}static FromHours(me){return O.interval(me,ye)}static fromMilliseconds(me){return O.interval(me,1)}static fromMinutes(me){return O.interval(me,q)}static fromSeconds(me){return O.interval(me,ue)}static fromTime(me,D,x,p,W){return null!=W?this.fromTimeStartingFromDays(me,D,x,p,W):this.fromTimeStartingFromHours(me,D,x)}static fromTimeStartingFromHours(me,D,x){const p=O.timeToMilliseconds(me,D,x);return new O(p)}static fromTimeStartingFromDays(me,D,x,p,W){const T=me*re+D*ye+x*q+p*ue+W;return(T>O.maxValue.totalMilliseconds||T<O.minValue.totalMilliseconds)&&console.log("TimeSpanTooLong"),new O(T)}constructor(me=0){this._millis=me}get Days(){return O.round(this._millis/re)}get Hours(){return O.round(this._millis/ye%24)}get Minutes(){return O.round(this._millis/q%60)}get Seconds(){return O.round(this._millis/ue%60)}get Milliseconds(){return O.round(this._millis%1e3)}get TotalDays(){return this._millis/re}get TotalHours(){return this._millis/ye}get TotalMinutes(){return this._millis/q}get TotalSeconds(){return this._millis/ue}get totalMilliseconds(){return this._millis}add(me){return new O(this._millis+me.totalMilliseconds)}subtract(me){return new O(this._millis-me.totalMilliseconds)}}},9120:(qe,be,t)=>{"use strict";t.d(be,{d:()=>J});var m=t(10467),A=t(32057);class G{constructor(){this._gridid=0,this._rowid=0}get gridid(){return++this._gridid}get rowid(){return++this._rowid}setRowid(oe){oe.forEach(k=>{k.id=this.rowid})}emptyObj(){return{id:this.rowid}}}class J{static#e=this.IsMobile=!1;static#t=this.IsAndroid=!1;static#n=this.IsNativeMobile=!1;static#i=this.IsCustMobileApp=!1;static#s=this.EnableSettings=!1;static#o=this.HidePactLogo=!1;static#r=this.IsMac=!1;static#l=this.slick=new G;static#a=this.DeviceOS="";static#d=this.ListViewDialogEnabled=!1;constructor(){}static getDateText(oe){return J.datepipe.transform(oe,this.SessionManager.Preferences["Date Format"])}static getDateQry(oe){return J.datepipe.transform(oe,"dd/MMM/yyyy")}static GetResource(oe,X="#"){return J.translate.instant(oe)}static ShowLoader(){J.loader.startLoading()}static HideLoader(){J.loader.stopLoading()}static getDocDetails(oe){let X=null,k=!1;J.SessionManager.MobilePreferences.ContainsKey("FmSupervisorDocumentConfiguration")&&(k="string"==typeof J.SessionManager.MobilePreferences.FmSupervisorDocumentConfiguration?JSON.parse(J.SessionManager.MobilePreferences.FmSupervisorDocumentConfiguration.toString()).MultipleTechnicians:J.SessionManager.MobilePreferences.FmSupervisorDocumentConfiguration.MultipleTechnicians);var H=" inv.docid = "+oe+" ";return X=4==J.SessionManager.FmUserType||6==J.SessionManager.FmUserType?J.report.ReportDataSet("FAC004",!1,J.SessionManager.LoginDimension+"~10~"+k,J.SessionManager.LoginDimID+"",H):J.report.ReportDataSet(1==J.SessionManager.FmUserType?"FAC012":"FAC013",!1,J.SessionManager.LoginDimID+"~10~"+k,H),null!=X&&X.Tables.length>0&&X.Tables[0].length>0?X.Tables[0][0]:[]}static OnNotificationClick(){var oe=this;return(0,m.A)(function*(){var X=J.NotificationData.CostCenterID;if(40201==X||40203==X){let k="Service Request Details";oe.SelectedItem=oe.getDocDetails(J.NotificationData.NodeID);let H=J.page.tabs.find(ue=>ue.title==k);if(H)H.params.obj=oe,J.page.SetActiveTab(H);else{const{ServiceRequestDetailsComponent:ue}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,39020));J.page.addNewTab({title:k,component:ue,params:{obj:oe,DocID:J.NotificationData.NodeID}})}}else{const{RibbonExtViewModel:k}=yield Promise.resolve().then(t.bind(t,72669));k.LoadDocument_VoucherNo(J.NotificationData.VoucherNo)}})()}static#c=this.\u0275fac=function(X){return new(X||J)};static#h=this.\u0275prov=A.jDH({token:J,factory:J.\u0275fac,providedIn:"root"})}},48955:(qe,be,t)=>{"use strict";t.d(be,{C3:()=>k,CC:()=>Y,Nl:()=>oe,PE:()=>ye,Wz:()=>H});var m=t(31168),A=t(9120),G=t(18088),J=t(32057);let Y=(()=>{class O{constructor(){this.ThrowException=!0,this.tokenName={ADD:"ADD",SUB:"SUB",MUL:"MUL",DIV:"DIV",POW:"POW",PCT:"PCT",QUOT:"QUOT",ABS:"ABS",NOT:"NOT",OPENP:"OPENP",CLOSEP:"CLOSEP",DQT:"DQT",AND:"AND",OR:"OR",COMA:"COMA",EQL:"EQL",GRT:"GRT",LES:"LES",GTE:"GTE",LTE:"LTE",NTE:"NTE",KWRDTHEN:"KWRDTHEN",KWRDIF:"KWRDIF",KWRDIF2:"KWRDIF2",KWRDELSE:"KWRDELSE",IDENTIFIER:"IDENTIFIER",INTEGER:"INTEGER",DOUBLE:"DOUBLE",CONCAT:"CONCAT",MOD:"MOD",TRUNC:"TRUNC",ROUND:"ROUND",DATEDIFF:"DATEDIFF",NONE:"NONE",QTY:"QTY",RATE:"RATE",GROSS:"GROSS",NET:"NET",AVGRT:"AVGRT",LSTPRCHSRT:"LSTPRCHSRT",LSTLNDGRT:"LSTLNDGRT",CONVQTY:"CONVQTY",UNITS:"UNITS",BASEQTY:"BASEQTY",EXCHRT:"EXCHRT",STRING:"STRING",USERDEF:"USERDEF",APPDEF:"APPDEF",SUBSTR:"SUBSTR",UPPER:"UPPER",LOWER:"LOWER",DATENAME:"DATENAME",LENGTH:"LENGTH",MCONCAT:"MCONCAT",DATEADD:"DATEADD",REPLACE:"REPLACE",KWRDELSEIF:"KWRDELSEIF",FLOOR:"FLOOR",CEIL:"CEIL",INDEXOF:"INDEXOF",ISNUM:"ISNUM",REGEX:"REGEX",TRIM:"TRIM",NEWDATE:"NEWDATE",FORMAT:"FORMAT",TIMEADD:"TIMEADD"},this.keywords=["IF","THEN","ELSE","AND","OR","CONCAT","QTY","RATE","GROSS","NET","AVGRATE","LASTPURCHASERATE","LASTLANDINGRATE","CONVERSIONQTY","UNITS","BASEQTY","EXCHANGERATE","MOD","ABS","TRUNC","ROUND","DATEDIFF","SUBSTR","UPPER","LOWER","DATENAME","LENGTH","MCONCAT","DATEADD","REPLACE","ELSEIF","FLOOR","CEIL","INDEXOF","ISNUM","REGEX","TRIM","NEWDATE","FORMAT"],this.keywordsreports=["IF","THEN","ELSE","AND","OR","CONCAT","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","MOD","ABS","TRUNC","ROUND","DATEDIFF","SUBSTR","UPPER","LOWER","DATENAME","LENGTH","MCONCAT","DATEADD","REPLACE","ELSEIF","FLOOR","CEIL","INDEXOF","ISNUM","REGEX","TRIM","NEWDATE","FORMAT","TIMEADD"],this.tokenClass={OPERAND:"OPERAND",OPERATOR:"OPERATOR",USERDEF:"USERDEF",MATHOP:"MATHOP",LOGICOP:"LOGICOP",COMPOP:"COMPOP",FINANOP:"FINANOP",FUNC:"FUNC",GROUP:"GROUP"},this.tokenType={REFERENCE:"REFERENCE",UNARY:"UNARY",BINARY:"BINARY",TERTIARY:"TERTIARY",STATIC:"STATIC",KEYWORD:"KEYWORD"},this.funckeywords=["CONCAT","ABS","KWRDIF","KWRDTHEN","KWRDELSE","AND","OR","MOD","TRUNC","ROUND","DATEDIFF","SUBSTR","UPPER","LOWER","DATENAME","LENGTH","MCONCAT","DATEADD","REPLACE","KWRDELSEIF","FLOOR","CEIL","INDEXOF","ISNUM","REGEX","TRIM","NEWDATE","FORMAT"],this.fieldType={INT:"INT",DOUBLE:"DOUBLE",STRING:"STRING",COSTCENTER:"COSTCENTER "}}SetKeyWords(me){}EvaluateExpression(me,D,x=!1){var L,I,ie,p=this.tokenName,W="REPORT"==this.FormulaType||"VPT"==this.FormulaType?this.keywordsreports:this.keywords,T=this.tokenClass,R=this.tokenType,le=this.funckeywords,j_stack=function(){var Z;this.Push=function(fe){typeof Z>"u"&&(Z=[]),Z.push(fe)},this.Pop=function(){return Z.pop()},this.Peek=function(fe){return Z[Z.length-1]},this.GetArray=function(){return Z},this.Count=function(fe){return typeof Z>"u"?-1:Z.length},this.Clear=function(){Z=[]}},F=[],v=new function(){var Z;this.Enqueue=function(fe){typeof Z>"u"&&(Z=[]),Z.push(fe)},this.Dequeue=function(){return Z.shift()},this.Peek=function(){return Z[0]},this.GetArray=function(){return Z},this.Count=function(fe){return typeof Z>"u"?-1:Z.length},this.Clear=function(){Z=[]}};return function Ce(Z,fe){for(var Re,ot,U=new j_stack,Ee=new j_stack,Me=new j_stack,je="",ct=[],Pe=0;Pe<Z.length;Pe++)switch(ot=Z[Pe],ot.tknClass){case T.OPERAND:fe.Enqueue(ot),U.Count()>0&&"KWRDELSE"===(Re=U.Peek()).tokenName&&fe.Enqueue(U.Pop());break;case T.FINANOP:fe.Enqueue(ot);break;case T.FUNC:U.Push(ot);break;case T.OPERATOR:U.Count()>0&&((Re=U.Peek()).tknClass===T.MATHOP&&fe.Enqueue(U.Pop()),"COMA"==ot.tokenName&&ct.length>0&&ct[ct.length-1]++);break;case T.MATHOP:switch(ot.tokenValue){case"+":case"-":if(U.Count()>0)for(Re=U.Peek();z(Re)&&(fe.Enqueue(U.Pop()),U.Count()>0);)Re=U.Peek();U.Push(ot);break;case"*":case"/":case"^":case"@":if(U.Count()>0)for(Re=U.Peek();z(Re)&&"+"!==Re.tokenValue.toString()&&"-"!==Re.tokenValue.toString()&&(fe.Enqueue(U.Pop()),U.Count()>0);)Re=U.Peek();U.Push(ot)}break;case T.LOGICOP:switch(je=ot.tokenName){case"KWRDIF":case"KWRDELSE":case"KWRDELSEIF":U.Push(ot);break;case"AND":case"OR":case"NOT":Ee.Count()>0&&fe.Enqueue(Ee.Pop()),Me.Count()>0&&fe.Enqueue(Me.Pop()),Me.Push(ot);break;case"KWRDIF2":ot.tokenName="KWRDIF",fe.Enqueue(ot);break;default:throw"Unknown Logical Operator : "+je+"!"}break;case T.COMPOP:switch(ot.tokenValue.toString()){case"<":case"<>":case"<=":case">":case">=":case"=":U.Count()>0&&(Re=U.Peek()).tknClass==T.MATHOP&&fe.Enqueue(U.Pop()),Ee.Push(ot)}break;case T.GROUP:switch(ot.tokenValue.toString()){case"(":ct.push(1),U.Push(ot);break;case")":if(!(U.Count()>0))throw"Unbalanced parenthesis!";for(Re=U.Peek();"("!=Re.tokenValue.toString();){if(fe.Enqueue(U.Pop()),!(U.Count()>0))throw"Unbalanced parenthesis!";Re=U.Peek()}U.Pop();var w=0;if(ct.length>0&&(w=ct[ct.length-1],ct.splice(ct.length-1,1)),U.Count()>0&&(Re=U.Peek()).tknClass==T.FUNC){null!=Re.tokenValue&&("CONCAT"==Re.tokenValue.toString()||"MCONCAT"==Re.tokenValue.toString())&&(Re.OpCnt=w),fe.Enqueue(U.Pop()),N(Re.tokenName.toString())&&fe.Enqueue(U.Pop());continue}Ee.Count()>0&&fe.Enqueue(Ee.Pop()),Me.Count()>0&&fe.Enqueue(Me.Pop()),U.Count()>0&&(ee((Re=U.Peek()).tokenName.toString())&&fe.Enqueue(U.Pop()),N(Re.tokenName.toString())&&fe.Enqueue(U.Pop()))}}for(;U.Count()>0;)Re=U.Pop(),fe.Enqueue(Re);for(Pe=0;Pe<fe.Count();Pe++);}(F=function he(Z){var U=[];U.tokenName="",U.tokenId=99999,U.tknClass=T.OPERATOR,U.tknType=R.UNARY,U.tokenValue="";var Ee=[];Ee.tokenName="",Ee.tokenId=99999,Ee.tknClass=T.OPERATOR,Ee.tknType=R.UNARY,Ee.tokenValue="";var Me=[];Me.tokenName="",Me.tokenId=99999,Me.tknClass=T.OPERATOR,Me.tknType=R.UNARY,Me.tokenValue="";for(var Re=0;Re<Z.length;)if(U=Z[Re],Re++,"-"==U.tokenValue){if(Ee.tknClass!=T.OPERAND){if(!(Re<Z.length&&"CLOSEP"!=Ee.tokenName))return Z;if(Me=Z[Re],Re++,Me.tknClass==T.OPERAND){if(Z.splice(Re-2,1),Re--,Me.tknClass==R.STATIC){if("INTEGER"!=Me.tokenName&&"DOUBLE"!=Me.tokenName)throw"Improper use of - operator";Me.tokenValue=-1*parseFloat(Me.tokenValue.toString().replace(/,/g,""))}else Me.tokenValue="-"+Me.tokenValue;Ee=Me}}}else Ee=U;return Z}(F=function se(Z,fe){var U,Ee,Xe,Me=Z;F=fe;for(var Re=Me.length,st=-1;st<Re;){if(-1==(U=Ke(Me)))return F;switch(Ee=U){case"+":Te(p.ADD,T.MATHOP,R.BINARY,"+");break;case"-":Te(p.SUB,T.MATHOP,R.BINARY,"-");break;case"*":Te(p.MUL,T.MATHOP,R.BINARY,"*");break;case"/":Te(p.DIV,T.MATHOP,R.BINARY,"/");break;case"^":Te(p.POW,T.MATHOP,R.BINARY,"^");break;case"|":Te(p.ABS,T.MATHOP,R.UNARY,"|");break;case"@":Te(p.QUOT,T.MATHOP,R.BINARY,"@");break;case",":Te(p.COMA,T.OPERATOR,R.BINARY,",");break;case"%":Te(p.PCT,T.FINANOP,R.BINARY,"%");break;case"!":Te(p.NOT,T.LOGICOP,R.UNARY,"!");break;case"?":Te(p.KWRDIF2,T.LOGICOP,R.KEYWORD,"?");break;case":":Te(p.KWRDELSE,T.LOGICOP,R.KEYWORD,":");break;case"(":Te(p.OPENP,T.GROUP,R.BINARY,"(");break;case")":Te(p.CLOSEP,T.GROUP,R.BINARY,")");break;case"=":Te(p.EQL,T.COMPOP,R.BINARY,"=");break;case" ":case"\n":case"\t":break;case'"':var je="";if(-1==(U=Ke(Me)))throw"Invalid formatted string detected";if('"'===(Ee=U)){Te(p.STRING,T.OPERAND,R.STATIC,"");break}for(;st<Re&&'"'!=Ee&&(je+=Ee,Ee=U=Ke(Me),-1!=U););if(st>=Re&&'"'!=Ee)throw"Invalid formatted string detected";Te(p.STRING,T.OPERAND,R.STATIC,je);break;case"<":if(Ee=U=Ke(Me),-1===U)return Te(p.LES,T.COMPOP,R.BINARY,"<"),F;if(">"===Ee){Te(p.NTE,T.COMPOP,R.BINARY,"<>");break}if("="===Ee){Te(p.LTE,T.COMPOP,R.BINARY,"<=");break}Te(p.LES,T.COMPOP,R.BINARY,"<"),xe();break;case">":if(Ee=U=Ke(Me),-1===U)return Te(p.GRT,T.COMPOP,R.BINARY,">"),F;if("="===Ee){Te(p.GTE,T.COMPOP,R.BINARY,">=");break}Te(p.GRT,T.COMPOP,R.BINARY,">"),xe();break;default:if(isNaN(Ee)){for(je="";st<Re&&(Xe=void 0,Xe=!1,"+-*/^%|!=,()<>@? \t\n".indexOf(Ee)>-1&&(Xe=!0),!Xe)&&(je+=Ee,Ee=U=Ke(Me),-1!=U););if(je.trim(),Ve(je)){var w=!1,Le=_e(je);(Le===p.KWRDIF||Le===p.KWRDELSE||Le===p.KWRDELSEIF||Le===p.AND||Le===p.OR)&&(Te(Le,T.LOGICOP,R.KEYWORD,je),w=!0),Le===p.KWRDTHEN&&(w=!0),Le===p.CONCAT||Le===p.ABS||Le===p.MOD||Le===p.TRUNC||Le===p.ROUND||Le===p.FLOOR||Le===p.CEIL||Le===p.DATEDIFF||Le==p.DATEADD||Le===p.SUBSTR||Le===p.UPPER||Le===p.LOWER||Le===p.DATENAME||Le===p.LENGTH||Le===p.MCONCAT||Le===p.REPLACE||Le===p.INDEXOF||Le===p.ISNUM||Le==p.FORMAT||Le==p.REGEX||Le==p.TRIM||Le==p.NEWDATE?(Te(Le,T.FUNC,R.KEYWORD,Le.toString()),w=!0):w||Te(p.APPDEF,T.OPERAND,R.REFERENCE,Le.toString())}else Te(p.USERDEF,T.OPERAND,R.REFERENCE,je);if(-1===U)return F;xe();break}var ot=0;do{if(ot=10*parseInt(ot)+parseInt(Ee),Ee=U=Ke(Me),-1==U)break}while(st<Re&&!isNaN(parseInt(Ee)));if(-1==U)return Te(p.INTEGER,T.OPERAND,R.STATIC,ot),F;if("."==Ee){var Pe=0,we=1;if(Ee=U=Ke(Me),-1==U)return F;do{if(Pe+=Ee*(we/=10),Ee=U=Ke(Me),-1==U)break}while(st<Re&&!isNaN(parseInt(Ee)));if(Te(p.DOUBLE,T.OPERAND,R.STATIC,Pe=ot+Pe),-1==U)return F;xe()}else Te(p.INTEGER,T.OPERAND,R.STATIC,ot),xe()}}function Ke(Oe){return++st>=Oe.length?-1:Oe[st]}function xe(){st--}function Ve(Oe){var Xe=!1;return W.indexOf(Oe.toUpperCase())>=0&&(Xe=!0),Xe}function _e(Oe){switch(W.indexOf(Oe.toUpperCase())){case 0:return p.KWRDIF;case 1:return p.KWRDTHEN;case 2:return p.KWRDELSE;case 3:return p.AND;case 4:return p.OR;case 5:return p.CONCAT;case 6:return p.QTY;case 7:return p.RATE;case 8:return p.GROSS;case 9:return p.NET;case 10:return p.AVGRT;case 11:return p.LSTPRCHSRT;case 12:return p.LSTLNDGRT;case 13:return p.CONVQTY;case 14:return p.UNITS;case 15:return p.BASEQTY;case 16:return p.EXCHRT;case 17:return p.MOD;case 18:return p.ABS;case 19:return p.TRUNC;case 20:return p.ROUND;case 21:return p.DATEDIFF;case 22:return p.SUBSTR;case 23:return p.UPPER;case 24:return p.LOWER;case 25:return p.DATENAME;case 26:return p.LENGTH;case 27:return p.MCONCAT;case 28:return p.DATEADD;case 29:return p.REPLACE;case 30:return p.KWRDELSEIF;case 31:return p.FLOOR;case 32:return p.CEIL;case 33:return p.INDEXOF;case 34:return p.ISNUM;case 35:return p.REGEX;case 36:return p.TRIM;case 37:return p.NEWDATE;case 38:return p.FORMAT;default:return p.NONE}}function Te(Oe,Xe,Ue,it){var Tt=Oe.toString(),bt=F.length+1,yt=[];yt.tokenName=Tt,yt.tokenId=bt,yt.tknClass=Xe,yt.tknType=Ue,yt.tokenValue=it,F.push(yt)}return null}(me,F)),v),x?m.J0.IsEmpty(v.GetArray().find(Z=>"REFERENCE"==Z.tknType).tokenValue)?"":v.GetArray().find(Z=>"REFERENCE"==Z.tknType).tokenValue:function ce(Z,fe){var Re,st,U=new j_stack,Ee=0,Me=0,je="",ct="",ot=!1,Pe=!1,we=!1;let w;var Le=[];Le.tokenName="",Le.tokenId=0,Le.tknClass=T.OPERAND,Le.tknType=R.STATIC,Le.tokenValue="";var Ke=[];Ke.fieldName="",Ke.fieldID=0,Ke.fieldType=0,Ke.fieldFormula="",Ke.fieldResult="",Ke.isFormulaEvaluated=!1,Ke.isFormulaValid=!1;var xe=[];xe.tokenName="",xe.tokenId=0,xe.tknClass=T.OPERAND,xe.tknType=R.STATIC,xe.tokenValue="";var ke=[];ke.tokenName="",ke.tokenId=0,ke.tknClass=T.OPERAND,ke.tknType=R.STATIC,ke.tokenValue="";var Ve=new Object,_e=fe.GetArray();if(null==_e)return 0;for(var Te=0;Te<_e.length;Te++){Le=_e[Te];var Oe=new Object;switch(Le.tknClass){case T.OPERAND:switch(Le.tknType){case R.STATIC:U.Push(Le);break;case R.REFERENCE:var Ue=Z,it=Le.tokenValue.toString(),Tt=1;if("-"===it.substring(0,1)&&(Tt=-1,it=it.substring(1)),"RATE"===it&&null!=Ue.Rate){var bt=(Ke=Ue.Rate).fieldResult;Tt<0&&(Ee=m.J0.DoubleTryParse(bt.toString().replace(/,/g,"")),bt=-1*Ee),Ve=Lt(Oe,Le.tokenName,Le.tokenId,Le.tknClass,Le.tknType,bt),U.Push(Ve)}else{if(null==Ue[it])throw"Identifier not found in dictionary!";bt=(Ke=Ue[it]).fieldResult,Tt<0&&(Ee=m.J0.DoubleTryParse(bt.toString().replace(/,/g,"")),bt=0===Ee?1*Ee:-1*Ee),Ve=Lt(Oe,Le.tokenName,Le.tokenId,Le.tknClass,Le.tknType,bt),U.Push(Ve)}}break;case T.FINANOP:var yt=Le.tokenValue.toString();if(!(U.Count()>=1))throw"Invalid # of operands to % Financial Operator!";if("%"!==(xe=U.Pop(),yt))throw"Invalid Financial Operator!";Ee=parseFloat(xe.tokenValue.toString().replace(/,/g,"")),Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,parseFloat(""+Ee/100)),U.Push(Ve);break;case T.MATHOP:var vt=Le.tokenValue;if(U.Count()>=2)switch(ke=U.Pop(),xe=U.Pop(),Me=null!=ke.tokenValue&&""!=ke.tokenValue?parseFloat(ke.tokenValue.toString().replace(/,/g,"")):0,Ee=null!=xe.tokenValue&&""!=xe.tokenValue?parseFloat(xe.tokenValue.toString().replace(/,/g,"")):0,vt){case"+":Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,parseFloat((Ee+Me).toString())),U.Push(Ve);break;case"-":Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,parseFloat((Ee-Me).toString())),U.Push(Ve);break;case"*":Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,parseFloat((Ee*Me).toString())),U.Push(Ve);break;case"/":Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,0===Me?0:parseFloat((Ee/Me).toString())),U.Push(Ve);break;case"^":Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,Math.pow(Ee,Me)),U.Push(Ve);break;case"@":Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,0===Me?0:Math[Ee/Me>0?"floor":"ceil"](Ee/Me)),U.Push(Ve)}break;case T.COMPOP:var Et=Le.tokenValue.toString(),Ft=!1;if(U.Count()>=2){ke=U.Pop();var Mt=(xe=U.Pop()).tokenValue.toString(),qt=ke.tokenValue.toString();switch(Et){case"<":case"<=":case">":case">=":m.J0.isDateOrNum(Mt)||m.J0.isDateOrNum(qt)?(Re=m.J0.isValidDate(Mt)?m.J0.ParseDate(Mt):new Date(1900,1,1),st=m.J0.isValidDate(qt)?m.J0.ParseDate(qt):new Date(1900,1,1),"<"==Et&&(Ft=Re<st),"<="==Et&&(Ft=Re<=st),">"==Et&&(Ft=Re>st),">="==Et&&(Ft=Re>=st),Ve=Lt(Oe,"BOOL",99999,T.OPERAND,R.STATIC,Ft.toString()),U.Push(Ve)):(Me=parseFloat(ke.tokenValue.toString().replace(/,/g,"")),Ee=parseFloat(xe.tokenValue.toString().replace(/,/g,"")),"<"===Et&&(Ft=Ee<Me),"<="===Et&&(Ft=Ee<=Me),">"===Et&&(Ft=Ee>Me),">="===Et&&(Ft=Ee>=Me),Ve=Lt(Oe,"BOOL",99999,T.OPERAND,R.STATIC,Ft.toString()),U.Push(Ve));break;case"<>":case"=":m.J0.isDateOrNum(Mt)||m.J0.isDateOrNum(qt)?(Re=m.J0.isValidDate(Mt)?m.J0.ParseDate(Mt):new Date(1900,1,1),st=m.J0.isValidDate(qt)?m.J0.ParseDate(qt):new Date(1900,1,1),Ft="<>"==Et?Re.getTime()!=st.getTime():Re.getTime()==st.getTime(),Ve=new q,Ve=Lt(Oe,"BOOL",99999,T.OPERAND,R.STATIC,Ft.toString()),U.Push(Ve)):"STRING"!==ke.tokenName&&m.J0.DoubleBool(qt.toString())?(m.J0.IsEmpty(ke.tokenValue)||(Me=parseFloat(ke.tokenValue.toString().replace(/,/g,""))),m.J0.IsEmpty(xe.tokenValue)||(Ee=parseFloat(xe.tokenValue.toString().replace(/,/g,""))),Ve=Lt(Oe,"BOOL",99999,T.OPERAND,R.STATIC,(Ft="<>"===Et?Ee!=Me:Ee==Me).toString()),U.Push(Ve)):(ct=ke.tokenValue.toString(),je=!1===xe.tokenValue?"False":!0===xe.tokenValue?"True":xe.tokenValue.toString(),Ve=Lt(Oe,"BOOL",99999,T.OPERAND,R.STATIC,(Ft="<>"===Et?je!=ct:je==ct).toString()),U.Push(Ve));break;default:throw"Unknown Comparative Operator : "+Et+"!"}}break;case T.FUNC:var Bt=Le.tokenValue.toString().trim();switch(Bt){case"ABS":if(!(U.Count()>=1))throw"Invalid # of parameters to function, ABS!";xe=U.Pop(),(Ee=parseFloat(xe.tokenValue.toString().replace(/,/g,"")))<0&&(Ee=-Ee),Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,Ee),U.Push(Ve);break;case"UPPER":if(!(U.Count()>=1))throw"Invalid # of parameters to function, UPPER!";je=(xe=U.Pop()).tokenValue.toString().toUpperCase(),Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,je.toString()),U.Push(Ve);break;case"LOWER":if(!(U.Count()>=1))throw"Invalid # of parameters to function, LOWER!";je=(xe=U.Pop()).tokenValue.toString().toLowerCase(),Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,je.toString()),U.Push(Ve);break;case"CONCAT":case"MCONCAT":if(!(U.Count()>=1))throw"Invalid # of parameters to function, MCONCAT!";if(je="",Le.OpCnt>0)for(var $t=0;$t<Le.OpCnt&&0!=U.Count()&&(ke=U.Peek()).tknType!=R.KEYWORD;$t++)U.Pop(),je=(ct=ke.tokenValue.toString())+je;else for(;U.Count()>0&&(ke=U.Peek()).tknType!=R.KEYWORD;)U.Pop(),je=(ct=ke.tokenValue.toString())+je;Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,je),U.Push(Ve);break;case"MOD":if(!(U.Count()>=2))throw"Invalid # of parameters to function, MOD!";ke=U.Pop(),xe=U.Pop(),Me=parseFloat(ke.tokenValue.toString().replace(/,/g,"")),Ee=parseFloat(xe.tokenValue.toString().replace(/,/g,"")),Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,Ee%Me),U.Push(Ve);break;case"SUBSTR":if(!(U.Count()>=2))throw"Invalid # of parameters to function, SUBSTR!";var fn="";if(U.Count()>=3){Wt=U.Pop(),ke=U.Pop(),xe=U.Pop();var yn=parseInt(Wt.tokenValue.toString().replace(/,/g,"")),ai=parseInt(ke.tokenValue.toString().replace(/,/g,""));yn>(je=xe.tokenValue.toString()).length-ai&&(yn=je.length-ai),fn=ai<0?je:je.substring(ai,yn)}else U.Count()>=2&&(ke=U.Pop(),xe=U.Pop(),ai=parseInt(ke.tokenValue.toString().replace(/,/g,"")),je=xe.tokenValue.toString(),fn=ai<=0?je:je.substring(ai,yn));Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,fn.toString()),U.Push(Ve);break;case"REPLACE":if(3!=U.Count())throw"Invalid # of parameters to function, SUBSTR!";Wt=U.Pop(),ke=U.Pop(),je=(xe=U.Pop()).tokenValue.toString(),Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,je.replace(ke.tokenValue.toString(),Wt.tokenValue.toString())),U.Push(Ve);break;case"INDEXOF":if(2!=U.Count())throw"Invalid # of parameters to function, SUBSTR!";ke=U.Pop(),je=(xe=U.Pop()).tokenValue.toString(),Ve=Lt(Oe,"INTEGER",99999,T.OPERAND,R.STATIC,je.indexOf(ke.tokenValue.toString())),U.Push(Ve);break;case"TRUNC":if(!(U.Count()>=2))throw"Invalid # of parameters to function, TRUNC!";var Qt;ke=U.Pop(),xe=U.Pop(),Me=parseFloat(ke.tokenValue.toString().replace(/,/g,"")),je=xe.tokenValue.toString(),Qt=(Qt=parseFloat(je.toString().replace(/,/g,"")))<0&&Qt>-1?-1*parseFloat(parseInt(Qt).toString()+"."+Qt.toString().substring(Qt.toString().indexOf(".")+1).substring(0,Me)):parseFloat(parseInt(Qt).toString()+"."+Qt.toString().substring(Qt.toString().indexOf(".")+1).substring(0,Me)),Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,Qt),U.Push(Ve);break;case"ROUND":if(!(U.Count()>=2))throw"Invalid # of parameters to function, ROUND!";{let Yt="",ni="",Jt=1;ke=U.Pop(),xe=U.Pop(),ct=ke.tokenValue.toString(),je=xe.tokenValue.toString(),Me=m.J0.Double(ct.toString().replace(/,/g,"")),Ee=m.J0.Double(je.toString().replace(/,/g,"")),Yt=ct,ni=je;let mn=Me,Nn=Ee+Me/2,_i=Nn-Nn%mn,Vi=ni.indexOf(".");if(-1==Vi)mn<1?(Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,m.J0.Double(Ee)),U.Push(Ve)):(Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,m.J0.Double(_i)),U.Push(Ve));else{Vi++;let ci=ni.substr(Vi);ci.length>5&&(ci=ci.substr(0,5));let dn=Yt.indexOf(".");if(dn>0){let Ps;if(Yt=Yt.substr(dn+1),Yt.length>5&&(Yt=Yt.substr(0,5)),Nn=m.J0.Double(ci),mn=m.J0.Double(Yt),ci.length<Yt.length)Ps=m.J0.Double(ni);else{Jt*=Math.pow(10,m.J0.Double(ci.length-Yt.length)),mn*=Jt;let io=Nn%mn;Nn+=mn/2,io=Nn%mn,Nn-=io,Ps=m.J0.Double(ni.substr(0,Vi)),Jt=Math.pow(10,ci.length),Ps+=m.J0.Double(Nn)/Jt}Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,m.J0.Double(Ps)),U.Push(Ve)}else Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,m.J0.Double(_i)),U.Push(Ve)}}break;case"FLOOR":U.Count()>=1&&(je=(xe=U.Pop()).tokenValue.toString(),Ee=parseFloat(je.toString().replace(/,/g,"")),Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,Math.floor(Ee)),U.Push(Ve));break;case"CEIL":U.Count()>=1&&(je=(xe=U.Pop()).tokenValue.toString(),Ee=parseFloat(je.toString().replace(/,/g,"")),Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,Math.ceil(Ee)),U.Push(Ve));break;case"ISNUM":if(1==U.Count()){var gi=gi(je=(xe=U.Pop()).tokenValue.toString())?1:0;Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,gi),U.Push(Ve)}break;case"FORMAT":if(4==U.Count()){let Yt=new G.bT,ni=(xe=U.Pop()).tokenValue.toString().split("~");xe=U.Pop(),L=-1,xe.tokenValue.toString().split("~").forEach(Jt=>{L++,!Yt.ContainsKey(Jt)&&Yt.Add(Jt,L<ni.length?ni[L]:Jt)}),xe=U.Pop(),I=m.J0.Int(xe.tokenValue),xe=U.Pop(),Ee=m.J0.Int(xe.tokenValue),Ee=m.J0.Int(xe.tokenValue),je="",Yt.ContainsKey("B")&&(Ee>=1e9||1==Yt.length)?(je=Yt.B,Ee/=1e9):Yt.ContainsKey("C")&&(Ee>=1e7||!(Yt.ContainsKey("M")||Yt.ContainsKey("L")||Yt.ContainsKey("K")))?(je=Yt.C,Ee/=1e7):Yt.ContainsKey("M")&&(Ee>=1e6||!Yt.ContainsKey("L")&&!Yt.ContainsKey("K"))?(je=Yt.M,Ee/=1e6):Yt.ContainsKey("L")&&(Ee>=1e5||!Yt.ContainsKey("K"))?(je=Yt.L,Ee/=1e5):Yt.ContainsKey("K")&&(je=Yt.K,Ee/=1e3),Me=Ee-Math.round(Ee),Ee=Math.round(Ee),I>0&&0!=Me?(Ee+=Math.round(Me*Math.pow(10,I))/Math.pow(10,I),ct="N"+I.toString()):ct="N0",je=0!=Ee?Ee.ToString(ct).toString()+" "+je:"0",Ve=new q,Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,je),U.Push(Ve)}break;case"REGEX":if(2!=U.Count())throw"Invalid # of parameters to function, REGEX";xe=U.Pop(),ke=U.Pop(),je=xe.getTokenValue.toString(),ct=ke.getTokenValue.toString(),Ve=Lt(Oe,"INTEGER",99999,T.OPERAND,R.STATIC,je.match(ct)?1:0),U.Push(Ve);break;case"TRIM":if(2!=U.Count())throw new Error("Invalid # of parameters to function, TRIM");{let Yt;xe=U.Pop(),ke=U.Pop(),je=xe.getTokenValue.toString(),ct=ke.getTokenValue.toString(),-1!=je.indexOf("\r\n")?je=je.replace("\r\n","\n"):-1!=je.indexOf("\n")&&(je=je.replace("\n","\n")),Yt=je.split(""),Ve=Lt(Oe,"INTEGER",99999,T.OPERAND,R.STATIC,ct),U.Push(Ve)}break;case"NEWDATE":if(!(U.Count()>1))throw new Error("Invalid # of parameters to function, CEIL!");null!==(xe=U.Pop()).getTokenValue.toString()?xe.getTokenValue.toString().length>0&&(isNaN(xe.getTokenValue.toString())||(L=parseInt(xe.getTokenValue.toString()),I=L,ie=L)):(L=0,I=0,ie=0),Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,new Date(ie,I,L)),U.Push(Ve);break;case"DATEDIFF":if(!(U.Count()>=3))throw"Invalid # of parameters to function, DATEDIFF!";{var Ge;Wt=U.Pop(),ke=U.Pop(),Ge=0,We=(xe=U.Pop()).tokenValue.toString().toUpperCase();let Jt=new Date("01-01-0001"),mn=new Date,Nn=new Date;try{if(""==ke.tokenValue||""==Wt.tokenValue){Ve=new q,Ve=Lt(Oe,"INTEGER",99999,T.OPERAND,R.STATIC,""),U.Push(Ve);break}try{mn=m.J0.parseFlexibleDate(m.J0.String(ke.tokenValue)),Nn=m.J0.parseFlexibleDate(m.J0.String(Wt.tokenValue))}catch{Ve=new q,Ve=Lt(Oe,"INTEGER",99999,T.OPERAND,R.STATIC,""),U.Push(Ve);break}}catch{Ve=Lt(Oe,"INTEGER",99999,T.OPERAND,R.STATIC,""),U.Push(Ve);break}switch(Ge=0,m.J0.String(We).toUpperCase()){case"Y":if(Ge=0,mn>=Nn){for(Jt=new Date(Nn),Jt.setFullYear(Nn.getFullYear()+1);Jt<=mn;)Ge++,Jt.setFullYear(Jt.getFullYear()+1);1==m.J0.GetTimeSpan(Jt,mn)&&Ge++}else for(Jt=new Date(mn),Jt.setFullYear(mn.getFullYear()+1);Jt<=Nn;)Ge--,Jt.setFullYear(Jt.getFullYear()+1);break;case"M":if(Ge=0,mn>=Nn){for(Jt=new Date(Nn),Jt=m.J0.addMonths(Nn,1);Jt<=mn;)Ge++,Jt=m.J0.addMonths(Jt,1);1==m.J0.GetTimeSpan(Jt,mn)&&Ge++}else for(Jt=new Date(mn),Jt=m.J0.addMonths(mn,1);Jt<=Nn;)Ge--,Jt=m.J0.addMonths(Jt,1);break;case"D":Ge=m.J0.GetTimeSpan(mn,Nn);break;case"T":let wi=mn.Subtract(Nn),_i=wi.TotalHours.PrefixZero(2)+":"+wi.Minutes.PrefixZero(2)+":"+wi.Seconds.PrefixZero(2);return Ve=new q,Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,_i),U.Push(Ve),U.Pop();case"HH":return Ve=new q,Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,mn.Subtract(Nn).TotalHours.toString()),U.Push(Ve),U.Pop();case"HHM":Ve=new q;let Vi=mn.Subtract(Nn).TotalHours,ci=Math.floor(Math.abs(Vi));return ci+=60*(Math.abs(Vi)-ci)/100,Vi<0&&(ci=-ci),Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,ci.toString()),U.Push(Ve),U.Pop();case"MM":Ge=mn.Subtract(Nn).TotalMinutes;break;case"SS":Ge=mn.Subtract(Nn).TotalSeconds;break;default:throw"Invalid Interval specified for DateDiff. Valid values are Y, M, D!"}Ve=Lt(Oe,"INTEGER",99999,T.OPERAND,R.STATIC,parseFloat(Ge.toString().replace(/,/g,""))),U.Push(Ve)}break;case"TIMEADD":if(U.length>=2){let Yt,ni,Jt=0;for(;U.length>0;)xe=U.Pop(),Yt=parseFloat(xe.getTokenValue().toString()),0!=Yt&&(ni=Yt.ToString("0.00").split("."),Jt+=60*parseInt(ni[0]),ni.length>1&&(Yt>0?Jt+=parseInt(ni[1]):Jt-=parseInt(ni[1])));Yt=Jt/60+parseFloat("0."+(Jt%60).ToString("00")),Ve=new q,Ve=Lt(Oe,"DOUBLE",99999,T.OPERAND,R.STATIC,Yt.ToString("0.00")),U.Push(Ve)}break;case"DATEADD":if(!(U.Count()>=3))throw"Invalid # of parameters to function, DATEADD!";{var dt,We,Wt=[];Wt=U.Pop(),ke=U.Pop(),We=(xe=U.Pop()).tokenValue.toString().toUpperCase();let Jt=new Date,mn=new Date;if(Jt=m.J0.ParseDate(ke.tokenValue),dt=parseInt(Wt.tokenValue.toString().replace(/,/g,"")),isNaN(dt)){Ve=Lt(Oe,"DATETIME",99999,T.OPERAND,R.STATIC,""),U.Push(Ve);break}switch(We){case"Y":mn=new Date(new Date(Jt)).AddYears(dt);break;case"M":mn=new Date(new Date(Jt)).AddMonths(dt);break;case"D":mn=new Date(new Date(Jt)).AddDays(dt);break;case"MM":mn=new Date(new Date(Jt).AddMinutes(dt));break;default:throw new Error("Invalid Interval specified for DATEADD. Valid values are Y, M, D!")}mn=m.J0.ParseDate(mn),Ve=Lt(Oe,"DATETIME",99999,T.OPERAND,R.STATIC,mn),U.Push(Ve)}break;case"DATENAME":ke=U.Pop();var xt=(xe=U.Pop()).tokenValue.toString();if(w=Date.Today(),!ke||m.J0.IsEmpty(ke.tokenValue)){Lt(Ve,"STRING",99999,T.OPERAND,R.STATIC,""),U.Push(Ve);break}try{w=m.J0.ParseDate(ke.tokenValue)}catch{Lt(Ve,"STRING",99999,T.OPERAND,R.STATIC,"ERR"),U.Push(Ve);break}if("Invalid Date"==w){Lt(Ve,"STRING",99999,T.OPERAND,R.STATIC,"ERR"),U.Push(Ve);break}switch(xt.toUpperCase()){case"QUARTER":case"QUARTERLY":var jt=0;w.iMonth()>=A.d.SessionManager.AccountingFromMonth?(jt=(w.iMonth()-A.d.SessionManager.AccountingFromMonth)/3,jt++):w.iMonth()<A.d.SessionManager.AccountingFromMonth&&(jt=(12+w.iMonth()-A.d.SessionManager.AccountingFromMonth)/3,jt++),Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,"Q"+jt+" "+w.getFullYear());break;case"HALFYEAR":case"HALFYEARLY":var En=0;w.iMonth()>=A.d.SessionManager.AccountingFromMonth?(En=(w.iMonth()-A.d.SessionManager.AccountingFromMonth)/6,En++):w.iMonth()<A.d.SessionManager.AccountingFromMonth&&(En=(12+w.iMonth()-A.d.SessionManager.AccountingFromMonth)/6,En++),Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,"H"+En+" "+w.getFullYear());break;case"WEEK":case"WEEKLY":var Pt=0,nn=new Date(w.getFullYear(),w.getMonth(),1).getDay();Pt=(w.getDate()+nn)/7,(w.getDate()+nn)%7!=0&&Pt++,Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,"W"+Pt+" "+w.ToString("MMM"));break;case"WEEKOFYEAR":break;case"DAYSINMONTH":w=new Date,Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,w.DaysInMonth());break;case"FIRSTOFCURRENTMONTH":w=Date.Today(),Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,new Date(w.getFullYear(),w.getMonth(),1));break;case"FIRSTOFNEXTMONTH":w=Date.Today(),Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,new Date(w.getFullYear(),w.getMonth(),1).AddMonths(1));break;case"DDDD":Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,w.getDayName());break;case"DDD":Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,new Intl.DateTimeFormat("en-US",{weekday:"short"}).format(w));break;default:Ve=Lt(Oe,"STRING",99999,T.OPERAND,R.STATIC,w.ToString(xt))}U.Push(Ve);break;case"LENGTH":if(!(U.Count()>=1))throw"Invalid # of parameters to function, DATEDIFF!";var an=(xe=U.Pop()).tokenValue.toString();Ve=Lt(Oe,"INTEGER",99999,T.OPERAND,R.STATIC,an.length),U.Push(Ve);break;default:throw"Unknown Function : "+Bt+"!"}break;case T.LOGICOP:var di=Le.tokenName.trim();switch(di){case"KWRDIF":U.Push(Le);break;case"KWRDELSEIF":U.Push(Le),we=!0;break;case"KWRDELSE":var Li,Ai;if(we){if(!(U.Count()>4))throw"Invalid If..Else syntax!";var Vt,Ws;Vt=U.Pop();for(var $s=!1;U.Count()>0;)if(Ws=U.Pop(),U.Pop(),"TRUE"===U.Pop().tokenValue.toString().toUpperCase()){U.Clear(),U.Push(Ws),$s=!0;break}$s||(U.Clear(),U.Push(Vt))}else if(U.Count()>=4){var ei;if(ei=U.Pop(),Wt=U.Pop(),ke=U.Pop(),xe=U.Pop(),Ai=ke.tokenName.toString().trim(),Li=xe.tokenValue.toString(),"KWRDIF"!==Ai.toUpperCase())throw"Invalid If..Else syntax!";if("TRUE"===Li.toUpperCase())U.Push(Wt);else{if("FALSE"!==Li.toUpperCase())throw"Invalid If..Else syntax!";U.Push(ei)}}break;case"NOT":if(!(U.Count()>=1))throw"Invalid use of ! (Not) operator!";if("TRUE"===(Li=(xe=U.Pop()).tokenValue.toString().trim()).toUpperCase())Ve=Lt(Oe,"BOOL",99999,T.OPERAND,R.STATIC,"FALSE"),U.Push(Ve);else{if("FALSE"!==Li.trim().toUpperCase())throw"Invalid operand used with ! (Not) operator!";Ve=Lt(Oe,"BOOL",99999,T.OPERAND,R.STATIC,"TRUE"),U.Push(Ve)}break;case"AND":case"OR":if(!(U.Count()>=2))throw"Invalid # of operands used with And (&&) operator!";ke=U.Pop(),xe=U.Pop(),ct=ke.tokenValue.toString(),je=xe.tokenValue.toString();var xs=ct.toUpperCase().trim(),Rn=je.toUpperCase().trim();if("TRUE"===xs)Pe=!0;else{if("FALSE"!==xs)throw"Invalid operand used with And (&&) operator!";Pe=!1}if("TRUE"===Rn)ot=!0;else{if("FALSE"!==Rn)throw"Invalid operand used with And (&&) operator!";ot=!1}Ve=Lt(Oe,"BOOL",99999,T.OPERAND,R.STATIC,("AND"===di?ot&&Pe:ot||Pe).toString().trim().toUpperCase()),U.Push(Ve)}}}if(1==U.Count())return U.Pop();throw"Invalid number of arguments in the formula!";function Lt(Yt,ni,Jt,mn,Nn,wi){return Yt.tokenName=ni,Yt.tokenId=Jt,Yt.tknClass=mn,Yt.tknType=Nn,Yt.tokenValue=wi,Yt}}(D,v).tokenValue;function z(Z){var fe=!1;switch(Z.tknClass){case T.MATHOP:case T.COMPOP:fe=!0;break;default:fe=!1}return fe}function N(Z){var fe=!1;return"!"==Z&&(fe=!0),fe}function ee(Z){var fe=!1;return-1!=le.indexOf(Z.toUpperCase())&&(fe=!0),fe}}static#e=this.\u0275fac=function(D){return new(D||O)};static#t=this.\u0275prov=J.jDH({token:O,factory:O.\u0275fac,providedIn:"root"})}return O})();class oe{constructor(B="",me=null){this.fieldName="",this.fieldName=B,this.fieldResult=me??""}getFieldResult(){return this.fieldResult}getFieldName(){return this.fieldName}setFieldValue(B){this.fieldResult=B??""}setFieldDetails(B,me,D,x,p,W,T){this.fieldName=B,this.fieldResult=p??""}Clone(){let B=new oe;return B.fieldName=this.fieldName,B.fieldResult=this.fieldResult,B}}var X=function(O){return O[O.ADD=0]="ADD",O[O.SUB=1]="SUB",O[O.MUL=2]="MUL",O[O.DIV=3]="DIV",O[O.POW=4]="POW",O[O.PCT=5]="PCT",O[O.QUOT=6]="QUOT",O[O.ABS=7]="ABS",O[O.NOT=8]="NOT",O[O.OPENP=9]="OPENP",O[O.CLOSEP=10]="CLOSEP",O[O.DQT=11]="DQT",O[O.AND=12]="AND",O[O.OR=13]="OR",O[O.COMA=14]="COMA",O[O.EQL=15]="EQL",O[O.GRT=16]="GRT",O[O.LES=17]="LES",O[O.GTE=18]="GTE",O[O.LTE=19]="LTE",O[O.NTE=20]="NTE",O[O.KWRDTHEN=21]="KWRDTHEN",O[O.KWRDIF=22]="KWRDIF",O[O.KWRDIF2=23]="KWRDIF2",O[O.KWRDELSE=24]="KWRDELSE",O[O.IDENTIFIER=25]="IDENTIFIER",O[O.INTEGER=26]="INTEGER",O[O.DOUBLE=27]="DOUBLE",O[O.CONCAT=28]="CONCAT",O[O.MOD=29]="MOD",O[O.TRUNC=30]="TRUNC",O[O.ROUND=31]="ROUND",O[O.DATEDIFF=32]="DATEDIFF",O[O.NONE=33]="NONE",O[O.QTY=34]="QTY",O[O.RATE=35]="RATE",O[O.GROSS=36]="GROSS",O[O.NET=37]="NET",O[O.AVGRT=38]="AVGRT",O[O.LSTPRCHSRT=39]="LSTPRCHSRT",O[O.LSTLNDGRT=40]="LSTLNDGRT",O[O.CONVQTY=41]="CONVQTY",O[O.UNITS=42]="UNITS",O[O.BASEQTY=43]="BASEQTY",O[O.EXCHRT=44]="EXCHRT",O[O.STRING=45]="STRING",O[O.USERDEF=46]="USERDEF",O[O.APPDEF=47]="APPDEF",O[O.SUBSTR=48]="SUBSTR",O[O.UPPER=49]="UPPER",O[O.LOWER=50]="LOWER",O[O.DATENAME=51]="DATENAME",O[O.LENGTH=52]="LENGTH",O[O.MCONCAT=53]="MCONCAT",O[O.DATEADD=54]="DATEADD",O[O.REPLACE=55]="REPLACE",O[O.KWRDELSEIF=56]="KWRDELSEIF",O[O.FLOOR=57]="FLOOR",O[O.CEIL=58]="CEIL",O[O.INDEXOF=59]="INDEXOF",O[O.ISNUM=60]="ISNUM",O[O.REGEX=61]="REGEX",O[O.TRIM=62]="TRIM",O[O.NEWDATE=63]="NEWDATE",O[O.FORMAT=64]="FORMAT",O}(X||{}),k=function(O){return O[O.OPERAND=0]="OPERAND",O[O.OPERATOR=1]="OPERATOR",O[O.USERDEF=2]="USERDEF",O[O.MATHOP=3]="MATHOP",O[O.LOGICOP=4]="LOGICOP",O[O.COMPOP=5]="COMPOP",O[O.FINANOP=6]="FINANOP",O[O.FUNC=7]="FUNC",O[O.GROUP=8]="GROUP",O}(k||{}),H=function(O){return O[O.REFERENCE=0]="REFERENCE",O[O.UNARY=1]="UNARY",O[O.BINARY=2]="BINARY",O[O.TERTIARY=3]="TERTIARY",O[O.STATIC=4]="STATIC",O[O.KEYWORD=5]="KEYWORD",O}(H||{});class q{constructor(B="",me=0,D=k.OPERAND,x=H.STATIC,p=""){this.tokenId=0,this.OpCnt=0,this.tokenName=B,this.tokenId=me,this.tknClass=D,this.tknType=x,this.tokenValue=p}SetAll(B,me,D,x,p){this.tokenName=B,this.tokenId=me,this.tknClass=D,this.tknType=x,this.tokenValue=p}getTokenClass(){return this.tknClass}getTokenType(){return this.tknType}getTokenValue(){return this.tokenValue}getTokenName(){return this.tokenName}getTokenID(){return this.tokenId}setTokenName(B){this.tokenName=B}setTokenValue(B){this.tokenValue=B}getFormattedString(){let B="";return B="Name : "+this.tokenName+"\t\t Class : "+this.tknClass.toString()+"\t\t Type : "+this.tknType.toString()+"\t\t Value : "+this.tokenValue,B}}class ye{constructor(){this.ThrowException=!0,this.formulaParser=new re}ParseFormula(B,me){let D="";try{return this.formulaParser.tokenizeString(B,me),D="Expression Parsing Successful!!!",D}catch(x){throw new Error("Unable to Parse Expression"+x.message)}}SetKeyWords(B){("REPORT"==B||"VPT"==B)&&(this.formulaParser.keywords=["IF","THEN","ELSE","AND","OR","CONCAT","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","NOFORM","MOD","ABS","TRUNC","ROUND","DATEDIFF","SUBSTR","UPPER","LOWER","DATENAME","LENGTH","MCONCAT","DATEADD","REPLACE","ELSEIF","FLOOR","CEIL","INDEXOF","ISNUM","REGEX","TRIM","NEWDATE","FORMAT","TIMEADD"])}}class re{constructor(){this.bufPointer=0,this.keywords=["IF","THEN","ELSE","AND","OR","CONCAT","QTY","RATE","GROSS","NET","AVGRATE","LASTPURCHASERATE","LASTLANDINGRATE","CONVERSIONQTY","UNITS","BASEQTY","EXCHANGERATE","MOD","ABS","TRUNC","ROUND","DATEDIFF","SUBSTR","UPPER","LOWER","DATENAME","LENGTH","MCONCAT","DATEADD","REPLACE","ELSEIF","FLOOR","CEIL","INDEXOF","ISNUM","REGEX","TRIM","NEWDATE","FORMAT","TIMEADD"],this.srcString="",this.bufPointer=-1}getNextChar(){return this.bufPointer++,this.bufPointer>=this.srcString.length?-1:this.srcString.charCodeAt(this.bufPointer)}putCharBack(){this.bufPointer--}isTokenKeyChar(B){let me=!1;return"+-*/^%|!=,()<>@? \t\n".indexOf(B)>-1&&(me=!0),me}isTokenKeyword(B){let me=!1;return this.keywords.Contains(B.toUpperCase())&&(me=!0),me}getTokenName(B){let me=-1,D=B.toUpperCase();for(let x=0;x<this.keywords.length;x++)if(this.keywords[x]==D){me=x;break}switch(me){case 0:return X.KWRDIF;case 1:return X.KWRDTHEN;case 2:return X.KWRDELSE;case 3:return X.AND;case 4:return X.OR;case 5:return X.CONCAT;case 6:return X.QTY;case 7:return X.RATE;case 8:return X.GROSS;case 9:return X.NET;case 10:return X.AVGRT;case 11:return X.LSTPRCHSRT;case 12:return X.LSTLNDGRT;case 13:return X.CONVQTY;case 14:return X.UNITS;case 15:return X.BASEQTY;case 16:return X.EXCHRT;case 17:return X.MOD;case 18:return X.ABS;case 19:return X.TRUNC;case 20:return X.ROUND;case 21:return X.DATEDIFF;case 22:return X.SUBSTR;case 23:return X.UPPER;case 24:return X.LOWER;case 25:return X.DATENAME;case 26:return X.LENGTH;case 27:return X.MCONCAT;case 28:return X.DATEADD;case 29:return X.REPLACE;case 30:return X.KWRDELSEIF;case 31:return X.FLOOR;case 32:return X.CEIL;case 33:return X.INDEXOF;case 34:return X.ISNUM;case 35:return X.REGEX;case 36:return X.TRIM;case 37:return X.NEWDATE;case 38:return X.FORMAT;default:return X.NONE}}addToken(B,me,D,x){let p=B.toString(),T=new q(p,this.symbolTable.length+1,me,D,x);this.symbolTable.push(T)}unaryMinusRefactor(B){let me="No unary minus detected",D=new q("",99999,k.OPERATOR,H.UNARY,""),x=new q("",99999,k.OPERATOR,H.UNARY,""),p=new q("",99999,k.OPERATOR,H.UNARY,"");if(B.length<2)return me="Not many token to check for unary mius",me;if(0==B.length)return me="Symbol Table Empty",me;let W=0;for(;W<B.length;)if(D=B[W],W++,D.getTokenValue().toString().Trim().Equals("-")){if(x.getTokenClass()!=k.OPERAND){if(!(W<B.length&&"CLOSEP"!=x.getTokenName()))return me;if(p=B[W],W++,p.getTokenClass()==k.OPERAND){if(B.RemoveAt(W-2),W--,p.getTokenType()==H.STATIC){let T=p.getTokenName().toString().Trim();if("INTEGER"!=T&&"DOUBLE"!=T)return me="Improper use of - operator!",me;p.setTokenValue(-1*parseFloat(p.getTokenValue().toString().Trim()))}else p.setTokenValue("-"+p.getTokenValue().toString().Trim());x=p}}}else x=D;return me}tokenizeString(B,me){let x,D=0,p=0;for(this.srcString=B,this.symbolTable=me,p=this.srcString.length,this.bufPointer=-1;this.bufPointer<p;){if(D=this.getNextChar(),x=String.fromCharCode(D),-1==D)return;switch(x){case"+":this.addToken("ADD",k.MATHOP,H.BINARY,"+");break;case"-":this.addToken("SUB",k.MATHOP,H.BINARY,"-");break;case"*":this.addToken(X.MUL,k.MATHOP,H.BINARY,"*");break;case"/":this.addToken(X.DIV,k.MATHOP,H.BINARY,"/");break;case"^":this.addToken(X.POW,k.MATHOP,H.BINARY,"^");break;case"|":this.addToken(X.ABS,k.MATHOP,H.UNARY,"|");break;case"@":this.addToken(X.QUOT,k.MATHOP,H.BINARY,"@");break;case",":this.addToken(X.COMA,k.OPERATOR,H.BINARY,",");break;case"%":this.addToken(X.PCT,k.FINANOP,H.BINARY,"%");break;case"!":this.addToken(X.NOT,k.LOGICOP,H.UNARY,"!");break;case"?":this.addToken(X.KWRDIF2,k.LOGICOP,H.KEYWORD,"?");break;case":":this.addToken(X.KWRDELSE,k.LOGICOP,H.KEYWORD,":");break;case"(":this.addToken(X.OPENP,k.GROUP,H.BINARY,"(");break;case")":this.addToken(X.CLOSEP,k.GROUP,H.BINARY,")");break;case"=":this.addToken(X.EQL,k.COMPOP,H.BINARY,"=");break;case" ":case"\n":case"\t":break;case'"':let W="",T=0;if(D=this.getNextChar(),x=String.fromCharCode(D),-1==D)throw new Error("Invalid formatted string detected!");if('"'==x){this.addToken(X.STRING,k.OPERAND,H.STATIC,"");break}for(;this.bufPointer<p&&'"'!=x&&(W+=x,T++,D=this.getNextChar(),x=String.fromCharCode(D),-1!=D););if(this.bufPointer>=p&&'"'!=x)throw new Error("Invalid formatted string detected!");this.addToken(X.STRING,k.OPERAND,H.STATIC,W);break;case"<":if(D=this.getNextChar(),x=String.fromCharCode(D),-1==D)return void this.addToken(X.LES,k.COMPOP,H.BINARY,"<");if(">"==x){this.addToken(X.NTE,k.COMPOP,H.BINARY,"<>");break}if("="==x){this.addToken(X.LTE,k.COMPOP,H.BINARY,"<=");break}this.addToken(X.LES,k.COMPOP,H.BINARY,"<"),this.putCharBack();break;case">":if(D=this.getNextChar(),x=String.fromCharCode(D),-1==D)return void this.addToken(X.GRT,k.COMPOP,H.BINARY,">");if("="==x){this.addToken(X.GTE,k.COMPOP,H.BINARY,">=");break}this.addToken(X.GRT,k.COMPOP,H.BINARY,">"),this.putCharBack();break;default:if(m.J0.IsDigit(x)){let R=0;do{if(R=10*R+x.charCodeAt(0)-48,D=this.getNextChar(),x=String.fromCharCode(D),-1==D)break}while(this.bufPointer<p&&m.J0.IsDigit(x));if(-1==D)return void this.addToken(X.INTEGER,k.OPERAND,H.STATIC,R);if("."==x){let le=0,j=1;if(D=this.getNextChar(),x=String.fromCharCode(D),-1==D)return;do{if(j/=10,le+=(x.charCodeAt(0)-48)*j,D=this.getNextChar(),x=String.fromCharCode(D),-1==D)break}while(this.bufPointer<p&&m.J0.IsDigit(x));if(le=R+le,this.addToken(X.DOUBLE,k.OPERAND,H.STATIC,m.J0.Double(le)),-1==D)return;this.putCharBack()}else this.addToken(X.INTEGER,k.OPERAND,H.STATIC,m.J0.Int(R)),this.putCharBack();break}{let R="",le=0;for(;this.bufPointer<p&&!this.isTokenKeyChar(x)&&(R+=x,le++,D=this.getNextChar(),x=String.fromCharCode(D),-1!=D););if(R.Trim(),this.isTokenKeyword(R)){let j=!1,F=this.getTokenName(R);(F==X.KWRDIF||F==X.KWRDELSE||F==X.KWRDELSEIF||F==X.AND||F==X.OR)&&(this.addToken(F,k.LOGICOP,H.KEYWORD,R),j=!0),F==X.KWRDTHEN?j=!0:F==X.CONCAT||F==X.ABS||F==X.MOD||F==X.TRUNC||F==X.ROUND||F==X.FLOOR||F==X.CEIL||F==X.DATEDIFF||F==X.DATEADD||F==X.SUBSTR||F==X.UPPER||F==X.LOWER||F==X.DATENAME||F==X.LENGTH||F==X.MCONCAT||F==X.REPLACE||F==X.INDEXOF||F==X.ISNUM||F==X.REGEX||F==X.TRIM||F==X.NEWDATE||F==X.FORMAT?(this.addToken(R,k.FUNC,H.KEYWORD,R),j=!0):j||this.addToken(X.APPDEF,k.OPERAND,H.REFERENCE,F.toString())}else this.addToken(X.USERDEF,k.OPERAND,H.REFERENCE,R);if(-1==D)return;this.putCharBack();break}}}}}},24802:(qe,be,t)=>{"use strict";t.d(be,{Y:()=>Y});var m=t(10467),A=t(31168),G=t(9120),J=t(18088);class Y{constructor(X){this.args=X,this.DecimalFormat="",this.DecimalFormatNew="",this.grid=X&&X.grid,this.init()}get collection(){return this.columnDef&&this.columnDef.editor.collection||[]}get columnDef(){return this.args&&this.args.column||{}}get columnEditor(){return this.columnDef&&this.columnDef.editor||{}}get hasAutoCommitEdit(){return this.args.grid.getOptions().autoCommitEdit}get validator(){return this.columnEditor.validator||this.columnDef.validator}get Columns(){return this.gridOptions.params.TableColumns||{}}get gridOptions(){return this.grid?.getOptions?.()}init(){this.$input=$(`<input type="text" class="" placeholder="${this.columnEditor&&this.columnEditor.placeholder||""}" title="${this.columnEditor&&this.columnEditor.title||""}" />`).appendTo(this.args.container).on("keydown",H=>{this._lastInputEvent=H,this.textBox_KeyDown("",H)}),this.collection.IsNumeric&&(this.$input.css("text-align","right"),this.args&&this.Columns.Contains("Decimals")&&!A.J0.IsEmpty(this.args.item.Decimals)?(this.DecimalFormat="0."+this.args.item.Decimals+"-"+this.args.item.Decimals,this.DecimalFormatNew=this.args.item.Decimals):A.J0.IsEmpty(this.collection.DecimalPoints)||(this.DecimalFormat="0."+this.collection.DecimalPoints+"-"+this.collection.DecimalPoints,this.DecimalFormatNew=this.collection.DecimalPoints)),!this.collection.IsNumeric&&!A.J0.IsEmpty(this.collection.TextAlign)&&("CENTER"==this.collection.TextAlign.toUpperCase()?this.$input.css("text-align","center"):"RIGHT"==this.collection.TextAlign.toUpperCase()?this.$input.css("text-align","right"):this.$input.css("text-align","left")),setTimeout(()=>{this.$input.focus().select()},50)}destroy(){this.$input.off("keydown").remove()}focus(){this.$input.focus()}getValue(){return this.$input.val()}setValue(X){this.$input.val(G.d.SessionManager.PactSanitize(X))}loadValue(X){this.defaultValue=this.collection.IsNumeric?G.d.SessionManager.Preferences.ContainsKey("Commas")&&"Millions"!=G.d.SessionManager.Preferences.Commas&&""!=G.d.SessionManager.Preferences.Commas?A.J0.IsEmpty(X[this.args.column.field])?X[this.args.column.field]:A.J0.Double(X[this.args.column.field]).Commas("N"+this.DecimalFormatNew):"0.0-0"===this.DecimalFormat||A.J0.IsEmpty(X[this.args.column.field])?X[this.args.column.field]:G.d.SessionManager.transformDecimal(X[this.args.column.field],this.DecimalFormat):X[this.args.column.field],this.$input.val(this.defaultValue),this.$input[0].defaultValue=this.defaultValue,this.$input.select(),!this.collection.IsNumeric&&!A.J0.IsEmpty(X[this.args.column.field])&&X[this.args.column.field].startsWith("<FlowDocument")&&(this.Tag=X[this.args.column.field],this.$input.val(A.J0.GetXamlText(this.Tag.toString())))}serializeValue(){if(!A.J0.IsEmpty(this.Tag)&&this.Tag.startsWith("<FlowDocument"))return this.Tag.toString();if(console.log("transformHtml setValue editor found"),this.$input.val(G.d.SessionManager.PactSanitize(this.$input.val())),!isNaN(this.$input.val().replace(/,/g,""))||!this.collection.IsNumeric)return this.$input.val();if(A.J0.DoubleBool(this.$input.val().replace(/,/g,"")))return this.$input.val();try{var X=G.d.eval.EvaluateExpression(this.$input.val().replace(/,/g,""),new J.bT);if(null!=!A.J0.IsEmpty(X)&&"Infinity"!=X.toString()&&"-Infinity"!=X.toString()&&"NaN"!=X.toString()&&A.J0.DoubleTryParse(X.ToString()))return X}catch{return this.$input.val()}}applyValue(X,k){const H=this.validate(k);X[this.args.column.field]=this.collection.IsNumeric&&!A.J0.IsEmpty(k)?G.d.SessionManager.Preferences.ContainsKey("Commas")&&"Millions"!=G.d.SessionManager.Preferences.Commas&&""!=G.d.SessionManager.Preferences.Commas?H&&H.valid?A.J0.Double(k).Commas("N"+this.DecimalFormatNew).replace(/,/g,""):"":"0.0-0"===this.DecimalFormat?k:H&&H.valid?A.J0.String(G.d.SessionManager.transformDecimal(k,this.DecimalFormat)).replace(/,/g,""):"":this.collection.IsNumeric&&A.J0.IsEmpty(k)?"":H&&H.valid?k:""}isValueChanged(){return!(!this.columnEditor||!this.columnEditor.alwaysSaveOnEnterKey||""!==(this._lastInputEvent&&this._lastInputEvent.key))||!(""===this.$input.val()&&null===this.defaultValue)&&this.$input.val().replace(/,/g,"")!==this.defaultValue}save(){const X=this.validate();X&&X.valid&&(this.hasAutoCommitEdit?this.args.grid.getEditorLock().commitCurrentEdit():this.args.commitChanges())}textBox_MouseDoubleClick(X,k){}textBox_KeyDown(X,k){!this.collection.IsNumeric&&k.ctrlKey&&89===k.which&&this.ShowTichTextDilog()}ShowTichTextDilog(){var X=this;return(0,m.A)(function*(){const{PactRichTextBoxComponent:k}=yield Promise.resolve().then(t.bind(t,58040));G.d.page.ShowDialog(X,k,{ShowCenter:!0,Title:"Editor"})})()}QtyReader(X){}textBox_TextChanged(X,k){if(console.log("transformHtml textBox_TextChanged"),this.collection.IsInTextchanged)return;let H=X;if(H.Text.startsWith("<FlowDocument")&&(H.Tag=H.Text),null!=H){let ue=H.CaretIndex;this.collection.IsFirstLetterCaps?H.Text=this.MakeTitle(H.Text):this.collection.IsAllCaps&&(H.Text=H.Text.toUpperCase()),H.CaretIndex=ue}this.collection.IsInTextchanged=!1}MakeTitle(X){if(!A.J0.IsEmpty(X)){let k=X.split(" ");for(let H=0;H<k.length;H++)k[H]=k[H][0].toString().toUpperCase()+k[H].substring(1);return k.join(" ")}return""}validate(X){if(isNaN(this.$input.val().replace(/,/g,""))&&this.collection.IsNumeric){if(A.J0.DoubleBool(this.$input.val().replace(/,/g,"")))return{valid:!1,msg:"Please enter a valid decimal number"};try{var k=G.d.eval.EvaluateExpression(this.$input.val().replace(/,/g,""),new J.bT);null!=!A.J0.IsEmpty(k)&&"Infinity"!=k.toString()&&"-Infinity"!=k.toString()&&"NaN"!=k.toString()&&A.J0.DoubleTryParse(k.ToString())&&(X=k)}catch{return{valid:!1,msg:"Please enter a valid decimal number"}}}if(this.validator){const H=void 0!==X?X:this.$input&&this.$input.val&&this.$input.val();return this.validator(H,this.args)}return{valid:!0,msg:null}}}},96012:(qe,be,t)=>{"use strict";t.d(be,{P:()=>m});class m{constructor(){}}},58040:(qe,be,t)=>{"use strict";t.r(be),t.d(be,{PactRichTextBoxComponent:()=>ye});var m=t(10467),A=t(96012),G=t(9120),J=t(31168),Y=t(24802),oe=t(32057),X=t(11798),k=t(46183),H=t(96336);const ue=()=>({height:"200px"});let q=document,ye=(()=>{class re extends A.P{constructor(B){super(),this.elementRef=B,this.sizearray=["6pt","7pt","8pt","9pt","10pt","11pt","12pt","13pt","14pt","15pt","16pt","18pt","20pt","22pt","24pt","30pt","32pt","36pt"],this.options={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:this.sizearray}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:["sans serif","serif","monospace","times new roman","arial","calibri"]}],[{align:[]}],["clean"],["link","image"]]},this.objText="",this.CtrlTFontSize="10",this.CtrlTFontName="Times New Roman",this.setUpFonts(),this.calig(),this.Indent()}ngOnInit(){G.d.SessionManager.Preferences.ContainsKey("CtrlTFontSize")&&(this.CtrlTFontSize=G.d.SessionManager.Preferences.CtrlTFontSize),G.d.SessionManager.Preferences.ContainsKey("CtrlTFontName")&&(this.CtrlTFontName=G.d.SessionManager.Preferences.CtrlTFontName),this.onLoad(),this.Init()}get Element(){return this.elementRef.nativeElement}setUpIndentStyle(){}setDefaultmargings(B,me){}customHeader(){}Indent(){}calig(){}formatHtml(B){var D="",x="";return B.split(/>\s*</).forEach(function(p){p.match(/^\/\w/)&&(x=x.substring(1)),D+=x+"<"+p+">\r\n",p.match(/^<?\w[^>]*[^\/]$/)&&!p.startsWith("input")&&(x+="\t")}),D.substring(1,D.length-3)}setUpFonts(){const B=q.fonts.entries();let me=[],D=!1;for(;!D;){const x=B.next();x.done?D=x.done:me.push(x.value[0].family)}return[...new Set(me)]}onLoad(){var B=this;return(0,m.A)(function*(){if(J.J0.IsEmpty(B.obj.Xaml)||null==B.obj.Xaml)if(B.obj instanceof Y.Y){let me=B.obj.$input.val();if(J.J0.IsEmpty(B.obj.Tag))B.htmlcontent=me;else{me=B.obj.Tag;let D=yield G.d.common.ConvertXamlToHtml(me);B.htmlcontent=D.HtmlText}}else("PactTextBoxData"==B.obj.ClassName||"PactTextAreaData"==B.obj.ClassName)&&(B.objText=B.obj.Text,B.htmlcontent=B.obj.Text);else{B.objText=B.obj.Text;let me=yield G.d.common.ConvertXamlToHtml(B.obj.Xaml);B.htmlcontent=me.HtmlText}})()}OnClick(B,me){var D=this;return(0,m.A)(function*(){if("Ok"==B){let x;x=D.htmlcontent.startsWith("<HTML><HEAD>")&&!J.J0.IsEmpty(D._htmlcontent)?yield G.d.common.ConvertHtmlToXaml(D._htmlcontent):yield G.d.common.ConvertHtmlToXaml(D.htmlcontent),D.obj instanceof Y.Y?(D.obj.Tag=x.xamlText,!J.J0.IsEmpty(D.obj.collection.Binding)&&!J.J0.IsEmpty(D.obj.args.item)&&(D.obj.args.item[D.obj.collection.Binding]="Formula"==D.obj.collection.Binding||D.obj.collection.Binding.Contains("Formula")?D.objText:D.obj.Tag.toString(),D.obj.save())):(D.obj.Xaml=x.xamlText,D.obj.Tag=x.xamlText,D.obj.Text=D.objText)}G.d.page.HideDialog(D.PopUpGUID)})()}changeEditor(B){this.objText=B.editor.root.innerText,J.J0.IsEmpty(B.html)||(this._htmlcontent=B.html)}setUpQuill1(){}Init(){}ngAfterViewInit(){setTimeout(()=>{Array.from(this.Element.getElementsByClassName("ql-size")).forEach(B=>{null!=B.getElementsByClassName("ql-picker-label")[0]&&B.getElementsByClassName("ql-picker-label")[0].setAttribute("data-value",this.CtrlTFontSize+"pt")}),Array.from(this.Element.getElementsByClassName("ql-font")).forEach(B=>{null!=B.getElementsByClassName("ql-picker-label")[0]&&B.getElementsByClassName("ql-picker-label")[0].setAttribute("data-value",""+this.CtrlTFontName)})},0)}static#e=this.\u0275fac=function(me){return new(me||re)(oe.rXU(oe.aKT))};static#t=this.\u0275cmp=oe.VBU({type:re,selectors:[["app-PactRichTextBox"]],inputs:{obj:"obj"},features:[oe.Vt3],decls:19,vars:10,consts:[["editor",""],[3,"onEditorChanged","ngModelChange","styles","modules","ngModel"],[1,"Pactdailogfooter"],[1,"primary-btn-wicon",3,"click"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"]],template:function(me,D){if(1&me){const x=oe.RV6();oe.EFF(0,"\n   "),oe.j41(1,"quill-editor",1,0),oe.bIt("onEditorChanged",function(W){return oe.eBV(x),oe.Njj(D.changeEditor(W))}),oe.mxI("ngModelChange",function(W){return oe.eBV(x),oe.DH7(D.htmlcontent,W)||(D.htmlcontent=W),oe.Njj(W)}),oe.k0s(),oe.EFF(3,"\n  "),oe.j41(4,"div",2),oe.EFF(5,"\n      "),oe.j41(6,"div"),oe.EFF(7,"\n        "),oe.j41(8,"button",3),oe.bIt("click",function(){oe.eBV(x);const W=oe.sdS(2);return oe.Njj(D.OnClick("Ok",W))}),oe.EFF(9),oe.nI1(10,"translate"),oe.k0s(),oe.EFF(11,"        \n        "),oe.j41(12,"button",4),oe.bIt("click",function(){oe.eBV(x);const W=oe.sdS(2);return oe.Njj(D.OnClick("Cancel",W))}),oe.nrm(13,"i",5),oe.EFF(14),oe.nI1(15,"translate"),oe.k0s(),oe.EFF(16," \n      "),oe.k0s(),oe.EFF(17,"       \n  "),oe.k0s(),oe.EFF(18,"\n  ")}2&me&&(oe.R7$(),oe.Y8G("styles",oe.lJ4(9,ue))("modules",D.options),oe.R50("ngModel",D.htmlcontent),oe.R7$(8),oe.JRh(oe.bMT(10,5,"Ok")),oe.R7$(5),oe.JRh(oe.bMT(15,7,"Cancel")))},dependencies:[X.BC,X.vS,k.i9,H.D9],styles:['.ql-snow[_ngcontent-%COMP%]   .ql-picker.ql-size[_ngcontent-%COMP%]   .ql-picker-item[data-value="14px"][_ngcontent-%COMP%]:before{content:"Normal";font-size:14px!important}.ql-snow[_ngcontent-%COMP%]   .ql-picker.ql-size[_ngcontent-%COMP%]   .ql-picker-item[data-value="16px"][_ngcontent-%COMP%]:before{content:"Large";font-size:16px!important}.ql-snow[_ngcontent-%COMP%]   .ql-picker.ql-size[_ngcontent-%COMP%]   .ql-picker-item[data-value="18px"][_ngcontent-%COMP%]:before{content:"Huge";font-size:18px!important}quill-editor[_ngcontent-%COMP%]{display:block}.ql-editor[_ngcontent-%COMP%]:focus{border:1px solid #80bdff!important;box-shadow:0 0 0 .2rem #007bff40!important}.ng-invalid[_ngcontent-%COMP%]{border:1px dashed red}[quill-editor-toolbar][_ngcontent-%COMP%]   .ql-font[_ngcontent-%COMP%]   span[data-label="Aref Ruqaa"][_ngcontent-%COMP%]:before{font-family:Aref Ruqaa}[quill-editor-toolbar][_ngcontent-%COMP%]   .ql-font[_ngcontent-%COMP%]   span[data-label=Mirza][_ngcontent-%COMP%]:before{font-family:Mirza}[quill-editor-toolbar][_ngcontent-%COMP%]   .ql-font[_ngcontent-%COMP%]   span[data-label=Roboto][_ngcontent-%COMP%]:before{font-family:Roboto}.ql-font-mirza[_ngcontent-%COMP%]{font-family:Mirza}.ql-font-aref[_ngcontent-%COMP%]{font-family:Aref Ruqaa}.ql-font-roboto[_ngcontent-%COMP%]{font-family:Roboto}']})}return re})()},90775:(qe,be,t)=>{"use strict";t.d(be,{uI:()=>Y});var m=t(10467),A=t(18088),G=t(31168),J=t(9120);class Y{constructor(){this.Profiles=new A.bT,this.LadingDocs=new A.G9;let ue=J.d.admin.GetConfig("LandingDocs",J.d.SessionManager.RoleID);if(null==ue||0==ue.Tables.length||0==ue.Tables[0].length||G.J0.StringIsNullOrEmpty(ue.Tables[0][0].Value))return;let q=new G.VB;q.LoadXml(ue.Tables[0][0].Value),q.DocumentElement.childNodes.forEach(ye=>{let B,me,D,re=ye,O=new oe;switch(re.attributes.key.value){case"SALES_FLOW":O.Title="Sales";break;case"PURCHASE_FLOW":O.Title="Purchase";break;case"INVENTORY_FLOW":O.Title="Inventory";break;case"ACCOUNTING_FLOW":O.Title="Accounting";break;case"FM_FLOW":O.Title="FacilityManagement";break;case"HRM_FLOW":O.Title="HRM";break;default:O.Title=re.attributes.key.value}O.Type=re.attributes.key.value,this.Profiles.Add(O.Type,O),ye.childNodes.forEach(x=>{let p=x;for(B=p.attributes.LID?G.J0.Int(p.attributes.LID.value):0,me="1"==p.attributes.Club.value,D=0;D<p.childNodes.length;D++){let W=ue.Tables[1].find(T=>T.CostCenterID==G.J0.Int(p.childNodes[D].attributes.D.value));if(null!=p.childNodes[D].attributes.Landing&&"1"==p.childNodes[D].attributes.Landing.value){let T=parseInt(W.CostCenterID);this.LadingDocs.ContainsKey(T)?0==this.LadingDocs[T]&&(this.LadingDocs[T]=null!=p.childNodes[D].attributes.R?G.J0.Int(p.childNodes[D].attributes.R.value):0):this.LadingDocs.Add(T,null!=p.childNodes[D].attributes.R?G.J0.Int(p.childNodes[D].attributes.R.value):0)}if(me&&0!=D)O.DocData[O.DocData.length-1].AddDoc(W.CostCenterID,W.DocumentName,W.IsInventory);else{let T=new X;T.LID=B,T.AddDoc(W.CostCenterID,W.DocumentName,W.IsInventory),T.DocType=W.DocumentType,Y.IsDocumentAssigned(W.CostCenterID)&&(T.ShowNew=!0),O.DocData.push(T)}}})})}static GetLandingReport(ue){return null==J.d.page.QuickDocumentData?0:J.d.page.QuickDocumentData.LadingDocs.ContainsKey(ue)?J.d.page.QuickDocumentData?.LadingDocs[ue]:0}static IsDocumentAssigned(ue){for(let q=0;q<J.d.SessionManager.MenuTabs.length;q++){let ye=J.d.SessionManager.MenuTabs[q];for(let re=0;re<ye.Groups.length;re++)if(ye.Groups[re].Items.find(O=>O.FeatureID==ue))return!0}return!1}GetProfile(ue){return this.Profiles.ContainsKey(ue)?JSON.parse(JSON.stringify(this.Profiles[ue])):null}GetDocs(ue){let q="";return ue.Docs.forEach(ye=>{q.length>0&&(q+=","),q+=ye.CCID}),q}OnNewClick(ue){Y.LoadDocument(ue.CCID,ue.Title)}OnListClick(ue,q,ye,re){let O="";3==ye?O=" and INV.ProductID="+re:2==ye&&(O=ue.Docs[0].IsInv?" and (INV.DebitAccount="+re+" or INV.CreditAccount="+re+")":" and (ACC.DebitAccount="+re+" or ACC.CreditAccount="+re+")"),Y.LoadDocumentLandingPage(q.CCID,q.Title,ue.Where,ue.pType)}RefreshWidget(ue,q,ye,re,O){ue.IsLoading=!0;let W,R,B="",me="",D="",x="",p="",T="";ue.Docs[0].IsInv?(R="INV",W=" INV_DocDetails INV with(nolock)"):(R="ACC",W=" ACC_DocDetails ACC with(nolock)");let le=Y.GetDimensionWhere("DCC.dcCCNID");le.length>0&&(T=ue.Docs[0].IsInv?" join COM_DocCCDATA DCC with(nolock) on DCC.InvDocDetailsID="+R+".InvDocDetailsID":" join COM_DocCCDATA DCC with(nolock) on DCC.AccDocDetailsID="+R+".AccDocDetailsID"),D=ue.Docs.length>1?R+".CostCenterID in ("+this.GetDocs(ue)+")":R+".CostCenterID="+ue.Docs[0].CCID,D+=" and "+R+".StatusID=369",D+=le,ue.Where="",2==ye?"SALES_FLOW"==q.Type?ue.Where+=6==ue.DocType?" and "+R+".CreditAccount="+re:" and "+R+".DebitAccount="+re:"PURCHASE_FLOW"==q.Type?ue.Where+=10==ue.DocType?" and "+R+".DebitAccount="+re:" and "+R+".CreditAccount="+re:("INVENTORY_FLOW"==q.Type||"ACCOUNTING_FLOW"==q.Type)&&(ue.Where+=" and ("+R+".DebitAccount="+re+" or "+R+".CreditAccount="+re+")"):3==ye&&(ue.Where+=" and "+R+".ProductID="+re);let j=Date.Today().AddYears(-1);ue.Where+=" and "+R+".DocDate>=convert(float,convert(datetime,'"+j.ToString("dd-MMM-yyyy")+"'))",D+=ue.Where,me=R+".DocID",x=R+".DocID",ue.Docs.length>1&&(me=R+".CostCenterID,"+me,x=R+".CostCenterID,"+x,p="CostCenterID"),B="\nselect "+(p.length>0?p+",":"")+"count(*) CNT from (\nSELECT "+x+"\nFROM "+W+T+"\nWHERE "+D+"\nGROUP BY "+x+") AS T",p.length>0&&(B+=" Group by "+p),J.d.report.DataSetAsyn("RPT022",B).then(F=>{if(1==ue.Docs.length)ue.Value=F.Tables[0][0].CNT.Commas("N0"),ue.Docs[0].Value=ue.Value;else{let ne=0;ue.Docs.forEach(v=>{let E=F.Tables[0].find(I=>I.CostCenterID==v.CCID),L=E?E.CNT:0;ne+=L,v.Value=L.Commas("N0")}),ue.Value=ne.Commas("N0")}ue.IsLoading=!1})}static GetDimensionWhere(ue){let q="";return"True"==J.d.SessionManager.Preferences.EnableLocationWise.toString()&&"True"==J.d.SessionManager.Preferences["LW Reports"]&&(J.d.SessionManager.LocationID>0?q=" and "+ue+"2="+J.d.SessionManager.LocationID:"1"!=J.d.SessionManager.RoleID&&J.d.SessionManager.LocationWhere.length>0&&(q=" and "+ue+"2 in ("+J.d.SessionManager.LocationWhere+")")),q}static LoadDocument(ue,q){return(0,m.A)(function*(){let ye={};const{AddEditDocumentComponent:re}=yield Promise.all([t.e(9924),t.e(6833),t.e(855),t.e(9710),t.e(2076),t.e(5543)]).then(t.bind(t,19214)),{AddEditDocumentViewModel:O}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,32668));let B=new O(ue,q,!1);Object.assign(ye,{component:re,params:{obj:B}}),J.d.page.addNewTab(ye)})()}static LoadDocumentLandingPage(ue,q,ye,re,O=null,B=!1){return(0,m.A)(function*(){const{DocumentsListComponent:me}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(7760)]).then(t.bind(t,37760)),{DocumentsListViewModel:D}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(3148)]).then(t.bind(t,767));let x=J.d.page.tabs.find(p=>p.params?.obj instanceof D&&p.params?.obj.CostCenterID==ue);if(!x||B){let p={};p.title=q;let W=new D(ue,q,ye,re,O);Object.assign(p,{component:me,params:{obj:W}}),J.d.page.addNewTab(p)}else J.d.page.SetActiveTab(x)})()}}class oe{constructor(){this.DocData=[]}}class X{constructor(){this.Docs=[],this.IsLoading=!1,this.ShowNew=!1,this.Where=""}AddDoc(ue,q,ye){let re=new k;re.CCID=ue,re.Title=q,re.IsInv=ye,this.Docs.push(re)}}class k{}},46204:(qe,be,t)=>{"use strict";t.d(be,{V:()=>J,g:()=>Y});var m=t(10467),A=t(9120),G=t(31168);class J{constructor(){this.DisplayMessage=""}}class Y{get Title(){return this.title}set Title(X){this.title!=X&&(this.title=X,this.DialogOptions&&(this.DialogOptions.Title=X))}get DisplayMessage(){return this._DisplayMessage}set DisplayMessage(X){X?(this.Msgcss=X.Contains("Error")||X.Contains("adminstrator")?"error":X.Contains("Succes")?"":"warn",""==this.DisplayMessageRental&&(this.timerDispMsg?this.timerDispMsg.Enabled=!1:(this.timerDispMsg=new G.M4,this.timerDispMsg.Interval=5e3,this.timerDispMsg.Elapsed(this,"timerDispMsg_Elapsed")),this.timerDispMsg.Enabled=!0),this.MessageVisibility=!0):this.MessageVisibility=!1,this._DisplayMessage=""==this.DisplayMessageRental?X:this.DisplayMessageRental}timerDispMsg_Elapsed(){this.timerDispMsg.Enabled=!1,this.MessageVisibility=!1}get HidePactLogo(){return A.d.HidePactLogo}get IsMobile(){return A.d.IsMobile}get EnableSettings(){return A.d.EnableSettings}get IsCustMobileApp(){return A.d.IsCustMobileApp}get IsNativeMobile(){return A.d.IsNativeMobile}get IsMac(){return A.d.IsMac}constructor(){this._DisplayMessage="",this.Msgcss="",this.DisplayMessageRental=""}OnRequestClose(X){return(0,m.A)(function*(){const{ConfirmOnExit:k}=yield Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076)]).then(t.bind(t,87428));new k("Confirmontabclose",ue=>{"YES"==ue.toUpperCase()&&A.d.page.removeTab(X)})})()}DialogCallBack(X){this.DialogOptions?.CallBack&&2==this.DialogOptions.CallBack.length&&this.DialogOptions.CallBack[0][this.DialogOptions.CallBack[1]](X)}}},31168:(qe,be,t)=>{"use strict";t.d(be,{dd:()=>F,n_:()=>x,VV:()=>le,M4:()=>j,J0:()=>p,VB:()=>R});var Y,m=t(10467),A=t(9120),G=t(18088),J=t(15381),oe=new Uint8Array(16);function X(){if(!Y&&!(Y=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Y(oe)}const k=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;for(var q=[],ye=0;ye<256;++ye)q.push((ye+256).toString(16).substr(1));const O=function re(ne){var v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,E=(q[ne[v+0]]+q[ne[v+1]]+q[ne[v+2]]+q[ne[v+3]]+"-"+q[ne[v+4]]+q[ne[v+5]]+"-"+q[ne[v+6]]+q[ne[v+7]]+"-"+q[ne[v+8]]+q[ne[v+9]]+"-"+q[ne[v+10]]+q[ne[v+11]]+q[ne[v+12]]+q[ne[v+13]]+q[ne[v+14]]+q[ne[v+15]]).toLowerCase();if(!function H(ne){return"string"==typeof ne&&k.test(ne)}(E))throw TypeError("Stringified UUID is invalid");return E},me=function B(ne,v,E){var L=(ne=ne||{}).random||(ne.rng||X)();if(L[6]=15&L[6]|64,L[8]=63&L[8]|128,v){E=E||0;for(var I=0;I<16;++I)v[E+I]=L[I];return v}return O(L)};var D=t(53852);class x{static GetLogPath(v){return x.GetLogPath_3(v,!1,!1)}static GetLogPath_3(v,E,L){let I;try{if(!(!L&&A.d.SessionManager.IsWebApplication&&A.d.SessionManager.ServerMapPath.length>0))return A.d.SessionManager.IsWinServiceCall?(I=A.d.SessionManager.api_url,I.Combine(v)):(I=A.d.SessionManager.Preferences.ContainsKey("UseGlobalPrefForFileUploadPath")&&"1"==A.d.SessionManager.Preferences.UseGlobalPrefForFileUploadPath?A.d.SessionManager.Preferences["File Upload Path"]:"","");if(A.d.SessionManager.Preferences.ContainsKey("webfileurl")&&!p.IsEmpty(A.d.SessionManager.Preferences.webfileurl)?(I=A.d.SessionManager.Preferences.webfileurl,I.endsWith("/")||I.endsWith("\\")||I.Contains("http:")?I+=v:(I.Contains("\\192"),I=I+'"'+v)):(I=A.d.SessionManager.api_url,I.endsWith("/")||I.endsWith("\\")||I.Contains("http:")?I+=v:(I.Contains("\\192"),I=I+'"'+v)),!I.toLowerCase().startsWith("ftp")&&!I.toLowerCase().startsWith("http"))return I}catch(ie){Logger.ErrorLog("GetLogPath:"+ie.Message)}return""}}class p{static GetPrimaryKey(v){return 2==v?"AccountID":3==v?"ProductID":"NodeID"}static GetTableName(v){return 2==v?"ACC_Accounts":3==v?"INV_Product":50001==v?"COM_Division":50002==v?"COM_Location":50003==v?"COM_Branch":50004==v?"COM_Department":50005==v?"COM_Salesman":50006==v?"COM_Category":50007==v?"COM_Area":50008==v?"COM_Teritory":"COM_CC"+v}static WriteErrorsToFile(v,E){}static GetRegistryValues(v,E,L){throw new Error("Method not implemented.")}static#e=this.key=D.enc.Utf8.parse("9090909090909090");static#t=this.iv=D.enc.Utf8.parse("8080808080808080");static generateGUID(){return this.GUID=me(),this.GUID}static GetGUID(){return(0,m.A)(function*(){return yield A.d.common.Getguid()})()}static NewGuid(){return this.generateGUID()}static CurrentTimeZoneName(){return""}static GetAmount(v){return v.toString().Replace(",","")}static GetPath(v,E=""){let L,I="";try{A.d.SessionManager.Preferences.ContainsKey("UseGlobalPrefForFileUploadPath")&&"1"===p.String(A.d.SessionManager.Preferences.UseGlobalPrefForFileUploadPath)&&!p.IsEmpty(A.d.SessionManager.Preferences["File Upload Path"])?I=p.String(A.d.SessionManager.Preferences["File Upload Path"]):A.d.SessionManager.Preferences.ContainsKey("webfileuploadpath")&&!p.IsEmpty(A.d.SessionManager.Preferences.webfileuploadpath)&&(I=A.d.SessionManager.Preferences.webfileuploadpath),!p.IsEmpty(E)&&A.d.SessionManager.Preferences.ContainsKey("isYearMonthWiseFolder")&&"TRUE"==A.d.SessionManager.Preferences.isYearMonthWiseFolder.toUpperCase()||(E=""),A.d.SessionManager.Preferences.ContainsKey("isSftp")&&"TRUE"==A.d.SessionManager.Preferences.isSftp.toUpperCase()?(A.d.common.GetUploadedImage(v,I,"isSftp",E),L=(A.d.SessionManager.config.apiURL+"Attachments/"+v).length>20?A.d.SessionManager.config.apiURL+"Attachments/"+v:A.d.SessionManager.config.apiURL+"fonts/NOImageAvailable.png"):I.toLowerCase().Contains("ftp")?L=A.d.common.GetUploadedImage(v,I,"ftp",E).length>20?A.d.SessionManager.config.apiURL+"Attachments/"+v:A.d.SessionManager.config.apiURL+"fonts/NOImageAvailable.png":(I=A.d.SessionManager.Preferences.webfileurl,L=I+v)}catch{}return L}static GetFmFilePath(v){let E,L="";try{A.d.SessionManager.Preferences.ContainsKey("UseGlobalPrefForFileUploadPath")&&"1"==A.d.SessionManager.Preferences.UseGlobalPrefForFileUploadPath&&!p.IsEmpty(A.d.SessionManager.Preferences["File Upload Path"])?L=A.d.SessionManager.Preferences["File Upload Path"]:A.d.SessionManager.Preferences.ContainsKey("webfileuploadpath")&&!p.IsEmpty(A.d.SessionManager.Preferences.webfileuploadpath)&&(L=A.d.SessionManager.Preferences.webfileuploadpath),L.toLowerCase().Contains("ftp")||L.toLowerCase().Contains("issftp")?E=A.d.SessionManager.config.apiURL+"Attachments/"+v:(L=A.d.SessionManager.Preferences.webfileurl,E=L+v)}catch{}return E}static haversineDistance(v,E){const I=(E.latitude-v.latitude)*Math.PI/180,ie=(E.longitude-v.longitude)*Math.PI/180,ce=Math.cos(v.latitude*Math.PI/180)*Math.cos(E.latitude*Math.PI/180)*Math.sin(ie/2)*Math.sin(ie/2)+Math.sin(I/2)*Math.sin(I/2);return 2*Math.atan2(Math.sqrt(ce),Math.sqrt(1-ce))*6371}static GetTagTableName(v){return 2==v?"ACC_Accounts":3==v?"INV_Product":7==v?"ADM_Users":50001==v?"COM_Division":50002==v?"COM_Location":50003==v?"COM_Branch":50004==v?"COM_Department":50005==v?"COM_Salesman":50006==v?"COM_Category":50007==v?"COM_Area":50008==v?"COM_Teritory":"COM_CC"+v}static GetPrimarkyKey(v,E=!1){return 2==v?"AccountID":3==v?"ProductID":E?"CCNID"+(v-5e4):"NodeID"}static SetRegistryValues(v){localStorage.setItem("RegistryValues",JSON.stringify(v))}static EncryptString(v){return(0,m.A)(function*(){return yield A.d.admin.EncryptString(v)})()}static DecryptString(v){return(0,m.A)(function*(){return yield A.d.admin.DecryptString(v)})()}static ValidatePassword(v){return A.d.SessionManager.Preferences.ContainsKey("PwdHardning")&&"TRUE"==A.d.SessionManager.Preferences.PwdHardning.toString().toUpperCase()&&!new RegExp("^(?=.*?[A-Z])(?=.*?[0-9])(?=.*?[~!@#$%^&*?-_]).{8,}$").test(v)?"Pasword should have atleast one capital alphabet,one number and one special character.":""}static ConvertNumberToText(v,E,L,I,ie){let ce,Ce,he=v.Replace(",","");if(v.Contains(".")){let se=he.split(".");ce=se[0],Ce=se[1]}else ce=he,Ce="00";return"Arabic"!=ie&&(I+=" Only"),"1"==E?0!=parseInt(ce)&&0!=parseInt(Ce)?L+" "+this.Converter(parseInt(ce)).Trim()+" And "+this.Converter(parseInt(Ce)).Trim()+" "+I:0!=parseInt(ce)&&0==parseInt(Ce)?L+" "+this.Converter(parseInt(ce)).Trim()+" Only":0==parseInt(ce)&&0!=parseInt(Ce)?this.Converter(parseInt(Ce)).Trim()+" "+I:" ":0!=parseInt(ce)&&0!=parseInt(Ce)?"Arabic"==ie?L+" "+this.ConvertNumberAmericanFormatArabic(ce)+" \u0648 "+this.ConvertNumberAmericanFormatArabic(Ce)+" "+I:L+" "+this.NumberToText(parseInt(ce)).Trim()+" And "+this.NumberToText(parseInt(Ce)).Trim()+" "+I:0!=parseInt(ce)&&0==parseInt(Ce)?"Arabic"==ie?L+" "+this.ConvertNumberAmericanFormatArabic(ce):L+" "+this.NumberToText(parseInt(ce)).Trim()+" Only":0==parseInt(ce)&&0!=parseInt(Ce)?"Arabic"==ie?this.ConvertNumberAmericanFormatArabic(Ce).Trim()+" "+I:this.NumberToText(parseInt(Ce)).Trim()+" "+I:" "}static Converter(v){if(0==v)return"Zero";if(-2147483648==v)return"Minus Two Hundred and Fourteen Crore Seventy Four Lakh Eighty Three Thousand Six Hundred and Forty Eight";let I,ie,ce,E=[],L=0,Ce="";v<0&&(Ce+="Minus ",v=-v);let he=["","One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine "],se=["Ten ","Eleven ","Twelve ","Thirteen ","Fourteen ","Fifteen ","Sixteen ","Seventeen ","Eighteen ","Nineteen "],z=["Twenty ","Thirty ","Forty ","Fifty ","Sixty ","Seventy ","Eighty ","Ninety "],N=["Thousand ","Lakh ","Crore "];E[0]=v%1e3,E[1]=v/1e3,E[2]=v/1e5,E[1]=E[1]-100*E[2],E[3]=v/1e7,E[2]=E[2]-100*E[3];for(let ee=3;ee>0;ee--)if(0!=E[ee]){L=ee;break}for(let ee=L;ee>=0;ee--)0!=E[ee]&&(I=E[ee]%10,ce=E[ee]/10,ie=E[ee]/100,ce-=10*ie,ie>0&&(Ce+=he[ie]+"Hundred "),(I>0||ce>0)&&(Ce+=0==ce?he[I]:1==ce?se[I]:z[ce-2]+he[I]),0!=ee&&(Ce+=N[ee-1]));return Ce.toString().startsWith("and")&&Ce.Replace("and ",""),Ce.toString().TrimEnd(Ce.toString())}static NumberToText(v){return v<0?"Minus "+this.NumberToText(-v):0==v?"":v<=19?["One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"][v-1]+" ":v<=99?["Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"][v/10-2]+" "+this.NumberToText(v%10):v<=199?"One Hundred "+this.NumberToText(v%100):v<=999?this.NumberToText(v/100)+"Hundred "+this.NumberToText(v%100):v<=1999?"One Thousand "+this.NumberToText(v%1e3):v<=999999?this.NumberToText(v/1e3)+"Thousand "+this.NumberToText(v%1e3):v<=1999999?"One Million "+this.NumberToText(v%1e6):v<=999999999?this.NumberToText(v/1e6)+"Million "+this.NumberToText(v%1e6):v<=1999999999?"One Billion "+this.NumberToText(v%1e9):this.NumberToText(v/1e9)+"Billion "+this.NumberToText(v%1e9)}static NumberToTextArabic(v){return v<0?"\u0646\u0627\u0642\u0635 "+this.NumberToTextArabic(-v):0==v?"":v<=19?["\u0648\u0627\u062d\u062f","\u0627\u062b\u0646\u0627\u0646","\u062b\u0644\u0627\u062b\u0629","\u0627\u0631\u0628\u0639\u0629","\u062e\u0645\u0633\u0629","\u0633\u062a\u0629","\u0633\u0628\u0639\u0629","\u062b\u0645\u0627\u0646\u064a\u0629","\u062a\u0633\u0639\u0629","\u0639\u0634\u0631\u0629","\u0627\u062d\u062f \u0639\u0634\u0631","\u0627\u062b\u0646\u0627 \u0639\u0634\u0631","\u062b\u0644\u0627\u062b\u0629 \u0639\u0634\u0631","\u0627\u0631\u0628\u0639\u0629 \u0639\u0634\u0631","\u062e\u0645\u0633\u0629 \u0639\u0634\u0631","\u0633\u062a\u0629 \u0639\u0634\u0631","\u0633\u0628\u0639\u0629 \u0639\u0634\u0631","\u062b\u0645\u0627\u0646\u064a\u0629 \u0639\u0634\u0631","\u062a\u0633\u0639\u0629 \u0639\u0634\u0631"][v-1]+" ":v<=99?["\u0639\u0634\u0631\u0648\u0646","\u062b\u0644\u0627\u062b\u0648\u0646","\u0627\u0631\u0628\u0639\u0648\u0646","\u062e\u0645\u0633\u0648\u0646","\u0633\u062a\u0648\u0646","\u0633\u0628\u0639\u0648\u0646","\u062b\u0645\u0627\u0646\u0648\u0646","\u062a\u0633\u0639\u0648\u0646"][v/10-2]+" "+this.NumberToTextArabic(v%10):v<=199?"\u0645\u0627\u0626\u0629 "+this.NumberToTextArabic(v%100):v<=999?this.NumberToTextArabic(v/100)+"\u0645\u0627\u0626\u0629 "+this.NumberToTextArabic(v%100):v<=1999?"\u0627\u0644\u0641 "+this.NumberToTextArabic(v%1e3):v<=999999?this.NumberToTextArabic(v/1e3)+"\u0627\u0644\u0641 "+this.NumberToTextArabic(v%1e3):v<=1999999?"\u0645\u0644\u064a\u0648\u0646 "+this.NumberToTextArabic(v%1e6):v<=999999999?this.NumberToTextArabic(v/1e6)+"\u0645\u0644\u064a\u0648\u0646 "+this.NumberToTextArabic(v%1e6):v<=1999999999?"\u0645\u0644\u064a\u0627\u0631 "+this.NumberToTextArabic(v%1e9):this.NumberToTextArabic(v/1e9)+"\u0645\u0644\u064a\u0627\u0631 "+this.NumberToTextArabic(v%1e9)}static ConvertNumberThreeDigitAmericanFormatArabic(v,E){let L=v.length;if(L<=0)return"";let I=["\u0635\u0640\u0641\u0631","\u0648\u0627\u062d\u062f","\u0627\u062b\u0646\u0627\u0646","\u062b\u0644\u0627\u062b\u0629","\u0627\u0631\u0628\u0639\u0629","\u062e\u0645\u0633\u0629","\u0633\u062a\u0629","\u0633\u0628\u0639\u0629","\u062b\u0645\u0627\u0646\u064a\u0629","\u062a\u0633\u0639\u0629"],ce=["","","\u0639\u0634\u0631\u0648\u0646","\u062b\u0644\u0627\u062b\u0648\u0646","\u0627\u0631\u0628\u0639\u0648\u0646","\u062e\u0645\u0633\u0648\u0646","\u0633\u062a\u0648\u0646","\u0633\u0628\u0639\u0648\u0646","\u062b\u0645\u0627\u0646\u0648\u0646","\u062a\u0633\u0639\u0648\u0646"],Ce=["","\u0645\u0627\u0626\u0629","\u0645\u0626\u062a\u0627\u0646","\u062b\u0644\u0627\u062b\u0645\u0627\u0626\u0629","\u0627\u0631\u0628\u0639\u0645\u0627\u0626\u0629","\u062e\u0645\u0633\u0645\u0627\u0626\u0629","\u0633\u062a\u0645\u0627\u0626\u0629","\u0633\u0628\u0639\u0645\u0627\u0626\u0629","\u062b\u0645\u0627\u0646\u0645\u0627\u0626\u0629","\u062a\u0633\u0639\u0645\u0627\u0626\u0629"],he=" \u0648 ",se="",z=0,N=0,ee=0,Z="",fe="";if(3==L){let Ee=v[0].toString(),Me=parseInt(Ee);Me>=0&&Me<=9&&(se=Ce[Me]),Z=v[2].toString(),N=parseInt(Z),fe=v[1].toString(),z=parseInt(fe);let Re=v.substr(1,2);ee=parseInt(Re)}else 2==L?(Z=v[1].toString(),N=parseInt(Z),fe=v[0].toString(),z=parseInt(fe),ee=parseInt(v)):1==L&&(Z=v[0].toString(),N=parseInt(Z),z=0,ee=parseInt(v));return ee<=0||(ee>0&&ee<=9?(""!=se&&(se+=he),(""==E||ee>1)&&(se+=I[ee])):ee>=10&&ee<=19?(""!=se&&(se+=he),se+=["\u0639\u0634\u0631\u0629","\u0623\u062d\u062f\u0649 \u0639\u0634\u0631\u0629","\u0623\u062b\u0646\u0649 \u0639\u0634\u0631\u0629","\u062b\u0644\u0627\u062b\u0629 \u0639\u0634\u0631\u0629","\u0627\u0631\u0628\u0639\u0629 \u0639\u0634\u0631\u0629","\u062e\u0645\u0633\u0629 \u0639\u0634\u0631\u0629","\u0633\u062a\u0629 \u0639\u0634\u0631\u0629","\u0633\u0628\u0639\u0629 \u0639\u0634\u0631\u0629","\u062b\u0645\u0627\u0646\u064a\u0629 \u0639\u0634\u0631\u0629","\u062a\u0633\u0639\u0629 \u0639\u0634\u0631\u0629"][ee-10]):((z<0||z>9)&&(z=0),(N<0||N>9)&&(N=0),""!=se&&(se+=he),se+=ee%10==0?ce[z]:I[N]+he+ce[z])),se+E}static ConvertNumberAmericanFormatArabic(v){if(0==p.Double(v))return"Zero";let I=["","","","","",""],ie=0,ce=(v=this.StringReverse(v)).length;if(ce>18)return"Max Number Limit reached";let Ce=0;for(;ie<ce;){let N=ie+3;N>ce?(N=ce,I[Ce]=v.substr(ie)):I[Ce]=v.substr(ie,3),ie=N,Ce++}let he=[""," \u0627\u0644\u0641 "," \u0645\u0644\u064a\u0648\u0646 "," \u0628\u0644\u064a\u0648\u0646 ","\u0628\u0644\u064a\u0648\u0646\u0627\u0646"],z="";for(let N=Ce-1;N>=0;--N)I[N]=this.StringReverse(I[N]),I[N]=this.ConvertNumberThreeDigitAmericanFormatArabic(I[N],he[N]),""!=z&&""!=I[N]&&" "!=I[N]&&(z+=" \u0648 "),z+=I[N];return z}static StringReverse(v){let E="";for(let L=v.length-1;L>=0;L--)E+=v[L].toString();return E}static EncodeXML(v){return p.IsEmpty(v)?"":v.Replace("&","&amp;").Replace("<","&lt;").Replace(">","&gt;").Replace('"',"&quot;")}static DecodeXML(v){return p.IsEmpty(v)||(v=(v=(v=(v=v.Replace("&amp;","&")).Replace("&quot;",'"')).Replace("&lt;","<")).Replace("&gt;",">")),v}static IsValidID(v){return v>0||v<-1e4}static hasprop(v,E){return Object.prototype.hasOwnProperty.call(v,E)}static GetAmountsBasedOnPref(v,E){let L=0;try{L=parseFloat(v)}catch{}return""!=E?(A.d.SessionManager.Preferences.ContainsKey("Commas"),L.ToString("N"+E)):(A.d.SessionManager.Preferences.ContainsKey("Commas"),L.toString())}static SetPayrollMonth(v,E=A.d.SessionManager,L=0){let I=0,ie=0;if(A.d.SessionManager.Preferences.ContainsKey("ConsiderGlobalPreferencesBasedOnGrade")&&"True"==A.d.SessionManager.Preferences.ConsiderGlobalPreferencesBasedOnGrade&&L>0&&null!=A.d.SessionManager.dtPayrollPreferences&&A.d.SessionManager.dtPayrollPreferences.Tables[0].length>0){let ce=A.d.SessionManager.dtPayrollPreferences.Tables[0].filter(he=>"ProcessPayrollbeforeCalanderdays"==he.Name&&he.GradeID==L);null!=ce&&ce.length>0&&null!=ce[0].Value&&null!=ce[0].Value&&""!=ce[0].Value.toString()&&(I=parseInt(ce[0].Value)),ce=A.d.SessionManager.dtPayrollPreferences.Tables[0].filter(he=>"PayDayStart"==he.Name&&he.GradeID==L),null!=ce&&ce.length>0&&(ie=parseInt(ce[0].Value))}if(E.Preferences.ContainsKey("ProcessPayrollbeforeCalanderdays")&&""!=E.Preferences.ProcessPayrollbeforeCalanderdays&&parseInt(E.Preferences.ProcessPayrollbeforeCalanderdays)>0){let ce;ce=E.Preferences.ContainsKey("ConsiderGlobalPreferencesBasedOnGrade")&&"True"==E.Preferences.ConsiderGlobalPreferencesBasedOnGrade&&I>0?I:parseInt(E.Preferences.ProcessPayrollbeforeCalanderdays);let Ce=new Date;if(E.PayrollMonth=new Date(v.getFullYear(),v.getMonth(),1),Ce=E.PayrollMonth.AddMonths(1).AddDays(-1),E.PayrollMonthStart=E.PayrollMonth.AddDays(-ce),E.PayrollMonthEnd=Ce.AddDays(-ce),!(v>=E.PayrollMonthStart&&v<=E.PayrollMonthEnd)){let he=new Date;he=v.AddMonths(1),E.PayrollMonth=new Date(he.getFullYear(),he.getMonth(),1),Ce=E.PayrollMonth.AddMonths(1).AddDays(-1),E.PayrollMonthStart=E.PayrollMonth.AddDays(-ce),E.PayrollMonthEnd=Ce.AddDays(-ce)}}else if(A.d.SessionManager.Preferences.ContainsKey("PayDayStart")&&!p.IsEmpty(A.d.SessionManager.Preferences.PayDayStart)&&parseInt(A.d.SessionManager.Preferences.PayDayStart)>0){let ce,Ce;if(ce=E.Preferences.ContainsKey("ConsiderGlobalPreferencesBasedOnGrade")&&"True"==E.Preferences.ConsiderGlobalPreferencesBasedOnGrade&&ie>0?ie:parseInt(E.Preferences.PayDayStart),v.getDay()<=ce?E.PayrollMonth=new Date(v.getFullYear(),v.getMonth(),1):(Ce=v.AddMonths(1),E.PayrollMonth=new Date(Ce.getFullYear(),Ce.getMonth(),1)),ce<=15)Ce=v,E.PayrollMonthStart=new Date(Ce.getFullYear(),Ce.getMonth(),ce),E.PayrollMonthEnd=E.PayrollMonthStart.AddMonths(1).AddDays(-1);else{Ce=v,Ce.getDay()<ce&&(Ce=v.AddMonths(-1));let he=ce;for(;;)try{E.PayrollMonthStart=new Date(Ce.getFullYear(),Ce.getMonth(),he);break}catch{he--}E.PayrollMonthEnd=E.PayrollMonthStart.AddMonths(1).AddDays(-1),he=new Date(E.PayrollMonthEnd.getFullYear(),E.PayrollMonthEnd.getMonth()).getDate(),ce>=28&&(E.PayrollMonthEnd=he<ce?new Date(E.PayrollMonthEnd.getFullYear(),E.PayrollMonthEnd.getMonth(),he-1):new Date(E.PayrollMonthEnd.getFullYear(),E.PayrollMonthEnd.getMonth(),ce-1))}E.PayrollMonth=E.PayrollMonthStart.getMonth()==E.PayrollMonthEnd.getMonth()?new Date(E.PayrollMonthEnd.getFullYear(),E.PayrollMonthEnd.getMonth(),1):new Date(E.PayrollMonthStart.getFullYear(),E.PayrollMonthStart.getMonth()).getDate()-E.PayrollMonthStart.getDay()>=E.PayrollMonthEnd.getDay()?new Date(E.PayrollMonthStart.getFullYear(),E.PayrollMonthStart.getMonth(),1):new Date(E.PayrollMonthEnd.getFullYear(),E.PayrollMonthEnd.getMonth(),1),E.Preferences.ContainsKey("SetPayrollMonthToEndDateMonth")&&"TRUE"==E.Preferences.SetPayrollMonthToEndDateMonth.toUpperCase()&&(E.PayrollMonth=new Date(v.getFullYear(),v.getMonth(),1),E.PayrollMonthStart=new Date(v.AddMonths(-1).getFullYear(),v.AddMonths(-1).getMonth(),ce),E.PayrollMonthEnd=E.PayrollMonthStart.AddMonths(1).AddDays(-1)),E.dtPayrollYearFrom=new Date(E.PayrollMonth.getFullYear(),E.AccountingFromMonth-1,1),E.dtPayrollYearTo=new Date(E.dtPayrollYearFrom.AddYears(1).AddDays(-1).getFullYear(),E.dtPayrollYearFrom.AddYears(1).AddDays(-1).getMonth(),new Date(E.dtPayrollYearFrom.AddYears(1).AddDays(-1).getFullYear(),E.dtPayrollYearFrom.AddYears(1).AddDays(-1).getMonth()+1,0).getDate())}if(A.d.SessionManager.Preferences.ContainsKey("LatesPeriodStart")&&""!=A.d.SessionManager.Preferences.LatesPeriodStart&&parseInt(A.d.SessionManager.Preferences.LatesPeriodStart)>0){let ce=parseInt(A.d.SessionManager.Preferences.LatesPeriodStart);if(A.d.SessionManager.Preferences.ContainsKey("LoadLatesROAmonthsbeforetoPayrollMonth")&&""!=A.d.SessionManager.Preferences.LoadLatesROAmonthsbeforetoPayrollMonth&&parseInt(A.d.SessionManager.Preferences.LoadLatesROAmonthsbeforetoPayrollMonth)>0){let Ce=parseInt(A.d.SessionManager.Preferences.LoadLatesROAmonthsbeforetoPayrollMonth);A.d.SessionManager.LatesMonth=A.d.SessionManager.PayrollMonth.AddMonths(-Ce),ce!=A.d.SessionManager.PayrollMonthStart.getDay()?(A.d.SessionManager.LatesMonthStart=new Date(A.d.SessionManager.LatesMonth.getFullYear(),A.d.SessionManager.LatesMonth.getMonth(),ce),A.d.SessionManager.LatesMonthStart=A.d.SessionManager.LatesMonthStart.AddMonths(-1),A.d.SessionManager.LatesMonthEnd=A.d.SessionManager.LatesMonthStart.AddMonths(1).AddDays(-1)):(A.d.SessionManager.LatesMonthStart=A.d.SessionManager.PayrollMonthStart.AddMonths(-Ce),A.d.SessionManager.LatesMonthEnd=A.d.SessionManager.LatesMonthStart.AddMonths(1).AddDays(-1))}else A.d.SessionManager.LatesMonth=A.d.SessionManager.PayrollMonth,A.d.SessionManager.LatesMonthStart=A.d.SessionManager.PayrollMonthStart,A.d.SessionManager.LatesMonthEnd=A.d.SessionManager.PayrollMonthEnd,ce!=A.d.SessionManager.PayrollMonthStart.getDay()&&(A.d.SessionManager.LatesMonthStart=new Date(A.d.SessionManager.PayrollMonth.getFullYear(),E.PayrollMonth.getMonth(),ce),A.d.SessionManager.LatesMonthStart=A.d.SessionManager.LatesMonthStart.AddMonths(-1),A.d.SessionManager.LatesMonthEnd=A.d.SessionManager.LatesMonthStart.AddMonths(1).AddDays(-1))}}static SetPayrollDate(v,E,L){let I=0,ie=0;if(A.d.SessionManager.Preferences.ContainsKey("ConsiderGlobalPreferencesBasedOnGrade")&&"True"==A.d.SessionManager.Preferences.ConsiderGlobalPreferencesBasedOnGrade&&L>0&&null!=A.d.SessionManager.dtPayrollPreferences&&A.d.SessionManager.dtPayrollPreferences.length>0){let ce=A.d.SessionManager.dtPayrollPreferences.Tables[0].filter(he=>"ProcessPayrollbeforeCalanderdays"==he.Name&&he.GradeID==L);null!=ce&&ce.length>0&&null!=ce[0].Value&&null!=ce[0].Value&&""!=ce[0].Value.toString()&&(I=parseInt(ce[0].Value)),ce=A.d.SessionManager.dtPayrollPreferences.Tables[0].filter(he=>"PayDayStart"==he.Name&&he.GradeID==L),null!=ce&&ce.length>0&&(ie=parseInt(ce[0].Value))}if(A.d.SessionManager.Preferences.ContainsKey("ProcessPayrollbeforeCalanderdays")&&""!=A.d.SessionManager.Preferences.ProcessPayrollbeforeCalanderdays&&parseInt(A.d.SessionManager.Preferences.ProcessPayrollbeforeCalanderdays)>0){let ce;ce=A.d.SessionManager.Preferences.ContainsKey("ConsiderGlobalPreferencesBasedOnGrade")&&"True"==A.d.SessionManager.Preferences.ConsiderGlobalPreferencesBasedOnGrade&&I>0?I:parseInt(A.d.SessionManager.Preferences.ProcessPayrollbeforeCalanderdays);let Ce=new Date;if(E.LatesMonth=new Date,E.LatesMonthStart=new Date,E.LatesMonthEnd=new Date,E.PayrollMonth=new Date(v.getFullYear(),v.getMonth(),1),Ce=E.PayrollMonth.AddMonths(1).AddDays(-1),E.PayrollMonthStart=E.PayrollMonth.AddDays(-ce),E.PayrollMonthEnd=Ce.AddDays(-ce),!(v>=E.PayrollMonthStart&&v<=E.PayrollMonthEnd)){let he=new Date;he=v.AddMonths(1),E.PayrollMonth=new Date(he.getFullYear(),he.getMonth(),1),Ce=E.PayrollMonth.AddMonths(1).AddDays(-1),E.PayrollMonthStart=E.PayrollMonth.AddDays(-ce),E.PayrollMonthEnd=Ce.AddDays(-ce)}}else{let Ce,ce=new Date;if(Ce=A.d.SessionManager.Preferences.ContainsKey("ConsiderGlobalPreferencesBasedOnGrade")&&"True"==A.d.SessionManager.Preferences.ConsiderGlobalPreferencesBasedOnGrade&&ie>0?ie:parseInt(A.d.SessionManager.Preferences.PayDayStart),v.getDate()<=Ce?E.PayrollMonth=new Date(v.getFullYear(),v.getMonth(),1):(ce=v.AddMonths(1),E.PayrollMonth=new Date(ce.getFullYear(),ce.getMonth(),1)),Ce<=15)ce=v,E.PayrollMonthStart=new Date(ce.getFullYear(),ce.getMonth(),Ce),E.PayrollMonthEnd=E.PayrollMonthStart.AddMonths(1).AddDays(-1);else{ce=v;let he=v.DaysInMonth();ce.getDate()<Ce&&ce.getDate()!=he&&(ce=v.AddMonths(-1));let se=Ce;for(;;)try{E.PayrollMonthStart=new Date(ce.getFullYear(),ce.getMonth(),se);break}catch{se--}E.PayrollMonthEnd=E.PayrollMonthStart.AddMonths(1).AddDays(-1),se=E.PayrollMonthEnd.DaysInMonth(),Ce>=28&&(E.PayrollMonthEnd=se<Ce?new Date(E.PayrollMonthEnd.getFullYear(),E.PayrollMonthEnd.getMonth(),se-1):new Date(E.PayrollMonthEnd.getFullYear(),E.PayrollMonthEnd.getMonth(),Ce-1))}E.PayrollMonth=E.PayrollMonthStart.getMonth()==E.PayrollMonthEnd.getMonth()?new Date(E.PayrollMonthEnd.getFullYear(),E.PayrollMonthEnd.getMonth(),1):E.PayrollMonthStart.DaysInMonth()-E.PayrollMonthStart.getDate()>=E.PayrollMonthEnd.getDate()?new Date(E.PayrollMonthStart.getFullYear(),E.PayrollMonthStart.getMonth(),1):new Date(E.PayrollMonthEnd.getFullYear(),E.PayrollMonthEnd.getMonth(),1),"TRUE"==A.d.SessionManager.Preferences.SetPayrollMonthToEndDateMonth.toUpperCase()&&(E.PayrollMonth=new Date(v.getFullYear(),v.getMonth(),1),E.PayrollMonthStart=new Date(v.AddMonths(-1).getFullYear(),v.AddMonths(-1).getMonth(),Ce),E.PayrollMonthEnd=E.PayrollMonthStart.AddMonths(1).AddDays(-1))}if(A.d.SessionManager.Preferences.ContainsKey("LatesPeriodStart")&&""!=A.d.SessionManager.Preferences.LatesPeriodStart&&parseInt(A.d.SessionManager.Preferences.LatesPeriodStart)>0){let ce=parseInt(A.d.SessionManager.Preferences.LatesPeriodStart);if(A.d.SessionManager.Preferences.ContainsKey("LoadLatesROAmonthsbeforetoPayrollMonth")&&""!=A.d.SessionManager.Preferences.LoadLatesROAmonthsbeforetoPayrollMonth&&parseInt(A.d.SessionManager.Preferences.LoadLatesROAmonthsbeforetoPayrollMonth)>0){let Ce=parseInt(A.d.SessionManager.Preferences.LoadLatesROAmonthsbeforetoPayrollMonth);E.LatesMonth=E.PayrollMonth.AddMonths(-Ce),ce!=E.PayrollMonthStart.getDate()?(E.LatesMonthStart=new Date(E.LatesMonth.getFullYear(),E.LatesMonth.getMonth(),ce),E.LatesMonthStart=E.LatesMonthStart.AddMonths(-1),E.LatesMonthEnd=E.LatesMonthStart.AddMonths(1).AddDays(-1)):(E.LatesMonthStart=E.PayrollMonthStart.AddMonths(-Ce),E.LatesMonthEnd=E.LatesMonthStart.AddMonths(1).AddDays(-1))}else E.LatesMonth=E.PayrollMonth,E.LatesMonthStart=E.PayrollMonthStart,E.LatesMonthEnd=E.PayrollMonthEnd,ce!=E.PayrollMonthStart.getDate()&&(E.LatesMonthStart=new Date(E.PayrollMonth.getFullYear(),E.PayrollMonth.getMonth(),ce),E.LatesMonthStart=E.LatesMonthStart.AddMonths(-1),E.LatesMonthEnd=E.LatesMonthStart.AddMonths(1).AddDays(-1))}}static SetPayrollDate_1(v,E,L=0){this.SetPayrollDate(v,E,L)}static CheckIsWeeklyOffFromDef(v,E,L,I){if(null!=I&&I.length>0){let Ce,ie=1,ce=E;for(;ce<=L;){for(Ce=ce.AddDays(6);ce<=Ce&&ce<=L;){if(p.IsEmpty(I[0]["Week"+ie.toString()+"_W1"].toString())||ce.getDayName().toString().toLowerCase()!=I[0]["Week"+ie.toString()+"_W1"].toString().toLowerCase()){if(!p.IsEmpty(I[0]["Week"+ie.toString()+"_W2"].toString())&&ce.getDayName().toString().toLowerCase()==I[0]["Week"+ie.toString()+"_W2"].toString().toLowerCase()&&ce.ToString("dd MMM yyyy")==v.ToString("dd MMM yyyy"))return!0}else if(ce.ToString("dd MMM yyyy")==v.ToString("dd MMM yyyy"))return!0;ce=ce.AddDays(1)}ie++}}return!1}static GetPayrollStructureBasedonEmployee(v,E){let L,I,ie,ce={PayrollMonth:L,PayrollMonthStart:I,PayrollMonthEnd:ie};if(p.SetPayrollDate_1(E,ce),L=ce.PayrollMonth,I=ce.PayrollMonthStart,ie=ce.PayrollMonthEnd,A.d.SessionManager.Preferences.ContainsKey("ConsiderGlobalPreferencesBasedOnGrade")&&"True"==A.d.SessionManager.Preferences.ConsiderGlobalPreferencesBasedOnGrade){let z=0;if(z=this.GetEmployeeGrade(v.toString(),L,I,ie),z>0){let N={PayrollMonth:L,PayrollMonthStart:I,PayrollMonthEnd:ie};p.SetPayrollDate(E,N,z),L=N.PayrollMonth,I=N.PayrollMonthStart,ie=N.PayrollMonthEnd}}let Ce=L.ToString("dd MMM yyyy"),he=I.ToString("dd MMM yyyy"),se=ie.ToString("dd MMM yyyy");return A.d.common.GetDataSet3("PAY049",v.toString(),Ce,he+","+se)}static GetEmployeeGrade(v,E,L,I){let ie=A.d.common.GetDataSet3("PAY128",v.toString(),E.ToString("dd MMM yyyy")),ce=0;if(null!=ie&&ie.Tables.length>0&&ie.Tables[0].length>0){let Ce=ie.Tables[0].filter(he=>he.EmpSeqNo==v.toString());null!=Ce&&Ce.length>0&&(ce=parseInt(Ce[0].GradeID))}return ce}static _orderByComparator(v,E,L="string"){if(isNaN(parseFloat(v))||!isFinite(v)||isNaN(parseFloat(E))||!isFinite(E)){if(v.toLowerCase()<E.toLowerCase())return-1;if(v.toLowerCase()>E.toLowerCase())return 1}else{if(parseFloat(v)<parseFloat(E))return-1;if(parseFloat(v)>parseFloat(E))return 1}return 0}static OnSort(v,E){if(console.log("calling pipe"),!Array.isArray(v))return v;if(!Array.isArray(E)||Array.isArray(E)&&1==E.length){var L=Array.isArray(E)?E[0]:E,I="-"==L.substr(0,1);if(!L||"-"==L||"+"==L)return I?v.sort().reverse():v.sort();var ie="+"==L.substr(0,1)||"-"==L.substr(0,1)?L.substr(1):L;return v.sort(function(ce,Ce){return I?-this._orderByComparator(ce[ie],Ce[ie]):this._orderByComparator(ce[ie],Ce[ie])})}return v.sort(function(ce,Ce){for(var he=0;he<E.length;he++){var z=E[he].name,N="string",ee=E[he].desc?-this._orderByComparator(ce[z],Ce[z],N):this._orderByComparator(ce[z],Ce[z],N);if(0!=ee)return ee}})}static SetPersonalize(v,E,L=parseInt(A.d.SessionManager.CompanyIndex)){let I="PactRevPersonalSettings_"+L;0!=L&&(I+="_"+A.d.SessionManager.UserName);let ie=JSON.parse(localStorage.getItem(I));ie||(ie={}),ie[v]=E,localStorage.setItem(I,JSON.stringify(ie)),A.d.SessionManager.PersonalSettings.ContainsKey(v)?A.d.SessionManager.PersonalSettings[v]=E:A.d.SessionManager.PersonalSettings.Add(v,E)}static UpdatePersonalize(v){A.d.SessionManager.PersonalSettings.Clear();let E="PactRevPersonalSettings_0",L=localStorage.getItem(E),I=L?JSON.parse(L):{};if(I||(I={}),localStorage.setItem(E,JSON.stringify(I)),Object.keys(I).forEach(ie=>{A.d.SessionManager.PersonalSettings.Add(ie,I[ie])}),0!=v){let ie="PactRevPersonalSettings_"+v+"_"+A.d.SessionManager.UserName,ce=localStorage.getItem(ie),Ce=ce?JSON.parse(ce):{};Ce||(Ce={}),localStorage.setItem(ie,JSON.stringify(Ce)),Object.keys(Ce).forEach(he=>{A.d.SessionManager.PersonalSettings.Add(he,Ce[he])})}}static GetEmptyDate(){let v=new Date;return v.setHours(0,0,0,0),v.setMonth(0),v.setDate(1),v.setFullYear(1),v}static DTComputeSUM(v,E,L){let I=0,ie=v;if(L){let ce=this.GetEmptyDate(),Ce=0;for(let se=0;se<ie.length;se++){let z=p.Double(ie[se][E]).ToString("00").split(".");ce=ce.AddHours(p.Double(z[0])),z.length>1&&(1==z[1].length&&(z[1]=z[1]+"0"),ce=ce.AddMinutes(p.Double(z[1])))}let he=ce.getMinutes().toString();return 1==he.length&&(he="0"+he),Ce=p.Double(24*(ce.getDate()-1)+ce.getHours()+"."+he),Ce}for(let ce=0;ce<ie.length;ce++)p.IsEmpty(ie[ce][E])||(I+=p.Double(ie[ce][E]));return I}static SUMHoursAndMinutes(v,E){let L=p.GetEmptyDate(),I=0,ie=p.Double(v).ToTime("00.00").split(".");L=L.AddHours(p.Double(ie[0])),ie.length>1&&(1==ie[1].length&&(ie[1]=ie[1]+"0"),L=L.AddMinutes(p.Double(ie[1]))),ie=p.Double(E).ToTime("00.00").split("."),L=L.AddHours(p.Double(ie[0])),ie.length>1&&(1==ie[1].length&&(ie[1]=ie[1]+"0"),L=L.AddMinutes(p.Double(ie[1])));let ce=L.getMinutes().toString();return 1==ce.length&&(ce="0"+ce),I=p.Double(24*(L.getDate()-1)+L.getHours()+"."+ce),I}static GetYearsMonthsDays1(v,E,L){for(L.iY=0,L.iM=0,L.iD=0,E=E.AddDays(1);;){if(!((v=v.AddYears(1))<=E)){v=v.AddYears(-1);break}L.iY++}for(;;){if(!((v=v.AddMonths(1))<=E)){v=v.AddMonths(-1);break}L.iM++}L.Days=E.Subtract(v).Days}static GetYearsMonthsDays(v,E,L){let I,ce,Ce;v>(E=E.AddDays(1))?(ce=E,Ce=v):(ce=v,Ce=E),I=0,ce.getDate()>Ce.getDate()&&(I=[31,-1,31,30,31,30,31,31,30,31,30,31][ce.getMonth()+1-1]),-1==I&&(I=ce.IsLeapYear()?29:28),0!=I?(L.iD=Ce.getDate()+I-ce.getDate(),I=1):L.iD=Ce.getDate()-ce.getDate(),ce.getMonth()+I>Ce.getMonth()?(L.iM=Ce.getMonth()+12-(ce.getMonth()+I),I=1):(L.iM=Ce.getMonth()-(ce.getMonth()+I),I=0),L.iY=Ce.getFullYear()-(ce.getFullYear()+I)}static StringFormat(v,...E){return v.replace(/{(\d+)}/g,(L,I)=>E[I]||"")}static NumArray(v,E){return new Array(v).fill(0).map(()=>new Array(E).fill(0))}static Array(v,E){return new Array(v).fill(null).map(()=>new Array(E).fill(null))}static IntTryParse(v){var E=0;return null==v||null==v||""===v||(v.replace&&v.indexOf(",")>=0&&(v=v.replace(/,/g,"")),E=isNaN(v)?0:parseInt(v)),E}static Int(v){var E=0;return null==v||null==v||""===v||(v.replace&&v.indexOf(",")>=0&&(v=v.replace(/,/g,"")),E=isNaN(v)?0:parseInt(v)),E}static IsNum(v){return null!=v&&null!=v&&""!==v&&(v.replace&&v.indexOf(",")>=0&&(v=v.replace(/,/g,"")),isFinite(v))}static DoubleTryParse(v){var E=0;return null==v||null==v||""===v||(v.replace&&v.indexOf(",")>=0&&(v=v.replace(/,/g,"")),E=isNaN(v)?0:parseFloat(v)),E}static Double(v){var E=0;return null==v||null==v||""==v||(v.replace&&v.indexOf(",")>=0&&(v=v.replace(/,/g,"")),E=isNaN(v)?0:parseFloat(v)),E}static DoubleBool(v){var E=!1;return null==v||null==v||""==v||(v.replace&&v.indexOf(",")>=0&&(v=v.replace(/,/g,"")),isNaN(v)?E=!1:(parseFloat(v),E=!0)),E}static Round(v,E){return parseFloat(v.ToString("N"+E))}static StringIsNullOrEmpty(v){return null===v||""===v||void 0===v}static copyToClipboard(v){const E=document.createElement("input");E.value=v,document.body.appendChild(E),E.select(),document.execCommand("copy"),document.body.removeChild(E)}static IsEmpty(v){return null===v||""===v||void 0===v}static GetFileType(v){return["mp4","avi","mov","webm","wmv","flv","gv","mp3","mkv","mpeg-2","mpeg-4","ogg","f4v","avchd","swf"].includes(v.toLowerCase())?"V":["jpg","jpeg","png","gif","bmp","tiff","tif","svg","webp","heic","dng"].includes(v.toLowerCase())?"F":"0"}static convertTime12to24(v){var E=Number(v.match(/^(\d+)/)[1]),L=Number(v.match(/:(\d+)/)[1]),I=v.match(/\s(.*)$/)[1];"PM"==I&&E<12&&(E+=12),"AM"==I&&12===E&&(E-=12);var ie=E.toString(),ce=L.toString();return E<10&&(ie="0"+ie),L<10&&(ce="0"+ce),ie+":"+ce}static ParseDate(v){if(p.IsEmpty(v)&&(v=""),v instanceof Date)return v;!A.d.IsAndroid&&A.d.IsNativeMobile&&(v=v.ToString().Replace("/","-"));let E=new Date(v),L=!1;return"number"==typeof v||(isNaN(Date.parse(v))&&(E=new Date(v.Replace("/","-")),isNaN(Date.parse(v.Replace("/","-")))&&(L=!1)),"Invalid Date"!=E.toString()&&(L=!0),L||(v.Contains("AM")?v=v.Replace("AM"," AM"):v.Contains("PM")&&(v=v.Replace("PM"," PM")),E=new Date(v),"Invalid Date"!=E.toString()&&(L=!0))),E}static parseFlexibleDate(v){if(!v)return null;const E=(v=v.trim()).match(/^(\d{1,2}):(\d{2})$/);if(E){const L=new Date;return L.setHours(parseInt(E[1])),L.setMinutes(parseInt(E[2])),L.setSeconds(0),L}return this.ParseDate(v)}static IsNullOrWhiteSpace(v){return null===v||""===v||void 0===v||""==v.toString().trim()}static IsEmptySpace(v){return null===v||""===v||void 0===v||""==v.trim()}static StringValue(v){return null===v||""===v||void 0===v?"":v.toString()}static decryptUsingAES(v){const E=D.AES.decrypt(v,this.key,{iv:this.iv,mode:D.mode.CBC,padding:D.pad.Pkcs7});return JSON.parse(E.toString(D.enc.Utf8))}static String(v){return null===v||""===v||void 0===v?"":v.toString()}static IntegerValue(v){return null===v||""===v||void 0===v?0:v}static LowerCase(v){return null===v||""===v||void 0===v?"":v.toString().toLowerCase()}static Format(v,...E){if(null===v||""===v||void 0===v)return"";for(let L=0;L<E.length;L++)v=v.replace("{"+L+"}",E[L]);return v}static SetComboFilter(v,E,L){return v.startsWith("PARENTID",0)?L=L.filter(I=>I.PARENTID==E):v.startsWith("CostCenterID",0)?L=L.filter(I=>I.CostCenterID==E):v.startsWith("ServiceTypeID",0)&&(L=L.filter(I=>I.ServiceTypeID==E)),L}static stringCompare(v,E,L=!1){return v==E||L&&v.toLowerCase()==E.toLowerCase()?0:-1}static IsDigit(v){return/^[0-9]$/.test(v)}static rgbColor(v){return null!=v&&null!=v&&9==v.length&&v.startsWith("#")&&(v="#00FFFFFF"==v?"#FFFFFF00":"#"+v.substr(3)),v}ValidateInt(v){try{let E=Number(v);return!Number.isNaN(E)}catch{return!1}}ValidateLong(v){try{let E=Number(v);return!Number.isNaN(E)}catch{return!1}}ValidateDecimal(v){try{let E=parseFloat(v);return 0===E||E>0||E<0}catch{return!1}}static GetXamlText(v){if(null==v)return"";let E="";if(v.startsWith("<FlowDocument")){v=v.replace('xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"',"");let L=new R;L.LoadXml(v);let I=L.SelectNodes("FlowDocument/Paragraph");if(null!=L.DocumentElement.ColumnGap&&"1"==L.DocumentElement.ColumnGap.Value)E="[Image]";else if(0==I.length){I=L.SelectNodes("FlowDocument/List/ListItem");for(let ie=0;ie<I.length;ie++)E+=I[ie].textContent}else for(let ie=0;ie<I.length;ie++)E+=I[ie].textContent}else E=v;return E}static IsValidEmailAddress(v){return!1}static ValidateDouble(v){try{let E=parseFloat(v);return 0===E||E>0||E<0}catch{return!1}}static ValidateInt(v){try{let E=parseInt(v);return 0===E||E>0||E<0}catch{return!1}}static isValidDate(v){let E=!1;if(""!==v&&null!=v&&0!=v&&1!=v&&"1"!==v){let L=p.ParseDate(v);isNaN(Date.parse(v))&&(L=p.ParseDate(v.Replace("/","-")),isNaN(Date.parse(v.Replace("/","-")))&&(E=!1)),"Invalid Date"!==L.toString()&&(E=!0),E||(v.Contains("AM")?v=v.Replace("AM"," AM"):v.Contains("PM")&&(v=v.Replace("PM"," PM")),"Invalid Date"!==p.ParseDate(v).toString()&&(E=!0))}return E}static isDateOrNum(v){if(""!==v&&null!=v&&0!=v){if(p.Double(v).toString()==p.Double(v).toString())return!1;let L=p.ParseDate(v);return L&&"NaN"!=L.toString()&&"Invalid Date"!==L.toString()}return!1}static DaysInMonth(v,E){return new Date(v,E+1,0).getDate()}static GetSignatureImagePath(v){let E="";try{let L=null,I=null;A.d.SessionManager.Preferences.ContainsKey("DigitalSignGridData")&&""!=A.d.SessionManager.Preferences.DigitalSignGridData&&A.d.SessionManager.Preferences.DigitalSignGridData.length>0&&(L=[],L.ReadXml(A.d.SessionManager.Preferences.DigitalSignGridData),null!=L&&L.Tables[0].length>0&&(I=L.Tables[0].finc(ie=>ie.Name==v),null!=I&&I.length>0&&null!=I[0].ActualFileName&&null!=I[0].ActualFileName&&""!=I[0].ActualFileName.toString()&&(E=x.GetLogPath(I[0].FileName.toString()))))}catch(L){Logger.ErrorLog("EXCEPTION :  Util : GetSignatureImagePath().. While adding Graphic to the Digital Signature.\r\n"+L)}return E}static GetGlobalPrefFilePath(v,E){let L="";return L=A.d.SessionManager.Preferences.ContainsKey("UseGlobalPrefForFileUploadPath")&&"1"==A.d.SessionManager.Preferences.UseGlobalPrefForFileUploadPath?A.d.SessionManager.Preferences["File Upload Path"]:"",""}static GetNoOfDays_1(v,E,L,I,ie,ce){let z,Ce=0,he=0,se=0,N=E;if(Ce=this.GetDateDifference(L,E)+1,!I)return Ce;{let ee=v.Tables[0],Z=v.Tables[1],fe=A.d.SessionManager.Preferences.WeeklyOffsDefBasedOn.split(","),U=" 1=1 ",Ee="",Me="";if(null!=fe&&fe.length>0)for(let Re=0;Re<fe.length;Re++)null!=fe[Re]&&""!=fe[Re]&&(Me+="dcCCNID"+(parseInt(fe[Re])-5e4)+",",Ee="dcCCNID"+(parseInt(fe[Re])-5e4),U+=" AND ( "+Ee+"="+ie[Ee+"_Key"]+" OR "+Ee+"= 1)");if(N=E,ee=U,null!=ee&&ee.length>0)for(;N<=L;)this.CheckIsWeeklyOffFromDef_2(N,ee)&&he++,N=N.AddDays(1);if(fe=A.d.SessionManager.Preferences.HolidaysBasedOn.split(","),U=" 1=1 ",Ee="",Me="",null!=fe&&fe.length>0)for(let Re=0;Re<fe.length;Re++)null!=fe[Re]&&""!=fe[Re]&&(Me+="dcCCNID"+(parseInt(fe[Re])-5e4)+",",Ee="dcCCNID"+(parseInt(fe[Re])-5e4),U+=" AND ( "+Ee+"="+ie[Ee+"_Key"]+" OR "+Ee+"= 1)");for(N=E;N<=L;)z=Z.find(Re=>Re.HolidayDate==N.ToString("dd/MMM/yyyy")&&U),null!=z&&z.length>0&&se++,N=N.AddDays(1)}return Ce-(he+se)}static GetNoOfDays(v,E,L,I,ie,ce,Ce,he=!1,se=!1){let fe,U,z=10,N=0,ee=18,Z=0;if(A.d.SessionManager.Preferences.ContainsKey("PMStartTime")&&""!=A.d.SessionManager.Preferences.PMStartTime&&A.d.SessionManager.Preferences.ContainsKey("PMEndTime")&&""!=A.d.SessionManager.Preferences.PMEndTime){let ct=p.ParseDate("01 Jan 2022 "+A.d.SessionManager.Preferences.PMStartTime),ot=p.ParseDate("01 Jan 2022 "+A.d.SessionManager.Preferences.PMEndTime);z=ct.getHours(),N=ct.getMinutes(),ee=ot.getHours(),Z=ot.getMinutes()}if(se){let ct=p.GetDateDifference(L,E)+1;fe=new Date(E.getFullYear(),E.iMonth(),E.getDay(),z,N,0),U=new Date(E.getFullYear(),E.iMonth(),E.getDay(),ee,Z,0),ie.dcAlpha30=parseFloat(U.Subtract(fe).Hours+"."+(1==U.Subtract(fe).Minutes.toString().length?"0"+U.Subtract(fe).Minutes.toString():U.Subtract(fe).Minutes.toString())),ie.dcAlpha17=ct.ToString(),ie.dcAlpha31=ct*parseFloat(U.Subtract(fe).Hours+"."+(1==U.Subtract(fe).Minutes.toString().length?"0"+U.Subtract(fe).Minutes.toString():U.Subtract(fe).Minutes.toString())),0==E.getHours()&&0==E.getMinutes()&&0==L.getHours()&&0==L.getMinutes()||(z=E.getHours(),N=E.getMinutes(),ee=L.getHours(),Z=L.getMinutes())}fe=new Date(E.getFullYear(),E.iMonth(),E.getDay(),z,N,0),U=new Date(E.getFullYear(),E.iMonth(),E.getDay(),ee,Z,0),Ce.odWHrs=0,Ce.odHrsPerDay=parseFloat(U.Subtract(fe).Hours+"."+(1==U.Subtract(fe).Minutes.toString().length?"0"+U.Subtract(fe).Minutes.toString():U.Subtract(fe).Minutes.toString()));let st,Ee=0,Me=0,Re=0,je=E;if(Ee=this.GetDateDifference(L,E)+1,!I){for(;je.Date()<=L.Date();)fe=new Date(je.getFullYear(),je.iMonth(),je.getDay(),z,N,0),U=new Date(je.getFullYear(),je.iMonth(),je.getDay(),ee,Z,0),E.Date()==je.Date()&&L.Date()==je.Date()?Ce.odWHrs+=parseFloat(L.Subtract(E).Hours+"."+(1==L.Subtract(E).Minutes.toString().length?"0"+L.Subtract(E).Minutes.toString():L.Subtract(E).Minutes.toString())):E.Date()==je.Date()?Ce.odWHrs+=parseFloat(U.Subtract(E).Hours+"."+(1==U.Subtract(E).Minutes.toString().length?"0"+U.Subtract(E).Minutes.toString():U.Subtract(E).Minutes.toString())):U.Date()==L.Date()?Ce.odWHrs+=parseFloat(L.Subtract(fe).Hours+"."+(1==L.Subtract(fe).Minutes.toString().length?"0"+L.Subtract(fe).Minutes.toString():L.Subtract(fe).Minutes.toString())):Ce.odWHrs+=parseFloat(U.Subtract(fe).Hours+"."+(1==U.Subtract(fe).Minutes.toString().length?"0"+U.Subtract(fe).Minutes.toString():U.Subtract(fe).Minutes.toString())),je=je.AddDays(1);return Ee}{let ct=v.Tables[0],ot=v.Tables[1],Pe=A.d.SessionManager.Preferences.WeeklyOffsDefBasedOn.split(","),we=" 1=1 ",w="",Le="";if(null!=Pe&&Pe.length>0)for(let Ke=0;Ke<Pe.length;Ke++)null!=Pe[Ke]&&""!=Pe[Ke]&&(Le+="dcCCNID"+(parseInt(Pe[Ke])-5e4)+",",w="dcCCNID"+(parseInt(Pe[Ke])-5e4),ct=ct.filter(he?xe=>xe[w]==ie[w]||1==xe[w]:xe=>xe[w]==ie[w+"_Key"]||1==xe[w]));if(Pe=A.d.SessionManager.Preferences.HolidaysBasedOn.split(","),we=" 1=1 ",w="",Le="",null!=Pe&&Pe.length>0)for(let Ke=0;Ke<Pe.length;Ke++)null!=Pe[Ke]&&""!=Pe[Ke]&&(Le+="dcCCNID"+(parseInt(Pe[Ke])-5e4)+",",w="dcCCNID"+(parseInt(Pe[Ke])-5e4),ot=ot.filter(he?xe=>xe[w]==ie[w]||1==xe[w]:xe=>xe[w]==ie[w+"_Key"]||1==xe[w]));for(;je.Date()<=L.Date();)fe=new Date(je.getFullYear(),je.iMonth(),je.getDay(),z,N,0),U=new Date(je.getFullYear(),je.iMonth(),je.getDay(),ee,Z,0),st=ot.filter(Ke=>Ke.HolidayDate==je.Date().ToString("dd/MMM/yyyy")),null!=st&&st.length>0?Re++:this.CheckIsWeeklyOffFromDef_2(je.Date(),ct)?Me++:E.Date()==je.Date()&&L.Date()==je.Date()?Ce.odWHrs+=parseFloat(L.Subtract(E).Hours+"."+(1==L.Subtract(E).Minutes.toString().length?"0"+L.Subtract(E).Minutes.toString():L.Subtract(E).Minutes.toString())):E.Date()==je.Date()?Ce.odWHrs+=parseFloat(U.Subtract(E).Hours+"."+(1==U.Subtract(E).Minutes.toString().length?"0"+U.Subtract(E).Minutes.toString():U.Subtract(E).Minutes.toString())):U.Date()==L.Date()?Ce.odWHrs+=parseFloat(L.Subtract(fe).Hours+"."+(1==L.Subtract(fe).Minutes.toString().length?"0"+L.Subtract(fe).Minutes.toString():L.Subtract(fe).Minutes.toString())):Ce.odWHrs+=parseFloat(U.Subtract(fe).Hours+"."+(1==U.Subtract(fe).Minutes.toString().length?"0"+U.Subtract(fe).Minutes.toString():U.Subtract(fe).Minutes.toString())),je=je.AddDays(1)}return Ee-(Me+Re)}static CheckImageSize(v,E,L){let I="";try{let ie=0,ce=0;A.d.SessionManager.IsWebApplication&&v.length>0&&(ie=E/1048576,"V"!=L&&A.d.SessionManager.Preferences.ContainsKey("AttachmentMaxSize")&&""!=A.d.SessionManager.Preferences.AttachmentMaxSize?(ce=p.IntTryParse(A.d.SessionManager.Preferences.AttachmentMaxSize.toString()),ce>0&&parseInt(ie.toString())>ce&&(I="Image size should be less than "+ce.toString()+" MB")):"V"==L&&A.d.SessionManager.Preferences.ContainsKey("VideoAttachmentMaxSize")&&""!=A.d.SessionManager.Preferences.VideoAttachmentMaxSize&&(ce=p.IntTryParse(A.d.SessionManager.Preferences.VideoAttachmentMaxSize.toString()),ce>0&&parseInt(ie.toString())>ce&&(I="Video size should be less than "+ce.toString()+" MB")))}catch{}return I}static CheckIsWeeklyOffFromDef_2(v,E){if(null!=E&&E.length>0){let Ce,L=1,I=new Date(v.getFullYear(),v.getMonth(),1),ie=new Date(v.getFullYear(),v.getMonth(),v.DaysInMonth()),ce=I;for(;ce<=ie;){for(Ce=ce.AddDays(6);ce<=Ce&&ce<=ie;){if(p.hasprop(E,"Week"+L.toString()+"_W1")&&!p.IsEmpty(E[0]["Week"+L.toString()+"_W1"].toString())&&ce.getDay().toString().toLowerCase()==E[0]["Week"+L.toString()+"_W1"].toString().toLowerCase()){if(ce.Date==v.Date)return!0}else if(p.hasprop(E,"Week"+L.toString()+"_W2")&&!p.IsEmpty(E[0]["Week"+L.toString()+"_W2"].toString())&&ce.getDay().toString().toLowerCase()==E[0]["Week"+L.toString()+"_W2"].toString().toLowerCase()&&ce.Date==v.Date)return!0;ce=ce.AddDays(1)}L++}}return!1}static GetDateDifference(v,E){let L=this.diffparseDate(v),I=this.diffparseDate(E);var ie=Math.abs(L-I);return Math.round(ie/864e5)}static GetTimeSpan(v,E){let L=this.diffparseDate(v),I=this.diffparseDate(E);return Math.round((L-I)/864e5)}static addMonths(v,E){const L=new Date(v),I=L.getMonth();return L.setMonth(I+E),L.getMonth()!==(I+E)%12&&L.setDate(0),L}static OnUploadAttachment(v,E){let I="",Ce=v.target.files[0],he=v.target.files[0].name.split("."),se=v.target.files[0].name;he.length>1&&(he=he[he.length-1]),p.IsEmpty(he)||(I=p.GetFileType(he));let z=p.CheckImageSize(v.target.value,v.target.files[0].size,I);if(""!=z)return void alert(z);let N=new FormData;N.append("ImageUpload",Ce),N.append("FileUpload",Ce),N.append("UserName",A.d.SessionManager.UserID),N.append("FolderPath",p.String(E.FolderPath));const ee=new FileReader;ee.onload=Z=>{const fe=new Image;if("pdf"==he||"txt"==he||"doc"==he||"csv"==he||"docx"==he||"doc"==he||"xls"==he||"xlsx"==he)return E.DisplayMessage=A.d.GetResource("File_NoPhoto"),void(E.MessageVisibility=!0);fe.src=Z.target.result,fe.onload=U=>{let Ee=Z.target.result;v.srcElement.value="",p.IsEmpty(Ee)||setTimeout(()=>{A.d.common.UploadAttachments(N).subscribe(Me=>{let Re=Me;"Error In File Save"==Re&&alert(Re),"AddEditAccountViewModel"==E.ClassName?E.AccountPhoto=p.GetPath(Re,p.String(E.FolderPath)):"AddEditAccountViewModel"==E.ClassName&&(E.ProductPhoto=p.GetPath(Re,p.String(E.FolderPath))),E.ActualFileName=se,E.FileExtension=he,E.IsPhotoChanged=!0,E.PhotoTextVisibility=!1,E.DisplayMessage="",E.MessageVisibility=!1},Me=>{console.log("Error : "+JSON.stringify(Me))})},100)}},ee.readAsDataURL(Ce)}static GetDatesTotalMinutes(v,E){return Math.floor((v.getTime()-E.getTime())/1e3/60)}static GetDatesTotalSeconds(v,E){return Math.floor((v.getTime()-E.getTime())/1e3)}static diffparseDate(v){if("dd/MM/yyyy"==A.d.SessionManager.Preferences["Date Format"]){if(!this.StringIsNullOrEmpty(v)&&v.toString().Contains("/")){var I=v.split("/");return p.ParseDate(I[1]+"/"+I[0]+"/"+I[2])}return p.ParseDate(v)}return p.ParseDate(v)}static IsLeapYear(v){try{return v%4==0&&v%100!=0||v%400==0}catch{return!1}}static GeoLocation(){var v=this;return(0,m.A)(function*(){const E=yield J.L.getCurrentPosition();return yield v.GetUsersCurrentAddress(E)})()}static DataUrlToFile(v,E){return(0,m.A)(function*(){const I=yield(yield fetch(v)).blob();return new File([I],E,{type:"image/png"})})()}static UserCurrentLocation(){return(0,m.A)(function*(){try{console.log("UserCurrentLocation:begin");const v=yield J.L.getCurrentPosition();return console.log("UserCurrentLocation end: "+v),v}catch{return""}})()}static GetUsersCurrentAddress(v){return(0,m.A)(function*(){try{console.log("GetUsersCurrentAddress:In");let E=A.d.SessionManager.GOLOC_APIURL+v.coords.latitude+"+"+v.coords.longitude+"&key="+A.d.SessionManager.GOLOC_APIKey;return console.log("Url Opencage Data:"+E),yield A.d.common.GetGeoLocation(E)}catch{return""}})()}static GetGeoLocation(v){return A.d.common.GetGeoLocation(v).promise()}static IsType(v,E){return null!=v&&null!=v&&("AddEditDocumentViewModel"==v.ClassName||"PopupAttachmentsViewModel"==v.ClassName||"AddEditAccountViewModel"==v.ClassName||"AddCostCenterViewModel"==v.ClassName||"AddProductScreenViewModel"==v.ClassName||"AddEditEmpMasterViewModel"==v.ClassName||"ActivitiesViewModel"==v.ClassName||"AddEditRenContractViewModel"==v.ClassName||"DocumentFlowDefination"==v.ClassName)}static PlaySound(v){let E=new Audio;E.src="../../assets/images/menu/"+v,E.load(),E.play()}}class R{constructor(){this.parser=new DOMParser,this.Tables=[],this.Columns=[]}get DocumentElement(){if(this.doc)return this.doc.children[0]}LoadXml(v){this.doc=this.parser.parseFromString(v,"text/xml")}SelectSingleNode(v){if(!this.doc)return null;if(this.doc.evaluate)return this.doc.evaluate(v,this.doc).iterateNext();{let E=this.doc;return E.setProperty("SelectionLanguage","XPath"),E.selectNode(v)}}SelectSingleNodeText(v){let E=this.SelectSingleNode(v);return null!=E?E.innerHTML:null}SelectNodes(v,E=null){let L=[];if(!this.doc)return L;if(this.doc.evaluate){let I=this.doc.evaluate(v,this.doc),ie=I.iterateNext();for(;ie;)L.push(ie),ie=I.iterateNext()}else{let I=this.doc;I.setProperty("SelectionLanguage","XPath"),L=I.selectNodes(v)}return L}getNodeByName(v,E){return v.querySelector(E)}getDateByNodeName(v,E){let L=v.querySelector(E);return null!=L?L.innerHTML:null}getNodeData(v){return null==v?"":v.innerHTML}getNodeXml(v){return v.outerHTML}static SelectSingleNode(v,E){if(!E.Contains("/"))return v.querySelector(E);{let L=R.SelectNodes(v,E);if(L.length>0)return L[0]}return null}static SelectSingleNodeText(v,E){let L="";if(E.Contains("/")){let I=R.SelectNodes(v,E);I.length>0&&(L=I[0].innerHTML)}else{let I=v.querySelector(E);I&&(L=I.innerHTML)}return L}static SelectSingleNodeXml(v,E){let L=v.querySelector(E);return L?L.outerHTML:""}static getNodeData(v){return null==v?"":v.innerHTML}static SelectNodes(v,E){let ie,L=E.Trim("/").split("/"),ce=new G.G9;ce.Add(0,[v]);for(let Ce=0;Ce<L.length;Ce++){ce.Add(Ce+1,[]);for(let he=0;he<ce[Ce].length;he++)ie=R.GetNodes(ce[Ce][he],L[Ce]),ie.length>0&&ce[Ce+1].AddRange(ie)}return ce[L.length]}static RemoveChild(v,E){v.removeChild(E)}static GetNodes(v,E){let L=[];for(let I=0;I<v.children.length;I++)v.children[I].tagName==E&&L.push(v.children[I]);return L}AppendChild(v,E){const L=this.parser.parseFromString(E,"application/xml");v.appendChild(L.firstChild)}static AppendChild(v,E){const L=(new DOMParser).parseFromString(E,"application/xml");v.appendChild(L.firstChild)}ReadXml(v){if(this.Tables.Clear(),this.Columns.Clear(),this.doc=this.parser.parseFromString(v,"text/xml"),this.Tables.push([]),this.Columns.push([]),this.doc.children[0].children.length>0){let E,L,I=this.doc.children[0].children;for(let ie=0;ie<I.length;ie++){E={};for(let ce=0;ce<I[ie].attributes.length;ce++)L=I[ie].attributes[ce],this.Columns[0].includes(L.name)||this.Columns[0].push(L.name),E[L.name]=L.value;this.Tables[0].push(E)}}}ReadXmlDataset(v){if(this.Tables.Clear(),this.Columns.Clear(),this.doc=this.parser.parseFromString(v,"text/xml"),this.Tables.push([]),this.Columns.push([]),this.doc.children[0].children.length>0){let E,L,I=this.doc.children[0].children;for(let ie=0;ie<I.length;ie++)E={},this.Columns[0].includes("Row_Id")||this.Columns[0].push("Row_Id"),E.Row_Id=ie,this.Tables[0].push(E);this.Columns[1]=[],this.Tables[1]=[];for(let ie=0;ie<I.length;ie++){E={};for(let ce=0;ce<I[ie].children[0].attributes.length;ce++)L=I[ie].children[0].attributes[ce],this.Columns[1].includes(L.name)||this.Columns[1].push(L.name),E[L.name]=L.value;this.Tables[1].push(E)}}}}class le{static GetFlowString(v){let E="";try{let L,I=this.GetParsedFlowDocument(v);for(let ie=0;ie<I.DocumentElement.childNodes.length;ie++){let Ce,ce=I.DocumentElement.childNodes[ie];ie>0&&(E+="\r\n"),L=null!=ce.attributes.IsTR&&"1"==ce.attributes.IsTR.value;for(let he=0;he<ce.childNodes.length;he++){let se=ce.childNodes[he];if(Ce=se.textContent,null!=se.firstChild&&"LineBreak"==se.firstChild.nodeName){let z=ce.CloneNode(!1);for(se.RemoveChild(se.firstChild);he<ce.childNodes.length;)z.AppendChild(ce.childNodes[he]);I.DocumentElement.InsertAfter(z,ce);break}if("Floater"==se.tagName){let z=null;if(null!=se.firstChild&&"BlockUIContainer"==se.firstChild.nodeName&&null!=se.firstChild.firstChild&&"Image"==se.firstChild.firstChild.nodeName&&(z=se.firstChild.firstChild),null!=z){let N=0,ee=0;try{if(N=p.Int(z.attributes.Width.value),ee=p.Int(z.attributes.Height.value),I.DocumentElement.attributes.ColumnGap&&1==p.Int(I.DocumentElement.attributes.ColumnGap.value)&&!p.IsEmpty(z.attributes.Source.value)){let Z=z.attributes.Source.value.split("/");return"@@@"+Z[Z.length-1]+"@@@"}}catch(Z){Logger.ErrorLog("RPT:: Rich Text Image Print Error",Z)}}}else L&&he>0&&(E+=", "),E+=Ce}}}catch{}return E}static GetParsedFlowDocument(v){let E=new R;E.LoadXml(v);try{for(let L=0;L<E.DocumentElement.children.length;L++){let I=E.DocumentElement.children[L];"Table"==I.tagName&&"TableRowGroup"==I.lastChild.nodeName&&(I.lastChild.childNodes.forEach(ie=>{let ce='<Paragraph IsTR="1">';ce+="</Paragraph>";let Ce=(new DOMParser).parseFromString('<Paragraph IsTR="1"></Paragraph>',"application/xml");ie.childNodes.forEach(he=>{}),E.DocumentElement.insertBefore(Ce,I)}),L+=I.lastChild.childNodes.length-1,E.DocumentElement.removeChild(I))}}catch{}return E}}class j{constructor(){this.handlerRef=[],this.Tag=null,this.item=null,this._interval=0,this._Enabled=!1,this.obj=null,this.methodname=null}get Interval(){return this._interval}set Interval(v){this._interval=v,this._interval>0?this.start():this.stop()}set Enabled(v){this._Enabled=v,v?this.start():this.stop()}Tick(v,E){this.Elapsed(v,E)}Elapsed(v,E){this.obj=v,this.methodname=E,this.start()}CustomElapsed(v,E,L){this.obj=v,this.methodname=E,this.item=L,this.start()}start(){if(this._interval>0&&this._Enabled&&this.obj&&this.methodname&&this.obj[this.methodname])if(this.stop(),p.IsEmpty(this.item)){let v=setInterval(()=>this.obj[this.methodname](),this._interval);this.handlerRef.push(v)}else{let v=setInterval(()=>this.obj[this.methodname](this.item),this._interval);this.handlerRef.push(v)}}stop(){for(let v=this.handlerRef.length-1;v>=0;v--)clearInterval(this.handlerRef[v]),this.handlerRef.pop()}}class F{constructor(){this.Double=[],this.Int=[],this.Date=[],this.Bool=[]}Clear(){this.Double.Clear(),this.Int.Clear(),this.Date.Clear(),this.Bool.Clear()}}},15082:(qe,be,t)=>{"use strict";t.d(be,{BZ:()=>q,Es:()=>oe,ZK:()=>ye,_p:()=>k,oN:()=>H,tO:()=>X,v4:()=>ue,y$:()=>Y});var m=t(4050),A=t(31168),G=t(9120),J=t(55028);class Y extends m.MI{constructor(O=0){super(),this.DisplayMember="Name",this.ValueMember="Value",this._SelectedValue=null,this.Items=[],this.SelectionChangedCommand=new m.Yk,this.LostFocusCommand=new m.Yk,this.OptionsSize=1,this.Text="",this.DBColumnID=O}static PactComboBoxData1(O){let B=new Y;return B.DBColumnID=O,B}static PactComboBoxData2(O,B,me){let D=new Y;return D.DBColumnName=O,D.DBColumnID=B,D.GroupName=me,D}static PactComboBoxData3(O,B){let me=new Y;return me.DBColumnName=O,me.FeatureID=B,me}static PactComboBoxData4(O,B){let me=new Y;return me.Visible=B,me.DBColumnID=O,me}AddItem(O,B){this.Items.forEach(me=>{}),this.Items.push(k.ComboBoxItems_2(O,B))}GetValidationError(O){if("SelectedValue"==O&&this.Mandatory){if(A.J0.StringIsNullOrEmpty(this.SelectedValue))return A.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||A.J0.StringIsNullOrEmpty(this.tabname)?G.d.translate.instant("Select")+" "+this.Label:G.d.translate.instant("Enter")+" "+this.Label+" at "+this.tabname;if("-399"!=this.SelectedValue.toString()&&isFinite(this.SelectedValue)&&parseInt(this.SelectedValue)<0)return G.d.translate.instant("Select")+" "+this.Label}return""}get SelectedValue(){return this._SelectedValue}set SelectedValue(O){if(this._SelectedValue!=O){if(this._SelectedValue=O,!A.J0.IsEmpty(this.Items)&&this.Items.length>0){let B=this.Items.find(me=>me[this.ValueMember]==this.SelectedValue);B&&(this.SelectedItem=B,this.SetSelectedIndex())}this.IsRendred&&this.SelectionChangedCommand.Call(this)}}GetText(){let O=this.Items.find(B=>B[this.ValueMember]==this.SelectedValue);return O?O[this.DisplayMember]:""}GetselectedItem(){return this.Items.find(O=>O[this.ValueMember]==this.SelectedValue)}Getvalue(O){let B=this.Items.find(me=>me[this.DisplayMember]==O);return B?B[this.ValueMember]:""}GetParentText(){return this.Items.forEach(O=>O.Value==this.SelectedValue?O.Parent:null),""}SetSelectedIndex(){let O=this.Items.find(B=>B[this.ValueMember]==this._SelectedValue);this.SelectedIndex=O?this.Items.indexOf(O):-1}SetSelectedItem(O){let B=this.Items.find(me=>me[this.ValueMember]==O);B&&(this.SelectedItem=B,this.SelectedValue!=O&&(this.SelectedValue=O))}SetSelectedItem_2(O,B){let me=this.Items.find(D=>D[this.ValueMember]==B&&D.Name==O);me&&(this.SelectedItem=me,this.SelectedValue!=B&&(this.SelectedValue=B))}static FillComboWithDefaultOption(O,B){this.FillComboWithDefaultOption_3(O,B,!1)}static FillComboWithDefaultOption_3(O,B,me){Logger.InfoLog("Administration:: Inside FillComboWithDefaultOption");try{me&&B.Items.Add(k.ComboBoxItems_2("","0")),null!=O&&O.length>0?O.forEach(D=>{B.Items.push(k.ComboBoxItems_2(D.Name.toString(),D.NodeID.toString())),A.J0.StringIsNullOrEmpty(D.IsDefault)||(0,J.yG0)(D.IsDefault)&&(B.SelectedValue=D.NodeID.toString(),B.DefaultValue=D.NodeID.toString())}):me&&(B.SelectedValue="0",B.DefaultValue="0")}catch{Logger.InfoLog("Administration:: Leaving FillComboWithDefaultOption")}Logger.InfoLog("Administration:: Leaving FillComboWithDefaultOption")}}class oe extends Y{constructor(O){super(O),this.ButtonClick=new m.Yk}}class X extends Y{constructor(O=0){super(),this.DBColumnID=O}static PactUOMBoxData_1(O){let B=new X;return B.DBColumnID=O,B}static PactUOMBoxData_2(O,B){let me=new X;return me.DBColumnName=O,me.DBColumnID=B,me}}class k{constructor(){this.Name="",this.Parent="",this.Value="",this.Status=!1,this.Aliasname="",this.CurrID=0,this.ExchgRate=0,this.Seq=0}static ComboBoxItems_1(O){let B=new k;return B.Name=O,B.Value=O,B}static ComboBoxItems_2(O,B){let me=new k;return me.Name=O,me.Value=B,me}static ComboBoxItems_3(O,B,me){let D=new k;return D.Name=O,D.Value=B,D.Parent=me,D}static ComboBoxItems_4(O,B,me,D){let x=new k;return x.Name=O,x.Value=B,x.Parent=me,x.Aliasname=D,x}static ComboBoxItems_5(O,B,me,D){let x=new k;return x.Name=O,x.Value=B,x.Status=me,x.Aliasname=D,x}static ComboBoxItems_6(O,B,me,D,x){let p=new k;return p.Name=O,p.Value=B,p.Status=me,p.Aliasname=D,p.Parent=x,p}static ComboBoxItems_7(O,B,me,D,x){let p=new k;return p.Name=O,p.Value=B,p.Parent=me,p.Aliasname=D,p.CurrID=x,p}static ComboBoxItems_8(O,B,me,D,x,p,W){let T=new k;return T.Name=O,T.Value=B,T.Status=me,T.Aliasname=D,T.CurrID=x,T.ExchgRate=p,T.Seq=W,T}static ComboBoxItems_9(O,B,me,D,x){let p=new k;return p.Name=O,p.Value=B,p.Parent=me,p.Aliasname=D,p.obj=x,p}}class H extends m.MI{constructor(O=""){super(),this.Name="",this.Code="",this.Value="",this.Parent="",this.IsChecked=!1,this.Type=0,this.Name=O}static CheckedListBoxItem_1(O){let B=new H;return B.Name=O,B.Value=O,B}static CheckedListBoxItem_2(O,B){let me=new H;return me.Name=O,me.Value=O,me.IsChecked=B,me}static CheckedListBoxItem_3(O,B){let me=new H;return me.Name=O,me.Value=B,me}static CheckedListBoxItem_4(O,B,me){let D=new H;return D.Name=O,D.Value=B,D.Parent=me,D}static CheckedListBoxItem_5(O,B,me){let D=new H;return D.Name=O,D.Value=B,D.IsChecked=me,D}static CheckedListBoxItem_6(O,B,me,D){let x=new H;return x.Name=O,x.Value=B,x.IsChecked=me,x.Type=D,x}static CheckedListBoxItem_7(O,B,me,D,x){let p=new H;return p.Name=O,p.Code=B,p.Value=me,p.IsChecked=D,p.Type=x,p}}class ue extends m.MI{constructor(O=0){super(),this.CheckedChangedCommand=new m.Yk,this.cmnItem_Click=new m.Yk,this.Height=200,this._SelectedValue=null,this.SelectedIndex=0,this.OnlyGroup=!1,this.Items=[],this._SelectAll=!1,this.DBColumnID=O}static CheckedListBoxData_1(O,B){let me=new ue(0);return me.DBColumnName=O,me.FeatureID=B,me}get SelectedValue(){return this._SelectedValue}set SelectedValue(O){this._SelectedValue!=O&&(this._SelectedValue=O,this.SetSelectedIndex())}get SelectAll(){return this._SelectAll}set SelectAll(O){this._SelectAll!=O&&(this._SelectAll=O,this.Items.map(B=>B.IsChecked=O))}SetSelectedIndex(){let O=this.Items.find(B=>B.Value==this.SelectedValue);this.SelectedIndex=O?this.Items.indexOf(O):-1}GetSelectedSting(){let O="";return this.Items.filter(B=>B.IsChecked).forEach(B=>{O.length>0&&(O+=","),O+=B.Value}),O}}class q extends ue{constructor(){super(...arguments),this.CheckedChangedCommand=new m.Yk}CheckedListBoxComboData(){this.CodeNameCombo=new Y(0),this.CodeNameCombo.Items.push(k.ComboBoxItems_2("Code","Code")),this.CodeNameCombo.Items.push(k.ComboBoxItems_2("Name","Name")),this.CodeNameCombo.SelectedValue="Name"}CheckedListBoxComboData_1(O){this.CodeNameCombo=new Y(0),this.CodeNameCombo.Items.push(k.ComboBoxItems_2("Code","Code")),this.CodeNameCombo.Items.push(k.ComboBoxItems_2("Name","Name")),this.CodeNameCombo.SelectedValue="Name",this.DBColumnID=O}}class ye extends Y{constructor(){super(...arguments),this.ClickCommand=new m.Yk}static PactStausComboData_1(O){let B=new ye;return B.DBColumnID=O,B}}},4050:(qe,be,t)=>{"use strict";t.d(be,{MI:()=>J,X2:()=>X,Yk:()=>Y,dp:()=>oe});var m=t(10467),A=t(43794),G=t(31168);class J{constructor(H=0){this.DisableLbl=!0,this.IsRendred=!1,this.Action=0,this.SectionSeqNo=0,this.Calculate=!1,this.OnsetFocus=new Y,this._SetFocus=!1,this.IsColumnUserDefined=!1,this.Expression=null,this.DBColumnID=0,this.FontSize=11,this._mandatory=!1,this.Enable=!0,this.IsReadOnly=!1,this.IsTabStop=!0,this.Visible=!0,this._FieldExpression=null,this._ForeGround="#333333",this.ToolTipDescription="",this.ToolTipFooterTitle="",this.FeatureID=0,this.Row=0,this.Column=0,this.ColumnSpan=1,this.RowSpan=1,this.Mode=0,this.CrFilter=0,this.DbFilter=0,this.AccDimInUse=!1,this.Dependantinuse=!1,this.MinChar=null,this.MaxChar=null,this.drrLocalRef=null,this.ControlDataXML="",this.DBColumnID=H}get ShowControl(){return!(this.DisableLbl&&(!this.Enable||this.IsReadOnly))}set SetFocus(H){this._SetFocus=H,this._SetFocus&&this.OnsetFocus.IsSubscribed&&this.OnsetFocus.Call()}get SetFocus(){return this._SetFocus}get Mandatory(){return this._mandatory}set Mandatory(H){this._mandatory!=H&&(this._mandatory=H,H&&this.Label?this.Label.endsWith("*")||(this.Label+=" *"):!H&&this.Label&&(this.Label.endsWith(" *")?this.Label=this.Label.substring(0,this.Label.length-2):this.Label.endsWith("*")&&(this.Label=this.Label.substring(0,this.Label.length-1))))}get Lbl(){return G.J0.StringIsNullOrEmpty(this._Lbl)?this.Mandatory&&!G.J0.StringIsNullOrEmpty(this.Label)&&this.Label.endsWith("*")?this.Label.substring(0,this.Label.length-2).Replace(" ",""):G.J0.StringIsNullOrEmpty(this.Label)?"":this.Label.Replace(" ",""):this._Lbl}set Lbl(H){this._Lbl=H.Replace(" ","")}get FieldExpression(){return this._FieldExpression}set FieldExpression(H){this._FieldExpression=H.replace(" ","")}get ForeGround(){return this._ForeGround}set ForeGround(H){this._ForeGround=H.replace(" ",""),9==this._ForeGround.length&&(this._ForeGround.startsWith("#FF")||this._ForeGround.startsWith("#ff"))&&(this._ForeGround="#"+this._ForeGround.substr(3))}get FormulaLbl(){return G.J0.StringIsNullOrEmpty(this._FormulaLbl)?this.Mandatory&&!G.J0.StringIsNullOrEmpty(this.Label)&&this.Label.endsWith("*")?this.Label.substr(0,this.Label.length-1).Replace(" ",""):G.J0.StringIsNullOrEmpty(this.Label)?"":this.Label.Replace(" ",""):this._FormulaLbl}set FormulaLbl(H){this._FormulaLbl=H.Replace(" ","")}IsValid(){return!0}SetLocalReference(H){this.drrLocalRef=H,this.LocalRefXML="";let ue=[];H.forEach(q=>{ue.some(ye=>ye.hasOwnProperty(q.LinkData))||(this.LocalRefXML+='<R LinkID="'+q.LinkData.toString()+'"/>',ue.push(q.LinkData.toString()))}),this.LocalRefXML.length>0&&(this.LocalRefXML="<XML>"+this.LocalRefXML+"</XML>")}}class Y{Destroy(H){try{H.UnSubscribe()}catch{}}constructor(){this.CommandSubscribers=[],this.CommandSubject=new A.B,this.IsHandler=!1}get Command(){return this.CommandSubject.asObservable()}get IsSubscribed(){return this.CommandSubscribers.length>0}Subscribe(H,ue,q=void 0){if(!G.J0.IsEmpty(H[ue])){this.obj=H,this.methodName=ue,this.methodArgs=q;let ye=this.Command.subscribe(re=>{try{H[ue](re)}catch(O){console.log(O.stack)}});this.CommandSubscribers.push(ye)}}Handler(H,ue){G.J0.IsEmpty(H[ue])?console.log("Delegate Subscribe Error: ",ue):(this.IsHandler=!0,this.obj=H,this.methodName=ue)}UnSubscribe(){this.CommandSubscribers.length>0&&(this.CommandSubscribers[0].unsubscribe(),this.CommandSubscribers.pop())}Call(H=null,ue=null,q=null){try{if(this.IsHandler)return this.obj[this.methodName](H,ue,q);if(this.IsSubscribed)return G.J0.IsEmpty(this.methodArgs)?this.obj[this.methodName](H,ue,q):this.obj[this.methodName](this.methodArgs)}catch(ye){if("PactException"==ye.message)throw new Error("PactException");console.log(ye.stack)}}}class oe{constructor(){this.CommandSubject=new A.B,this.IsBusy=!1,this.Cancel=!1}get Command(){return this.CommandSubject.asObservable()}DoWork(H,ue){G.J0.IsEmpty(H[ue])?console.log("Worker Error: ",ue):(this.obj=H,this.methodName=ue,this.Command.subscribe(ye=>{try{H[ue](ye)}catch(re){console.log(re.stack)}}))}RunAsync(){var H=this;return(0,m.A)(function*(){try{yield H.CommandSubject.next(H)}catch(ue){console.log(ue.stack),alert("Worker Call Error @ "+(H.methodName?H.methodName:""))}})()}}class X{constructor(){this.PopUpGUID="",this.SelectedPrinter="",this.Message="",this.ClassName="PrinterList"}}},86821:(qe,be,t)=>{"use strict";t.d(be,{B:()=>A});var m=t(4050);class A extends m.MI{constructor(){super(...arguments),this.ClickCommand=new m.Yk}}},21050:(qe,be,t)=>{"use strict";t.d(be,{bQ:()=>k,cM:()=>q,gH:()=>H,nx:()=>X,o9:()=>ue,y$:()=>oe});var m=t(4050),A=t(31168),G=t(9120),J=t(86821),Y=t(9439);class oe extends m.MI{constructor(re=0){super(),this.OnRefresh=new m.Yk,this.OnPactListBoxValueChanged=new m.Yk,this.OnPactListBoxCodeTextChanged=new m.Yk,this.ValueSelected=new m.Yk,this.OnSelectButton=new m.Yk,this.t=new A.M4,this.SelectionChangedCommand=new m.Yk,this.onFocusCommand=new m.Yk,this.onFocusOutCommand=new m.Yk,this.IsRendred=!1,this.GridViewID=0,this.SearchVisible=!1,this.DivisionId=0,this.LocationID=0,this.PreviousSelectedValue=0,this._selectedvalue=0,this.OnSelectionChange=new m.Yk,this.QtyWhere="",this.IsAutoLoad=!1,this._SelectedValueText="",this.SelectedIndex=0,this.CCID=0,this.InActiveItems=0,this.RefreshData=!1,this.ExcludeFilter=!1,this.TypeID=0,this._SelectedValueChanged=!1,this.IsPartiralData=!0,this.DBColumnID=re,this.t.Tick(this,"t_Tick"),this.SelectionChangedCommand.Subscribe(this,"onchanged"),this.t.Interval=2e3,this.t.Tick(this,"t_Tick")}static PactListBoxData_1(re){let O=new oe;return O.DBColumnID=re,O}static PactListBoxData_2(re,O,B){let me=new oe;return me.DBColumnID=O,me.DBColumnName=re,me.GroupName=B,me.FeatureID=O,me}static PactListBoxData_3(re,O){let B=new oe;return B.DBColumnID=O,B.DBColumnName=re,B.FeatureID=O,B}t_Tick(re,O){this.t.Enabled=!1,this.OnPactListBoxValueChanged.Call(this)}onchanged(re){null!=this.OnPactListBoxValueChanged&&null!=re&&this.PreviousSelectedValue!=this.SelectedValue&&(this.t.Enabled=!1,this.PreviousSelectedValue=this.SelectedValue,this.t.Enabled=!0)}SetTimeToZero(re=200){this.t.Interval=re}GetValidationError(re){return this.Mandatory&&(this.SelectedValue<1||""==this.Text&&this.Visible)?A.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||A.J0.StringIsNullOrEmpty(this.tabname)?G.d.translate.instant("Select")+" "+this.Label:G.d.translate.instant("Select")+" "+this.Label+" at "+this.tabname:""}get SelectedValue(){return this._selectedvalue}set SelectedValue(re){this._selectedvalue!=re&&(this._selectedvalue=re,this.IsAutoLoad||(this.SelectedValueChanged=!this.SelectedValueChanged),null==this.SelectionChangedCommand&&null!=this.OnPactListBoxValueChanged&&this.PreviousSelectedValue!=this.SelectedValue&&(this.t.Enabled=!1,this.PreviousSelectedValue=this.SelectedValue,this.t.Enabled=!0),0==re&&this.onchanged(this))}get CodeText(){return this._CodeText}set CodeText(re){this._CodeText!=re&&(this._CodeText=re,null!=this.OnPactListBoxCodeTextChanged&&this.OnPactListBoxCodeTextChanged.Call(this))}get SelectedValueText(){return this._SelectedValueText}set SelectedValueText(re){this._SelectedValueText!=re&&(this._SelectedValueText=re,this.SelectedValueChanged=!this.SelectedValueChanged,!this.IsAutoLoad&&this.CCID>5e4&&(this.SelectedValueChanged=!this.SelectedValueChanged))}Refresh(){this.RefreshData=!this.RefreshData,this.OnRefresh.Call(this)}get SelectedValueChanged(){return this._SelectedValueChanged}set SelectedValueChanged(re){this._SelectedValueChanged!=re&&(this._SelectedValueChanged=re,this.ValueSelected.IsSubscribed&&this.ValueSelected.Call())}}class X extends oe{constructor(){super()}static UOMPactListBoxData_1(re){let O=new X;return O.DBColumnID=re,O}}class k extends m.MI{constructor(re){super(),this.SelectionChangedCommand=new m.Yk,this.ClickCommand=new m.Yk,this.Text=null,this.Dialog=null,this.drrEdit=null,this.dtEditHistory=null,this.drwControl=null,this.DivisionId=0,this.LocationID=0,this.PreviousSelectedValue=0,this.SelectedValue=0,this.ParentCostCenterID=0,this.CCID=0,this.HistoryCCID=0,this.RefreshData=!1,this.ExcludeFilter=!1,this.TypeID=0,this.EditData=null,this.DBColumnID=re}GetValidationError(re){return this.Mandatory&&(this.SelectedValue<1||""==this.Text&&this.Visible)?A.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||A.J0.StringIsNullOrEmpty(this.tabname)?G.d.translate.instant("Select")+" "+this.Label:this.SelectedValue>0?"":G.d.translate.instant("Select")+" "+this.Label+" at "+this.tabname:""}SetValue(re){if(this.SelectedValue=re,0==re)this.Text="";else{let O=k.GetCodeName(this.CCID,re);null!=O&&O.Tables.length>0&&O.Tables[0].length>0&&(this.Text=O.Tables[0][0][O.Columns[0][2]])}}SetValue_2(re,O){this.SelectedValue=re,this.Text=O}Clear(re){this.XML=null,this.drrEdit=null,this.Text="",null!=this.Dialog&&this.Dialog.Clear(),A.J0.IsEmpty(re)||this.SetValue(re)}static GetCodeName(re,O){return G.d.common.GetCodeName(re,O)}}class H extends m.MI{constructor(re){super(),this.IsFirstLetterCaps=!1,this.IsAllCaps=!1,this.IgnoreSpaces=!1,this.PrevSelValu=0,this.ListVisible=!1,this.TextVisible=!1,this.SelectedValueChanged=!1,this.TypeID=0,this.CCID=0,this.DBColumnID=re,this.Code=oe.PactListBoxData_1(re)}ValidateData(){if(this.Mandatory){if(this.TextVisible&&A.J0.IsNullOrWhiteSpace(this.Text))return G.d.translate.instant("Enter")+" "+this.Label;if(this.Code.Visible&&A.J0.IsNullOrWhiteSpace(this.Code.Text))return G.d.translate.instant("Enter")+" "+this.Label}return""}}class ue extends m.MI{constructor(){super(...arguments),this.Unit=new oe(0),this.UnitCheckStatus=new J.B(0),this.MultiUnits=new J.B(0),this.IsMultiunit=!1,this.multiVisi=!1,this.MultipleUnits=new Y.Dw(0)}}class q extends m.MI{constructor(){super(),this.Customer=new oe(24238),this.CustomerChagne=new J.B(0),this.ChangeVisible=!1,this.Customer.RefreshDataDel=new m.Yk}}},9439:(qe,be,t)=>{"use strict";t.d(be,{Dw:()=>ue,Je:()=>me,L6:()=>D,R0:()=>re,W7:()=>O,Z_:()=>q,hV:()=>ye,lT:()=>p,nW:()=>x,s3:()=>B});var m=t(10467),A=t(4050),G=t(15082),J=t(31168),Y=t(9120),oe=t(18088),X=t(58040),k=t(48955),H=t(5011);class ue extends A.MI{constructor(T=0){super(),this.ClassName="PactTextBoxData",this.isSKU=!1,this._Textd=0,this.IsPwd=!1,this._text="",this.IgnoreSpaces=!1,this.IsFirstLetterCaps=!1,this.IsAllCaps=!1,this.LostFocusCommand=new A.Yk,this.TextChangedCommand=new A.Yk,this.DBColumnID=T}static PactTextBoxData_1(T){let R=new ue;return R.DBColumnID=T,R.Mandatory=!1,R}static PactTextBoxData_2(T,R){let le=new ue;return le.DBColumnName=T,le.FeatureID=R,le}get Textd(){return this._Textd}set Textd(T){(this._Textd!=T||0==T&&this._text!=T.toString())&&(this._text=J.J0.DoubleTryParse(T).toString(),this._Textd=J.J0.DoubleTryParse(T))}get Text(){return this._text}set Text(T){this._text!=T&&(("INT"==this.DataType||"FLOAT"==this.DataType)&&(this._Textd=J.J0.Double(T)),null==T||null==T?this._text="":J.J0.String(T).startsWith("<FlowDocument")?(this.Xaml=T,this.Tag=T,this._text=J.J0.GetXamlText(T.toString())):(this._text=this.IsFirstLetterCaps&&!J.J0.String(T).startsWith("<FlowDocument")?this.MakeTitle(T):this.IsAllCaps&&!J.J0.String(T).startsWith("<FlowDocument")?T.toUpperCase():T,""!=this._text&&this.IgnoreSpaces&&(this._text=this._text.Replace(" ","")),J.J0.String(T).startsWith("<FlowDocument")||this.CheckChars(),J.J0.IsEmpty(this.Expression)||J.J0.IsEmpty(this.ViewFieldColor)?!J.J0.IsEmpty(this.FieldExpression)&&!J.J0.IsEmpty(this.LableFieldColor)&&this.ValidateFieldExpression(this._text,this.FieldExpression,this.LableFieldColor):this.ValidateFieldExpression(this._text,this.Expression,this.ViewFieldColor)),this._text=Y.d.SessionManager.PactSanitize(T))}PactTextBox_KeyDown(T,R){R.ctrlKey&&89===R.which&&Y.d.page.ShowDialog(this,X.PactRichTextBoxComponent,{ShowCenter:!0,Title:"Editor"})}CheckChars(){}ValidateFieldExpression(T,R,le){try{let F,j=new oe.bT;F=null!=this.Lbl?this.Lbl.Replace(" ",""):"";let ne=new k.Nl(F,"");j.push(F,ne),j[F].setFieldValue(T),this.ForeGround="1"==Y.d.eval.EvaluateExpression(R,j).toString().toString()?le:"#333333"}catch(j){console.log(j.Message)}}MakeTitle(T){if(!J.J0.StringIsNullOrEmpty(T)){let R=T.split(" ");for(let le=0;le<R.length;le++)!R[le]&&R[le].length>0&&(R[le]=R[le][0].toString().toUpperCase()+R[le].substring(1).toLowerCase());return R.join(" ")}return""}GetValidationError(T){if("Text"===T){if(this.Mandatory&&null!=this.Text&&J.J0.IsNullOrWhiteSpace(this.Text))return Y.d.translate.instant("Enter")+" "+this.Label;if(null!=this.DataType&&null!=this.Text&&""!=this.Text)if("INT"==this.DataType){if(!isFinite(this.Text))return Y.d.translate.instant("Invalid")+" "+this.Label}else if("FLOAT"==this.DataType){if(!isFinite(this.Text))return Y.d.translate.instant("Invalid")+" "+this.Label}else if("DATETIME"==this.DataType&&!(Date.parse(this.Text)>0))return Y.d.translate.instant("Invalid")+" "+this.Label}return""}static GetValidTextXml(T){return null===T||""===T||void 0===T?"":(T.replace&&(T=(T=(T=(T=(T=(T=T.Replace("'","''")).Replace("<br>","&lt;")).Replace("&","&amp;")).Replace("'","&apos;")).Replace('"',"&quot;")).Replace("<","&lt;")),T)}static GetValidXml(T){return null===T||""===T||void 0===T?"":(T.replace&&(T=(T=(T=(T=(T=T.Replace("<br>","&lt;")).Replace("&","&amp;")).Replace("'","&apos;")).Replace('"',"&quot;")).Replace("<","&lt;")),T)}ValidateData(){if(this.Mandatory&&J.J0.IsNullOrWhiteSpace(this.Text))return J.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||J.J0.StringIsNullOrEmpty(this.tabname)?Y.d.translate.instant("Enter")+" "+this.Label:Y.d.translate.instant("Enter")+" "+this.Label+" at "+this.tabname;if(null!=this.DataType&&null!=this.Text&&""!=this.Text){if("INT"==this.DataType&&!isFinite(this.Text))return J.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||J.J0.StringIsNullOrEmpty(this.tabname)?Y.d.translate.instant("Invalid")+" "+this.Label:Y.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname;if("FLOAT"==this.DataType&&!isFinite(this.Text))return J.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||J.J0.StringIsNullOrEmpty(this.tabname)?Y.d.translate.instant("Invalid")+" "+this.Label:Y.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname;if("DATETIME"==this.DataType&&!(Date.parse(this.Text)>0))return J.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||J.J0.StringIsNullOrEmpty(this.tabname)?Y.d.translate.instant("Invalid")+" "+this.Label:Y.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname}if((this.MinChar>0||this.MaxChar>0)&&!J.J0.IsNullOrWhiteSpace(this.Text)){if(this.MinChar>0&&this.Text.trim().length<this.MinChar)return"Enter Min. Character of "+this.MinChar+" at "+this.Label;if(this.MaxChar>0&&this.Text.trim().length>this.MaxChar)return"Enter Max. Character of "+this.MaxChar+" at "+this.Label}return""}}class q extends ue{constructor(T=0){super(),this.ClassName="PactMobileImageBoxData",this.isSKU=!1,this.DBColumnID=T}}class ye extends A.MI{constructor(T=0){super(),this.Height="66",this.ClassName="PactTextAreaData",this._text="",this.IsFirstLetterCaps=!1,this.IsAllCaps=!1,this.IgnoreSpaces=!1,this.DBColumnID=T}static PactTextAreaData_1(T){let R=new ye;return R.DBColumnID=T,R.Mandatory=!1,R}static PactTextAreaData_2(T,R){let le=new ye;return le.DBColumnName=T,le.FeatureID=R,le}get Text(){return this._text}set Text(T){this._text!=T&&(null==T||null==T?this._text="":J.J0.String(T).startsWith("<FlowDocument")?(this.Xaml=T,this.Tag=T,this._text=J.J0.GetXamlText(T.toString())):(this._text=this.IsFirstLetterCaps&&!J.J0.String(T).startsWith("<FlowDocument")?this.MakeTitle(T):this.IsAllCaps&&!J.J0.String(T).startsWith("<FlowDocument")?T.toUpperCase():T,""!=this._text&&this.IgnoreSpaces&&(this._text=this._text.Replace(" ","")),J.J0.String(T).startsWith("<FlowDocument")||this.CheckChars()))}MakeTitle(T){if(!T){let R=T.split(" ");for(let le=0;le<R.length;le++)!R[le]&&R[le].length>0&&(R[le]=R[le][0].toString().toUpperCase()+R[le].substring(1).toLowerCase());return R.join(" ")}return""}ValidateData(){if(this.Mandatory&&J.J0.IsNullOrWhiteSpace(this.Text))return J.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||J.J0.StringIsNullOrEmpty(this.tabname)?Y.d.translate.instant("Enter")+" "+this.Label:Y.d.translate.instant("Enter")+" "+this.Label+" at "+this.tabname;if(null!=this.DataType&&null!=this.Text&&""!=this.Text){if("INT"==this.DataType&&!isFinite(this.Text))return J.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||J.J0.StringIsNullOrEmpty(this.tabname)?Y.d.translate.instant("Invalid")+" "+this.Label:Y.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname;if("FLOAT"==this.DataType&&!isFinite(this.Text))return J.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||J.J0.StringIsNullOrEmpty(this.tabname)?Y.d.translate.instant("Invalid")+" "+this.Label:Y.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname;if("DATETIME"==this.DataType&&!(Date.parse(this.Text)>0))return J.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||J.J0.StringIsNullOrEmpty(this.tabname)?Y.d.translate.instant("Invalid")+" "+this.Label:Y.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname}return""}PactTextBox_KeyDown(T,R){R.ctrlKey&&89===R.which&&Y.d.page.ShowDialog(this,X.PactRichTextBoxComponent,{ShowCenter:!0,Title:"Editor"})}CheckChars(){}}class re extends A.MI{constructor(T=0){super(),this.DBColumnID=T}PactRichTextBoxData_1(T){this.DBColumnID=T,this.Mandatory=!1}PactRichTextBoxData_2(T,R){this.DBColumnName=T,this.FeatureID=R}get Text(){return this._Text}set Text(T){this._Text!=T&&(this._Text=T)}get htmlcontent(){return this._htmlcontent}set htmlcontent(T){this._htmlcontent!=T&&(this._htmlcontent=T)}get DocumentText(){return this._DocumentText}set DocumentText(T){this._DocumentText!=T&&(this._DocumentText=T,this.onLoadHtml())}onLoadHtml(){var T=this;return(0,m.A)(function*(){if(!J.J0.IsEmpty(T.DocumentText)&&null!=T.DocumentText){let R=yield Y.d.common.ConvertXamlToHtml(T.DocumentText);T._htmlcontent=R.HtmlText}})()}get Tag(){return this._Tag}set Tag(T){this._Tag!=T&&(this._Tag=T)}GetValidationError(T){return"Text"===T&&this.Mandatory&&null!=this.Text&&J.J0.IsNullOrWhiteSpace(this.Text)?Y.d.GetResource("Enter")+" "+this.Label:""}ValidateData(){return this.Mandatory&&null!=this.Text&&J.J0.IsNullOrWhiteSpace(this.Text)?J.J0.IsEmpty(this.SectionID)||"2"!=this.SectionID||J.J0.IsEmpty(this.tabname)?Y.d.GetResource("Enter")+" "+this.Label:Y.d.GetResource("Enter")+" "+this.Label+" at "+this.tabname:""}}class O extends ue{get isValid(){return/^https?:\/\//.test(this.Text)}get Url(){return this._Url}set Url(T){this._Url!=T&&(this.validateUrl(),this._Url=T,this._text=T)}constructor(T=0){super(),this.isLoading=!1,this.DBColumnID=T}validateUrl(){this.isLoading=!0,this.errorMessage="",setTimeout(()=>{this.isValid||(this.errorMessage="Invalid URL Format"),this.isLoading=!1},1e3)}}class B extends A.MI{constructor(T=0){super(),this.prefID="CodePrefix",this.suffID="CodeSuffix",this.LostFocusCommand=new A.Yk,this.TextChangedCommand=new A.Yk,this.IsFirstLetterCaps=!1,this.IsAllCaps=!1,this.IgnoreSpaces=!1,this._PrefixCode="",this.PrefixVisibility=!1,this.PrefixEnable=!1,this.PrefixWidth=0,this._SuffixCode="",this.SuffixVisibility=!1,this.SuffixEnable=!1,this.SuffixWidth=0,this.ExceedsLimit=0,this.IsEnable_DB=!0,this.DBColumnID=T}static PactCodeData_1(T){let R=new B;return R.DBColumnID=T,R.Mandatory=!1,R}static PactCodeData_2(T,R){let le=new B;return le.DBColumnName=T,le.FeatureID=R,le}MakeTitle(T){if(!T){let R=T.split(" ");for(let le=0;le<R.length;le++)!R[le]&&R[le].length>0&&(R[le]=R[le][0].toString().toUpperCase()+R[le].substring(1).toLowerCase());return R.join(" ")}return""}get PrefixCode(){return this._PrefixCode}set PrefixCode(T){this._PrefixCode!=T&&(this._PrefixCode=null==T?"":T,this.PrefixCode=Y.d.SessionManager.PactSanitize(T))}get SuffixCode(){return this._SuffixCode}set SuffixCode(T){this._SuffixCode!=T&&(this._SuffixCode=null==T?"":T,this.SuffixCode=Y.d.SessionManager.PactSanitize(T))}ValidateData(){if(this.Mandatory&&J.J0.IsNullOrWhiteSpace(this.Text))return J.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||J.J0.StringIsNullOrEmpty(this.tabname)?Y.d.translate.instant("Enter")+" "+this.Label:Y.d.translate.instant("Enter")+" "+this.Label+" at "+this.tabname;if(null!=this.DataType&&null!=this.Text&&""!=this.Text){if("INT"==this.DataType&&!isFinite(this.Text))return J.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||J.J0.StringIsNullOrEmpty(this.tabname)?Y.d.translate.instant("Invalid")+" "+this.Label:Y.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname;if("FLOAT"==this.DataType&&!isFinite(this.Text))return J.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||J.J0.StringIsNullOrEmpty(this.tabname)?Y.d.translate.instant("Invalid")+" "+this.Label:Y.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname;if("DATETIME"==this.DataType&&!(Date.parse(this.Text)>0))return J.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||J.J0.StringIsNullOrEmpty(this.tabname)?Y.d.translate.instant("Invalid")+" "+this.Label:Y.d.translate.instant("Invalid")+" "+this.Label+" at "+this.tabname}return""}}class me extends ue{constructor(){super(),this.LostFocusCommand=new A.Yk,this.TextChangedCommand=new A.Yk,this.IsPwd=!0}static PactPasswordBoxData_1(T){let R=new me;return R.DBColumnID=T,R.Mandatory=!1,R}static PactPasswordBoxData_2(T,R){let le=new me;return le.DBColumnName=T,le.FeatureID=R,le}get Password(){return this.Text}set Password(T){this.Text=T}ValidateData(){return this.Mandatory&&J.J0.IsNullOrWhiteSpace(this.Password)?J.J0.StringIsNullOrEmpty(this.SectionID)||"2"!=this.SectionID||J.J0.StringIsNullOrEmpty(this.tabname)?Y.d.translate.instant("Enter")+" "+this.Label:Y.d.translate.instant("Enter")+" "+this.Label+" at "+this.tabname:""}}class D extends G.y${constructor(T=0){super(),this.TextWidth="0.45*",this.ComboWidth="0.55*",this.DBColumnID=T}static PactTextBoxWithComboData_1(T){let R=new D;return R.DBColumnID=T,R.Mandatory=!1,R}GetValidationError(){if(this.Mandatory){if(J.J0.StringIsNullOrEmpty(this.SelectedValue))return Y.d.translate.instant("Select")+" "+this.Label;if("FLOAT"==this.DataType&&!isFinite(this.Text))return Y.d.translate.instant("Invalid")+" "+this.Label}return""}}class x extends ue{constructor(){super(),this.ButtonClick=new A.Yk}static PactTextBoxLinkData_1(T){let R=new x;return R.DBColumnID=T,R.Mandatory=!1,R}}class p extends A.MI{constructor(T=0){super(),this.IgnoreSpaces=!1,this._text="",this.LostFocusCommand=new A.Yk,this.TextChangedCommand=new A.Yk,this.GPSClick=new A.Yk,this.DBColumnID=T,this.Mandatory=!1,this.GPSClick.Subscribe(this,"OnGPSClick")}static PactGPSData_2(T,R){let le=new p;return le.DBColumnName=T,le.FeatureID=R,le}get Text(){return this._text}set Text(T){this._text!=T&&(this._text=null==T?"":T,this.CheckChars())}CheckChars(){}static GetValidTextXml(T){return J.J0.IsEmpty(T)?"":T=(T=(T=(T=(T=T.Replace("'","''")).Replace("&","&amp;")).Replace("'","&apos;")).Replace('"',"&quot;")).Replace("<","&lt;")}static GetValidXml(T){return J.J0.IsEmpty(T)?"":T=(T=(T=(T=T.Replace("&","&amp;")).Replace("'","&apos;")).Replace('"',"&quot;")).Replace("<","&lt;")}ValidateData(){let T="";return this.Mandatory&&J.J0.IsNullOrWhiteSpace(this.Text)?J.J0.IsEmpty(this.SectionID)||"2"!=this.SectionID||J.J0.IsEmpty(this.tabname)?Y.d.GetResource("Enter")+" "+this.Label:Y.d.GetResource("Enter")+" "+this.Label+" at "+this.tabname:(J.J0.IsEmpty(this.Text)||this.Text.Contains(",")||(T="GPS should have latitude and longitude"),T)}OnGPSClick(T){var R=this;return(0,m.A)(function*(){if(console.log("PactGPSBox::Enter OnGPSClick"),!J.J0.IsEmpty(R.Text)&&(console.log("PactGPSBox::Enter Value >> "+R.Text),R.Text.Contains(","))){let le=R.Text.split(","),j=le[0],F=le[1];if(Y.d.SessionManager.Preferences.ContainsKey("GpsUrl")&&""!=Y.d.SessionManager.Preferences.GpsUrl.toString()){console.log("PactGPSBox::Gps Url is --\x3e> "+Y.d.SessionManager.Preferences.GpsUrl.toString());let ne=Y.d.SessionManager.Preferences.GpsUrl.toString();ne=ne.Replace("[lat]",j).Replace("[lng]",F),console.log("PactGPSBox::Gps Url is --\x3e> "+ne),Y.d.IsMobile&&Y.d.IsNativeMobile?yield H.P.open({url:ne,isPDF:!1,isExport:!1}):window.open(ne,"_blank"),console.log("PactGPSBox::Gps Url opened --\x3e> "+ne)}}console.log("PactGPSBox::Exiting OnGPSClick")})()}}},33588:(qe,be,t)=>{"use strict";t.d(be,{A:()=>H,aF:()=>X});var m=t(9120),A=t(55028),G=t(31168),J=t(15082),Y=t(90775);class X{constructor(){this.ISDoctype=0}}class H{GetRibbonView(){return m.d.common.getRibbonView().toPromise()}setRibbon(q){H.setRibbon(q.Table,m.d.SessionManager,q),m.d.admin.GetAllListViewsDef()}static setRibbon(q,ye,re=null){let O=[],B=q,me=0;if(ye.Is_SIMPLE_License&&this.GetSIMPLELicenseRibbon(q),this.UpdateDimensionGroups(q),null!=re){Logger.InfoLog("RibbonGenerator:: Start Ribbon Binding for User :"+m.d.SessionManager.UserName);let F=!0;!G.J0.IsEmpty(re.Table2)&&re.Table2.length>0&&(m.d.SessionManager.RoleActions=re.Table2),null!=re&&!G.J0.IsEmpty(re.Table1)&&re.Table1.length>0&&(m.d.SessionManager.LoadPreferences(re.Table1),m.d.SessionManager.Is_SIMPLE_License&&(m.d.SessionManager.CheckSimpleLicensedGlobalPreferences(),m.d.SessionManager.CheckSimpleLicenseGP(re.Table1))),G.J0.SetPayrollMonth(new Date,m.d.SessionManager),m.d.SessionManager.Preferences.ContainsKey("Header Menu")&&"1"==m.d.SessionManager.Preferences["Header Menu"]&&(F=!1),!G.J0.IsEmpty(re.Table5)&&re.Table5.length>0&&m.d.SessionManager.Preferences.ContainsKey("Hijri Date")&&""!=m.d.SessionManager.Preferences["Hijri Date"]&&(0,A.yG0)(m.d.SessionManager.Preferences["Hijri Date"])&&(m.d.SessionManager.HijriTable=re.Table5),m.d.SessionManager.Preferences.ContainsKey("ReportDate")&&"FinancialYear"==m.d.SessionManager.Preferences.ReportDate&&(m.d.SessionManager.ReportsFromDate=m.d.SessionManager.FinancialYearStartDate)}if(ye.IsVAT=ye.Preferences.ContainsKey("VATVersion"),("True"==G.J0.String(ye.LicenseSettings.GST)||ye.IsVAT)&&0==ye.RoleType&&"1"==ye.UserID&&(Promise.all([t.e(9924),t.e(1940),t.e(1851),t.e(8986),t.e(2993),t.e(333),t.e(44),t.e(6411),t.e(3540),t.e(5275),t.e(6833),t.e(855),t.e(7541),t.e(3495),t.e(2963),t.e(1206),t.e(2298),t.e(4784),t.e(220),t.e(6716),t.e(5744),t.e(6762),t.e(126),t.e(2409),t.e(4935),t.e(617),t.e(6395),t.e(4892),t.e(3018),t.e(9183),t.e(9710),t.e(2076),t.e(7038)]).then(t.bind(t,34657)).then(({})=>{}),"True"==G.J0.String(ye.LicenseSettings.GST)&&["GSTR-1","GSTR-1 Summary","GSTR-2","GSTR-3","ANX-1"].forEach(ne=>{B.push({DrpID:1,DrpName:ne,FARMID:-9e3+me,FeatureActionID:-9e3+me,FeatureActionName:ne,FeatureActionTypeID:-9e3+me,FeatureID:9e3,GroupID:9e3,GroupKeyTip:null,GroupName:"GST",GroupOrder:9e3,HasAccess:1,ImagePath:"REP_List-of-reports.png",ImageType:0,IsMobile:0,ItemCount:1,RibbonViewID:-1e4+me,ScreenName:ne,TabID:6,TabName:"BI Tool",TabOrder:6,ToolTipDesc:ne,ToolTipImg:"REP_List-of-reports.png",ToolTipTitle:ne}),me++}),ye.IsVAT)){let F=m.d.report.GetReport(2,0);me=20,F.Tables&&F.Tables.length>0&&F.Tables[0].forEach(ne=>{B.push({DrpID:1,DrpName:ne.ReportName,FARMID:-9e3+me,FeatureActionID:ne.ReportID,FeatureActionName:ne.ReportName,FeatureActionTypeID:-9e3+me,FeatureID:9001,GroupID:9001,GroupKeyTip:null,GroupName:"VAT",GroupOrder:9001,HasAccess:1,ImagePath:"REP_List-of-reports.png",ImageType:0,IsMobile:0,ItemCount:1,RibbonViewID:-1e4+me,ScreenName:ne.ReportName,TabID:6,TabName:"BI Tool",TabOrder:6,ToolTipDesc:ne.ReportName,ToolTipImg:"REP_List-of-reports.png",ToolTipTitle:ne.ReportName}),me++})}let D=m.d.report.GetDashBoard(2,0),x=null,p=2e4,W={};if(D.Tables.length>0&&D.Tables[0].forEach(F=>{let ne=B.find(v=>499==v.FeatureID&&v.FeatureActionTypeID==F.DashBoardID);ne&&B.Remove(ne)}),2==m.d.SessionManager.RoleType){let F=B.find(ne=>2==ne.FeatureID);F&&B.Remove(F)}let R,le,j,T=B.find(F=>3681==F.FeatureActionID);T?(m.d.SessionManager.DocFlowMenu=new X,Object.assign(m.d.SessionManager.DocFlowMenu,T),B.Remove(T)):m.d.SessionManager.DocFlowMenu=null,T=B.find(F=>3682==F.FeatureActionID),T?(m.d.SessionManager.StickyNotes=new X,Object.assign(m.d.SessionManager.StickyNotes,T),B.Remove(T)):m.d.SessionManager.StickyNotes=null,T=B.find(F=>3769==F.FeatureActionID),T?(m.d.SessionManager.ResetPassword=new X,Object.assign(m.d.SessionManager.ResetPassword,T),B.Remove(T)):m.d.SessionManager.ResetPassword=null,D.Tables.length>0&&D.Tables[0].forEach(F=>{x=F.GroupName.toString(),W[x]||(W[x]=++p);let ne={DrpID:1,DrpName:F.DashBoardName,FARMID:-9e3+me,FeatureActionID:parseInt(F.DashBoardID),FeatureActionName:F.DashBoardName,FeatureActionTypeID:parseInt(F.DashBoardID),FeatureID:499,GroupID:W[x],GroupKeyTip:null,GroupName:F.GroupName.toString(),GroupOrder:W[x],HasAccess:1,ImagePath:"REP_List-of-reports.png",WebIcon:"fa-chart-pie-simple fa-thin",ImageType:0,IsMobile:0,ItemCount:1,RibbonViewID:-1e4+me,ScreenName:F.DashBoardName,TabID:1,TabName:"Home",TabOrder:1,ToolTipDesc:F.DashBoardName,ToolTipImg:"REP_List-of-reports.png",ToolTipTitle:F.DashBoardName};B.push(ne)}),ye.MenuTabs=[];try{let F=ye.ModsTemp.split("~");ye.RoleType>1&&(B.forEach(ne=>{498==ne.FeatureID||50==ne.FeatureID?(ne.GroupID=40,ne.MOrder=40):499==ne.FeatureID?(ne.GroupID=0,ne.MOrder=0):ne.FeatureID>4e4&&ne.FeatureID<5e4?(ne.GroupID=20,ne.MOrder=20):(ne.GroupID=10,ne.MOrder=10)}),B.SortBy(["MOrder"])),B.forEach(ne=>{(F.Contains(ne.TabID.toString())||null!=ye.SplitMods&&ye.SplitMods.Contains(ne.TabID.toString()))&&(R=0!=ye.RoleType&&O.length>0?O[0]:O.find(E=>E.TabID==ne.TabID),R||(R={},R.TabID=ne.TabID,R.TabName=1==ye.RoleType?"Employee Portal":2==ye.RoleType?"Vendor Portal":3==ye.RoleType?"Customer Portal":5==ye.RoleType?"Vendor KYC":ne.TabName,1==ne.TabID?R.Icon="fa-thin fa-chart-tree-map":2==ne.TabID?R.Icon="fa-thin fa-coins":3==ne.TabID||3001==ne.TabID||3002==ne.TabID||3003==ne.TabID?R.Icon="fa-thin fa-cart-flatbed-boxes":4==ne.TabID?R.Icon="fa-thin fa-gear":5==ne.TabID?R.Icon="fa-thin fa-hand-holding-hand":6==ne.TabID?R.Icon="fa-thin fa-chart-bar":7==ne.TabID?R.Icon="fa-thin fa-ruler-combined":9==ne.TabID?(R.Icon="fa-thin fa-gear",R.TabName="Admin"):R.Icon=12==ne.TabID?"fa-thin fa-building":13==ne.TabID?"fa-thin fa-users":14==ne.TabID?"fa-thin fa-torii-gate":"fa-thin fa-user",R.Groups=[],O.push(R)),le=R.Groups.find(E=>E.GroupID==ne.GroupID),le||(le={},le.GroupID=ne.GroupID,le.GroupName=ne.GroupName,le.WebIcon=ne.WebIcon,le.IsCollapse=!1,le.Items=[],le.IsVisible=!0,R.Groups.push(le)),j=new X,j.ScreenName=ne.ScreenName,G.J0.IsEmpty(ne.RDrpName)||(j.DisplayName=ne.RDrpName),j.FeatureActionID=ne.FeatureActionID,j.FeatureActionTypeID=ne.FeatureActionTypeID,j.FeatureID=ne.FeatureID,j.RibbonViewID=ne.RibbonViewID,j.ImagePath="assets/images/menu/"+ne.ImagePath,j.WebIcon=ne.WebIcon,j.WebIcon||(j.WebIcon="fa-file fa-thin"),j.ToolTipTitle=ne.ToolTipTitle,j.ScreenType=ne.TabID,ne.DocumentType&&(j.ISDoctype=ne.DocumentType),j.KeyTip=ne.ButtonKeyTip,le.Items.find(E=>E.ScreenName==ne.ScreenName)||(13==ne.TabID&&113==ne.GroupID?m.d.SessionManager.Preferences.ContainsKey("EnableIncomeTax")&&(0,A.yG0)(m.d.SessionManager.Preferences.EnableIncomeTax)&&le.Items.push(j):le.Items.push(j)))})}catch(F){ye.Logger.ErrorLog(F.stack)}O.forEach(F=>{F.TabIDSort=F.TabID,(3001==F.TabID||3002==F.TabID||3003==F.TabID)&&(F.TabIDSort=3)}),O.SortBy(["TabIDSort","TabID"]),ye.MenuTabs=O,m.d.page.QuickDocumentData=new Y.uI,m.d.IsNativeMobile||this.FillFavourites(B)}static FillFavourites(q){m.d.SessionManager.FavouritesMenu.Visible=!1,m.d.SessionManager.FavouritesMenu.Items.Clear();let ye=q.find(re=>3136==re.FeatureActionID);if(ye){Object.assign(m.d.SessionManager.FavouritesMenu,ye);let re=!1;m.d.SessionManager.MenuTabs.forEach(O=>{re||O.Groups.forEach(B=>{re||B.Items.find(D=>3136==D.FeatureActionID)&&(re=!0)})}),q.Remove(ye),m.d.SessionManager.FavouritesMenu.Visible=!0,m.d.admin.GetFavorite("GETLIST"+m.d.SessionManager.LocationID,0,!0).subscribe(O=>{if(null!=O&&O.Tables.length>0&&O.Tables[0].length>0){let B,me,D;0==m.d.SessionManager.RoleType&&m.d.IsMobile&&(B={},B.TabID=1234,B.TabName="Favourites",B.Icon="fa-light fa-star",B.Groups=[],me={},me.GroupID=123456,me.GroupName="Favourites",me.IsCollapse=!1,me.Items=[],me.IsVisible=!0,B.Groups.push(me)),O.Tables[0].forEach(x=>{m.d.SessionManager.FavouritesMenu.Items.push(J._p.ComboBoxItems_2(x.FavName.toString(),x.ID.toString())),me&&(D=new X,D.ScreenName=x.FavName.toString(),D.FeatureActionID=3136,D.FeatureActionTypeID=x.ID.toString(),D.FeatureID=5,D.RibbonViewID=0,D.ImagePath="assets/images/menu/ADM_Favorite.png",me.Items.push(D))}),B&&(m.d.SessionManager.MenuTabs.length>1?m.d.SessionManager.MenuTabs.InsertAt(B,1):m.d.SessionManager.MenuTabs.push(B))}})}}static UpdateDimensionGroups(q){}static GetSIMPLELicenseRibbon(q){let ye,re;if(!G.J0.IsEmpty(q.length>0&&q[0].LicSIMPLE)&&q.length>0){ye=q.filter(O=>3==O.TabID&&6==O.GroupID&&O.LicSIMPLE),null!=ye&&ye.length>0&&(re=JSON.parse(JSON.stringify(ye[0])),re.TabName="Purchase",re.TabID=3002,re.GroupID=3006,re.FARMID="0",q.push(re));for(let O=q.length-1;O>=0;O--)!G.J0.IsEmpty(q[O].FeatureActionName)&&("Accounts Receivable"==q[O].FeatureActionName.ToString()||"Accounts Payable"==q[O].FeatureActionName.ToString())&&("Accounts Receivable"==q[O].FeatureActionName.toString()?(q[O].TabName="Sales",q[O].TabID=3001,q[O].GroupID=3001,q[O].LicSIMPLE="True"):"Accounts Payable"==q[O].FeatureActionName.toString()&&(q[O].TabName="Purchase",q[O].TabID=3002,q[O].GroupID=3002,q[O].LicSIMPLE="True")),null==q[O].LicSIMPLE||null==q[O].LicSIMPLE||""==q[O].LicSIMPLE.toString()||0==(0,A.yG0)(q[O].LicSIMPLE)?q.RemoveAt(O):3==parseInt(q[O].TabID)&&(19==parseInt(q[O].GroupID)?(q[O].TabName="Purchase",q[O].TabID=3002):31==parseInt(q[O].GroupID)&&115==parseInt(q[O].DrpID)?(q[O].TabName="Purchase",q[O].TabID=3002,q[O].GroupID=1115):28==parseInt(q[O].GroupID)?(q[O].TabName="Inventory",q[O].TabID=3003):31==parseInt(q[O].GroupID)&&113==parseInt(q[O].DrpID)?(q[O].TabName="Inventory",q[O].TabID=3003,q[O].GroupID=1113):31==parseInt(q[O].GroupID)&&114==parseInt(q[O].DrpID)?(q[O].TabName="Sales",q[O].TabID=3001,q[O].GroupID=1114):(q[O].TabName="Sales",q[O].TabID=3001))}m.d.SessionManager.SplitMods="3001~3002~3003".split("~"),q.SortBy(["TabOrder","GroupOrder","groupid","Columnorder","RibbonViewID"])}}},17560:(qe,be,t)=>{"use strict";t.d(be,{v:()=>J});var m=t(9120),A=t(4050),G=t(46204);class J extends G.g{get Direction(){return this._Direction}set Direction(oe){this._Direction!=oe&&(this._Direction=oe,this.Language=m.d.GetResource(oe?"ComLanguageArabic":"ComLanguageEnglish"))}get IsMinimized(){return this._IsMinimized}set IsMinimized(oe){this._IsMinimized!=oe&&(this._IsMinimized=oe)}get Language(){return this._Language}set Language(oe){this._Language!=oe&&(this._Language=oe)}get TabDataCollection(){return this._tabDataCollection}set TabDataCollection(oe){this._tabDataCollection=oe}constructor(){super(),this.cmdLoadPage=new A.Yk,this.OnChange=new A.Yk,this.AssignUserToCompanyVisibility="1"==m.d.SessionManager.UserID,this.OfflineAdmin=!(!m.d.SessionManager.IsOffline||"1"!=m.d.SessionManager.RoleID),this.ArabicVisibility=!(m.d.SessionManager.LicenseSettings.ContainsKey("Arabic")&&"FALSE"==m.d.SessionManager.LicenseSettings.Arabic.toUpperCase())}ClearMenu(){try{null!=this._tabDataCollection&&this._tabDataCollection.Clear()}catch{this._tabDataCollection.Clear()}}}},18088:(qe,be,t)=>{"use strict";t.d(be,{D3:()=>G,G9:()=>A,bT:()=>m});class m{constructor(){this.keys=[],this.values=[]}get length(){return this.keys.length}Add(Y,oe){this[Y]=oe,this.keys.push(Y),this.values.push(oe)}push(Y,oe){this[Y]=oe,this.keys.push(Y),this.values.push(oe)}Remove(Y){let oe=this.keys.indexOf(Y);delete this[Y],this.keys.splice(oe,1),this.values.splice(oe,1)}ContainsKey(Y){return this.keys.includes(Y)}Clear(){this.keys=[],this.values=[]}GetItemByValue(Y){let oe=this.values.indexOf(Y);return-1!=oe?{Key:this.keys[oe],Value:this.values[oe]}:null}SetValue(Y,oe){let X=this.keys.indexOf(Y);X>=0&&(this.values[X]=oe),this[Y]=oe}}class A{constructor(){this.keys=[],this.values=[]}get length(){return this.keys.length}Add(Y,oe){this[Y]=oe,this.keys.push(Y),this.values.push(oe)}push(Y,oe){this[Y]=oe,this.keys.push(Y),this.values.push(oe)}Remove(Y){let oe=this.keys.indexOf(Y);delete this[Y],this.keys.splice(oe,1),this.values.splice(oe,1)}ContainsKey(Y){return this.keys.includes(Y)}Clear(){this.keys=[],this.values=[]}}class G{constructor(){this.keys=[],this.values=[]}get length(){return this.keys.length}Add(Y,oe){this.keys.push(Y),this.values.push(oe)}push(Y,oe){this.keys.push(Y),this.values.push(oe)}Remove(Y){let oe=this.keys.indexOf(Y);this.keys.splice(oe,1),this.values.splice(oe,1)}GetValue(Y){let oe=this.keys.indexOf(Y);return this.values[oe]}ContainsKey(Y){return this.keys.includes(Y)}Clear(){this.keys=[],this.values=[]}}},5011:(qe,be,t)=>{"use strict";t.d(be,{P:()=>A});const A=(0,t(37464).F3)("Browser",{web:()=>t.e(4786).then(t.bind(t,2405)).then(G=>new G.BrowserWeb)})},37464:(qe,be,t)=>{"use strict";t.d(be,{EA:()=>ne,E_:()=>D,F3:()=>O,I9:()=>H,Ii:()=>re});var m=t(10467);typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"&&global;var k=function(L){return L.Unimplemented="UNIMPLEMENTED",L.Unavailable="UNAVAILABLE",L}(k||{});class H extends Error{constructor(I,ie,ce){super(I),this.message=I,this.code=ie,this.data=ce}}const q=L=>{var I,ie,ce,Ce,he;const se=L.CapacitorCustomPlatform||null,z=L.Capacitor||{},N=z.Plugins=z.Plugins||{},ee=L.CapacitorPlatforms,fe=(null===(I=ee?.currentPlatform)||void 0===I?void 0:I.getPlatform)||(()=>null!==se?se.name:(L=>{var I,ie;return L?.androidBridge?"android":null!==(ie=null===(I=L?.webkit)||void 0===I?void 0:I.messageHandlers)&&void 0!==ie&&ie.bridge?"ios":"web"})(L)),Ee=(null===(ie=ee?.currentPlatform)||void 0===ie?void 0:ie.isNativePlatform)||(()=>"web"!==fe()),Re=(null===(ce=ee?.currentPlatform)||void 0===ce?void 0:ce.isPluginAvailable)||(Le=>{const Ke=Pe.get(Le);return!(!Ke?.platforms.has(fe())&&!je(Le))}),je=(null===(Ce=ee?.currentPlatform)||void 0===Ce?void 0:Ce.getPluginHeader)||(Le=>{var Ke;return null===(Ke=z.PluginHeaders)||void 0===Ke?void 0:Ke.find(xe=>xe.name===Le)}),Pe=new Map,w=(null===(he=ee?.currentPlatform)||void 0===he?void 0:he.registerPlugin)||((Le,Ke={})=>{const xe=Pe.get(Le);if(xe)return console.warn(`Capacitor plugin "${Le}" already registered. Cannot register plugins twice.`),xe.proxy;const ke=fe(),Ve=je(Le);let _e;const Te=function(){var yt=(0,m.A)(function*(){return!_e&&ke in Ke?_e=_e="function"==typeof Ke[ke]?yield Ke[ke]():Ke[ke]:null!==se&&!_e&&"web"in Ke&&(_e=_e="function"==typeof Ke.web?yield Ke.web():Ke.web),_e});return function(){return yt.apply(this,arguments)}}(),Xe=yt=>{let vt;const Et=(...Ft)=>{const Mt=Te().then(qt=>{const Bt=((yt,vt)=>{var Et,Ft;if(!Ve){if(yt)return null===(Ft=yt[vt])||void 0===Ft?void 0:Ft.bind(yt);throw new H(`"${Le}" plugin is not implemented on ${ke}`,k.Unimplemented)}{const Mt=Ve?.methods.find(qt=>vt===qt.name);if(Mt)return"promise"===Mt.rtype?qt=>z.nativePromise(Le,vt.toString(),qt):(qt,Bt)=>z.nativeCallback(Le,vt.toString(),qt,Bt);if(yt)return null===(Et=yt[vt])||void 0===Et?void 0:Et.bind(yt)}})(qt,yt);if(Bt){const $t=Bt(...Ft);return vt=$t?.remove,$t}throw new H(`"${Le}.${yt}()" is not implemented on ${ke}`,k.Unimplemented)});return"addListener"===yt&&(Mt.remove=(0,m.A)(function*(){return vt()})),Mt};return Et.toString=()=>`${yt.toString()}() { [capacitor code] }`,Object.defineProperty(Et,"name",{value:yt,writable:!1,configurable:!1}),Et},Ue=Xe("addListener"),it=Xe("removeListener"),Tt=(yt,vt)=>{const Et=Ue({eventName:yt},vt),Ft=function(){var qt=(0,m.A)(function*(){const Bt=yield Et;it({eventName:yt,callbackId:Bt},vt)});return function(){return qt.apply(this,arguments)}}(),Mt=new Promise(qt=>Et.then(()=>qt({remove:Ft})));return Mt.remove=(0,m.A)(function*(){console.warn("Using addListener() without 'await' is deprecated."),yield Ft()}),Mt},bt=new Proxy({},{get(yt,vt){switch(vt){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return Ve?Tt:Ue;case"removeListener":return it;default:return Xe(vt)}}});return N[Le]=bt,Pe.set(Le,{name:Le,proxy:bt,platforms:new Set([...Object.keys(Ke),...Ve?[ke]:[]])}),bt});return z.convertFileSrc||(z.convertFileSrc=Le=>Le),z.getPlatform=fe,z.handleError=Le=>L.console.error(Le),z.isNativePlatform=Ee,z.isPluginAvailable=Re,z.pluginMethodNoop=(Le,Ke,xe)=>Promise.reject(`${xe} does not have an implementation of "${Ke}".`),z.registerPlugin=w,z.Exception=H,z.DEBUG=!!z.DEBUG,z.isLoggingEnabled=!!z.isLoggingEnabled,z.platform=z.getPlatform(),z.isNative=z.isNativePlatform(),z},re=(L=>L.Capacitor=q(L))(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),O=re.registerPlugin;class D{constructor(I){this.listeners={},this.retainedEventArguments={},this.windowListeners={},I&&(console.warn(`Capacitor WebPlugin "${I.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=I)}addListener(I,ie){var ce=this;let Ce=!1;this.listeners[I]||(this.listeners[I]=[],Ce=!0),this.listeners[I].push(ie);const se=this.windowListeners[I];se&&!se.registered&&this.addWindowListener(se),Ce&&this.sendRetainedArgumentsForEvent(I);const z=function(){var ee=(0,m.A)(function*(){return ce.removeListener(I,ie)});return function(){return ee.apply(this,arguments)}}();return Promise.resolve({remove:z})}removeAllListeners(){var I=this;return(0,m.A)(function*(){I.listeners={};for(const ie in I.windowListeners)I.removeWindowListener(I.windowListeners[ie]);I.windowListeners={}})()}notifyListeners(I,ie,ce){const Ce=this.listeners[I];if(Ce)Ce.forEach(he=>he(ie));else if(ce){let he=this.retainedEventArguments[I];he||(he=[]),he.push(ie),this.retainedEventArguments[I]=he}}hasListeners(I){return!!this.listeners[I].length}registerWindowListener(I,ie){this.windowListeners[ie]={registered:!1,windowEventName:I,pluginEventName:ie,handler:ce=>{this.notifyListeners(ie,ce)}}}unimplemented(I="not implemented"){return new re.Exception(I,k.Unimplemented)}unavailable(I="not available"){return new re.Exception(I,k.Unavailable)}removeListener(I,ie){var ce=this;return(0,m.A)(function*(){const Ce=ce.listeners[I];if(!Ce)return;const he=Ce.indexOf(ie);ce.listeners[I].splice(he,1),ce.listeners[I].length||ce.removeWindowListener(ce.windowListeners[I])})()}addWindowListener(I){window.addEventListener(I.windowEventName,I.handler),I.registered=!0}removeWindowListener(I){I&&(window.removeEventListener(I.windowEventName,I.handler),I.registered=!1)}sendRetainedArgumentsForEvent(I){const ie=this.retainedEventArguments[I];ie&&(delete this.retainedEventArguments[I],ie.forEach(ce=>{this.notifyListeners(I,ce)}))}}const p=L=>encodeURIComponent(L).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),W=L=>L.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class T extends D{getCookies(){return(0,m.A)(function*(){const I=document.cookie,ie={};return I.split(";").forEach(ce=>{if(ce.length<=0)return;let[Ce,he]=ce.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");Ce=W(Ce).trim(),he=W(he).trim(),ie[Ce]=he}),ie})()}setCookie(I){return(0,m.A)(function*(){try{const ie=p(I.key),ce=p(I.value),Ce=`; expires=${(I.expires||"").replace("expires=","")}`,he=(I.path||"/").replace("path=",""),se=null!=I.url&&I.url.length>0?`domain=${I.url}`:"";document.cookie=`${ie}=${ce||""}${Ce}; path=${he}; ${se};`}catch(ie){return Promise.reject(ie)}})()}deleteCookie(I){return(0,m.A)(function*(){try{document.cookie=`${I.key}=; Max-Age=0`}catch(ie){return Promise.reject(ie)}})()}clearCookies(){return(0,m.A)(function*(){try{const I=document.cookie.split(";")||[];for(const ie of I)document.cookie=ie.replace(/^ +/,"").replace(/=.*/,`=;expires=${(new Date).toUTCString()};path=/`)}catch(I){return Promise.reject(I)}})()}clearAllCookies(){var I=this;return(0,m.A)(function*(){try{yield I.clearCookies()}catch(ie){return Promise.reject(ie)}})()}}O("CapacitorCookies",{web:()=>new T});const le=function(){var L=(0,m.A)(function*(I){return new Promise((ie,ce)=>{const Ce=new FileReader;Ce.onload=()=>{const he=Ce.result;ie(he.indexOf(",")>=0?he.split(",")[1]:he)},Ce.onerror=he=>ce(he),Ce.readAsDataURL(I)})});return function(ie){return L.apply(this,arguments)}}(),ne=(L,I={})=>{const ie=Object.assign({method:L.method||"GET",headers:L.headers},I),Ce=((L={})=>{const I=Object.keys(L);return Object.keys(L).map(Ce=>Ce.toLocaleLowerCase()).reduce((Ce,he,se)=>(Ce[he]=L[I[se]],Ce),{})})(L.headers)["content-type"]||"";if("string"==typeof L.data)ie.body=L.data;else if(Ce.includes("application/x-www-form-urlencoded")){const he=new URLSearchParams;for(const[se,z]of Object.entries(L.data||{}))he.set(se,z);ie.body=he.toString()}else if(Ce.includes("multipart/form-data")||L.data instanceof FormData){const he=new FormData;if(L.data instanceof FormData)L.data.forEach((z,N)=>{he.append(N,z)});else for(const z of Object.keys(L.data))he.append(z,L.data[z]);ie.body=he;const se=new Headers(ie.headers);se.delete("content-type"),ie.headers=se}else(Ce.includes("application/json")||"object"==typeof L.data)&&(ie.body=JSON.stringify(L.data));return ie};class v extends D{request(I){return(0,m.A)(function*(){const ie=ne(I,I.webFetchExtra),ce=((L,I=!0)=>L?Object.entries(L).reduce((ce,Ce)=>{const[he,se]=Ce;let z,N;return Array.isArray(se)?(N="",se.forEach(ee=>{z=I?encodeURIComponent(ee):ee,N+=`${he}=${z}&`}),N.slice(0,-1)):(z=I?encodeURIComponent(se):se,N=`${he}=${z}`),`${ce}&${N}`},"").substr(1):null)(I.params,I.shouldEncodeUrlParams),Ce=ce?`${I.url}?${ce}`:I.url,he=yield fetch(Ce,ie),se=he.headers.get("content-type")||"";let N,ee,{responseType:z="text"}=he.ok?I:{};switch(se.includes("application/json")&&(z="json"),z){case"arraybuffer":case"blob":ee=yield he.blob(),N=yield le(ee);break;case"json":N=yield he.json();break;default:N=yield he.text()}const Z={};return he.headers.forEach((fe,U)=>{Z[U]=fe}),{data:N,headers:Z,status:he.status,url:he.url}})()}get(I){var ie=this;return(0,m.A)(function*(){return ie.request(Object.assign(Object.assign({},I),{method:"GET"}))})()}post(I){var ie=this;return(0,m.A)(function*(){return ie.request(Object.assign(Object.assign({},I),{method:"POST"}))})()}put(I){var ie=this;return(0,m.A)(function*(){return ie.request(Object.assign(Object.assign({},I),{method:"PUT"}))})()}patch(I){var ie=this;return(0,m.A)(function*(){return ie.request(Object.assign(Object.assign({},I),{method:"PATCH"}))})()}delete(I){var ie=this;return(0,m.A)(function*(){return ie.request(Object.assign(Object.assign({},I),{method:"DELETE"}))})()}}O("CapacitorHttp",{web:()=>new v})},15381:(qe,be,t)=>{"use strict";t.d(be,{L:()=>A});const A=(0,t(37464).F3)("Geolocation",{web:()=>t.e(2920).then(t.bind(t,70539)).then(G=>new G.GeolocationWeb)})},69390:(qe,be,t)=>{"use strict";t.d(be,{P:()=>m});class m{constructor(){this._boundedEvents=[]}get boundedEvents(){return this._boundedEvents}dispose(){this.unbindAll(),this._boundedEvents=[]}bind(G,J,Y,oe,X=""){const k=Array.isArray(J)?J:[J];if(G?.forEach)G.forEach(H=>{for(const ue of k)H.addEventListener(ue,Y,oe),this._boundedEvents.push({element:H,eventName:ue,listener:Y,groupName:X})});else if(G)for(const H of k)G.addEventListener(H,Y,oe),this._boundedEvents.push({element:G,eventName:H,listener:Y,groupName:X})}unbind(G,J,Y){const oe=Array.isArray(G)?G:[G],X=Array.isArray(J)?J:[J];for(const k of X)for(const H of oe)"function"==typeof H?.removeEventListener&&H.removeEventListener(k,Y)}unbindByEventName(G,J){const Y=this._boundedEvents.find(oe=>oe.element===G&&oe.eventName===J);Y&&this.unbind(Y.element,Y.eventName,Y.listener)}unbindAll(G){if(G){const J=Array.isArray(G)?G:[G];for(let Y=this._boundedEvents.length-1;Y>=0;--Y){const oe=this._boundedEvents[Y];if(J.some(X=>X===oe.groupName)){const{element:X,eventName:k,listener:H}=oe;this.unbind(X,k,H),this._boundedEvents.splice(Y,1)}}}else for(;this._boundedEvents.length>0;){const J=this._boundedEvents.pop(),{element:Y,eventName:oe,listener:X}=J;this.unbind(Y,oe,X)}}}},55028:(qe,be,t)=>{"use strict";t.d(be,{OQz:()=>oe,YDW:()=>Mi,YMJ:()=>B,IQ1:()=>D,iKL:()=>bt.i,$fu:()=>x,r7U:()=>jh,kqS:()=>Hd,PUO:()=>p,ptE:()=>W,VV6:()=>iu,E:()=>jf,CuW:()=>sl,_tQ:()=>Fc,u54:()=>$f,Gip:()=>Wf,h_9:()=>zf,yf6:()=>R,YBK:()=>Qp,huT:()=>le,mch:()=>Zp,oF$:()=>kp,dB6:()=>$h,GHb:()=>Gd,HXj:()=>Dt,JD8:()=>tn,jO9:()=>Ra,nF4:()=>Dl,_dX:()=>Na,lmq:()=>Lc,ay:()=>zh,y_D:()=>Yf,Aq$:()=>Je,DUb:()=>w.addToArrayWhenNotExists,dT3:()=>ss,ljw:()=>L,tGf:()=>w.classNameToList,fhB:()=>w.createDomElement,i3Z:()=>w.emptyElement,mVi:()=>Z,yG0:()=>w.parseBoolean,Vyf:()=>ot});var m={};t.r(m),t.d(m,{BackendUtilityService:()=>oe});var A={};t.r(A),t.d(A,{collectionObserver:()=>X,propertyObserver:()=>k});var G={};t.r(G),t.d(G,{CancelledException:()=>v,addTreeLevelAndAggregatorsByMutation:()=>ie,addTreeLevelByMutation:()=>I,cancellablePromise:()=>E,castObservableToPromise:()=>L,decimalFormatted:()=>se,findItemInTreeStructure:()=>he,findOrDefault:()=>ct,flattenToParentChildArray:()=>ce,formatNumber:()=>z,getCellValueFromQueryFieldGetter:()=>N,getColumnFieldType:()=>fe,getDescendantProperty:()=>ee,getTranslationPrefix:()=>Z,isColumnDateType:()=>U,mapOperatorByFieldType:()=>Re,mapOperatorToShorthandDesignation:()=>Me,mapOperatorType:()=>Ee,objectWithoutKey:()=>st,thousandSeparatorFormatted:()=>je,unflattenParentChildArrayToTree:()=>Ce,unsubscribeAll:()=>ot});var J={};t.r(J),t.d(J,{sortByFieldType:()=>Tt});var Y=function(d){return d.local="local",d.remote="remote",d}(Y||{});class oe{constructor(e){this.rxjs=e,this._infiniteScrollBottomHit=!1}addRxJsResource(e){this.rxjs=e}executeBackendProcessesCallback(e,i,o,l){const c=new Date;i&&o.service.postProcess&&o.service.postProcess(i),i&&o?.internalPostProcess&&o.internalPostProcess(i),void 0!==o.postProcess&&(i instanceof Object&&(i.metrics={startTime:e,endTime:c,executionTime:c.valueOf()-e.valueOf(),itemCount:l,totalItemCount:l},o.service.options?.infiniteScroll&&(i.infiniteScrollBottomHit=this._infiniteScrollBottomHit,delete i.itemCount)),o.postProcess(i),this.setInfiniteScrollBottomHit(!1))}onBackendError(e,i){if("function"!=typeof i?.onError)throw e;i.onError(e)}executeBackendCallback(e,i,o,l,c,u){if(e){o&&!o.clearFilterTriggered&&!o.clearSortTriggered&&u?.emitActionChangedCallback&&u.emitActionChangedCallback.call(this,Y.remote);const g=e.process(i);if(g instanceof Promise&&g.then)g.then(y=>{this.executeBackendProcessesCallback(l,y,e,c),u?.successCallback?.call(this,o)}).catch(y=>{u?.errorCallback?.call(this,o),this.onBackendError(y,e)});else if(this.rxjs?.isObservable(g)){const y=this.rxjs;y.isObservable(u?.httpCancelRequestSubject)&&u?.httpCancelRequestSubject.next(),g.pipe(y.takeUntil(y.iif(()=>y.isObservable(u?.httpCancelRequestSubject),u?.httpCancelRequestSubject,y.EMPTY))).subscribe(M=>{this.executeBackendProcessesCallback(l,M,e,c),u?.successCallback?.call(this,o)},M=>{u?.errorCallback?.call(this,o),this.onBackendError(M,e)})}}}refreshBackendDataset(e){let i="";const o=e?.backendServiceApi;if(!o||!o.service||!o.process)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');if(o.service&&(i=o.service.buildQuery()),i&&""!==i){const l=new Date;o.preProcess&&o.preProcess(),this.executeBackendCallback(o,i,null,l,e?.pagination?.totalItems??0)}}setInfiniteScrollBottomHit(e){this._infiniteScrollBottomHit=e}}function X(d,e){["pop","push","reverse","shift","unshift","splice","sort"].forEach(o=>{d[o]=(...l)=>{const c=Array.prototype[o].apply(d,l);return e.apply(d,[d,l]),c}})}function k(d,e,i){let o=d[e];Object.defineProperty(d,e,{configurable:!0,get:()=>o,set(l){o=l,i.apply(d,[l,d[e]])}})}const ye=d=>d;class B{}B.locales={TEXT_ALL_SELECTED:"All Selected",TEXT_ALL_X_RECORDS_SELECTED:"All {{x}} records selected",TEXT_APPLY_MASS_UPDATE:"Apply Mass Update",TEXT_APPLY_TO_SELECTION:"Update Selection",TEXT_CANCEL:"Cancel",TEXT_CLEAR_ALL_FILTERS:"Clear all Filters",TEXT_CLEAR_ALL_GROUPING:"Clear all Grouping",TEXT_CLEAR_ALL_SORTING:"Clear all Sorting",TEXT_CLEAR_PINNING:"Unfreeze Columns/Rows",TEXT_CLONE:"Clone",TEXT_COLLAPSE_ALL_GROUPS:"Collapse all Groups",TEXT_CONTAINS:"Contains",TEXT_COLUMNS:"Columns",TEXT_COLUMN_RESIZE_BY_CONTENT:"Resize by Content",TEXT_COMMANDS:"Commands",TEXT_COPY:"Copy",TEXT_DROP_COLUMN_HEADER_TO_GROUP_BY:"Drop a column header here to group by the column",TEXT_EQUALS:"Equals",TEXT_EQUAL_TO:"Equal to",TEXT_ENDS_WITH:"Ends With",TEXT_ERROR_EDITABLE_GRID_REQUIRED:"Your grid must be editable in order to use the Composite Editor Modal.",TEXT_ERROR_ENABLE_CELL_NAVIGATION_REQUIRED:'Composite Editor requires the flag "enableCellNavigation" to be set to True in your Grid Options.',TEXT_ERROR_NO_CHANGES_DETECTED:"Sorry we could not detect any changes.",TEXT_ERROR_NO_EDITOR_FOUND:"We could not find any Editor in your Column Definition.",TEXT_ERROR_NO_RECORD_FOUND:"No records selected for edit or clone operation.",TEXT_ERROR_ROW_NOT_EDITABLE:"Current row is not editable.",TEXT_ERROR_ROW_SELECTION_REQUIRED:"You must select some rows before trying to apply new value(s).",TEXT_EXPAND_ALL_GROUPS:"Expand all Groups",TEXT_EXPORT_TO_CSV:"Export in CSV format",TEXT_EXPORT_TO_TEXT_FORMAT:"Export in Text format (Tab delimited)",TEXT_EXPORT_TO_EXCEL:"Export to Excel",TEXT_EXPORT_TO_TAB_DELIMITED:"Export in Text format (Tab delimited)",TEXT_FORCE_FIT_COLUMNS:"Force fit columns",TEXT_FILTER_SHORTCUTS:"Filter Shortcuts",TEXT_FREEZE_COLUMNS:"Freeze Columns",TEXT_GREATER_THAN:"Greater than",TEXT_GREATER_THAN_OR_EQUAL_TO:"Greater than or equal to",TEXT_GROUP_BY:"Group By",TEXT_HIDE_COLUMN:"Hide Column",TEXT_ITEMS:"items",TEXT_ITEMS_PER_PAGE:"items per page",TEXT_ITEMS_SELECTED:"items selected",TEXT_OF:"of",TEXT_OK:"OK",TEXT_LAST_UPDATE:"Last Update",TEXT_LESS_THAN:"Less than",TEXT_LESS_THAN_OR_EQUAL_TO:"Less than or equal to",TEXT_NOT_CONTAINS:"Not contains",TEXT_NOT_EQUAL_TO:"Not equal to",TEXT_PAGE:"Page",TEXT_RECORDS_SELECTED:"records selected",TEXT_REFRESH_DATASET:"Refresh Dataset",TEXT_REMOVE_FILTER:"Remove Filter",TEXT_REMOVE_SORT:"Remove Sort",TEXT_RESET_INPUT_VALUE:"Reset Input Value",TEXT_RESET_FORM:"Reset Form",TEXT_SAVE:"Save",TEXT_SELECT_ALL:"Select All",TEXT_SYNCHRONOUS_RESIZE:"Synchronous resize",TEXT_SORT_ASCENDING:"Sort Ascending",TEXT_SORT_DESCENDING:"Sort Descending",TEXT_STARTS_WITH:"Starts With",TEXT_TOGGLE_ALL_GROUPS:"Toggle all Groups",TEXT_TOGGLE_DARK_MODE:"Toggle Dark Mode",TEXT_TOGGLE_FILTER_ROW:"Toggle Filter Row",TEXT_TOGGLE_PRE_HEADER_ROW:"Toggle Pre-Header Row",TEXT_UNFREEZE_COLUMNS:"Unfreeze Columns",TEXT_X_OF_Y_SELECTED:"# of % selected",TEXT_X_OF_Y_MASS_SELECTED:"{{x}} of {{y}} selected"},B.treeDataProperties={CHILDREN_PROP:"children",COLLAPSED_PROP:"__collapsed",HAS_CHILDREN_PROP:"__hasChildren",TREE_LEVEL_PROP:"__treeLevel",PARENT_PROP:"__parentId"},B.DEFAULT_FORMATTER_NUMBER_MIN_DECIMAL=2,B.DEFAULT_FORMATTER_NUMBER_MAX_DECIMAL=2,B.DEFAULT_FORMATTER_CURRENCY_MIN_DECIMAL=2,B.DEFAULT_FORMATTER_CURRENCY_MAX_DECIMAL=4,B.DEFAULT_FORMATTER_PERCENT_MIN_DECIMAL=void 0,B.DEFAULT_FORMATTER_PERCENT_MAX_DECIMAL=void 0,B.DEFAULT_NUMBER_DECIMAL_SEPARATOR=".",B.DEFAULT_NUMBER_THOUSAND_SEPARATOR="",B.DEFAULT_NEGATIVE_NUMBER_WRAPPED_IN_BRAQUET=!1,B.SLIDER_DEFAULT_MIN_VALUE=0,B.SLIDER_DEFAULT_MAX_VALUE=100,B.SLIDER_DEFAULT_STEP=1,B.VALIDATION_REQUIRED_FIELD="Field is required",B.VALIDATION_EDITOR_VALID_NUMBER="Please enter a valid number",B.VALIDATION_EDITOR_VALID_INTEGER="Please enter a valid integer number",B.VALIDATION_EDITOR_INTEGER_BETWEEN="Please enter a valid integer number between {{minValue}} and {{maxValue}}",B.VALIDATION_EDITOR_INTEGER_MAX="Please enter a valid integer number that is lower than {{maxValue}}",B.VALIDATION_EDITOR_INTEGER_MAX_INCLUSIVE="Please enter a valid integer number that is lower than or equal to {{maxValue}}",B.VALIDATION_EDITOR_INTEGER_MIN="Please enter a valid integer number that is greater than {{minValue}}",B.VALIDATION_EDITOR_INTEGER_MIN_INCLUSIVE="Please enter a valid integer number that is greater than or equal to {{minValue}}",B.VALIDATION_EDITOR_NUMBER_BETWEEN="Please enter a valid number between {{minValue}} and {{maxValue}}",B.VALIDATION_EDITOR_NUMBER_MAX="Please enter a valid number that is lower than {{maxValue}}",B.VALIDATION_EDITOR_NUMBER_MAX_INCLUSIVE="Please enter a valid number that is lower than or equal to {{maxValue}}",B.VALIDATION_EDITOR_NUMBER_MIN="Please enter a valid number that is greater than {{minValue}}",B.VALIDATION_EDITOR_NUMBER_MIN_INCLUSIVE="Please enter a valid number that is greater than or equal to {{minValue}}",B.VALIDATION_EDITOR_DECIMAL_BETWEEN="Please enter a valid number with a maximum of {{maxDecimal}} decimals",B.VALIDATION_EDITOR_TEXT_LENGTH_BETWEEN="Please make sure your text length is between {{minLength}} and {{maxLength}} characters",B.VALIDATION_EDITOR_TEXT_MAX_LENGTH="Please make sure your text is less than {{maxLength}} characters",B.VALIDATION_EDITOR_TEXT_MAX_LENGTH_INCLUSIVE="Please make sure your text is less than or equal to {{maxLength}} characters",B.VALIDATION_EDITOR_TEXT_MIN_LENGTH="Please make sure your text is more than {{minLength}} character(s)",B.VALIDATION_EDITOR_TEXT_MIN_LENGTH_INCLUSIVE="Please make sure your text is at least {{minLength}} character(s)";var D=function(d){return d.colon=":",d.comma=",",d.equalSign="=",d.pipe="|",d.semicolon=";",d.space=" ",d.tab="\t",d.doubleColon="::",d.doublePipe="||",d.doubleSemicolon=";;",d}(D||{}),x=function(d){return d.autoTooltip="autoTooltip",d.cellExternalCopyManager="cellExternalCopyManager",d.cellMenu="cellMenu",d.checkboxSelector="checkboxSelector",d.columnPicker="columnPicker",d.contextMenu="contextMenu",d.customTooltip="customTooltip",d.draggableGrouping="draggableGrouping",d.groupItemMetaProvider="groupItemMetaProvider",d.gridMenu="gridMenu",d.headerButton="headerButton",d.headerMenu="headerMenu",d.rowBasedEdit="rowBasedEdit",d.rowDetailView="rowDetailView",d.rowMoveManager="rowMoveManager",d.rowSelection="rowSelection",d}(x||{});const p={unknown:"unknown",string:"string",boolean:"boolean",integer:"integer",float:"float",number:"number",date:"date",dateIso:"dateIso",dateUtc:"dateUtc",dateTime:"dateTime",dateTimeIso:"dateTimeIso",dateTimeIsoAmPm:"dateTimeIsoAmPm",dateTimeIsoAM_PM:"dateTimeIsoAM_PM",dateTimeShortIso:"dateTimeShortIso",dateEuro:"dateEuro",dateEuroShort:"dateEuroShort",dateTimeShortEuro:"dateTimeShortEuro",dateTimeEuro:"dateTimeEuro",dateTimeEuroAmPm:"dateTimeEuroAmPm",dateTimeEuroAM_PM:"dateTimeEuroAM_PM",dateTimeEuroShort:"dateTimeEuroShort",dateTimeEuroShortAmPm:"dateTimeEuroShortAmPm",dateTimeEuroShortAM_PM:"dateTimeEuroShortAM_PM",dateUs:"dateUs",dateUsShort:"dateUsShort",dateTimeShortUs:"dateTimeShortUs",dateTimeUs:"dateTimeUs",dateTimeUsAmPm:"dateTimeUsAmPm",dateTimeUsAM_PM:"dateTimeUsAM_PM",dateTimeUsShort:"dateTimeUsShort",dateTimeUsShortAmPm:"dateTimeUsShortAmPm",dateTimeUsShortAM_PM:"dateTimeUsShortAM_PM",object:"object",password:"password",text:"text",readonly:"readonly"};var W=function(d){return d.csv="csv",d.txt="txt",d.xls="xls",d.xlsx="xlsx",d}(W||{}),T=function(d){return d.merge="merge",d.chain="chain",d}(T||{}),R=function(d){return d.columns="columns",d.filter="filter",d.pagination="pagination",d.pinning="pinning",d.rowSelection="rowSelection",d.sorter="sorter",d.treeData="treeData",d}(R||{}),le=function(d){return d.empty="",d.custom="Custom",d.contains="Contains",d.notContains="Not_Contains",d.lessThan="LT",d.lessThanOrEqual="LE",d.greaterThan="GT",d.greaterThanOrEqual="GE",d.notEqual="NE",d.equal="EQ",d.endsWith="EndsWith",d.rangeInclusive="RangeInclusive",d.rangeExclusive="RangeExclusive",d.startsWith="StartsWith",d.startsWithEndsWith="StartsWithEndsWith",d.in="IN",d.notIn="NOT_IN",d.inContains="IN_CONTAINS",d.notInContains="NOT_IN_CONTAINS",d.inCollection="IN_COLLECTION",d.notInCollection="NOT_IN_COLLECTION",d}(le||{}),j=function(d){return d.asc="asc",d.ASC="ASC",d.desc="desc",d.DESC="DESC",d}(j||{}),F=function(d){return d[d.asc=1]="asc",d[d.desc=-1]="desc",d[d.neutral=0]="neutral",d}(F||{}),ne=function(d){return d.toggleCollapse="toggle-collapse",d.fullExpand="full-expand",d.fullCollapse="full-collapse",d.toggleExpand="toggle-expand",d}(ne||{});class v extends Error{constructor(e){super(e),Object.setPrototypeOf(this,v.prototype)}}function E(d){let e=!1;return d instanceof Promise?{promise:d.then(i=>{if(e)throw new v("Cancelled Promise");return i}),cancel:()=>e=!0}:d}function L(d,e,i=""){let o=e;if(e instanceof Promise)return e;if(d.isObservable(e)&&(o=d.firstValueFrom(e)),!(o instanceof Promise))throw new Error(`Something went wrong, Slickgrid-Universal ${i} is not able to convert the Observable into a Promise.`);return o}function I(d,e,i=0){const o=e?.childrenPropName??B.treeDataProperties.CHILDREN_PROP;Array.isArray(d)&&d.forEach(l=>{l&&(Array.isArray(l[o])&&l[o].length>0&&(i++,I(l[o],e,i),i--),l[e.levelPropName]=i)})}function ie(d,e,i=0,o=null){const l=e?.childrenPropName??B.treeDataProperties.CHILDREN_PROP,{aggregator:c}=e;Array.isArray(d)&&d.forEach(u=>{if(u){const g=Array.isArray(u[l]);Array.isArray(u[l])&&u[l].length>0&&(c.init(u,!0),i++,ie(u[l],e,i,u),i--),o&&c.isInitialized&&"function"==typeof c.accumulate&&!u?.__filteredOut&&(c.accumulate(u,g),c.storeResult(o.__treeTotals)),u[e.levelPropName]=i}})}function ce(d,e){const i=e?.identifierPropName??"id",o=e?.childrenPropName??B.treeDataProperties.CHILDREN_PROP,l=e?.hasChildrenPropName??B.treeDataProperties.HAS_CHILDREN_PROP,c=e?.parentPropName??B.treeDataProperties.PARENT_PROP,u=e?.levelPropName??B.treeDataProperties.TREE_LEVEL_PROP;return e?.shouldAddTreeLevelNumber&&(e?.aggregators?e.aggregators.forEach(y=>{ie(d,{childrenPropName:o,levelPropName:u,aggregator:y})}):I(d,{childrenPropName:o,levelPropName:u})),function re(d,e,i=ye,o=(()=>{})){const l=d&&d.length?[{pointer:d,offset:0}]:[],c=[];let u;for(;l.length;)for(u=l.pop();u.offset<u.pointer.length;){const g=u.pointer[u.offset],y=o(g),M=e(g);c.push(i(g,u.node,y,u.nodeId)),u.offset+=1,M&&(l.push(u),u={pointer:M,offset:0,node:g,nodeId:y})}return c}(d,y=>y[o],(y,M)=>({[i]:y[i],[c]:void 0!==M?M[i]:null,[l]:!!y[o],...st(y,o)}))}function Ce(d,e){const i=e?.identifierPropName??"id",o=e?.childrenPropName??B.treeDataProperties.CHILDREN_PROP,l=e?.parentPropName??B.treeDataProperties.PARENT_PROP,c=e?.levelPropName??B.treeDataProperties.TREE_LEVEL_PROP,u=e?.collapsedPropName??B.treeDataProperties.COLLAPSED_PROP,y=[],M={};return(d||[]).forEach(V=>M[V[i]]=V),Object.keys(M).forEach(V=>{const te=M[V];if(l in te&&null!=te[l]&&""!==te[l]){if(te[l]in M){const ve=M[te[l]];o in ve||(ve[o]=[]),ve[o].push(te),void 0===ve[u]&&(ve[u]=e?.initiallyCollapsed??!1)}}else y.push(te)}),e?.aggregators?e.aggregators.forEach(V=>{ie(y,{childrenPropName:o,levelPropName:c,aggregator:V},0)}):I(y,{childrenPropName:o,levelPropName:c},0),y}function he(d,e,i){if(!i)throw new Error('findRecursive requires parameter "childrenPropertyName"');const o=d.find(e),l=d.filter(c=>c?.hasOwnProperty(i)&&c[i]);if(o)return o;if(l.length){const c=[];return l.forEach(u=>{u?.hasOwnProperty(i)&&c.push(...u[i])}),he(c,e,i)}}function se(d,e,i,o=".",l=""){if(isNaN(+d))return d;const c=void 0===e?2:e,u=void 0===i?2:i;let g=String(Math.round(+d*Math.pow(10,u))/Math.pow(10,u));for(g.indexOf(".")<0&&c>0&&(g+=".");g.length-g.indexOf(".")<=c;)g+="0";const y=g.split(".");let M,V;M=l?y.length>=1?je(y[0],l):void 0:y.length>=1?y[0]:g,y.length>1&&(V=y[1]);let te="";return void 0!==M&&void 0!==V?te=`${M}${o}${V}`:null!=M&&(te=M),te}function z(d,e,i,o,l="",c="",u=".",g=""){if(isNaN(+d))return d;const y=Math.round(1e6*parseFloat(d))/1e6;if(y<0){const M=Math.abs(y);return o?isNaN(e)&&isNaN(i)?`(${l}${je(`${M}`,g)}${c})`:`(${l}${se(M,e,i,u,g)}${c})`:isNaN(e)&&isNaN(i)?`-${l}${je(`${M}`,g)}${c}`:`-${l}${se(M,e,i,u,g)}${c}`}return isNaN(e)&&isNaN(i)?`${l}${je(`${d}`,g)}${c}`:`${l}${se(d,e,i,u,g)}${c}`}function N(d,e,i){if("function"==typeof d.queryFieldNameGetterFn){const o=d.queryFieldNameGetterFn(e);i=o?.indexOf(".")>=0?ee(e,o):e.hasOwnProperty(o)?e[o]:i}return i}function ee(d,e){return d&&e?e.split(".").reduce((i,o)=>i&&i[o],d):d}function Z(d){return d&&d.translationNamespace?d.translationNamespace+(d.translationNamespaceSeparator||""):""}function fe(d){return d.outputType||d.type||p.string}function U(d){switch(d){case p.date:case p.dateTime:case p.dateIso:case p.dateTimeIso:case p.dateTimeShortIso:case p.dateTimeIsoAmPm:case p.dateTimeIsoAM_PM:case p.dateEuro:case p.dateEuroShort:case p.dateTimeEuro:case p.dateTimeShortEuro:case p.dateTimeEuroAmPm:case p.dateTimeEuroAM_PM:case p.dateTimeEuroShort:case p.dateTimeEuroShortAmPm:case p.dateTimeEuroShortAM_PM:case p.dateUs:case p.dateUsShort:case p.dateTimeUs:case p.dateTimeShortUs:case p.dateTimeUsAmPm:case p.dateTimeUsAM_PM:case p.dateTimeUsShort:case p.dateTimeUsShortAmPm:case p.dateTimeUsShortAM_PM:case p.dateUtc:return!0;default:return!1}}function Ee(d){let e;switch(d){case"<":case"LT":e=le.lessThan;break;case"<=":case"LE":e=le.lessThanOrEqual;break;case">":case"GT":e=le.greaterThan;break;case">=":case"GE":e=le.greaterThanOrEqual;break;case"!=":case"NE":e=le.notEqual;break;case"*":case"a*":case"StartsWith":e=le.startsWith;break;case"*z":case"EndsWith":e=le.endsWith;break;case"=":case"==":case"EQ":e=le.equal;break;case"IN":e=le.in;break;case"NIN":case"NOT_IN":e=le.notIn;break;case"<>":case"Not_Contains":case"NOT_CONTAINS":e=le.notContains;break;default:e=le.contains}return e}function Me(d){let e="";switch(d){case le.greaterThan:case">":e=">";break;case le.greaterThanOrEqual:case">=":e=">=";break;case le.lessThan:case"<":e="<";break;case le.lessThanOrEqual:case"<=":e="<=";break;case le.notEqual:case"<>":e="<>";break;case le.equal:case"=":case"==":case"EQ":e="=";break;case le.startsWith:case"a*":case"*":e="a*";break;case le.endsWith:case"*z":e="*z";break;default:e=d}return e}function Re(d){let e;if(U(d))e=le.equal;else switch(d){case p.unknown:case p.string:case p.text:case p.password:case p.readonly:e=le.contains;break;default:e=le.equal}return e}function st(d,e){return Object.keys(d).reduce((i,o)=>(o!==e&&(i[o]=d[o]),i),{})}function je(d,e=","){if(null!=d){const i=`${d}`,o=i.split(".");return 2===o.length?`${o[0].replace(/\B(?=(\d{3})+(?!\d))/g,e)}.${o[1]}`:i.replace(/\B(?=(\d{3})+(?!\d))/g,e)}return d}function ct(d,e,i={}){return Array.isArray(d)?d.find(e)||i:d}function ot(d){if(Array.isArray(d))for(;d.length>0;){const e=d.pop();e?.unsubscribe&&e.unsubscribe()}return d}var w=t(34475),xe=t(22073);function ke(d,e=!1){let i;switch(d){case p.dateTime:case p.dateTimeIso:i="YYYY-MM-DD HH:mm:ss";break;case p.dateTimeIsoAmPm:i="YYYY-MM-DD hh:mm:ss a";break;case p.dateTimeIsoAM_PM:i="YYYY-MM-DD hh:mm:ss A";break;case p.dateTimeShortIso:i="YYYY-MM-DD HH:mm";break;case p.dateEuro:i="DD/MM/YYYY";break;case p.dateEuroShort:i=e?"DD/MM/YY":"D/M/YY";break;case p.dateTimeEuro:i="DD/MM/YYYY HH:mm:ss";break;case p.dateTimeShortEuro:i=e?"DD/MM/YYYY HH:mm":"D/M/YYYY H:m";break;case p.dateTimeEuroAmPm:i="DD/MM/YYYY hh:mm:ss a";break;case p.dateTimeEuroAM_PM:i="DD/MM/YYYY hh:mm:ss A";break;case p.dateTimeEuroShort:i=e?"DD/MM/YY HH:mm:ss":"D/M/YY H:m:s";break;case p.dateTimeEuroShortAmPm:i=e?"DD/MM/YY hh:mm:ss a":"D/M/YY h:m:s a";break;case p.dateTimeEuroShortAM_PM:i=e?"DD/MM/YY hh:mm:ss A":"D/M/YY h:m:s A";break;case p.dateUs:i="MM/DD/YYYY";break;case p.dateUsShort:i=e?"MM/DD/YY":"M/D/YY";break;case p.dateTimeUs:i="MM/DD/YYYY HH:mm:ss";break;case p.dateTimeUsAmPm:i="MM/DD/YYYY hh:mm:ss a";break;case p.dateTimeUsAM_PM:i="MM/DD/YYYY hh:mm:ss A";break;case p.dateTimeUsShort:i=e?"MM/DD/YY HH:mm:ss":"M/D/YY H:m:s";break;case p.dateTimeUsShortAmPm:i=e?"MM/DD/YY hh:mm:ss a":"M/D/YY h:m:s a";break;case p.dateTimeUsShortAM_PM:i=e?"MM/DD/YY hh:mm:ss A":"M/D/YY h:m:s A";break;case p.dateTimeShortUs:i=e?"MM/DD/YYYY HH:mm":"M/D/YYYY H:m";break;case p.dateUtc:i="ISO8601";break;default:i="YYYY-MM-DD"}return i}function Ve(d,e,i){const o=e?ke(e):void 0,l=ke(i),c=d instanceof Date?d:_e(d,o);return c&&void 0!==d?i===p.dateUtc?c.toISOString():(0,xe.GP)(c,l,"en-US"):""}function _e(d,e,i=!1){try{return!!d&&(d instanceof Date?d:(0,xe.qg)({date:d,format:e,dateOverflow:i?"throw":"backward",locale:"en-US"}))}catch{return!1}}function Ue(d){const e=d===p.date?void 0:ke(d);return(i,o,l)=>function Xe(d,e,i,o,l){let c=0;if(d===e)c=0;else{let u=_e(d,o,l),g=_e(e,o,l);u||(u=new Date(1001,1,1)),g||(g=new Date(1001,1,1)),c=u.valueOf()-g.valueOf()}return i*c}(i,o,l,e,void 0!==e)}const it={boolean:(d,e,i=F.neutral)=>{let o=0;return o=d===e?0:null===d?-1:null===e?1:i?d<e?-1:1:d<e?1:-1,i*o},date:Ue(p.date),dateIso:Ue(p.dateIso),dateUtc:Ue(p.dateUtc),dateTime:Ue(p.dateTime),dateTimeIso:Ue(p.dateTimeIso),dateTimeIsoAmPm:Ue(p.dateTimeIsoAmPm),dateTimeIsoAM_PM:Ue(p.dateTimeIsoAM_PM),dateTimeShortIso:Ue(p.dateTimeShortIso),dateEuro:Ue(p.dateEuro),dateEuroShort:Ue(p.dateEuroShort),dateTimeShortEuro:Ue(p.dateTimeShortEuro),dateTimeEuro:Ue(p.dateTimeEuro),dateTimeEuroAmPm:Ue(p.dateTimeEuroAmPm),dateTimeEuroAM_PM:Ue(p.dateTimeEuroAM_PM),dateTimeEuroShort:Ue(p.dateTimeEuroShort),dateTimeEuroShortAmPm:Ue(p.dateTimeEuroShortAmPm),dateTimeEuroShortAM_PM:Ue(p.dateTimeEuroShortAM_PM),dateUs:Ue(p.dateUs),dateUsShort:Ue(p.dateUsShort),dateTimeShortUs:Ue(p.dateTimeShortUs),dateTimeUs:Ue(p.dateTimeUs),dateTimeUsAmPm:Ue(p.dateTimeUsAmPm),dateTimeUsAM_PM:Ue(p.dateTimeUsAM_PM),dateTimeUsShort:Ue(p.dateTimeUsShort),dateTimeUsShortAmPm:Ue(p.dateTimeUsShortAmPm),dateTimeUsShortAM_PM:Ue(p.dateTimeUsShortAM_PM),numeric:(d,e,i=F.neutral,o,l)=>{const c=o?.valueCouldBeUndefined??l?.cellValueCouldBeUndefined??!1,u=isNaN(d)||""===d||null===d||c&&void 0===d?-1/0:parseFloat(d),g=isNaN(e)||""===e||null===e||c&&void 0===e?-1/0:parseFloat(e);return i*(u===g?0:u>g?1:-1)},objectString:(d,e,i=F.neutral,o,l)=>{if(!o||!o.dataKey)throw new Error('Sorting a "FieldType.object" requires you to provide the "dataKey" (object property name) of the object so that we can use it to sort correctly');const c=d?.hasOwnProperty(o.dataKey)?d[o.dataKey]:d,u=e?.hasOwnProperty(o.dataKey)?e[o.dataKey]:e,g=o?.valueCouldBeUndefined??l?.cellValueCouldBeUndefined??!1;let y=0;return y="object"!=typeof d?-1/0:"object"!=typeof e?1/0:null===c||g&&void 0===c?-1:null===u||g&&void 0===u?1:c===u?0:i?c<u?-1:1:c<u?1:-1,i*y},string:(d,e,i=F.neutral,o,l)=>{let c=0;const u=o?.valueCouldBeUndefined??l?.cellValueCouldBeUndefined??!1;return d===e?c=0:null===d||u&&void 0===d?c=-1:null===e||u&&void 0===e?c=1:(l?.ignoreAccentOnStringFilterAndSort&&(d=(0,w.removeAccentFromText)(d,!1),e=(0,w.removeAccentFromText)(e,!1)),c=i?d<e?-1:1:d<e?1:-1),i*c}};function Tt(d,e,i,o,l,c){let u=0;switch(d){case p.boolean:u=it.boolean(e,i,o,l,c);break;case p.float:case p.integer:case p.number:u=it.numeric(e,i,o,l,c);break;case p.date:case p.dateIso:case p.dateUtc:case p.dateTime:case p.dateTimeIso:case p.dateTimeIsoAmPm:case p.dateTimeIsoAM_PM:case p.dateTimeShortIso:case p.dateEuro:case p.dateEuroShort:case p.dateTimeShortEuro:case p.dateTimeEuro:case p.dateTimeEuroAmPm:case p.dateTimeEuroAM_PM:case p.dateTimeEuroShort:case p.dateTimeEuroShortAmPm:case p.dateTimeEuroShortAM_PM:case p.dateUs:case p.dateUsShort:case p.dateTimeShortUs:case p.dateTimeUs:case p.dateTimeUsAmPm:case p.dateTimeUsAM_PM:case p.dateTimeUsShort:case p.dateTimeUsShortAmPm:case p.dateTimeUsShortAM_PM:u=Ue(d).call(this,e,i,o,l,c);break;case p.object:u=it.objectString(e,i,o,l,c);break;default:u=it.string(e,i,o,l,c)}return u}var bt=t(38465),yt=t(10467);const Et=function vt(d){var e=document,i=d.container||e.createElement("div"),o=d.preventSubmit||0;i.id=i.id||"autocomplete-"+Ot();var ve,ze,l=i.style,c=d.debounceWaitMs||0,u=d.disableAutoSelect||!1,g=i.parentElement,y=[],M="",V=2,te=d.showOnFocus,Ae=0,Ye=!1,nt=!1;if(void 0!==d.minLength&&(V=d.minLength),!d.input)throw new Error("input undefined");var et=d.input;function Ot(){return Date.now().toString(36)+Math.random().toString(36).substring(2)}function gt(){var zt=i.parentNode;zt&&zt.removeChild(i)}function rt(){ze&&window.clearTimeout(ze)}function Nt(){return!!i.parentNode}function ln(){Ae++,y=[],M="",ve=void 0,et.setAttribute("aria-activedescendant",""),et.setAttribute("aria-expanded","false"),gt()}function un(){i.textContent="",et.setAttribute("aria-activedescendant","");var zt=function(As,rl,Wi){var Ei=e.createElement("div");return Ei.textContent=As.label||"",Ei};d.render&&(zt=d.render);var An=function(As,rl){var Wi=e.createElement("div");return Wi.textContent=As,Wi};d.renderGroup&&(An=d.renderGroup);var qi=e.createDocumentFragment(),Hs=Ot();if(y.forEach(function(As,rl){if(As.group&&As.group!==Hs){Hs=As.group;var Wi=An(As.group,M);Wi&&(Wi.className+=" group",qi.appendChild(Wi))}var Ei=zt(As,M,rl);Ei&&(Ei.id=i.id+"_"+rl,Ei.setAttribute("role","option"),Ei.addEventListener("click",function(Yl){nt=!0;try{d.onSelect(As,et)}finally{nt=!1}ln(),Yl.preventDefault(),Yl.stopPropagation()}),As===ve&&(Ei.className+=" selected",Ei.setAttribute("aria-selected","true"),et.setAttribute("aria-activedescendant",Ei.id)),qi.appendChild(Ei))}),i.appendChild(qi),y.length<1){if(!d.emptyMsg)return void ln();var Is=e.createElement("div");Is.id=i.id+"_"+Ot(),Is.className="empty",Is.textContent=d.emptyMsg,i.appendChild(Is),et.setAttribute("aria-activedescendant",Is.id)}(function At(){i.parentNode||(g||e.body).appendChild(i)})(),function kt(){if(Nt()){et.setAttribute("aria-expanded","true"),l.height="auto",l.width=et.offsetWidth+"px";var An,zt=0;qi(),qi(),d.customize&&An&&d.customize(et,An,i,zt)}function qi(){var Hs=e.documentElement,Is=Hs.clientTop||e.body.clientTop||0,As=Hs.clientLeft||e.body.clientLeft||0,rl=window.pageYOffset||Hs.scrollTop,Wi=window.pageXOffset||Hs.scrollLeft,Ei=(An=et.getBoundingClientRect()).top+et.offsetHeight+rl-Is,Yl=An.left+Wi-As;l.top=Ei+"px",l.left=Yl+"px",(zt=window.innerHeight-(An.top+et.offsetHeight))<0&&(zt=0),l.top=Ei+"px",l.bottom="",l.left=Yl+"px",l.maxHeight=zt+"px"}}(),Vs()}function Ri(){Nt()&&un()}function li(){Ri()}function Fi(zt){zt.target!==i?Ri():zt.preventDefault()}function mi(){nt||zl(0)}function Vs(){var zt=i.getElementsByClassName("selected");if(zt.length>0){var An=zt[0],qi=An.previousElementSibling;if(qi&&-1!==qi.className.indexOf("group")&&!qi.previousElementSibling&&(An=qi),An.offsetTop<i.scrollTop)i.scrollTop=An.offsetTop;else{var Hs=An.offsetTop+An.offsetHeight,Is=i.scrollTop+i.offsetHeight;Hs>Is&&(i.scrollTop+=Hs-Is)}}}function os(zt){y.length>0&&(function sd(zt){var An=e.getElementById(i.id+"_"+zt);An&&(An.classList.remove("selected"),An.removeAttribute("aria-selected"),et.removeAttribute("aria-activedescendant"))}(zt),function Bs(zt){var An=e.getElementById(i.id+"_"+zt);An&&(An.classList.add("selected"),An.setAttribute("aria-selected","true"),et.setAttribute("aria-activedescendant",An.id))}(y.indexOf(ve)),Vs())}function ol(zt){var An=zt.key;switch(An){case"ArrowUp":case"ArrowDown":case"Escape":!function wc(zt,An){var qi=Nt();if("Escape"===An)ln();else{if(!qi||y.length<1)return;"ArrowUp"===An?function Ts(){var zt=y.indexOf(ve);ve=-1===zt?void 0:y[(zt+y.length-1)%y.length],os(zt)}():function Ci(){var zt=y.indexOf(ve);ve=y.length<1?void 0:-1===zt?y[0]:y[(zt+1)%y.length],os(zt)}()}zt.preventDefault(),qi&&zt.stopPropagation()}(zt,An);break;case"Enter":!function Pr(zt){if(ve){2===o&&zt.preventDefault(),nt=!0;try{d.onSelect(ve,et)}finally{nt=!1}ln()}1===o&&zt.preventDefault()}(zt)}}function Or(){te&&zl(1)}function zl(zt){et.value.length>=V||1===zt?(rt(),ze=window.setTimeout(function(){return vu(et.value,zt,et.selectionStart||0)},0===zt||2===zt?c:0)):ln()}function vu(zt,An,qi){if(!Ye){var Hs=++Ae;d.fetch(zt,function(Is){Ae===Hs&&Is&&(M=zt,ve=(y=Is).length<1||u?void 0:y[0],un())},An,qi)}}function Mm(zt){d.keyup?d.keyup({event:zt,fetch:function(){return zl(0)}}):!Nt()&&"ArrowDown"===zt.key&&zl(0)}function Kl(zt){d.click&&d.click({event:zt,fetch:function(){return zl(2)}})}function od(){setTimeout(function(){e.activeElement!==et&&ln()},200)}return i.className=[i.className,"autocomplete",d.className||""].join(" ").trim(),i.setAttribute("role","listbox"),et.setAttribute("role","combobox"),et.setAttribute("aria-expanded","false"),et.setAttribute("aria-autocomplete","list"),et.setAttribute("aria-controls",i.id),et.setAttribute("aria-owns",i.id),et.setAttribute("aria-activedescendant",""),et.setAttribute("aria-haspopup","listbox"),l.position="absolute",i.addEventListener("mousedown",function(zt){zt.stopPropagation(),zt.preventDefault()}),i.addEventListener("focus",function(){return et.focus()}),gt(),et.addEventListener("keyup",Mm),et.addEventListener("click",Kl),et.addEventListener("keydown",ol),et.addEventListener("input",mi),et.addEventListener("blur",od),et.addEventListener("focus",Or),window.addEventListener("resize",li),e.addEventListener("scroll",Fi,!0),{destroy:function Su(){et.removeEventListener("focus",Or),et.removeEventListener("keyup",Mm),et.removeEventListener("click",Kl),et.removeEventListener("keydown",ol),et.removeEventListener("input",mi),et.removeEventListener("blur",od),window.removeEventListener("resize",li),e.removeEventListener("scroll",Fi,!0),et.removeAttribute("role"),et.removeAttribute("aria-expanded"),et.removeAttribute("aria-autocomplete"),et.removeAttribute("aria-controls"),et.removeAttribute("aria-activedescendant"),et.removeAttribute("aria-owns"),et.removeAttribute("aria-haspopup"),rt(),ln(),Ye=!0},fetch:function Eu(){vu(et.value,3,et.selectionStart||0)}}};var Ft=t(69390),Mt=t(8108);function Bt(d,e,i,o){const{oldVal:l,newVal:c,columnDef:u,selectedSettings:g,updatePickerUI:y}=o;if(l!==c){const M=d.type||u.type,V=u.outputType||d.type||u.type||p.dateUtc,te=Array.isArray(c)?c:[c||""],ve=[],Ae=ke(p.dateIso),ze=M?ke(M):void 0;for(const nt of te){const et=nt instanceof Date?nt:_e(nt,ze);et&&ve.push(et)}const Ye=g??{dates:[ve.map(nt=>(0,xe.GP)(nt,Ae)).join(":")],month:ve[0]?.getMonth(),year:ve[0]?.getFullYear(),time:"ISO8601"===ze||(ze||"").toLowerCase().includes("h")?(0,xe.GP)(ve[0],"HH:mm"):void 0};(0,Mt.j)(i.settings.selected,Ye)||(i.settings.selected=Ye,y&&i?.update&&i.update({dates:!0,month:!0,year:!0,time:!0})),e.value=te.length?ve.map(nt=>Ve(nt,void 0,V)).join(" \u2014 "):""}}function $t(d,e){const i=(0,w.createDomElement)("select",{className:"form-control"});for(const o of d){const l=document.createElement("option");l.value=o.operator,e.applyHtmlCode(l,`${(0,w.htmlEncodeWithPadding)(o.operatorAlt||o.operator,3)}${o.descAlt||o.desc}`),i.appendChild(l)}return i}function Wt(d,e,i,o,l){return yn.apply(this,arguments)}function yn(){return(yn=(0,yt.A)(function*(d,e,i,o,l){const c=e?.filter??{},u=c?.collectionOptions??{};let g=null;if(d){const y=o?.isObservable(d)??!1;y&&o&&(g=yield L(o,d));const M=yield d;if(Array.isArray(M)?g=M:M?.status>=200&&M.status<300&&"function"==typeof M.json?g=yield M.json():M&&M.content&&(g=M.content),!Array.isArray(g)&&u?.collectionInsideObjectProperty&&(g=ee(g||M,u.collectionInsideObjectProperty||"")),!Array.isArray(g))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Filter, the collection is not a valid array.');c.collection=g,i(g),y&&function ai(d,e,i,o){const l=d?.filter??{},c=i?.createSubject();l.collectionAsync=c,o&&c&&o.push(c.subscribe(u=>function fn(d,e,i){const o=e?.filter??{},l=o?.collectionOptions??{};if(l&&l.collectionInsideObjectProperty&&(d=ee(d,l.collectionInsideObjectProperty)),!Array.isArray(d))throw new Error('Something went wrong while trying to pull the collection from the "collectionAsync" call in the Filter, the collection is not a valid array.');o.collection=d,i(d)}(u,d,e)))}(e,i,o,l)}return g})).apply(this,arguments)}function Qt(d,e,i,o,l){if(o?.enableTranslate&&l?.translate){const u=Z(o);return l.translate(`${u}${d}`)}return(o.locales||B.locales)?.[e]??i}function Ge(d,e){return[{operator:"",desc:""},{operator:"=",desc:Qt("EQUAL_TO","TEXT_EQUAL_TO","Equal to",d,e)},{operator:"<",desc:Qt("LESS_THAN","TEXT_LESS_THAN","Less than",d,e)},{operator:"<=",desc:Qt("LESS_THAN_OR_EQUAL_TO","TEXT_LESS_THAN_OR_EQUAL_TO","Less than or equal to",d,e)},{operator:">",desc:Qt("GREATER_THAN","TEXT_GREATER_THAN","Greater than",d,e)},{operator:">=",desc:Qt("GREATER_THAN_OR_EQUAL_TO","TEXT_GREATER_THAN_OR_EQUAL_TO","Greater than or equal to",d,e)},{operator:"<>",desc:Qt("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to",d,e)}]}function Ze(d,e,i){if(d.compoundOperatorAltTexts)for(const o of e)if(d.compoundOperatorAltTexts.hasOwnProperty(i)){const l=d.compoundOperatorAltTexts[i][o.operator];o.operatorAlt=l?.operatorAlt||"",o.descAlt=l?.descAlt||""}}var We=Object.defineProperty,dt=Object.getOwnPropertySymbols,xt=Object.prototype.hasOwnProperty,jt=Object.prototype.propertyIsEnumerable,En=(d,e,i)=>e in d?We(d,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[e]=i,Pt=(d,e)=>{for(var i in e||(e={}))xt.call(e,i)&&En(d,i,e[i]);if(dt)for(var i of dt(e))jt.call(e,i)&&En(d,i,e[i]);return d},Ct=(d,e,i)=>(En(d,"symbol"!=typeof e?e+"":e,i),i);const nn={calendar:"vanilla-calendar",calendarDefault:"vanilla-calendar_default",calendarMultiple:"vanilla-calendar_multiple",calendarMonth:"vanilla-calendar_month",calendarYear:"vanilla-calendar_year",calendarHidden:"vanilla-calendar_hidden",calendarToInput:"vanilla-calendar_to-input",calendarToInputTop:"vanilla-calendar_to-input_top",calendarToInputBottom:"vanilla-calendar_to-input_bottom",controls:"vanilla-calendar-controls",grid:"vanilla-calendar-grid",gridDisabled:"vanilla-calendar-grid_disabled",column:"vanilla-calendar-column",columnMonth:"vanilla-calendar-column_month",columnYear:"vanilla-calendar-column_year",header:"vanilla-calendar-header",headerContent:"vanilla-calendar-header__content",month:"vanilla-calendar-month",monthDisabled:"vanilla-calendar-month_disabled",year:"vanilla-calendar-year",yearDisabled:"vanilla-calendar-year_disabled",arrow:"vanilla-calendar-arrow",arrowPrev:"vanilla-calendar-arrow_prev",arrowNext:"vanilla-calendar-arrow_next",wrapper:"vanilla-calendar-wrapper",content:"vanilla-calendar-content",week:"vanilla-calendar-week",weekDay:"vanilla-calendar-week__day",weekDayWeekend:"vanilla-calendar-week__day_weekend",days:"vanilla-calendar-days",daysSelecting:"vanilla-calendar-days_selecting",months:"vanilla-calendar-months",monthsSelecting:"vanilla-calendar-months_selecting",monthsMonth:"vanilla-calendar-months__month",monthsMonthSelected:"vanilla-calendar-months__month_selected",monthsMonthDisabled:"vanilla-calendar-months__month_disabled",years:"vanilla-calendar-years",yearsSelecting:"vanilla-calendar-years_selecting",yearsYear:"vanilla-calendar-years__year",yearsYearSelected:"vanilla-calendar-years__year_selected",yearsYearDisabled:"vanilla-calendar-years__year_disabled",time:"vanilla-calendar-time",timeContent:"vanilla-calendar-time__content",timeHours:"vanilla-calendar-time__hours",timeMinutes:"vanilla-calendar-time__minutes",timeKeeping:"vanilla-calendar-time__keeping",timeRanges:"vanilla-calendar-time__ranges",timeRange:"vanilla-calendar-time__range",day:"vanilla-calendar-day",dayHoverFirst:"vanilla-calendar-day_hover-first",dayHoverLast:"vanilla-calendar-day_hover-last",dayHoverIntermediate:"vanilla-calendar-day_hover-intermediate",daySelectedFirst:"vanilla-calendar-day_selected-first",daySelectedLast:"vanilla-calendar-day_selected-last",daySelectedIntermediate:"vanilla-calendar-day_selected-intermediate",dayPopup:"vanilla-calendar-day__popup",dayBtn:"vanilla-calendar-day__btn",dayBtnPrev:"vanilla-calendar-day__btn_prev",dayBtnNext:"vanilla-calendar-day__btn_next",dayBtnToday:"vanilla-calendar-day__btn_today",dayBtnSelected:"vanilla-calendar-day__btn_selected",dayBtnHover:"vanilla-calendar-day__btn_hover",dayBtnDisabled:"vanilla-calendar-day__btn_disabled",dayBtnWeekend:"vanilla-calendar-day__btn_weekend",dayBtnHoliday:"vanilla-calendar-day__btn_holiday",weekNumbers:"vanilla-calendar-week-numbers",weekNumbersTitle:"vanilla-calendar-week-numbers__title",weekNumbersContent:"vanilla-calendar-week-numbers__content",weekNumber:"vanilla-calendar-week-number",isFocus:"vanilla-calendar-is-focus"},di=d=>`<div class="${d.controls}"><#ArrowPrev /><#ArrowNext /></div><div class="${d.grid}"><#Multiple><div class="${d.column}"><div class="${d.header}"><div class="${d.headerContent}"><#Month /><#Year /></div></div><div class="${d.wrapper}"><#WeekNumbers /><div class="${d.content}"><#Week /><#Days /></div></div></div><#/Multiple></div><#ControlTime />`,Li=d=>`<div class="${d.header}"><div class="${d.headerContent}"><#Month /><#Year /></div></div><div class="${d.wrapper}"><div class="${d.content}"><#Months /></div></div>`,Ai=d=>`<div class="${d.header}"><#ArrowPrev /><div class="${d.headerContent}"><#Month /><#Year /></div><#ArrowNext /></div><div class="${d.wrapper}"><div class="${d.content}"><#Years /></div></div>`;class ei{constructor(){var d;Ct(this,"isInit",!1),Ct(this,"isInputInit",!1),Ct(this,"input",!1),Ct(this,"type","default"),Ct(this,"months",2),Ct(this,"jumpMonths",1),Ct(this,"toggleSelected",!0),Ct(this,"jumpToSelectedDate",!1),Ct(this,"date",{min:"1970-01-01",max:"2470-12-31",today:new Date}),Ct(this,"settings",{lang:"en",iso8601:!0,range:{min:this.date.min,max:this.date.max,disablePast:!1,disableGaps:!1,edgesOnly:!1,disableAllDays:!1,disableWeekday:void 0,disabled:void 0,enabled:void 0},selection:{day:"single",month:!0,year:!0,time:!1,controlTime:"all",stepHours:1,stepMinutes:1,cancelableDay:!0},selected:{dates:void 0,month:void 0,year:void 0,holidays:void 0,time:void 0},visibility:{theme:"system",themeDetect:"html[data-theme]",monthShort:!0,weekNumbers:!1,weekend:!0,today:!0,disabled:!1,daysOutside:!0,positionToInput:"left"}}),Ct(this,"locale",{months:[],weekday:[]}),Ct(this,"sanitizer",e=>e),Ct(this,"actions",{clickDay:null,clickWeekNumber:null,clickMonth:null,clickYear:null,clickArrow:null,changeTime:null,changeToInput:null,getDays:null,getMonths:null,getYears:null,initCalendar:null,updateCalendar:null,destroyCalendar:null,showCalendar:null,hideCalendar:null}),Ct(this,"popups",{}),Ct(this,"CSSClasses",Pt({},nn)),Ct(this,"DOMTemplates",{default:(d=this.CSSClasses,`<div class="${d.header}"><#ArrowPrev /><div class="${d.headerContent}"><#Month /><#Year /></div><#ArrowNext /></div><div class="${d.wrapper}"><#WeekNumbers /><div class="${d.content}"><#Week /><#Days /></div></div><#ControlTime />`),multiple:di(this.CSSClasses),month:Li(this.CSSClasses),year:Ai(this.CSSClasses)}),Ct(this,"HTMLElement"),Ct(this,"HTMLOriginalElement"),Ct(this,"HTMLInputElement"),Ct(this,"rangeMin"),Ct(this,"rangeMax"),Ct(this,"rangeDisabled"),Ct(this,"rangeEnabled"),Ct(this,"selectedDates"),Ct(this,"selectedHolidays"),Ct(this,"selectedMonth"),Ct(this,"selectedYear"),Ct(this,"selectedHours"),Ct(this,"selectedMinutes"),Ct(this,"selectedKeeping"),Ct(this,"selectedTime"),Ct(this,"currentType"),Ct(this,"correctMonths"),Ct(this,"viewYear"),Ct(this,"dateMin"),Ct(this,"dateMax")}}const Vt=d=>`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`,Un=d=>new Date(`${d}T00:00:00`),Yi=d=>d.reduce((e,i)=>{if(i instanceof Date||"number"==typeof i){const o=i instanceof Date?i:new Date(i);e.push(o.toISOString().substring(0,10))}else i.match(/^(\d{4}-\d{2}-\d{2})$/g)?e.push(i):i.replace(/(\d{4}-\d{2}-\d{2}).*?(\d{4}-\d{2}-\d{2})/g,(o,l,c)=>{const u=Un(l),g=Un(c),y=new Date(u.getTime());for(;y<=g;y.setDate(y.getDate()+1))e.push(Vt(y));return o});return e},[]),Ws=()=>{const d=new Date;return new Date(d.getTime()-6e4*d.getTimezoneOffset()).toISOString().substring(0,10)},$s=d=>d?{0:"12",13:"01",14:"02",15:"03",16:"04",17:"05",18:"06",19:"07",20:"08",21:"09",22:"10",23:"11"}[Number(d)]||String(d):"",xs_notInit='The calendar has not been initialized, please initialize it using the "init()" method first.',mn=d=>{d.currentType=d.type,(d=>{var e;if(d.jumpToSelectedDate&&null!=(e=d.settings.selected.dates)&&e.length&&void 0===d.settings.selected.month&&void 0===d.settings.selected.year){const l=Un(Yi(d.settings.selected.dates)[0]);d.settings.selected.month=l.getMonth(),d.settings.selected.year=l.getFullYear()}const i=void 0!==d.settings.selected.month&&Number(d.settings.selected.month)>=0&&Number(d.settings.selected.month)<12,o=void 0!==d.settings.selected.year&&Number(d.settings.selected.year)>=0&&Number(d.settings.selected.year)<=9999;d.selectedMonth=i?Number(d.settings.selected.month):d.date.today.getMonth(),d.selectedYear=o?Number(d.settings.selected.year):d.date.today.getFullYear(),d.viewYear=d.selectedYear})(d),(d=>{var e,i,o;"today"===d.settings.range.min&&(d.settings.range.min=Ws()),"today"===d.settings.range.max&&(d.settings.range.max=Ws()),d.settings.range.min=Un(d.date.min)>=Un(d.settings.range.min)?d.date.min:d.settings.range.min,d.settings.range.max=Un(d.date.max)<=Un(d.settings.range.max)?d.date.max:d.settings.range.max;const l=d.settings.range.disablePast&&!d.settings.range.disableAllDays&&Un(d.settings.range.min)<d.date.today;d.rangeMin=l||d.settings.range.disableAllDays?Vt(d.date.today):d.settings.range.min,d.rangeMax=d.settings.range.disableAllDays?Vt(d.date.today):d.settings.range.max,d.rangeDisabled=d.settings.range.disabled&&!d.settings.range.disableAllDays?Yi(d.settings.range.disabled):d.settings.range.disableAllDays?[d.rangeMin]:[],d.rangeDisabled.length>1&&d.rangeDisabled.sort((c,u)=>+new Date(c)-+new Date(u)),d.rangeEnabled=d.settings.range.enabled?Yi(d.settings.range.enabled):[],null!=(e=d.rangeEnabled)&&e[0]&&null!=(i=d.rangeDisabled)&&i[0]&&(d.rangeDisabled=d.rangeDisabled.filter(c=>!d.rangeEnabled.includes(c))),d.rangeEnabled.length>1&&d.rangeEnabled.sort((c,u)=>+new Date(c)-+new Date(u)),null!=(o=d.rangeEnabled)&&o[0]&&d.settings.range.disableAllDays&&(d.rangeMin=d.rangeEnabled[0],d.rangeMax=d.rangeEnabled[d.rangeEnabled.length-1])})(d),(d=>{var e,i;d.selectedDates=null!=(e=d.settings.selected.dates)&&e[0]?Yi(d.settings.selected.dates):[],d.selectedHolidays=null!=(i=d.settings.selected.holidays)&&i[0]?Yi(d.settings.selected.holidays):[]})(d),(d=>{d.dateMin=Un(d.settings.visibility.disabled?d.date.min:d.rangeMin),d.dateMax=Un(d.settings.visibility.disabled?d.date.max:d.rangeMax)})(d),(d=>{const e=!0===d.settings.selection.time||12===d.settings.selection.time;if(e||24===d.settings.selection.time){let i=!1;"string"==typeof d.settings.selected.time&&d.settings.selected.time.replace(e?/^([0-9]|0[1-9]|1[0-2]):([0-5][0-9])|(AM|PM)/g:/^([0-1]?[0-9]|2[0-3]):([0-5][0-9])/g,(l,c,u,g)=>(c&&u&&(i=!0,d.selectedHours=c,d.selectedMinutes=u),g&&e?d.selectedKeeping=g:e&&(d.selectedKeeping="AM"),"")),!i&&e?(d.selectedHours=$s(String(d.date.today.getHours())),d.selectedMinutes=String(d.date.today.getMinutes()),d.selectedKeeping=Number(d.date.today.getHours())>=12?"PM":"AM"):i||(d.selectedHours=String(d.date.today.getHours()),d.selectedMinutes=String(d.date.today.getMinutes())),d.selectedHours=Number(d.selectedHours)<10?`0${Number(d.selectedHours)}`:`${d.selectedHours}`,d.selectedMinutes=Number(d.selectedMinutes)<10?`0${Number(d.selectedMinutes)}`:`${d.selectedMinutes}`,d.selectedTime=`${d.selectedHours}:${d.selectedMinutes}${d.selectedKeeping?` ${d.selectedKeeping}`:""}`}else if(d.settings.selection.time)throw new Error("The value of the time property can be: false, true, 12 or 24.")})(d),(d=>{d.correctMonths="multiple"===d.type?1===d.months?2:d.months>12?12:d.months:1})(d)},Nn=({arrowPrev:d,arrowNext:e,isPrevHidden:i,isNextHidden:o})=>{d.style.visibility=i?"hidden":"",e.style.visibility=o?"hidden":""},wi=d=>{var e,i;if("month"===d.currentType)return;const o=null==(e=d.HTMLElement)?void 0:e.querySelector(`.${d.CSSClasses.arrowPrev}`),l=null==(i=d.HTMLElement)?void 0:i.querySelector(`.${d.CSSClasses.arrowNext}`);!o||!l||{default:()=>{const c=Un(Vt(new Date(d.selectedYear,d.selectedMonth,1))),u=new Date(c.getTime()),g=new Date(c.getTime());u.setMonth(u.getMonth()-d.jumpMonths),g.setMonth(g.getMonth()+d.jumpMonths),d.settings.selection.year||(d.dateMin.setFullYear(c.getFullYear()),d.dateMax.setFullYear(c.getFullYear()));const y=!d.settings.selection.month||u.getFullYear()<d.dateMin.getFullYear()||u.getFullYear()===d.dateMin.getFullYear()&&u.getMonth()<d.dateMin.getMonth(),M=!d.settings.selection.month||g.getFullYear()>d.dateMax.getFullYear()||g.getFullYear()===d.dateMax.getFullYear()&&g.getMonth()>d.dateMax.getMonth();Nn({arrowPrev:o,arrowNext:l,isPrevHidden:y,isNextHidden:M})},year:()=>{Nn({arrowPrev:o,arrowNext:l,isPrevHidden:d.dateMin.getFullYear()&&d.viewYear-7<=d.dateMin.getFullYear(),isNextHidden:d.dateMax.getFullYear()&&d.viewYear+7>=d.dateMax.getFullYear()})}}["multiple"===d.currentType?"default":d.currentType]()},_i=(d,e)=>{if(!d)return null;const i=Un(d),o=e?i.getDay()||7:i.getDay();i.setDate(i.getDate()+4-o);const l=new Date(i.getFullYear(),0,1),c=Math.ceil(((+i-+l)/864e5+1)/7);return{year:i.getFullYear(),week:c}},dn=(d,e,i,o,l)=>{const c=e[i].querySelector(`.${d.CSSClasses.dayBtn}`),u=_i(c?.dataset.calendarDay,d.settings.iso8601);if(!u)return;const g=o.cloneNode(!0);g.innerText=String(u.week),g.dataset.calendarYearWeek=String(u.year),l.appendChild(g)},rs=(d,e,i,o,l,c,u,g)=>{const y=document.createElement("div");y.className=d.CSSClasses.day;const M=document.createElement("button");M.className=`${d.CSSClasses.dayBtn}${g?` ${g}`:""}`,M.type="button",M.innerText=String(o),M.dataset.calendarDay=c,d.settings.visibility.weekNumbers&&(()=>{const V=_i(c,d.settings.iso8601);V&&(M.dataset.calendarWeekNumber=String(V.week))})(),u?d.settings.visibility.daysOutside&&y.appendChild(M):y.appendChild(M),((d,e,i)=>{var o,l,c,u,g;const y=null==(o=d.settings.range.disableWeekday)?void 0:o.includes(i),M=d.settings.range.disableAllDays&&!(null==(l=d.rangeEnabled)||!l[0]);!y&&!M||null!=(c=d.rangeEnabled)&&c.includes(e)||null!=(u=d.rangeDisabled)&&u.includes(e)||(d.rangeDisabled.push(e),null==(g=d.rangeDisabled)||g.sort((V,te)=>+new Date(V)-+new Date(te)))})(d,c,l),((d,e,i,o,l,c,u)=>{var g,y,M;if((Un(d.rangeMin)>Un(c)||Un(d.rangeMax)<Un(c)||null!=(g=d.rangeDisabled)&&g.includes(c)||!d.settings.selection.month&&u||!d.settings.selection.year&&Un(c).getFullYear()!==e)&&(o.classList.add(d.CSSClasses.dayBtnDisabled),o.tabIndex=-1),d.settings.visibility.today&&Vt(d.date.today)===c&&o.classList.add(d.CSSClasses.dayBtnToday),!d.settings.visibility.weekend||0!==l&&6!==l||o.classList.add(d.CSSClasses.dayBtnWeekend),null!=(y=d.selectedHolidays)&&y.includes(c)&&o.classList.add(d.CSSClasses.dayBtnHoliday),null!=(M=d.selectedDates)&&M.includes(c)&&(o.classList.add(d.CSSClasses.dayBtnSelected),d.selectedDates.length>1&&"multiple-ranged"===d.settings.selection.day&&(d.selectedDates[0]===c&&i.classList.add(d.CSSClasses.daySelectedFirst),d.selectedDates[d.selectedDates.length-1]===c&&i.classList.add(d.CSSClasses.daySelectedLast),d.selectedDates[0]!==c&&d.selectedDates[d.selectedDates.length-1]!==c&&i.classList.add(d.CSSClasses.daySelectedIntermediate))),d.settings.range.edgesOnly&&d.selectedDates.length>1&&"multiple-ranged"===d.settings.selection.day){const V=+new Date(d.selectedDates[0]),te=+new Date(d.selectedDates[d.selectedDates.length-1]),ve=+new Date(c);ve>V&&ve<te&&(o.classList.add(d.CSSClasses.dayBtnSelected),i.classList.add(d.CSSClasses.daySelectedIntermediate))}})(d,e,y,M,l,c,u),i.appendChild(y),d.actions.getDays&&d.actions.getDays(o,c,y,M,d)},Os=d=>{const e=d.HTMLElement.querySelectorAll(`.${d.CSSClasses.days}`),i=d.HTMLElement.querySelectorAll(`.${d.CSSClasses.weekNumbers}`),o=new Date(d.selectedYear,d.selectedMonth,1);e.forEach((l,c)=>{const u=new Date(o);u.setMonth(u.getMonth()+c);const g=u.getMonth(),y=u.getFullYear(),M=new Date(y,g,1),V=new Date(y,g+1,0).getDate(),te=d.settings.iso8601?(0!==M.getDay()?M.getDay():7)-1:M.getDay();d.settings.selection.day&&l.classList.add(d.CSSClasses.daysSelecting),l.textContent="",((d,e,i,o,l)=>{let c=new Date(i,o,0).getDate()-(l-1);const u=0===o?i-1:i,g=0===o?12:o<10?`0${o}`:o;for(let y=l;y>0;y--,c++){const M=`${u}-${g}-${c}`,V=Un(M).getDay();rs(d,i,e,c,V,M,!0,d.CSSClasses.dayBtnPrev)}})(d,l,y,g,te),((d,e,i,o,l)=>{for(let c=1;c<=i;c++){const u=new Date(o,l,c),g=Vt(u),y=u.getDay();rs(d,o,e,c,y,g,!1,null)}})(d,l,V,y,g),((d,e,i,o,l,c)=>{const u=c+i,g=7*Math.ceil(u/7)-u,y=l+1===12?o+1:o,M=l+1===12?"01":l+2<10?`0${l+2}`:l+2;for(let V=1;V<=g;V++){const te=`${y}-${M}-${V<10?`0${V}`:String(V)}`,ve=Un(te).getDay();rs(d,o,e,V,ve,te,!0,d.CSSClasses.dayBtnNext)}})(d,l,V,y,g,te),((d,e,i,o,l)=>{if(!d.settings.visibility.weekNumbers)return;o.textContent="";const c=document.createElement("b");c.className=d.CSSClasses.weekNumbersTitle,c.innerText="#",o.appendChild(c);const u=document.createElement("div");u.className=d.CSSClasses.weekNumbersContent,o.appendChild(u);const g=document.createElement("button");g.type="button",g.className=d.CSSClasses.weekNumber;const y=l.querySelectorAll(`.${d.CSSClasses.day}`),M=Math.ceil((e+i)/7);for(let V=0;V<M;V++)dn(d,y,0===V?6:7*V,g,u)})(d,te,V,i[c],l),((d,e)=>{var i;d.popups&&(null==(i=Object.entries(d.popups))||i.forEach(([o,l])=>((d,e,i,o)=>{const l=i.querySelector(`[data-calendar-day="${d}"]`);l&&(e?.modifier&&l.classList.add(...e.modifier.trim().split(" ")),e?.html&&(l.parentElement.innerHTML+=`<div class="${o}">${e.html}</div>`))})(o,l,e,d.CSSClasses.dayPopup)))})(d,l)})},gs=d=>{var e,i;const o=null==(e=d.HTMLElement)?void 0:e.querySelectorAll("[data-calendar-selected-month]"),l=null==(i=d.HTMLElement)?void 0:i.querySelectorAll("[data-calendar-selected-year]");if(!o?.[0]&&l?.[0])return;const c=new Date(d.selectedYear,d.selectedMonth,1);o?.forEach((u,g)=>((d,e,i,o)=>{const l=new Date(o.setMonth(d.selectedMonth+i)).getMonth(),c=!1===d.settings.selection.month||"only-arrows"===d.settings.selection.month;e.tabIndex=c?-1:0,e.classList.toggle(d.CSSClasses.monthDisabled,c),e.setAttribute("data-calendar-selected-month",String(l)),e.innerText=d.locale.months[l]})(d,u,g,c)),l?.forEach((u,g)=>((d,e,i,o)=>{const l=new Date(o.setFullYear(d.selectedYear,d.selectedMonth+i)).getFullYear(),c=!1===d.settings.selection.year||"only-arrows"===d.settings.selection.year;e.tabIndex=c?-1:0,e.classList.toggle(d.CSSClasses.yearDisabled,c),e.setAttribute("data-calendar-selected-year",String(l)),e.innerText=String(l)})(d,u,g,c))},ps=(d,e)=>{const i=Un(Vt(new Date(d.selectedYear,d.selectedMonth,1)));({prev:()=>i.setMonth(i.getMonth()-d.jumpMonths),next:()=>i.setMonth(i.getMonth()+d.jumpMonths)})[e](),[d.selectedMonth,d.selectedYear]=[i.getMonth(),i.getFullYear()],gs(d),wi(d),Os(d)},cr=Object.freeze(Object.defineProperty({__proto__:null,ArrowNext:d=>`<button type="button"class="${d.CSSClasses.arrow} ${d.CSSClasses.arrowNext}"data-calendar-arrow="next"></button>`,ArrowPrev:d=>`<button type="button"class="${d.CSSClasses.arrow} ${d.CSSClasses.arrowPrev}"data-calendar-arrow="prev"></button>`,ControlTime:d=>d.settings.selection.time?`<div class="${d.CSSClasses.time}"></div>`:"",Days:d=>`<div class="${d.CSSClasses.days}"></div>`,Month:d=>`<button type="button"class="${d.CSSClasses.month}"data-calendar-selected-month></button>`,Months:d=>`<div class="${d.CSSClasses.months}"></div>`,Week:d=>`<div class="${d.CSSClasses.week}"></div>`,WeekNumbers:d=>d.settings.visibility.weekNumbers?`<div class="${d.CSSClasses.weekNumbers}"></div>`:"",Year:d=>`<button type="button"class="${d.CSSClasses.year}"data-calendar-selected-year></button>`,Years:d=>`<div class="${d.CSSClasses.years}"></div>`},Symbol.toStringTag,{value:"Module"})),Ho=(d,e)=>e.replace(/[\n\t]/g,"").replace(/<#(?!\/?Multiple)(.*?)>/g,(i,o)=>{const l=(d=>cr[d])(o.replace(/[/\s\n\t]/g,"")),c=l?l(d):"";return d.sanitizer(c)}).replace(/[\n\t]/g,""),gn=(d,e)=>{const{HTMLElement:i,CSSClasses:o,DOMTemplates:l,type:c,currentType:u,correctMonths:g}=d,y=(V,te)=>{if(!e)return;const ve=i.querySelector(`.${o.controls}`);ve&&i.removeChild(ve),i.querySelector(`.${o.grid}`).classList.add(o.gridDisabled);const Ae=e.closest(`.${o.column}`);Ae.classList.add(V),Ae.innerHTML=Ho(d,te)},M={default:()=>{i.classList.add(o.calendarDefault),i.classList.remove(o.calendarMonth,o.calendarYear),i.innerHTML=Ho(d,l.default)},multiple:()=>{g&&(i.classList.add(o.calendarMultiple),i.classList.remove(o.calendarMonth,o.calendarYear),i.innerHTML=((d,e)=>e.replace(/<#Multiple>(.*?)<#\/Multiple>/g,(i,o)=>{let l="";for(let c=0;c<d.correctMonths;c++)l+=o;return d.sanitizer(l)}).replace(/[\n\t]/g,""))(d,Ho(d,l.multiple)))},month:()=>{"multiple"!==c?(i.classList.add(o.calendarMonth),i.classList.remove(o.calendarDefault,o.calendarYear),i.innerHTML=Ho(d,l.month)):y(o.columnMonth,l.month)},year:()=>{"multiple"!==c?(i.classList.add(o.calendarYear),i.classList.remove(o.calendarDefault,o.calendarMonth),i.innerHTML=Ho(d,l.year)):y(o.columnYear,l.year)}};i.classList.add(o.calendar),M[u]()},ur=(d,e,i,o,l)=>{const c=e.cloneNode(!1);return c.className=`${d.CSSClasses.yearsYear}${i===l?` ${d.CSSClasses.yearsYearSelected}`:o?` ${d.CSSClasses.yearsYearDisabled}`:""}`,c.dataset.calendarYear=String(l),c.title=String(l),c.innerText=String(l),o&&(c.tabIndex=-1),c},Co=(d,e)=>{const i=e?.dataset.calendarSelectedYear?Number(e?.dataset.calendarSelectedYear):d.selectedYear;d.currentType="year",gn(d,e),gs(d),wi(d);const o=d.HTMLElement.querySelector(`.${d.CSSClasses.years}`);if(!d.settings.selection.year||!o)return;o.classList.add(d.CSSClasses.yearsSelecting);const l="multiple"!==d.type||d.selectedYear===i?0:1,c=document.createElement("button");c.type="button";for(let u=d.viewYear-7;u<d.viewYear+8;u++){const g=u<d.dateMin.getFullYear()+l||u>d.dateMax.getFullYear(),y=ur(d,c,i,g,u);o.appendChild(y),d.actions.getYears&&d.actions.getYears(u,y,d)}},fr=d=>`${d.charAt(0).toUpperCase()}${d.substring(1,d.length)}`.replace(/\./,""),la=(d,e)=>{const i=new Date(`1978-01-0${e+1}T00:00:00.000Z`).toLocaleString(d.settings.lang,{weekday:"short",timeZone:"UTC"});d.locale.weekday.push(fr(i))},Rs=(d,e)=>{const i=new Date(`1978-${e+1<=9?`0${e+1}`:e+1}-01T00:00:00.000Z`).toLocaleString(d.settings.lang,{month:"long",timeZone:"UTC"});d.locale.months.push(fr(i))},Ks=d=>{if("multiple"!==d.type)return 0;const e=d.HTMLElement.querySelectorAll(`.${d.CSSClasses.column}`),i=Array.from(e).findIndex(o=>o.classList.contains(`${d.CSSClasses.columnMonth}`));return i>0?i:0},fl=(d,e,i,o,l,c)=>{const u=e.cloneNode(!1);return u.className=`${d.CSSClasses.monthsMonth}${i===c?` ${d.CSSClasses.monthsMonthSelected}`:l?` ${d.CSSClasses.monthsMonthDisabled}`:""}`,u.title=o,u.innerText=`${d.settings.visibility.monthShort?o.substring(0,3):o}`,u.dataset.calendarMonth=String(c),l&&(u.tabIndex=-1),u},Go=(d,e)=>{var i,o;const l=e?.dataset.calendarSelectedMonth?Number(e.dataset.calendarSelectedMonth):d.selectedMonth,c=null==(i=e?.closest(`.${d.CSSClasses.column}`))?void 0:i.querySelector(`.${d.CSSClasses.year}`),u=c?Number(c.dataset.calendarSelectedYear):d.selectedYear;d.currentType="month",gn(d,e),gs(d);const g=null==(o=d.HTMLElement)?void 0:o.querySelector(`.${d.CSSClasses.months}`);if(!d.settings.selection.month||!g)return;g.classList.add(d.CSSClasses.monthsSelecting);const y=d.jumpMonths>1?d.locale.months.map((V,te)=>l-d.jumpMonths*te).concat(d.locale.months.map((V,te)=>l+d.jumpMonths*te)).filter(V=>V>=0&&V<=12):Array.from(Array(12).keys()),M=document.createElement("button");M.type="button";for(let V=0;V<12;V++){const te=d.locale.months[V],ve=V<d.dateMin.getMonth()+Ks(d)&&u<=d.dateMin.getFullYear()||V>d.dateMax.getMonth()+Ks(d)&&u>=d.dateMax.getFullYear()||V!==l&&!y.includes(V),Ae=fl(d,M,l,te,ve,V);g.appendChild(Ae),d.actions.getMonths&&d.actions.getMonths(V,Ae,d)}},jo=(d,e)=>d&&e?{0:{AM:"00",PM:"12"},1:{AM:"01",PM:"13"},2:{AM:"02",PM:"14"},3:{AM:"03",PM:"15"},4:{AM:"04",PM:"16"},5:{AM:"05",PM:"17"},6:{AM:"06",PM:"18"},7:{AM:"07",PM:"19"},8:{AM:"08",PM:"20"},9:{AM:"09",PM:"21"},10:{AM:"10",PM:"22"},11:{AM:"11",PM:"23"},12:{AM:"12",PM:"12"}}[Number(d)][e]:"",yo=(d,e,i)=>d.querySelector(`.${e}${i?` input[name="${i}"]`:""}`),Cs=(d,e,i)=>{d.addEventListener("mouseover",()=>e.classList.add(i)),d.addEventListener("mouseout",()=>e.classList.remove(i))},Fs=(d,e,i,o)=>{({hours:()=>{d.selectedHours=i},minutes:()=>{d.selectedMinutes=i}})[o](),d.selectedTime=`${d.selectedHours}:${d.selectedMinutes}${d.selectedKeeping?` ${d.selectedKeeping}`:""}`,d.actions.changeTime&&d.actions.changeTime(e,d),d.input&&d.HTMLInputElement&&d.actions.changeToInput&&d.actions.changeToInput(e,d)},ts=(d,e,i,o,l,c)=>{e.addEventListener("input",u=>{const g=u.target,y=Number(g.value),M=y<10?`0${y}`:`${y}`;if("hours"!==l||12!==c)return i.value=M,void Fs(d,u,M,l);y<c&&y>0?(i.value=M,d.selectedKeeping="AM",o.innerText=d.selectedKeeping,Fs(d,u,M,l)):(0===y?(d.selectedKeeping="AM",o.innerText="AM"):(d.selectedKeeping="PM",o.innerText="PM"),i.value=$s(g.value),Fs(d,u,$s(g.value),l))})},Br=(d,e,i,o,l,c)=>{i.addEventListener("change",u=>{const g=u.target,y=Number(g.value),M=y<10?`0${y}`:`${y}`;"hours"===l&&12===c?g.value&&y<=c&&y>0?(g.value=M,e.value=jo(M,d.selectedKeeping),Fs(d,u,M,l)):g.value&&y<24&&(y>c||0===y)?(0===y?(d.selectedKeeping="AM",o.innerText="AM"):(d.selectedKeeping="PM",o.innerText="PM"),g.value=$s(g.value),e.value=M,Fs(d,u,$s(g.value),l)):g.value=d.selectedHours:g.value&&y<=c&&y>=0?(g.value=M,e.value=M,Fs(d,u,M,l)):"hours"===l?g.value=d.selectedHours:"minutes"===l&&(g.value=d.selectedMinutes)})},en=(d,e,i,o)=>`<label class="${e}"><input type="text"name="${d}"maxlength="2"value="${i}"${o?"disabled":""}></label>`,Ys=(d,e,i,o,l,c)=>`<label class="${e}"><input type="range"name="${d}"min="${i}"max="${o}"step="${l}"value="${c}"></label>`,vo=d=>{const e=[...d.locale.weekday];e[0]&&(d.settings.iso8601&&e.push(e.shift()),d.HTMLElement.querySelectorAll(`.${d.CSSClasses.week}`).forEach(i=>((d,e,i)=>{const o=document.createElement("b");e.textContent="";for(let l=0;l<i.length;l++){const c=i[l],u=o.cloneNode(!0);u.className=`${d.CSSClasses.weekDay}`,u.className=`${d.CSSClasses.weekDay}${d.settings.visibility.weekend&&d.settings.iso8601?5===l||6===l?` ${d.CSSClasses.weekDayWeekend}`:"":!d.settings.visibility.weekend||d.settings.iso8601||0!==l&&6!==l?"":` ${d.CSSClasses.weekDayWeekend}`}`,u.innerText=`${c}`,e.appendChild(u)}})(d,i,e)))},mr=["light","dark","system"],Eo={value:!1,set:()=>{Eo.value=!0},check:()=>Eo.value},$o=(d,e)=>mr.find(i=>{var o;return"system"!==i&&(null==(o=d.getAttribute(e))?void 0:o.includes(i))}),hi=(d,e)=>{d.dataset.calendarTheme=e},Ur=(d,e)=>{if(hi(d.HTMLElement,e.matches?"dark":"light"),"system"!==d.settings.visibility.theme||Eo.check())return;const o=l=>{const c=document.querySelectorAll(`.${d.CSSClasses.calendar}`);c?.forEach(u=>hi(u,l.matches?"dark":"light"))};e.addEventListener?e.addEventListener("change",o):e.addListener(o),Eo.set()},So=d=>{const e={default:()=>{vo(d),Os(d)},multiple:()=>{vo(d),Os(d)},month:()=>Go(d),year:()=>Co(d)};(d=>{if(!mr.includes(d.settings.visibility.theme))throw new Error('Incorrect name of theme in "settings.visibility.theme".');"not all"!==window.matchMedia("(prefers-color-scheme)").media?{light:()=>hi(d.HTMLElement,"light"),dark:()=>hi(d.HTMLElement,"dark"),system:()=>((d,e)=>{const i=d.settings.visibility.themeDetect?document.querySelector(d.settings.visibility.themeDetect):null;if(!i)return void Ur(d,e);const o=d.settings.visibility.themeDetect.replace(/^.*\[(.+)\]/g,(c,u)=>u),l=$o(i,o);l?(hi(d.HTMLElement,l),((d,e,i)=>{new MutationObserver(o=>{for(let l=0;l<o.length;l++)if(o[l].attributeName===i){const c=$o(e,i);c&&hi(d.HTMLElement,c);break}}).observe(e,{attributes:!0})})(d,i,o)):Ur(d,e)})(d,window.matchMedia("(prefers-color-scheme: dark)"))}[d.settings.visibility.theme]():hi(d.HTMLElement,"light")})(d),(d=>{if("define"!==d.settings.lang||!d.locale.weekday[6]||!d.locale.months[11]){if("define"===d.settings.lang)throw new Error('You specified "define" for "settings.lang" but did not provide the required values for "locale.weekday" or "locale.months".');d.locale.weekday=[],d.locale.months=[];for(let e=0;e<7;e++)la(d,e);for(let e=0;e<12;e++)Rs(d,e)}})(d),gn(d),gs(d),wi(d),(d=>{const e=d.HTMLElement.querySelector(`.${d.CSSClasses.time}`);if(!e)return;const i=!0===d.settings.selection.time?12:d.settings.selection.time,o="range"===d.settings.selection.controlTime,[l,c]=[0,23],[u,g]=[0,59];e.innerHTML=d.sanitizer(`<div class="${d.CSSClasses.timeContent}">${en("hours",d.CSSClasses.timeHours,d.selectedHours,o)}${en("minutes",d.CSSClasses.timeMinutes,d.selectedMinutes,o)}${12===i?`<button type="button" class="${d.CSSClasses.timeKeeping}"${o?"disabled":""}>${d.selectedKeeping}</button>`:""}</div><div class="${d.CSSClasses.timeRanges}">${Ys("hours",d.CSSClasses.timeRange,l,c,d.settings.selection.stepHours,d.selectedKeeping?jo(d.selectedHours,d.selectedKeeping):d.selectedHours)}${Ys("minutes",d.CSSClasses.timeRange,u,g,d.settings.selection.stepMinutes,d.selectedMinutes)}</div>`),((d,e,i)=>{const o=24===i?23:i||12,l=yo(e,d.CSSClasses.timeRange,"hours"),c=yo(e,d.CSSClasses.timeRange,"minutes"),u=yo(e,d.CSSClasses.timeHours,"hours"),g=yo(e,d.CSSClasses.timeMinutes,"minutes"),y=e.querySelector(`.${d.CSSClasses.timeKeeping}`);Cs(l,u,d.CSSClasses.isFocus),Cs(c,g,d.CSSClasses.isFocus),ts(d,l,u,y,"hours",o),ts(d,c,g,y,"minutes",0),Br(d,l,u,y,"hours",o),Br(d,c,g,y,"minutes",59),y&&((d,e,i)=>{e.addEventListener("click",o=>{d.selectedKeeping=e.innerText.includes("AM")?"PM":"AM",e.innerText=d.selectedKeeping,i.value=jo(d.selectedHours,d.selectedKeeping),Fs(d,o,d.selectedHours,"hours")})})(d,y,l)})(d,e,i)})(d),e[d.currentType]()},Xt={self:null,rangeMin:void 0,rangeMax:void 0},ls=()=>{var d;if(null==(d=Xt.self)||!d.HTMLElement)return;const{CSSClasses:e}=Xt.self;Xt.self.HTMLElement.querySelectorAll(`.${Xt.self.CSSClasses.dayBtnHover}`).forEach(i=>{var o;i.classList.remove(Xt.self.CSSClasses.dayBtnHover),null==(o=i.parentElement)||o.classList.remove(e.dayHoverIntermediate,e.dayHoverFirst,e.dayHoverLast)})},gr=(d,e,i)=>{var o,l,c;if(null==(o=Xt.self)||!o.selectedDates)return;const u=Vt(d),{CSSClasses:g}=Xt.self;if(null!=(l=Xt.self.rangeDisabled)&&l.includes(u))return;const y=null==(c=Xt.self.HTMLElement)?void 0:c.querySelectorAll(`[data-calendar-day="${u}"]`);y?.forEach(M=>{var V;M.classList.add(g.dayBtnHover),null==(V=M.parentElement)||V.classList.add(g.dayHoverIntermediate)}),e?.forEach(M=>{var V;return null==(V=M.parentElement)?void 0:V.classList.add(g.dayHoverFirst)}),i?.forEach(M=>{var V;return null==(V=M.parentElement)?void 0:V.classList.add(g.dayHoverLast)})},so=d=>{var e;if(!d.target||null==(e=Xt.self)||!e.selectedDates)return;if(!d.target.closest(`.${Xt.self.CSSClasses.days}`))return void ls();const i=d.target.closest("[data-calendar-day]");if(!i)return;const o=i.dataset.calendarDay,l=Un(Xt.self.selectedDates[0]),c=Un(o),u=Xt.self.HTMLElement.querySelectorAll(`[data-calendar-day="${Xt.self.selectedDates[0]}"]`),g=Xt.self.HTMLElement.querySelectorAll(`[data-calendar-day="${o}"]`),[y,M]=l<c?[u,g]:[g,u],[V,te]=l<c?[l,c]:[c,l];ls();for(let ve=new Date(V);ve<=te;ve.setDate(ve.getDate()+1))gr(ve,y,M)},as=d=>{Xt.self&&"Escape"===d.key&&(Xt.self.selectedDates=[],Xt.self.HTMLElement.removeEventListener("mousemove",so),document.removeEventListener("keydown",as),So(Xt.self))},jr=(d,e)=>{var i;if(e){const o=1===d.selectedDates.length&&d.selectedDates[0].includes(e);d.selectedDates=o&&!d.settings.selection.cancelableDay?[e,e]:o&&d.settings.selection.cancelableDay?[]:d.selectedDates.length>1?[e]:[...d.selectedDates,e],null==(i=d.selectedDates)||i.sort((l,c)=>+new Date(l)-+new Date(c))}d.settings.range.disableGaps&&(Xt.rangeMin=Xt.rangeMin?Xt.rangeMin:d.rangeMin,Xt.rangeMax=Xt.rangeMax?Xt.rangeMax:d.rangeMax),Xt.self=d,{set:()=>{d.HTMLElement.addEventListener("mousemove",so),document.addEventListener("keydown",as),d.settings.range.disableGaps&&(()=>{var d,e,i;if(null==(e=null==(d=Xt.self)?void 0:d.selectedDates)||!e[0]||!Xt.self.rangeDisabled||(null==(i=Xt.self.rangeDisabled)?void 0:i.length)<2)return;const o=Un(Xt.self.selectedDates[0]),[l,c]=Xt.self.rangeDisabled.map(u=>Un(u)).reduce(([u,g],y)=>[o>=y?y:u,o<y&&null===g?y:g],[null,null]);l&&(Xt.self.rangeMin=Vt(new Date(l.setDate(l.getDate()+1)))),c&&(Xt.self.rangeMax=Vt(new Date(c.setDate(c.getDate()-1))))})()},reset:()=>{const[o,l]=[d.selectedDates[0],d.selectedDates[d.selectedDates.length-1]];d.selectedDates=d.selectedDates[0]!==d.selectedDates[d.selectedDates.length-1]?d.settings.range.edgesOnly?[o,l]:Yi([`${o}:${l}`]):[d.selectedDates[0],d.selectedDates[0]],d.HTMLElement.removeEventListener("mousemove",so),document.removeEventListener("keydown",as),d.settings.range.disableGaps&&Xt.self&&(Xt.self.rangeMin=Xt.rangeMin,Xt.self.rangeMax=Xt.rangeMax)}}[1===d.selectedDates.length?"set":"reset"]()},pr=(d,e,i)=>{if(!e.dataset.calendarDay)return;const o=e.dataset.calendarDay,l=e.classList.contains(d.CSSClasses.dayBtnSelected);if(l&&!d.settings.selection.cancelableDay)return;let c=!0;void 0!==d.toggleSelected&&(c="function"==typeof d.toggleSelected?d.toggleSelected(d):d.toggleSelected),l&&!c||(d.selectedDates=l?d.selectedDates.filter(u=>u!==o):i?[...d.selectedDates,o]:[o])},oo=(d,e,i,o,l)=>{const c=d.HTMLElement.querySelectorAll(`.${d.CSSClasses.column}`),u=Array.from(c).findIndex(y=>y.classList.contains(e)),g=Number(c[u].querySelector(`.${i}`).getAttribute(l));return"month"===d.currentType&&u>=0?o-u:"year"===d.currentType&&d.selectedYear!==g?o-1:o},ml=(d,e,i,o)=>{if(!d.settings.selection[i])return;const l=e.target,c=V=>l.closest(`.${V}`),u=c(o.header),g=c(o.item),y=c(d.CSSClasses.grid),M=c(d.CSSClasses.column);d.currentType!==i&&u?{year:()=>Co(d,l),month:()=>Go(d,l)}[i]():g?((d,e,i,o,l)=>{const c={year:()=>{var u,g;return null==(g=(u=d.actions).clickYear)?void 0:g.call(u,e,d)},month:()=>{var u,g;return null==(g=(u=d.actions).clickMonth)?void 0:g.call(u,e,d)}};({year:()=>{if("multiple"===d.type){const u=oo(d,d.CSSClasses.columnYear,d.CSSClasses.year,Number(l.dataset.calendarYear),"data-calendar-selected-year"),g=d.selectedMonth<d.dateMin.getMonth()&&u<=d.dateMin.getFullYear(),y=d.selectedMonth>d.dateMax.getMonth()&&u>=d.dateMax.getFullYear(),M=u<d.dateMin.getFullYear(),V=u>d.dateMax.getFullYear();g||M?(d.selectedYear=d.dateMin.getFullYear(),d.selectedMonth=d.dateMin.getMonth()):y||V?(d.selectedYear=d.dateMax.getFullYear(),d.selectedMonth=d.dateMax.getMonth()):d.selectedYear=u}else d.selectedYear=Number(l.dataset.calendarYear)},month:()=>{if("multiple"===d.type){const u=oo(d,d.CSSClasses.columnMonth,d.CSSClasses.month,Number(l.dataset.calendarMonth),"data-calendar-selected-month"),g=l.closest(`.${o.column}`).querySelector(`.${d.CSSClasses.year}`);d.selectedYear=Number(g.dataset.calendarSelectedYear);const y=u<d.dateMin.getMonth()&&d.selectedYear<=d.dateMin.getFullYear(),M=u>d.dateMax.getMonth()&&d.selectedYear>=d.dateMax.getFullYear();d.selectedMonth=y?d.dateMin.getMonth():M?d.dateMax.getMonth():u}else d.selectedMonth=Number(l.dataset.calendarMonth)}})[i](),c[i](),d.currentType=d.type,So(d)})(d,e,i,o,g):(d.currentType===i&&u||"multiple"===d.type&&d.currentType===i&&y&&!M)&&(d.currentType=d.type,So(d))},gl=d=>{const e=i=>{((d,e)=>{const i=e.target.closest(`.${d.CSSClasses.arrow}`);i&&(["default","multiple"].includes(d.currentType)?ps(d,i.dataset.calendarArrow):"year"===d.currentType&&void 0!==d.viewYear&&(d.viewYear+={prev:-15,next:15}[i.dataset.calendarArrow],Co(d,e.target)),d.actions.clickArrow&&d.actions.clickArrow(e,d))})(d,i),((d,e)=>{var i;if(!d.settings.visibility.weekNumbers||!d.actions.clickWeekNumber)return;const o=e.target.closest(`.${d.CSSClasses.weekNumber}`),l=null==(i=d.HTMLElement)?void 0:i.querySelectorAll("[data-calendar-week-number]");if(!o||!l)return;const c=Number(o.innerText),u=Number(o.dataset.calendarYearWeek),g=Array.from(l).filter(y=>Number(y.dataset.calendarWeekNumber)===c);d.actions.clickWeekNumber(e,c,g,u,d)})(d,i),((d,e)=>{var i;const o=e.target,l=y=>o.closest(`.${y}`),c=l(d.CSSClasses.dayBtn);if(!d.settings.selection.day||!["single","multiple","multiple-ranged"].includes(d.settings.selection.day)||!c)return;({single:()=>pr(d,c,!1),multiple:()=>pr(d,c,!0),"multiple-ranged":()=>jr(d,c.dataset.calendarDay)})[d.settings.selection.day](),null==(i=d.selectedDates)||i.sort((y,M)=>+new Date(y)-+new Date(M)),d.actions.clickDay&&d.actions.clickDay(e,d),d.input&&d.HTMLInputElement&&d.HTMLElement&&d.actions.changeToInput&&d.actions.changeToInput(e,d);const u=l(d.CSSClasses.dayBtnPrev),g=l(d.CSSClasses.dayBtnNext);({prev:()=>ps(d,"prev"),next:()=>ps(d,"next"),default:()=>Os(d)})[u?"prev":g?"next":"default"]()})(d,i),ml(d,i,"month",{header:d.CSSClasses.month,item:d.CSSClasses.monthsMonth,column:d.CSSClasses.columnMonth}),ml(d,i,"year",{header:d.CSSClasses.year,item:d.CSSClasses.yearsYear,column:d.CSSClasses.columnYear})};return d.HTMLElement.addEventListener("click",e),()=>d.HTMLElement.removeEventListener("click",e)};function Hi(d){if(!d||!d.getBoundingClientRect)return{top:0,bottom:0,left:0,right:0};const e=d.getBoundingClientRect(),i=document.documentElement;return{bottom:e.bottom,right:e.right,top:e.top+window.pageYOffset-i.clientTop,left:e.left+window.pageXOffset-i.clientLeft}}function ro(){return{vw:Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),vh:Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)}}function Xo(d,e){let i="left";if(e&&d){const{canShow:o,parentPositions:l}=function Yo(d,e,i=5){const o={top:!0,bottom:!0,left:!0,right:!0},l=[];if(e&&d){const{bottom:c,top:u}=function da(d){var e,i;let o=0,l=0,c=0,u=0;const g=function xn(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}(),y=Hi(d),{vh:M,vw:V}=ro(),te=g.top,ve=g.left;if(y){const Ae=null!=(e=y.top)?e:0,ze=null!=(i=y.left)?i:0;l=Ae-te,c=ze-ve,o=M-(Ae-te+d.clientHeight),u=V-(ze-ve+d.clientWidth)}return{top:l,bottom:o,left:c,right:u}}(d),{top:g,left:y}=Hi(d),{height:M,width:V}=e.getBoundingClientRect(),{vh:te,vw:ve}=ro(),Ae={x:ve/2,y:te/2};g<Ae.y&&l.push("top"),g>Ae.y&&l.push("bottom"),y<Ae.x&&l.push("left"),y>Ae.x&&l.push("right"),M>u-i&&(o.top=!1),M>c-i&&(o.bottom=!1),V>y&&(o.left=!1),ve-y<V&&(o.right=!1)}return{canShow:o,parentPositions:l}}(d,e);if(!o.left||!o.right)return Array.isArray(l)&&(l[0]="bottom"===l[0]?"top":"bottom"),l;o.bottom?i="center":o.top&&(i=["top","center"])}return i}const To=(d,e,i,o)=>{if(d){const l="auto"===i?Xo(d,e):i,c={top:-e.offsetHeight,bottom:d.offsetHeight,left:0,center:d.offsetWidth/2-e.offsetWidth/2,right:d.offsetWidth-e.offsetWidth},u=Array.isArray(l)?l[0]:"bottom",g=Array.isArray(l)?l[1]:l;"bottom"===u?(e.classList.remove(o.calendarToInputTop),e.classList.add(o.calendarToInputBottom)):(e.classList.remove(o.calendarToInputBottom),e.classList.add(o.calendarToInputTop));const{top:y,left:M}=Hi(d);Object.assign(e.style,{left:`${M+c[g]}px`,top:`${y+c[u]}px`})}},Js=(d,{year:e,month:i,dates:o,holidays:l,time:c}={})=>{var u;const g=Pt({},d.settings.selected);d.settings.selected.year=e?g.year:d.selectedYear,d.settings.selected.month=i?g.month:d.selectedMonth,d.settings.selected.holidays=l?g.holidays:d.selectedHolidays,d.settings.selected.time=c?g.time:d.selectedTime,d.settings.selected.dates="only-first"===o&&null!=(u=d.selectedDates)&&u[0]?[d.selectedDates[0]]:!0===o?g.dates:d.selectedDates,mn(d),So(d),d.settings.selected=g,"multiple-ranged"===d.settings.selection.day&&o&&jr(d)},Qs=(d,e=!0)=>{d.isInputInit=!0;const i=document.createElement("div");return i.className=`${d.CSSClasses.calendar} ${d.CSSClasses.calendarToInput} ${d.CSSClasses.calendarHidden}`,d.HTMLElement=i,document.body.appendChild(d.HTMLElement),d.HTMLElement.style.visibility="hidden",e&&queueMicrotask(()=>{To(d.HTMLInputElement,i,d.settings.visibility.positionToInput,d.CSSClasses),d.HTMLElement.style.visibility="visible",d.show()}),Js(d,{year:!0,month:!0,dates:!0,holidays:!0,time:!0}),d.actions.initCalendar&&d.actions.initCalendar(d),gl(d)};function He(d,...e){const i=l=>l&&"object"==typeof l&&!Array.isArray(l);if(!e.length)return d;const o=e.shift();return i(d)&&i(o)&&Object.keys(o).forEach(l=>{i(o[l])?(d[l]||Object.assign(d,{[l]:{}}),He(d[l],o[l])):Object.assign(d,{[l]:o[l]})}),He(d,...e)}function Ht(d,e,i){d.settings=He(d.settings,{[e]:i})}class pn extends ei{constructor(e,i){if(super(),Ct(this,"init",()=>{return(d=this).HTMLOriginalElement=d.HTMLElement.cloneNode(!0),d.isInit=!0,d.input?(d=>{const e=[];d.HTMLInputElement=d.HTMLElement;const i=()=>To(d.HTMLInputElement,d.HTMLElement,d.settings.visibility.positionToInput,d.CSSClasses),o=l=>{var c;d&&l.target!==d.HTMLInputElement&&(null==(c=d.HTMLElement)||!c.contains(l.target))&&(d.HTMLInputElement&&d.HTMLElement&&d.hide(),window.removeEventListener("resize",i),document.removeEventListener("click",o,{capture:!0}))};return d.HTMLInputElement.addEventListener("click",()=>{d.isInputInit?(To(d.HTMLInputElement,d.HTMLElement,d.settings.visibility.positionToInput,d.CSSClasses),d.HTMLElement.style.visibility="visible",d.show()):e.push(Qs(d)),window.addEventListener("resize",i),document.addEventListener("click",o,{capture:!0})}),()=>{e.forEach(l=>l())}})(d):(mn(d),So(d),d.actions.initCalendar&&d.actions.initCalendar(d),gl(d));var d}),Ct(this,"update",l=>((d,{year:e,month:i,dates:o,holidays:l,time:c}={})=>{if(!d.isInit)throw new Error(xs_notInit);d.input&&!d.isInputInit&&Qs(d,!1),Js(d,{year:e,month:i,dates:o,holidays:l,time:c}),d.actions.updateCalendar&&d.actions.updateCalendar(d)})(this,l)),Ct(this,"destroy",()=>(d=>{var e,i,o,l,c,u;if(!d.isInit)throw new Error(xs_notInit);d.input?(null==(i=null==(e=d.HTMLElement)?void 0:e.parentElement)||i.removeChild(d.HTMLElement),null==(l=null==(o=d.HTMLInputElement)?void 0:o.replaceWith)||l.call(o,d.HTMLOriginalElement),d.HTMLInputElement=void 0):null==(u=null==(c=d.HTMLElement)?void 0:c.replaceWith)||u.call(c,d.HTMLOriginalElement),d.HTMLElement=d.HTMLOriginalElement,d.actions.destroyCalendar&&d.actions.destroyCalendar(d)})(this)),Ct(this,"show",()=>{var d;(d=this).currentType?(d.HTMLElement.classList.remove(d.CSSClasses.calendarHidden),d.actions.showCalendar&&d.actions.showCalendar(d)):d.HTMLElement.click()}),Ct(this,"hide",()=>{var d;(d=this).currentType&&(d.HTMLElement.classList.add(d.CSSClasses.calendarHidden),d.actions.hideCalendar&&d.actions.hideCalendar(d))}),Ct(this,"changeSetting",(l,c)=>Ht(this,l,c)),this.HTMLElement="string"==typeof e?document.querySelector(e):e,!this.HTMLElement)throw new Error(`${e} is not found, check the first argument passed to new VanillaCalendar.`);if(!i)return;const o=(l,c)=>{Object.keys(c).forEach(u=>{"object"!=typeof l[u]||"object"!=typeof c[u]||c[u]instanceof Date?l[u]=c[u]:o(l[u],c[u])})};o(this,i)}}class Ds{constructor(e){this.translaterService=e,this._clearFilterTriggered=!1,this._lastClickIsDate=!1,this._shouldTriggerQuery=!0,this.hasTimePicker=!1,this.inputFilterType="range",this.searchTerms=[],this._bindEventService=new Ft.P}get gridOptions(){return this.grid?.getOptions()??{}}get columnFilter(){return this.columnDef?.filter||{}}get currentDateOrDates(){return this._currentDateOrDates}get defaultOperator(){return"compound"===this.inputFilterType?le.empty:this.gridOptions.defaultFilterRangeOperator||le.rangeInclusive}get pickerOptions(){return this._pickerOptions||{}}get filterOptions(){return{...this.gridOptions.defaultFilterOptions?.date,...this.columnFilter?.filterOptions}}get operator(){return"compound"===this.inputFilterType?this._operator||this.columnFilter.operator||this.defaultOperator:this.columnFilter?.operator??this.defaultOperator}set operator(e){"compound"===this.inputFilterType?this._operator=e:this.columnFilter&&(this.columnFilter.operator=e)}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,"compound"===this.inputFilterType&&(this.operator=e.operator||""),this.searchTerms=e?.searchTerms??[],this.filterContainerElm=e.filterContainerElm;const i="compound"===this.inputFilterType?Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"":this.searchTerms;this._filterElm=this.createDomFilterElement(i),this.updateFilterStyle(this.searchTerms.length>0),this._selectOperatorElm&&this._bindEventService.bind(this._selectOperatorElm,"change",this.onTriggerEvent.bind(this)),this._bindEventService.bind(document.body,"keydown",o=>{("Escape"===o.key||"Tab"===o.key)&&this.hide()}),this._bindEventService.bind(this._dateInputElm,"keydown",o=>{"Backspace"===o.key&&this.clear(!0,!1)})}clear(e=!0,i=!0){if(this.calendarInstance&&(this._clearFilterTriggered=i,this._shouldTriggerQuery=e,this._currentValue="",this.searchTerms=[],this._currentDateStrings=[],this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this.calendarInstance)){const o=new Date;Bt(this.columnFilter,this._dateInputElm,this.calendarInstance,{columnDef:this.columnDef,oldVal:this._currentDateOrDates,newVal:"",updatePickerUI:!0,selectedSettings:{dates:[],month:o.getMonth(),year:o.getFullYear()}})}this.onTriggerEvent(new Event("keyup")),this.updateFilterStyle(!1)}destroy(){this._bindEventService.unbindAll(),this.calendarInstance?.destroy(),(0,w.emptyElement)(this.filterContainerElm),this.filterContainerElm?.remove(),this._selectOperatorElm?.remove(),this._filterElm?.remove()}hide(){"function"==typeof this.calendarInstance?.hide&&this.calendarInstance.hide()}show(){"function"==typeof this.calendarInstance?.show&&this.calendarInstance.show()}getValues(){return this._currentDateOrDates}setValues(e,i,o=!1){let l;"compound"===this.inputFilterType?l=Array.isArray(e)?e[0]:e:"string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]&&e[0].indexOf("..")>0?l="string"==typeof e?[e]:e[0].split(".."):Array.isArray(e)&&(l=e),this.calendarInstance&&void 0!==l&&(Bt(this.columnFilter,this._dateInputElm,this.calendarInstance,{columnDef:this.columnDef,newVal:l,updatePickerUI:!0}),this._currentDateOrDates=e&&l?l:void 0);const c=this.getValues()||[],u=Array.isArray(c)?c:[c];if(this.updateFilterStyle(u.length>0),this.operator=i||this.defaultOperator,i&&this._selectOperatorElm){const g=Me(this.operator);this._selectOperatorElm.value=g}o&&this.callback(void 0,{columnDef:this.columnDef,searchTerms:u,operator:this.operator,shouldTriggerQuery:!0})}buildDatePickerInput(e){const i=this.columnDef?.id??"",o=this.columnFilter.type||this.columnDef.type||p.dateIso,l=this.columnDef.outputType||this.columnFilter.type||this.columnDef.type||p.dateUtc,c=ke(l),u=this.columnFilter.type||this.columnDef.type||p.dateIso;c&&"range"!==this.inputFilterType&&("ISO8601"===c||c.toLowerCase().includes("h"))&&(this.hasTimePicker=!0);const g=ke(this.hasTimePicker?p.dateTimeIsoAM_PM:p.dateIso),y=(this.filterOptions?.locale??this.translaterService?.getCurrentLanguage?.())||this.gridOptions.locale||"en";let M;"compound"===this.inputFilterType?e&&(M=e,this._currentDateOrDates=e):("string"==typeof e||Array.isArray(e)&&"string"==typeof e[0]&&e[0].indexOf("..")>0?M="string"==typeof e?[e]:e[0].split(".."):Array.isArray(e)&&(M=e),Array.isArray(M)&&(this._currentDateOrDates=M,this._currentDateStrings=M.map(ve=>Ve(ve,void 0,u))));const V={input:!0,jumpToSelectedDate:!0,type:"range"===this.inputFilterType?"multiple":"default",sanitizer:ve=>this.grid.sanitizeHtmlString(ve),toggleSelected:!1,actions:{clickDay:ve=>{this._lastClickIsDate=!0},changeToInput:(ve,Ae)=>{if(Ae.HTMLInputElement){let ze=[],Ye="",nt="";if(Ae.selectedDates[1]){Ae.selectedDates.sort((gt,rt)=>+new Date(gt)-+new Date(rt)),Ye=Ae.selectedDates[0],nt=Ae.selectedDates[Ae.selectedDates.length-1];const et=(0,xe.GP)(Ae.selectedDates[0],c,"en-US"),Ot=(0,xe.GP)(nt,c,"en-US");Ae.HTMLInputElement.value=`${et} \u2014 ${Ot}`,ze=[Ye,nt]}else Ae.selectedDates[0]?(Ye=Ae.selectedDates[0],Ae.HTMLInputElement.value=Ve(Ye,p.dateIso,l),ze=Ae.selectedDates):Ae.HTMLInputElement.value="";if(this.hasTimePicker&&Ye){const et=(0,xe.qg)(Ye,g);et.setHours(+(Ae.selectedHours||0)),et.setMinutes(+(Ae.selectedMinutes||0)),Ae.HTMLInputElement.value=Ve(et,void 0,l),ze=[et]}if("compound"===this.inputFilterType?this._currentValue=Ve(ze[0],void 0,o):Array.isArray(ze)&&(this._currentDateStrings=ze.map(et=>Ve(et,void 0,o)),this._currentValue=this._currentDateStrings.join("..")),this._currentDateOrDates=ze.map(et=>et instanceof Date?et:(0,xe.qg)(et,g)),this._currentValue){const et=this.hasTimePicker?new Event("keyup"):void 0;this.onTriggerEvent(et)}"range"===this.inputFilterType&&Ae.selectedDates.length<2&&(this._lastClickIsDate=!1),this._lastClickIsDate&&(Ae.hide(),this._lastClickIsDate=!1)}}},settings:{lang:y,iso8601:!1,visibility:{theme:this.gridOptions?.darkMode?"dark":"light",positionToInput:"auto",weekend:!1}}};"range"===this.inputFilterType&&(V.type="multiple",V.months=2,V.jumpMonths=2,V.settings={...V.settings,range:{edgesOnly:!0},selection:{day:"multiple-ranged"},visibility:{...V.settings?.visibility,daysOutside:!1}}),this.hasTimePicker&&(V.settings.selection??={},V.settings.selection.time=24),this._pickerOptions=(0,w.extend)(!0,{},V,{settings:this.filterOptions});let te=this.gridOptions?.defaultFilterPlaceholder??"";this.columnFilter?.placeholder&&(te=this.columnFilter.placeholder),this._dateInputElm=(0,w.createDomElement)("input",{type:"text",className:"form-control date-picker",placeholder:te,readOnly:!0,dataset:{input:"",columnid:`${i}`}}),this.calendarInstance=new pn(this._dateInputElm,this._pickerOptions),this.calendarInstance.init(),this._pickerOptions.settings?.selected?.dates&&(M=this._pickerOptions.settings.selected.dates),M&&Bt(this.columnFilter,this._dateInputElm,this.calendarInstance,{columnDef:this.columnDef,oldVal:void 0,newVal:M,updatePickerUI:!1})}getOperatorOptionValues(){let e;return e=this.columnFilter?.compoundOperatorList?this.columnFilter.compoundOperatorList:Ge(this.gridOptions,this.translaterService),Ze(this.gridOptions,e,"numeric"),e}createDomFilterElement(e){const i=this.columnDef?.id??"";if((0,w.emptyElement)(this.filterContainerElm),this.buildDatePickerInput(e),"range"===this.inputFilterType){const o=(0,w.createDomElement)("div",{className:`date-picker form-group search-filter filter-${i}`});return Array.isArray(e)&&e.length>0&&""!==e[0]&&(this._currentDateOrDates=e,this._currentValue=e[0]),o.appendChild(this._dateInputElm),o&&this.filterContainerElm.appendChild(o),o}{this._selectOperatorElm=$t(this.getOperatorOptionValues(),this.grid);const o=(0,w.createDomElement)("div",{className:`date-picker form-group search-filter filter-${i}`}),l=(0,w.createDomElement)("div",{className:"input-group date-picker"},o);if((0,w.createDomElement)("div",{className:"input-group-addon input-group-prepend operator"},l).appendChild(this._selectOperatorElm),l.appendChild(this._dateInputElm),this.operator){const u=Me(this.operator);this._selectOperatorElm.value=u}return this._currentDateOrDates=e,this._currentValue=e,o&&this.filterContainerElm.appendChild(o),o}}onTriggerEvent(e){if(this._clearFilterTriggered)this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,shouldTriggerQuery:this._shouldTriggerQuery}),this.updateFilterStyle(!1);else if("range"===this.inputFilterType){const i=this._currentDateStrings?this._currentDateStrings:[this._currentValue];this.updateFilterStyle(i.length>0),this.callback(e,{columnDef:this.columnDef,searchTerms:i,operator:this.operator||"",shouldTriggerQuery:this._shouldTriggerQuery})}else if("compound"===this.inputFilterType&&this._selectOperatorElm){const i=this._selectOperatorElm.value;this.updateFilterStyle(!!this._currentValue);const o=this.columnFilter.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput??void 0===this.gridOptions.skipCompoundOperatorFilterWithNullInput,l=o&&(0,w.isDefined)(this._currentDateOrDates)||""===this._currentDateOrDates&&(0,w.isDefined)(this._lastSearchValue);(!o||!o||l)&&this.callback(e,{columnDef:this.columnDef,searchTerms:this._currentValue?[this._currentValue]:null,operator:i||"",shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._lastSearchValue=this._currentValue}updateFilterStyle(e){e?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled")}}class Mi{constructor(e){this.translaterService=e}filterCollection(e,i,o=T.chain){let l=[];return Array.isArray(i)?(l=o===T.merge?[]:[...e],i.forEach(c=>{if(o===T.merge){const u=this.singleFilterCollection(e,c);l=(0,w.uniqueArray)([...l,...u])}else l=this.singleFilterCollection(l,c)})):l=this.singleFilterCollection(e,i),l}singleFilterCollection(e,i){let o=[];if(i){const l=i.property,u=typeof i.value>"u"?"":i.value;switch(i.operator||le.equal){case le.equal:o=e.filter(l?g=>g[l]===u:g=>g===u);break;case le.contains:o=e.filter(l?g=>-1!==g[l]?.toString().indexOf(u.toString()):g=>null!=g&&-1!==g.toString().indexOf(u.toString()));break;case le.notContains:o=e.filter(l?g=>-1===g[l]?.toString().indexOf(u.toString()):g=>null!=g&&-1===g.toString().indexOf(u.toString()));break;default:o=e.filter(l?g=>g[l]!==u:g=>g!==u)}}return o}sortCollection(e,i,o,l){if(l&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');let c=[];if(o)if(Array.isArray(o))c=i.sort((u,g)=>{for(let y=0,M=o.length;y<M;y++){const V=o[y];if(V?.property){const te=V.sortDesc?F.desc:F.asc,ve=V.property,nt=Tt(V?.fieldType??e?.type??p.string,l?this.translaterService?.translate&&this.translaterService.translate(u[ve]||" "):u[ve],l?this.translaterService?.translate&&this.translaterService.translate(g[ve]||" "):g[ve],te,e);if(nt!==F.neutral)return nt}}return F.neutral});else if(o?.property){const u=o.property,g=o.sortDesc?F.desc:F.asc,y=o?.fieldType??e?.type??p.string;c=i.sort((M,V)=>{const te=l?this.translaterService?.translate&&this.translaterService.translate(M[u]||" "):M[u],ve=l?this.translaterService?.translate&&this.translaterService.translate(V[u]||" "):V[u],Ae=Tt(y,te,ve,g,e);return Ae!==F.neutral?Ae:F.neutral})}else if(o&&!o.property){const u=o.sortDesc?F.desc:F.asc,g=o?.fieldType??e?.type??p.string;c=i.sort((y,M)=>{const V=l?this.translaterService?.translate&&this.translaterService.translate(y||" "):y,te=l?this.translaterService?.translate&&this.translaterService.translate(M||" "):M,ve=Tt(g,V,te,u,e);return ve!==F.neutral?ve:F.neutral})}return c}}class Hd{constructor(e,i,o){this.sharedService=e,this.backendUtilities=i,this.translaterService=o}getPickerTitleOutputString(e,i){if(this.sharedService.gridOptions?.enableTranslate&&!this.translaterService?.translate)throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');let o="";const l=this.sharedService.gridOptions?.[i]??{},c=this.sharedService.gridOptions?.enableTranslate??!1,u=this.sharedService.gridOptions?.locales??B.locales,g=l?.[e],y=l?.[`${e}Key`],V=Z(this.sharedService.gridOptions);if(y&&this.translaterService?.translate)o=this.translaterService.translate(y||" ");else switch(e){case"commandTitle":o=g||c&&this.translaterService?.getCurrentLanguage&&this.translaterService?.translate(`${V}COMMANDS`)||u?.TEXT_COMMANDS;break;case"columnTitle":o=g||c&&this.translaterService?.getCurrentLanguage&&this.translaterService?.translate(`${V}COLUMNS`)||u?.TEXT_COLUMNS;break;case"forceFitTitle":o=g||c&&this.translaterService?.getCurrentLanguage&&this.translaterService?.translate(`${V}FORCE_FIT_COLUMNS`)||u?.TEXT_FORCE_FIT_COLUMNS;break;case"syncResizeTitle":o=g||c&&this.translaterService?.getCurrentLanguage&&this.translaterService?.translate(`${V}SYNCHRONOUS_RESIZE`)||u?.TEXT_SYNCHRONOUS_RESIZE;break;default:o=g}return o}readjustFrozenColumnIndexWhenNeeded(e,i,o){if(e>=0){const l=o.findIndex(c=>c.id===this.sharedService.frozenVisibleColumnId);l>=0&&l!==e&&(this.sharedService.gridOptions.frozenColumn=l,this.sharedService.slickGrid.setOptions({frozenColumn:l})),Array.isArray(o)&&Array.isArray(i)&&o.length!==i.length&&this.sharedService.slickGrid.setColumns(o)}}refreshBackendDataset(e){let i=this.sharedService.gridOptions;e&&(i={...this.sharedService.gridOptions,...e},this.sharedService.gridOptions=i),this.backendUtilities?.refreshBackendDataset(i)}runOverrideFunctionWhenExists(e,i){return"function"!=typeof e||!!e.call(this,i)}sortItems(e,i){Array.isArray(e)&&e.sort((o,l)=>o&&l&&o.hasOwnProperty(i)&&l.hasOwnProperty(i)?o[i]-l[i]:0)}translateItems(e,i,o){if(Array.isArray(e))for(const l of e)l.hasOwnProperty(i)&&(l[o]=this.translaterService?.translate?.(l[i]))}translateMenuItemsFromTitleKey(e,i="commandItems"){for(const o of e)"object"==typeof o&&(o.titleKey&&(o.title=this.translateWhenEnabledAndServiceExist(`${o.titleKey}`,`TEXT_${o.titleKey}`)),o.subMenuTitleKey&&(o.subMenuTitle=this.translateWhenEnabledAndServiceExist(`${o.subMenuTitleKey}`,`TEXT_${o.subMenuTitleKey}`))),Array.isArray(o?.[i])&&this.translateMenuItemsFromTitleKey(o?.[i])}translateWhenEnabledAndServiceExist(e,i,o){let l="";const c=this.sharedService?.gridOptions,u=c?.locales??B.locales;return l=o||(c.enableTranslate&&this.translaterService?.translate?this.translaterService.translate(e||" "):i in u?u[i]:i),l}}class wn{get defaultPrevented(){return this._isDefaultPrevented}constructor(e,i){this.event=e,this.args=i,this._isPropagationStopped=!1,this._isImmediatePropagationStopped=!1,this._isDefaultPrevented=!1,this.returnValue=void 0,this.nativeEvent=e,this._arguments=i,e&&["altKey","ctrlKey","metaKey","shiftKey","key","keyCode","clientX","clientY","offsetX","offsetY","pageX","pageY","bubbles","target","type","which","x","y"].forEach(o=>this[o]=e[o]),this._eventTarget=this.nativeEvent?this.nativeEvent.target:void 0}stopPropagation(){this._isPropagationStopped=!0,this.nativeEvent?.stopPropagation()}isPropagationStopped(){return this._isPropagationStopped}stopImmediatePropagation(){this._isImmediatePropagationStopped=!0,this.nativeEvent&&this.nativeEvent.stopImmediatePropagation()}isImmediatePropagationStopped(){return this._isImmediatePropagationStopped}getNativeEvent(){return this.nativeEvent}preventDefault(){this.nativeEvent&&this.nativeEvent.preventDefault(),this._isDefaultPrevented=!0}isDefaultPrevented(){return this.nativeEvent?this.nativeEvent.defaultPrevented:this._isDefaultPrevented}addReturnValue(e){void 0===this.returnValue&&void 0!==e&&(this.returnValue=e)}getReturnValue(){return this.returnValue}getArguments(){return this._arguments}resetReturnValue(){this.returnValue=void 0}}class Dt{get subscriberCount(){return this._handlers.length}constructor(e,i){this.eventName=e,this.pubSub=i,this._handlers=[],this._pubSubService=i}subscribe(e){this._handlers.push(e)}unsubscribe(e){for(let i=this._handlers.length-1;i>=0;i--)this._handlers[i]===e&&this._handlers.splice(i,1)}notify(e,i,o,l=!1){const c=i instanceof wn?i:new wn(i,e);l&&c.resetReturnValue(),o=o||this;for(let u=0;u<this._handlers.length&&!c.isPropagationStopped()&&!c.isImmediatePropagationStopped();u++){const g=this._handlers[u].call(o,c,e);c.addReturnValue(g)}if("function"==typeof this._pubSubService?.publish&&this.eventName){const u=this._pubSubService.publish(this.eventName,{args:e,eventData:c},void 0,g=>c.nativeEvent??=g);c.addReturnValue(u)}return c}setPubSubService(e){this._pubSubService=e}}class tn{constructor(){this.handlers=[]}get subscriberCount(){return this.handlers.length}subscribe(e,i){return this.handlers.push({event:e,handler:i}),e.subscribe(i),this}unsubscribe(e,i){let o=this.handlers.length;for(;o--;)if(this.handlers[o].event===e&&this.handlers[o].handler===i)return this.handlers.splice(o,1),void e.unsubscribe(i);return this}unsubscribeAll(){let e=this.handlers.length;for(;e--;)this.handlers[e].event.unsubscribe(this.handlers[e].handler);return this.handlers=[],this}}class ds{constructor(e,i,o,l){void 0===o&&void 0===l&&(o=e,l=i),this.fromRow=Math.min(e,o),this.fromCell=Math.min(i,l),this.toRow=Math.max(e,o),this.toCell=Math.max(i,l)}isSingleCell(){return this.fromRow===this.toRow&&this.fromCell===this.toCell}isSingleRow(){return this.fromRow===this.toRow}contains(e,i){return e>=this.fromRow&&e<=this.toRow&&i>=this.fromCell&&i<=this.toCell}toString(){return this.isSingleCell()?`(${this.fromRow}:${this.fromCell})`:`(${this.fromRow}:${this.fromCell} - ${this.toRow}:${this.toCell})`}}class ha{constructor(){this.__nonDataRow=!0}}class Cl extends ha{constructor(){super(),this.__group=!0,this.level=0,this.count=0,this.value=null,this.title=null,this.collapsed=!1,this.selectChecked=!1,this.totals=null,this.rows=[],this.groups=null,this.groupingKey=""}equals(e){return this.value===e.value&&this.count===e.count&&this.collapsed===e.collapsed&&this.title===e.title}}class Sh extends ha{constructor(){super(),this.__groupTotals=!0,this.group=null,this.initialized=!1}}class Je{static height(e,i){if(e){if(void 0===i)return e.getBoundingClientRect().height;Je.setStyleSize(e,"height",i)}}static width(e,i){if(e&&e.getBoundingClientRect){if(void 0===i)return e.getBoundingClientRect().width;Je.setStyleSize(e,"width",i)}}static setStyleSize(e,i,o){"function"==typeof o&&(o=o()),e.style[i]="string"==typeof o?o:`${o}px`}static isHidden(e){return 0===e.offsetWidth&&0===e.offsetHeight}static parents(e,i){const o=[],l=":visible"===i,c=":hidden"===i;for(;(e=e.parentNode)&&e!==document&&e&&e.parentNode;)c?Je.isHidden(e)&&o.push(e):l?Je.isHidden(e)||o.push(e):(!i||e.matches(i))&&o.push(e);return o}static toFloat(e){const i=parseFloat(e);return isNaN(i)?0:i}static show(e,i=""){Array.isArray(e)?e.forEach(o=>o.style.display=i):e.style.display=i}static hide(e){Array.isArray(e)?e.forEach(i=>i.style.display="none"):e.style.display="none"}static applyDefaults(e,i){"object"==typeof i&&Object.keys(i).forEach(o=>{i.hasOwnProperty(o)&&!e.hasOwnProperty(o)&&(e[o]=i[o])})}static addSlickEventPubSubWhenDefined(e,i){if(e)for(const o in i)i[o]instanceof Dt&&"function"==typeof i[o].setPubSubService&&i[o].setPubSubService(e)}}Je.storage={_storage:new WeakMap,put:function(d,e,i){this._storage.has(d)||this._storage.set(d,new Map),this._storage.get(d).set(e,i)},get:function(d,e){const i=this._storage.get(d);return i?i.get(e):null},remove:function(d,e){const i=this._storage.get(d).delete(e);return 0!==this._storage.get(d).size&&this._storage.delete(d),i}};const yl=new class Th{constructor(){this.activeEditController=null}isActive(e){return e?this.activeEditController===e:null!==this.activeEditController}activate(e){if(e!==this.activeEditController){if(null!==this.activeEditController)throw new Error("SlickEditorLock.activate: an editController is still active, can't activate another editController");if(!e.commitCurrentEdit)throw new Error("SlickEditorLock.activate: editController must implement .commitCurrentEdit()");if(!e.cancelCurrentEdit)throw new Error("SlickEditorLock.activate: editController must implement .cancelCurrentEdit()");this.activeEditController=e}}deactivate(e){if(this.activeEditController){if(this.activeEditController!==e)throw new Error("SlickEditorLock.deactivate: specified editController is not the currently active one");this.activeEditController=null}}commitCurrentEdit(){return!this.activeEditController||this.activeEditController.commitCurrentEdit()}cancelCurrentEdit(){return!this.activeEditController||this.activeEditController.cancelCurrentEdit()}};class Dl{constructor(e){this.pluginName="GroupItemMetadataProvider",this._defaults={groupCssClass:"slick-group",groupTitleCssClass:"slick-group-title",totalsCssClass:"slick-group-totals",groupFocusable:!0,indentation:15,totalsFocusable:!1,toggleCssClass:"slick-group-toggle",toggleExpandedCssClass:"expanded",toggleCollapsedCssClass:"collapsed",enableExpandCollapse:!0,groupFormatter:this.defaultGroupCellFormatter.bind(this),totalsFormatter:this.defaultTotalsCellFormatter.bind(this),includeHeaderTotals:!1},this._eventHandler=new tn,this._options=(0,w.extend)(!0,{},this._defaults,e)}get eventHandler(){return this._eventHandler}get dataView(){return this._grid?.getData()??{}}get gridOptions(){return this._grid?.getOptions()||{}}init(e,i){this._grid=e,this._options={...this._defaults,...i},this._eventHandler.subscribe(e.onClick,this.handleGridClick.bind(this)),this._eventHandler.subscribe(e.onKeyDown,this.handleGridKeyDown.bind(this))}destroy(){this.dispose()}dispose(){this._eventHandler?.unsubscribeAll()}getOptions(){return this._options}setOptions(e){this._options={...this._options,...e}}getGroupRowMetadata(e){return{selectable:!1,focusable:this._options.groupFocusable,cssClasses:`${this._options.groupCssClass} slick-group-level-${e?.level||0}`,formatter:this._options.includeHeaderTotals&&this._options.totalsFormatter||void 0,columns:{0:{colspan:this._options.includeHeaderTotals?"1":"*",formatter:this._options.groupFormatter,editorClass:null}}}}getTotalsRowMetadata(e){return{selectable:!1,focusable:this._options.totalsFocusable,cssClasses:`${this._options.totalsCssClass} slick-group-level-${e?.group?.level||0}`,formatter:this._options.totalsFormatter,editorClass:null}}defaultGroupCellFormatter(e,i,o,l,c){if(!this._options.enableExpandCollapse)return c.title;const u=c.level||0,y=u*(this._options?.indentation??15)+"px",M=c.collapsed?this._options.toggleCollapsedCssClass:this._options.toggleExpandedCssClass,V=this.gridOptions?.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment;V.appendChild((0,w.createDomElement)("span",{className:`${this._options.toggleCssClass} ${M}`,ariaExpanded:String(!c.collapsed),style:{marginLeft:y}}));const te=(0,w.createDomElement)("span",{className:this._options.groupTitleCssClass||""});return te.setAttribute("level",u),c.title instanceof HTMLElement||c.title instanceof DocumentFragment?te.appendChild(c.title):this._grid.applyHtmlCode(te,c.title??""),V.appendChild(te),V}defaultTotalsCellFormatter(e,i,o,l,c,u){return l?.groupTotalsFormatter?.(c,l,u)??""}handleGridClick(e,i){const o=e.target,l=this._grid?.getDataItem(i.row);l instanceof Cl&&o.classList.contains(this._options.toggleCssClass||"")&&(this.handleDataViewExpandOrCollapse(l),e.stopImmediatePropagation(),e.preventDefault())}handleGridKeyDown(e){if(this._options.enableExpandCollapse&&" "===e.key){const i=this._grid?.getActiveCell();if(i){const o=this._grid.getDataItem(i.row);o instanceof Cl&&(this.handleDataViewExpandOrCollapse(o),e.stopImmediatePropagation(),e.preventDefault())}}}handleDataViewExpandOrCollapse(e){const i=this._grid?.getRenderedRange();this.dataView.setRefreshHints({ignoreDiffsBefore:i.top,ignoreDiffsAfter:i.bottom+1}),e.collapsed?this.dataView.expandGroup(e.groupingKey):this.dataView.collapseGroup(e.groupingKey)}}class Gd{constructor(e,i){this.externalPubSub=i,this.defaults={groupItemMetadataProvider:null,inlineFilters:!1,useCSPSafeFilter:!1},this.idProperty="id",this.items=[],this.rows=[],this.idxById=new Map,this.rowsById=void 0,this.filter=null,this.filterCSPSafe=null,this.updated=null,this.suspend=!1,this.isBulkSuspend=!1,this.bulkDeleteIds=new Map,this.sortAsc=!0,this.refreshHints={},this.prevRefreshHints={},this.filteredItems=[],this.filterCache=[],this.groupingInfoDefaults={getter:void 0,formatter:void 0,comparer:(o,l)=>o.value===l.value?0:o.value>l.value?1:-1,predefinedValues:[],aggregators:[],aggregateEmpty:!1,aggregateCollapsed:!1,aggregateChildGroups:!1,collapsed:!1,displayTotalsRow:!0,lazyTotalsCalculation:!1},this.groupingInfos=[],this.groups=[],this.toggledGroupsByLevel=[],this.groupingDelimiter=":|:",this.selectedRowIds=[],this.pagesize=0,this.pagenum=0,this.totalRows=0,this.onBeforePagingInfoChanged=new Dt("onBeforePagingInfoChanged",i),this.onGroupExpanded=new Dt("onGroupExpanded",i),this.onGroupCollapsed=new Dt("onGroupCollapsed",i),this.onPagingInfoChanged=new Dt("onPagingInfoChanged",i),this.onRowCountChanged=new Dt("onRowCountChanged",i),this.onRowsChanged=new Dt("onRowsChanged",i),this.onRowsOrCountChanged=new Dt("onRowsOrCountChanged",i),this.onSelectedRowIdsChanged=new Dt("onSelectedRowIdsChanged",i),this.onSetItemsCalled=new Dt("onSetItemsCalled",i),this._options=(0,w.extend)(!0,{},this.defaults,e)}beginUpdate(e){this.suspend=!0,this.isBulkSuspend=!0===e}endUpdate(){const e=this.isBulkSuspend;this.isBulkSuspend=!1,this.suspend=!1,e&&(this.processBulkDelete(),this.ensureIdUniqueness()),this.refresh()}destroy(){this.items=[],this.idProperty="id",this.idxById=null,this.rowsById=null,this.filter=null,this.filterCSPSafe=null,this.updated=null,this.sortComparer=null,this.filterCache=[],this.filteredItems=[],this.compiledFilter=null,this.compiledFilterCSPSafe=null,this.compiledFilterWithCaching=null,this.compiledFilterWithCachingCSPSafe=null,this._grid&&(this._grid.onSelectedRowsChanged?.unsubscribe(),this._grid.onCellCssStylesChanged?.unsubscribe()),this.onRowsOrCountChanged?.unsubscribe()}setRefreshHints(e){this.refreshHints=e}getFilterArgs(){return this.filterArgs}setFilterArgs(e){this.filterArgs=e}processBulkDelete(){if(!this.idxById)return;let e,i,o=0;for(let l=0,c=this.items.length;l<c;l++){if(i=this.items[l],e=i[this.idProperty],void 0===e)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");this.bulkDeleteIds.has(e)?this.idxById.delete(e):(this.items[o]=i,this.idxById.set(e,o),++o)}this.items.length=o,this.bulkDeleteIds=new Map}updateIdxById(e){if(this.isBulkSuspend||!this.idxById)return;let i;for(let o=e=e||0,l=this.items.length;o<l;o++){if(i=this.items[o][this.idProperty],void 0===i)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property");this.idxById.set(i,o)}}ensureIdUniqueness(){if(this.isBulkSuspend||!this.idxById)return;let e;for(let i=0,o=this.items.length;i<o;i++)if(e=this.items[i][this.idProperty],void 0===e||this.idxById.get(e)!==i)throw new Error("[SlickGrid DataView] Each data element must implement a unique 'id' property")}getItems(){return this.items}getIdPropertyName(){return this.idProperty}setItems(e,i){void 0!==i&&(this.idProperty=i),this.items=this.filteredItems=e,this.onSetItemsCalled.notify({idProperty:this.idProperty,itemCount:this.items.length},null,this),this.idxById=new Map,this.updateIdxById(),this.ensureIdUniqueness(),this.refresh()}setPagingOptions(e){!1!==this.onBeforePagingInfoChanged.notify(this.getPagingInfo(),null,this).getReturnValue()&&((0,w.isDefined)(e.pageSize)&&(this.pagesize=e.pageSize,this.pagenum=this.pagesize?Math.min(this.pagenum,Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1)):0),(0,w.isDefined)(e.pageNum)&&(this.pagenum=Math.min(e.pageNum,Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1))),this.onPagingInfoChanged.notify(this.getPagingInfo(),null,this),this.refresh())}getPagingInfo(){const e=this.pagesize?Math.max(1,Math.ceil(this.totalRows/this.pagesize)):1;return{pageSize:this.pagesize,pageNum:this.pagenum,totalRows:this.totalRows,totalPages:e,dataView:this}}sort(e,i){this.sortAsc=i,this.sortComparer=e,!1===i&&this.items.reverse(),this.items.sort(e),!1===i&&this.items.reverse(),this.idxById=new Map,this.updateIdxById(),this.refresh()}reSort(){this.sortComparer&&this.sort(this.sortComparer,this.sortAsc)}getFilteredItems(){return this.filteredItems}getFilteredItemCount(){return this.filteredItems.length}getFilter(){return this._options.useCSPSafeFilter?this.filterCSPSafe:this.filter}setFilter(e){this.filterCSPSafe=e,this.filter=e,this._options.inlineFilters&&(this.compiledFilterCSPSafe=this.compileFilterCSPSafe,this.compiledFilterWithCachingCSPSafe=this.compileFilterWithCachingCSPSafe,this.compiledFilter=this.compileFilter(this._options.useCSPSafeFilter),this.compiledFilterWithCaching=this.compileFilterWithCaching(this._options.useCSPSafeFilter)),this.refresh()}getGrouping(){return this.groupingInfos}setGrouping(e){this._options.groupItemMetadataProvider||(this._options.groupItemMetadataProvider=new Dl),this.groups=[],this.toggledGroupsByLevel=[],this.groupingInfos=(e=e||[])instanceof Array?e:[e];for(let i=0;i<this.groupingInfos.length;i++){const o=this.groupingInfos[i]=(0,w.extend)(!0,{},this.groupingInfoDefaults,this.groupingInfos[i]);o.getterIsAFn="function"==typeof o.getter,o.compiledAccumulators=[];let l=o.aggregators.length;for(;l--;)o.compiledAccumulators[l]=this.compileAccumulatorLoopCSPSafe(o.aggregators[l]);this.toggledGroupsByLevel[i]={}}this.refresh()}getItemByIdx(e){return this.items[e]}getIdxById(e){return this.idxById?.get(e)}ensureRowsByIdCache(){if(!this.rowsById){this.rowsById={};for(let e=0,i=this.rows.length;e<i;e++)this.rowsById[this.rows[e][this.idProperty]]=e}}getRowByItem(e){return this.ensureRowsByIdCache(),this.rowsById?.[e[this.idProperty]]}getRowById(e){return this.ensureRowsByIdCache(),this.rowsById?.[e]}getItemById(e){return this.items[this.idxById.get(e)]}mapItemsToRows(e){const i=[];this.ensureRowsByIdCache();for(let o=0,l=e.length;o<l;o++){const c=this.rowsById?.[e[o][this.idProperty]];(0,w.isDefined)(c)&&(i[i.length]=c)}return i}mapIdsToRows(e){const i=[];this.ensureRowsByIdCache();for(let o=0,l=e.length;o<l;o++){const c=this.rowsById?.[e[o]];(0,w.isDefined)(c)&&(i[i.length]=c)}return i}mapRowsToIds(e){const i=[];for(let o=0,l=e.length;o<l;o++)e[o]<this.rows.length&&(i[i.length]=this.rows[e[o]][this.idProperty]);return i}updateSingleItem(e,i){if(this.idxById){if(!this.idxById.has(e))throw new Error("[SlickGrid DataView] Invalid id");if(e!==i[this.idProperty]){const o=i[this.idProperty];if(!(0,w.isDefined)(o))throw new Error("[SlickGrid DataView] Cannot update item to associate with a null id");if(this.idxById.has(o))throw new Error("[SlickGrid DataView] Cannot update item to associate with a non-unique id");this.idxById.set(o,this.idxById.get(e)),this.idxById.delete(e),this.updated?.[e]&&delete this.updated[e],e=o}this.items[this.idxById.get(e)]=i,this.updated||(this.updated={}),this.updated[e]=!0}}updateItem(e,i){this.updateSingleItem(e,i),this.refresh()}updateItems(e,i){if(e.length!==i.length)throw new Error("[SlickGrid DataView] Mismatch on the length of ids and items provided to update");for(let o=0,l=i.length;o<l;o++)this.updateSingleItem(e[o],i[o]);this.refresh()}insertItem(e,i){this.items.splice(e,0,i),this.updateIdxById(e),this.refresh()}insertItems(e,i){Array.prototype.splice.apply(this.items,[e,0].concat(i)),this.updateIdxById(e),this.refresh()}addItem(e){this.items.push(e),this.updateIdxById(this.items.length-1),this.refresh()}addItems(e){this.items=this.items.concat(e),this.updateIdxById(this.items.length-e.length),this.refresh()}deleteItem(e){if(this.idxById)if(this.isBulkSuspend)this.bulkDeleteIds.set(e,!0);else{const i=this.idxById.get(e);if(void 0===i)throw new Error("[SlickGrid DataView] Invalid id");this.idxById.delete(e),this.items.splice(i,1),this.updateIdxById(i),this.refresh()}}deleteItems(e){if(0!==e.length&&this.idxById)if(this.isBulkSuspend)for(let i=0,o=e.length;i<o;i++){const l=e[i];if(void 0===this.idxById.get(l))throw new Error("[SlickGrid DataView] Invalid id");this.bulkDeleteIds.set(l,!0)}else{const i=[];for(let o=0,l=e.length;o<l;o++){const c=e[o],u=this.idxById.get(c);if(void 0===u)throw new Error("[SlickGrid DataView] Invalid id");this.idxById.delete(c),i.push(u)}i.sort();for(let o=i.length-1;o>=0;--o)this.items.splice(i[o],1);this.updateIdxById(i[0]),this.refresh()}}sortedAddItem(e){if(!this.sortComparer)throw new Error("[SlickGrid DataView] sortedAddItem() requires a sort comparer, use sort()");this.insertItem(this.sortedIndex(e),e)}sortedUpdateItem(e,i){if(!this.idxById)return;if(!this.idxById.has(e)||e!==i[this.idProperty])throw new Error(`[SlickGrid DataView] Invalid or non-matching id ${e}`);if(!this.sortComparer)throw new Error("[SlickGrid DataView] sortedUpdateItem() requires a sort comparer, use sort()");const o=this.getItemById(e);0!==this.sortComparer(o,i)?(this.deleteItem(e),this.sortedAddItem(i)):this.updateItem(e,i)}sortedIndex(e){let i=0,o=this.items.length;for(;i<o;){const l=i+o>>>1;-1===this.sortComparer(this.items[l],e)?i=l+1:o=l}return i}getItemCount(){return this.items.length}getLength(){return this.rows.length}getItem(e){const i=this.rows[e];if(i?.__group&&i.totals&&!i.totals?.initialized){const o=this.groupingInfos[i.level];o.displayTotalsRow||(this.calculateTotals(i.totals),i.title=o.formatter?o.formatter(i):i.value)}else i?.__groupTotals&&!i.initialized&&this.calculateTotals(i);return i}getItemMetadata(e){const i=this.rows[e];return void 0===i?null:i.__group?this._options.groupItemMetadataProvider.getGroupRowMetadata(i):i.__groupTotals?this._options.groupItemMetadataProvider.getTotalsRowMetadata(i):null}expandCollapseAllGroups(e,i){if((0,w.isDefined)(e))this.toggledGroupsByLevel[e]={},this.groupingInfos[e].collapsed=i,!0===i?this.onGroupCollapsed.notify({level:e,groupingKey:null}):this.onGroupExpanded.notify({level:e,groupingKey:null});else for(let o=0;o<this.groupingInfos.length;o++)this.toggledGroupsByLevel[o]={},this.groupingInfos[o].collapsed=i,!0===i?this.onGroupCollapsed.notify({level:o,groupingKey:null}):this.onGroupExpanded.notify({level:o,groupingKey:null});this.refresh()}collapseAllGroups(e){this.expandCollapseAllGroups(e,!0)}expandAllGroups(e){this.expandCollapseAllGroups(e,!1)}expandCollapseGroup(e,i,o){this.toggledGroupsByLevel[e]&&(this.toggledGroupsByLevel[e][i]=this.groupingInfos[e].collapsed^o),this.refresh()}collapseGroup(...e){const o=Array.prototype.slice.call(e)[0];let l,c;1===e.length&&-1!==o.indexOf(this.groupingDelimiter)?(l=o,c=o.split(this.groupingDelimiter).length-1):(l=e.join(this.groupingDelimiter),c=e.length-1),this.expandCollapseGroup(c,l,!0),this.onGroupCollapsed.notify({level:c,groupingKey:l})}expandGroup(...e){const o=Array.prototype.slice.call(e)[0];let l,c;1===e.length&&-1!==o.indexOf(this.groupingDelimiter)?(c=o.split(this.groupingDelimiter).length-1,l=o):(c=e.length-1,l=e.join(this.groupingDelimiter)),this.expandCollapseGroup(c,l,!1),this.onGroupExpanded.notify({level:c,groupingKey:l})}getGroups(){return this.groups}extractGroups(e,i){let o,l;const c=[],u={};let g;const y=i?i.level+1:0,M=this.groupingInfos[y];for(let V=0,te=M.predefinedValues?.length??0;V<te;V++)l=M.predefinedValues?.[V],o=u[l],o||(o=new Cl,o.value=l,o.level=y,o.groupingKey=(i?i.groupingKey+this.groupingDelimiter:"")+l,c[c.length]=o,u[l]=o);for(let V=0,te=e.length;V<te;V++)g=e[V],l=M.getterIsAFn?M.getter(g):g[M.getter],o=u[l],o||(o=new Cl,o.value=l,o.level=y,o.groupingKey=(i?i.groupingKey+this.groupingDelimiter:"")+l,c[c.length]=o,u[l]=o),o.rows[o.count++]=g;if(y<this.groupingInfos.length-1)for(let V=0;V<c.length;V++)o=c[V],o.groups=this.extractGroups(o.rows,o);return c.length&&this.addTotals(c,y),c.sort(this.groupingInfos[y].comparer),c}calculateTotals(e){const i=e.group,o=this.groupingInfos[i?.level??0],l=i.level===this.groupingInfos.length;let c,u=o.aggregators.length;if(!l&&o.aggregateChildGroups){let g=i.groups?.length??0;for(;g--;)i.groups[g].totals.initialized||this.calculateTotals(i.groups[g].totals)}for(;u--;)c=o.aggregators[u],c.init(),o.compiledAccumulators[u].call(c,!l&&o.aggregateChildGroups?i.groups:i.rows),c.storeResult(e);e.initialized=!0}addGroupTotals(e){const i=this.groupingInfos[e.level],o=new Sh;o.group=e,e.totals=o,i.lazyTotalsCalculation||this.calculateTotals(o)}addTotals(e,i){const o=this.groupingInfos[i=i||0],l=o.collapsed,c=this.toggledGroupsByLevel[i];let g,u=e.length;for(;u--;)g=e[u],(!g.collapsed||o.aggregateCollapsed)&&(g.groups&&this.addTotals(g.groups,i+1),o.aggregators?.length&&(o.aggregateEmpty||g.rows.length||g.groups?.length)&&this.addGroupTotals(g),g.collapsed=l^c[g.groupingKey],g.title=o.formatter?o.formatter(g):g.value)}flattenGroupedRows(e,i){const o=this.groupingInfos[i=i||0],l=[];let c,g,u=0;for(let y=0,M=e.length;y<M;y++){if(g=e[y],l[u++]=g,!g.collapsed){c=g.groups?this.flattenGroupedRows(g.groups,i+1):g.rows;for(let V=0,te=c.length;V<te;V++)l[u++]=c[V]}g.totals&&o.displayTotalsRow&&(!g.collapsed||o.aggregateCollapsed)&&(l[u++]=g.totals)}return l}compileAccumulatorLoopCSPSafe(e){return e.accumulate?function(i){let o;if(Array.isArray(i))for(let l=0;l<i.length;l++)o=e.accumulate.call(e,i[l]);return o}:function(){}}compileFilterCSPSafe(e,i){if("function"!=typeof this.filterCSPSafe)return[];const o=[],l=e.length;for(let c=0;c<l;c++)this.filterCSPSafe(e[c],i)&&o.push(e[c]);return o}compileFilter(e=!1){if(e)return null;const i=(0,w.getFunctionDetails)(this.filter),o="{ continue _coreloop; }$1",l="{ _retval[_idx++] = $item$; continue _coreloop; }$1",c=i.body.replace(/return false\s*([;}]|\}|$)/gi,o).replace(/return!1([;}]|\}|$)/gi,o).replace(/return true\s*([;}]|\}|$)/gi,l).replace(/return!0([;}]|\}|$)/gi,l).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ($1) { _retval[_idx++] = $item$; }; continue _coreloop; }$2");let u=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","$filter$; ","} ","return _retval; "].join("");u=u.replace(/\$filter\$/gi,c),u=u.replace(/\$item\$/gi,i.params[0]),u=u.replace(/\$args\$/gi,i.params[1]);const g=new Function("_items,_args",u),y="compiledFilter";return g.displayName=y,g.name=this.setFunctionName(g,y),g}compileFilterWithCaching(e=!1){if(e)return null;const i=(0,w.getFunctionDetails)(this.filter),o="{ continue _coreloop; }$1",l="{ _cache[_i] = true;_retval[_idx++] = $item$; continue _coreloop; }$1",c=i.body.replace(/return false\s*([;}]|\}|$)/gi,o).replace(/return!1([;}]|\}|$)/gi,o).replace(/return true\s*([;}]|\}|$)/gi,l).replace(/return!0([;}]|\}|$)/gi,l).replace(/return ([^;}]+?)\s*([;}]|$)/gi,"{ if ((_cache[_i] = $1)) { _retval[_idx++] = $item$; }; continue _coreloop; }$2");let u=["var _retval = [], _idx = 0; ","var $item$, $args$ = _args; ","_coreloop: ","for (var _i = 0, _il = _items.length; _i < _il; _i++) { ","$item$ = _items[_i]; ","if (_cache[_i]) { ","_retval[_idx++] = $item$; ","continue _coreloop; ","} ","$filter$; ","} ","return _retval; "].join("");u=u.replace(/\$filter\$/gi,c),u=u.replace(/\$item\$/gi,i.params[0]),u=u.replace(/\$args\$/gi,i.params[1]);const g=new Function("_items,_args,_cache",u),y="compiledFilterWithCaching";return g.displayName=y,g.name=this.setFunctionName(g,y),g}compileFilterWithCachingCSPSafe(e,i,o){if("function"!=typeof this.filterCSPSafe)return[];const l=[],c=e.length;for(let u=0;u<c;u++)(o[u]||this.filterCSPSafe(e[u],i))&&l.push(e[u]);return l}setFunctionName(e,i){try{Object.defineProperty(e,"name",{writable:!0,value:i})}catch{e.name=i}}uncompiledFilter(e,i){const o=[];let l=0;for(let c=0,u=e.length;c<u;c++)this.filter?.(e[c],i)&&(o[l++]=e[c]);return o}uncompiledFilterWithCaching(e,i,o){const l=[];let u,c=0;for(let g=0,y=e.length;g<y;g++)u=e[g],o[g]?l[c++]=u:this.filter?.(u,i)&&(l[c++]=u,o[g]=!0);return l}getFilteredAndPagedItems(e){if(this._options.useCSPSafeFilter?this.filterCSPSafe:this.filter){let o,l;this._options.useCSPSafeFilter?(o=this._options.inlineFilters?this.compiledFilterCSPSafe:this.uncompiledFilter,l=this._options.inlineFilters?this.compiledFilterWithCachingCSPSafe:this.uncompiledFilterWithCaching):(o=this._options.inlineFilters?this.compiledFilter:this.uncompiledFilter,l=this._options.inlineFilters?this.compiledFilterWithCaching:this.uncompiledFilterWithCaching),this.refreshHints.isFilterNarrowing?this.filteredItems=o.call(this,this.filteredItems,this.filterArgs):this.refreshHints.isFilterExpanding?this.filteredItems=l.call(this,e,this.filterArgs,this.filterCache):this.refreshHints.isFilterUnchanged||(this.filteredItems=o.call(this,e,this.filterArgs))}else this.filteredItems=this.pagesize?e:e.concat();let i;return this.pagesize?(this.filteredItems.length<=this.pagenum*this.pagesize&&(this.pagenum=0===this.filteredItems.length?0:Math.floor((this.filteredItems.length-1)/this.pagesize)),i=this.filteredItems.slice(this.pagesize*this.pagenum,this.pagesize*this.pagenum+this.pagesize)):i=this.filteredItems,{totalRows:this.filteredItems.length,rows:i}}getRowDiffs(e,i){let o,l,c;const u=[];let g=0,y=Math.max(i.length,e.length);this.refreshHints?.ignoreDiffsBefore&&(g=Math.max(0,Math.min(i.length,this.refreshHints.ignoreDiffsBefore))),this.refreshHints?.ignoreDiffsAfter&&(y=Math.min(i.length,Math.max(0,this.refreshHints.ignoreDiffsAfter)));for(let M=g,V=e.length;M<y;M++)M>=V?u[u.length]=M:(o=i[M],l=e[M],(!o||this.groupingInfos.length&&(c=o.__nonDataRow||l.__nonDataRow)&&o.__group!==l.__group||o.__group&&!o.equals(l)||c&&(o.__groupTotals||l.__groupTotals)||o[this.idProperty]!==l[this.idProperty]||this.updated?.[o[this.idProperty]])&&(u[u.length]=M));return u}recalc(e){this.rowsById=void 0,(this.refreshHints.isFilterNarrowing!==this.prevRefreshHints.isFilterNarrowing||this.refreshHints.isFilterExpanding!==this.prevRefreshHints.isFilterExpanding)&&(this.filterCache=[]);const i=this.getFilteredAndPagedItems(e);this.totalRows=i.totalRows;let o=i.rows;this.groups=[],this.groupingInfos.length&&(this.groups=this.extractGroups(o),this.groups.length&&(o=this.flattenGroupedRows(this.groups)));const l=this.getRowDiffs(this.rows,o);return this.rows=o,l}refresh(){if(this.suspend)return;const e=(0,w.extend)(!0,{},this.getPagingInfo()),i=this.rows.length,o=this.totalRows;let l=this.recalc(this.items);this.pagesize&&this.totalRows<this.pagenum*this.pagesize&&(this.pagenum=Math.max(0,Math.ceil(this.totalRows/this.pagesize)-1),l=this.recalc(this.items)),this.updated=null,this.prevRefreshHints=this.refreshHints,this.refreshHints={},o!==this.totalRows&&!1!==this.onBeforePagingInfoChanged.notify(e,null,this).getReturnValue()&&this.onPagingInfoChanged.notify(this.getPagingInfo(),null,this),i!==this.rows.length&&this.onRowCountChanged.notify({previous:i,current:this.rows.length,itemCount:this.items.length,dataView:this,callingOnRowsChanged:l.length>0},null,this),l.length>0&&this.onRowsChanged.notify({rows:l,itemCount:this.items.length,dataView:this,calledOnRowCountChanged:i!==this.rows.length},null,this),(i!==this.rows.length||l.length>0)&&this.onRowsOrCountChanged.notify({rowsDiff:l,previousRowCount:i,currentRowCount:this.rows.length,itemCount:this.items.length,rowCountChanged:i!==this.rows.length,rowsChanged:l.length>0,dataView:this},null,this)}refreshdataids(){this.refresh(),this.updateIdxById()}syncGridSelection(e,i,o){let l;this._grid=e,this.selectedRowIds=this.mapRowsToIds(e.getSelectedRows());const c=e.getOptions(),u=y=>{!1===y?this.selectedRowIds=[]:this.selectedRowIds.sort().join(",")!==y.sort().join(",")&&(this.selectedRowIds=y)};return e.onSelectedRowsChanged.subscribe((y,M)=>{if(!l){const V=this.mapRowsToIds(M.rows),te={grid:this._grid,ids:V,rows:M.rows,added:!0,dataView:this};this.preSelectedRowIdsChangeFn(te),this.onSelectedRowIdsChanged.notify(Object.assign(te,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new wn,this)}}),this.preSelectedRowIdsChangeFn=y=>{if(!l){if(l=!0,typeof y.added>"u")u(y.ids);else{let V;V=y.added?o&&c.multiSelect?(this.selectedRowIds?.filter(ve=>void 0===this.getRowById(ve))).concat(y.ids):y.ids:o&&c.multiSelect?this.selectedRowIds?.filter(te=>-1===y.ids.indexOf(te)):[],u(V)}l=!1}},this.onRowsOrCountChanged.subscribe((()=>{if((this.selectedRowIds||[]).length>0&&!l){l=!0;const y=this.mapIdsToRows(this.selectedRowIds||[]);if(!i){const M={grid:this._grid,ids:this.mapRowsToIds(y),rows:y,dataView:this};this.preSelectedRowIdsChangeFn(M),this.onSelectedRowIdsChanged.notify(Object.assign(M,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new wn,this)}e.setSelectedRows(y),l=!1}}).bind(this)),this.onSelectedRowIdsChanged}getAllSelectedIds(){return this.selectedRowIds}getAllSelectedFilteredIds(){return this.getAllSelectedFilteredItems().map(e=>e[this.idProperty])}setSelectedIds(e,i){let o=i?.isRowBeingAdded;const l=i?.shouldTriggerEvent,c=i?.applyRowSelectionToGrid;!1!==o&&(o=!0);const u=this.mapIdsToRows(e),g={grid:this._grid,ids:e,rows:u,added:o,dataView:this};this.preSelectedRowIdsChangeFn?.(g),!1!==l&&this.onSelectedRowIdsChanged.notify(Object.assign(g,{selectedRowIds:this.selectedRowIds,filteredIds:this.getAllSelectedFilteredIds()}),new wn,this),!1!==c&&this._grid&&this._grid.setSelectedRows(u)}getAllSelectedItems(){const e=[];return this.getAllSelectedIds().forEach(o=>{e.push(this.getItemById(o))}),e}getAllSelectedFilteredItems(){return Array.isArray(this.selectedRowIds)&&this.filteredItems.filter(i=>this.selectedRowIds.some(o=>i[this.idProperty]===o))||[]}syncGridCellCssStyles(e,i){let o,l;const c=g=>{o={},"object"==typeof g&&Object.keys(g).forEach(y=>{g&&this.rows[y]&&(o[this.rows[y][this.idProperty]]=g[y])})};c(e.getCellCssStyles(i));const u=()=>{if("object"==typeof o){l=!0,this.ensureRowsByIdCache();const g={};Object.keys(o).forEach(y=>{const M=this.rowsById?.[y];(0,w.isDefined)(M)&&(g[M]=o[y])}),e.setCellCssStyles(i,g),l=!1}};e.onCellCssStylesChanged.subscribe((g,y)=>{l||i!==y.key||(y.hash?c(y.hash):(e.onCellCssStylesChanged.unsubscribe(),this.onRowsOrCountChanged.unsubscribe(u)))}),this.onRowsOrCountChanged.subscribe(u.bind(this))}}function ua(d,e){var i=Object.keys(d);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(d);e&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(d,l).enumerable})),i.push.apply(i,o)}return i}function cs(d){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ua(Object(i),!0).forEach(function(o){ui(d,o,i[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(i)):ua(Object(i)).forEach(function(o){Object.defineProperty(d,o,Object.getOwnPropertyDescriptor(i,o))})}return d}function Dn(d){return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(d)}function ui(d,e,i){return e in d?Object.defineProperty(d,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):d[e]=i,d}function Bn(){return Bn=Object.assign||function(d){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(d[o]=i[o])}return d},Bn.apply(this,arguments)}function us(d){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(d)}var Ns=us(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Io=us(/Edge/i),Ah=us(/firefox/i),Qo=us(/safari/i)&&!us(/chrome/i)&&!us(/android/i),Wd=us(/iP(ad|od|hone)/i),El=us(/chrome/i)&&us(/android/i),ga={capture:!1,passive:!1};function Pn(d,e,i){d.addEventListener(e,i,!Ns&&ga)}function cn(d,e,i){d.removeEventListener(e,i,!Ns&&ga)}function $r(d,e){if(e){if(">"===e[0]&&(e=e.substring(1)),d)try{if(d.matches)return d.matches(e);if(d.msMatchesSelector)return d.msMatchesSelector(e);if(d.webkitMatchesSelector)return d.webkitMatchesSelector(e)}catch{return!1}return!1}}function Sl(d){return d.host&&d!==document&&d.host.nodeType?d.host:d.parentNode}function Xi(d,e,i,o){if(d){i=i||document;do{if(null!=e&&(">"===e[0]?d.parentNode===i&&$r(d,e):$r(d,e))||o&&d===i)return d;if(d===i)break}while(d=Sl(d))}return null}var lo,pa=/\s+/g;function Jn(d,e,i){if(d&&e)if(d.classList)d.classList[i?"add":"remove"](e);else{var o=(" "+d.className+" ").replace(pa," ").replace(" "+e+" "," ");d.className=(o+(i?" "+e:"")).replace(pa," ")}}function Gt(d,e,i){var o=d&&d.style;if(o){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(d,""):d.currentStyle&&(i=d.currentStyle),void 0===e?i:i[e];!(e in o)&&-1===e.indexOf("webkit")&&(e="-webkit-"+e),o[e]=i+("string"==typeof i?"":"px")}}function yi(d,e){var i="";if("string"==typeof d)i=d;else do{var o=Gt(d,"transform");o&&"none"!==o&&(i=o+" "+i)}while(!e&&(d=d.parentNode));var l=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return l&&new l(i)}function Zo(d,e,i){if(d){var o=d.getElementsByTagName(e),l=0,c=o.length;if(i)for(;l<c;l++)i(o[l],l);return o}return[]}function vs(){return document.scrollingElement||document.documentElement}function Qn(d,e,i,o,l){if(d.getBoundingClientRect||d===window){var c,u,g,y,M,V,te;if(d!==window&&d.parentNode&&d!==vs()?(u=(c=d.getBoundingClientRect()).top,g=c.left,y=c.bottom,M=c.right,V=c.height,te=c.width):(u=0,g=0,y=window.innerHeight,M=window.innerWidth,V=window.innerHeight,te=window.innerWidth),(e||i)&&d!==window&&(l=l||d.parentNode,!Ns))do{if(l&&l.getBoundingClientRect&&("none"!==Gt(l,"transform")||i&&"static"!==Gt(l,"position"))){var ve=l.getBoundingClientRect();u-=ve.top+parseInt(Gt(l,"border-top-width")),g-=ve.left+parseInt(Gt(l,"border-left-width")),y=u+c.height,M=g+c.width;break}}while(l=l.parentNode);if(o&&d!==window){var Ae=yi(l||d),ze=Ae&&Ae.a,Ye=Ae&&Ae.d;Ae&&(y=(u/=Ye)+(V/=Ye),M=(g/=ze)+(te/=ze))}return{top:u,left:g,bottom:y,right:M,width:te,height:V}}}function $d(d,e,i){for(var o=Zs(d,!0),l=Qn(d)[e];o;){var c=Qn(o)[i];if(!("top"===i||"left"===i?l>=c:l<=c))return o;if(o===vs())break;o=Zs(o,!1)}return!1}function ko(d,e,i,o){for(var l=0,c=0,u=d.children;c<u.length;){if("none"!==u[c].style.display&&u[c]!==rn.ghost&&(o||u[c]!==rn.dragged)&&Xi(u[c],i.draggable,d,!1)){if(l===e)return u[c];l++}c++}return null}function Ao(d,e){for(var i=d.lastElementChild;i&&(i===rn.ghost||"none"===Gt(i,"display")||e&&!$r(i,e));)i=i.previousElementSibling;return i||null}function oi(d,e){var i=0;if(!d||!d.parentNode)return-1;for(;d=d.previousElementSibling;)"TEMPLATE"!==d.nodeName.toUpperCase()&&d!==rn.clone&&(!e||$r(d,e))&&i++;return i}function zd(d){var e=0,i=0,o=vs();if(d)do{var l=yi(d);e+=d.scrollLeft*l.a,i+=d.scrollTop*l.d}while(d!==o&&(d=d.parentNode));return[e,i]}function Zs(d,e){if(!d||!d.getBoundingClientRect)return vs();var i=d,o=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var l=Gt(i);if(i.clientWidth<i.scrollWidth&&("auto"==l.overflowX||"scroll"==l.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==l.overflowY||"scroll"==l.overflowY)){if(!i.getBoundingClientRect||i===document.body)return vs();if(o||e)return i;o=!0}}}while(i=i.parentNode);return vs()}function Tl(d,e){return Math.round(d.top)===Math.round(e.top)&&Math.round(d.left)===Math.round(e.left)&&Math.round(d.height)===Math.round(e.height)&&Math.round(d.width)===Math.round(e.width)}function b(d,e){return function(){if(!lo){var i=arguments;1===i.length?d.call(this,i[0]):d.apply(this,i),lo=setTimeout(function(){lo=void 0},e)}}}function Q(d,e,i){d.scrollLeft+=e,d.scrollTop+=i}function ae(d){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(d).cloneNode(!0):i?i(d).clone(!0)[0]:d.cloneNode(!0)}function ht(d,e,i){var o={};return Array.from(d.children).forEach(function(l){var c,u,g,y;if(Xi(l,e.draggable,d,!1)&&!l.animated&&l!==i){var M=Qn(l);o.left=Math.min(null!==(c=o.left)&&void 0!==c?c:1/0,M.left),o.top=Math.min(null!==(u=o.top)&&void 0!==u?u:1/0,M.top),o.right=Math.max(null!==(g=o.right)&&void 0!==g?g:-1/0,M.right),o.bottom=Math.max(null!==(y=o.bottom)&&void 0!==y?y:-1/0,M.bottom)}}),o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}var It="Sortable"+(new Date).getTime();var Cn=[],Zn={initializeByDefault:!0},Fn={mount:function(e){for(var i in Zn)Zn.hasOwnProperty(i)&&!(i in e)&&(e[i]=Zn[i]);Cn.forEach(function(o){if(o.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),Cn.push(e)},pluginEvent:function(e,i,o){var l=this;this.eventCanceled=!1,o.cancel=function(){l.eventCanceled=!0};var c=e+"Global";Cn.forEach(function(u){i[u.pluginName]&&(i[u.pluginName][c]&&i[u.pluginName][c](cs({sortable:i},o)),i.options[u.pluginName]&&i[u.pluginName][e]&&i[u.pluginName][e](cs({sortable:i},o)))})},initializePlugins:function(e,i,o,l){for(var c in Cn.forEach(function(g){var y=g.pluginName;if(e.options[y]||g.initializeByDefault){var M=new g(e,i,e.options);M.sortable=e,M.options=e.options,e[y]=M,Bn(o,M.defaults)}}),e.options)if(e.options.hasOwnProperty(c)){var u=this.modifyOption(e,c,e.options[c]);typeof u<"u"&&(e.options[c]=u)}},getEventProperties:function(e,i){var o={};return Cn.forEach(function(l){"function"==typeof l.eventProperties&&Bn(o,l.eventProperties.call(i[l.pluginName],e))}),o},modifyOption:function(e,i,o){var l;return Cn.forEach(function(c){e[c.pluginName]&&c.optionListeners&&"function"==typeof c.optionListeners[i]&&(l=c.optionListeners[i].call(e[c.pluginName],o))}),l}};var Vn=["evt"],ut=function(e,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=o.evt,c=function Ui(d,e){if(null==d)return{};var o,l,i=function hs(d,e){if(null==d)return{};var l,c,i={},o=Object.keys(d);for(c=0;c<o.length;c++)!(e.indexOf(l=o[c])>=0)&&(i[l]=d[l]);return i}(d,e);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(d);for(l=0;l<c.length;l++)!(e.indexOf(o=c[l])>=0)&&Object.prototype.propertyIsEnumerable.call(d,o)&&(i[o]=d[o])}return i}(o,Vn);Fn.pluginEvent.bind(rn)(e,i,cs({dragEl:mt,parentEl:In,ghostEl:Ut,rootEl:vn,nextEl:Ji,lastDownEl:Kn,cloneEl:Sn,cloneHidden:xi,dragStarted:xo,putSortable:fi,activeSortable:rn.active,originalEvent:l,oldIndex:Zt,oldDraggableIndex:zr,newIndex:Gi,newDraggableIndex:Es,hideGhostForTarget:Rf,unhideGhostForTarget:Ff,cloneNowHidden:function(){xi=!0},cloneNowShown:function(){xi=!1},dispatchSortableEvent:function(g){Rt({sortable:i,name:g,originalEvent:l})}},c))};function Rt(d){!function Xn(d){var e=d.sortable,i=d.rootEl,o=d.name,l=d.targetEl,c=d.cloneEl,u=d.toEl,g=d.fromEl,y=d.oldIndex,M=d.newIndex,V=d.oldDraggableIndex,te=d.newDraggableIndex,ve=d.originalEvent,Ae=d.putSortable,ze=d.extraEventProperties;if(e=e||i&&i[It]){var Ye,nt=e.options,et="on"+o.charAt(0).toUpperCase()+o.substr(1);!window.CustomEvent||Ns||Io?(Ye=document.createEvent("Event")).initEvent(o,!0,!0):Ye=new CustomEvent(o,{bubbles:!0,cancelable:!0}),Ye.to=u||i,Ye.from=g||i,Ye.item=l||i,Ye.clone=c,Ye.oldIndex=y,Ye.newIndex=M,Ye.oldDraggableIndex=V,Ye.newDraggableIndex=te,Ye.originalEvent=ve,Ye.pullMode=Ae?Ae.lastPutMode:void 0;var Ot=cs(cs({},ze),Fn.getEventProperties(o,e));for(var gt in Ot)Ye[gt]=Ot[gt];i&&i.dispatchEvent(Ye),nt[et]&&nt[et].call(e,Ye)}}(cs({putSortable:fi,cloneEl:Sn,targetEl:mt,rootEl:vn,oldIndex:Zt,oldDraggableIndex:zr,newIndex:Gi,newDraggableIndex:Es},d))}var mt,In,Ut,vn,Ji,Kn,Sn,xi,Zt,Gi,zr,Es,kn,fi,er,Pi,Kr,Mo,hn,Ca,xo,ns,tr,Yr,Gn,ks=!1,Ls=!1,_o=[],ao=!1,ii=!1,Oi=[],Il=!1,co=[],Dr=typeof document<"u",fs=Wd,ya=Io||Ns?"cssFloat":"float",Of=Dr&&!El&&!Wd&&"draggable"in document.createElement("div"),xh=function(){if(Dr){if(Ns)return!1;var d=document.createElement("x");return d.style.cssText="pointer-events:auto","auto"===d.style.pointerEvents}}(),Da=function(e,i){var o=Gt(e),l=parseInt(o.width)-parseInt(o.paddingLeft)-parseInt(o.paddingRight)-parseInt(o.borderLeftWidth)-parseInt(o.borderRightWidth),c=ko(e,0,i),u=ko(e,1,i),g=c&&Gt(c),y=u&&Gt(u),M=g&&parseInt(g.marginLeft)+parseInt(g.marginRight)+Qn(c).width,V=y&&parseInt(y.marginLeft)+parseInt(y.marginRight)+Qn(u).width;return"flex"===o.display?"column"===o.flexDirection||"column-reverse"===o.flexDirection?"vertical":"horizontal":"grid"===o.display?o.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal":c&&g.float&&"none"!==g.float?!u||"both"!==y.clear&&y.clear!==("left"===g.float?"left":"right")?"horizontal":"vertical":c&&("block"===g.display||"flex"===g.display||"table"===g.display||"grid"===g.display||M>=l&&"none"===o[ya]||u&&"none"===o[ya]&&M+V>l)?"vertical":"horizontal"},va=function(e){function i(c,u){return function(g,y,M,V){if(null==c&&(u||g.options.group.name&&y.options.group.name&&g.options.group.name===y.options.group.name))return!0;if(null==c||!1===c)return!1;if(u&&"clone"===c)return c;if("function"==typeof c)return i(c(g,y,M,V),u)(g,y,M,V);var ve=(u?g:y).options.group.name;return!0===c||"string"==typeof c&&c===ve||c.join&&c.indexOf(ve)>-1}}var o={},l=e.group;(!l||"object"!=Dn(l))&&(l={name:l}),o.name=l.name,o.checkPull=i(l.pull,!0),o.checkPut=i(l.put),o.revertClone=l.revertClone,e.group=o},Rf=function(){!xh&&Ut&&Gt(Ut,"display","none")},Ff=function(){!xh&&Ut&&Gt(Ut,"display","")};Dr&&!El&&document.addEventListener("click",function(d){if(Ls)return d.preventDefault(),d.stopPropagation&&d.stopPropagation(),d.stopImmediatePropagation&&d.stopImmediatePropagation(),Ls=!1,!1},!0);var Xr=function(e){if(mt){var i=function(e,i){var o;return _o.some(function(l){var c=l[It].options.emptyInsertThreshold;if(c&&!Ao(l)){var u=Qn(l);if(e>=u.left-c&&e<=u.right+c&&i>=u.top-c&&i<=u.bottom+c)return o=l}}),o}((e=e.touches?e.touches[0]:e).clientX,e.clientY);if(i){var o={};for(var l in e)e.hasOwnProperty(l)&&(o[l]=e[l]);o.target=o.rootEl=i,o.preventDefault=void 0,o.stopPropagation=void 0,i[It]._onDragOver(o)}}},Up=function(e){mt&&mt.parentNode[It]._isOutsideThisEl(e.target)};function rn(d,e){if(!d||!d.nodeType||1!==d.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(d));this.el=d,this.options=e=Bn({},e),d[It]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(d.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Da(d,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(u,g){u.setData("Text",g.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==rn.supportPointer&&"PointerEvent"in window&&!Qo,emptyInsertThreshold:5};for(var o in Fn.initializePlugins(this,d,i),i)!(o in e)&&(e[o]=i[o]);for(var l in va(e),this)"_"===l.charAt(0)&&"function"==typeof this[l]&&(this[l]=this[l].bind(this));this.nativeDraggable=!e.forceFallback&&Of,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Pn(d,"pointerdown",this._onTapStart):(Pn(d,"mousedown",this._onTapStart),Pn(d,"touchstart",this._onTapStart)),this.nativeDraggable&&(Pn(d,"dragover",this),Pn(d,"dragenter",this)),_o.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Bn(this,function Yn(){var e,d=[];return{captureAnimationState:function(){d=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(l){if("none"!==Gt(l,"display")&&l!==rn.ghost){d.push({target:l,rect:Qn(l)});var c=cs({},d[d.length-1].rect);if(l.thisAnimationDuration){var u=yi(l,!0);u&&(c.top-=u.f,c.left-=u.e)}l.fromRect=c}})},addAnimationState:function(o){d.push(o)},removeAnimationState:function(o){d.splice(function Mh(d,e){for(var i in d)if(d.hasOwnProperty(i))for(var o in e)if(e.hasOwnProperty(o)&&e[o]===d[i][o])return Number(i);return-1}(d,{target:o}),1)},animateAll:function(o){var l=this;if(!this.options.animation)return clearTimeout(e),void("function"==typeof o&&o());var c=!1,u=0;d.forEach(function(g){var y=0,M=g.target,V=M.fromRect,te=Qn(M),ve=M.prevFromRect,Ae=M.prevToRect,ze=g.rect,Ye=yi(M,!0);Ye&&(te.top-=Ye.f,te.left-=Ye.e),M.toRect=te,M.thisAnimationDuration&&Tl(ve,te)&&!Tl(V,te)&&(ze.top-te.top)/(ze.left-te.left)==(V.top-te.top)/(V.left-te.left)&&(y=function zn(d,e,i,o){return Math.sqrt(Math.pow(e.top-d.top,2)+Math.pow(e.left-d.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*o.animation}(ze,ve,Ae,l.options)),Tl(te,V)||(M.prevFromRect=V,M.prevToRect=te,y||(y=l.options.animation),l.animate(M,ze,te,y)),y&&(c=!0,u=Math.max(u,y),clearTimeout(M.animationResetTimer),M.animationResetTimer=setTimeout(function(){M.animationTime=0,M.prevFromRect=null,M.fromRect=null,M.prevToRect=null,M.thisAnimationDuration=null},y),M.thisAnimationDuration=y)}),clearTimeout(e),c?e=setTimeout(function(){"function"==typeof o&&o()},u):"function"==typeof o&&o(),d=[]},animate:function(o,l,c,u){if(u){Gt(o,"transition",""),Gt(o,"transform","");var g=yi(this.el),V=(l.left-c.left)/(g&&g.a||1),te=(l.top-c.top)/(g&&g.d||1);o.animatingX=!!V,o.animatingY=!!te,Gt(o,"transform","translate3d("+V+"px,"+te+"px,0)"),this.forRepaintDummy=function $n(d){return d.offsetWidth}(o),Gt(o,"transition","transform "+u+"ms"+(this.options.easing?" "+this.options.easing:"")),Gt(o,"transform","translate3d(0,0,0)"),"number"==typeof o.animated&&clearTimeout(o.animated),o.animated=setTimeout(function(){Gt(o,"transition",""),Gt(o,"transform",""),o.animated=!1,o.animatingX=!1,o.animatingY=!1},u)}}}}())}function Kd(d,e,i,o,l,c,u,g){var y,te,M=d[It],V=M.options.onMove;return!window.CustomEvent||Ns||Io?(y=document.createEvent("Event")).initEvent("move",!0,!0):y=new CustomEvent("move",{bubbles:!0,cancelable:!0}),y.to=e,y.from=d,y.dragged=i,y.draggedRect=o,y.related=l||e,y.relatedRect=c||Qn(e),y.willInsertAfter=g,y.originalEvent=u,d.dispatchEvent(y),V&&(te=V.call(M,y,u)),te}function Oh(d){d.draggable=!1}function jp(){Il=!1}function Rh(d){for(var e=d.tagName+d.className+d.src+d.href+d.textContent,i=e.length,o=0;i--;)o+=e.charCodeAt(i);return o.toString(36)}function Yd(d){return setTimeout(d,0)}function Fh(d){return clearTimeout(d)}rn.prototype={constructor:rn,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(ns=null)},_getDirection:function(e,i){return"function"==typeof this.options.direction?this.options.direction.call(this,e,i,mt):this.options.direction},_onTapStart:function(e){if(e.cancelable){var i=this,o=this.el,l=this.options,c=l.preventOnFilter,u=e.type,g=e.touches&&e.touches[0]||e.pointerType&&"touch"===e.pointerType&&e,y=(g||e).target,M=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||y,V=l.filter;if(function Kp(d){co.length=0;for(var e=d.getElementsByTagName("input"),i=e.length;i--;){var o=e[i];o.checked&&co.push(o)}}(o),!mt&&!(/mousedown|pointerdown/.test(u)&&0!==e.button||l.disabled)&&!M.isContentEditable&&(this.nativeDraggable||!Qo||!y||"SELECT"!==y.tagName.toUpperCase())&&!((y=Xi(y,l.draggable,o,!1))&&y.animated||Kn===y)){if(Zt=oi(y),zr=oi(y,l.draggable),"function"==typeof V){if(V.call(this,e,y,this))return Rt({sortable:i,rootEl:M,name:"filter",targetEl:y,toEl:o,fromEl:o}),ut("filter",i,{evt:e}),void(c&&e.cancelable&&e.preventDefault())}else if(V&&(V=V.split(",").some(function(te){if(te=Xi(M,te.trim(),o,!1))return Rt({sortable:i,rootEl:te,name:"filter",targetEl:y,fromEl:o,toEl:o}),ut("filter",i,{evt:e}),!0})))return void(c&&e.cancelable&&e.preventDefault());l.handle&&!Xi(M,l.handle,o,!1)||this._prepareDragStart(e,g,y)}}},_prepareDragStart:function(e,i,o){var y,l=this,c=l.el,u=l.options,g=c.ownerDocument;if(o&&!mt&&o.parentNode===c){var M=Qn(o);if(vn=c,In=(mt=o).parentNode,Ji=mt.nextSibling,Kn=o,kn=u.group,rn.dragged=mt,hn=(er={target:mt,clientX:(i||e).clientX,clientY:(i||e).clientY}).clientX-M.left,Ca=er.clientY-M.top,this._lastX=(i||e).clientX,this._lastY=(i||e).clientY,mt.style["will-change"]="all",y=function(){ut("delayEnded",l,{evt:e}),rn.eventCanceled?l._onDrop():(l._disableDelayedDragEvents(),!Ah&&l.nativeDraggable&&(mt.draggable=!0),l._triggerDragStart(e,i),Rt({sortable:l,name:"choose",originalEvent:e}),Jn(mt,u.chosenClass,!0))},u.ignore.split(",").forEach(function(V){Zo(mt,V.trim(),Oh)}),Pn(g,"dragover",Xr),Pn(g,"mousemove",Xr),Pn(g,"touchmove",Xr),Pn(g,"mouseup",l._onDrop),Pn(g,"touchend",l._onDrop),Pn(g,"touchcancel",l._onDrop),Ah&&this.nativeDraggable&&(this.options.touchStartThreshold=4,mt.draggable=!0),ut("delayStart",this,{evt:e}),!u.delay||u.delayOnTouchOnly&&!i||this.nativeDraggable&&(Io||Ns))y();else{if(rn.eventCanceled)return void this._onDrop();Pn(g,"mouseup",l._disableDelayedDrag),Pn(g,"touchend",l._disableDelayedDrag),Pn(g,"touchcancel",l._disableDelayedDrag),Pn(g,"mousemove",l._delayedDragTouchMoveHandler),Pn(g,"touchmove",l._delayedDragTouchMoveHandler),u.supportPointer&&Pn(g,"pointermove",l._delayedDragTouchMoveHandler),l._dragStartTimer=setTimeout(y,u.delay)}}},_delayedDragTouchMoveHandler:function(e){var i=e.touches?e.touches[0]:e;Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){mt&&Oh(mt),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;cn(e,"mouseup",this._disableDelayedDrag),cn(e,"touchend",this._disableDelayedDrag),cn(e,"touchcancel",this._disableDelayedDrag),cn(e,"mousemove",this._delayedDragTouchMoveHandler),cn(e,"touchmove",this._delayedDragTouchMoveHandler),cn(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,i){i=i||"touch"==e.pointerType&&e,!this.nativeDraggable||i?Pn(document,this.options.supportPointer?"pointermove":i?"touchmove":"mousemove",this._onTouchMove):(Pn(mt,"dragend",this),Pn(vn,"dragstart",this._onDragStart));try{document.selection?Yd(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,i){if(ks=!1,vn&&mt){ut("dragStarted",this,{evt:i}),this.nativeDraggable&&Pn(document,"dragover",Up);var o=this.options;!e&&Jn(mt,o.dragClass,!1),Jn(mt,o.ghostClass,!0),rn.active=this,e&&this._appendGhost(),Rt({sortable:this,name:"start",originalEvent:i})}else this._nulling()},_emulateDragOver:function(){if(Pi){this._lastX=Pi.clientX,this._lastY=Pi.clientY,Rf();for(var e=document.elementFromPoint(Pi.clientX,Pi.clientY),i=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Pi.clientX,Pi.clientY))!==i;)i=e;if(mt.parentNode[It]._isOutsideThisEl(e),i)do{if(i[It]&&i[It]._onDragOver({clientX:Pi.clientX,clientY:Pi.clientY,target:e,rootEl:i})&&!this.options.dragoverBubble)break;e=i}while(i=i.parentNode);Ff()}},_onTouchMove:function(e){if(er){var i=this.options,o=i.fallbackTolerance,l=i.fallbackOffset,c=e.touches?e.touches[0]:e,u=Ut&&yi(Ut,!0),g=Ut&&u&&u.a,y=Ut&&u&&u.d,M=fs&&Gn&&zd(Gn),V=(c.clientX-er.clientX+l.x)/(g||1)+(M?M[0]-Oi[0]:0)/(g||1),te=(c.clientY-er.clientY+l.y)/(y||1)+(M?M[1]-Oi[1]:0)/(y||1);if(!rn.active&&!ks){if(o&&Math.max(Math.abs(c.clientX-this._lastX),Math.abs(c.clientY-this._lastY))<o)return;this._onDragStart(e,!0)}if(Ut){u?(u.e+=V-(Kr||0),u.f+=te-(Mo||0)):u={a:1,b:0,c:0,d:1,e:V,f:te};var ve="matrix(".concat(u.a,",").concat(u.b,",").concat(u.c,",").concat(u.d,",").concat(u.e,",").concat(u.f,")");Gt(Ut,"webkitTransform",ve),Gt(Ut,"mozTransform",ve),Gt(Ut,"msTransform",ve),Gt(Ut,"transform",ve),Kr=V,Mo=te,Pi=c}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Ut){var e=this.options.fallbackOnBody?document.body:vn,i=Qn(mt,!0,fs,!0,e),o=this.options;if(fs){for(Gn=e;"static"===Gt(Gn,"position")&&"none"===Gt(Gn,"transform")&&Gn!==document;)Gn=Gn.parentNode;Gn!==document.body&&Gn!==document.documentElement?(Gn===document&&(Gn=vs()),i.top+=Gn.scrollTop,i.left+=Gn.scrollLeft):Gn=vs(),Oi=zd(Gn)}Jn(Ut=mt.cloneNode(!0),o.ghostClass,!1),Jn(Ut,o.fallbackClass,!0),Jn(Ut,o.dragClass,!0),Gt(Ut,"transition",""),Gt(Ut,"transform",""),Gt(Ut,"box-sizing","border-box"),Gt(Ut,"margin",0),Gt(Ut,"top",i.top),Gt(Ut,"left",i.left),Gt(Ut,"width",i.width),Gt(Ut,"height",i.height),Gt(Ut,"opacity","0.8"),Gt(Ut,"position",fs?"absolute":"fixed"),Gt(Ut,"zIndex","100000"),Gt(Ut,"pointerEvents","none"),rn.ghost=Ut,e.appendChild(Ut),Gt(Ut,"transform-origin",hn/parseInt(Ut.style.width)*100+"% "+Ca/parseInt(Ut.style.height)*100+"%")}},_onDragStart:function(e,i){var o=this,l=e.dataTransfer,c=o.options;ut("dragStart",this,{evt:e}),rn.eventCanceled?this._onDrop():(ut("setupClone",this),rn.eventCanceled||((Sn=ae(mt)).removeAttribute("id"),Sn.draggable=!1,Sn.style["will-change"]="",this._hideClone(),Jn(Sn,this.options.chosenClass,!1),rn.clone=Sn),o.cloneId=Yd(function(){ut("clone",o),!rn.eventCanceled&&(o.options.removeCloneOnHide||vn.insertBefore(Sn,mt),o._hideClone(),Rt({sortable:o,name:"clone"}))}),!i&&Jn(mt,c.dragClass,!0),i?(Ls=!0,o._loopId=setInterval(o._emulateDragOver,50)):(cn(document,"mouseup",o._onDrop),cn(document,"touchend",o._onDrop),cn(document,"touchcancel",o._onDrop),l&&(l.effectAllowed="move",c.setData&&c.setData.call(o,l,mt)),Pn(document,"drop",o),Gt(mt,"transform","translateZ(0)")),ks=!0,o._dragStartId=Yd(o._dragStarted.bind(o,i,e)),Pn(document,"selectstart",o),xo=!0,Qo&&Gt(document.body,"user-select","none"))},_onDragOver:function(e){var l,c,u,Ae,i=this.el,o=e.target,g=this.options,y=g.group,M=rn.active,V=kn===y,te=g.sort,ve=fi||M,ze=this,Ye=!1;if(!Il){if(void 0!==e.preventDefault&&e.cancelable&&e.preventDefault(),o=Xi(o,g.draggable,i,!0),nt("dragOver"),rn.eventCanceled)return Ye;if(mt.contains(e.target)||o.animated&&o.animatingX&&o.animatingY||ze._ignoreWhileAnimating===o)return Ot(!1);if(Ls=!1,M&&!g.disabled&&(V?te||(u=In!==vn):fi===this||(this.lastPutMode=kn.checkPull(this,M,mt,e))&&y.checkPut(this,M,mt,e))){if(Ae="vertical"===this._getDirection(e,o),l=Qn(mt),nt("dragOverValid"),rn.eventCanceled)return Ye;if(u)return In=vn,et(),this._hideClone(),nt("revert"),rn.eventCanceled||(Ji?vn.insertBefore(mt,Ji):vn.appendChild(mt)),Ot(!0);var rt=Ao(i,g.draggable);if(!rt||function $p(d,e,i){var o=Qn(Ao(i.el,i.options.draggable)),l=ht(i.el,i.options,Ut);return e?d.clientX>l.right+10||d.clientY>o.bottom&&d.clientX>o.left:d.clientY>l.bottom+10||d.clientX>o.right&&d.clientY>o.top}(e,Ae,this)&&!rt.animated){if(rt===mt)return Ot(!1);if(rt&&i===e.target&&(o=rt),o&&(c=Qn(o)),!1!==Kd(vn,i,mt,l,o,c,e,!!o))return et(),rt&&rt.nextSibling?i.insertBefore(mt,rt.nextSibling):i.appendChild(mt),In=i,gt(),Ot(!0)}else if(rt&&function Wp(d,e,i){var o=Qn(ko(i.el,0,i.options,!0)),l=ht(i.el,i.options,Ut);return e?d.clientX<l.left-10||d.clientY<o.top&&d.clientX<o.right:d.clientY<l.top-10||d.clientY<o.bottom&&d.clientX<o.left}(e,Ae,this)){var At=ko(i,0,g,!0);if(At===mt)return Ot(!1);if(c=Qn(o=At),!1!==Kd(vn,i,mt,l,o,c,e,!1))return et(),i.insertBefore(mt,At),In=i,gt(),Ot(!0)}else if(o.parentNode===i){c=Qn(o);var Nt,ln,mi,kt=mt.parentNode!==i,un=!function(e,i,o){var l=o?e.left:e.top,g=o?i.left:i.top;return l===g||(o?e.right:e.bottom)===(o?i.right:i.bottom)||l+(o?e.width:e.height)/2===g+(o?i.width:i.height)/2}(mt.animated&&mt.toRect||l,o.animated&&o.toRect||c,Ae),Ri=Ae?"top":"left",li=$d(o,"top","top")||$d(mt,"top","top"),Fi=li?li.scrollTop:void 0;if(ns!==o&&(ln=c[Ri],ao=!1,ii=!un&&g.invertSwap||kt),Nt=function zp(d,e,i,o,l,c,u,g){var y=o?d.clientY:d.clientX,M=o?i.height:i.width,V=o?i.top:i.left,te=o?i.bottom:i.right,ve=!1;if(!u)if(g&&Yr<M*l){if(!ao&&(1===tr?y>V+M*c/2:y<te-M*c/2)&&(ao=!0),ao)ve=!0;else if(1===tr?y<V+Yr:y>te-Yr)return-tr}else if(y>V+M*(1-l)/2&&y<te-M*(1-l)/2)return function bh(d){return oi(mt)<oi(d)?1:-1}(e);return(ve=ve||u)&&(y<V+M*c/2||y>te-M*c/2)?y>V+M/2?1:-1:0}(e,o,c,Ae,un?1:g.swapThreshold,null==g.invertedSwapThreshold?g.swapThreshold:g.invertedSwapThreshold,ii,ns===o),0!==Nt){var Vs=oi(mt);do{mi=In.children[Vs-=Nt]}while(mi&&("none"===Gt(mi,"display")||mi===Ut))}if(0===Nt||mi===o)return Ot(!1);ns=o,tr=Nt;var Ts=o.nextElementSibling,Ci=!1,os=Kd(vn,i,mt,l,o,c,e,Ci=1===Nt);if(!1!==os)return(1===os||-1===os)&&(Ci=1===os),Il=!0,setTimeout(jp,30),et(),Ci&&!Ts?i.appendChild(mt):o.parentNode.insertBefore(mt,Ci?Ts:o),li&&Q(li,0,Fi-li.scrollTop),In=mt.parentNode,void 0!==ln&&!ii&&(Yr=Math.abs(ln-Qn(o)[Ri])),gt(),Ot(!0)}if(i.contains(mt))return Ot(!1)}return!1}function nt(Bs,sd){ut(Bs,ze,cs({evt:e,isOwner:V,axis:Ae?"vertical":"horizontal",revert:u,dragRect:l,targetRect:c,canSort:te,fromSortable:ve,target:o,completed:Ot,onMove:function(Pr,ol){return Kd(vn,i,mt,l,Pr,Qn(Pr),e,ol)},changed:gt},sd))}function et(){nt("dragOverAnimationCapture"),ze.captureAnimationState(),ze!==ve&&ve.captureAnimationState()}function Ot(Bs){return nt("dragOverCompleted",{insertion:Bs}),Bs&&(V?M._hideClone():M._showClone(ze),ze!==ve&&(Jn(mt,fi?fi.options.ghostClass:M.options.ghostClass,!1),Jn(mt,g.ghostClass,!0)),fi!==ze&&ze!==rn.active?fi=ze:ze===rn.active&&fi&&(fi=null),ve===ze&&(ze._ignoreWhileAnimating=o),ze.animateAll(function(){nt("dragOverAnimationComplete"),ze._ignoreWhileAnimating=null}),ze!==ve&&(ve.animateAll(),ve._ignoreWhileAnimating=null)),(o===mt&&!mt.animated||o===i&&!o.animated)&&(ns=null),!g.dragoverBubble&&!e.rootEl&&o!==document&&(mt.parentNode[It]._isOutsideThisEl(e.target),!Bs&&Xr(e)),!g.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),Ye=!0}function gt(){Gi=oi(mt),Es=oi(mt,g.draggable),Rt({sortable:ze,name:"change",toEl:i,newIndex:Gi,newDraggableIndex:Es,originalEvent:e})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){cn(document,"mousemove",this._onTouchMove),cn(document,"touchmove",this._onTouchMove),cn(document,"pointermove",this._onTouchMove),cn(document,"dragover",Xr),cn(document,"mousemove",Xr),cn(document,"touchmove",Xr)},_offUpEvents:function(){var e=this.el.ownerDocument;cn(e,"mouseup",this._onDrop),cn(e,"touchend",this._onDrop),cn(e,"pointerup",this._onDrop),cn(e,"touchcancel",this._onDrop),cn(document,"selectstart",this)},_onDrop:function(e){var i=this.el,o=this.options;Gi=oi(mt),Es=oi(mt,o.draggable),ut("drop",this,{evt:e}),In=mt&&mt.parentNode,Gi=oi(mt),Es=oi(mt,o.draggable),rn.eventCanceled||(ks=!1,ii=!1,ao=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Fh(this.cloneId),Fh(this._dragStartId),this.nativeDraggable&&(cn(document,"drop",this),cn(i,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Qo&&Gt(document.body,"user-select",""),Gt(mt,"transform",""),e&&(xo&&(e.cancelable&&e.preventDefault(),!o.dropBubble&&e.stopPropagation()),Ut&&Ut.parentNode&&Ut.parentNode.removeChild(Ut),(vn===In||fi&&"clone"!==fi.lastPutMode)&&Sn&&Sn.parentNode&&Sn.parentNode.removeChild(Sn),mt&&(this.nativeDraggable&&cn(mt,"dragend",this),Oh(mt),mt.style["will-change"]="",xo&&!ks&&Jn(mt,fi?fi.options.ghostClass:this.options.ghostClass,!1),Jn(mt,this.options.chosenClass,!1),Rt({sortable:this,name:"unchoose",toEl:In,newIndex:null,newDraggableIndex:null,originalEvent:e}),vn!==In?(Gi>=0&&(Rt({rootEl:In,name:"add",toEl:In,fromEl:vn,originalEvent:e}),Rt({sortable:this,name:"remove",toEl:In,originalEvent:e}),Rt({rootEl:In,name:"sort",toEl:In,fromEl:vn,originalEvent:e}),Rt({sortable:this,name:"sort",toEl:In,originalEvent:e})),fi&&fi.save()):Gi!==Zt&&Gi>=0&&(Rt({sortable:this,name:"update",toEl:In,originalEvent:e}),Rt({sortable:this,name:"sort",toEl:In,originalEvent:e})),rn.active&&((null==Gi||-1===Gi)&&(Gi=Zt,Es=zr),Rt({sortable:this,name:"end",toEl:In,originalEvent:e}),this.save())))),this._nulling()},_nulling:function(){ut("nulling",this),vn=mt=In=Ut=Ji=Sn=Kn=xi=er=Pi=xo=Gi=Es=Zt=zr=ns=tr=fi=kn=rn.dragged=rn.ghost=rn.clone=rn.active=null,co.forEach(function(e){e.checked=!0}),co.length=Kr=Mo=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":mt&&(this._onDragOver(e),function Gp(d){d.dataTransfer&&(d.dataTransfer.dropEffect="move"),d.cancelable&&d.preventDefault()}(e));break;case"selectstart":e.preventDefault()}},toArray:function(){for(var i,e=[],o=this.el.children,l=0,c=o.length,u=this.options;l<c;l++)Xi(i=o[l],u.draggable,this.el,!1)&&e.push(i.getAttribute(u.dataIdAttr)||Rh(i));return e},sort:function(e,i){var o={},l=this.el;this.toArray().forEach(function(c,u){var g=l.children[u];Xi(g,this.options.draggable,l,!1)&&(o[c]=g)},this),i&&this.captureAnimationState(),e.forEach(function(c){o[c]&&(l.removeChild(o[c]),l.appendChild(o[c]))}),i&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,i){return Xi(e,i||this.options.draggable,this.el,!1)},option:function(e,i){var o=this.options;if(void 0===i)return o[e];var l=Fn.modifyOption(this,e,i);o[e]=typeof l<"u"?l:i,"group"===e&&va(o)},destroy:function(){ut("destroy",this);var e=this.el;e[It]=null,cn(e,"mousedown",this._onTapStart),cn(e,"touchstart",this._onTapStart),cn(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(cn(e,"dragover",this),cn(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(i){i.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),_o.splice(_o.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!xi){if(ut("hideClone",this),rn.eventCanceled)return;Gt(Sn,"display","none"),this.options.removeCloneOnHide&&Sn.parentNode&&Sn.parentNode.removeChild(Sn),xi=!0}},_showClone:function(e){if("clone"===e.lastPutMode){if(xi){if(ut("showClone",this),rn.eventCanceled)return;mt.parentNode!=vn||this.options.group.revertClone?Ji?vn.insertBefore(Sn,Ji):vn.appendChild(Sn):vn.insertBefore(Sn,mt),this.options.group.revertClone&&this.animate(mt,Sn),Gt(Sn,"display",""),xi=!1}}else this._hideClone()}},Dr&&Pn(document,"touchmove",function(d){(rn.active||ks)&&d.cancelable&&d.preventDefault()}),rn.utils={on:Pn,off:cn,css:Gt,find:Zo,is:function(e,i){return!!Xi(e,i,e,!1)},extend:function qo(d,e){if(d&&e)for(var i in e)e.hasOwnProperty(i)&&(d[i]=e[i]);return d},throttle:b,closest:Xi,toggleClass:Jn,clone:ae,index:oi,nextTick:Yd,cancelNextTick:Fh,detectDirection:Da,getChild:ko},rn.get=function(d){return d[It]},rn.mount=function(){for(var d=arguments.length,e=new Array(d),i=0;i<d;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach(function(o){if(!o.prototype||!o.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(o));o.utils&&(rn.utils=cs(cs({},rn.utils),o.utils)),Fn.mount(o)})},rn.create=function(d,e){return new rn(d,e)},rn.version="1.15.2";var Al,Ea,Sa,Xd,Ta,Jr,Di=[],Ml=!1;function Ia(){Di.forEach(function(d){clearInterval(d.pid)}),Di=[]}function Aa(){clearInterval(Jr)}var Jd=b(function(d,e,i,o){if(e.scroll){var V,l=(d.touches?d.touches[0]:d).clientX,c=(d.touches?d.touches[0]:d).clientY,u=e.scrollSensitivity,g=e.scrollSpeed,y=vs(),M=!1;Ea!==i&&(Ea=i,Ia(),V=e.scrollFn,!0===(Al=e.scroll)&&(Al=Zs(i,!0)));var te=0,ve=Al;do{var Ae=ve,ze=Qn(Ae),Ye=ze.top,nt=ze.bottom,et=ze.left,Ot=ze.right,gt=ze.width,rt=ze.height,At=void 0,Nt=void 0,ln=Ae.scrollWidth,kt=Ae.scrollHeight,un=Gt(Ae),Ri=Ae.scrollLeft,li=Ae.scrollTop;Ae===y?(At=gt<ln&&("auto"===un.overflowX||"scroll"===un.overflowX||"visible"===un.overflowX),Nt=rt<kt&&("auto"===un.overflowY||"scroll"===un.overflowY||"visible"===un.overflowY)):(At=gt<ln&&("auto"===un.overflowX||"scroll"===un.overflowX),Nt=rt<kt&&("auto"===un.overflowY||"scroll"===un.overflowY));var Fi=At&&(Math.abs(Ot-l)<=u&&Ri+gt<ln)-(Math.abs(et-l)<=u&&!!Ri),mi=Nt&&(Math.abs(nt-c)<=u&&li+rt<kt)-(Math.abs(Ye-c)<=u&&!!li);if(!Di[te])for(var Vs=0;Vs<=te;Vs++)Di[Vs]||(Di[Vs]={});(Di[te].vx!=Fi||Di[te].vy!=mi||Di[te].el!==Ae)&&(Di[te].el=Ae,Di[te].vx=Fi,Di[te].vy=mi,clearInterval(Di[te].pid),(0!=Fi||0!=mi)&&(M=!0,Di[te].pid=setInterval(function(){o&&0===this.layer&&rn.active._onTouchMove(Ta);var Ts=Di[this.layer].vy?Di[this.layer].vy*g:0,Ci=Di[this.layer].vx?Di[this.layer].vx*g:0;"function"==typeof V&&"continue"!==V.call(rn.dragged.parentNode[It],Ci,Ts,d,Ta,Di[this.layer].el)||Q(Di[this.layer].el,Ci,Ts)}.bind({layer:te}),24))),te++}while(e.bubbleScroll&&ve!==y&&(ve=Zs(ve,!1)));Ml=M}},30),qs=function(e){var i=e.originalEvent,o=e.putSortable,l=e.dragEl,u=e.dispatchSortableEvent,y=e.unhideGhostForTarget;if(i){var M=o||e.activeSortable;(0,e.hideGhostForTarget)();var V=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:i,te=document.elementFromPoint(V.clientX,V.clientY);y(),M&&!M.el.contains(te)&&(u("spill"),this.onSpill({dragEl:l,putSortable:o}))}};function Ma(){}function xa(){}Ma.prototype={startIndex:null,dragStart:function(e){this.startIndex=e.oldDraggableIndex},onSpill:function(e){var i=e.dragEl,o=e.putSortable;this.sortable.captureAnimationState(),o&&o.captureAnimationState();var l=ko(this.sortable.el,this.startIndex,this.options);l?this.sortable.el.insertBefore(i,l):this.sortable.el.appendChild(i),this.sortable.animateAll(),o&&o.animateAll()},drop:qs},Bn(Ma,{pluginName:"revertOnSpill"}),xa.prototype={onSpill:function(e){var i=e.dragEl,l=e.putSortable||this.sortable;l.captureAnimationState(),i.parentNode&&i.parentNode.removeChild(i),l.animateAll()},drop:qs},Bn(xa,{pluginName:"removeOnSpill"}),rn.mount(new function Nh(){function d(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===e.charAt(0)&&"function"==typeof this[e]&&(this[e]=this[e].bind(this))}return d.prototype={dragStarted:function(i){var o=i.originalEvent;this.sortable.nativeDraggable?Pn(document,"dragover",this._handleAutoScroll):Pn(document,this.options.supportPointer?"pointermove":o.touches?"touchmove":"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(i){var o=i.originalEvent;!this.options.dragOverBubble&&!o.rootEl&&this._handleAutoScroll(o)},drop:function(){this.sortable.nativeDraggable?cn(document,"dragover",this._handleAutoScroll):(cn(document,"pointermove",this._handleFallbackAutoScroll),cn(document,"touchmove",this._handleFallbackAutoScroll),cn(document,"mousemove",this._handleFallbackAutoScroll)),Aa(),Ia(),function De(){clearTimeout(lo),lo=void 0}()},nulling:function(){Ta=Ea=Al=Ml=Jr=Sa=Xd=null,Di.length=0},_handleFallbackAutoScroll:function(i){this._handleAutoScroll(i,!0)},_handleAutoScroll:function(i,o){var l=this,c=(i.touches?i.touches[0]:i).clientX,u=(i.touches?i.touches[0]:i).clientY,g=document.elementFromPoint(c,u);if(Ta=i,o||this.options.forceAutoScrollFallback||Io||Ns||Qo){Jd(i,this.options,g,o);var y=Zs(g,!0);Ml&&(!Jr||c!==Sa||u!==Xd)&&(Jr&&Aa(),Jr=setInterval(function(){var M=Zs(document.elementFromPoint(c,u),!0);M!==y&&(y=M,Ia()),Jd(i,l.options,M,o)},10),Sa=c,Xd=u)}else{if(!this.options.bubbleScroll||Zs(g,!0)===vs())return void Ia();Jd(i,this.options,Zs(g,!1),!1)}}},Bn(d,{pluginName:"scroll",initializeByDefault:!0})}),rn.mount(xa,Ma);const Oo=rn;function Oa(d){let{containerElement:e}=d;const{onDragInit:i,onDragStart:o,onDrag:l,onDragEnd:c,preventDragFromKeys:u}=d;let g,y,M,V,te,ve;e||(e=document.body);let Ae={dragSource:e,dragHandle:null};function Ye(At,Nt,ln){if("function"==typeof At)return At(Nt,ln)}function et(At){let Nt=!1;return u&&u.forEach(ln=>{At[ln]&&(Nt=!0)}),Nt}function Ot(At){if(g=At.target,!et(At)){const Nt=At?.touches?.[0]??At,{target:ln}=Nt;if(!d.allowDragFrom||d.allowDragFrom&&g.matches(d.allowDragFrom)||d.allowDragFromClosest&&g.closest(d.allowDragFromClosest)){Ae.dragHandle=g;const kt=(0,w.windowScrollPosition)();y=kt.left+Nt.clientX,M=kt.top+Nt.clientY,V=Nt.clientX-Nt.clientX,te=Nt.clientY-Nt.clientY,Ae=Object.assign(Ae,{deltaX:V,deltaY:te,startX:y,startY:M,target:ln}),!1!==Ye(i,At,Ae)&&(document.body.addEventListener("mousemove",gt),document.body.addEventListener("touchmove",gt),document.body.addEventListener("mouseup",rt),document.body.addEventListener("touchend",rt),document.body.addEventListener("touchcancel",rt))}}}function gt(At){const Nt=At?.touches?.[0]??At;if(!et(At)){V=Nt.clientX-y,te=Nt.clientY-M;const{target:ln}=Nt;ve||(Ae=Object.assign(Ae,{deltaX:V,deltaY:te,startX:y,startY:M,target:ln}),Ye(o,At,Ae),ve=!0),Ae=Object.assign(Ae,{deltaX:V,deltaY:te,startX:y,startY:M,target:ln}),Ye(l,At,Ae)}}function rt(At){if(document.body.removeEventListener("mousemove",gt),document.body.removeEventListener("touchmove",gt),document.body.removeEventListener("mouseup",rt),document.body.removeEventListener("touchend",rt),document.body.removeEventListener("touchcancel",rt),ve){const{target:Nt}=At;Ae=Object.assign(Ae,{target:Nt}),Ye(c,At,Ae),ve=!1}}return function ze(){e&&(e.addEventListener("mousedown",Ot),e.addEventListener("touchstart",Ot))}(),{destroy:function nt(){e&&(e.removeEventListener("mousedown",Ot),e.removeEventListener("touchstart",Ot))}}}function ba(d){const{element:e,onMouseWheel:i}=d;function c(u){const g=u||window.event;let y=0,M=0,V=0;g.wheelDelta&&(y=g.wheelDelta/120),g.detail&&(y=-g.detail/3),V=y,void 0!==g.axis&&g.axis===g.HORIZONTAL_AXIS&&(V=0,M=-1*y),void 0!==g.wheelDeltaY&&(V=g.wheelDeltaY/120),void 0!==g.wheelDeltaX&&(M=-1*g.wheelDeltaX/120),"function"==typeof i&&i(u,y,M,V)}return function l(){e.addEventListener("wheel",c),e.addEventListener("mousewheel",c)}(),{destroy:function o(){e.removeEventListener("wheel",c),e.removeEventListener("mousewheel",c)}}}function Zr(d){const{resizeableElement:e,resizeableHandleElement:i,onResizeStart:o,onResize:l,onResizeEnd:c}=d;if(!i||"function"!=typeof i.addEventListener)throw new Error("[SlickResizable] You did not provide a valid html element that will be used for the handle to resize.");function y(ve,Ae){if("function"==typeof ve)return ve(Ae,{resizeableElement:e,resizeableHandleElement:i})}function M(ve){ve.preventDefault(),!1!==y(o,ve.touches?ve.changedTouches[0]:ve)&&(document.body.addEventListener("mousemove",V),document.body.addEventListener("mouseup",te),document.body.addEventListener("touchmove",V),document.body.addEventListener("touchend",te))}function V(ve){ve.preventDefault&&"touchmove"!==ve.type&&ve.preventDefault(),"function"==typeof l&&l(ve.touches?ve.changedTouches[0]:ve,{resizeableElement:e,resizeableHandleElement:i})}function te(ve){y(c,ve.touches?ve.changedTouches[0]:ve),document.body.removeEventListener("mousemove",V),document.body.removeEventListener("mouseup",te),document.body.removeEventListener("touchmove",V),document.body.removeEventListener("touchend",te)}return function u(){i.addEventListener("mousedown",M),i.addEventListener("touchstart",M)}(),{destroy:function g(){"function"==typeof i?.removeEventListener&&(i.removeEventListener("mousedown",M),i.removeEventListener("touchstart",M))}}}class Ra{constructor(e,i,o,l,c){if(this.container=e,this.data=i,this.columns=o,this.externalPubSub=c,this.DigitCommas="Millons",this.disableRowBasedonHeight=!1,this.cid="",this.canvas=null,this.canvas_context=null,this._defaults={alwaysShowVerticalScroll:!1,alwaysAllowHorizontalScroll:!1,explicitInitialization:!1,rowHeight:25,defaultColumnWidth:80,enableHtmlRendering:!0,enableAddRow:!1,leaveSpaceForNewRows:!1,editable:!1,autoEdit:!0,autoEditNewRow:!0,autoCommitEdit:!1,suppressActiveCellChangeOnEdit:!1,enableCellNavigation:!0,enableColumnReorder:!0,unorderableColumnCssClass:"unorderable",asyncEditorLoading:!1,asyncEditorLoadDelay:100,forceFitColumns:!1,enableAsyncPostRender:!1,asyncPostRenderDelay:50,enableAsyncPostRenderCleanup:!1,asyncPostRenderCleanupDelay:40,columnResizingDelay:300,nonce:"",editorLock:yl,showColumnHeader:!0,showHeaderRow:!1,headerRowHeight:25,createFooterRow:!1,showFooterRow:!1,footerRowHeight:25,createPreHeaderPanel:!1,createTopHeaderPanel:!1,showPreHeaderPanel:!1,showTopHeaderPanel:!1,preHeaderPanelHeight:25,preHeaderPanelWidth:"auto",topHeaderPanelHeight:25,topHeaderPanelWidth:"auto",showTopPanel:!1,topPanelHeight:25,formatterFactory:null,editorFactory:null,cellFlashingCssClass:"flashing",rowHighlightCssClass:"highlight-animate",rowHighlightDuration:400,selectedCellCssClass:"selected",multiSelect:!0,enableTextSelectionOnCells:!1,dataItemColumnValueExtractor:null,frozenBottom:!1,frozenColumn:-1,frozenRow:-1,frozenRightViewportMinWidth:100,throwWhenFrozenNotAllViewable:!1,fullWidthRows:!1,multiColumnSort:!1,numberedMultiColumnSort:!1,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!1,defaultFormatter:this.defaultFormatter,forceSyncScrolling:!1,addNewRowCssClass:"new-row",preserveCopiedSelectionOnPaste:!1,preventDragFromKeys:["ctrlKey","metaKey"],showCellSelection:!0,viewportClass:void 0,minRowBuffer:3,emulatePagingWhenScrolling:!0,editorCellNavOnLRKeys:!1,enableMouseWheelScrollHandler:!0,doPaging:!0,scrollRenderThrottling:50,suppressCssChangesOnHiddenInit:!1,ffMaxSupportedCssHeight:6e6,maxSupportedCssHeight:1e9,sanitizer:void 0,mixinDefaults:!1,shadowRoot:void 0,MoveFocus:!0},this._columnDefaults={name:"",headerCssClass:null,defaultSortAsc:!0,focusable:!0,hidden:!1,minWidth:30,maxWidth:void 0,rerenderOnResize:!1,reorderable:!0,resizable:!0,sortable:!1,selectable:!0},this.page=0,this.offset=0,this.vScrollDir=1,this._bindingEventService=new Ft.P,this.initialized=!1,this.uid=`slickgrid_${Math.round(1e6*Math.random())}`,this._groupHeaders=[],this._headerScroller=[],this._headers=[],this._boundAncestors=[],this.viewportH=0,this.viewportW=0,this.canvasWidth=0,this.canvasWidthL=0,this.canvasWidthR=0,this.headersWidth=0,this.headersWidthL=0,this.headersWidthR=0,this.viewportHasHScroll=!1,this.viewportHasVScroll=!1,this.headerColumnWidthDiff=0,this.headerColumnHeightDiff=0,this.cellWidthDiff=0,this.cellHeightDiff=0,this.hasFrozenRows=!1,this.frozenRowsHeight=0,this.actualFrozenRow=-1,this.paneTopH=0,this.paneBottomH=0,this.viewportTopH=0,this.viewportBottomH=0,this.topPanelH=0,this.headerRowH=0,this.footerRowH=0,this.tabbingDirection=1,this.activeCellNode=null,this.currentEditor=null,this.rowsCache={},this.renderedRows=0,this.numVisibleRows=0,this.prevScrollTop=0,this.scrollTop=0,this.lastRenderedScrollTop=0,this.lastRenderedScrollLeft=0,this.prevScrollLeft=0,this.scrollLeft=0,this.selectedRows=[],this.plugins=[],this.cellCssClasses={},this.columnsById={},this.sortColumns=[],this.columnPosLeft=[],this.columnPosRight=[],this.pagingActive=!1,this.pagingIsLastPage=!1,this.h_editorLoader=null,this.h_render=null,this.h_postrenderCleanup=null,this.postProcessedRows={},this.postProcessToRow=null,this.postProcessFromRow=null,this.postProcessedCleanupQueue=[],this.rtl=!1,this.rear="left",this.front="right",this.propScrollRear="scrollLeft",this.postProcessgroupId=0,this.counter_rows_rendered=0,this.counter_rows_removed=0,this.cssShow={position:"absolute",visibility:"hidden",display:"block"},this._hiddenParents=[],this.oldProps=[],this.enforceFrozenRowHeightRecalc=!1,this.columnResizeDragging=!1,this.slickDraggableInstance=null,this.slickMouseWheelInstances=[],this.slickResizableInstances=[],this.logMessageMaxCount=30,this._container="string"==typeof this.container?document.querySelector(this.container):this.container,!this._container)throw new Error(`SlickGrid requires a valid container, ${this.container} does not exist in the DOM.`);this._pubSubService=c,this.onActiveCellChanged=new Dt("onActiveCellChanged",c),this.onActiveCellPositionChanged=new Dt("onActiveCellPositionChanged",c),this.onAddNewRow=new Dt("onAddNewRow",c),this.onAfterSetColumns=new Dt("onAfterSetColumns",c),this.onAutosizeColumns=new Dt("onAutosizeColumns",c),this.onBeforeAppendCell=new Dt("onBeforeAppendCell",c),this.onBeforeCellEditorDestroy=new Dt("onBeforeCellEditorDestroy",c),this.onBeforeColumnsResize=new Dt("onBeforeColumnsResize",c),this.onBeforeDestroy=new Dt("onBeforeDestroy",c),this.onBeforeEditCell=new Dt("onBeforeEditCell",c),this.onBeforeFooterRowCellDestroy=new Dt("onBeforeFooterRowCellDestroy",c),this.onBeforeHeaderCellDestroy=new Dt("onBeforeHeaderCellDestroy",c),this.onBeforeHeaderRowCellDestroy=new Dt("onBeforeHeaderRowCellDestroy",c),this.onBeforeSetColumns=new Dt("onBeforeSetColumns",c),this.onBeforeSort=new Dt("onBeforeSort",c),this.onBeforeUpdateColumns=new Dt("onBeforeUpdateColumns",c),this.onCellChange=new Dt("onCellChange",c),this.onCellEndEdit=new Dt("onCellEndEdit",c),this.onCellCssStylesChanged=new Dt("onCellCssStylesChanged",c),this.onClick=new Dt("onClick",c),this.onColumnsReordered=new Dt("onColumnsReordered",c),this.onColumnsDrag=new Dt("onColumnsDrag",c),this.onColumnsResized=new Dt("onColumnsResized",c),this.onColumnsResizeDblClick=new Dt("onColumnsResizeDblClick",c),this.onCompositeEditorChange=new Dt("onCompositeEditorChange",c),this.onContextMenu=new Dt("onContextMenu",c),this.onDrag=new Dt("onDrag",c),this.onDblClick=new Dt("onDblClick",c),this.onDragInit=new Dt("onDragInit",c),this.onDragStart=new Dt("onDragStart",c),this.onDragEnd=new Dt("onDragEnd",c),this.onFooterClick=new Dt("onFooterClick",c),this.onFooterContextMenu=new Dt("onFooterContextMenu",c),this.onFooterRowCellRendered=new Dt("onFooterRowCellRendered",c),this.onHeaderCellRendered=new Dt("onHeaderCellRendered",c),this.onHeaderClick=new Dt("onHeaderClick",c),this.onHeaderContextMenu=new Dt("onHeaderContextMenu",c),this.onHeaderMouseEnter=new Dt("onHeaderMouseEnter",c),this.onHeaderMouseOver=new Dt("onHeaderMouseOver",c),this.onHeaderMouseOut=new Dt("onHeaderMouseOut",c),this.onHeaderMouseLeave=new Dt("onHeaderMouseLeave",c),this.onHeaderRowMouseOver=new Dt("onHeaderRowMouseOver",c),this.onHeaderRowMouseOut=new Dt("onHeaderRowMouseOut",c),this.onHeaderRowCellRendered=new Dt("onHeaderRowCellRendered",c),this.onHeaderRowMouseEnter=new Dt("onHeaderRowMouseEnter",c),this.onHeaderRowMouseLeave=new Dt("onHeaderRowMouseLeave",c),this.onKeyDown=new Dt("onKeyDown",c),this.onMouseEnter=new Dt("onMouseEnter",c),this.onMouseLeave=new Dt("onMouseLeave",c),this.onPreHeaderClick=new Dt("onPreHeaderClick",c),this.onPreHeaderContextMenu=new Dt("onPreHeaderContextMenu",c),this.onRendered=new Dt("onRendered",c),this.onScroll=new Dt("onScroll",c),this.onSelectedRowsChanged=new Dt("onSelectedRowsChanged",c),this.onSetOptions=new Dt("onSetOptions",c),this.onActivateChangedOptions=new Dt("onActivateChangedOptions",c),this.onSort=new Dt("onSort",c),this.onValidationError=new Dt("onValidationError",c),this.onViewportChanged=new Dt("onViewportChanged",c),this.initialize(l)}init(){this.finishInitialization()}applyHtmlCode(e,i="",o){if(e)if(i instanceof HTMLElement||i instanceof DocumentFragment)!1!==o?.emptyTarget&&(0,w.emptyElement)(e),e.appendChild(i);else{if(!1!==o?.skipEmptyReassignment&&!(0,w.isDefined)(i)&&!e.innerHTML)return;if("number"==typeof i||"boolean"==typeof i)e.textContent=String(i);else{const c=this.sanitizeHtmlString(i);this._options.enableHtmlRendering&&c?e.innerHTML=c:e.textContent=c}}}initialize(e){if(e?.mixinDefaults?(this._options||(this._options=e),Je.applyDefaults(this._options,this._defaults)):this._options=(0,w.extend)(!0,{},this._defaults,e),this.scrollThrottle=this.actionThrottle(this.render.bind(this),this._options.scrollRenderThrottling),this.maxSupportedCssHeight=this.maxSupportedCssHeight||this.getMaxSupportedCssHeight(),this.validateAndEnforceOptions(),this._columnDefaults.width=this._options.defaultColumnWidth,this._options.suppressCssChangesOnHiddenInit||this.cacheCssForHiddenInit(),this.updateColumnProps(),this._options.enableColumnReorder&&(!Oo||!Oo.create))throw new Error("SlickGrid requires Sortable.js module to be loaded");this.editController={commitCurrentEdit:this.commitCurrentEdit.bind(this),cancelCurrentEdit:this.cancelCurrentEdit.bind(this)},(0,w.emptyElement)(this._container),"rtl"==$("body").attr("dir")&&(this.rtl=!0,this.rear="right",this.front="left",this.gotoRight_dir=this.gotoLeft,this.gotoLeft_dir=this.gotoRight,this.getOffsetRear=this.getOffsetRight,this.adjustX=this.adjustXToRight,this._container.classList.add("rtl"),this._container.setAttribute("direction","rtl")),this._container.style.outline=String(0),this._container.classList.add(this.uid),this._container.classList.add("slick-widget"),this._container.setAttribute("role","grid");const i=window.getComputedStyle(this._container);/relative|absolute|fixed/.test(i.position)||(this._container.style.position="relative"),this._focusSink=(0,w.createDomElement)("div",{tabIndex:0,style:{position:"fixed",width:"0px",height:"0px",top:"0px",left:"0px",outline:"0px"}},this._container),this._options.createTopHeaderPanel&&(this._topHeaderPanelScroller=(0,w.createDomElement)("div",{className:"slick-topheader-panel slick-state-default",style:{overflow:"hidden",position:"relative"}},this._container),this._topHeaderPanelScroller.appendChild(document.createElement("div")),this._topHeaderPanel=(0,w.createDomElement)("div",null,this._topHeaderPanelScroller),this._topHeaderPanelSpacer=(0,w.createDomElement)("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._topHeaderPanelScroller),this._options.showTopHeaderPanel||Je.hide(this._topHeaderPanelScroller)),this._paneHeaderL=(0,w.createDomElement)("div",{className:"slick-pane slick-pane-header slick-pane-left",tabIndex:0},this._container),this._paneHeaderR=(0,w.createDomElement)("div",{className:"slick-pane slick-pane-header slick-pane-right",tabIndex:0},this._container),this._paneTopL=(0,w.createDomElement)("div",{className:"slick-pane slick-pane-top slick-pane-left",tabIndex:0},this._container),this._paneTopR=(0,w.createDomElement)("div",{className:"slick-pane slick-pane-top slick-pane-right",tabIndex:0},this._container),this._paneBottomL=(0,w.createDomElement)("div",{className:"slick-pane slick-pane-bottom slick-pane-left",tabIndex:0},this._container),this._paneBottomR=(0,w.createDomElement)("div",{className:"slick-pane slick-pane-bottom slick-pane-right",tabIndex:0},this._container),this._options.createPreHeaderPanel&&(this._preHeaderPanelScroller=(0,w.createDomElement)("div",{className:"slick-preheader-panel slick-state-default",style:{overflow:"hidden",position:"relative"}},this._paneHeaderL),this._preHeaderPanelScroller.appendChild(document.createElement("div")),this._preHeaderPanel=(0,w.createDomElement)("div",null,this._preHeaderPanelScroller),this._preHeaderPanelSpacer=(0,w.createDomElement)("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._preHeaderPanelScroller),this._preHeaderPanelScrollerR=(0,w.createDomElement)("div",{className:"slick-preheader-panel slick-state-default",style:{overflow:"hidden",position:"relative"}},this._paneHeaderR),this._preHeaderPanelR=(0,w.createDomElement)("div",null,this._preHeaderPanelScrollerR),this._preHeaderPanelSpacerR=(0,w.createDomElement)("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._preHeaderPanelScrollerR),this._options.showPreHeaderPanel||(Je.hide(this._preHeaderPanelScroller),Je.hide(this._preHeaderPanelScrollerR))),this._headerScrollerL=(0,w.createDomElement)("div",{className:"slick-header slick-state-default slick-header-left"},this._paneHeaderL),this._headerScrollerR=(0,w.createDomElement)("div",{className:"slick-header slick-state-default slick-header-right"},this._paneHeaderR),this._headerScroller.push(this._headerScrollerL),this._headerScroller.push(this._headerScrollerR),this._headerL=(0,w.createDomElement)("div",{className:"slick-header-columns slick-header-columns-left",style:{left:"-1000px"}},this._headerScrollerL),this._headerR=(0,w.createDomElement)("div",{className:"slick-header-columns slick-header-columns-right",style:{left:"-1000px"}},this._headerScrollerR),this._headers=[this._headerL,this._headerR],this._headerRowScrollerL=(0,w.createDomElement)("div",{className:"slick-headerrow slick-state-default"},this._paneTopL),this._headerRowScrollerR=(0,w.createDomElement)("div",{className:"slick-headerrow slick-state-default"},this._paneTopR),this._headerRowScroller=[this._headerRowScrollerL,this._headerRowScrollerR],this._headerRowSpacerL=(0,w.createDomElement)("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._headerRowScrollerL),this._headerRowSpacerR=(0,w.createDomElement)("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._headerRowScrollerR),this._headerRowL=(0,w.createDomElement)("div",{className:"slick-headerrow-columns slick-headerrow-columns-left"},this._headerRowScrollerL),this._headerRowR=(0,w.createDomElement)("div",{className:"slick-headerrow-columns slick-headerrow-columns-right"},this._headerRowScrollerR),this._headerRows=[this._headerRowL,this._headerRowR],this._topPanelScrollerL=(0,w.createDomElement)("div",{className:"slick-top-panel-scroller slick-state-default"},this._paneTopL),this._topPanelScrollerR=(0,w.createDomElement)("div",{className:"slick-top-panel-scroller slick-state-default"},this._paneTopR),this._topPanelScrollers=[this._topPanelScrollerL,this._topPanelScrollerR],this._topPanelL=(0,w.createDomElement)("div",{className:"slick-top-panel",style:{width:"10000px"}},this._topPanelScrollerL),this._topPanelR=(0,w.createDomElement)("div",{className:"slick-top-panel",style:{width:"10000px"}},this._topPanelScrollerR),this._topPanels=[this._topPanelL,this._topPanelR],this._options.showColumnHeader||this._headerScroller.forEach(o=>{Je.hide(o)}),this._options.showTopPanel||this._topPanelScrollers.forEach(o=>{Je.hide(o)}),this._options.showHeaderRow||this._headerRowScroller.forEach(o=>{Je.hide(o)}),this._viewportTopL=(0,w.createDomElement)("div",{className:"slick-viewport slick-viewport-top slick-viewport-left",tabIndex:0},this._paneTopL),this._viewportTopR=(0,w.createDomElement)("div",{className:"slick-viewport slick-viewport-top slick-viewport-right",tabIndex:0},this._paneTopR),this._viewportBottomL=(0,w.createDomElement)("div",{className:"slick-viewport slick-viewport-bottom slick-viewport-left",tabIndex:0},this._paneBottomL),this._viewportBottomR=(0,w.createDomElement)("div",{className:"slick-viewport slick-viewport-bottom slick-viewport-right",tabIndex:0},this._paneBottomR),this._viewport=[this._viewportTopL,this._viewportTopR,this._viewportBottomL,this._viewportBottomR],this._options.viewportClass&&this._viewport.forEach(o=>{o.classList.add(...(0,w.classNameToList)(this._options.viewportClass))}),this._activeViewportNode=this._viewportTopL,this._canvasTopL=(0,w.createDomElement)("div",{className:"grid-canvas grid-canvas-top grid-canvas-left",tabIndex:0},this._viewportTopL),this._canvasTopR=(0,w.createDomElement)("div",{className:"grid-canvas grid-canvas-top grid-canvas-right",tabIndex:0},this._viewportTopR),this._canvasBottomL=(0,w.createDomElement)("div",{className:"grid-canvas grid-canvas-bottom grid-canvas-left",tabIndex:0},this._viewportBottomL),this._canvasBottomR=(0,w.createDomElement)("div",{className:"grid-canvas grid-canvas-bottom grid-canvas-right",tabIndex:0},this._viewportBottomR),this._canvas=[this._canvasTopL,this._canvasTopR,this._canvasBottomL,this._canvasBottomR],this.scrollbarDimensions=this.scrollbarDimensions||this.measureScrollbar(),this._activeCanvasNode=this._canvasTopL,this._topHeaderPanelSpacer&&Je.width(this._topHeaderPanelSpacer,this.getCanvasWidth()+this.scrollbarDimensions.width),this._preHeaderPanelSpacer&&Je.width(this._preHeaderPanelSpacer,this.getCanvasWidth()+this.scrollbarDimensions.width),this._headers.forEach(o=>{Je.width(o,this.getHeadersWidth())}),Je.width(this._headerRowSpacerL,this.getCanvasWidth()+this.scrollbarDimensions.width),Je.width(this._headerRowSpacerR,this.getCanvasWidth()+this.scrollbarDimensions.width),this._options.createFooterRow&&(this._footerRowScrollerR=(0,w.createDomElement)("div",{className:"slick-footerrow slick-state-default"},this._paneTopR),this._footerRowScrollerL=(0,w.createDomElement)("div",{className:"slick-footerrow slick-state-default"},this._paneTopL),this._footerRowScroller=[this._footerRowScrollerL,this._footerRowScrollerR],this._footerRowSpacerL=(0,w.createDomElement)("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._footerRowScrollerL),Je.width(this._footerRowSpacerL,this.getCanvasWidth()+this.scrollbarDimensions.width),this._footerRowSpacerR=(0,w.createDomElement)("div",{style:{display:"block",height:"1px",position:"absolute",top:"0px",left:"0px"}},this._footerRowScrollerR),Je.width(this._footerRowSpacerR,this.getCanvasWidth()+this.scrollbarDimensions.width),this._footerRowL=(0,w.createDomElement)("div",{className:"slick-footerrow-columns slick-footerrow-columns-left"},this._footerRowScrollerL),this._footerRowR=(0,w.createDomElement)("div",{className:"slick-footerrow-columns slick-footerrow-columns-right"},this._footerRowScrollerR),this._footerRow=[this._footerRowL,this._footerRowR],this._options.showFooterRow||this._footerRowScroller.forEach(o=>{Je.hide(o)})),this._focusSink2=this._focusSink.cloneNode(!0),this._container.appendChild(this._focusSink2),this._options.explicitInitialization||this.finishInitialization()}finishInitialization(){this.initialized||(this.initialized=!0,this.getViewportWidth(),this.getViewportHeight(),this.measureCellPaddingAndBorder(),this.disableSelection(this._headers),this._options.enableTextSelectionOnCells||this._viewport.forEach(e=>{this._bindingEventService.bind(e,"selectstart",i=>{i.target instanceof HTMLInputElement||HTMLTextAreaElement})}),this.updateColumnProps(),this._options.gridId?.startsWith("slkgrdRPT")||this.resizeColumnsManual(),this.setFrozenOptions(),this.setPaneVisibility(),this.setScroller(),this.setOverflow(),this.updateColumnCaches(),this.createColumnHeaders(),this.createColumnFooter(),this.setupColumnSort(),this.createCssRules(),this.resizeCanvas(),this.bindAncestorScrollEvents(),this._bindingEventService.bind(this._container,"resize",this.resizeCanvas.bind(this)),this._viewport.forEach(e=>{this._bindingEventService.bind(e,"scroll",this.handleScroll.bind(this))}),this._options.enableMouseWheelScrollHandler&&this._viewport.forEach(e=>{this.slickMouseWheelInstances.push(ba({element:e,onMouseWheel:this.handleMouseWheel.bind(this)}))}),this._headerScroller.forEach(e=>{this._bindingEventService.bind(e,"contextmenu",this.handleHeaderContextMenu.bind(this)),this._bindingEventService.bind(e,"click",this.handleHeaderClick.bind(this))}),this._headerRowScroller.forEach(e=>{this._bindingEventService.bind(e,"scroll",this.handleHeaderRowScroll.bind(this))}),this._options.createFooterRow&&(this._footerRow.forEach(e=>{this._bindingEventService.bind(e,"contextmenu",this.handleFooterContextMenu.bind(this)),this._bindingEventService.bind(e,"click",this.handleFooterClick.bind(this))}),this._footerRowScroller.forEach(e=>{this._bindingEventService.bind(e,"scroll",this.handleFooterRowScroll.bind(this))})),this._options.createTopHeaderPanel&&this._bindingEventService.bind(this._topHeaderPanelScroller,"scroll",this.handleTopHeaderPanelScroll.bind(this)),this._options.createPreHeaderPanel&&(this._bindingEventService.bind(this._preHeaderPanelScroller,"scroll",this.handlePreHeaderPanelScroll.bind(this)),this._bindingEventService.bind([this._preHeaderPanelScroller,this._preHeaderPanelScrollerR],"contextmenu",this.handlePreHeaderContextMenu.bind(this)),this._bindingEventService.bind([this._preHeaderPanelScroller,this._preHeaderPanelScrollerR],"click",this.handlePreHeaderClick.bind(this))),this._bindingEventService.bind(this._focusSink,"keydown",this.handleKeyDown.bind(this)),this._bindingEventService.bind(this._focusSink2,"keydown",this.handleKeyDown.bind(this)),this._canvas.forEach(e=>{this._bindingEventService.bind(e,"keydown",this.handleKeyDown.bind(this)),this._bindingEventService.bind(e,"click",this.handleClick.bind(this)),this._bindingEventService.bind(e,"dblclick",this.handleDblClick.bind(this)),this._bindingEventService.bind(e,"contextmenu",this.handleContextMenu.bind(this)),this._bindingEventService.bind(e,"mouseover",this.handleCellMouseOver.bind(this)),this._bindingEventService.bind(e,"mouseout",this.handleCellMouseOut.bind(this))}),Oa&&(this.slickDraggableInstance=Oa({containerElement:this._container,allowDragFrom:"div.slick-cell",allowDragFromClosest:"div.slick-cell.dnd, div.slick-cell.cell-reorder",preventDragFromKeys:this._options.preventDragFromKeys,onDragInit:this.handleDragInit.bind(this),onDragStart:this.handleDragStart.bind(this),onDrag:this.handleDrag.bind(this),onDragEnd:this.handleDragEnd.bind(this)})),this._options.suppressCssChangesOnHiddenInit||this.restoreCssFromHiddenInit())}resizeColumnsManual(){let e=this.getColumns().map(i=>i.ColumnWidth).reduce((i,o)=>i+o,0);this.viewportW>e&&this.getColumns&&this.getColumns().length>0&&(this.getColumns()[this.getColumns().length-1].width=this.getColumns()[this.getColumns().length-1]?.ColumnWidth?this.getColumns()[this.getColumns().length-1]?.ColumnWidth:this.viewportW-e+0-20)}cacheCssForHiddenInit(){this._hiddenParents=Je.parents(this._container,":hidden"),this._hiddenParents.forEach(e=>{const i={};Object.keys(this.cssShow).forEach(o=>{this.cssShow&&(i[o]=e.style[o],e.style[o]=this.cssShow[o])}),this.oldProps.push(i)})}restoreCssFromHiddenInit(){let e=0;this._hiddenParents&&this._hiddenParents.forEach(i=>{const o=this.oldProps[e++];Object.keys(this.cssShow).forEach(l=>{this.cssShow&&(i.style[l]=o[l])})})}hasFrozenColumns(){return this._options.frozenColumn>-1}registerPlugin(e){this.plugins.unshift(e),e.init(this)}unregisterPlugin(e){for(let i=this.plugins.length;i>=0;i--)if(this.plugins[i]===e){this.plugins[i]?.destroy(),this.plugins.splice(i,1);break}}getPluginByName(e){for(let i=this.plugins.length-1;i>=0;i--)if(this.plugins[i]?.pluginName===e)return this.plugins[i]}getPubSubService(){return this._pubSubService}setSelectionModel(e){this.selectionModel&&(this.selectionModel.onSelectedRangesChanged.unsubscribe(this.handleSelectedRangesChanged.bind(this)),this.selectionModel.destroy&&this.selectionModel.destroy()),this.selectionModel=e,this.selectionModel&&(this.selectionModel.init(this),this.selectionModel.onSelectedRangesChanged.subscribe(this.handleSelectedRangesChanged.bind(this)))}getSelectionModel(){return this.selectionModel}getCanvasNode(e,i){return this._getContainerElement(this.getCanvases(),e,i)}getActiveCanvasNode(e){return void 0===e||(e instanceof wn&&(e=e.getNativeEvent()),this._activeCanvasNode=e?.target?.closest(".grid-canvas")),this._activeCanvasNode}getCanvases(){return this._canvas}getViewportNode(e,i){return this._getContainerElement(this.getViewports(),e,i)}getViewports(){return this._viewport}getActiveViewportNode(e){return this.setActiveViewportNode(e),this._activeViewportNode}setActiveViewportNode(e){return e instanceof wn&&(e=e.getNativeEvent()),this._activeViewportNode=e?.target?.closest(".slick-viewport"),this._activeViewportNode}_getContainerElement(e,i,o){if(!e)return;i||(i=0),o||(o=0);const l="number"==typeof i?i:this.getColumnIndex(i);return e[(this.hasFrozenRows&&o>=this.actualFrozenRow+(this._options.frozenBottom?0:1)?2:0)+(this.hasFrozenColumns()&&l>this._options.frozenColumn?1:0)]}measureScrollbar(){let e="";this._viewport.forEach(c=>e+=c.className);const i=(0,w.createDomElement)("div",{className:e,style:{position:"absolute",top:"-10000px",left:"-10000px",overflow:"auto",width:"100px",height:"100px"}},document.body),o=(0,w.createDomElement)("div",{style:{width:"200px",height:"200px",overflow:"auto"}},i),l={width:i.offsetWidth-i.clientWidth,height:i.offsetHeight-i.clientHeight};return o.remove(),i.remove(),l}getHeadersWidth(){this.headersWidth=this.headersWidthL=this.headersWidthR=0;const e=!this._options.autoHeight;let i=0;const o=this.columns.length;for(i=0;i<o;i++){if(!this.columns[i]||this.columns[i].hidden)continue;const l=this.columns[i].width;this._options.frozenColumn>-1&&i>this._options.frozenColumn?this.headersWidthR+=l||0:this.headersWidthL+=l||0}return e&&(this._options.frozenColumn>-1&&i>this._options.frozenColumn?this.headersWidthR+=this.scrollbarDimensions?.width||0:this.headersWidthL+=this.scrollbarDimensions?.width||0),this.hasFrozenColumns()?(this.headersWidthL=this.headersWidthL+1e3,this.headersWidthR=Math.max(this.headersWidthR,this.viewportW)+this.headersWidthL,this.headersWidthR+=this.scrollbarDimensions?.width||0):(this.headersWidthL+=this.scrollbarDimensions?.width||0,this.headersWidthL=Math.max(this.headersWidthL,this.viewportW)+1e3),this.headersWidth=this.headersWidthL+this.headersWidthR,Math.max(this.headersWidth,this.viewportW)+1e3}getCanvasWidth(){const e=this.viewportHasVScroll?this.viewportW-(this.scrollbarDimensions?.width||0):this.viewportW;let i=this.columns.length;for(this.canvasWidthL=this.canvasWidthR=0;i--;)!this.columns[i]||this.columns[i].hidden||(this.hasFrozenColumns()&&i>this._options.frozenColumn?this.canvasWidthR+=this.columns[i].width||0:this.canvasWidthL+=this.columns[i].width||0);let o=this.canvasWidthL+this.canvasWidthR;if(this._options.fullWidthRows){const l=Math.max(o,e)-o;l>0&&(o+=l,this.hasFrozenColumns()?this.canvasWidthR+=l:this.canvasWidthL+=l)}return o}updateCanvasWidth(e){const i=this.canvasWidth,o=this.canvasWidthL,l=this.canvasWidthR;this.canvasWidth=this.getCanvasWidth(),this._options.createTopHeaderPanel&&Je.width(this._topHeaderPanel,this._options.topHeaderPanelWidth??this.canvasWidth);const c=this.canvasWidth!==i||this.canvasWidthL!==o||this.canvasWidthR!==l;if(c||this.hasFrozenColumns()||this.hasFrozenRows)if(Je.width(this._canvasTopL,this.canvasWidthL),this.getHeadersWidth(),Je.width(this._headerL,this.headersWidthL),Je.width(this._headerR,this.headersWidthR),this.hasFrozenColumns()){const u=Je.width(this._container)||0;if(u>0&&this.canvasWidthL>u&&this._options.throwWhenFrozenNotAllViewable)throw new Error("[SlickGrid] Frozen columns cannot be wider than the actual grid container width. Make sure to have less columns freezed or make your grid container wider");Je.width(this._canvasTopR,this.canvasWidthR),Je.width(this._paneHeaderL,this.canvasWidthL),Je.setStyleSize(this._paneHeaderR,this.rear,this.canvasWidthL),Je.setStyleSize(this._paneHeaderR,"width",this.viewportW-this.canvasWidthL),Je.width(this._paneTopL,this.canvasWidthL),Je.setStyleSize(this._paneTopR,this.rear,this.canvasWidthL),Je.width(this._paneTopR,this.viewportW-this.canvasWidthL),Je.width(this._headerRowScrollerL,this.canvasWidthL),Je.width(this._headerRowScrollerR,this.viewportW-this.canvasWidthL),Je.width(this._headerRowL,this.canvasWidthL),Je.width(this._headerRowR,this.canvasWidthR),this._options.createFooterRow&&(Je.width(this._footerRowScrollerL,this.canvasWidthL),Je.width(this._footerRowScrollerR,this.viewportW-this.canvasWidthL),Je.width(this._footerRowL,this.canvasWidthL),Je.width(this._footerRowR,this.canvasWidthR)),this._options.createPreHeaderPanel&&Je.width(this._preHeaderPanel,this._options.preHeaderPanelWidth??this.canvasWidth),Je.width(this._viewportTopL,this.canvasWidthL),Je.width(this._viewportTopR,this.viewportW-this.canvasWidthL),this.hasFrozenRows&&(Je.width(this._paneBottomL,this.canvasWidthL),Je.setStyleSize(this._paneBottomR,this.rear,this.canvasWidthL),Je.width(this._viewportBottomL,this.canvasWidthL),Je.width(this._viewportBottomR,this.viewportW-this.canvasWidthL),Je.width(this._canvasBottomL,this.canvasWidthL),Je.width(this._canvasBottomR,this.canvasWidthR))}else Je.width(this._paneHeaderL,"100%"),Je.width(this._paneTopL,"100%"),Je.width(this._headerRowScrollerL,"100%"),Je.width(this._headerRowL,this.canvasWidth),this._options.createFooterRow&&(Je.width(this._footerRowScrollerL,"100%"),Je.width(this._footerRowL,this.canvasWidth)),this._options.createPreHeaderPanel&&Je.width(this._preHeaderPanel,this._options.preHeaderPanelWidth??this.canvasWidth),Je.width(this._viewportTopL,"100%"),this.hasFrozenRows&&(Je.width(this._viewportBottomL,"100%"),Je.width(this._canvasBottomL,this.canvasWidthL));this.viewportHasHScroll=this.canvasWidth>=this.viewportW-(this.scrollbarDimensions?.width||0),Je.width(this._headerRowSpacerL,this.canvasWidth+(this.viewportHasVScroll&&this.scrollbarDimensions?.width||0)),Je.width(this._headerRowSpacerR,this.canvasWidth+(this.viewportHasVScroll&&this.scrollbarDimensions?.width||0)),this._options.createFooterRow&&(Je.width(this._footerRowSpacerL,this.canvasWidth+(this.viewportHasVScroll&&this.scrollbarDimensions?.width||0)),Je.width(this._footerRowSpacerR,this.canvasWidth+(this.viewportHasVScroll&&this.scrollbarDimensions?.width||0))),(c||e)&&this.applyColumnWidths()}disableSelection(e){e.forEach(i=>{i.setAttribute("unselectable","on"),i.style.mozUserSelect="none",this._bindingEventService.bind(i,"selectstart",()=>!1)})}getMaxSupportedCssHeight(){let e=1e6;const i=navigator.userAgent.toLowerCase().match(/firefox/)?this._options.ffMaxSupportedCssHeight:this._options.maxSupportedCssHeight,o=(0,w.createDomElement)("div",{style:{display:"hidden"}},document.body);let l=!0;for(;l;){const c=2*e;Je.height(o,c);const u=Je.height(o);if(c>i||u!==c){l=!1;break}e=c}return o.remove(),e}getUID(){return this.uid}getHeaderColumnWidthDiff(){return this.headerColumnWidthDiff}getScrollbarDimensions(){return this.scrollbarDimensions}getDisplayedScrollbarDimensions(){return{width:this.viewportHasVScroll&&this.scrollbarDimensions?.width||0,height:this.viewportHasHScroll&&this.scrollbarDimensions?.height||0}}getAbsoluteColumnMinWidth(){return this.absoluteColumnMinWidth}bindAncestorScrollEvents(){let e=this.hasFrozenRows&&!this._options.frozenBottom?this._canvasBottomL:this._canvasTopL;for(;(e=e.parentNode)!==document.body&&e;)(e===this._viewportTopL||e.scrollWidth!==e.clientWidth||e.scrollHeight!==e.clientHeight)&&(this._boundAncestors.push(e),this._bindingEventService.bind(e,"scroll",this.handleActiveCellPositionChange.bind(this)))}unbindAncestorScrollEvents(){this._boundAncestors.forEach(e=>{this._bindingEventService.unbindByEventName(e,"scroll")}),this._boundAncestors=[]}updateColumnHeader(e,i,o){if(this.initialized){const l=this.getColumnIndex(e);if(!(0,w.isDefined)(l))return;const c=this.columns[l],u=this.getColumnByIndex(l);return u&&(void 0!==i&&(this.columns[l].name=i),void 0!==o&&(this.columns[l].toolTip=o),this.triggerEvent(this.onBeforeHeaderCellDestroy,{node:u,column:c,grid:this}),u.setAttribute("title",o||""),void 0!==i&&this.applyHtmlCode(u.children[0],i),this.triggerEvent(this.onHeaderCellRendered,{node:u,column:c,grid:this})),u}}getHeader(e){if(!e)return this.hasFrozenColumns()?this._headers:this._headerL;const i=this.getColumnIndex(e.id);return this.hasFrozenColumns()?i<=this._options.frozenColumn?this._headerL:this._headerR:this._headerL}getHeaderColumn(e){const i="number"==typeof e?e:this.getColumnIndex(e),o=this.hasFrozenColumns()?i<=this._options.frozenColumn?this._headerL:this._headerR:this._headerL,l=this.hasFrozenColumns()?i<=this._options.frozenColumn?i:i-this._options.frozenColumn-1:i;return o.children[l]}getHeaderRow(){return this.hasFrozenColumns()?this._headerRows:this._headerRows?.[0]}getFooterRow(){return this.hasFrozenColumns()?this._footerRow:this._footerRow?.[0]}getPreHeaderPanel(){return this._preHeaderPanel}getPreHeaderPanelLeft(){return this._preHeaderPanel}getPreHeaderPanelRight(){return this._preHeaderPanelR}getTopHeaderPanel(){return this._topHeaderPanel}getHeaderRowColumn(e){let o,i="number"==typeof e?e:this.getColumnIndex(e);return this.hasFrozenColumns()?i<=this._options.frozenColumn?o=this._headerRowL:(o=this._headerRowR,i-=this._options.frozenColumn+1):o=this._headerRowL,o.children[i]}getFooterRowColumn(e){let o,i="number"==typeof e?e:this.getColumnIndex(e);return this.hasFrozenColumns()?i<=this._options.frozenColumn?o=this._footerRowL:(o=this._footerRowR,i-=this._options.frozenColumn+1):o=this._footerRowL,o?.children[i]}createColumnFooter(){if(this._options.createFooterRow){this._footerRow.forEach(e=>{e.querySelectorAll(".slick-footerrow-column").forEach(o=>{const l=Je.storage.get(o,"column");this.triggerEvent(this.onBeforeFooterRowCellDestroy,{node:o,column:l,grid:this})})}),(0,w.emptyElement)(this._footerRowL),(0,w.emptyElement)(this._footerRowR);for(let e=0;e<this.columns.length;e++){const i=this.columns[e];if(!i||i.hidden)continue;const o=(0,w.createDomElement)("div",{className:`slick-state-default slick-footerrow-column l${e} r${e}`},this.hasFrozenColumns()&&e>this._options.frozenColumn?this._footerRowR:this._footerRowL),l=this.hasFrozenColumns()&&e<=this._options.frozenColumn?"frozen":null;l&&o.classList.add(l),Je.storage.put(o,"column",i),this.triggerEvent(this.onFooterRowCellRendered,{node:o,column:i,grid:this})}}}handleHeaderMouseHoverOn(e){e?.target.classList.add("slick-state-hover")}handleHeaderMouseHoverOff(e){e?.target.classList.remove("slick-state-hover")}createColumnHeaders(){this._headers.forEach(e=>{e.querySelectorAll(".slick-header-column").forEach(o=>{const l=Je.storage.get(o,"column");l&&this.triggerEvent(this.onBeforeHeaderCellDestroy,{node:o,column:l,grid:this})})}),(0,w.emptyElement)(this._headerL),(0,w.emptyElement)(this._headerR),this.getHeadersWidth(),Je.width(this._headerL,this.headersWidthL),Je.width(this._headerR,this.headersWidthR),this._headerRows.forEach(e=>{e.querySelectorAll(".slick-headerrow-column").forEach(o=>{const l=Je.storage.get(o,"column");l&&this.triggerEvent(this.onBeforeHeaderRowCellDestroy,{node:this,column:l,grid:this})})}),(0,w.emptyElement)(this._headerRowL),(0,w.emptyElement)(this._headerRowR),this._options.createFooterRow&&(this._footerRowL.querySelectorAll(".slick-footerrow-column").forEach(i=>{const o=Je.storage.get(i,"column");o&&this.triggerEvent(this.onBeforeFooterRowCellDestroy,{node:this,column:o,grid:this})}),(0,w.emptyElement)(this._footerRowL),this.hasFrozenColumns()&&(this._footerRowR.querySelectorAll(".slick-footerrow-column").forEach(o=>{const l=Je.storage.get(o,"column");l&&this.triggerEvent(this.onBeforeFooterRowCellDestroy,{node:this,column:l,grid:this})}),(0,w.emptyElement)(this._footerRowR)));for(let e=0;e<this.columns.length;e++){const i=this.columns[e];if(!i||i.hidden)continue;const o=this.hasFrozenColumns()?e<=this._options.frozenColumn?this._headerL:this._headerR:this._headerL,l=this.hasFrozenColumns()?e<=this._options.frozenColumn?this._headerRowL:this._headerRowR:this._headerRowL,c=(0,w.createDomElement)("div",{id:`${this.uid+i.id}`,dataset:{id:String(i.id)},role:"columnheader",className:"slick-state-default slick-header-column"},o);i.toolTip&&(c.title=i.toolTip),i.reorderable||c.classList.add(this._options.unorderableColumnCssClass);const u=(0,w.createDomElement)("span",{className:"slick-column-name"},c);this.applyHtmlCode(u,i.name),Je.width(c,i.width-this.headerColumnWidthDiff);let g=i.headerCssClass||null;if(g&&c.classList.add(...(0,w.classNameToList)(g)),g=this.hasFrozenColumns()&&e<=this._options.frozenColumn?"frozen":null,g&&c.classList.add(g),this._bindingEventService.bind(c,"mouseenter",this.handleHeaderMouseEnter.bind(this)),this._bindingEventService.bind(c,"mouseleave",this.handleHeaderMouseLeave.bind(this)),this._bindingEventService.bind(c,"mouseover",this.handleHeaderMouseOver.bind(this)),this._bindingEventService.bind(c,"mouseout",this.handleHeaderMouseOut.bind(this)),Je.storage.put(c,"column",i),(this._options.enableColumnReorder||i.sortable)&&(this._bindingEventService.bind(c,"mouseenter",this.handleHeaderMouseHoverOn.bind(this)),this._bindingEventService.bind(c,"mouseleave",this.handleHeaderMouseHoverOff.bind(this))),i.hasOwnProperty("headerCellAttrs")&&i.headerCellAttrs instanceof Object&&Object.keys(i.headerCellAttrs).forEach(y=>{i.headerCellAttrs.hasOwnProperty(y)&&c.setAttribute(y,i.headerCellAttrs[y])}),i.sortable&&(c.classList.add("slick-header-sortable"),(0,w.createDomElement)("div",{className:"slick-sort-indicator "+(this._options.numberedMultiColumnSort&&!this._options.sortColNumberInSeparateSpan?" slick-sort-indicator-numbered":"")},c),this._options.numberedMultiColumnSort&&this._options.sortColNumberInSeparateSpan&&(0,w.createDomElement)("div",{className:"slick-sort-indicator-numbered"},c)),this.triggerEvent(this.onHeaderCellRendered,{node:c,column:i,grid:this}),this._options.showHeaderRow){const y=(0,w.createDomElement)("div",{className:`slick-state-default slick-headerrow-column l${e} r${e}`},l),M=this.hasFrozenColumns()&&e<=this._options.frozenColumn?"frozen":null;M&&y.classList.add(M),this._bindingEventService.bind(y,"mouseenter",this.handleHeaderRowMouseEnter.bind(this)),this._bindingEventService.bind(y,"mouseleave",this.handleHeaderRowMouseLeave.bind(this)),this._bindingEventService.bind(y,"mouseover",this.handleHeaderRowMouseOver.bind(this)),this._bindingEventService.bind(y,"mouseout",this.handleHeaderRowMouseOut.bind(this)),Je.storage.put(y,"column",i),this.triggerEvent(this.onHeaderRowCellRendered,{node:y,column:i,grid:this})}if(this._options.createFooterRow&&this._options.showFooterRow){const y=this.hasFrozenColumns()?e<=this._options.frozenColumn?this._footerRow[0]:this._footerRow[1]:this._footerRow[0],M=(0,w.createDomElement)("div",{className:`slick-state-default slick-footerrow-column l${e} r${e}`},y);Je.storage.put(M,"column",i),this.triggerEvent(this.onFooterRowCellRendered,{node:M,column:i,grid:this})}}this.setSortColumns(this.sortColumns),this.setupColumnResize(),this._options.enableColumnReorder&&("function"==typeof this._options.enableColumnReorder?this._options.enableColumnReorder(this,this._headers,this.headerColumnWidthDiff,this.setColumns,this.setupColumnResize,this.columns,this.getColumnIndex,this.uid,this.triggerEvent):this.setupColumnReorder())}setupColumnSort(){this._headers.forEach(e=>{this._bindingEventService.bind(e,"click",i=>{if(this.columnResizeDragging||i.target.classList.contains("slick-resizable-handle"))return;const o=i.target.closest(".slick-header-column");if(!o)return;const l=Je.storage.get(o,"column");if(l?.sortable){if(!this.getEditorLock()?.commitCurrentEdit())return;const c=this.sortColumns.slice();let u=null,g=0;for(;g<this.sortColumns.length;g++)if(this.sortColumns[g].columnId===l.id){u=this.sortColumns[g],u.sortAsc=!u.sortAsc;break}const y=!!u;let M;this._options.tristateMultiColumnSort?(u||(u={columnId:l.id,sortAsc:l.defaultSortAsc,sortCol:l}),y&&u.sortAsc&&(this.sortColumns.splice(g,1),u=null),this._options.multiColumnSort||(this.sortColumns=[]),u&&(!y||!this._options.multiColumnSort)&&this.sortColumns.push(u)):i.metaKey&&this._options.multiColumnSort?u&&this.sortColumns.splice(g,1):((!i.shiftKey&&!i.metaKey||!this._options.multiColumnSort)&&(this.sortColumns=[]),u?0===this.sortColumns.length&&this.sortColumns.push(u):(u={columnId:l.id,sortAsc:l.defaultSortAsc,sortCol:l},this.sortColumns.push(u))),M=this._options.multiColumnSort?{multiColumnSort:!0,previousSortColumns:c,sortCols:this.sortColumns.map(V=>{const te=this.columns[this.getColumnIndex(V.columnId)];return!te||te.hidden?null:{columnId:te.id,sortCol:te,sortAsc:V.sortAsc}}).filter(V=>V)}:{multiColumnSort:!1,previousSortColumns:c,columnId:this.sortColumns.length>0?l.id:null,sortCol:this.sortColumns.length>0?l:null,sortAsc:!(this.sortColumns.length>0)||this.sortColumns[0].sortAsc},!1!==this.triggerEvent(this.onBeforeSort,M,i).getReturnValue()&&(this.setSortColumns(this.sortColumns),this.triggerEvent(this.onSort,M,i))}})})}setupColumnReorder(){this.sortableSideLeftInstance?.destroy(),this.sortableSideRightInstance?.destroy();let e=null;const i=()=>this._viewportScrollContainerX.scrollLeft+=10,o=()=>this._viewportScrollContainerX.scrollLeft-=10;let l=!1;const c={animation:50,direction:"horizontal",chosenClass:"slick-header-column-active",ghostClass:"slick-sortable-placeholder",draggable:".slick-header-column",dragoverBubble:!1,revertClone:!0,scroll:!this.hasFrozenColumns(),filter:`.${this._options.unorderableColumnCssClass}`,onMove:u=>!u.related.classList.contains(this._options.unorderableColumnCssClass),onStart:u=>{l=!this.hasFrozenColumns()||(0,w.getOffset)(u.item).left>(0,w.getOffset)(this._viewportScrollContainerX).left,l&&u.originalEvent.pageX>this._container.clientWidth?e||(e=setInterval(i,100)):l&&u.originalEvent.pageX<(0,w.getOffset)(this._viewportScrollContainerX).left?e||(e=setInterval(o,100)):(clearInterval(e),e=null)},onEnd:u=>{if(clearInterval(e),e=null,!this.getEditorLock()?.commitCurrentEdit())return;let g=this.sortableSideLeftInstance?.toArray()??[];g=g.concat(this.sortableSideRightInstance?.toArray()??[]);const y=[];for(let M=0;M<g.length;M++)y.push(this.columns[this.getColumnIndex(g[M])]);this.setColumns(y),this.triggerEvent(this.onColumnsReordered,{impactedColumns:this.columns}),u.stopPropagation(),this.setupColumnResize(),this.activeCellNode&&this.setFocus()}};this.sortableSideLeftInstance=Oo.create(this._headerL,c),this.sortableSideRightInstance=Oo.create(this._headerR,c)}getHeaderChildren(){const e=Array.from(this._headers[0].children),i=Array.from(this._headers[1].children);return e.concat(i)}handleResizeableDoubleClick(e){const i=e.target.parentElement.id.replace(this.uid,"");this.triggerEvent(this.onColumnsResizeDblClick,{triggeredByColumn:i})}setupColumnResize(){let e,i,o,l,c,u,g,y=-1,M=0;const V=this.getHeaderChildren(),te=this.getVisibleColumns();for(let ve=0;ve<V.length;ve++)V[ve].querySelectorAll(".slick-resizable-handle").forEach(Ye=>Ye.remove()),ve<te.length&&te[ve]?.resizable&&(void 0===g&&(g=ve),y=ve);if(void 0!==g)for(let ve=0;ve<V.length;ve++){const Ae=V[ve];if(ve>=te.length||!te[ve]||ve<g||this._options.forceFitColumns&&ve>=y)continue;const ze=(0,w.createDomElement)("div",{className:"slick-resizable-handle",role:"separator",ariaOrientation:"horizontal"},Ae);this._bindingEventService.bind(ze,"dblclick",this.handleResizeableDoubleClick.bind(this)),this.slickResizableInstances.push(Zr({resizeableElement:Ae,resizeableHandleElement:ze,onResizeStart:(Ye,nt)=>{const et=Ye.touches?Ye.changedTouches[0]:Ye;if(!this.getEditorLock()?.commitCurrentEdit())return!1;l=et.pageX,M=0,nt.resizeableElement.classList.add("slick-header-column-active");let Ot=null,gt=null;for(let Nt=0;Nt<V.length;Nt++)Nt<te.length&&te[Nt]&&(te[Nt].previousWidth=V[Nt].offsetWidth);if(this._options.forceFitColumns)for(Ot=0,gt=0,e=ve+1;e<te.length;e++)o=te[e],o?.resizable&&(null!==gt&&(o.maxWidth?gt+=o.maxWidth-(o.previousWidth||0):gt=null),Ot+=(o.previousWidth||0)-Math.max(o.minWidth||0,this.absoluteColumnMinWidth));let rt=0,At=0;for(e=0;e<=ve;e++)o=te[e],o?.resizable&&(null!==At&&(o.maxWidth?At+=o.maxWidth-(o.previousWidth||0):At=null),rt+=(o.previousWidth||0)-Math.max(o.minWidth||0,this.absoluteColumnMinWidth));null===Ot&&(Ot=1e5),null===rt&&(rt=1e5),null===gt&&(gt=1e5),null===At&&(At=1e5),u=l+Math.min(Ot,At),c=l-Math.min(rt,gt)},onResize:(Ye,nt)=>{const et=Ye.touches?Ye.changedTouches[0]:Ye;let Ot;this.columnResizeDragging=!0;const gt=Math.min(u,Math.max(c,et.pageX))-l;let rt,At=0,Nt=0;const ln=this.viewportHasVScroll?this.viewportW-(this.scrollbarDimensions?.width||0):this.viewportW;if(gt<0){for(rt=gt,e=ve;e>=0;e--)o=te[e],o&&o.resizable&&!o.hidden&&(Ot=Math.max(o.minWidth||0,this.absoluteColumnMinWidth),rt&&(o.previousWidth||0)+rt<Ot?(rt+=(o.previousWidth||0)-Ot,o.width=Ot):(o.width=(o.previousWidth||0)+rt,rt=0));for(i=0;i<=ve;i++)o=te[i],o&&!o.hidden&&(this.hasFrozenColumns()&&i>this._options.frozenColumn?Nt+=o.width||0:At+=o.width||0);if(this._options.forceFitColumns)for(rt=-gt,e=ve+1;e<te.length;e++)o=te[e],o&&!o.hidden&&o.resizable&&(rt&&o.maxWidth&&o.maxWidth-(o.previousWidth||0)<rt?(rt-=o.maxWidth-(o.previousWidth||0),o.width=o.maxWidth):(o.width=(o.previousWidth||0)+rt,rt=0),this.hasFrozenColumns()&&e>this._options.frozenColumn?Nt+=o.width||0:At+=o.width||0);else for(e=ve+1;e<te.length;e++)o=te[e],o&&!o.hidden&&(this.hasFrozenColumns()&&e>this._options.frozenColumn?Nt+=o.width||0:At+=o.width||0);if(this._options.forceFitColumns)for(rt=-gt,e=ve+1;e<te.length;e++)o=te[e],o&&!o.hidden&&o.resizable&&(rt&&o.maxWidth&&o.maxWidth-(o.previousWidth||0)<rt?(rt-=o.maxWidth-(o.previousWidth||0),o.width=o.maxWidth):(o.width=(o.previousWidth||0)+rt,rt=0))}else{for(rt=gt,At=0,Nt=0,e=ve;e>=0;e--)if(o=te[e],o&&!o.hidden&&o.resizable)if(rt&&o.maxWidth&&o.maxWidth-(o.previousWidth||0)<rt)rt-=o.maxWidth-(o.previousWidth||0),o.width=o.maxWidth;else{const kt=(o.previousWidth||0)+rt,un=this.canvasWidthL+rt;this.hasFrozenColumns()&&e<=this._options.frozenColumn?(kt>M&&un<ln-this._options.frozenRightViewportMinWidth&&(M=kt),o.width=un+this._options.frozenRightViewportMinWidth>ln?M:kt):o.width=kt,rt=0}for(i=0;i<=ve;i++)o=te[i],o&&!o.hidden&&(this.hasFrozenColumns()&&i>this._options.frozenColumn?Nt+=o.width||0:At+=o.width||0);if(this._options.forceFitColumns)for(rt=-gt,e=ve+1;e<te.length;e++)o=te[e],o&&!o.hidden&&o.resizable&&(Ot=Math.max(o.minWidth||0,this.absoluteColumnMinWidth),rt&&(o.previousWidth||0)+rt<Ot?(rt+=(o.previousWidth||0)-Ot,o.width=Ot):(o.width=(o.previousWidth||0)+rt,rt=0),this.hasFrozenColumns()&&e>this._options.frozenColumn?Nt+=o.width||0:At+=o.width||0);else for(e=ve+1;e<te.length;e++)o=te[e],o&&!o.hidden&&(this.hasFrozenColumns()&&e>this._options.frozenColumn?Nt+=o.width||0:At+=o.width||0)}this.hasFrozenColumns()&&At!==this.canvasWidthL&&(Je.width(this._headerL,At+1e3),Je.setStyleSize(this._paneHeaderR,this.rear,this.canvasWidthL)),this.applyColumnHeaderWidths(),this._options.syncColumnCellResize&&this.applyColumnWidths(),this.triggerEvent(this.onColumnsDrag,{triggeredByColumn:nt.resizeableElement,resizeHandle:nt.resizeableHandleElement})},onResizeEnd:(Ye,nt)=>{nt.resizeableElement.classList.remove("slick-header-column-active");const et=nt.resizeableElement.id.replace(this.uid,"");let Ot;for(!0===this.triggerEvent(this.onBeforeColumnsResize,{triggeredByColumn:et}).getReturnValue()&&this.applyColumnHeaderWidths(),e=0;e<te.length;e++)o=te[e],o&&!o.hidden&&V[e]&&(Ot=V[e].offsetWidth,o.previousWidth!==Ot&&o.rerenderOnResize&&this.invalidateAllRows());this.updateCanvasWidth(!0),this.render(),this.triggerEvent(this.onColumnsResized,{triggeredByColumn:et}),clearTimeout(this._columnResizeTimer),this._columnResizeTimer=setTimeout(()=>this.columnResizeDragging=!1,this._options.columnResizingDelay)}}))}}getVBoxDelta(e){const o=getComputedStyle(e);let l=0;return["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"].forEach(c=>l+=Je.toFloat(o[c])),l}setFrozenOptions(){if(this._options.frozenColumn=this._options.frozenColumn>=0&&this._options.frozenColumn<this.columns.length?parseInt(this._options.frozenColumn,10):-1,this._options.frozenRow>-1){this.hasFrozenRows=!0,this.frozenRowsHeight=this._options.frozenRow*this._options.rowHeight;const e=this.getDataLength();this.actualFrozenRow=this._options.frozenBottom?e-this._options.frozenRow:this._options.frozenRow}else this.hasFrozenRows=!1}setPaneVisibility(){this.hasFrozenColumns()?(Je.show(this._paneHeaderR),Je.show(this._paneTopR),this.hasFrozenRows?(Je.show(this._paneBottomL),Je.show(this._paneBottomR)):(Je.hide(this._paneBottomR),Je.hide(this._paneBottomL))):(Je.hide(this._paneHeaderR),Je.hide(this._paneTopR),Je.hide(this._paneBottomR),this.hasFrozenRows?Je.show(this._paneBottomL):(Je.hide(this._paneBottomR),Je.hide(this._paneBottomL)))}setOverflow(){if(this._viewportTopL.style.overflowX=this.hasFrozenColumns()?this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"scroll":this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"auto",this._viewportTopL.style.overflowY=!this.hasFrozenColumns()&&this._options.alwaysShowVerticalScroll?"scroll":this.hasFrozenColumns()?"hidden":this.hasFrozenRows?"scroll":"auto",this._viewportTopR.style.overflowX=this.hasFrozenColumns()?this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"scroll":this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"hidden":"auto",this._viewportTopR.style.overflowY=this._options.alwaysShowVerticalScroll?"scroll":(this.hasFrozenColumns(),this.hasFrozenRows?"scroll":"auto"),this._viewportBottomL.style.overflowX=this.hasFrozenColumns()&&this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"scroll":"auto",this._viewportBottomL.style.overflowY=!this.hasFrozenColumns()&&this._options.alwaysShowVerticalScroll?"scroll":this.hasFrozenColumns()?"hidden":this.hasFrozenRows?"scroll":"auto",this._viewportBottomR.style.overflowX=this.hasFrozenColumns()&&this.hasFrozenRows&&!this._options.alwaysAllowHorizontalScroll?"scroll":"auto",this._viewportBottomR.style.overflowY=this._options.alwaysShowVerticalScroll?"scroll":(this.hasFrozenColumns(),"auto"),this._options.viewportClass){const e=(0,w.classNameToList)(this._options.viewportClass);this._viewportTopL.classList.add(...e),this._viewportTopR.classList.add(...e),this._viewportBottomL.classList.add(...e),this._viewportBottomR.classList.add(...e)}}setScroller(){this.hasFrozenColumns()?(this._headerScrollContainer=this._headerScrollerR,this._headerRowScrollContainer=this._headerRowScrollerR,this._footerRowScrollContainer=this._footerRowScrollerR,this.hasFrozenRows?this._options.frozenBottom?(this._viewportScrollContainerX=this._viewportBottomR,this._viewportScrollContainerY=this._viewportTopR):this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportBottomR:this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportTopR):(this._headerScrollContainer=this._headerScrollerL,this._headerRowScrollContainer=this._headerRowScrollerL,this._footerRowScrollContainer=this._footerRowScrollerL,this.hasFrozenRows?this._options.frozenBottom?(this._viewportScrollContainerX=this._viewportBottomL,this._viewportScrollContainerY=this._viewportTopL):this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportBottomL:this._viewportScrollContainerX=this._viewportScrollContainerY=this._viewportTopL)}measureCellPaddingAndBorder(){const e=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],i=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],o=this._headers[0];this.headerColumnWidthDiff=this.headerColumnHeightDiff=0,this.cellWidthDiff=this.cellHeightDiff=0;let l=(0,w.createDomElement)("div",{className:"slick-state-default slick-header-column",style:{visibility:"hidden"},textContent:"-"},o),c=getComputedStyle(l);"border-box"!==c.boxSizing&&(e.forEach(g=>this.headerColumnWidthDiff+=Je.toFloat(c[g])),i.forEach(g=>this.headerColumnHeightDiff+=Je.toFloat(c[g]))),l.remove();const u=(0,w.createDomElement)("div",{className:"slick-row"},this._canvas[0]);l=(0,w.createDomElement)("div",{className:"slick-cell",id:"",style:{visibility:"hidden"},textContent:"-"},u),c=getComputedStyle(l),"border-box"!==c.boxSizing&&(e.forEach(g=>this.cellWidthDiff+=Je.toFloat(c[g])),i.forEach(g=>this.cellHeightDiff+=Je.toFloat(c[g]))),u.remove(),this.absoluteColumnMinWidth=Math.max(this.headerColumnWidthDiff,this.cellWidthDiff)}createCssRules(){this._style=document.createElement("style"),this._style.nonce=this._options.nonce||"",(this._options.shadowRoot||document.head).appendChild(this._style);const i=[`.${this.uid} .slick-group-header-column { ${this.rear}: 1000px; }`,`.${this.uid} .slick-header-column { ${this.rear}: 1000px; }`,`.${this.uid} .slick-top-panel { height: ${this._options.topPanelHeight}px; }`,`.${this.uid} .slick-preheader-panel { height: ${this._options.preHeaderPanelHeight}px; }`,`.${this.uid} .slick-topheader-panel { height: ${this._options.topHeaderPanelHeight}px; }`,`.${this.uid} .slick-headerrow-columns { height: ${this._options.headerRowHeight}px; }`,`.${this.uid} .slick-footerrow-columns { height: ${this._options.footerRowHeight}px; }`,`.${this.uid} .slick-cell { height: ${this._options.rowHeight-this.cellHeightDiff}px; }`,`.${this.uid} .slick-row { height: ${this._options.rowHeight}px; }`],o=this._style.sheet;if(o){i.forEach(l=>{o.insertRule(l)});for(let l=0;l<this.columns.length;l++)!this.columns[l]||this.columns[l].hidden||(o.insertRule(`.${this.uid} .l${l} { }`),o.insertRule(`.${this.uid} .r${l} { }`))}else this.createCssRulesAlternative(i)}createCssRulesAlternative(e){const i=document.createElement("template");i.innerHTML='<style type="text/css" rel="stylesheet" />',this._style=i.content.firstChild,(this._options.shadowRoot||document.head).appendChild(this._style);for(let o=0;o<this.columns.length;o++)!this.columns[o]||this.columns[o].hidden||(e.push(`.${this.uid} .l${o} { }`),e.push(`.${this.uid} .r${o} { }`));this._style.styleSheet?this._style.styleSheet.cssText=e.join(" "):this._style.appendChild(document.createTextNode(e.join(" ")))}getColumnCssRules(e){let i;if(!this.stylesheet){const o=(this._options.shadowRoot||document).styleSheets;for(this._options.devMode&&"number"==typeof this._options.devMode.ownerNodeIndex&&this._options.devMode.ownerNodeIndex>=0&&(o[this._options.devMode.ownerNodeIndex].ownerNode=this._style),i=0;i<o.length;i++){const g=o[i];if((g.ownerNode||g.owningElement)===this._style){this.stylesheet=g;break}}if(!this.stylesheet)throw new Error("SlickGrid Cannot find stylesheet.");this.columnCssRulesL=[],this.columnCssRulesR=[];const l=this.stylesheet.cssRules||this.stylesheet.rules;let c,u;for(i=0;i<l.length;i++){const g=l[i].selectorText;(c=/\.l\d+/.exec(g))?(u=parseInt(c[0].substr(2,c[0].length-2),10),this.columnCssRulesL[u]=l[i]):(c=/\.r\d+/.exec(g))&&(u=parseInt(c[0].substr(2,c[0].length-2),10),this.columnCssRulesR[u]=l[i])}}return{left:this.columnCssRulesL[e],right:this.columnCssRulesR[e]}}removeCssRules(){this._style?.remove(),this.stylesheet=null}clearAllTimers(){clearTimeout(this._columnResizeTimer),clearTimeout(this._executionBlockTimer),clearTimeout(this._flashCellTimer),clearTimeout(this._highlightRowTimer),clearTimeout(this.h_editorLoader)}destroy(e){this._bindingEventService.unbindAll(),this.slickDraggableInstance=this.destroyAllInstances(this.slickDraggableInstance),this.slickMouseWheelInstances=this.destroyAllInstances(this.slickMouseWheelInstances),this.slickResizableInstances=this.destroyAllInstances(this.slickResizableInstances),this.getEditorLock()?.cancelCurrentEdit(),this.triggerEvent(this.onBeforeDestroy,{});let i=this.plugins.length;for(;i--;)this.unregisterPlugin(this.plugins[i]);this._options.enableColumnReorder&&"function"==typeof this.sortableSideLeftInstance?.destroy&&"function"==typeof this.sortableSideRightInstance?.destroy&&(this.sortableSideLeftInstance.destroy(),this.sortableSideRightInstance.destroy()),this.unbindAncestorScrollEvents(),this._bindingEventService.unbindByEventName(this._container,"resize"),this.removeCssRules(),this._canvas.forEach(c=>{this._bindingEventService.unbindByEventName(c,"keydown"),this._bindingEventService.unbindByEventName(c,"click"),this._bindingEventService.unbindByEventName(c,"dblclick"),this._bindingEventService.unbindByEventName(c,"contextmenu"),this._bindingEventService.unbindByEventName(c,"mouseover"),this._bindingEventService.unbindByEventName(c,"mouseout")}),this._viewport.forEach(c=>{this._bindingEventService.unbindByEventName(c,"scroll")}),this._headerScroller.forEach(c=>{this._bindingEventService.unbindByEventName(c,"contextmenu"),this._bindingEventService.unbindByEventName(c,"click")}),this._headerRowScroller.forEach(c=>{this._bindingEventService.unbindByEventName(c,"scroll")}),this._footerRow&&this._footerRow.forEach(c=>{this._bindingEventService.unbindByEventName(c,"contextmenu"),this._bindingEventService.unbindByEventName(c,"click")}),this._footerRowScroller&&this._footerRowScroller.forEach(c=>{this._bindingEventService.unbindByEventName(c,"scroll")}),this._preHeaderPanelScroller&&this._bindingEventService.unbindByEventName(this._preHeaderPanelScroller,"scroll"),this._topHeaderPanelScroller&&this._bindingEventService.unbindByEventName(this._topHeaderPanelScroller,"scroll"),this._bindingEventService.unbindByEventName(this._focusSink,"keydown"),this._bindingEventService.unbindByEventName(this._focusSink2,"keydown");const o=this._container.querySelectorAll(".slick-resizable-handle");[].forEach.call(o,c=>{this._bindingEventService.unbindByEventName(c,"dblclick")});const l=this._container.querySelectorAll(".slick-header-column");[].forEach.call(l,c=>{this._bindingEventService.unbindByEventName(c,"mouseenter"),this._bindingEventService.unbindByEventName(c,"mouseleave"),this._bindingEventService.unbindByEventName(c,"mouseover"),this._bindingEventService.unbindByEventName(c,"mouseout")}),(0,w.emptyElement)(this._container),this._container.classList.remove(this.uid),this.clearAllTimers(),e&&(0,w.destroyAllElementProps)(this)}destroyAllInstances(e){if(e){const i=Array.isArray(e)?e:[e];let o;for(;(0,w.isDefined)(o=i.pop());)o&&"function"==typeof o.destroy&&o.destroy()}return Array.isArray(e)?[]:null}autosizeColumns(){this.legacyAutosizeColumns()}legacyAutosizeColumns(){let e,i,o=0,l=0,c=0;const u=[],g=this.viewportHasVScroll?this.viewportW-(this.scrollbarDimensions?.width||0):this.viewportW;for(e=0;e<this.columns.length;e++)i=this.columns[e],i&&!i.hidden?(u.push(i.width||0),l+=i.width||0,i.resizable&&(o+=(i.width||0)-Math.max(i.minWidth||0,this.absoluteColumnMinWidth))):u.push(0);for(c=l;l>g&&o;){const M=(l-g)/o;for(e=0;e<this.columns.length&&l>g;e++){if(i=this.columns[e],!i||i.hidden)continue;const V=u[e];if(!i.resizable||V<=i.minWidth||V<=this.absoluteColumnMinWidth)continue;const te=Math.max(i.minWidth,this.absoluteColumnMinWidth);let ve=Math.floor(M*(V-te))||1;ve=Math.min(ve,V-te),l-=ve,o-=ve,u[e]-=ve}if(c<=l)break;c=l}for(c=l;l<g;){const M=g/l;for(e=0;e<this.columns.length&&l<g;e++){if(i=this.columns[e],!i||i.hidden)continue;const V=u[e];let te;te=!i.resizable||i.maxWidth<=V?0:Math.min(Math.floor(M*V)-V,i.maxWidth-V||1e6)||1,l+=te,u[e]+=l<=g?te:0}if(c>=l)break;c=l}let y=!1;for(e=0;e<this.columns.length;e++)!i||i.hidden||(this.columns[e].rerenderOnResize&&this.columns[e].width!==u[e]&&(y=!0),this.columns[e].width=u[e]);this.reRenderColumns(y)}reRenderColumns(e){this.applyColumnHeaderWidths(),this.updateCanvasWidth(!0),this.triggerEvent(this.onAutosizeColumns,{columns:this.columns}),e&&(this.invalidateAllRows(),this.render())}getVisibleColumns(){return this.columns.filter(e=>!e.hidden)}triggerEvent(e,i,o){const l=o||new wn(o,i),c=i||{};return c.grid=this,e.notify(c,l,this)}getEditorLock(){return this._options.editorLock}getEditController(){return this.editController}getColumnIndex(e){return this.columnsById[e]}applyColumnHeaderWidths(){if(this.initialized){let e=0;const i=this.getVisibleColumns();this._headers.forEach(o=>{for(let l=0;l<o.children.length;l++,e++){const c=o.children[l],g=((i[e]||{}).width||0)-this.headerColumnWidthDiff;Je.width(c)!==g&&Je.width(c,g)}}),this.updateColumnCaches()}}applyColumnWidths(){let o,e=0,i=0;for(let l=0;l<this.columns.length;l++)this.columns[l]?.hidden||(i=this.columns[l].width||0,o=this.getColumnCssRules(l),this.rtl?(o.left.style.left=(-1!=this._options.frozenColumn&&l>this._options.frozenColumn?this.canvasWidthR:this.canvasWidthL)-e-i+"px",o.right.style.right=e+"px"):(o.left.style.left=e+"px",o.right.style.right=(-1!=this._options.frozenColumn&&l>this._options.frozenColumn?this.canvasWidthR:this.canvasWidthL)-e-i+"px"),this._options.frozenColumn!==l&&(e+=this.columns[l].width)),this._options.frozenColumn===l&&(e=0)}setSortColumn(e,i){this.setSortColumns([{columnId:e,sortAsc:i}])}getColumnByIndex(e){let i;return this._headers.every(o=>{const l=o.children.length;return e<l?(i=o.children[e],!1):(e-=l,!0)}),i}setSortColumns(e){this.sortColumns=e;const i=this._options.numberedMultiColumnSort&&this.sortColumns.length>1;this._headers.forEach(l=>{let c=l.querySelectorAll(".slick-header-column-sorted");c.forEach(u=>u.classList.remove("slick-header-column-sorted")),c=l.querySelectorAll(".slick-sort-indicator"),c.forEach(u=>u.classList.remove("slick-sort-indicator-asc","slick-sort-indicator-desc")),c=l.querySelectorAll(".slick-sort-indicator-numbered"),c.forEach(u=>u.textContent="")});let o=1;this.sortColumns.forEach(l=>{(0,w.isDefined)(l.sortAsc)||(l.sortAsc=!0);const c=this.getColumnIndex(l.columnId);if((0,w.isDefined)(c)){const u=this.getColumnByIndex(c);if(u){u.classList.add("slick-header-column-sorted");let g=u.querySelector(".slick-sort-indicator");g?.classList.add(l.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc"),i&&(g=u.querySelector(".slick-sort-indicator-numbered"),g&&(g.textContent=String(o)))}}o++})}getSortColumns(){return this.sortColumns}handleSelectedRangesChanged(e,i){const o=e.getNativeEvent(),l=this.selectedRows.slice(0);this.selectedRows=[];const c={};for(let u=0;u<i.length;u++)for(let g=i[u].fromRow;g<=i[u].toRow;g++){c[g]||(this.selectedRows.push(g),c[g]={});for(let y=i[u].fromCell;y<=i[u].toCell;y++)this.canCellBeSelected(g,y)&&(c[g][this.columns[y].id]=this._options.selectedCellCssClass)}if(this.setCellCssStyles(this._options.selectedCellCssClass||"",c),this.simpleArrayEquals(l,this.selectedRows)){const u=o?.detail?.caller??"click",g=this.getSelectedRows().filter(M=>l.indexOf(M)<0),y=l.filter(M=>this.getSelectedRows().indexOf(M)<0);this.triggerEvent(this.onSelectedRowsChanged,{rows:this.getSelectedRows(),previousSelectedRows:l,caller:u,changedSelectedRows:g,changedUnselectedRows:y},e)}}simpleArrayEquals(e,i){return Array.isArray(e)&&Array.isArray(i)&&i.sort().toString()!==e.sort().toString()}getColumns(){return this.columns}updateColumnCaches(){this.columnPosLeft=[],this.columnPosRight=[];let e=0;for(let i=0,o=this.columns.length;i<o;i++)!this.columns[i]||this.columns[i].hidden||(this.columnPosLeft[i]=e,this.columnPosRight[i]=e+(this.columns[i].width||0),this._options.frozenColumn===i?e=0:e+=this.columns[i].width||0)}updateColumnProps(){this.columnsById={};for(let e=0;e<this.columns.length;e++){let i=this.columns[e]||{};i.width&&(i.widthRequest=i.width,i.ColumnWidth=i.width),this._options.mixinDefaults?Je.applyDefaults(i,this._columnDefaults):i=this.columns[e]=(0,w.extend)({},this._columnDefaults,i),this.columnsById[i.id]=e,i.minWidth&&(i.width||0)<i.minWidth&&(i.width=i.minWidth),i.maxWidth&&(i.width||0)>i.maxWidth&&(i.width=i.maxWidth)}}setColumns(e){e.length>0&&e.find(i=>"MULTI"==i.id.toString())?this.columns=e:(this.triggerEvent(this.onBeforeSetColumns,{previousColumns:this.columns,newColumns:e,grid:this}),this.columns=e,this.updateColumnsInternal(),this.triggerEvent(this.onAfterSetColumns,{newColumns:e,grid:this}))}updateColumns(){this.triggerEvent(this.onBeforeUpdateColumns,{columns:this.columns,grid:this}),this.updateColumnsInternal()}updateColumnsInternal(){this.updateColumnProps(),this.updateColumnCaches(),this.initialized&&(this.setPaneVisibility(),this.setOverflow(),this.invalidateAllRows(),this.createColumnHeaders(),this.createColumnFooter(),this.removeCssRules(),this.createCssRules(),this.resizeCanvas(),this.updateCanvasWidth(),this.applyColumnHeaderWidths(),this.applyColumnWidths(),this.handleScroll(),this.getSelectionModel()?.refreshSelections())}getOptions(){return this._options}setOptions(e,i,o,l){this.prepareForOptionsChange(),this._options.enableAddRow!==e.enableAddRow&&this.invalidateRow(this.getDataLength()),e.frozenColumn&&(this.getViewports().forEach(u=>u.scrollLeft=0),this.handleScroll());const c=(0,w.extend)(!0,{},this._options);this._options=(0,w.extend)(this._options,e),this.triggerEvent(this.onSetOptions,{optionsBefore:c,optionsAfter:this._options}),this.internal_setOptions(i,o,l)}activateChangedOptions(e,i,o){this.prepareForOptionsChange(),this.invalidateRow(this.getDataLength()),this.triggerEvent(this.onActivateChangedOptions,{options:this._options}),this.internal_setOptions(e,i,o)}prepareForOptionsChange(){this.getEditorLock()?.commitCurrentEdit()&&this.makeActiveCellNormal()}internal_setOptions(e,i,o){void 0!==this._options.showColumnHeader&&this.setColumnHeaderVisibility(this._options.showColumnHeader),this.validateAndEnforceOptions(),this.setFrozenOptions(),void 0!==this._options.frozenBottom&&(this.enforceFrozenRowHeightRecalc=!0),this._viewport.forEach(l=>{l.style.overflowY=this._options.autoHeight?"hidden":"auto"}),e||this.render(),this.setScroller(),o||this.setOverflow(),i||this.setColumns(this.columns),!this._options.enableMouseWheelScrollHandler||!this._viewport||this.slickMouseWheelInstances&&0!==this.slickMouseWheelInstances.length?!1===this._options.enableMouseWheelScrollHandler&&this.destroyAllInstances(this.slickMouseWheelInstances):this._viewport.forEach(l=>{this.slickMouseWheelInstances.push(ba({element:l,onMouseWheel:this.handleMouseWheel.bind(this)}))})}validateAndEnforceOptions(){this._options.autoHeight&&(this._options.leaveSpaceForNewRows=!1)}setData(e,i){this.data=e,this.invalidateAllRows(),this.updateRowCount(),i&&this.scrollTo(0)}getData(){return this.data}getDataLength(){return this.data.getLength?this.data.getLength():this.data?.length||0}getDataLengthIncludingAddNew(){return this.getDataLength()+(!this._options.enableAddRow||this.pagingActive&&!this.pagingIsLastPage?0:1)}getDataItem(e){return this.data.getItem?this.data.getItem(e):this.data[e]}getTopPanel(){return this._topPanels[0]}getTopPanels(){return this._topPanels}hasDataView(){return!Array.isArray(this.data)}togglePanelVisibility(e,i,o){this._options[e]!==o&&(this._options[e]=o,o?Je.show(i):Je.hide(i),this.resizeCanvas())}setTopPanelVisibility(e){this.togglePanelVisibility("showTopPanel",this._topPanelScrollers,e)}setHeaderRowVisibility(e){this.togglePanelVisibility("showHeaderRow",this._headerRowScroller,e)}setColumnHeaderVisibility(e){this.togglePanelVisibility("showColumnHeader",this._headerScroller,e)}setFooterRowVisibility(e){this.togglePanelVisibility("showFooterRow",this._footerRowScroller,e)}setPreHeaderPanelVisibility(e){this.togglePanelVisibility("showPreHeaderPanel",[this._preHeaderPanelScroller,this._preHeaderPanelScrollerR],e)}setTopHeaderPanelVisibility(e){this.togglePanelVisibility("showTopHeaderPanel",this._topHeaderPanelScroller,e)}getContainerNode(){return this._container}getRowTop(e){return this._options.rowHeight*e-this.offset}getRowFromPosition(e){return Math.floor((e+this.offset)/this._options.rowHeight)}scrollTo(e){e=Math.max(e,0),e=Math.min(e,(this.th||0)-Je.height(this._viewportScrollContainerY)+((this.viewportHasHScroll||this.hasFrozenColumns())&&this.scrollbarDimensions?.height||0));const i=this.offset;this.offset=Math.round(this.page*(this.cj||0)),this.page=Math.min((this.n||0)-1,Math.floor(e/(this.ph||0)));const o=e-this.offset;if(this.offset!==i){const l=this.getVisibleRange(o);this.cleanupRows(l),this.updateRowPositions()}this.prevScrollTop!==o&&(this.vScrollDir=this.prevScrollTop+i<o+this.offset?1:-1,this.lastRenderedScrollTop=this.scrollTop=this.prevScrollTop=o,this.hasFrozenColumns()&&(this._viewportTopL.scrollTop=o),this.hasFrozenRows&&(this._viewportBottomL.scrollTop=this._viewportBottomR.scrollTop=o),this._viewportScrollContainerY&&(this._viewportScrollContainerY.scrollTop=o),this.triggerEvent(this.onViewportChanged,{}))}defaultFormatter(e,i,o){return(0,w.isDefined)(o)?(o+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}getFormatter(e,i){const o=this.data?.getItemMetadata?.(e);return(o?.columns&&(o.columns[i.id]||o.columns[this.getColumnIndex(i.id)]))?.formatter||o?.formatter||i.formatter||this._options.formatterFactory?.getFormatter(i)||this._options.defaultFormatter}getEditor(e,i){const o=this.columns[i],c=this.data?.getItemMetadata?.(e)?.columns;return void 0!==c?.[o.id]?.editorClass?c[o.id].editorClass:void 0!==c?.[i]?.editorClass?c[i].editorClass:o.editorClass||this._options?.editorFactory?.getEditor(o)}getDataItemValueForColumn(e,i){return this._options.dataItemColumnValueExtractor?this._options.dataItemColumnValueExtractor(e,i):e[i.field]}appendRowHtml(e,i,o,l,c,u=0){const g=this.getDataItem(o);let M="slick-row"+(this.hasFrozenRows&&o<=this._options.frozenRow?" frozen":"")+(o<c&&!g?" loading":"")+(o===this.activeRow&&this._options.showCellSelection?" active":"")+(o%2==1?" odd":" even");g||(M+=` ${this._options.addNewRowCssClass}`);const V=this.data?.getItemMetadata?.(o);V?.cssClasses&&(M+=` ${V.cssClasses}`);const te=this.getFrozenRowOffset(o);let Ae,ze,Ye,ve="";ve=(0,w.createDomElement)("div",this._options.disableRowBasedonHeight?{className:`slick-widget-content ${M}`,role:"row",style:{top:this.getRowTop(u)-te+"px"}}:{className:`slick-widget-content ${M}`,role:"row",style:{top:this.getRowTop(o)-te+"px"}}),e.push(ve),this.hasFrozenColumns()&&(Ae=ve.cloneNode(!0),i.push(Ae));for(let nt=0,et=this.columns.length;nt<et;nt++)if(Ye=this.columns[nt],Ye&&!Ye.hidden){if(ze=1,V?.columns&&(ze=(V.columns[Ye.id]||V.columns[nt])?.colspan||1,"*"===ze&&(ze=et-nt)),this.columnPosRight[Math.min(et-1,nt+ze-1)]>l.leftPx){if(!Ye.alwaysRenderColumn&&this.columnPosLeft[nt]>l.rightPx)break;this.hasFrozenColumns()&&nt>this._options.frozenColumn?this.appendCellHtml(Ae,o,nt,ze,g):this.appendCellHtml(ve,o,nt,ze,g)}else(Ye.alwaysRenderColumn||this.hasFrozenColumns()&&nt<=this._options.frozenColumn)&&this.appendCellHtml(ve,o,nt,ze,g);ze>1&&(nt+=ze-1)}}appendCellHtml(e,i,o,l,c){const u=this.columns[o];let g="slick-cell l"+o+" r"+Math.min(this.columns.length-1,o+l-1)+(u.cssClass?" "+u.cssClass:"");this.hasFrozenColumns()&&o<=this._options.frozenColumn&&(g+=" frozen"),i===this.activeRow&&o===this.activeCell&&this._options.showCellSelection&&(g+=" active"),Object.keys(this.cellCssClasses).forEach(Ye=>{this.cellCssClasses[Ye][i]?.[u.id]&&(g+=` ${this.cellCssClasses[Ye][i][u.id]}`)});let y=null,M="";c&&(y=this.getDataItemValueForColumn(c,u),M=this.getFormatter(i,u)(i,o,y,u,c,this),null==M&&(M=""));const te=this.triggerEvent(this.onBeforeAppendCell,{row:i,cell:o,value:y,dataContext:c}).getReturnValue();let ve="string"==typeof te?te:"";M?.addClasses&&(ve+=(0,w.classNameToList)((ve?" ":"")+M.addClasses).join(" "));const Ae=M?.toolTip?`${M.toolTip}`:"",ze=(0,w.createDomElement)("div",{className:(0,w.classNameToList)(`${g} ${ve||""}`).join(" "),role:"gridcell",tabIndex:-1});if(ze.setAttribute("aria-describedby",this.uid+u.id),Ae&&ze.setAttribute("title",Ae),u.hasOwnProperty("cellAttrs")&&u.cellAttrs instanceof Object&&Object.keys(u.cellAttrs).forEach(Ye=>{u.cellAttrs.hasOwnProperty(Ye)&&ze.setAttribute(Ye,u.cellAttrs[Ye])}),c){const Ye=(0,w.isPrimitiveOrHTML)(M)?M:M.html||M.text;this.applyHtmlCode(ze,Ye)}e.appendChild(ze),M.insertElementAfterTarget&&(0,w.insertAfterElement)(ze,M.insertElementAfterTarget),this.rowsCache[i].cellRenderQueue.push(o),this.rowsCache[i].cellColSpans[o]=l}cleanupRows(e){Object.keys(this.rowsCache).forEach(i=>{if(this.rowsCache){let o=+i,l=!0;this.hasFrozenRows&&(this._options.frozenBottom&&o>=this.actualFrozenRow||!this._options.frozenBottom&&o<=this.actualFrozenRow)&&(l=!1),(o=parseInt(i,10))!==this.activeRow&&(o<e.top||o>e.bottom)&&l&&this.removeRowFromCache(o)}}),this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}invalidate(){this.updateRowCount(),this.invalidateAllRows(),this.render()}invalidateAllRows(){this.currentEditor&&this.makeActiveCellNormal(),"object"==typeof this.rowsCache&&Object.keys(this.rowsCache).forEach(e=>{this.rowsCache&&this.removeRowFromCache(+e)}),this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}invalidateRows(e){if(e?.length){this.vScrollDir=0;const i=e.length;for(let o=0;o<i;o++)this.currentEditor&&this.activeRow===e[o]&&this.makeActiveCellNormal(),this.rowsCache[e[o]]&&this.removeRowFromCache(e[o]);this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}}invalidateRow(e){e>=0&&this.invalidateRows([e])}queuePostProcessedRowForCleanup(e,i,o){this.postProcessgroupId++,"object"==typeof i&&Object.keys(i).forEach(l=>{i.hasOwnProperty(l)&&this.postProcessedCleanupQueue.push({actionType:"C",groupId:this.postProcessgroupId,node:e.cellNodesByColumnIdx[+l],columnIdx:+l,rowIdx:o})}),e.rowNode||(e.rowNode=[]),this.postProcessedCleanupQueue.push({actionType:"R",groupId:this.postProcessgroupId,node:e.rowNode}),e.rowNode?.forEach(l=>l.remove())}queuePostProcessedCellForCleanup(e,i,o){this.postProcessedCleanupQueue.push({actionType:"C",groupId:this.postProcessgroupId,node:e,columnIdx:i,rowIdx:o}),e.remove()}removeRowFromCache(e){const i=this.rowsCache[e];i?.rowNode&&(this._options.enableAsyncPostRenderCleanup&&this.postProcessedRows[e]?this.queuePostProcessedRowForCleanup(i,this.postProcessedRows[e],e):i.rowNode?.forEach(o=>o.parentElement?.removeChild(o)),delete this.rowsCache[e],delete this.postProcessedRows[e],this.renderedRows--,this.counter_rows_removed++)}applyFormatResultToCellNode(e,i,o){null==e&&(e=""),(0,w.isPrimitiveOrHTML)(e)?this.applyHtmlCode(i,e):(this.applyHtmlCode(i,e.html||e.text),e.removeClasses&&!o&&i.classList.remove(...(0,w.classNameToList)(e.removeClasses)),e.addClasses&&i.classList.add(...(0,w.classNameToList)(e.addClasses)),e.toolTip&&i.setAttribute("title",e.toolTip))}updateCell(e,i){const o=this.getCellNode(e,i);if(o){const l=this.columns[i],c=this.getDataItem(e);if(this.currentEditor&&this.activeRow===e&&this.activeCell===i)this.currentEditor.loadValue(c);else{const u=c?this.getFormatter(e,l)(e,i,this.getDataItemValueForColumn(c,l),l,c,this):"";this.applyFormatResultToCellNode(u,o),this.invalidatePostProcessingResults(e)}}}updateRow(e){const i=this.rowsCache[e];if(!i)return;let o;this.ensureCellNodesInRowsCache(e);const l=this.getDataItem(e);Object.keys(i.cellNodesByColumnIdx).forEach(c=>{if(!i.cellNodesByColumnIdx.hasOwnProperty(c))return;const u=+c,g=this.columns[u],y=i.cellNodesByColumnIdx[u];this.currentEditor&&e===this.activeRow&&u===this.activeCell?this.currentEditor.loadValue(l):l?(o=this.getFormatter(e,g)(e,u,this.getDataItemValueForColumn(l,g),g,l,this),this.applyFormatResultToCellNode(o,y)):(0,w.emptyElement)(y)}),this.invalidatePostProcessingResults(e)}getViewportRowCount(){const e=this.getViewportHeight(),i=this.getScrollbarDimensions()?.height||0;return Math.floor((e-i)/this._options.rowHeight)}getViewportHeight(){if((!this._options.autoHeight||-1!==this._options.frozenColumn)&&(this.topPanelH=this._options.showTopPanel?this._options.topPanelHeight+this.getVBoxDelta(this._topPanelScrollers[0]):0,this.headerRowH=this._options.showHeaderRow?this._options.headerRowHeight+this.getVBoxDelta(this._headerRowScroller[0]):0,this.footerRowH=this._options.showFooterRow?this._options.footerRowHeight+this.getVBoxDelta(this._footerRowScroller[0]):0),this._options.autoHeight){let e=this._paneHeaderL.offsetHeight;e+=this._options.showHeaderRow?this._options.headerRowHeight+this.getVBoxDelta(this._headerRowScroller[0]):0,e+=this._options.showFooterRow?this._options.footerRowHeight+this.getVBoxDelta(this._footerRowScroller[0]):0,e+=this.getCanvasWidth()>this.viewportW&&this.scrollbarDimensions?.height||0,this.viewportH=this._options.rowHeight*this.getDataLengthIncludingAddNew()+(-1===this._options.frozenColumn?e:0)}else{const e=this._options.showColumnHeader?Je.toFloat(Je.height(this._headerScroller[0]))+this.getVBoxDelta(this._headerScroller[0]):0,i=this._options.createPreHeaderPanel&&this._options.showPreHeaderPanel?this._options.preHeaderPanelHeight+this.getVBoxDelta(this._preHeaderPanelScroller):0,o=this._options.createTopHeaderPanel&&this._options.showTopHeaderPanel?this._options.topHeaderPanelHeight+this.getVBoxDelta(this._topHeaderPanelScroller):0,l=getComputedStyle(this._container);this.viewportH=Je.toFloat(l.height)-Je.toFloat(l.paddingTop)-Je.toFloat(l.paddingBottom)-e-this.topPanelH-this.headerRowH-this.footerRowH-i-o}return this.numVisibleRows=Math.ceil(this.viewportH/this._options.rowHeight),this.viewportH}getViewportWidth(){return this.viewportW=parseFloat((0,w.getInnerSize)(this._container,"width"))||this._options.devMode&&this._options.devMode.containerClientWidth||0,this.viewportW}resizeCanvas(){if(this.initialized){if(this.paneTopH=0,this.paneBottomH=0,this.viewportTopH=0,this.viewportBottomH=0,this.getViewportWidth(),this.getViewportHeight(),this.hasFrozenRows?this._options.frozenBottom?(this.paneTopH=this.viewportH-this.frozenRowsHeight-(this.scrollbarDimensions?.height||0),this.paneBottomH=this.frozenRowsHeight+(this.scrollbarDimensions?.height||0)):(this.paneTopH=this.frozenRowsHeight,this.paneBottomH=this.viewportH-this.frozenRowsHeight):this.paneTopH=this.viewportH,this.paneTopH+=this.topPanelH+this.headerRowH+this.footerRowH,this.hasFrozenColumns()&&this._options.autoHeight&&(this.paneTopH+=this.scrollbarDimensions?.height||0),this.viewportTopH=this.paneTopH-this.topPanelH-this.headerRowH-this.footerRowH,this._options.autoHeight){if(this.hasFrozenColumns()){const o=getComputedStyle(this._headerScrollerL);Je.height(this._container,this.paneTopH+Je.toFloat(o.height))}this._paneTopL.style.position="relative"}let e=0==Je.height(this._paneHeaderL)?30:Je.height(this._paneHeaderL);e?e+=this._options.showTopHeaderPanel?this._options.topHeaderPanelHeight:0:e=(this._options.showHeaderRow?this._options.headerRowHeight:0)+(this._options.showPreHeaderPanel?this._options.preHeaderPanelHeight:0),Je.setStyleSize(this._paneTopL,"top",e||e),Je.height(this._paneTopL,this.paneTopH);const i=this._paneTopL.offsetTop+this.paneTopH;if(this._options.autoHeight||Je.height(this._viewportTopL,this.viewportTopH),this.hasFrozenColumns()){let o=Je.height(this._paneHeaderL);o&&(o+=this._options.showTopHeaderPanel?this._options.topHeaderPanelHeight:0),Je.setStyleSize(this._paneTopR,"top",o),Je.height(this._paneTopR,this.paneTopH),Je.height(this._viewportTopR,this.viewportTopH),this.hasFrozenRows&&(Je.setStyleSize(this._paneBottomL,"top",i),Je.height(this._paneBottomL,this.paneBottomH),Je.setStyleSize(this._paneBottomR,"top",i),Je.height(this._paneBottomR,this.paneBottomH),Je.height(this._viewportBottomR,this.paneBottomH))}else this.hasFrozenRows&&(Je.width(this._paneBottomL,"100%"),Je.height(this._paneBottomL,this.paneBottomH),Je.setStyleSize(this._paneBottomL,"top",i));this.hasFrozenRows?(Je.height(this._viewportBottomL,this.paneBottomH),this._options.frozenBottom?(Je.height(this._canvasBottomL,this.frozenRowsHeight),this.hasFrozenColumns()&&Je.height(this._canvasBottomR,this.frozenRowsHeight)):(Je.height(this._canvasTopL,this.frozenRowsHeight),this.hasFrozenColumns()&&Je.height(this._canvasTopR,this.frozenRowsHeight))):Je.height(this._viewportTopR,this.viewportTopH),(!this.scrollbarDimensions||!this.scrollbarDimensions.width)&&(this.scrollbarDimensions=this.measureScrollbar()),this._options.forceFitColumns&&this.legacyAutosizeColumns(),this.updateRowCount(),this.handleScroll(),this.lastRenderedScrollLeft=-1,this.render()}}updatePagingStatusFromView(e){this.pagingActive=0!==e.pageSize,this.pagingIsLastPage=e.pageNum===e.totalPages-1}updateRowCount(){if(this.initialized){const e=this.getDataLength(),i=this.getDataLengthIncludingAddNew();let o=0,l=Je.height(this.hasFrozenRows&&!this._options.frozenBottom?this._canvasBottomL:this._canvasTopL);o=this.hasFrozenRows?this.getDataLength()-this._options.frozenRow:i+(this._options.leaveSpaceForNewRows?this.numVisibleRows-1:0);const c=Je.height(this._viewportScrollContainerY),u=this.viewportHasVScroll;this.viewportHasVScroll=this._options.alwaysShowVerticalScroll||!this._options.autoHeight&&o*this._options.rowHeight>c,this.makeActiveCellNormal();const g=e-1;"object"==typeof this.rowsCache&&Object.keys(this.rowsCache).forEach(M=>{const V=+M;V>g&&this.removeRowFromCache(V)}),this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup(),this.activeCellNode&&this.activeRow>g&&this.resetActiveCell(),l=this.h,this._options.autoHeight?this.h=this._options.rowHeight*o:(this.th=Math.max(this._options.rowHeight*o,c-(this.scrollbarDimensions?.height||0)),this.th<this.maxSupportedCssHeight?(this.h=this.ph=this.th,this.n=1,this.cj=0):(this.h=this.maxSupportedCssHeight,this.ph=this.h/100,this.n=Math.floor(this.th/this.ph),this.cj=(this.th-this.h)/(this.n-1))),(this.h!==l||this.enforceFrozenRowHeightRecalc)&&(this.hasFrozenRows&&!this._options.frozenBottom?(Je.height(this._canvasBottomL,this.h),this.hasFrozenColumns()&&Je.height(this._canvasBottomR,this.h)):(Je.height(this._canvasTopL,this.h),Je.height(this._canvasTopR,this.h)),this.scrollTop=this._viewportScrollContainerY.scrollTop,this.enforceFrozenRowHeightRecalc=!1);const y=this.scrollTop+this.offset<=this.th-c;0===this.th||0===this.scrollTop?this.page=this.offset=0:this.scrollTo(y?this.scrollTop+this.offset:this.th-c+(this.scrollbarDimensions?.height||0)),this.h!==l&&this._options.autoHeight&&this.resizeCanvas(),this._options.forceFitColumns&&u!==this.viewportHasVScroll&&this.legacyAutosizeColumns(),this.updateCanvasWidth(!1)}}getViewport(e,i){return this.getVisibleRange(e,i)}getVisibleRange(e,i){return e??=this.scrollTop,i??=this.scrollLeft,this.rtl&&(i=0-this.scrollLeft),{top:this.getRowFromPosition(e),bottom:this.getRowFromPosition(e+this.viewportH)+1,leftPx:i,rightPx:i+this.viewportW}}getRenderedRange(e,i){const o=this.getVisibleRange(e,i),l=Math.round(this.viewportH/this._options.rowHeight),c=this._options.minRowBuffer;return-1===this.vScrollDir?(o.top-=l,o.bottom+=c):1===this.vScrollDir?(o.top-=c,o.bottom+=l):(o.top-=c,o.bottom+=c),o.top=Math.max(0,o.top),o.bottom=Math.min(this.getDataLengthIncludingAddNew()-1,o.bottom),o.leftPx-=this.viewportW,o.rightPx+=this.viewportW,o.leftPx=Math.max(0,o.leftPx),o.rightPx=Math.min(this.canvasWidth,o.rightPx),o}ensureCellNodesInRowsCache(e){const i=this.rowsCache[e];if(i?.cellRenderQueue.length&&i.rowNode?.length){const o=i.rowNode;let l=Array.from(o[0].children);o.length>1&&(l=l.concat(Array.from(o[1].children)));let c=l.length-1;for(;i.cellRenderQueue.length;){const u=i.cellRenderQueue.pop();i.cellNodesByColumnIdx[u]=l[c--]}}}cleanUpCells(e,i){if(this.hasFrozenRows&&(this._options.frozenBottom&&i>this.actualFrozenRow||i<=this.actualFrozenRow))return;const l=this.rowsCache[i],c=[];let u,g;for(Object.keys(l.cellNodesByColumnIdx).forEach(y=>{if(!l.cellNodesByColumnIdx.hasOwnProperty(y))return;const M=+y;M<=this._options.frozenColumn||Array.isArray(this.columns)&&this.columns[M]?.alwaysRenderColumn||(this.columnPosLeft[M]>e.rightPx||this.columnPosRight[Math.min(this.columns.length-1,(M||0)+l.cellColSpans[M]-1)]<e.leftPx)&&(i===this.activeRow&&Number(M)===this.activeCell||c.push(M))});(0,w.isDefined)(u=c.pop());)g=l.cellNodesByColumnIdx[u],this._options.enableAsyncPostRenderCleanup&&this.postProcessedRows[i]?.[u]?this.queuePostProcessedCellForCleanup(g,u,i):g.parentElement?.removeChild(g),delete l.cellColSpans[u],delete l.cellNodesByColumnIdx[u],this.postProcessedRows[i]&&delete this.postProcessedRows[i][u]}cleanUpAndRenderCells(e){let i;const o=document.createElement("div"),l=[];let c,g,y,M,u=0;for(let V=e.top,te=e.bottom;V<=te;V++){if(i=this.rowsCache[V],!i)continue;this.ensureCellNodesInRowsCache(V),this.cleanUpCells(e,V),c=0;let ve=this.data?.getItemMetadata?.(V)??{};ve=ve?.columns;const Ae=this.getDataItem(V);for(let ze=0,Ye=this.columns.length;ze<Ye;ze++){if(!this.columns[ze]||this.columns[ze].hidden)continue;if(this.columnPosLeft[ze]>e.rightPx)break;if((0,w.isDefined)(g=i.cellColSpans[ze])){ze+=g>1?g-1:0;continue}g=1,ve&&(g=(ve[this.columns[ze].id]||ve[ze])?.colspan??1,"*"===g&&(g=Ye-ze));const nt=g;this.columnPosRight[Math.min(Ye-1,ze+nt-1)]>e.leftPx&&(this.appendCellHtml(o,V,ze,nt,Ae),c++),ze+=nt>1?nt-1:0}c&&(u+=c,l.push(V))}if(o.children.length)for(;(0,w.isDefined)(y=l.pop());){let V;for(i=this.rowsCache[y];(0,w.isDefined)(V=i.cellRenderQueue.pop());)M=o.lastChild,M&&(this.hasFrozenColumns()&&V>this._options.frozenColumn?i.rowNode[1].appendChild(M):i.rowNode[0].appendChild(M),i.cellNodesByColumnIdx[V]=M)}}renderRows(e){const i=[],o=[],l=[];let c=!1;const u=this.getDataLength();let g=e.top;for(let V=e.top,te=e.bottom;V<=te;V++)this.rowsCache[V]||this.hasFrozenRows&&this._options.frozenBottom&&V===this.getDataLength()?g++:this._options.disableRowBasedonHeight&&null!=this.getDataItem(V).Height&&0==this.getDataItem(V).Height||this._options.disableRowBasedonHeight&&null!=this.getDataItem(V).StyleHeightZero&&1===this.getDataItem(V).StyleHeightZero||(this.renderedRows++,l.push(V),this.rowsCache[V]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]},this.appendRowHtml(i,o,V,e,u,g),this.activeCellNode&&this.activeRow===V&&(c=!0),this.counter_rows_rendered++,g++);if(!l.length)return;const y=document.createElement("div"),M=document.createElement("div");i.forEach(V=>y.appendChild(V)),o.forEach(V=>M.appendChild(V));for(let V=0,te=l.length;V<te;V++)this.hasFrozenRows&&l[V]>=this.actualFrozenRow?this.hasFrozenColumns()?this.rowsCache?.hasOwnProperty(l[V])&&y.firstChild&&M.firstChild&&(this.rowsCache[l[V]].rowNode=[y.firstChild,M.firstChild],this._canvasBottomL.appendChild(y.firstChild),this._canvasBottomR.appendChild(M.firstChild)):this.rowsCache?.hasOwnProperty(l[V])&&y.firstChild&&(this.rowsCache[l[V]].rowNode=[y.firstChild],this._canvasBottomL.appendChild(y.firstChild)):this.hasFrozenColumns()?this.rowsCache?.hasOwnProperty(l[V])&&y.firstChild&&M.firstChild&&(this.rowsCache[l[V]].rowNode=[y.firstChild,M.firstChild],this._canvasTopL.appendChild(y.firstChild),this._canvasTopR.appendChild(M.firstChild)):this.rowsCache?.hasOwnProperty(l[V])&&y.firstChild&&(this.rowsCache[l[V]].rowNode=[y.firstChild],this._canvasTopL.appendChild(y.firstChild));c&&(this.activeCellNode=this.getCellNode(this.activeRow,this.activeCell))}startPostProcessing(){this._options.enableAsyncPostRender&&(clearTimeout(this.h_postrender),this.h_postrender=setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay))}startPostProcessingCleanup(){this._options.enableAsyncPostRenderCleanup&&(clearTimeout(this.h_postrenderCleanup),this.h_postrenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostRenderCleanupDelay))}invalidatePostProcessingResults(e){"object"==typeof this.postProcessedRows[e]&&Object.keys(this.postProcessedRows[e]).forEach(i=>{this.postProcessedRows[e].hasOwnProperty(i)&&(this.postProcessedRows[e][i]="C")}),this.postProcessFromRow=Math.min(this.postProcessFromRow,e),this.postProcessToRow=Math.max(this.postProcessToRow,e),this.startPostProcessing()}updateRowPositions(){this.rowsCache&&"object"==typeof this.rowsCache&&Object.keys(this.rowsCache).forEach(e=>{const i=e?parseInt(e,10):0;Je.setStyleSize(this.rowsCache[i].rowNode[0],"top",this.getRowTop(i))})}render(){if(this.initialized){this.scrollThrottle.dequeue();const e=this.getVisibleRange(),i=this.getRenderedRange();if(this.cleanupRows(i),this.lastRenderedScrollLeft!==this.scrollLeft){if(this.hasFrozenRows){const o=(0,w.extend)(!0,{},i);this._options.frozenBottom?(o.top=this.actualFrozenRow,o.bottom=this.getDataLength()):(o.top=0,o.bottom=this._options.frozenRow),this.cleanUpAndRenderCells(o)}this.cleanUpAndRenderCells(i)}this.renderRows(i),this.hasFrozenRows&&this.renderRows(this._options.frozenBottom?{top:this.actualFrozenRow,bottom:this.getDataLength()-1,leftPx:i.leftPx,rightPx:i.rightPx}:{top:0,bottom:this._options.frozenRow-1,leftPx:i.leftPx,rightPx:i.rightPx}),this.postProcessFromRow=e.top,this.postProcessToRow=Math.min(this.getDataLengthIncludingAddNew()-1,e.bottom),this.startPostProcessing(),this.lastRenderedScrollTop=this.scrollTop,this.lastRenderedScrollLeft=this.scrollLeft,this.h_render=null,this.triggerEvent(this.onRendered,{startRow:e.top,endRow:e.bottom,grid:this})}}handleHeaderRowScroll(){const e=this._headerRowScrollContainer.scrollLeft;e!==this._viewportScrollContainerX.scrollLeft&&(this._viewportScrollContainerX.scrollLeft=e)}handleFooterRowScroll(){const e=this._footerRowScrollContainer.scrollLeft;e!==this._viewportScrollContainerX.scrollLeft&&(this._viewportScrollContainerX.scrollLeft=e)}handlePreHeaderPanelScroll(){this.handleElementScroll(this._preHeaderPanelScroller)}handleTopHeaderPanelScroll(){this.handleElementScroll(this._topHeaderPanelScroller)}handleElementScroll(e){const i=e.scrollLeft;i!==this._viewportScrollContainerX.scrollLeft&&(this._viewportScrollContainerX.scrollLeft=i)}handleScroll(){return this.scrollTop=this._viewportScrollContainerY.scrollTop,this.scrollLeft=this._viewportScrollContainerX.scrollLeft,this._handleScroll(!1)}_handleScroll(e){let i=this._viewportScrollContainerY.scrollHeight-this._viewportScrollContainerY.clientHeight,o=this._viewportScrollContainerY.scrollWidth-this._viewportScrollContainerY.clientWidth;i=Math.max(0,i),o=Math.max(0,o),this.scrollTop>i&&(this.scrollTop=i),this.scrollLeft>o&&(this.scrollLeft=o);const l=Math.abs(this.scrollTop-this.prevScrollTop),c=Math.abs(this.scrollLeft-this.prevScrollLeft);if(c&&(this.prevScrollLeft=this.scrollLeft,this._viewportScrollContainerX.scrollLeft=this.scrollLeft,this._headerScrollContainer.scrollLeft=this.scrollLeft,this._topPanelScrollers[0].scrollLeft=this.scrollLeft,this._options.createFooterRow&&(this._footerRowScrollContainer.scrollLeft=this.scrollLeft),this._options.createPreHeaderPanel&&(this.hasFrozenColumns()?this._preHeaderPanelScrollerR.scrollLeft=this.scrollLeft:this._preHeaderPanelScroller.scrollLeft=this.scrollLeft),this._options.createTopHeaderPanel&&(this._topHeaderPanelScroller.scrollLeft=this.scrollLeft),this.hasFrozenColumns()?(this.hasFrozenRows&&(this._viewportTopR.scrollLeft=this.scrollLeft),this._headerRowScrollerR.scrollLeft=this.scrollLeft):(this.hasFrozenRows&&(this._viewportTopL.scrollLeft=this.scrollLeft),this._headerRowScrollerL.scrollLeft=this.scrollLeft)),l&&!this._options.autoHeight)if(this.vScrollDir=this.prevScrollTop<this.scrollTop?1:-1,this.prevScrollTop=this.scrollTop,e&&(this._viewportScrollContainerY.scrollTop=this.scrollTop),this.hasFrozenColumns()&&(this.hasFrozenRows&&!this._options.frozenBottom?this._viewportBottomL.scrollTop=this.scrollTop:this._viewportTopL.scrollTop=this.scrollTop),l<this.viewportH)this.scrollTo(this.scrollTop+this.offset);else{const u=this.offset;this.page=this.h===this.viewportH?0:Math.min(this.n-1,Math.floor(this.scrollTop*((this.th-this.viewportH)/(this.h-this.viewportH))*(1/this.ph))),this.offset=Math.round(this.page*this.cj),u!==this.offset&&this.invalidateAllRows()}if(c||l){const u=Math.abs(this.lastRenderedScrollLeft-this.scrollLeft),g=Math.abs(this.lastRenderedScrollTop-this.scrollTop);(u>20||g>20)&&(this._options.forceSyncScrolling||g<this.viewportH&&u<this.viewportW?this.render():this.scrollThrottle.enqueue(),this.triggerEvent(this.onViewportChanged,{}))}return this.triggerEvent(this.onScroll,{scrollLeft:this.scrollLeft,scrollTop:this.scrollTop}),!(!c&&!l)}actionThrottle(e,i){let o=!1,l=!1;const u=()=>{l=!1},g=()=>{o=!0,clearTimeout(this._executionBlockTimer),this._executionBlockTimer=setTimeout(y,i),e.call(this)},y=()=>{l?(u(),g()):o=!1};return{enqueue:(()=>{o?l=!0:g()}).bind(this),dequeue:u.bind(this)}}asyncPostProcessRows(){const e=this.getDataLength();for(;this.postProcessFromRow<=this.postProcessToRow;){const i=this.vScrollDir>=0?this.postProcessFromRow++:this.postProcessToRow--,o=this.rowsCache[i];if(o&&!(i>=e))return this.postProcessedRows[i]||(this.postProcessedRows[i]={}),this.ensureCellNodesInRowsCache(i),Object.keys(o.cellNodesByColumnIdx).forEach(l=>{if(o.cellNodesByColumnIdx.hasOwnProperty(l)){const c=+l,u=this.columns[c],g=this.postProcessedRows[i][c];if(u.asyncPostRender&&"R"!==g){const y=o.cellNodesByColumnIdx[c];y&&u.asyncPostRender(y,i,this.getDataItem(i),u,"C"===g),this.postProcessedRows[i][c]="R"}}}),void(this.h_postrender=setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay))}}asyncPostProcessCleanupRows(){if(this.postProcessedCleanupQueue.length>0){const e=this.postProcessedCleanupQueue[0].groupId;for(;this.postProcessedCleanupQueue.length>0&&this.postProcessedCleanupQueue[0].groupId===e;){const i=this.postProcessedCleanupQueue.shift();if("R"===i?.actionType&&i.node.forEach(o=>{o.remove()}),"C"===i?.actionType){const o=this.columns[i.columnIdx];o.asyncPostRenderCleanup&&i.node&&o.asyncPostRenderCleanup(i.node,i.rowIdx,o)}}this.h_postrenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostRenderCleanupDelay)}}updateCellCssStylesOnRenderedRows(e,i){let o,l,c;"object"==typeof this.rowsCache&&Object.keys(this.rowsCache).forEach(u=>{this.rowsCache&&(c=i?.[u],l=e?.[u],c&&Object.keys(c).forEach(g=>{(!l||c[g]!==l[g])&&(o=this.getCellNode(+u,this.getColumnIndex(g)),o&&o.classList.remove(c[g]))}),l&&Object.keys(l).forEach(g=>{(!c||c[g]!==l[g])&&(o=this.getCellNode(+u,this.getColumnIndex(g)),o&&o.classList.add(l[g]))}))})}addCellCssStyles(e,i){if(this.cellCssClasses[e])throw new Error(`SlickGrid addCellCssStyles: cell CSS hash with key "${e}" already exists.`);this.cellCssClasses[e]=i,this.updateCellCssStylesOnRenderedRows(i,null),this.triggerEvent(this.onCellCssStylesChanged,{key:e,hash:i,grid:this})}removeCellCssStyles(e){this.cellCssClasses[e]&&(this.updateCellCssStylesOnRenderedRows(null,this.cellCssClasses[e]),delete this.cellCssClasses[e],this.triggerEvent(this.onCellCssStylesChanged,{key:e,hash:null,grid:this}))}setCellCssStyles(e,i){const o=this.cellCssClasses[e];this.cellCssClasses[e]=i,this.updateCellCssStylesOnRenderedRows(i,o),this.triggerEvent(this.onCellCssStylesChanged,{key:e,hash:i,grid:this})}getCellCssStyles(e){return this.cellCssClasses[e]}flashCell(e,i,o=250){const l=(c,u)=>{u<1||(clearTimeout(this._flashCellTimer),this._flashCellTimer=setTimeout(()=>{u%2==0?c.classList.add(this._options.cellFlashingCssClass||""):c.classList.remove(this._options.cellFlashingCssClass||""),l(c,u-1)},o))};if(this.rowsCache[e]){const c=this.getCellNode(e,i);c&&l(c,5)}}highlightRow(e,i){const o=this.rowsCache[e];i||=this._options.rowHighlightDuration,Array.isArray(o?.rowNode)&&this._options.rowHighlightCssClass&&(o.rowNode.forEach(l=>l.classList.add(...(0,w.classNameToList)(this._options.rowHighlightCssClass))),clearTimeout(this._highlightRowTimer),this._highlightRowTimer=setTimeout(()=>{o.rowNode?.forEach(l=>l.classList.remove(...(0,w.classNameToList)(this._options.rowHighlightCssClass)))},i))}HighlightSelectedRow(e){}handleMouseWheel(e,i,o,l){this.scrollTop=Math.max(0,this._viewportScrollContainerY.scrollTop-l*this._options.rowHeight),this.scrollLeft=this._viewportScrollContainerX.scrollLeft+10*o,this._handleScroll(!0)&&e.preventDefault()}handleDragInit(e,i){const o=this.getCellFromEvent(e);if(!o||!this.cellExists(o.row,o.cell))return!1;const l=this.triggerEvent(this.onDragInit,i,e);return!!l.isImmediatePropagationStopped()&&l.getReturnValue()}handleDragStart(e,i){const o=this.getCellFromEvent(e);if(!o||!this.cellExists(o.row,o.cell))return!1;const l=this.triggerEvent(this.onDragStart,i,e);return!!l.isImmediatePropagationStopped()&&l.getReturnValue()}handleDrag(e,i){return this.triggerEvent(this.onDrag,i,e).getReturnValue()}handleDragEnd(e,i){this.triggerEvent(this.onDragEnd,i,e)}handleKeyDown(e){let o=this.triggerEvent(this.onKeyDown,{row:this.activeRow,cell:this.activeCell},e).isImmediatePropagationStopped();if(!o&&!e.shiftKey&&!e.altKey){if(this._options.editable&&this.currentEditor?.keyCaptureList&&this.currentEditor.keyCaptureList.indexOf(e.which)>-1)return;"Home"===e.key?o=e.ctrlKey?this.navigateTop():this.navigateRowStart():"End"===e.key&&(o=e.ctrlKey?this.navigateBottom():this.navigateRowEnd())}if(!o)if(e.shiftKey||e.altKey||e.ctrlKey)"Tab"===e.key&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&(o=this.navigatePrev());else if("Escape"===e.key){if(!this.getEditorLock()?.isActive())return;this.cancelEditAndSetFocus()}else"PageDown"===e.key?(this.navigatePageDown(),o=!0):"PageUp"===e.key?(this.navigatePageUp(),o=!0):"ArrowUp"===e.key?e.target.classList.contains("list_grid_input")||(o=this.navigateUp()):"ArrowDown"===e.key?e.target.classList.contains("list_grid_input")||(o=this.navigateDown()):"Tab"===e.key?o=this.navigateNext():"Enter"===e.key&&(this._options.editable&&(this.currentEditor?this.activeRow===this.getDataLength()?this.navigateDown():o=this.navigateNext():this.getEditorLock()?.commitCurrentEdit()&&(this._ColumnReadOnly=!1,this.makeActiveCellEditable(void 0,void 0,e),this._ColumnReadOnly&&(o=this.navigateNext()))),o=!0);o&&(e.stopPropagation(),e.preventDefault())}handleClick(e){const i=e instanceof wn?e.getNativeEvent():e;if(!this.currentEditor&&(i.target!==document.activeElement||i.target.classList.contains("slick-cell"))){const l=this.getTextSelection();this.setFocus(),this.setTextSelection(l)}const o=this.getCellFromEvent(i);if(o&&(null===this.currentEditor||this.activeRow!==o.row||this.activeCell!==o.cell)&&!(e=this.triggerEvent(this.onClick,{row:o.row,cell:o.cell},e||i)).isImmediatePropagationStopped()&&!i.defaultPrevented&&this.canCellBeActive(o.row,o.cell)&&(!this.getEditorLock()?.isActive()||this.getEditorLock()?.commitCurrentEdit())){this.scrollRowIntoView(o.row,!1);const l="slick-edit-preclick"===i.target?.className,c=this.columns[o.cell],u=!!(this._options.editable&&c?.editorClass&&this._options.suppressActiveCellChangeOnEdit);this.setActiveCellInternal(this.getCellNode(o.row,o.cell),null,l,u,i)}}handleContextMenu(e){const i=e.target.closest(".slick-cell");i&&(this.activeCellNode===i&&null!==this.currentEditor||this.triggerEvent(this.onContextMenu,{},e))}handleDblClick(e){const i=this.getCellFromEvent(e);!i||null!==this.currentEditor&&this.activeRow===i.row&&this.activeCell===i.cell||(this.triggerEvent(this.onDblClick,{row:i.row,cell:i.cell},e),!e.defaultPrevented&&this._options.editable&&this.gotoCell(i.row,i.cell,!0,e))}handleHeaderMouseEnter(e){const i=Je.storage.get(e.target.closest(".slick-header-column"),"column");i&&this.triggerEvent(this.onHeaderMouseEnter,{column:i,grid:this},e)}handleHeaderMouseOver(e){const i=Je.storage.get(e.target.closest(".slick-header-column"),"column");i&&this.triggerEvent(this.onHeaderMouseOver,{column:i,grid:this},e)}handleHeaderMouseLeave(e){const i=Je.storage.get(e.target.closest(".slick-header-column"),"column");i&&this.triggerEvent(this.onHeaderMouseLeave,{column:i,grid:this},e)}handleHeaderMouseOut(e){const i=Je.storage.get(e.target.closest(".slick-header-column"),"column");i&&this.triggerEvent(this.onHeaderMouseOut,{column:i,grid:this},e)}handleHeaderRowMouseEnter(e){const i=Je.storage.get(e.target.closest(".slick-headerrow-column"),"column");i&&this.triggerEvent(this.onHeaderRowMouseEnter,{column:i,grid:this},e)}handleHeaderRowMouseOver(e){const i=Je.storage.get(e.target.closest(".slick-headerrow-column"),"column");i&&this.triggerEvent(this.onHeaderRowMouseOver,{column:i,grid:this},e)}handleHeaderRowMouseLeave(e){const i=Je.storage.get(e.target.closest(".slick-headerrow-column"),"column");i&&this.triggerEvent(this.onHeaderRowMouseLeave,{column:i,grid:this},e)}handleHeaderRowMouseOut(e){const i=Je.storage.get(e.target.closest(".slick-headerrow-column"),"column");i&&this.triggerEvent(this.onHeaderRowMouseOut,{column:i,grid:this},e)}handleHeaderContextMenu(e){const i=e.target.closest(".slick-header-column"),o=i&&Je.storage.get(i,"column");this.triggerEvent(this.onHeaderContextMenu,{column:o},e)}handleHeaderClick(e){if(!this.columnResizeDragging){const i=e.target.closest(".slick-header-column"),o=i&&Je.storage.get(i,"column");o&&this.triggerEvent(this.onHeaderClick,{column:o},e)}}handlePreHeaderContextMenu(e){this.triggerEvent(this.onPreHeaderContextMenu,{node:e.target},e)}handlePreHeaderClick(e){this.columnResizeDragging||this.triggerEvent(this.onPreHeaderClick,{node:e.target},e)}handleFooterContextMenu(e){const i=e.target.closest(".slick-footerrow-column"),o=i&&Je.storage.get(i,"column");this.triggerEvent(this.onFooterContextMenu,{column:o},e)}handleFooterClick(e){const i=e.target.closest(".slick-footerrow-column"),o=i&&Je.storage.get(i,"column");this.triggerEvent(this.onFooterClick,{column:o},e)}handleCellMouseOver(e){this.triggerEvent(this.onMouseEnter,{},e)}handleCellMouseOut(e){this.triggerEvent(this.onMouseLeave,{},e)}cellExists(e,i){return!(e<0||e>=this.getDataLength()||i<0||i>=this.columns.length)}getCellFromPoint(e,i){let o=this.getRowFromPosition(i),l=0,c=0;for(let u=0;u<this.columns.length&&c<=e;u++)!this.columns[u]||this.columns[u].hidden||(c+=this.columns[u].width,l++);return l-=1,o<-1&&(o=-1),{row:o,cell:l}}getCellFromNode(e){const i=/l\d+/.exec(e.className);if(!i)throw new Error(`SlickGrid getCellFromNode: cannot get cell - ${e.className}`);return parseInt(i[0].substr(1,i[0].length-1),10)}getRowFromNode(e){for(const i in this.rowsCache)if(this.rowsCache)for(const o in this.rowsCache[i].rowNode)if(this.rowsCache[i].rowNode?.[+o]===e)return i?parseInt(i,10):0;return null}getFrozenRowOffset(e){let i=0;return i=this.hasFrozenRows?this._options.frozenBottom?e>=this.actualFrozenRow?this.h<this.viewportTopH?this.actualFrozenRow*this._options.rowHeight:this.h:0:e>=this.actualFrozenRow?this.frozenRowsHeight:0:0,i}getCellFromEvent(e){const i=e instanceof wn?e.getNativeEvent():e;if(!i)return null;const o=i.touches?i.touches[0]:i,l=i.target.closest(".slick-cell");if(!l)return null;let c=this.getRowFromNode(l.parentNode);if(this.hasFrozenRows){let g=0;const y=(0,w.getOffset)(Je.parents(l,".grid-canvas")[0]);Je.parents(l,".grid-canvas-bottom").length&&(g=this._options.frozenBottom?Je.height(this._canvasTopL):this.frozenRowsHeight);const te=o.clientY-y.top+g+document.documentElement.scrollTop;c=this.getCellFromPoint(o.clientX-y.left,te).row}const u=this.getCellFromNode(l);return(0,w.isDefinedNumber)(c)&&(0,w.isDefinedNumber)(u)?{row:c,cell:u}:null}getCellNodeBox(e,i){if(!this.cellExists(e,i))return null;const o=this.getFrozenRowOffset(e),l=this.getRowTop(e)-o,c=l+this._options.rowHeight-1;let u=0;for(let M=0;M<i;M++)!this.columns[M]||this.columns[M].hidden||(u+=this.columns[M].width||0,this._options.frozenColumn===M&&(u=0));const g=u+(this.columns[i]?.width||0);var y={top:l,bottom:c};return y[rear]=u,y[front]=g,y}resetActiveCell(){this.setActiveCellInternal(null,!1)}focus(){this.setFocus()}setFocus(){-1===this.tabbingDirection?this._focusSink.focus():this._focusSink2.focus()}scrollCellIntoView(e,i,o){if(this.scrollRowIntoView(e,o),i<=this._options.frozenColumn)return;const l=this.getColspan(e,i);this.internalScrollColumnIntoView(this.columnPosLeft[i],this.columnPosRight[i+(l>1?l-1:0)])}internalScrollColumnIntoView(e,i){const o=this.scrollLeft+Je.width(this._viewportScrollContainerX)-(this.viewportHasVScroll&&this.scrollbarDimensions?.width||0);e<this.scrollLeft?(this._viewportScrollContainerX.scrollLeft=e,this.handleScroll(),this.render()):i>o&&(this._viewportScrollContainerX.scrollLeft=Math.min(e,i-this._viewportScrollContainerX.clientWidth),this.handleScroll(),this.render())}scrollColumnIntoView(e){this.internalScrollColumnIntoView(this.columnPosLeft[e],this.columnPosRight[e])}setActiveCellInternal(e,i,o,l,c){if((0,w.isDefined)(this.activeCellNode)&&(this.makeActiveCellNormal(),this.activeCellNode.classList.remove("active"),this.rowsCache[this.activeRow]?.rowNode?.forEach(u=>u.classList.remove("active"))),this.activeCellNode=e,(0,w.isDefined)(this.activeCellNode)){const u=(0,w.getOffset)(this.activeCellNode);let g=Math.floor((0,w.getOffset)(Je.parents(this.activeCellNode,".grid-canvas")[0]).top);const y=Je.parents(this.activeCellNode,".grid-canvas-bottom").length;this.hasFrozenRows&&y&&(g-=this._options.frozenBottom?Je.height(this._canvasTopL):this.frozenRowsHeight);const M=this.getCellFromPoint(u.left,Math.ceil(u.top)-g);this.activeRow=M.row,this.activeCell=this.activePosX=this.activeCell=this.activePosX=this.getCellFromNode(this.activeCellNode),!(0,w.isDefined)(i)&&this._options.autoEditNewRow&&(i=this.activeRow===this.getDataLength()||this._options.autoEdit),this._options.showCellSelection&&(this.activeCellNode.classList.add("active"),this.rowsCache[this.activeRow]?.rowNode?.forEach(V=>V.classList.add("active"))),this._options.editable&&i&&this.isCellPotentiallyEditable(this.activeRow,this.activeCell)&&(this._options.asyncEditorLoading?(clearTimeout(this.h_editorLoader),this.h_editorLoader=setTimeout(()=>{this.makeActiveCellEditable(void 0,o,c)},this._options.asyncEditorLoadDelay)):this.makeActiveCellEditable(void 0,o,c))}else this.activeRow=this.activeCell=null;l||this.triggerEvent(this.onActiveCellChanged,this.getActiveCell())}clearTextSelection(){if(document.selection?.empty)try{document.selection.empty()}catch{}else if(window.getSelection){const e=window.getSelection();e?.removeAllRanges&&e.removeAllRanges()}}isCellPotentiallyEditable(e,i){const o=this.getDataLength();return!(e<o&&!this.getDataItem(e)||this.columns[i].cannotTriggerInsert&&e>=o||!this.columns[i]||this.columns[i].hidden||!this.getEditor(e,i))}makeActiveCellNormal(e=!1){if(this.currentEditor){if(this.triggerEvent(this.onBeforeCellEditorDestroy,{editor:this.currentEditor}),this.currentEditor.destroy(),this.currentEditor=null,this.activeCellNode){const i=this.getDataItem(this.activeRow);if(this.activeCellNode.classList.remove("editable"),this.activeCellNode.classList.remove("invalid"),i){const o=this.columns[this.activeCell],c=this.getFormatter(this.activeRow,o)(this.activeRow,this.activeCell,this.getDataItemValueForColumn(i,o),o,i,this);this.applyFormatResultToCellNode(c,this.activeCellNode),this.invalidatePostProcessingResults(this.activeRow)}e&&this.setFocus()}navigator.userAgent.toLowerCase().match(/msie/)&&this.clearTextSelection(),this.getEditorLock()?.deactivate(this.editController)}}editActiveCell(e,i,o){this.makeActiveCellEditable(e,i,o)}_ColumnReadOnly=!1;makeActiveCellEditable(e,i,o){if(!this.activeCellNode)return;if(!this._options.editable)throw new Error("SlickGrid makeActiveCellEditable : should never get called when grid options.editable is false");if(clearTimeout(this.h_editorLoader),!this.isCellPotentiallyEditable(this.activeRow,this.activeCell))return void(this._ColumnReadOnly=!0);const l=this.columns[this.activeCell],c=this.getDataItem(this.activeRow);if(!1===this.triggerEvent(this.onBeforeEditCell,{row:this.activeRow,cell:this.activeCell,item:c,column:l,target:"grid"}).getReturnValue())return void this.setFocus();this.getEditorLock()?.activate(this.editController),this.activeCellNode.classList.add("editable");const u=e||this.getEditor(this.activeRow,this.activeCell);if("function"==typeof u){!e&&!u.suppressClearOnEdit&&(0,w.emptyElement)(this.activeCellNode);let g=this.data?.getItemMetadata?.(this.activeRow);g=g?.columns;const y=g&&(g[l.id]||g[this.activeCell]),M={grid:this,gridPosition:this.absBox(this._container),position:this.absBox(this.activeCellNode),container:this.activeCellNode,column:l,columnMetaData:y,item:c||{},event:o,commitChanges:this.commitEditAndSetFocus.bind(this),cancelChanges:this.cancelEditAndSetFocus.bind(this)};this.currentEditor=new u(M),c&&this.currentEditor&&(this.currentEditor.loadValue(c),i&&"function"==typeof this.currentEditor?.preClick&&this.currentEditor.preClick()),this.serializedEditorValue=this.currentEditor?.serializeValue(),this.currentEditor?.position&&this.handleActiveCellPositionChange()}}commitEditAndSetFocus(){this.getEditorLock()?.commitCurrentEdit()&&(this.setFocus(),this._options.autoEdit&&!this._options.autoCommitEdit&&this.navigateDown())}cancelEditAndSetFocus(){this.getEditorLock()?.cancelCurrentEdit()&&this.setFocus()}adjustXToRight(e){return document.body.offsetWidth-e}adjustXToLeft(e){return e}adjustX=this.adjustXToLeft;getOffsetLeft(e){return e.offsetLeft}getOffsetRight(e){return document.body.offsetWidth-(e.offsetLeft+e.offsetWidth)}getOffsetRear=this.getOffsetLeft;absBox(e){const i={top:e.offsetTop,left:e.offsetLeft,bottom:0,right:0,width:e.offsetWidth,height:e.offsetWidth,visible:!0};i.bottom=i.top+i.height,i.right=i.left+i.width,i[this.rear]=this.getOffsetRear(e),i.bottom=i.top+i.height,i[this.front]=i[this.rear]+i.width;let o=e.offsetParent;for(;(e=e.parentNode)!==document.body&&e&&e.parentNode;){const l=getComputedStyle(e);i.visible&&e.scrollHeight!==e.offsetHeight&&"visible"!==l.overflowY&&(i.visible=i.bottom>e.scrollTop&&i.top<e.scrollTop+e.clientHeight),i.visible&&e.scrollWidth!==e.offsetWidth&&"visible"!==l.overflowX&&(i.visible=i[this.front]>e[this.propScrollRear]&&i[this.rear]<e[this.propScrollRear]+e.clientWidth),i.left-=e.scrollLeft,i.top-=e.scrollTop,e===o&&(i.left+=e.offsetLeft,i.top+=e.offsetTop,o=e.offsetParent),i.bottom=i.top+i.height,i[this.front]=i[this.rear]+i.width}return i}getActiveCellPosition(){return this.absBox(this.activeCellNode)}getGridPosition(){return this.absBox(this._container)}handleActiveCellPositionChange(){if(this.activeCellNode&&(this.triggerEvent(this.onActiveCellPositionChanged,{}),this.currentEditor)){const e=this.getActiveCellPosition();this.currentEditor.show&&this.currentEditor.hide&&(e.visible?this.currentEditor.show():this.currentEditor.hide()),this.currentEditor.position&&this.currentEditor.position(e)}}getCellEditor(){return this.currentEditor}getActiveCell(){return this.activeCellNode?{row:this.activeRow,cell:this.activeCell}:null}getActiveCellNode(){return this.activeCellNode}getTextSelection(){let e=null;if(window.getSelection){const i=window.getSelection();(i?.rangeCount||0)>0&&(e=i.getRangeAt(0))}return e}setTextSelection(e){if(window.getSelection&&e){const i=window.getSelection();i&&(i.removeAllRanges(),i.addRange(e))}}scrollRowIntoView(e,i){if(!this.hasFrozenRows||!this._options.frozenBottom&&e>this.actualFrozenRow-1||this._options.frozenBottom&&e<this.actualFrozenRow-1){const o=Je.height(this._viewportScrollContainerY),l=this.hasFrozenRows&&!this._options.frozenBottom?e-this._options.frozenRow:e,c=l*this._options.rowHeight,u=(l+1)*this._options.rowHeight-o+(this.viewportHasHScroll&&this.scrollbarDimensions?.height||0);(l+1)*this._options.rowHeight>this.scrollTop+o+this.offset?(this.scrollTo(i?c:u),this.render()):l*this._options.rowHeight<this.scrollTop+this.offset&&(this.scrollTo(i?u:c),this.render())}}scrollRowToTop(e){this.scrollTo(e*this._options.rowHeight),this.render()}scrollPage(e){const i=e*this.numVisibleRows;if(this.scrollTo((this.getRowFromPosition(this.scrollTop+this._options.rowHeight-1)+i)*this._options.rowHeight),this.render(),this._options.enableCellNavigation&&(0,w.isDefined)(this.activeRow)){let l=this.activeRow+i;const c=this.getDataLengthIncludingAddNew();l>=c&&(l=c-1),l<0&&(l=0);let u=0,g=null;const y=this.activePosX;for(;u<=this.activePosX;)this.canCellBeActive(l,u)&&(g=u),u+=this.getColspan(l,u);null!==g?(this.setActiveCellInternal(this.getCellNode(l,g)),this.activePosX=y):this.resetActiveCell()}}navigatePageDown(){this.scrollPage(1)}navigatePageUp(){this.scrollPage(-1)}navigateTop(){this.navigateToRow(0)}navigateBottom(){return this.navigateToRow(this.getDataLength()-1)}navigateToRow(e){const i=this.getDataLength();if(!i)return!0;if(e<0?e=0:e>=i&&(e=i-1),this.scrollCellIntoView(e,0,!0),this._options.enableCellNavigation&&(0,w.isDefined)(this.activeRow)){let o=0,l=null;const c=this.activePosX;for(;o<=this.activePosX;)this.canCellBeActive(e,o)&&(l=o),o+=this.getColspan(e,o);null!==l?(this.setActiveCellInternal(this.getCellNode(e,l)),this.activePosX=c):this.resetActiveCell()}return!0}getColspan(e,i){const o=this.data?.getItemMetadata?.(e);if(!o||!o.columns)return 1;let c=(o.columns[this.columns[i].id]||o.columns[i])?.colspan;return c="*"===c?this.columns.length-i:c||1,c}findFirstFocusableCell(e){let i=0;for(;i<this.columns.length;){if(this.canCellBeActive(e,i))return i;i+=this.getColspan(e,i)}return null}findLastFocusableCell(e){let i=0,o=null;for(;i<this.columns.length;)this.canCellBeActive(e,i)&&(o=i),i+=this.getColspan(e,i);return o}gotoRight(e,i,o){if(i>=this.columns.length)return null;do{i+=this.getColspan(e,i)}while(i<this.columns.length&&!this.canCellBeActive(e,i));return i<this.columns.length?{row:e,cell:i,posX:i}:null}gotoLeft(e,i,o){if(i<=0)return null;const l=this.findFirstFocusableCell(e);if(null===l||l>=i)return null;let u,c={row:e,cell:l,posX:l},g=!0;for(;g;){if(u=this.gotoRight(c.row,c.cell,c.posX),!u)return g=!1,null;if(u.cell>=i)return g=!1,c;c=u}}gotoDown(e,i,o){let l;const c=this.getDataLengthIncludingAddNew();let u=!0;for(;u;){if(++e>=c)return u=!1,null;for(l=i=0;i<=o;)l=i,i+=this.getColspan(e,i);if(this.canCellBeActive(e,l))return u=!1,{row:e,cell:l,posX:o}}}gotoUp(e,i,o){let l,c=!0;for(;c;){if(--e<0)return c=!1,null;for(l=i=0;i<=o;)l=i,i+=this.getColspan(e,i);if(this.canCellBeActive(e,l))return c=!1,{row:e,cell:l,posX:o}}}gotoNext(e,i,o){if(!(0,w.isDefinedNumber)(e)&&!(0,w.isDefinedNumber)(i)&&(e=i=o=0,this.canCellBeActive(e,i)))return{row:e,cell:i,posX:i};const l=this.gotoRight(e,i,o);if(l)return l;let c=null;const u=this.getDataLengthIncludingAddNew();for(e===u-1&&e--;++e<u;)if(c=this.findFirstFocusableCell(e),null!==c)return{row:e,cell:c,posX:c};return null}gotoPrev(e,i,o){if(!(0,w.isDefinedNumber)(e)&&!(0,w.isDefinedNumber)(i)&&(e=this.getDataLengthIncludingAddNew()-1,i=o=this.columns.length-1,this.canCellBeActive(e,i)))return{row:e,cell:i,posX:i};let l,c;for(;!l&&(l=this.gotoLeft(e,i,o),!l);){if(--e<0)return null;i=0,c=this.findLastFocusableCell(e),null!==c&&(l={row:e,cell:c,posX:c})}return l}gotoRowStart(e,i,o){const l=this.findFirstFocusableCell(e);return null===l?null:{row:e,cell:l,posX:l}}gotoRowEnd(e,i,o){const l=this.findLastFocusableCell(e);return null===l?null:{row:e,cell:l,posX:l}}canAllowTab(e){return!(this.columns[e].DgCol.DisableTab&&1==this.columns[e].DgCol.DisableTab||1==this.columns[e].DgCol.ReadOnly)}navigateRight(){return this.navigate("right")}navigateLeft(){return this.navigate("left")}navigateDown(){return this.navigate("down")}navigateUp(){return this.navigate("up")}navigateNext(){return this.navigate("next")}navigatePrev(){return this.navigate("prev")}navigateRowStart(){return this.navigate("home")}navigateRowEnd(){return this.navigate("end")}navigate(e){if(!this._options.enableCellNavigation||!this.activeCellNode&&"prev"!==e&&"next"!==e)return!1;if(!this.getEditorLock()?.commitCurrentEdit())return!0;this.setFocus(),this.tabbingDirection={up:-1,down:1,left:-1,right:1,prev:-1,next:1,home:-1,end:1}[e];const c={up:this.gotoUp,down:this.gotoDown,left:this.gotoLeft,right:this.gotoRight,prev:this.gotoPrev,next:this.gotoNext,home:this.gotoRowStart,end:this.gotoRowEnd}[e].call(this,this.activeRow,this.activeCell,this.activePosX);if(c){const u=this.getDataLength();if(this.hasFrozenRows&&this._options.frozenBottom&&c.row===u)return;return(!this._options.frozenBottom&&c.row>=this.actualFrozenRow||this._options.frozenBottom&&c.row<this.actualFrozenRow)&&this.scrollCellIntoView(c.row,c.cell,!(c.row===u)&&this._options.emulatePagingWhenScrolling),this.setActiveCellInternal(this.getCellNode(c.row,c.cell)),this.activePosX=c.posX,!0}return this.setActiveCellInternal(this.getCellNode(this.activeRow,this.activeCell)),!1}getCellNode(e,i){if(this.rowsCache[e]){this.ensureCellNodesInRowsCache(e);try{return this.rowsCache[e].cellNodesByColumnIdx.length>i?this.rowsCache[e].cellNodesByColumnIdx[i]:null}catch{return this.rowsCache[e].cellNodesByColumnIdx[i]}}return null}setActiveCell(e,i,o,l,c){!this.initialized||!this._options.enableCellNavigation||e>this.getDataLength()||e<0||i>=this.columns.length||i<0||(this.scrollCellIntoView(e,i,!1),this.setActiveCellInternal(this.getCellNode(e,i),o,l,c))}setActiveRow(e,i,o){i??=0,!(!this.initialized||e>this.getDataLength()||e<0||i>=this.columns.length||i<0)&&(this.activeRow=e,o||this.scrollCellIntoView(e,i,!1))}canCellBeActive(e,i){if(!this._options.enableCellNavigation||e>=this.getDataLengthIncludingAddNew()||e<0||i>=this.columns.length||i<0||!this.columns[i]||this.columns[i].hidden)return!1;const o=this.data?.getItemMetadata?.(e);if(void 0!==o?.focusable)return!!o.focusable;const l=o?.columns;return void 0!==l?.[this.columns[i].id]?.focusable?!!l[this.columns[i].id].focusable:void 0!==l?.[i]?.focusable?!!l[i].focusable:!!this.columns[i].focusable}canCellBeSelected(e,i){if(e>=this.getDataLength()||e<0||i>=this.columns.length||i<0||!this.columns[i]||this.columns[i].hidden)return!1;const o=this.data?.getItemMetadata?.(e);if(void 0!==o?.selectable)return!!o.selectable;const l=o?.columns&&(o.columns[this.columns[i].id]||o.columns[i]);return void 0!==l?.selectable?!!l.selectable:!!this.columns[i].selectable}gotoCell(e,i,o,l){if(!this.initialized||!this.canCellBeActive(e,i)||!this.getEditorLock()?.commitCurrentEdit())return;this.scrollCellIntoView(e,i,!1);const c=this.getCellNode(e,i),u=this.columns[i],g=!!(this._options.editable&&u?.editorClass&&this._options.suppressActiveCellChangeOnEdit);this.setActiveCellInternal(c,o||e===this.getDataLength()||this._options.autoEdit,null,g,l),this.currentEditor||this.setFocus()}commitCurrentEdit(){const e=this,i=e.getDataItem(e.activeRow),o=e.columns[e.activeCell];if(e.currentEditor){if(e.currentEditor.isValueChanged()){const l=e.currentEditor.validate();if(l.valid){const c=e.activeRow,u=e.activeCell,g=e.currentEditor,y=e.currentEditor.serializeValue(),M=e.serializedEditorValue;if(e.activeRow<e.getDataLength()){const V={row:c,cell:u,editor:g,serializedValue:y,prevSerializedValue:M,execute:()=>{g.applyValue(i,y),e.updateRow(c),e.triggerEvent(e.onCellChange,{command:"execute",row:c,cell:u,item:i,column:o})},undo:()=>{g.applyValue(i,M),e.updateRow(c),e.triggerEvent(e.onCellChange,{command:"undo",row:c,cell:u,item:i,column:o})}};e._options.editCommandHandler?(e.makeActiveCellNormal(!0),e._options.editCommandHandler(i,o,V)):(V.execute(),e.makeActiveCellNormal(!0)),e.triggerEvent(e.onCellEndEdit,{row:e.activeRow,cell:e.activeCell,item:i,column:e.columns[e.activeCell],isValueChanged:!0})}else{const V={};e.currentEditor.applyValue(V,e.currentEditor.serializeValue()),e.makeActiveCellNormal(!0),e.triggerEvent(e.onAddNewRow,{item:V,column:o})}return!e.getEditorLock()?.isActive()}return e.triggerEvent(e.onCellEndEdit,{row:e.activeRow,cell:e.activeCell,item:i,column:e.columns[e.activeCell],isValueChanged:!1}),e.activeCellNode&&(e.activeCellNode.classList.remove("invalid"),Je.width(e.activeCellNode),e.activeCellNode.classList.add("invalid")),e.triggerEvent(e.onValidationError,{editor:e.currentEditor,cellNode:e.activeCellNode,validationResults:l,row:e.activeRow,cell:e.activeCell,column:o}),e.currentEditor.focus(),!1}e.triggerEvent(e.onCellEndEdit,{row:e.activeRow,cell:e.activeCell,item:i,column:e.columns[e.activeCell],isValueChanged:!1}),e.makeActiveCellNormal(!0)}return!0}cancelCurrentEdit(){return this.makeActiveCellNormal(),!0}rowsToRanges(e){const i=[],o=this.columns.length-1;for(let l=0;l<e.length;l++)i.push(new ds(e[l],0,e[l],o));return i}getSelectedRows(){if(!this.selectionModel)throw new Error("SlickGrid Selection model is not set");return this.selectedRows.slice(0)}setSelectedRows(e,i){if(!this.selectionModel)throw new Error("SlickGrid Selection model is not set");const o=this.getEditorLock();"function"==typeof o?.isActive&&!o.isActive()&&this.selectionModel.setSelectedRanges(this.rowsToRanges(e),i||"SlickGrid.setSelectedRows")}sanitizeHtmlString(e){return"function"==typeof this._options?.sanitizer&&e&&"string"==typeof e?this._options.sanitizer(e):e}}class Zd{constructor(e){this.pluginName="AutoTooltips",this._defaults={enableForCells:!0,enableForHeaderCells:!1,maxToolTipLength:void 0,replaceExisting:!0},this._eventHandler=new tn,this._addonOptions=e}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}init(e){this._addonOptions={...this._defaults,...this.addonOptions},this._grid=e,this._addonOptions.enableForCells&&this._eventHandler.subscribe(this._grid.onMouseEnter,this.handleMouseEnter.bind(this)),this._addonOptions.enableForHeaderCells&&this._eventHandler.subscribe(this._grid.onHeaderMouseEnter,this.handleHeaderMouseEnter.bind(this))}destroy(){this.dispose()}dispose(){this._eventHandler?.unsubscribeAll()}handleMouseEnter(e){const i=this._grid.getCellFromEvent(e);if(i){let l,o=this._grid.getCellNode(i.row,i.cell);this._addonOptions&&o&&(!o.title||this._addonOptions?.replaceExisting)&&(o.clientWidth<o.scrollWidth?(l=o.textContent?.trim()??"",this._addonOptions?.maxToolTipLength&&l.length>this._addonOptions?.maxToolTipLength&&(l=l.substring(0,this._addonOptions.maxToolTipLength-3)+"...")):l="",o.title=l),o=null}}handleHeaderMouseEnter(e,i){const o=i.column;let l;const c=e.target;c&&(l=c.closest(".slick-header-column"),l&&!o?.toolTip)&&(l.title=(0,w.stripTags)((0,w.getHtmlStringOutput)(c.clientWidth<l.clientWidth?o?.name??"":"","innerHTML"))),l=null}}class vr{constructor(){this.pluginName="CellExcelCopyManager",this._eventHandler=new tn,this._bindingEventService=new Ft.P}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get commandQueue(){return this._commandQueue}get gridOptions(){return this._grid?.getOptions()??{}}get undoRedoBuffer(){return this._undoRedoBuffer}init(e,i){this._grid=e,this.createUndoRedoBuffer(),this._cellSelectionModel=new Lf,this._grid.setSelectionModel(this._cellSelectionModel),this._bindingEventService.bind(document.body,"keydown",this.handleBodyKeyDown.bind(this)),this._addonOptions={...this.getDefaultOptions(),...i},this._cellExternalCopyManagerPlugin=new Nf,this._cellExternalCopyManagerPlugin.init(this._grid,this._addonOptions),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onCopyCells,(o,l)=>{this._addonOptions&&"function"==typeof this._addonOptions.onCopyCells&&this._addonOptions.onCopyCells(o,l)}),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onCopyCancelled,(o,l)=>{this._addonOptions&&"function"==typeof this._addonOptions.onCopyCancelled&&this._addonOptions.onCopyCancelled(o,l)}),this._eventHandler.subscribe(this._cellExternalCopyManagerPlugin.onPasteCells,(o,l)=>{this._addonOptions&&"function"==typeof this._addonOptions.onPasteCells&&this._addonOptions.onPasteCells(o,l)})}dispose(){this._eventHandler.unsubscribeAll(),this._bindingEventService.unbindAll(),this._cellSelectionModel?.dispose(),this._cellExternalCopyManagerPlugin?.dispose()}createUndoRedoBuffer(){let e=0;this._commandQueue=[],this._undoRedoBuffer={queueAndExecuteCommand:i=>{this._commandQueue[e]=i,e++,i.execute()},undo:()=>{if(0===e)return;e--;const i=this._commandQueue[e];i&&yl.cancelCurrentEdit()&&i.undo()},redo:()=>{if(e>=this._commandQueue.length)return;const i=this._commandQueue[e];e++,i&&yl.cancelCurrentEdit()&&i.execute()}}}getDefaultOptions(){let e=0;return{clipboardCommandHandler:i=>{this._undoRedoBuffer.queueAndExecuteCommand.call(this._undoRedoBuffer,i)},dataItemColumnValueExtractor:(i,o,l=0,c=0)=>{const u=this._grid.getActiveCell(),g=this._grid.getCellEditor()&&u?.row===l&&u?.cell===c;if((!this.gridOptions.editable||!o.editor||!g||this.addonOptions?.copyActiveEditorCell)&&o.formatter&&(void 0!==o.exportWithFormatter?o.exportWithFormatter:this.gridOptions.textExportOptions?.exportWithFormatter)){const V=o.formatter(l,c,i[o.field],o,i,this._grid),te=(0,w.isPrimitiveOrHTML)(V)?V:V.html||V.text;if(o.sanitizeDataExport||this.gridOptions.textExportOptions?.sanitizeDataExport){const ve=te instanceof HTMLElement?te.innerHTML:te;return(0,w.stripTags)(ve??"")}return V}return null},readOnlyMode:!1,includeHeaderWhenCopying:!1,newRowCreator:i=>{for(let o=0;o<i;o++)this._grid.getData().addItem({[this.gridOptions.datasetIdPropertyName||"id"]:"newRow_"+e++})},replaceNewlinesWith:!1,removeDoubleQuotesOnPaste:!1}}handleBodyKeyDown(e){"Z"===e.key&&(e.ctrlKey||e.metaKey)&&(e.shiftKey?this._undoRedoBuffer.redo():this._undoRedoBuffer.undo())}}const qd=()=>{};class Nf{constructor(){this.pluginName="CellExternalCopyManager",this._bodyElement=document.body,this._copiedCellStyle="copied",this._copiedCellStyleLayerKey="copy-manager",this._copiedRanges=null,this.onCopyCells=new Dt("onCopyCells"),this.onCopyCancelled=new Dt("onCopyCancelled"),this.onPasteCells=new Dt("onPasteCells"),this.onBeforePasteCell=new Dt("onBeforePasteCell"),this._eventHandler=new tn}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}init(e,i){this._grid=e,this._addonOptions={...this._addonOptions,...i},this._copiedCellStyleLayerKey=this._addonOptions.copiedCellStyleLayerKey||"copy-manager",this._copiedCellStyle=this._addonOptions.copiedCellStyle||"copied",this._bodyElement=this._addonOptions.bodyElement||document.body,this._onCopyInit=this._addonOptions.onCopyInit||void 0,this._onCopySuccess=this._addonOptions.onCopySuccess||void 0;const o=e.getPubSubService();o&&Je.addSlickEventPubSubWhenDefined(o,this),this._eventHandler.subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this));const l=e.getSelectionModel();if(!l)throw new Error("Selection model is mandatory for this plugin. Please set a selection model on the grid before adding this plugin: grid.setSelectionModel(new SlickCellSelectionModel())");if(this._eventHandler.subscribe(l.onSelectedRangesChanged,()=>{this._grid.getEditorLock().isActive()||this._grid.focus()}),e&&"function"==typeof this._addonOptions?.onBeforePasteCell){const c=e?.getData();this._eventHandler.subscribe(this.onBeforePasteCell,(u,g)=>{const y=e.getColumns()[g.cell],M={row:g.row,cell:g.cell,dataView:c,grid:e,columnDef:y,dataContext:e.getDataItem(g.row)};return this._addonOptions.onBeforePasteCell?.(u,M)})}}dispose(){this._eventHandler.unsubscribeAll()}clearCopySelection(){this._grid.removeCellCssStyles(this._copiedCellStyleLayerKey)}getHeaderValueForColumn(e){if("function"==typeof this._addonOptions.headerColumnValueExtractor){const i=(0,w.getHtmlStringOutput)(this._addonOptions.headerColumnValueExtractor(e),"innerHTML");if(i)return(0,w.stripTags)(i)}return(0,w.getHtmlStringOutput)(e.name||"","innerHTML")}getDataItemValueForColumn(e,i,o,l,c){if("function"==typeof this._addonOptions.dataItemColumnValueExtractor){const g=this._addonOptions.dataItemColumnValueExtractor(e,i,o,l);if(g)return g instanceof HTMLElement?(0,w.stripTags)(g.innerHTML):g}let u="";if(i)if(i.editorClass){const g=document.createElement("p"),y=new i.editorClass({container:g,column:i,event:c,position:{top:0,left:0},gridPosition:{top:0,left:0},grid:this._grid,cancelChanges:qd,commitChanges:qd});y.loadValue(e),u=y.serializeValue(),y.destroy(),g.remove()}else u=e[i.field||""];return u}setDataItemValueForColumn(e,i,o){if(!i?.denyPaste){if(this._addonOptions.dataItemColumnValueSetter){const l=this._addonOptions.dataItemColumnValueSetter(e,i,o);if(!0!==l)return l}if(i.editorClass){const l=document.createElement("div"),c=new i.editorClass({container:l,column:i,event:null,position:{top:0,left:0},gridPosition:{top:0,left:0},grid:this._grid,cancelChanges:qd,commitChanges:qd});c.loadValue(e);const u=c.validate(void 0,o);if(!u.valid){const g=this._grid.getActiveCell();this._grid.onValidationError.notify({editor:c,cellNode:this._grid.getActiveCellNode(),validationResults:u,row:g?.row,cell:g?.cell,column:i,grid:this._grid})}c.applyValue(e,o),c.destroy(),l.remove()}else e[i.field]=o}}setIncludeHeaderWhenCopying(e){this._addonOptions.includeHeaderWhenCopying=e}createTextBox(e){const i=(0,w.createDomElement)("textarea",{value:e,style:{position:"absolute",left:"-1000px",top:`${document.body.scrollTop}px`}},this._bodyElement);return i.select(),i}decodeTabularData(e,i){const o=e.getColumns(),c=i.value.split(/[\n\f\r](?=(?:[^"]*"[^"]*")*[^"]*$)/);""===c[c.length-1]&&c.pop();let u=0;const g=[];this._bodyElement.removeChild(i);for(const rt of c)rt.startsWith('"')&&rt.endsWith('"')?g[u++]=[rt.replaceAll("\n",this._addonOptions.replaceNewlinesWith||"\n").replaceAll("\r","").replaceAll('"',this._addonOptions.removeDoubleQuotesOnPaste?"":'"')]:g[u++]=rt.split("\t");const y=this._grid.getActiveCell(),M=this._grid.getSelectionModel()?.getSelectedRanges(),V=M?.length?M[0]:null;let te,ve;if(V)te=V.fromRow,ve=V.fromCell;else{if(!y)return;te=y.row,ve=y.cell}let Ae=!1,ze=g.length,Ye=g.length?g[0].length:0;1===g.length&&1===g[0].length&&V&&(Ae=!0,ze=V.toRow-V.fromRow+1,Ye=V.toCell-V.fromCell+1);const nt=this._grid.getData().length-te;let et=0;if(nt<ze&&"function"==typeof this._addonOptions.newRowCreator){const rt=this._grid.getData();for(et=1;et<=ze-nt;et++)rt.push({});this._grid.setData(rt),this._grid.render()}if(te+ze>this._grid.getDataLength()&&"function"==typeof this._addonOptions.newRowCreator){const rt=te+ze-this._grid.getDataLength();this._addonOptions.newRowCreator(rt)}const gt={isClipboardCommand:!0,clippedRange:g,oldValues:[],cellExternalCopyManager:this,_options:this._addonOptions,setDataItemValueForColumn:this.setDataItemValueForColumn,markCopySelection:this.markCopySelection,oneCellToMultiple:Ae,activeRow:te,activeCell:ve,destH:ze,destW:Ye,maxDestY:this._grid.getDataLength(),maxDestX:this._grid.getColumns().length,h:0,w:0,execute:()=>{gt.h=0;for(let At=0;At<gt.destH;At++){gt.oldValues[At]=[],gt.w=0,gt.h++;for(let Nt=0;Nt<gt.destW;Nt++){gt.w++;const ln=te+At,kt=ve+Nt;if(ln<gt.maxDestY&&kt<gt.maxDestX){const un=this._grid.getDataItem(ln);if(!1===this._grid.triggerEvent(this.onBeforePasteCell,{row:ln,cell:kt,dt:un,column:o[kt],target:"grid"}).getReturnValue())continue;gt.oldValues[At][Nt]=un[o[kt].field],this.setDataItemValueForColumn(un,o[kt],Ae?g[0][0]:g[At]?g[At][Nt]:""),this._grid.updateCell(ln,kt),this._grid.onCellChange.notify({row:ln,cell:kt,item:un,grid:this._grid,column:{}})}}}const rt=new ds(te,ve,te+gt.h-1,ve+gt.w-1);this.markCopySelection([rt]),this._grid.getSelectionModel()?.setSelectedRanges([rt]),this.onPasteCells.notify({ranges:[rt]})},undo:()=>{for(let At=0;At<gt.destH;At++)for(let Nt=0;Nt<gt.destW;Nt++){const ln=te+At,kt=ve+Nt;if(ln<gt.maxDestY&&kt<gt.maxDestX){const un=this._grid.getDataItem(ln);this.setDataItemValueForColumn(un,o[kt],Ae?gt.oldValues[0][0]:gt.oldValues[At][Nt]),this._grid.updateCell(ln,kt),this._grid.onCellChange.notify({row:ln,cell:kt,item:un,grid:this._grid,column:{}})}}const rt=new ds(te,ve,te+gt.h-1,ve+gt.w-1);if(this.markCopySelection([rt]),this._grid.getSelectionModel()?.setSelectedRanges([rt]),this.onPasteCells.notify({ranges:[rt]}),"function"==typeof this._addonOptions.onPasteCells&&this._addonOptions.onPasteCells(new wn,{ranges:[rt]}),et>1){const At=this._grid.getData();for(;et>1;et--)At.splice(At.length-1,1);this._grid.setData(At),this._grid.render()}}};this._addonOptions.clipboardCommandHandler?this._addonOptions.clipboardCommandHandler(gt):gt.execute()}handleKeyDown(e){let i;if(!this._grid.getEditorLock().isActive()||this._grid.getOptions().autoEdit){if("Escape"===e.key&&this._copiedRanges&&(e.preventDefault(),this.clearCopySelection(),this.onCopyCancelled.notify({ranges:this._copiedRanges}),"function"==typeof this._addonOptions.onCopyCancelled&&this._addonOptions.onCopyCancelled(e,{ranges:this._copiedRanges}),this._copiedRanges=null),("c"===e.key||"Insert"===e.key)&&(e.ctrlKey||e.metaKey)&&!e.shiftKey&&("function"==typeof this._onCopyInit&&this._onCopyInit.call(this),i=this._grid.getSelectionModel()?.getSelectedRanges()??[],0!==i.length)){this._copiedRanges=i,this.markCopySelection(i),this.onCopyCells.notify({ranges:i}),"function"==typeof this._addonOptions.onCopyCells&&this._addonOptions.onCopyCells(e,{ranges:i});const o=this._grid.getColumns();let l="";for(let c=0;c<i.length;c++){const u=i[c],g=[];for(let y=u.fromRow;y<u.toRow+1;y++){const M=[],V=this._grid.getDataItem(y);if(0===g.length&&this._addonOptions.includeHeaderWhenCopying){const te=[];for(let ve=u.fromCell;ve<u.toCell+1;ve++)(o[ve].name instanceof HTMLElement?(0,w.stripTags)(o[ve].name.innerHTML):o[ve].name).length>0&&!o[ve].hidden&&te.push(this.getHeaderValueForColumn(o[ve]));g.push(te.join("\t"))}for(let te=u.fromCell;te<u.toCell+1;te++)(o[te].name instanceof HTMLElement?(0,w.stripTags)(o[te].name.innerHTML):o[te].name).length>0&&!o[te].hidden&&M.push(this.getDataItemValueForColumn(V,o[te],y,te,e));g.push(M.join("\t"))}l+=g.join("\r\n")+"\r\n"}if(window.clipboardData)return window.clipboardData.setData("Text",l),!0;{const c=document.activeElement,u=this.createTextBox(l);return u.focus(),window.setTimeout(()=>{this._bodyElement.removeChild(u),c?c.focus():console.log("No element to restore focus to after copy?")},this.addonOptions?.clipboardPasteDelay??100),"function"==typeof this._onCopySuccess&&this._onCopySuccess(1===i.length?i[0].toRow+1-i[0].fromRow:i.length),!1}}if(!this._addonOptions.readOnlyMode&&("v"===e.key&&(e.ctrlKey||e.metaKey)&&!e.shiftKey||"Insert"===e.key&&e.shiftKey&&!e.ctrlKey)){const o=this.createTextBox("");return window.setTimeout(()=>this.decodeTabularData(this._grid,o),this.addonOptions?.clipboardPasteDelay??100),!1}}}markCopySelection(e){this.clearCopySelection();const i=this._grid.getColumns(),o={};for(const l of e)for(let c=l.fromRow;c<=l.toRow;c++){o[c]={};for(let u=l.fromCell;u<=l.toCell&&u<i.length;u++)o[c][i[u].id]=this._copiedCellStyle}this._grid.setCellCssStyles(this._copiedCellStyleLayerKey,o),window.clearTimeout(this._clearCopyTI),this._clearCopyTI=window.setTimeout(()=>this.clearCopySelection(),this.addonOptions?.clearCopySelectionDelay||2e3)}}class Fa{constructor(e,i,o){this.extensionUtility=e,this.pubSubService=i,this.sharedService=o,this._addonOptions={},this._camelPluginName="",this._gridUid="",this._menuCssPrefix="",this._menuPluginCssPrefix="",this._bindEventService=new Ft.P,this._eventHandler=new tn}get addonOptions(){return this._addonOptions}set addonOptions(e){this._addonOptions=e}get eventHandler(){return this._eventHandler}get grid(){return this.sharedService.slickGrid}get gridOptions(){return this.sharedService.gridOptions??{}}get gridUid(){return this._gridUid||(this.grid?.getUID()??"")}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get menuCssClass(){return this._menuPluginCssPrefix||this._menuCssPrefix}get menuElement(){return this._menuElm||document.querySelector(`.${this.menuCssClass}${this.gridUidSelector}`)}dispose(){this._eventHandler?.unsubscribeAll(),this._bindEventService.unbindAll(),this.pubSubService.unsubscribeAll(),this._commandTitleElm?.remove(),this._optionTitleElm?.remove(),this.disposeAllMenus(),(0,w.emptyElement)(this._menuElm),this.menuElement?.remove(),this._menuElm?.remove()}disposeAllMenus(){this.disposeSubMenus(),this._bindEventService.unbindAll("parent-menu"),document.querySelectorAll(`.${this.menuCssClass}${this.gridUidSelector}`).forEach(e=>e.remove())}disposeSubMenus(){this._bindEventService.unbindAll("sub-menu"),document.querySelectorAll(`.${this.menuCssClass}.slick-submenu${this.gridUidSelector}`).forEach(e=>e.remove())}setOptions(e){this._addonOptions={...this._addonOptions,...e}}addSubMenuTitleWhenExists(e,i){if("divider"!==e&&e?.subMenuTitle){const o=document.createElement("div");o.className="slick-menu-title",o.textContent=e.subMenuTitle;const l=e.subMenuTitleCssClass;l&&o.classList.add(...(0,w.classNameToList)(l)),i.appendChild(o)}}populateCommandOrOptionItems(e,i,o,l,c,u,g){if(c&&l&&i)for(const y of l)this.populateSingleCommandOrOptionItem(e,i,o,y,c,u,g)}populateCommandOrOptionTitle(e,i,o,l){if(i){const c=l>0,u=this._menuElm?.querySelector(`.slick-${e}-header`)??(0,w.createDomElement)("div",{className:`slick-${e}-header`}),g=`${e}Title`;c||(i?.[g]?((0,w.emptyElement)(u),this[`_${e}TitleElm`]=(0,w.createDomElement)("span",{className:"slick-menu-title",textContent:i[g]}),u.appendChild(this[`_${e}TitleElm`]),u.classList.add("with-title")):u.classList.add("no-title"),o.appendChild(u))}}populateSingleCommandOrOptionItem(e,i,o,l,c,u,g){let y=null;if(c&&l&&i){const M=c?.level||0,te=`${this._menuCssPrefix}${"headerButtons"===this._camelPluginName?"":"-item"}`;let ve=!0,Ae=!0;if("object"==typeof l&&(ve=this.extensionUtility.runOverrideFunctionWhenExists(l.itemVisibilityOverride,c),Ae=this.extensionUtility.runOverrideFunctionWhenExists(l.itemUsabilityOverride,c)),!ve)return null;if("object"==typeof l&&l.itemUsabilityOverride&&(l.disabled=!Ae),y=(0,w.createDomElement)("li",{className:te,role:"menuitem"}),"object"==typeof l&&(0,w.isDefined)(l[e])&&(y.dataset[e]=l?.[e]),o&&o.appendChild(y),"object"==typeof l&&l.divider||"divider"===l)return y.classList.add(`${te}-divider`),y;if(l.disabled&&y.classList.add(`${te}-disabled`),(l.hidden||l.showOnHover)&&y.classList.add(`${te}-hidden`),l.cssClass&&y.classList.add(...(0,w.classNameToList)(l.cssClass)),l.tooltip&&(y.title=l.tooltip),"headerButtons"!==this._camelPluginName){const Ye=(0,w.createDomElement)("div",{className:`${this._menuCssPrefix}-icon`});y.appendChild(Ye),l.iconCssClass?Ye.classList.add(...(0,w.classNameToList)(l.iconCssClass)):!l.commandItems&&!l.optionItems&&(Ye.textContent="\u25e6");const nt=(0,w.createDomElement)("span",{className:`${this._menuCssPrefix}-content`,textContent:"object"==typeof l&&l.title||""},y);l.textCssClass&&nt.classList.add(...(0,w.classNameToList)(l.textCssClass))}const ze=M>0?"sub-menu":"parent-menu";if(this._bindEventService.bind(y,"click",Ye=>u.call(this,Ye,e,l,M,c?.column),void 0,ze),"mouseover"===this._addonOptions?.subMenuOpenByEvent&&"function"==typeof g&&this._bindEventService.bind(y,"mouseover",Ye=>g.call(this,Ye,e,l,M,c?.column),void 0,ze),l.commandItems||l.optionItems){const Ye=document.createElement("span");Ye.className="sub-item-chevron",this._addonOptions.subItemChevronClass?Ye.classList.add(...(0,w.classNameToList)(this._addonOptions.subItemChevronClass)):Ye.textContent="\u2b9e",y.classList.add("slick-submenu-item"),y.appendChild(Ye)}}return y}}class Lh extends Fa{constructor(e,i,o){super(e,i,o),this.extensionUtility=e,this.pubSubService=i,this.sharedService=o,this._currentCell=-1,this._currentRow=-1,this._lastMenuTypeClicked="",this._subMenuParentId=""}createParentMenu(e){this.menuElement?.remove(),this._menuElm=void 0;const i=this.grid.getCellFromEvent(e);if(i){this._currentCell=i.cell??0,this._currentRow=i.row??0;const o=this._addonOptions?.commandItems||[],l=this._addonOptions?.optionItems||[],c={cell:this._currentCell,row:this._currentRow,grid:this.grid};if(this.closeMenu(e,c),"function"==typeof e.stopPropagation&&(this.pubSubService.publish(`on${(0,w.titleCase)(this._camelPluginName)}BeforeMenuShow`,c),"function"==typeof this.addonOptions?.onBeforeMenuShow&&!1===this.addonOptions.onBeforeMenuShow(e,c))||(this._menuElm=this.createMenu(o,l),this._menuElm&&(this._menuElm.style.top=`${(e.pageY||0)+5}px`,this._menuElm.style.left=`${e.pageX}px`,this._menuElm.style.display="block",document.body.appendChild(this._menuElm)),this.pubSubService.publish(`on${(0,w.titleCase)(this._camelPluginName)}AfterMenuShow`,c),"function"==typeof this.addonOptions?.onAfterMenuShow&&!1===this.addonOptions.onAfterMenuShow(e,c)))return}return this._menuElm}createMenu(e,i,o=0,l){const c=this.grid.getColumns()[this._currentCell],u=this.grid.getDataItem(this._currentRow),g=l?.command||l?.option;let y=1===o&&g?String(g).replace(/\s/g,""):"";y&&(this._subMenuParentId=y),o>1&&(y=this._subMenuParentId);let M=!0,V=!0;if("contextMenu"===this._camelPluginName){if(M=this.checkIsColumnAllowed(this._addonOptions?.optionShownOverColumnIds??[],c.id),V=this.checkIsColumnAllowed(this._addonOptions?.commandShownOverColumnIds??[],c.id),!c||!(V&&e.length||M&&i.length))return void this.hideMenu()}else if(!c||!c.cellMenu||!e.length&&!i.length)return;const te=`${this.menuCssClass} slick-menu-level-${o} ${this.gridUid}`,ve=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${o}${this.gridUidSelector}`);if(ve){if(ve.dataset.subMenuParent===y)return ve;this.disposeSubMenus()}const Ae=document.createElement("div");Ae.className=te,o>0&&(Ae.classList.add("slick-submenu"),this.gridOptions?.darkMode&&Ae.classList.add("slick-dark-mode"),y&&(Ae.dataset.subMenuParent=y));const ze=isNaN(this.addonOptions.maxHeight)?this.addonOptions.maxHeight:`${this.addonOptions.maxHeight??0}px`,Ye=isNaN(this.addonOptions.maxWidth)?this.addonOptions.maxWidth:`${this.addonOptions.maxWidth??0}px`;ze&&(Ae.style.maxHeight=ze),Ye&&(Ae.style.maxWidth=Ye),this.addonOptions?.width&&(Ae.style.width=(0,w.findWidthOrDefault)(this.addonOptions?.width));const nt=(0,w.createDomElement)("button",{ariaLabel:"Close",className:"close",type:"button",textContent:"\xd7",dataset:{dismiss:this._menuCssPrefix}});if(!this.addonOptions.hideOptionSection&&M&&i.length>0){const et=(0,w.createDomElement)("div",{className:`${this._menuCssPrefix}-option-list`,role:"menu"},Ae);this.populateCommandOrOptionTitle("option",this.addonOptions,et,o),!this.addonOptions.hideCloseButton&&o<1&&this.populateCommandOrOptionCloseBtn("option",nt,et),l&&o>0&&this.addSubMenuTitleWhenExists(l,et),this.populateCommandOrOptionItems("option",this.addonOptions,et,i,{cell:this._currentCell,row:this._currentRow,column:c,dataContext:u,grid:this.grid,level:o},this.handleMenuItemCommandClick,this.handleMenuItemMouseOver)}if(!this.addonOptions.hideCommandSection&&V&&e.length>0){const et=(0,w.createDomElement)("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},Ae);this.populateCommandOrOptionTitle("command",this.addonOptions,et,o),!this.addonOptions.hideCloseButton&&o<1&&(!M||0===i.length||this.addonOptions.hideOptionSection)&&this.populateCommandOrOptionCloseBtn("command",nt,et),l&&o>0&&this.addSubMenuTitleWhenExists(l,et),this.populateCommandOrOptionItems("command",this.addonOptions,et,e,{cell:this._currentCell,row:this._currentRow,column:c,dataContext:u,grid:this.grid,level:o},this.handleMenuItemCommandClick,this.handleMenuItemMouseOver)}return o++,Ae}closeMenu(e,i){if(this.menuElement){if("function"==typeof this.addonOptions?.onBeforeMenuClose&&!1===this.addonOptions.onBeforeMenuClose(e,i))return;this.hideMenu()}}hideMenu(){this.menuElement?.remove(),this._menuElm=null,this.disposeSubMenus()}checkIsColumnAllowed(e,i){return!(e?.length>0)||e.findIndex(o=>o===i)>=0}handleBodyMouseDown(e){if(this.menuElement){let i=!1;const o=e.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(e.target)||o)&&(i=!0),(this.menuElement!==e.target&&!i&&!e.defaultPrevented||"close"===e.target.className&&o)&&this.closeMenu(e,{cell:this._currentCell,row:this._currentRow,grid:this.grid})}}handleCloseButtonClicked(e){e.defaultPrevented||this.closeMenu(e,{cell:0,row:0,grid:this.grid})}handleMenuItemMouseOver(e,i,o,l=0){void 0!==o?.[i]&&"divider"!==o&&!o.disabled&&!o.divider&&(o.commandItems||o.optionItems?(this.repositionSubMenu(o,i,l,e),this._lastMenuTypeClicked=i):0===l&&this.disposeSubMenus())}handleMenuItemCommandClick(e,i,o,l=0){if(void 0!==o?.[i]&&"divider"!==o&&!o.disabled&&!o.divider&&void 0!==this._currentCell&&void 0!==this._currentRow){if("option"===i&&!this.grid.getEditorLock().commitCurrentEdit())return;const c=this._currentCell,u=this._currentRow,g=this.grid.getColumns()[this._currentCell],y=this.grid.getDataItem(this._currentRow),M=void 0!==o[i]?o[i]:"";if(void 0===M||o[`${i}Items`])(o.commandItems||o.optionItems)&&this.repositionSubMenu(o,i,l,e);else{const V={cell:this._currentCell,row:this._currentRow,grid:this.grid,[i]:M,item:o,column:g,dataContext:y},te="command"===i?"onCommand":"onOptionSelected";this.pubSubService.publish(`${this._camelPluginName}:${te}`,V),"function"==typeof this._addonOptions?.[te]&&this._addonOptions[te](e,V),"function"==typeof o.action&&o.action.call(this,e,V),e.defaultPrevented||this.closeMenu(e,{cell:c,row:u,grid:this.grid})}this._lastMenuTypeClicked=i}}populateCommandOrOptionCloseBtn(e,i,o){this._bindEventService.bind(i,"click",c=>this.handleCloseButtonClicked(c),void 0,"parent-menu");const l=o.querySelector(`.slick-${e}-header`)??(0,w.createDomElement)("div",{className:`slick-${e}-header`});l?.appendChild(i),o.appendChild(l),l.classList.add("with-close")}repositionSubMenu(e,i,o,l){(l.target.classList.contains("slick-cell")||this._lastMenuTypeClicked!==i)&&this.disposeSubMenus();const c=this.createMenu(e?.commandItems||[],e?.optionItems||[],o+1,e);c&&(c.style.display="block",document.body.appendChild(c),this.repositionMenu(l,c))}repositionMenu(e,i){const o=i?.classList.contains("slick-submenu"),l=e.target.closest(o?`.${this._menuCssPrefix}-item`:".slick-cell");if(i&&l){i.style.top="0px",i.style.left="0px";const c=e?.touches?.[0]??e,u=(0,w.getOffset)(l);let g=l&&"cellMenu"===this._camelPluginName?u.left:c.pageX,y=l&&"cellMenu"===this._camelPluginName?u.top:c.pageY;o&&"contextMenu"===this._camelPluginName&&(g=u.left,y=u.top);const M=l.offsetWidth||0,V=i?.offsetHeight||0,te=i?.offsetWidth||this._addonOptions.width||0,ve=this.gridOptions.rowHeight||0,Ae=Number(this._addonOptions.autoAdjustDropOffset||0),ze=Number(this._addonOptions.autoAlignSideOffset||0);if(this._addonOptions.autoAdjustDrop||this._addonOptions.dropDirection){const{bottom:Ye,top:nt}=(0,w.calculateAvailableSpace)(l),et=Ye+Ae-ve;"top"==(et<V&&nt-Ae+ve>et?"top":"bottom")||"top"===this._addonOptions.dropDirection?(i.classList.remove("dropdown"),i.classList.add("dropup"),y-=o?V-Ae-l.clientHeight:V-Ae):(i.classList.remove("dropup"),i.classList.add("dropdown"),y+=Ae,"cellMenu"===this._camelPluginName&&(y+=o?Ae:ve+Ae))}if(this._addonOptions.autoAlignSide||"left"===this._addonOptions.dropSide){const Ye=this.grid.getGridPosition();let nt=g+Number(te);o&&(nt+=l.clientWidth);const et=document.documentElement.clientWidth;"left"==(nt>=Ye.width||nt>=et?"left":"right")||!o&&"left"===this._addonOptions.dropSide?(i.classList.remove("dropright"),i.classList.add("dropleft"),g-="cellMenu"!==this._camelPluginName||o?Number(te)-ze:Number(te)-M-ze):(i.classList.remove("dropleft"),i.classList.add("dropright"),g+=o?ze+l.offsetWidth:ze)}i.style.top=`${y}px`,i.style.left=`${g}px`}}}class wh extends Lh{constructor(e,i,o){super(e,i,o),this.extensionUtility=e,this.pubSubService=i,this.sharedService=o,this.pluginName="CellMenu",this._defaults={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!0,subMenuOpenByEvent:"mouseover"},this._camelPluginName="cellMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-cell-menu",this.init(o.gridOptions.cellMenu)}init(e){this._addonOptions={...this._defaults,...e},this.sortMenuItems(this.sharedService.allColumns),this._eventHandler.subscribe(this.grid.onClick,this.handleCellClick.bind(this)),this._addonOptions.hideMenuOnScroll&&this._eventHandler.subscribe(this.grid.onScroll,this.closeMenu.bind(this))}translateCellMenu(){const e=this.sharedService?.gridOptions,i=this.sharedService.allColumns;e?.enableTranslate&&Array.isArray(i)&&i.forEach(o=>{if(o?.cellMenu&&(Array.isArray(o.cellMenu.commandItems)||Array.isArray(o.cellMenu.optionItems))){const l=o.cellMenu.commandItems||[],c=o.cellMenu.optionItems||[];o.cellMenu.commandTitleKey&&(o.cellMenu.commandTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(o.cellMenu.commandTitleKey,"TEXT_COMMANDS")||o.cellMenu.commandTitle),o.cellMenu.optionTitleKey&&(o.cellMenu.optionTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(o.cellMenu.optionTitleKey,"TEXT_COMMANDS")||o.cellMenu.optionTitle),this.extensionUtility.translateMenuItemsFromTitleKey(l,"commandItems"),this.extensionUtility.translateMenuItemsFromTitleKey(c,"optionItems")}})}handleCellClick(e,i){this.disposeAllMenus();const o=this.grid.getCellFromEvent(e);if(o){const l=this.grid.getDataItem(o.row),c=this.grid.getColumns()[o.cell];c?.cellMenu&&!this.gridOptions.cellMenu?.activateCellOnMenuClick&&e.preventDefault(),this._addonOptions={...this._addonOptions,...c.cellMenu};const u=i||{};if(u.column=c,u.dataContext=l,u.grid=this.grid,!this.extensionUtility.runOverrideFunctionWhenExists(this._addonOptions.menuUsabilityOverride,u))return;this._menuElm=this.createParentMenu(e),this._menuElm&&(this.repositionMenu(e,this._menuElm),this._menuElm.ariaExpanded="true",this._menuElm.style.display="block",this.gridOptions.darkMode&&this._menuElm.classList.add("slick-dark-mode")),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}}sortMenuItems(e){e.forEach(i=>{i?.cellMenu?.commandItems&&this.extensionUtility.sortItems(i.cellMenu.commandItems||[],"positionOrder"),i?.cellMenu?.optionItems&&this.extensionUtility.sortItems(i.cellMenu.optionItems||[],"positionOrder")})}}class kr{constructor(e,i){this.grid=e,this.pluginName="CellRangeDecorator",this._defaults={selectionCssClass:"slick-range-decorator",selectionCss:{border:"2px dashed red",zIndex:"9999"},offset:{top:-1,left:-1,height:-2,width:-2}},this._options=(0,w.deepMerge)(this._defaults,i)}get addonOptions(){return this._options}get addonElement(){return this._elem}destroy(){this.hide()}init(){}hide(){this._elem?.remove(),this._elem=null}show(e){this._elem||(this._elem=(0,w.createDomElement)("div",{className:this._options.selectionCssClass}),Object.keys(this._options.selectionCss).forEach(l=>{this._elem.style[l]=this._options.selectionCss[l]}),this._elem.style.position="absolute",this.grid.getActiveCanvasNode()?.appendChild(this._elem));const i=this.grid.getCellNodeBox(e.fromRow,e.fromCell),o=this.grid.getCellNodeBox(e.toRow,e.toCell);return i&&o&&this._options?.offset&&(this._elem.style.top=`${i.top+this._options.offset.top}px`,this._elem.style.left=`${i.left+this._options.offset.left}px`,this._elem.style.height=`${o.bottom-i.top+this._options.offset.height}px`,this._elem.style.width=`${o.right-i.left+this._options.offset.width}px`),this._elem}}class Vh{constructor(e){this.pluginName="CellRangeSelector",this._currentlySelectedRange=null,this._canvas=null,this._dragging=!1,this._gridUid="",this._columnOffset=0,this._rowOffset=0,this._isRightCanvas=!1,this._isBottomCanvas=!1,this._xDelayForNextCell=0,this._yDelayForNextCell=0,this._viewportHeight=0,this._viewportWidth=0,this._isRowMoveRegistered=!1,this._scrollLeft=0,this._scrollTop=0,this._defaults={autoScroll:!0,minIntervalToShowNextCell:30,maxIntervalToShowNextCell:600,accelerateInterval:5,selectionCss:{border:"2px dashed blue"}},this.onBeforeCellRangeSelected=new Dt("onBeforeCellRangeSelected"),this.onCellRangeSelecting=new Dt("onCellRangeSelecting"),this.onCellRangeSelected=new Dt("onCellRangeSelected"),this._eventHandler=new tn,this._options=(0,w.deepMerge)(this._defaults,e)}get addonOptions(){return this._options}get eventHandler(){return this._eventHandler}get gridUid(){return this._gridUid||(this._grid?.getUID()??"")}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}init(e){this._grid=e,this._decorator=this._options.cellDecorator||new kr(e,this._options),this._canvas=e.getCanvasNode(),this._gridOptions=e.getOptions(),this._gridUid=e.getUID();const i=e.getPubSubService();i&&Je.addSlickEventPubSubWhenDefined(i,this),this._eventHandler.subscribe(this._grid.onDrag,this.handleDrag.bind(this)).subscribe(this._grid.onDragInit,this.handleDragInit.bind(this)).subscribe(this._grid.onDragStart,this.handleDragStart.bind(this)).subscribe(this._grid.onDragEnd,this.handleDragEnd.bind(this)).subscribe(this._grid.onScroll,this.handleScroll.bind(this))}destroy(){this.dispose()}dispose(){this._eventHandler?.unsubscribeAll(),(0,w.emptyElement)(this._activeCanvas),(0,w.emptyElement)(this._canvas),this._decorator?.destroy(),this.stopIntervalTimer()}getCellDecorator(){return this._decorator}getCurrentRange(){return this._currentlySelectedRange}getMouseOffsetViewport(e,i){const o=e?.touches?.[0]??e,l=this._activeViewport.scrollLeft,c=this._activeViewport.scrollTop,u=l+this._viewportWidth,g=c+this._viewportHeight,y=(0,w.getOffset)(this._activeViewport),M=y.left,V=y.top,te=M+this._viewportWidth,ve=V+this._viewportHeight,Ae={e,dd:i,viewport:{left:l,top:c,right:u,bottom:g,offset:{left:M,top:V,right:te,bottom:ve}},offset:{x:0,y:0},isOutsideViewport:!1};return o.pageX<M?Ae.offset.x=o.pageX-M:o.pageX>te&&(Ae.offset.x=o.pageX-te),o.pageY<V?Ae.offset.y=V-o.pageY:o.pageY>ve&&(Ae.offset.y=ve-o.pageY),Ae.isOutsideViewport=!!Ae.offset.x||!!Ae.offset.y,Ae}stopIntervalTimer(){this._autoScrollTimerId&&(window.clearInterval(this._autoScrollTimerId),this._autoScrollTimerId=void 0)}handleDrag(e,i){if(!this._dragging&&!this._gridOptions.enableRowMoveManager)return;this._gridOptions.enableRowMoveManager||e.stopImmediatePropagation();const o=e.getNativeEvent();if(this.addonOptions.autoScroll&&(this._draggingMouseOffset=this.getMouseOffsetViewport(o,i),this._draggingMouseOffset.isOutsideViewport))return this.handleDragOutsideViewport();this.stopIntervalTimer(),this.handleDragTo(o,i)}handleDragOutsideViewport(){if(this._xDelayForNextCell=this.addonOptions.maxIntervalToShowNextCell-Math.abs(this._draggingMouseOffset.offset.x)*this.addonOptions.accelerateInterval,this._yDelayForNextCell=this.addonOptions.maxIntervalToShowNextCell-Math.abs(this._draggingMouseOffset.offset.y)*this.addonOptions.accelerateInterval,!this._autoScrollTimerId){let e=0,i=0;this._autoScrollTimerId=window.setInterval(()=>{let o=!1,l=!1;this._draggingMouseOffset.offset.x?(e+=this.addonOptions.minIntervalToShowNextCell,o=e>=this._xDelayForNextCell):e=0,this._draggingMouseOffset.offset.y?(i+=this.addonOptions.minIntervalToShowNextCell,l=i>=this._yDelayForNextCell):i=0,(o||l)&&(o&&(e=0),l&&(i=0),this.handleDragToNewPosition(o,l))},this.addonOptions.minIntervalToShowNextCell)}}handleDragToNewPosition(e,i){let o=this._draggingMouseOffset.e.pageX,l=this._draggingMouseOffset.e.pageY;const c=this._draggingMouseOffset.offset.x,u=this._draggingMouseOffset.offset.y,g=this._draggingMouseOffset.viewport.offset;e&&c&&(o=c>0?g.right+this._moveDistanceForOneCell.x:g.left-this._moveDistanceForOneCell.x),i&&u&&(l=u>0?g.top-this._moveDistanceForOneCell.y:g.bottom+this._moveDistanceForOneCell.y),this.handleDragTo({pageX:o,pageY:l},this._draggingMouseOffset.dd)}handleDragTo(e,i){const o=e?.touches?.[0]??e,l=this._grid.getCellFromPoint(o.pageX-(0,w.getOffset)(this._activeCanvas).left+this._columnOffset,o.pageY-(0,w.getOffset)(this._activeCanvas).top+this._rowOffset);if(void 0!==l){if(this._gridOptions.frozenColumn>=0&&(!this._isRightCanvas&&l.cell>this._gridOptions.frozenColumn||this._isRightCanvas&&l.cell<=this._gridOptions.frozenColumn)||this._gridOptions.frozenRow>=0&&(!this._isBottomCanvas&&l.row>=this._gridOptions.frozenRow||this._isBottomCanvas&&l.row<this._gridOptions.frozenRow))return;if(this.addonOptions.autoScroll&&this._draggingMouseOffset){const c=this._grid.getCellNodeBox(l.row,l.cell);if(c){const u=this._draggingMouseOffset.viewport;(c.left<u.left||c.right>u.right||c.top<u.top||c.bottom>u.bottom)&&this._grid.scrollCellIntoView(l.row,l.cell)}}if(!this._grid.canCellBeSelected(l.row,l.cell))return;if(i?.range){i.range.end=l;const c=new ds(i.range.start.row??0,i.range.start.cell??0,l.row,l.cell);this._decorator.show(c),this.onCellRangeSelecting.notify({range:c})}}}handleDragEnd(e,i){this._decorator.hide(),this._dragging&&(this._dragging=!1,e.stopImmediatePropagation(),this.stopIntervalTimer(),this.onCellRangeSelected.notify({range:new ds(i.range.start.row??0,i.range.start.cell??0,i.range.end.row,i.range.end.cell)}))}handleDragInit(e){this._activeCanvas=this._grid.getActiveCanvasNode(e),this._activeViewport=this._grid.getActiveViewportNode(e);const i=this._grid.getDisplayedScrollbarDimensions();if(this._viewportWidth=this._activeViewport.offsetWidth-i.width,this._viewportHeight=this._activeViewport.offsetHeight-i.height,this._moveDistanceForOneCell={x:this._grid.getAbsoluteColumnMinWidth()/2,y:this._gridOptions.rowHeight/2},this._rowOffset=0,this._columnOffset=0,this._isBottomCanvas=this._activeCanvas.classList.contains("grid-canvas-bottom"),this._gridOptions.frozenRow>-1&&this._isBottomCanvas){const c=`${this.gridUidSelector} .grid-canvas-${this._gridOptions.frozenBottom?"bottom":"top"}`;this._rowOffset=document.querySelector(c)?.clientHeight??0}this._isRightCanvas=this._activeCanvas.classList.contains("grid-canvas-right"),this._gridOptions.frozenColumn>-1&&this._isRightCanvas&&(this._columnOffset=document.querySelector(`${this.gridUidSelector} .grid-canvas-left`)?.clientWidth??0);const o=this._grid.getCellFromEvent(e),l=this._grid.getActiveCell();(!this._grid.getEditorLock().isActive()||!l||!o||l.row!==o.row||l.cell!==o.cell)&&(e.stopImmediatePropagation(),e.preventDefault())}handleDragStart(e,i){const o=this._grid.getCellFromEvent(e);if(o&&!1!==this.onBeforeCellRangeSelected.notify(o).getReturnValue()&&this._grid.canCellBeSelected(o.row,o.cell)&&(this._dragging=!0,e.stopImmediatePropagation()),!this._dragging)return;this._grid.focus();const l=(0,w.getOffset)(this._canvas);let c=i.startX-l.left;this._gridOptions.frozenColumn>=0&&this._isRightCanvas&&(c+=this._scrollLeft);let u=i.startY-l.top;this._gridOptions.frozenRow>=0&&this._isBottomCanvas&&(u+=this._scrollTop);const g=this._grid.getCellFromPoint(c,u);return i.range={start:g,end:{}},this._currentlySelectedRange=i.range,this._decorator.show(new ds(g.row,g.cell))}handleScroll(e,i){this._scrollTop=i.scrollTop,this._scrollLeft=i.scrollLeft}}class Lf{constructor(e){this.pluginName="CellSelectionModel",this._cachedPageRowCount=0,this._prevKeyDown="",this._ranges=[],this._defaults={selectActiveCell:!0},this.onSelectedRangesChanged=new Dt("onSelectedRangesChanged"),this._eventHandler=new tn,this._selector=void 0===e||void 0===e.cellRangeSelector?new Vh({selectionCss:{border:"2px solid black"}}):this._selector=e.cellRangeSelector,this._addonOptions=e}get addonOptions(){return this._addonOptions}get cellRangeSelector(){return this._selector}get eventHandler(){return this._eventHandler}init(e){this._grid=e,e.hasDataView()&&(this._dataView=e.getData()),this._addonOptions={...this._defaults,...this._addonOptions};const i=e.getPubSubService();i&&this.onSelectedRangesChanged.setPubSubService(i),this._eventHandler.subscribe(this._grid.onActiveCellChanged,this.handleActiveCellChange.bind(this)).subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this)).subscribe(this._selector.onBeforeCellRangeSelected,this.handleBeforeCellRangeSelected.bind(this)).subscribe(this._selector.onCellRangeSelected,this.handleCellRangeSelected.bind(this)),e.registerPlugin(this._selector)}destroy(){this.dispose()}dispose(){this._selector&&(this._selector.onBeforeCellRangeSelected.unsubscribe(this.handleBeforeCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.unsubscribe(this.handleCellRangeSelected.bind(this))),this._eventHandler.unsubscribeAll(),this._grid?.unregisterPlugin(this._selector),this._selector?.dispose()}getSelectedRanges(){return this._ranges}rangesAreEqual(e,i){let o=e.length!==i.length;if(!o)for(let l=0;l<e.length;l++)if(e[l].fromCell!==i[l].fromCell||e[l].fromRow!==i[l].fromRow||e[l].toCell!==i[l].toCell||e[l].toRow!==i[l].toRow){o=!0;break}return!o}refreshSelections(){this.setSelectedRanges(this.getSelectedRanges())}removeInvalidRanges(e){const i=[];for(let o=0;o<e.length;o++){const l=e[o];this._grid.canCellBeSelected(l.fromRow,l.fromCell)&&this._grid.canCellBeSelected(l.toRow,l.toCell)&&i.push(l)}return i}resetPageRowCount(){this._cachedPageRowCount=0}setSelectedRanges(e,i="SlickCellSelectionModel.setSelectedRanges"){if(!(this._ranges&&0!==this._ranges.length||e&&0!==e.length))return;const o=!this.rangesAreEqual(this._ranges,e);if(this._ranges=this.removeInvalidRanges(e),o){const l=new wn(new CustomEvent("click",{detail:{caller:i}}),this._ranges);this.onSelectedRangesChanged.notify(this._ranges,l)}}handleActiveCellChange(e,i){this._prevSelectedRow=void 0;const o=(0,w.isDefined)(i.cell),l=(0,w.isDefined)(i.row);this._addonOptions?.selectActiveCell&&l&&o?this.setSelectedRanges([new ds(i.row,i.cell)]):(!this._addonOptions?.selectActiveCell||!l&&!o)&&this.setSelectedRanges([])}handleBeforeCellRangeSelected(e){const i=this._grid.getCellFromEvent(e),o=this._grid.getActiveCell();if(this._grid.getEditorLock().isActive()&&o&&i&&o.row===i.row&&o.cell===i.cell)return e.stopPropagation(),!1}handleCellRangeSelected(e,i){this._grid.setActiveCell(i.range.fromRow,i.range.fromCell,!1,!1,!0),this.setSelectedRanges([i.range])}isKeyAllowed(e){return["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","PageDown","PageUp","Home","End"].some(i=>i===e)}handleKeyDown(e){let i,o;const l=this._grid.getColumns().length,c=this._grid.getActiveCell();let u=0;if(u=this._dataView&&"getPagingInfo"in this._dataView?this._dataView?.getPagingInfo().pageSize||this._dataView.getLength():this._grid.getDataLength(),c&&(e.shiftKey||e.ctrlKey)&&!e.altKey&&this.isKeyAllowed(e.key)&&(i=this.getSelectedRanges().slice(),i.length||i.push(new ds(c.row,c.cell)),o=i.pop(),"function"==typeof o?.contains)){o.contains(c.row,c.cell)||(o=new ds(c.row,c.cell));let g=o.toRow-o.fromRow,y=o.toCell-o.fromCell;const M=c.row===o.fromRow?1:-1,V=c.cell===o.fromCell?1:-1,te=e.key.startsWith("Arrow");let ve,Ae=0;te&&!e.ctrlKey?("ArrowLeft"===e.key?y-=V:"ArrowRight"===e.key?y+=V:"ArrowUp"===e.key?g-=M:"ArrowDown"===e.key&&(g+=M),Ae=c.row+M*g):(this._cachedPageRowCount<1&&(this._cachedPageRowCount=this._grid.getViewportRowCount()),void 0===this._prevSelectedRow&&(this._prevSelectedRow=c.row),e.shiftKey&&!e.ctrlKey&&"Home"===e.key?(ve=0,Ae=c.row):e.shiftKey&&!e.ctrlKey&&"End"===e.key?(ve=l-1,Ae=c.row):e.ctrlKey&&e.shiftKey&&"Home"===e.key?(ve=0,Ae=0):e.ctrlKey&&e.shiftKey&&"End"===e.key?(ve=l-1,Ae=u-1):"PageUp"===e.key?(this._prevSelectedRow>=0&&(Ae=this._prevSelectedRow-this._cachedPageRowCount),Ae<0&&(Ae=0)):"PageDown"===e.key&&(this._prevSelectedRow<=u-1&&(Ae=this._prevSelectedRow+this._cachedPageRowCount),Ae>u-1&&(Ae=u-1)),this._prevSelectedRow=Ae),ve??=c.cell+V*y;const ze=new ds(c.row,c.cell,Ae,ve);if(this.removeInvalidRanges([ze]).length){i.push(ze);const Ye=M>0?ze.toRow:ze.fromRow,nt=V>0?ze.toCell:ze.fromCell;te?(this._grid.scrollRowIntoView(Ye),this._grid.scrollCellIntoView(Ye,nt,!1)):(this._grid.scrollRowIntoView(Ae),this._grid.scrollCellIntoView(Ae,nt,!1))}else i.push(o);this.setSelectedRanges(i),e.preventDefault(),e.stopPropagation(),this._prevKeyDown=e.key}}}class Na{constructor(e){this.pluginName="RowSelectionModel",this._inHandler=!1,this._ranges=[],this._defaults={autoScrollWhenDrag:!0,cellRangeSelector:void 0,dragToSelect:!1,selectActiveRow:!0},this.onSelectedRangesChanged=new Dt("onSelectedRangesChanged"),this._eventHandler=new tn,this._options={...this._defaults,...e}}get addonOptions(){return this._options}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()}init(e){this._grid=e,this._options={...this._defaults,...this._options},this._selector=this.addonOptions.cellRangeSelector;const i=e.getPubSubService();i&&this.onSelectedRangesChanged.setPubSubService(i),!this._selector&&this._options.dragToSelect&&(this._selector=new Vh({selectionCss:{border:"none"},autoScroll:this._options.autoScrollWhenDrag}),this.addonOptions.cellRangeSelector=this._selector),this._eventHandler.subscribe(this._grid.onActiveCellChanged,this.handleActiveCellChange.bind(this)).subscribe(this._grid.onClick,this.handleClick.bind(this)).subscribe(this._grid.onKeyDown,this.handleKeyDown.bind(this)),this._selector&&(this._grid.registerPlugin(this._selector),this._selector.onCellRangeSelecting.subscribe(this.handleCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.subscribe(this.handleCellRangeSelected.bind(this)),this._selector.onBeforeCellRangeSelected.subscribe(this.handleBeforeCellRangeSelected.bind(this)))}destroy(){this.dispose()}dispose(){this._eventHandler.unsubscribeAll(),this.disposeSelector()}disposeSelector(){this._selector&&(this._selector.onCellRangeSelecting.unsubscribe(this.handleCellRangeSelected.bind(this)),this._selector.onCellRangeSelected.unsubscribe(this.handleCellRangeSelected.bind(this)),this._selector.onBeforeCellRangeSelected.unsubscribe(this.handleBeforeCellRangeSelected.bind(this)),this._grid.unregisterPlugin(this._selector),this._selector?.destroy(),this._selector?.dispose())}getCellRangeSelector(){return this._selector}getSelectedRanges(){return this._ranges}getSelectedRows(){return this.rangesToRows(this._ranges)}refreshSelections(){this.setSelectedRows(this.getSelectedRows())}setSelectedRows(e){this.setSelectedRanges(this.rowsToRanges(e),"SlickRowSelectionModel.setSelectedRows")}setSelectedRanges(e,i="SlickRowSelectionModel.setSelectedRanges"){if(!(this._ranges&&0!==this._ranges.length||e&&0!==e.length))return;this._ranges=e;const o=new wn(new CustomEvent("click",{detail:{caller:i}}),this._ranges);this.onSelectedRangesChanged.notify(this._ranges,o)}getRowsRange(e,i){let o;const l=[];for(o=e;o<=i;o++)l.push(o);for(o=i;o<e;o++)l.push(o);return l}handleBeforeCellRangeSelected(e,i){let o=!1;if(this.gridOptions.enableRowMoveManager&&(o=this.isHandlerColumn(i.cell)??!1),this._grid.getEditorLock().isActive()||o)return e.stopPropagation(),!1;this._grid.setActiveCell(i.row,i.cell)}handleCellRangeSelected(e,i){if(!this.gridOptions.multiSelect||!this.addonOptions.selectActiveRow)return!1;this.setSelectedRanges([new ds(i.range.fromRow,0,i.range.toRow,this._grid.getColumns().length-1)])}handleActiveCellChange(e,i){this._options.selectActiveRow&&null!==i.row&&this.setSelectedRanges([new ds(i.row,0,i.row,this._grid.getColumns().length-1)])}handleClick(e){const i=this._grid.getCellFromEvent(e);if(!(i&&this._grid.canCellBeActive(i.row,i.cell)&&this.gridOptions.multiSelect&&(e.ctrlKey||e.shiftKey||e.metaKey)))return!1;let o=this.rangesToRows(this._ranges);const l=o.indexOf(i.row);if(-1===l&&(e.ctrlKey||e.metaKey))o.push(i.row),this._grid.setActiveCell(i.row,i.cell);else if(-1!==l&&(e.ctrlKey||e.metaKey))o=o.filter(u=>u!==i.row),this._grid.setActiveCell(i.row,i.cell);else if(o.length&&e.shiftKey){const u=o.pop(),g=Math.min(i.row,u),y=Math.max(i.row,u);o=[];for(let M=g;M<=y;M++)M!==u&&o.push(M);o.push(u),this._grid.setActiveCell(i.row,i.cell)}const c=this.rowsToRanges(o);return this.setSelectedRanges(c),e.stopImmediatePropagation(),!0}handleKeyDown(e){const i=this._grid.getActiveCell();if(this.gridOptions.multiSelect&&i&&e.shiftKey&&!e.ctrlKey&&!e.altKey&&!e.metaKey&&("ArrowUp"===e.key||"ArrowDown"===e.key)){let o=this.getSelectedRows();o.sort((g,y)=>g-y),o.length||(o=[i.row]);let l,c=o[0],u=o[o.length-1];if(l="ArrowDown"===e.key?i.row<u||c===u?++u:++c:i.row<u?--u:--c,l>=0&&l<this._grid.getDataLength()){this._grid.scrollRowIntoView(l);const g=this.rowsToRanges(this.getRowsRange(c,u));this.setSelectedRanges(g)}e.preventDefault(),e.stopPropagation()}}isHandlerColumn(e){const o=this._grid.getColumns()[e].behavior||"";return/move|selectAndMove/.test(o)}rangesToRows(e){const i=[];for(let o=0;o<e.length;o++)for(let l=e[o].fromRow;l<=e[o].toRow;l++)i.push(l);return i}rowsToRanges(e){const i=[],o=this._grid.getColumns().length-1;return e.forEach(l=>i.push(new ds(l,0,l,o))),i}}const Bh="mdi-icon-check",Hh="mdi-icon-uncheck";class lt{constructor(e,i){this.pubSubService=e,this.pluginName="CheckboxSelectColumn",this._defaults={columnId:"_checkbox_selector",cssClass:null,field:"_checkbox_selector",hideSelectAllCheckbox:!1,name:"",toolTip:"Select/Deselect All",width:30,reorderable:!1,applySelectOnAllPages:!0,hideInColumnTitleRow:!1,hideInFilterHeaderRow:!0},this._addonOptions=this._defaults,this._checkboxColumnCellIndex=null,this._isSelectAllChecked=!1,this._isUsingDataView=!1,this._selectedRowsLookup={},this._selectAll_UID=this.createUID(),this._bindEventService=new Ft.P,this._eventHandler=new tn,this._addonOptions={...this._defaults,...i}}get addonOptions(){return this._addonOptions}get headerRowNode(){return this._headerRowNode}get gridOptions(){return this._grid?.getOptions()??{}}get selectAllUid(){return this._selectAll_UID}set selectedRowsLookup(e){this._selectedRowsLookup=e}init(e){this._grid=e,this._isUsingDataView=!Array.isArray(e.getData()),this._isUsingDataView&&(this._dataView=e.getData()),this.gridOptions.backendServiceApi&&(this._addonOptions.applySelectOnAllPages=!1),this._eventHandler.subscribe(e.onSelectedRowsChanged,this.handleSelectedRowsChanged.bind(this)).subscribe(e.onClick,this.handleClick.bind(this)).subscribe(e.onKeyDown,this.handleKeyDown.bind(this)),this._isUsingDataView&&this._dataView&&(this._eventHandler.subscribe(e.onAfterSetColumns,this.handleDataViewSelectedIdsChanged.bind(this)),this._addonOptions.applySelectOnAllPages&&this._eventHandler.subscribe(this._dataView.onSelectedRowIdsChanged,this.handleDataViewSelectedIdsChanged.bind(this)).subscribe(this._dataView.onPagingInfoChanged,this.handleDataViewSelectedIdsChanged.bind(this))),this._addonOptions.hideInFilterHeaderRow||this.addCheckboxToFilterHeaderRow(e),this._addonOptions.hideInColumnTitleRow||this._eventHandler.subscribe(this._grid.onHeaderClick,this.handleHeaderClick.bind(this)),(!this._rowSelectionModel||!this._grid.getSelectionModel())&&(this._rowSelectionModel=new Na(this.gridOptions.rowSelectionOptions),this._grid.setSelectionModel(this._rowSelectionModel)),this.gridOptions.preselectedRows&&this._rowSelectionModel&&this._grid.getSelectionModel()&&window.setTimeout(()=>this.selectRows(this.gridOptions.preselectedRows||[])),"function"==typeof this._addonOptions.selectableOverride&&this.selectableOverride(this._addonOptions.selectableOverride)}dispose(){this._bindEventService.unbindAll(),this._eventHandler.unsubscribeAll()}create(e,i){if(this._addonOptions={...this._defaults,...i.checkboxSelector},Array.isArray(e)&&i){const o=this.getColumnDefinition();if(!e.some(l=>l.id===o.id)){const l=i?.checkboxSelector?.columnIndexPosition??0;l>0?e.splice(l,0,o):e.unshift(o),this.pubSubService.publish("onPluginColumnsChanged",{columns:e,pluginName:this.pluginName})}}return this}getOptions(){return this._addonOptions}setOptions(e){if(this._addonOptions={...this._addonOptions,...e},this._addonOptions.hideSelectAllCheckbox)this.hideSelectAllFromColumnHeaderTitleRow(),this.hideSelectAllFromColumnHeaderFilterRow();else if(this._addonOptions.hideInColumnTitleRow?(this.hideSelectAllFromColumnHeaderTitleRow(),this._addonOptions.name&&this._grid.updateColumnHeader(this._addonOptions.columnId||"",this._addonOptions.name,"")):(this.renderSelectAllCheckbox(this._isSelectAllChecked),this._eventHandler.subscribe(this._grid.onHeaderClick,this.handleHeaderClick.bind(this))),this._addonOptions.hideInFilterHeaderRow)this.hideSelectAllFromColumnHeaderFilterRow();else{const i=this.headerRowNode?.querySelector("#filter-checkbox-selectall-container");if(i){i.style.display="flex",i.ariaChecked=String(this._isSelectAllChecked);const o=i.querySelector('input[type="checkbox"]');o&&(o.ariaChecked=String(this._isSelectAllChecked),o.checked=this._isSelectAllChecked)}}}deSelectRows(e){const i=[];for(const o of e)this._selectedRowsLookup[o]&&(i[i.length]=o);this._grid.setSelectedRows(this._grid.getSelectedRows().filter(o=>i.indexOf(o)<0),"SlickCheckboxSelectColumn.deSelectRows")}selectRows(e){const i=[];for(const l of e)this._selectedRowsLookup[l]&&(i[i.length]=l);const o=this._grid.getSelectedRows()?.concat(i);this._grid.setSelectedRows(o)}createCheckboxElement(e,i=!1){const o=this.gridOptions?.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment,l=(0,w.createDomElement)("label",{className:"checkbox-selector-label",htmlFor:e}),c=(0,w.createDomElement)("div",{className:"icon-checkbox-container"});return c.appendChild((0,w.createDomElement)("input",{id:e,type:"checkbox",checked:i,ariaChecked:String(i)})),c.appendChild((0,w.createDomElement)("div",{className:`mdi ${i?Bh:Hh}`})),l.appendChild(c),o.appendChild(l),o}getColumnDefinition(){const e=String(this._addonOptions?.columnId??this._defaults.columnId);return{id:e,name:this._addonOptions.hideSelectAllCheckbox||this._addonOptions.hideInColumnTitleRow?this._addonOptions.name||"":this.createCheckboxElement(`header-selector${this._selectAll_UID}`),toolTip:this._addonOptions.hideSelectAllCheckbox||this._addonOptions.hideInColumnTitleRow?"":this._addonOptions.toolTip,field:e,cssClass:this._addonOptions.cssClass,excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,hideSelectAllCheckbox:this._addonOptions.hideSelectAllCheckbox,resizable:!1,reorderable:this._addonOptions.reorderable,sortable:!1,width:this._addonOptions.width||30,maxWidth:this._addonOptions.width||30,formatter:this.checkboxSelectionFormatter.bind(this)}}hideSelectAllFromColumnHeaderTitleRow(){this._grid.updateColumnHeader(this._addonOptions.columnId||"",this._addonOptions.name||"","")}hideSelectAllFromColumnHeaderFilterRow(){const e=this.headerRowNode?.querySelector("#filter-checkbox-selectall-container");e&&(e.style.display="none")}toggleRowSelection(e){this.toggleRowSelectionWithEvent(null,e)}toggleRowSelectionWithEvent(e,i){const o=this._grid.getDataItem(i);if(!this.checkSelectableOverride(i,o,this._grid))return;const l=this._grid.getSelectedRows();"function"==typeof this._addonOptions.onRowToggleStart&&this._addonOptions.onRowToggleStart(e,{row:i,previousSelectedRows:l});const c=this._selectedRowsLookup[i]?this._grid.getSelectedRows().filter(u=>u!==i):this._grid.getSelectedRows().concat(i);this._grid.setSelectedRows(c,"click.toggle"),this._grid.setActiveCell(i,this.getCheckboxColumnCellIndex()),this._addonOptions.onRowToggleEnd&&this._addonOptions.onRowToggleEnd(e,{row:i,previousSelectedRows:l})}selectableOverride(e){this._selectableOverride=e}addCheckboxToFilterHeaderRow(e){this._eventHandler.subscribe(e.onHeaderRowCellRendered,(i,o)=>{if(o.column.field===(this._addonOptions.field||"_checkbox_selector")){(0,w.emptyElement)(o.node);const l=`header-filter-selector${this._selectAll_UID}`,c=(0,w.createDomElement)("label",{id:"filter-checkbox-selectall-container",htmlFor:l}),u=(0,w.createDomElement)("div",{className:"icon-checkbox-container"});u.appendChild((0,w.createDomElement)("input",{id:l,type:"checkbox",ariaChecked:"false"})),u.appendChild((0,w.createDomElement)("div",{className:"mdi mdi-icon-uncheck"})),c.appendChild(u),o.node.appendChild(c),this._headerRowNode=o.node,this._headerRowNode.classList.add("checkbox-header"),this._bindEventService.bind(c,"click",g=>this.handleHeaderClick(g,o))}})}checkboxSelectionFormatter(e,i,o,l,c,u){if(c&&this.checkSelectableOverride(e,c,u)){const g=this.createUID()+e;return this.createCheckboxElement(`selector${g}`,!!this._selectedRowsLookup[e])}return null}checkSelectableOverride(e,i,o){return"function"!=typeof this._selectableOverride||this._selectableOverride(e,i,o)}createUID(){return Math.round(1e7*Math.random())}getCheckboxColumnCellIndex(){if(null===this._checkboxColumnCellIndex){this._checkboxColumnCellIndex=0;const e=this._grid.getColumns();for(let i=0;i<e.length;i++)e[i].id===this._addonOptions.columnId&&(this._checkboxColumnCellIndex=i)}return this._checkboxColumnCellIndex}handleDataViewSelectedIdsChanged(){const e=this._dataView.getAllSelectedFilteredIds(),i=this._dataView.getFilteredItems();let o=0;if("function"==typeof this._selectableOverride&&e.length>0)for(let l=0;l<this._dataView.getItemCount();l++){const c=this._dataView.getItemByIdx(l),u=this._dataView.getIdPropertyName(),g=c[u];i.findIndex(M=>M[u]===g)>=0&&!this.checkSelectableOverride(l,c,this._grid)&&o++}if(this._isSelectAllChecked=e.length+o>=i.length,!this._addonOptions.hideInColumnTitleRow&&!this._addonOptions.hideSelectAllCheckbox&&this.renderSelectAllCheckbox(this._isSelectAllChecked),!this._addonOptions.hideInFilterHeaderRow){const l=this.headerRowNode?.querySelector(`#header-filter-selector${this._selectAll_UID}`),c=this.headerRowNode?.querySelector(".icon-checkbox-container .mdi");l&&(l.ariaChecked=String(this._isSelectAllChecked),l.checked=this._isSelectAllChecked),c&&(c.className=`mdi ${this._isSelectAllChecked?Bh:Hh}`)}}handleClick(e,i){if(this._grid.getColumns()[i.cell].id===this._addonOptions.columnId&&"checkbox"===e.target.type){if(e.target.ariaChecked=String(e.target.checked),this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit())return e.preventDefault(),void e.stopImmediatePropagation();this.toggleRowSelectionWithEvent(e,i.row),e.stopPropagation(),e.stopImmediatePropagation()}}handleHeaderClick(e,i){if(i.column.id===this._addonOptions.columnId&&"checkbox"===e.target.type){if(e.target.ariaChecked=String(e.target.checked),this._grid.getEditorLock().isActive()&&!this._grid.getEditorLock().commitCurrentEdit())return e.preventDefault(),void e.stopImmediatePropagation();let o=e.target.checked;const l=o?"click.selectAll":"click.unselectAll",c=this._grid.getSelectedRows();this._addonOptions.onSelectAllToggleStart&&this._addonOptions.onSelectAllToggleStart(e,{previousSelectedRows:c,caller:l});let u=[];if(o){const g=[];for(let y=0;y<this._grid.getDataLength();y++){const M=this._grid.getDataItem(y);!M.__group&&!M.__groupTotals&&this.checkSelectableOverride(y,M,this._grid)&&g.push(y)}u=g,o=!0}if(this._isUsingDataView&&this._dataView&&this._addonOptions.applySelectOnAllPages){const g=[],y=this._dataView.getFilteredItems();for(let M=0;M<y.length;M++){const V=y[M];this.checkSelectableOverride(M,V,this._grid)&&g.push(V[this._dataView.getIdPropertyName()])}this._dataView.setSelectedIds(g,{isRowBeingAdded:o})}this._grid.setSelectedRows(u,l),this._addonOptions.onSelectAllToggleEnd&&this._addonOptions.onSelectAllToggleEnd(e,{rows:u,previousSelectedRows:c,caller:l}),e.stopPropagation(),e.stopImmediatePropagation()}}handleKeyDown(e,i){" "===e.key&&this._grid.getColumns()[i.cell].id===this._addonOptions.columnId&&((!this._grid.getEditorLock().isActive()||this._grid.getEditorLock().commitCurrentEdit())&&this.toggleRowSelectionWithEvent(e,i.row),e.preventDefault(),e.stopImmediatePropagation())}handleSelectedRowsChanged(){const e=this._grid.getSelectedRows(),i={};let o=0,l=0,c=0,u=0;if("function"==typeof this._selectableOverride)for(c=0;c<this._grid.getDataLength();c++){const y=this._grid.getDataItem(c);this.checkSelectableOverride(l,y,this._grid)||u++}const g=[];for(l=0;l<e.length;l++){o=e[l];const y=this._grid.getDataItem(o);this.checkSelectableOverride(l,y,this._grid)?(i[o]=!0,i[o]!==this._selectedRowsLookup[o]&&(this._grid.invalidateRow(o),delete this._selectedRowsLookup[o])):g.push(o)}if("object"==typeof this._selectedRowsLookup&&Object.keys(this._selectedRowsLookup).forEach(y=>{void 0!==y&&this._grid.invalidateRow(+y)}),this._selectedRowsLookup=i,this._grid.render(),this._isSelectAllChecked=(e?.length??0)+u>=this._grid.getDataLength(),!(this._isUsingDataView&&this._addonOptions.applySelectOnAllPages||(!this._addonOptions.hideInColumnTitleRow&&!this._addonOptions.hideSelectAllCheckbox&&this.renderSelectAllCheckbox(this._isSelectAllChecked),this._addonOptions.hideInFilterHeaderRow))){const y=this.headerRowNode?.querySelector(`#header-filter-selector${this._selectAll_UID}`);y&&(y.ariaChecked=String(this._isSelectAllChecked),y.checked=this._isSelectAllChecked)}if(g.length>0){for(const y of g){const M=e.indexOf(y);e.splice(M,1)}this._grid.setSelectedRows(e,"click.toggle")}}renderSelectAllCheckbox(e){this._grid.updateColumnHeader(this._addonOptions.columnId||"",this.createCheckboxElement(`header-selector${this._selectAll_UID}`,!!e),this._addonOptions.toolTip)?.classList.add("header-checkbox-selectall")}}class bn extends Fa{constructor(e,i,o,l,c){super(e,o,l),this.extensionUtility=e,this.filterService=i,this.pubSubService=o,this.sharedService=l,this.sortService=c,this._areVisibleColumnDifferent=!1,this._columns=[],this._columnCheckboxes=[],this._commandMenuElm=null,this._headerElm=null,this._isMenuOpen=!1,this._subMenuParentId="",this._defaults={dropSide:"left",showButton:!0,hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",marginBottom:15,menuWidth:18,minHeight:250,contentMinWidth:0,resizeOnShowHeaderRow:!1,syncResizeTitle:"Synchronous resize",subMenuOpenByEvent:"mouseover",headerColumnValueExtractor:u=>(0,w.getHtmlStringOutput)(u.columnPickerLabel||u.name||"","innerHTML")},this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-grid-menu",this._camelPluginName="gridMenu",this._columns=this.sharedService.allColumns??[],this._gridUid=this.grid?.getUID()??"",this.onAfterMenuShow=new Dt("onAfterMenuShow"),this.onBeforeMenuShow=new Dt("onBeforeMenuShow"),this.onMenuClose=new Dt("onMenuClose"),this.onCommand=new Dt("onCommand"),this.onColumnsChanged=new Dt("onColumnsChanged"),this.initEventHandlers(),this.init()}get addonOptions(){return this._addonOptions||{}}get columns(){return this._columns}set columns(e){this._columns=e}get gridOptions(){return this.grid?.getOptions()||{}}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}initEventHandlers(){this._eventHandler.subscribe(this.grid.onColumnsReordered,wa.bind(this)),this._eventHandler.subscribe(this.grid.onClick,e=>this.hideMenu(e)),this._eventHandler.subscribe(this.grid.onBeforeDestroy,this.dispose.bind(this)),this._eventHandler.subscribe(this.grid.onSetOptions,(e,i)=>{i&&i.optionsBefore&&i.optionsAfter&&(i.optionsBefore.frozenColumn>=0&&-1===i.optionsAfter.frozenColumn||-1===i.optionsBefore.frozenColumn&&i.optionsAfter.frozenColumn>=0)&&this.recreateGridMenu()})}init(){this._gridUid=this.grid.getUID()??"",Je.addSlickEventPubSubWhenDefined(this.pubSubService,this),this._userOriginalGridMenu={...this.sharedService.gridOptions.gridMenu},this._addonOptions={...this._defaults,...this.getDefaultGridMenuOptions(),...this.sharedService.gridOptions.gridMenu},this.sharedService.gridOptions.gridMenu=this._addonOptions;const e=this._userOriginalGridMenu.commandItems,i=this._userOriginalGridMenu&&Array.isArray(e)?e:[];this._addonOptions.commandItems=[...i,...this.addGridMenuCustomCommands(i)],this.extensionUtility.translateMenuItemsFromTitleKey(this._addonOptions.commandItems||[],"commandItems"),this.extensionUtility.sortItems(this._addonOptions.commandItems,"positionOrder"),this.createGridMenu()}dispose(){this.deleteMenu(),super.dispose()}deleteMenu(){this._bindEventService.unbindAll(),this._menuElm?.remove(),this._menuElm=null,this._gridMenuButtonElm?.remove(),this._headerElm&&(this._headerElm.style.width="100%")}createColumnPickerContainer(){this._menuElm&&(tc.call(this,this._menuElm),this._listElm=(0,w.createDomElement)("div",{className:"slick-column-picker-list",role:"menu"}),this._bindEventService.bind(this._menuElm,"click",qr.bind(this),void 0,"parent-menu"))}createGridMenu(){const e=this._gridUid?`.${this._gridUid}`:"",i=this._addonOptions?.menuWidth||this._defaults.menuWidth,o=this.gridOptions.hasOwnProperty("frozenColumn")&&this.gridOptions.frozenColumn>=0?"right":"left",l=this.grid.getContainerNode();if(this._headerElm=l.querySelector(`.slick-header-${o}`),this._headerElm&&this._addonOptions){if(this._headerElm.style.width=`calc(100% - ${i}px)`,(this._addonOptions.resizeOnShowHeaderRow??this._defaults.resizeOnShowHeaderRow)&&this.gridOptions.showHeaderRow){const g=l.querySelector(`${e} .slick-headerrow`);g&&(g.style.width=`calc(100% - ${i}px)`)}(this._addonOptions.showButton??this._defaults.showButton)&&(this._gridMenuButtonElm=(0,w.createDomElement)("button",{className:"slick-grid-menu-button",ariaLabel:"Grid Menu"}),this._addonOptions?.iconCssClass&&this._gridMenuButtonElm.classList.add(...(0,w.classNameToList)(this._addonOptions.iconCssClass)),this._headerElm.parentElement.insertBefore(this._gridMenuButtonElm,this._headerElm.parentElement["preheader"===this._addonOptions.iconButtonContainer?"firstChild":"lastChild"]),this._bindEventService.bind(this._gridMenuButtonElm,"click",this.showGridMenu.bind(this))),this.sharedService.gridOptions.gridMenu={...this._defaults,...this._addonOptions},this.translateTitleLabels(this._addonOptions),this.translateTitleLabels(this.sharedService.gridOptions.gridMenu),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this)),this._bindEventService.bind(document.body,"beforeunload",this.dispose.bind(this))}}createCommandMenu(e,i=0,o){const l=o?.command;let c=1===i&&l?l.replace(/\s/g,""):"";c&&(this._subMenuParentId=c),i>1&&(c=this._subMenuParentId);const u=`${this.menuCssClass} slick-menu-level-${i} ${this._gridUid}`,g=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${i}${this.gridUidSelector}`);if(g){if(g.dataset.subMenuParent===c)return g;this.disposeSubMenus()}const y=(0,w.createDomElement)("div",{role:"menu",className:u,ariaLabel:i>1?"SubMenu":"Grid Menu"});i>0&&(y.classList.add("slick-submenu"),c&&(y.dataset.subMenuParent=c));const M={grid:this.grid,menu:this._menuElm,columns:this.columns,allColumns:this.getAllColumns(),visibleColumns:this.getVisibleColumns(),level:i};return this._commandMenuElm=this.recreateCommandList(e,y,M,o),i++,y}getAllColumns(){return this._columns}getVisibleColumns(){return this.grid.getColumns()}hideMenu(e){const i={grid:this.grid,menu:this._menuElm,allColumns:this.columns,visibleColumns:this.getVisibleColumns()};if(this.pubSubService.publish("onGridMenuMenuClose",i),("function"!=typeof this._addonOptions?.onMenuClose||!1!==this._addonOptions.onMenuClose(e,i))&&!1!==this.onMenuClose.notify(i,null,this).getReturnValue()){if(this._isMenuOpen=!1,"function"==typeof this.grid?.autosizeColumns){const o=this.grid.getUID()||"";this._areVisibleColumnDifferent&&o&&null!==document.querySelector(`.${o}`)&&(this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns(),this._areVisibleColumnDifferent=!1)}this.disposeSubMenus(),this._menuElm?.remove(),this._menuElm=null}}recreateGridMenu(){this.deleteMenu(),this.init()}repositionMenu(e,i,o,l){const c=e?.touches?.[0]??e,u=i.classList.contains("slick-submenu"),g=u?e.target.closest(".slick-menu-item"):c.target;if(g){const y=o||this._gridMenuButtonElm,M=(0,w.getOffset)(o),V=(0,w.getOffset)(g),te=l??this._addonOptions,ve=getComputedStyle(y),Ae=parseInt(ve?.width??this._defaults?.menuWidth,10),ze=i?.offsetWidth??0,Ye=te?.contentMinWidth??this._defaults.contentMinWidth??0,nt=(Ye>ze?Ye:ze)||0,Ot=M.right;let gt,rt;if(u?(rt=V.top,gt=V.left):(rt=M.top+y.offsetHeight,gt="right"===te?.dropSide?Ot-Ae:Ot-nt),u){const un=i?.clientHeight||0,{bottom:Ri,top:li}=(0,w.calculateAvailableSpace)(g);"top"==(Ri<un&&li>Ri?"top":"bottom")?(i.classList.remove("dropdown"),i.classList.add("dropup"),rt-=un-g.clientHeight):(i.classList.remove("dropup"),i.classList.add("dropdown"))}const At=this.grid.getGridPosition();let Nt=gt+Number(ze);u&&(Nt+=g.clientWidth);const ln=document.documentElement.clientWidth;"left"==(Nt>=At.width||Nt>=ln?"left":"right")||!u&&"left"===te?.dropSide?(i.classList.remove("dropright"),i.classList.add("dropleft"),u&&(gt-=Number(ze))):(i.classList.remove("dropleft"),i.classList.add("dropright"),u&&(gt+=g.offsetWidth)),i.style.top=`${rt}px`,i.style.left=`${gt}px`,Ye>0&&(i.style.minWidth=`${Ye}px`),i.style.opacity="1",i.style.display="block"}}openGridMenu(){const e=new MouseEvent("click",{bubbles:!0,cancelable:!0,composed:!1});Object.defineProperty(e,"target",{writable:!0,configurable:!0,value:(0,w.createDomElement)("button",{className:"slick-grid-menu-button"})}),this.showGridMenu(e)}showGridMenu(e,i){const o=e?.touches?.[0]??e;if(e.preventDefault(),(0,w.emptyElement)(this._menuElm),this._menuElm?.remove(),this._addonOptions){const l={grid:this.grid,menu:this._menuElm,columns:this.columns,allColumns:this.getAllColumns(),visibleColumns:this.getVisibleColumns()},c={...this._addonOptions,...i};if(c&&!this.extensionUtility.runOverrideFunctionWhenExists(c.menuUsabilityOverride,l)||"function"==typeof e.stopPropagation&&(this.pubSubService.publish("onGridMenuBeforeMenuShow",l),"function"==typeof c?.onBeforeMenuShow&&!1===c.onBeforeMenuShow(e,l)||!1===this.onBeforeMenuShow.notify(l,null,this).getReturnValue()))return;this._menuElm=this.createCommandMenu(this._addonOptions?.commandItems??[]),this.createColumnPickerContainer(),wa.call(this),this._columnCheckboxes=[],La.call(this,c),document.body.appendChild(this._menuElm),this.gridOptions.darkMode&&this._menuElm.classList.add("slick-dark-mode"),this._menuElm.style.opacity="0";const u=(void 0!==c?.marginBottom?c.marginBottom:this._defaults.marginBottom)||0;this._menuElm.style.minHeight=(0,w.findWidthOrDefault)(c?.minHeight,""),void 0!==c?.height?this._menuElm.style.height=(0,w.findWidthOrDefault)(c.height,""):this._menuElm.style.maxHeight=(0,w.findWidthOrDefault)(c?.maxHeight,window.innerHeight-o.clientY-u+"px");let g="BUTTON"===e.target.nodeName?e.target:e.target.querySelector("button");g||(g=e.target.parentElement),this._menuElm.ariaExpanded="true",this._menuElm.appendChild(this._listElm),this.repositionMenu(e,this._menuElm,g,c),this._isMenuOpen=!0,this.pubSubService.publish("onGridMenuAfterMenuShow",l),"function"==typeof c?.onAfterMenuShow&&c.onAfterMenuShow(e,l),this.onAfterMenuShow.notify(l,null,this)}}translateGridMenu(){if(this.sharedService.gridOptions.gridMenu){this.sharedService.gridOptions.gridMenu.commandItems=[],this.sharedService.gridOptions.gridMenu.commandTitle="",this.sharedService.gridOptions.gridMenu.columnTitle="",this.sharedService.gridOptions.gridMenu.forceFitTitle="",this.sharedService.gridOptions.gridMenu.syncResizeTitle="";const e=this._userOriginalGridMenu&&Array.isArray(this._userOriginalGridMenu.commandItems)?this._userOriginalGridMenu.commandItems:[];this.sharedService.gridOptions.gridMenu.commandItems=[...e,...this.addGridMenuCustomCommands(e)],this.extensionUtility.translateMenuItemsFromTitleKey(this._addonOptions?.commandItems||[],"commandItems"),this.extensionUtility.sortItems(this.sharedService.gridOptions.gridMenu.commandItems,"positionOrder"),this.translateTitleLabels(this.sharedService.gridOptions.gridMenu),this.translateTitleLabels(this._addonOptions),this.extensionUtility.translateItems(this._columns,"nameKey","name")}}translateTitleLabels(e){e&&(e.commandTitle=this.extensionUtility.getPickerTitleOutputString("commandTitle","gridMenu"),e.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),e.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),e.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"))}addGridMenuCustomCommands(e){const i=this.gridOptions.backendServiceApi||null,o=[],c=Z(this.gridOptions),u=this._addonOptions?.commandLabels;if(this._addonOptions&&this.gridOptions){if(!this._addonOptions.hideClearFrozenColumnsCommand){const y="clear-pinning";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||o.push({iconCssClass:this._addonOptions.iconClearFrozenColumnsCommand||"mdi mdi-pin-off-outline",titleKey:`${c}${u?.clearFrozenColumnsCommandKey??"CLEAR_PINNING"}`,disabled:!1,command:y,positionOrder:52})}if(this.gridOptions.enableFiltering&&!this.sharedService.hideHeaderRowAfterPageLoad){if(!this._addonOptions.hideClearAllFiltersCommand){const y="clear-filter";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||o.push({iconCssClass:this._addonOptions.iconClearAllFiltersCommand||"mdi mdi-filter-remove-outline",titleKey:`${c}${u?.clearAllFiltersCommandKey??"CLEAR_ALL_FILTERS"}`,disabled:!1,command:y,positionOrder:50})}if(!this._addonOptions.hideToggleFilterCommand){const y="toggle-filter";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||o.push({iconCssClass:this._addonOptions.iconToggleFilterCommand||"mdi mdi-flip-vertical",titleKey:`${c}${u?.toggleFilterCommandKey??"TOGGLE_FILTER_ROW"}`,disabled:!1,command:y,positionOrder:53})}if(i&&!this._addonOptions.hideRefreshDatasetCommand){const y="refresh-dataset";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||o.push({iconCssClass:this._addonOptions.iconRefreshDatasetCommand||"mdi mdi-sync",titleKey:`${c}${u?.refreshDatasetCommandKey??"REFRESH_DATASET"}`,disabled:!1,command:y,positionOrder:58})}}if(!this._addonOptions.hideToggleDarkModeCommand){const y="toggle-dark-mode";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||o.push({iconCssClass:this._addonOptions.iconToggleDarkModeCommand||"mdi mdi-brightness-4",titleKey:`${c}${u?.toggleDarkModeCommandKey??"TOGGLE_DARK_MODE"}`,disabled:!1,command:y,positionOrder:54})}if(this.gridOptions.showPreHeaderPanel&&!this._addonOptions.hideTogglePreHeaderCommand){const y="toggle-preheader";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||o.push({iconCssClass:this._addonOptions.iconTogglePreHeaderCommand||"mdi mdi-flip-vertical",titleKey:`${c}${u?.togglePreHeaderCommandKey??"TOGGLE_PRE_HEADER_ROW"}`,disabled:!1,command:y,positionOrder:53})}if(this.gridOptions.enableSorting&&!this._addonOptions.hideClearAllSortingCommand){const y="clear-sorting";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||o.push({iconCssClass:this._addonOptions.iconClearAllSortingCommand||"mdi mdi-sort-variant-off",titleKey:`${c}${u?.clearAllSortingCommandKey??"CLEAR_ALL_SORTING"}`,disabled:!1,command:y,positionOrder:51})}if(this.gridOptions.enableTextExport&&!this._addonOptions.hideExportCsvCommand){const y="export-csv";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||o.push({iconCssClass:this._addonOptions.iconExportCsvCommand||"mdi mdi-download",titleKey:`${c}${u?.exportCsvCommandKey??"EXPORT_TO_CSV"}`,disabled:!1,command:y,positionOrder:55})}if(this.gridOptions.enableExcelExport&&!this._addonOptions.hideExportExcelCommand){const y="export-excel";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||o.push({iconCssClass:this._addonOptions.iconExportExcelCommand||"mdi mdi-file-excel-outline text-success",titleKey:`${c}${u?.exportExcelCommandKey??"EXPORT_TO_EXCEL"}`,disabled:!1,command:y,positionOrder:56})}if(this.gridOptions.enableTextExport&&!this._addonOptions.hideExportTextDelimitedCommand){const y="export-text-delimited";e.some(M=>"divider"!==M&&M.hasOwnProperty("command")&&M.command===y)||o.push({iconCssClass:this._addonOptions.iconExportTextDelimitedCommand||"mdi mdi-download",titleKey:`${c}${u?.exportTextDelimitedCommandKey??"EXPORT_TO_TAB_DELIMITED"}`,disabled:!1,command:y,positionOrder:57})}const g=this._addonOptions?.commandItems||[];(Array.isArray(o)&&o.length>0||Array.isArray(g)&&g.length>0)&&(this._addonOptions.commandTitle=this._addonOptions.commandTitle||this.extensionUtility.getPickerTitleOutputString("commandTitle","gridMenu"))}return o}executeGridMenuInternalCustomCommands(e,i){const o=this.sharedService?.externalRegisteredResources||[];if(i?.command)switch(i.command){case"clear-pinning":const l=[...this.sharedService.visibleColumns],c={frozenColumn:-1,frozenRow:-1,frozenBottom:!1,enableMouseWheelScrollHandler:!1};this.grid.setOptions(c),this.sharedService.gridOptions.frozenColumn=c.frozenColumn,this.sharedService.gridOptions.frozenRow=c.frozenRow,this.sharedService.gridOptions.frozenBottom=c.frozenBottom,this.sharedService.gridOptions.enableMouseWheelScrollHandler=c.enableMouseWheelScrollHandler,Array.isArray(l)&&this.grid.setColumns(l),this.gridOptions.enableAutoSizeColumns&&this.grid.autosizeColumns(),this.pubSubService.publish("onGridMenuClearAllPinning");break;case"clear-filter":this.filterService.clearFilters(),this.sharedService.dataView.refresh(),this.pubSubService.publish("onGridMenuClearAllFilters");break;case"clear-sorting":this.sortService.clearSorting(),this.sharedService.dataView.refresh(),this.pubSubService.publish("onGridMenuClearAllSorting");break;case"export-csv":const g=o.find(Ae=>"TextExportService"===Ae.className);g?.exportToFile?g.exportToFile({delimiter:D.comma,format:W.csv}):console.error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Grid Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");break;case"export-excel":const y=o.find(Ae=>"ExcelExportService"===Ae.className);y?.exportToExcel?y.exportToExcel():console.error("[Slickgrid-Universal] You must register the ExcelExportService to properly use Export to Excel in the Grid Menu. Example:: this.gridOptions = { enableExcelExport: true, externalResources: [new ExcelExportService()] };");break;case"export-text-delimited":const M=o.find(Ae=>"TextExportService"===Ae.className);M?.exportToFile?M.exportToFile({delimiter:D.tab,format:W.txt}):console.error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Grid Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");break;case"toggle-dark-mode":const V=this.sharedService.gridOptions.darkMode;this.grid.setOptions({darkMode:!V}),this.sharedService.gridOptions.darkMode=!V;break;case"toggle-filter":let te=this.gridOptions?.showHeaderRow??!1;te=!te,this.grid.setHeaderRowVisibility(te),!0===te&&(this.grid.setColumns(this.sharedService.columnDefinitions),this.grid.scrollColumnIntoView(0));break;case"toggle-preheader":this.grid.setPreHeaderPanelVisibility(!this.gridOptions?.showPreHeaderPanel);break;case"refresh-dataset":this.extensionUtility.refreshBackendDataset()}}getDefaultGridMenuOptions(){return{commandTitle:void 0,columnTitle:this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"),forceFitTitle:this.extensionUtility.getPickerTitleOutputString("forceFitTitle","gridMenu"),syncResizeTitle:this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","gridMenu"),iconCssClass:"mdi mdi-menu",menuWidth:18,commandItems:[],hideClearAllFiltersCommand:!1,hideRefreshDatasetCommand:!1,hideToggleFilterCommand:!1}}handleBodyMouseDown(e){if(this.menuElement){let i=!1;const o=e.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(e.target)||o)&&(i=!0),(this._isMenuOpen&&this.menuElement!==e.target&&!i&&!e.defaultPrevented||"close"===e.target.className&&o)&&this.hideMenu(e)}}handleMenuItemCommandClick(e,i,o,l=0){if("divider"!==o&&!o.disabled&&!o.divider)if(o.command&&!o.commandItems){const u={grid:this.grid,command:o.command,item:o,allColumns:this.columns,visibleColumns:this.getVisibleColumns()};this.executeGridMenuInternalCustomCommands(e,u),this.pubSubService.publish("onGridMenuCommand",u),"function"==typeof this._addonOptions?.onCommand&&this._addonOptions.onCommand(e,u),this.onCommand.notify(u,null,this),"function"==typeof o.action&&o.action.call(this,e,u),!this._addonOptions?.leaveOpen&&!e.defaultPrevented&&this.hideMenu(e),e.preventDefault(),e.stopPropagation()}else o.commandItems&&this.repositionSubMenu(e,o,l)}handleMenuItemMouseOver(e,i,o,l=0){"divider"!==o&&!o.disabled&&!o.divider&&(o.commandItems?this.repositionSubMenu(e,o,l):0===l&&this.disposeSubMenus())}recreateCommandList(e,i,o,l){const c=o.level||0;if(e.length>0){const u=(0,w.createDomElement)("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},i);if(0===c){this.populateCommandOrOptionTitle("command",this.addonOptions,u,c);const g=i.querySelector(".slick-command-header")??(0,w.createDomElement)("div",{className:"slick-command-header"});g.classList.add("with-close"),Wn.call(this,g),u.appendChild(g)}return l&&c>0&&this.addSubMenuTitleWhenExists(l,u),this.populateCommandOrOptionItems("command",this._addonOptions,u,e,o,this.handleMenuItemCommandClick,this.handleMenuItemMouseOver),u}return null}repositionSubMenu(e,i,o){const c=this.createCommandMenu(i?.commandItems||[],o+1,i);c.style.display="block",document.body.appendChild(c),this.repositionMenu(e,c)}}const _d="mdi-icon-picker-check",ec="mdi-icon-picker-uncheck";function Wn(d){const i=(0,w.createDomElement)("button",{type:"button",className:"close",ariaLabel:"Close",textContent:"\xd7",dataset:{dismiss:this instanceof Uh?"slick-column-picker":"slick-grid-menu"}});d.appendChild(i)}function tc(d){const e=this;e.addonOptions?.columnTitle&&(e._columnTitleElm=(0,w.createDomElement)("div",{className:"slick-menu-title",textContent:e.addonOptions?.columnTitle??e._defaults.columnTitle},d))}function qr(d){const e=this,i=e instanceof Uh?"columnPicker":"gridMenu",l=d.target?.closest(".icon-checkbox-container")?.querySelector(".mdi"),c=!!d.target.checked;if(d.target.ariaChecked=String(c),eo(l,c),"autoresize"===d.target.dataset.option){const u=e.getVisibleColumns();return e.grid.setOptions({forceFitColumns:c}),void e.grid.setColumns(u)}if("syncresize"!==d.target.dataset.option){if("checkbox"===d.target.type){e._areVisibleColumnDifferent=!0;const u=d.target.dataset.columnid||"",g=[];if(e._columnCheckboxes.forEach((V,te)=>{V.checked&&g.push(e.columns[te])}),!g.length)return d.target.checked=!0,void eo(l,!0);if(e.grid.setColumns(g),(!e.sharedService.visibleColumns||Array.isArray(g)&&g.length!==e.sharedService.visibleColumns.length)&&(e.sharedService.visibleColumns=g),e.gridOptions.enableRowSelection&&c){const V=e.grid.getSelectedRows();e.grid.setSelectedRows(V)}const y=e.gridOptions.frozenColumn??-1;y>=0&&e.extensionUtility.readjustFrozenColumnIndexWhenNeeded(y,e.columns,g);const M={columnId:u,showing:c,allColumns:e.columns,visibleColumns:g,columns:g,grid:e.grid};e.pubSubService.publish(`on${(0,w.titleCase)(i)}ColumnsChanged`,M),"function"==typeof e.addonOptions?.onColumnsChanged&&e.addonOptions.onColumnsChanged(d,M),e.onColumnsChanged.notify(M,null,e)}}else e.grid.setOptions({syncColumnCellResize:c})}function eo(d,e=!1){d&&(d.className=`mdi ${e?_d:ec}`)}function Ol(d,e,i,o=!1){const l=(0,w.createDomElement)("label",{className:"checkbox-picker-label",htmlFor:e}),c=(0,w.createDomElement)("div",{className:"icon-checkbox-container"}),u=(0,w.createDomElement)("input",{id:e,type:"checkbox",dataset:i}),g=(0,w.createDomElement)("div",{className:`mdi ${o?_d:ec}`}),y=(0,w.createDomElement)("span",{className:"checkbox-label"});return c.appendChild(u),c.appendChild(g),l.appendChild(c),l.appendChild(y),d.appendChild(l),o&&(u.ariaChecked="true",u.checked=!0),{inputElm:u,labelElm:l,labelSpanElm:y}}function La(d){const e=this,i=e instanceof bn?"gridmenu-":"";for(const o of e.columns){const l=o.id,c=document.createElement("li");o.excludeFromColumnPicker&&(c.className="hidden");const u=`${e._gridUid}-${i}colpicker-${l}`,g=e.grid.getColumnIndex(l)>=0,{inputElm:y,labelElm:M,labelSpanElm:V}=Ol(c,u,{columnid:`${l}`},g);e._columnCheckboxes.push(y);const ve=("function"==typeof d?.headerColumnValueExtractor?d.headerColumnValueExtractor:e._defaults.headerColumnValueExtractor)(o,e.gridOptions);this.grid.applyHtmlCode(V,ve),c.appendChild(M),e._listElm.appendChild(c)}if((!d.hideForceFitButton||!d.hideSyncResizeButton)&&e._listElm.appendChild(document.createElement("hr")),!d?.hideForceFitButton){const o=document.createElement("li"),l=`${e._gridUid}-${i}colpicker-forcefit`,{labelSpanElm:c}=Ol(o,l,{option:"autoresize"},e.gridOptions.forceFitColumns);c.textContent=d?.forceFitTitle??"",e._listElm.appendChild(o)}if(!d?.hideSyncResizeButton){const o=document.createElement("li"),l=`${e._gridUid}-${i}colpicker-syncresize`,{labelSpanElm:c}=Ol(o,l,{option:"syncresize"},e.gridOptions.forceFitColumns);c.textContent=d?.syncResizeTitle??"",e._listElm.appendChild(o)}}function wa(){const d=this,e=d.grid.getColumns().slice(0),i=new Array(d.columns.length);for(let o=0;o<i.length;o++)i[o]=void 0===d.grid.getColumnIndex(d.columns[o].id)?d.columns[o]:e.shift();d._columns=i}class Uh{constructor(e,i,o){this.extensionUtility=e,this.pubSubService=i,this.sharedService=o,this._areVisibleColumnDifferent=!1,this._columns=[],this._gridUid="",this._menuElm=null,this._columnCheckboxes=[],this._defaults={hideForceFitButton:!1,hideSyncResizeButton:!1,forceFitTitle:"Force fit columns",minHeight:200,syncResizeTitle:"Synchronous resize",headerColumnValueExtractor:l=>(0,w.getHtmlStringOutput)(l.columnPickerLabel||l.name||"","innerHTML")},this._bindEventService=new Ft.P,this.onColumnsChanged=new Dt("onColumnsChanged"),this._eventHandler=new tn,this._columns=this.sharedService.allColumns??[],this._gridUid=this.grid?.getUID?.()??"",this.init()}get addonOptions(){return this.gridOptions.columnPicker||{}}get eventHandler(){return this._eventHandler}get columns(){return this._columns}set columns(e){this._columns=e}get gridOptions(){return this.sharedService.gridOptions??{}}get grid(){return this.sharedService.slickGrid}get menuElement(){return this._menuElm}init(){this._gridUid=this.grid.getUID()??"",this.gridOptions.columnPicker={...this._defaults,...this.gridOptions.columnPicker},this.onColumnsChanged.setPubSubService(this.pubSubService),this.addonOptions.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.addonOptions.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.addonOptions.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker"),this._eventHandler.subscribe(this.grid.onPreHeaderContextMenu,e=>{["slick-column-name","slick-header-column"].some(i=>e.target?.classList.contains(i))&&this.handleHeaderContextMenu(e)}),this._eventHandler.subscribe(this.grid.onHeaderContextMenu,this.handleHeaderContextMenu.bind(this)),this._eventHandler.subscribe(this.grid.onColumnsReordered,wa.bind(this)),this._eventHandler.subscribe(this.grid.onClick,this.disposeMenu.bind(this)),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this),void 0,"body"),this._bindEventService.bind(document.body,"beforeunload",this.dispose.bind(this),void 0,"body")}dispose(){this._eventHandler.unsubscribeAll(),this._bindEventService.unbindAll(),this.disposeMenu()}disposeMenu(){this._bindEventService.unbindAll("parent-menu"),this._listElm?.remove(),this._menuElm?.remove(),this._menuElm=null}createPickerMenu(){const e=(0,w.createDomElement)("div",{ariaExpanded:"true",className:`slick-column-picker ${this._gridUid}`,role:"menu"});return wa.call(this),tc.call(this,e),Wn.call(this,e),this._listElm=(0,w.createDomElement)("div",{className:"slick-column-picker-list",role:"menu"}),this._bindEventService.bind(e,"click",qr.bind(this),void 0,"parent-menu"),document.body.appendChild(e),e}getAllColumns(){return this._columns}getVisibleColumns(){return this.grid.getColumns()}translateColumnPicker(){this.addonOptions&&(this.addonOptions.columnTitle="",this.addonOptions.forceFitTitle="",this.addonOptions.syncResizeTitle="",this.addonOptions.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","columnPicker"),this.addonOptions.forceFitTitle=this.extensionUtility.getPickerTitleOutputString("forceFitTitle","columnPicker"),this.addonOptions.syncResizeTitle=this.extensionUtility.getPickerTitleOutputString("syncResizeTitle","columnPicker")),this.extensionUtility.translateItems(this._columns,"nameKey","name"),this.translateTitleLabels(this.addonOptions)}handleBodyMouseDown(e){(this._menuElm!==e.target&&!this._menuElm?.contains(e.target)||"close"===e.target.className&&e.target.closest(".slick-column-picker"))&&this.disposeMenu()}handleHeaderContextMenu(e){e.preventDefault(),(0,w.emptyElement)(this._listElm),this._columnCheckboxes=[],this._menuElm=this.createPickerMenu(),this.gridOptions.darkMode&&this._menuElm.classList.add("slick-dark-mode"),La.call(this,this.addonOptions),document.body.appendChild(this._menuElm),this.repositionMenu(e)}repositionMenu(e){const i=e?.touches?.[0]??e;this._menuElm&&(this._menuElm.style.top=i.pageY-10+"px",this._menuElm.style.left=i.pageX-10+"px",this._menuElm.style.minHeight=(0,w.findWidthOrDefault)(this.addonOptions.minHeight,""),this._menuElm.style.maxHeight=(0,w.findWidthOrDefault)(this.addonOptions.maxHeight,window.innerHeight-i.clientY+"px"),this._menuElm.style.display="block",this._menuElm.ariaExpanded="true",this._menuElm.appendChild(this._listElm))}translateTitleLabels(e){e&&(e.columnTitle=this.extensionUtility.getPickerTitleOutputString("columnTitle","gridMenu"))}}const bl=(d,e,i,o,l,c)=>{const u=o.params||{};if(!u.formatters||!Array.isArray(u.formatters))throw new Error('[Slickgrid-Universal] The multiple formatter requires the "formatters" to be provided as a column params.\n    For example: this.columnDefinitions = [{ id: title, field: title, formatter: Formatters.multiple, params: { formatters: [Formatters.lowercase, Formatters.uppercase] }');let y=i;return u.formatters.forEach((M,V)=>{if("function"!=typeof M)throw new Error(`[Slickgrid-Universal] the "params.formatters" at index(${V}) to be used by "Formatters.multiple" is invalid, please verify all formatter functions.`);y=M.call(void 0,d,e,y,o,l,c)}),y};function ss(d,e){if(Array.isArray(d))for(const i of d)if(i.editor)if(i.formatter&&i.formatter!==bl&&i.formatter!==e){const o=i.formatter;i.formatter=bl,i.params={...i.params,formatters:[o,e]}}else i.formatter&&i.formatter===bl&&i.params?-1===i.params.formatters.findIndex(o=>o===e)&&(i.params.formatters=[...i.params.formatters,e]):i.formatter=e}function jn(d,e,i,o){let l,c,u="",g="";switch(i){case"currency":l=B.DEFAULT_FORMATTER_CURRENCY_MIN_DECIMAL,c=B.DEFAULT_FORMATTER_CURRENCY_MAX_DECIMAL;break;case"decimal":l=B.DEFAULT_FORMATTER_NUMBER_MIN_DECIMAL,c=B.DEFAULT_FORMATTER_NUMBER_MAX_DECIMAL;break;case"percent":l=B.DEFAULT_FORMATTER_PERCENT_MIN_DECIMAL,c=B.DEFAULT_FORMATTER_PERCENT_MAX_DECIMAL}const y=e&&"function"==typeof e.getOptions?e.getOptions():{},M=uo("minDecimal",d,y,l),V=uo("maxDecimal",d,y,c),te=uo("decimalSeparator",d,y,B.DEFAULT_NUMBER_DECIMAL_SEPARATOR),ve=uo("thousandSeparator",d,y,B.DEFAULT_NUMBER_THOUSAND_SEPARATOR),Ae=uo("displayNegativeNumberWithParentheses",d,y,B.DEFAULT_NEGATIVE_NUMBER_WRAPPED_IN_BRAQUET),ze=uo("currencyPrefix",d,y,""),Ye=uo("currencySuffix",d,y,"");return"cell"===o&&(u=uo("numberPrefix",d,y,""),g=uo("numberSuffix",d,y,"")),{minDecimal:M,maxDecimal:V,decimalSeparator:te,thousandSeparator:ve,wrapNegativeNumber:Ae,currencyPrefix:ze,currencySuffix:Ye,numberPrefix:u,numberSuffix:g}}function uo(d,e,i,o){const l=e&&e.params;return l&&l.hasOwnProperty(d)?l[d]:i?.formatterOptions?.hasOwnProperty(d)?i.formatterOptions[d]:o}function Ln(d,e){const i=ke(d,!0);return(o,l,c,u,g,y)=>{const V=(y&&"function"==typeof y.getOptions?y.getOptions():{})?.formatterOptions?.dateSeparator??e,ve=ke(u?.type??p.date,!0),Ae=u?.params?.parseDateAsUtc??!1,ze=_e(c,ve);let Ye=c;if(ze){let nt=c;Ae&&(nt=function Te(d){return(0,xe.so)(d,(0,xe.cY)(d,"utc"))}(ze)),Ye=(0,xe.GP)(nt,i,"en-US")}if(Ye&&V!==e){const nt=new RegExp(e,"ig");Ye=Ye.replace(nt,V)}return Ye}}function Va(d,e,i,o,l,c){let u="",y=o.field||o.id||"";if("string"==typeof o.field&&o.field.indexOf(".")>0){const V=o.field.split(".");y=V.length>0?V[0]:o.field}const M=l?.hasOwnProperty(y)?l[y]:null;if("function"==typeof d){const V=d(e,i,M,o,l,c),te=(0,w.isPrimitiveOrHTML)(V)?V:V.html||V.text;u=(0,w.getHtmlStringOutput)(te)}else u=l?.hasOwnProperty(y)?M:"";return null==u&&(u=""),"object"==typeof u&&!(u instanceof Date)&&0===Object.entries(u).length&&(u=""),u}class Gh extends Lh{constructor(e,i,o,l){super(e,i,o),this.extensionUtility=e,this.pubSubService=i,this.sharedService=o,this.treeDataService=l,this._defaults={autoAdjustDrop:!0,autoAlignSide:!0,autoAdjustDropOffset:0,autoAlignSideOffset:0,hideMenuOnScroll:!1,optionShownOverColumnIds:[],commandShownOverColumnIds:[],subMenuOpenByEvent:"mouseover"},this.pluginName="ContextMenu",this._camelPluginName="contextMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-context-menu",this.init(o.gridOptions.contextMenu)}init(e){this._addonOptions={...this._defaults,...e};const i=this._addonOptions&&Array.isArray(this._addonOptions.commandItems)?this._addonOptions.commandItems:[];this._addonOptions.commandItems=[...i,...this.addMenuCustomCommands(i)],this._addonOptions={...this._addonOptions},this.sharedService.gridOptions.contextMenu=this._addonOptions,this.sortMenuItems(),this._eventHandler.subscribe(this.grid.onContextMenu,this.handleOnContextMenu.bind(this)),this._eventHandler.subscribe(this.grid.onClick,this.hideMenu.bind(this)),this._addonOptions.hideMenuOnScroll&&this._eventHandler.subscribe(this.grid.onScroll,this.closeMenu.bind(this))}translateContextMenu(){const e=this.sharedService?.gridOptions??{},i=this.sharedService.gridOptions.contextMenu;if(i&&e?.enableTranslate){const o=i.commandItems||[],l=i.optionItems||[];i.commandTitleKey&&(i.commandTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(i.commandTitleKey,"TEXT_COMMANDS")||i.commandTitle),i.optionTitleKey&&(i.optionTitle=this.extensionUtility.translateWhenEnabledAndServiceExist(i.optionTitleKey,"TEXT_COMMANDS")||i.optionTitle),this.extensionUtility.translateMenuItemsFromTitleKey(o,"commandItems"),this.extensionUtility.translateMenuItemsFromTitleKey(l,"optionItems")}}handleOnContextMenu(e,i){this.disposeAllMenus();const o=this.grid.getCellFromEvent(e);if(o){const l=this.grid.getDataItem(o.row),c=this.grid.getColumns()[o.cell],u=i||{};if(u.cell=o.cell,u.row=o.row,u.column=c,u.dataContext=l,u.grid=this.grid,!this.extensionUtility.runOverrideFunctionWhenExists(this._addonOptions.menuUsabilityOverride,u))return;this._menuElm=this.createParentMenu(e),this._menuElm&&e.preventDefault(),this._menuElm&&this.gridOptions.darkMode&&this._menuElm.classList.add("slick-dark-mode"),this._menuElm&&(this.repositionMenu(e,this._menuElm),this._menuElm.ariaExpanded="true",this._menuElm.style.display="block"),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}}addMenuCustomCommands(e){const i=[],o=this.sharedService&&this.sharedService.gridOptions||{},l=o?.contextMenu,c=this.sharedService?.dataView,u=Z(o);if(l&&!l.hideCopyCellValueCommand){const g="copy";e.some(y=>"divider"!==y&&y.hasOwnProperty("command")&&y.command===g)||i.push({iconCssClass:l.iconCopyCellValueCommand||"mdi mdi-content-copy",titleKey:`${u}COPY`,disabled:!1,command:g,positionOrder:50,action:(y,M)=>{this.copyToClipboard(M)},itemUsabilityOverride:y=>{const M=y?.column,V=y?.dataContext;if("function"==typeof M.queryFieldNameGetterFn){const te=N(M,V,"");if(""!==te&&void 0!==te)return!0}else if(M&&V.hasOwnProperty(M.field))return""!==V[M.field]&&null!=V[M.field];return!1}})}if(o?.enableTextExport&&l&&!l.hideExportCsvCommand){const g="export-csv";e.some(y=>"divider"!==y&&y.hasOwnProperty("command")&&y.command===g)||i.push({iconCssClass:l.iconExportCsvCommand||"mdi mdi-download",titleKey:`${u}EXPORT_TO_CSV`,disabled:!1,command:g,positionOrder:51,action:()=>{const M=(this.sharedService?.externalRegisteredResources||[]).find(V=>"TextExportService"===V.className);if(!M?.exportToFile)throw new Error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Context Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");M.exportToFile({delimiter:D.comma,format:W.csv})}})}if(o&&o.enableExcelExport&&l&&!l.hideExportExcelCommand){const g="export-excel";e.some(y=>"divider"!==y&&y.hasOwnProperty("command")&&y.command===g)||i.push({iconCssClass:l.iconExportExcelCommand||"mdi mdi-file-excel-outline text-success",titleKey:`${u}EXPORT_TO_EXCEL`,disabled:!1,command:g,positionOrder:52,action:()=>{const M=(this.sharedService?.externalRegisteredResources||[]).find(V=>"ExcelExportService"===V.className);if(!M?.exportToExcel)throw new Error("[Slickgrid-Universal] You must register the ExcelExportService to properly use Export to Excel in the Context Menu. Example:: this.gridOptions = { enableExcelExport: true, externalResources: [new ExcelExportService()] };");M.exportToExcel()}})}if(o?.enableTextExport&&l&&!l.hideExportTextDelimitedCommand){const g="export-text-delimited";e.some(y=>"divider"!==y&&y.hasOwnProperty("command")&&y.command===g)||i.push({iconCssClass:l.iconExportTextDelimitedCommand||"mdi mdi-download",titleKey:`${u}EXPORT_TO_TAB_DELIMITED`,disabled:!1,command:g,positionOrder:53,action:()=>{const M=(this.sharedService?.externalRegisteredResources||[]).find(V=>"TextExportService"===V.className);if(!M?.exportToFile)throw new Error("[Slickgrid-Universal] You must register the TextExportService to properly use Export to File in the Context Menu. Example:: this.gridOptions = { enableTextExport: true, externalResources: [new TextExportService()] };");M.exportToFile({delimiter:D.tab,format:W.txt})}})}if(o&&(o.enableGrouping||o.enableDraggableGrouping||o.enableTreeData)){if(l&&!l.hideCopyCellValueCommand&&i.push({divider:!0,command:"",positionOrder:54}),o&&!o.enableTreeData&&l&&!l.hideClearAllGrouping){const g="clear-grouping";e.some(y=>"divider"!==y&&y.hasOwnProperty("command")&&y.command===g)||i.push({iconCssClass:l.iconClearGroupingCommand||"mdi mdi-close",titleKey:`${u}CLEAR_ALL_GROUPING`,disabled:!1,command:g,positionOrder:55,action:()=>{c.setGrouping([]),this.pubSubService.publish("onContextMenuClearGrouping")},itemUsabilityOverride:()=>{const y=c&&c.getGrouping&&c.getGrouping();return Array.isArray(y)&&y.length>0}})}if(o&&l&&!l.hideCollapseAllGroups){const g="collapse-all-groups";e.some(y=>"divider"!==y&&y.hasOwnProperty("command")&&y.command===g)||i.push({iconCssClass:l.iconCollapseAllGroupsCommand||"mdi mdi-arrow-collapse",titleKey:`${u}COLLAPSE_ALL_GROUPS`,disabled:!1,command:g,positionOrder:56,action:()=>{o.enableTreeData?this.treeDataService.toggleTreeDataCollapse(!0):c.collapseAllGroups(),this.pubSubService.publish("onContextMenuCollapseAllGroups")},itemUsabilityOverride:()=>{if(o.enableTreeData)return!0;const y=c&&c.getGrouping&&c.getGrouping();return Array.isArray(y)&&y.length>0}})}if(o&&l&&!l.hideExpandAllGroups){const g="expand-all-groups";e.some(y=>"divider"!==y&&y.hasOwnProperty("command")&&y.command===g)||i.push({iconCssClass:l.iconExpandAllGroupsCommand||"mdi mdi-arrow-expand",titleKey:`${u}EXPAND_ALL_GROUPS`,disabled:!1,command:g,positionOrder:57,action:()=>{o.enableTreeData?this.treeDataService.toggleTreeDataCollapse(!1):c.expandAllGroups(),this.pubSubService.publish("onContextMenuExpandAllGroups")},itemUsabilityOverride:()=>{if(o.enableTreeData)return!0;const y=c&&c.getGrouping&&c.getGrouping();return Array.isArray(y)&&y.length>0}})}}return this.extensionUtility.translateMenuItemsFromTitleKey(i),i}copyToClipboard(e){try{if(e&&e.grid&&e.command){const i=this.sharedService?.gridOptions??{},o=e?.cell??0,l=e?.row??0,c=e?.column,u=e?.dataContext,g=this.sharedService?.slickGrid;let M=function bo(d,e,i,o,l,c){let g,u=!1;i?.hasOwnProperty("exportWithFormatter")?u=!!i.exportWithFormatter:c?.hasOwnProperty("exportWithFormatter")&&(u=!!c.exportWithFormatter),o&&i.exportCustomFormatter?g=i.exportCustomFormatter:u&&i.formatter&&(g=i.formatter);const y=Va(g,d,e,i,o,l);return c?.sanitizeDataExport&&"string"==typeof y?(0,w.stripTags)(y):y}(l,o,c,u,g,i&&(i.excelExportOptions||i.textExportOptions));"function"==typeof c.queryFieldNameGetterFn&&(M=N(c,u,""));let V=M;"string"==typeof M&&(V=M.replace(/^([\xb7|\u2b9e|\u2b9f]\s*)|([\xb7|\u2b9e|\u2b9f])\s*/gi,"").replace(/[\u00b7|\u034f]/gi,"").trim());const te=document.createElement("textarea");te&&document.body&&(te.style.position="absolute",te.style.opacity="0",te.value=V,document.body.appendChild(te),te.select(),document.execCommand("copy",!1,V)&&te.remove())}}catch{}}sortMenuItems(){const e=this.sharedService?.gridOptions?.contextMenu;e&&(this.extensionUtility.sortItems(e.commandItems||[],"positionOrder"),this.extensionUtility.sortItems(e.optionItems||[],"positionOrder"))}}class wf{constructor(e,i,o){this.extensionUtility=e,this.pubSubService=i,this.sharedService=o,this.columnsGroupBy=[],this.pluginName="DraggableGrouping",this._gridColumns=[],this._gridUid="",this._reorderedColumns=[],this._subscriptions=[],this._defaults={dropPlaceHolderText:"Drop a column header here to group by the column",hideGroupSortIcons:!1,hideToggleAllButton:!1,toggleAllButtonText:"",toggleAllPlaceholderText:"Toggle all Groups"},this._bindingEventService=new Ft.P,this.onGroupChanged=new Dt("onGroupChanged"),this._eventHandler=new tn}get addonOptions(){return this._addonOptions}get dataView(){return this.grid?.getData()??{}}get dropboxElement(){return this._dropzoneElm}get droppableInstance(){return this._droppableInstance}get sortableLeftInstance(){return this._sortableLeftInstance}get sortableRightInstance(){return this._sortableRightInstance}get eventHandler(){return this._eventHandler}get grid(){return this._grid??this.sharedService.slickGrid??{}}get gridOptions(){return this.sharedService.gridOptions??{}}get gridUid(){return this._gridUid||(this.grid?.getUID()??"")}get gridContainer(){return this.grid.getContainerNode()}init(e,i){if(this._addonOptions={...this._defaults,...i},this._grid=e,e){if(this._gridUid=e.getUID(),this._gridColumns=e.getColumns(),this._dropzoneElm=e.getTopHeaderPanel()||e.getPreHeaderPanel(),this._dropzoneElm.classList.add("slick-dropzone"),this.onGroupChanged.setPubSubService(this.pubSubService),!this._addonOptions.hideToggleAllButton){this._groupToggler=(0,w.createDomElement)("div",{className:"slick-group-toggle-all",title:this._addonOptions.toggleAllPlaceholderText??"",style:{display:"none"}});const o=(0,w.createDomElement)("span",{className:"slick-group-toggle-all-icon"},this._groupToggler);this.gridOptions.enableTranslate&&this._addonOptions.toggleAllButtonTextKey&&(this._addonOptions.toggleAllButtonText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.toggleAllButtonTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this.gridOptions.enableTranslate&&this._addonOptions.toggleAllPlaceholderTextKey&&(this._addonOptions.toggleAllPlaceholderText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.toggleAllPlaceholderTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this._groupToggler.title=this._addonOptions.toggleAllPlaceholderText??"",this._addonOptions.toggleAllButtonText&&this._groupToggler.appendChild((0,w.createDomElement)("span",{className:"slick-group-toggle-all-text",textContent:this._addonOptions.toggleAllButtonText||""})),this._dropzoneElm.appendChild(this._groupToggler),this._subscriptions.push(this.pubSubService.subscribe("onContextMenuCollapseAllGroups",()=>this.toggleGroupToggler(o,!0,!1)),this.pubSubService.subscribe("onContextMenuExpandAllGroups",()=>this.toggleGroupToggler(o,!1,!1)))}this._dropzonePlaceholderElm=(0,w.createDomElement)("div",{className:"slick-draggable-dropzone-placeholder"},this._dropzoneElm),this.gridOptions.enableTranslate&&this._addonOptions?.dropPlaceHolderTextKey&&(this._addonOptions.dropPlaceHolderText=this.extensionUtility.translateWhenEnabledAndServiceExist(this._addonOptions.dropPlaceHolderTextKey,"TEXT_TOGGLE_ALL_GROUPS")),this._dropzonePlaceholderElm.textContent=this._addonOptions?.dropPlaceHolderText??this._defaults.dropPlaceHolderText??"",this.setupColumnDropbox(),this._eventHandler.subscribe(e.onHeaderCellRendered,(o,l)=>{const c=l.node;if(!(0,w.isEmptyObject)(l.column?.grouping)&&c&&(c.style.cursor="pointer",this._addonOptions.groupIconCssClass)){const u=(0,w.createDomElement)("span",{className:"slick-column-groupable"},c);this._addonOptions.groupIconCssClass&&u.classList.add(...(0,w.classNameToList)(this._addonOptions.groupIconCssClass))}}),this._subscriptions.push(this.pubSubService.subscribe("onContextMenuClearGrouping",()=>this.clearDroppedGroups()));for(const o of this._gridColumns)e.updateColumnHeader(o.field)}return this}dispose(){this.destroySortableInstances(),this._droppableInstance?.el&&this._droppableInstance?.destroy(),this.onGroupChanged.unsubscribe(),this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),this._bindingEventService.unbindAll(),(0,w.emptyElement)(this.gridContainer.querySelector(`.${this.gridUid} .slick-preheader-panel,.${this.gridUid} .slick-topheader-panel`))}clearDroppedGroups(){this.columnsGroupBy=[],this.updateGroupBy("clear-all");const e=this._dropzoneElm.querySelectorAll(".slick-dropped-grouping");for(const i of Array.from(e))this._dropzoneElm.querySelector(".slick-groupby-remove")?.remove(),i?.remove();this._dropzonePlaceholderElm.style.display="inline-block",this._groupToggler&&(this._groupToggler.style.display="none")}destroySortableInstances(){this._sortableLeftInstance?.el&&this._sortableLeftInstance?.destroy(),this._sortableRightInstance?.el&&this._sortableRightInstance?.destroy()}setAddonOptions(e){this._addonOptions={...this._addonOptions,...e}}setColumns(e){this._gridColumns=e}setDroppedGroups(e){this._dropzonePlaceholderElm.style.display="none";const i=Array.isArray(e)?e:[e];for(const o of i){const l=this.grid.getHeaderColumn(o);this.handleGroupByDrop(this._dropzoneElm,l)}}setupColumnReorder(e,i,o,l,c,u,g,y,M){this.destroySortableInstances();const V=e.getTopHeaderPanel()||e.getPreHeaderPanel(),te=V.querySelector(".slick-draggable-dropzone-placeholder"),ve=V.querySelector(".slick-group-toggle-all"),Ae={animation:50,chosenClass:"slick-header-column-active",ghostClass:"slick-sortable-placeholder",draggable:".slick-header-column",dataIdAttr:"data-id",group:{name:"shared",pull:"clone",put:!1},revertClone:!0,onStart:()=>{te&&(te.style.display="inline-block"),V.querySelectorAll(".slick-dropped-grouping").forEach(Ye=>Ye.style.display="none"),ve&&(ve.style.display="none")},onEnd:ze=>{V?.classList.remove("slick-dropzone-hover"),te?.parentElement?.classList.remove("slick-dropzone-placeholder-hover");const Ye=V.querySelectorAll(".slick-dropped-grouping");if(Ye.forEach(gt=>gt.style.display="flex"),Ye.length&&(te&&(te.style.display="none"),ve&&(ve.style.display="inline-flex")),!e.getEditorLock().commitCurrentEdit())return;const nt=this.sortableLeftInstance?.toArray()??[];if(i.length>1){const gt=this._sortableRightInstance?.toArray()??[];for(const rt of gt)nt.push(rt)}const et=[],Ot=e.getColumns();for(const gt of nt)et.push(Ot[g.call(e,gt)]);l.call(e,et),M.call(e,e.onColumnsReordered,{grid:e,impactedColumns:et}),ze.stopPropagation(),c.call(e)}};return this._sortableLeftInstance=Oo.create(this.gridContainer.querySelector(`.${e.getUID()} .slick-header-columns.slick-header-columns-left`),Ae),this._sortableRightInstance=Oo.create(this.gridContainer.querySelector(`.${e.getUID()} .slick-header-columns.slick-header-columns-right`),Ae),{sortableLeftInstance:this._sortableLeftInstance,sortableRightInstance:this._sortableRightInstance}}addColumnGroupBy(e){this.columnsGroupBy.push(e),this.updateGroupBy("add-group")}addGroupByRemoveClickHandler(e,i,o,l){this._bindingEventService.bind(i,"click",()=>{const c=this._bindingEventService.boundedEvents.filter(u=>u.element===i);for(const u of c)this._bindingEventService.unbind(u.element,"click",u.listener);this.removeGroupBy(e,o,l)})}addGroupSortClickHandler(e,i){const{grouping:o,type:l}=e;this._bindingEventService.bind(i,"click",()=>{if(this.toggleGroupAll(e,!1),o){const c=o.sortAsc?F.desc:F.asc;o.comparer=(u,g)=>Tt(l||"text",u.value,g.value,c,e,this.gridOptions),this.getGroupBySortIcon(i,!o.sortAsc),this.updateGroupBy("sort-group"),o.sortAsc=!o.sortAsc,this.grid.invalidate()}})}getGroupBySortIcon(e,i=!0){i?this._addonOptions.sortAscIconCssClass?(e.classList.remove(...(0,w.classNameToList)(this._addonOptions.sortDescIconCssClass)),e.classList.add(...(0,w.classNameToList)(this._addonOptions.sortAscIconCssClass))):(e.classList.add("slick-groupby-sort-asc-icon"),e.classList.remove("slick-groupby-sort-desc-icon")):this._addonOptions.sortDescIconCssClass?(e.classList.remove(...(0,w.classNameToList)(this._addonOptions.sortAscIconCssClass)),e.classList.add(...(0,w.classNameToList)(this._addonOptions.sortDescIconCssClass))):this._addonOptions.sortDescIconCssClass||(e.classList.add("slick-groupby-sort-desc-icon"),e.classList.remove("slick-groupby-sort-asc-icon"))}handleGroupByDrop(e,i){const o=i.getAttribute("data-id")?.replace(this._gridUid,"");let l=!0;for(const c of this.columnsGroupBy)c.id===o&&(l=!1);if(l){for(const c of this._gridColumns)if(c.id===o&&c.grouping&&!(0,w.isEmptyObject)(c.grouping)){const u=i.querySelector(".slick-column-name"),g=(0,w.createDomElement)("div",{id:`${this._gridUid}_${c.id}_entry`,className:"slick-dropped-grouping",dataset:{id:`${c.id}`}});(0,w.createDomElement)("div",{className:"slick-dropped-grouping-title",style:{display:"inline-flex"},textContent:u?u.textContent:i.textContent},g);const y=(0,w.createDomElement)("div",{className:"slick-groupby-remove"});let M;this._addonOptions.deleteIconCssClass&&y.classList.add(...(0,w.classNameToList)(this._addonOptions.deleteIconCssClass)),this._addonOptions.deleteIconCssClass||y.classList.add("slick-groupby-remove-icon"),!0!==this._addonOptions?.hideGroupSortIcons&&c.sortable&&(void 0===c.grouping?.sortAsc&&(c.grouping.sortAsc=!0),M=(0,w.createDomElement)("div",{className:"slick-groupby-sort"},g),this.getGroupBySortIcon(M,c.grouping.sortAsc)),g.appendChild(y),g.appendChild(document.createElement("div")),e.appendChild(g),this._groupToggler&&0===this.columnsGroupBy.length&&this.toggleGroupAll(c),this.addColumnGroupBy(c),this.addGroupByRemoveClickHandler(c.id,y,i,g),M&&this.addGroupSortClickHandler(c,M)}this._groupToggler&&this.columnsGroupBy.length>0&&(this._groupToggler.style.display="inline-flex")}}toggleGroupAll({grouping:e},i){const o=this._groupToggler?.querySelector(".slick-group-toggle-all-icon");!0===i||e?.collapsed?(o?.classList.add("collapsed"),o?.classList.remove("expanded")):(o?.classList.add("expanded"),o?.classList.remove("collapsed"))}removeFromArray(e,i){if(Array.isArray(e)){const o=e.findIndex(l=>l.id===i.id);o>=0&&e.splice(o,1)}return e}removeGroupBy(e,i,o){o.remove();const l=[];this._gridColumns.forEach(c=>l[c.id]=c),this.removeFromArray(this.columnsGroupBy,l[e]),0===this.columnsGroupBy.length&&(this._dropzonePlaceholderElm.style.display="inline-block",this._groupToggler&&(this._groupToggler.style.display="none")),this.updateGroupBy("remove-group")}addDragOverDropzoneListeners(){const e=this._dropzoneElm.querySelector(".slick-draggable-dropzone-placeholder");e&&this._dropzoneElm&&(this._bindingEventService.bind(e,"dragover",i=>i.preventDefault()),this._bindingEventService.bind(e,"dragenter",()=>this._dropzoneElm.classList.add("slick-dropzone-hover")),this._bindingEventService.bind(e,"dragleave",()=>this._dropzoneElm.classList.remove("slick-dropzone-hover")))}setupColumnDropbox(){const e=this._dropzoneElm;this._droppableInstance=Oo.create(e,{group:"shared",ghostClass:"slick-droppable-sortitem-hover",draggable:".slick-dropped-grouping",dragoverBubble:!0,onAdd:i=>{const o=i.item;o.getAttribute("id")?.replace(this._gridUid,"")&&this.handleGroupByDrop(e,Oo.utils.clone(i.item)),o.parentNode?.removeChild(o)},onUpdate:()=>{const i=this._droppableInstance?.toArray()??[],o=[];for(const l of i)for(const c of this.columnsGroupBy)if(c.id===l){o.push(c);break}this.columnsGroupBy=o,this.updateGroupBy("sort-group")}}),this.addDragOverDropzoneListeners(),this._groupToggler&&this._bindingEventService.bind(this._groupToggler,"click",i=>{const o=i.target.classList.contains("slick-group-toggle-all-icon")?i.target:i.currentTarget.querySelector(".slick-group-toggle-all-icon");this.toggleGroupToggler(o,o?.classList.contains("expanded"))})}toggleGroupToggler(e,i=!0,o=!0){e&&(!0===i?(e.classList.add("collapsed"),e.classList.remove("expanded"),o&&this.dataView.collapseAllGroups()):(e.classList.remove("collapsed"),e.classList.add("expanded"),o&&this.dataView.expandAllGroups()))}updateGroupBy(e){if(0===this.columnsGroupBy.length)return this.dataView.setGrouping([]),this._dropzonePlaceholderElm.style.display="inline-block",void this.triggerOnGroupChangedEvent({caller:e,groupColumns:[]});const i=[];this.columnsGroupBy.forEach(o=>i.push(o.grouping)),this.dataView.setGrouping(i),this._dropzonePlaceholderElm.style.display="none",this.triggerOnGroupChangedEvent({caller:e,groupColumns:i})}triggerOnGroupChangedEvent(e){this._addonOptions&&"function"==typeof this._addonOptions.onGroupChanged&&this._addonOptions.onGroupChanged(new wn,e),this.onGroupChanged.notify(e)}}class Vf extends Fa{constructor(e,i,o){super(e,i,o),this.extensionUtility=e,this.pubSubService=i,this.sharedService=o,this._buttonElms=[],this._defaults={buttonCssClass:"slick-header-button"},this.pluginName="HeaderButtons",this._menuCssPrefix="slick-header-button",this._camelPluginName="headerButtons",this._bindEventService=new Ft.P,this._eventHandler=new tn,this.init(o.gridOptions.headerButton)}get addonOptions(){return this._addonOptions}set addonOptions(e){this._addonOptions=e}get eventHandler(){return this._eventHandler}get grid(){return this.sharedService.slickGrid}init(e){this._addonOptions={...this._defaults,...e},this._eventHandler.subscribe(this.grid.onHeaderCellRendered,this.handleHeaderCellRendered.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeHeaderCellDestroy,this.handleBeforeHeaderCellDestroy.bind(this)),this.grid.setColumns(this.grid.getColumns())}dispose(){super.dispose(),this._buttonElms.forEach(e=>e.remove())}handleHeaderCellRendered(e,i){const o=i.column;if(o.header?.buttons&&Array.isArray(o.header.buttons)){let l=o.header.buttons.length;for(;l--;){const c=o.header.buttons[l],u=this.populateSingleCommandOrOptionItem("command",this.addonOptions,null,c,i,this.handleButtonClick.bind(this));u&&c.handler&&!c.disabled&&this._bindEventService.bind(u,"click",g=>c.handler.call(this,g)),u&&(this._buttonElms.push(u),i.node.appendChild(u))}}}handleBeforeHeaderCellDestroy(e,i){if(i.column.header?.buttons&&this._addonOptions?.buttonCssClass){const l=(this._addonOptions?.buttonCssClass||"").replace(/(\s+)/g,".");l&&i.node.querySelectorAll(`.${l}`).forEach(c=>c.remove())}}handleButtonClick(e,i,o,l,c){if(o.command&&!o.disabled){const u=o.command||"",g={grid:this.grid,column:c,button:o};u&&(g.command=u),"function"==typeof o.action&&!o.disabled&&o.action.call(this,e,g),null!==u&&!o.disabled&&this._addonOptions?.onCommand&&(this.pubSubService.publish("onHeaderButtonCommand",g),this._addonOptions.onCommand(e,g),c?.id&&this.grid.updateColumnHeader(c.id))}e.preventDefault(),e.stopPropagation()}}class nc extends Fa{constructor(e,i,o,l,c){super(e,o,l),this.extensionUtility=e,this.filterService=i,this.pubSubService=o,this.sharedService=l,this.sortService=c,this._subMenuParentId="",this._defaults={autoAlign:!0,autoAlignOffset:0,buttonCssClass:null,buttonImage:null,minWidth:100,hideColumnHideCommand:!1,hideSortCommands:!1,title:"",subMenuOpenByEvent:"mouseover"},this.pluginName="HeaderMenu",this._menuCssPrefix="slick-menu",this._menuPluginCssPrefix="slick-header-menu",this._camelPluginName="headerMenu",this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(this.sharedService.columnDefinitions),this.init(l.gridOptions.headerMenu)}init(e){this._addonOptions={...this._defaults,...e},this._eventHandler.subscribe(this.grid.onBeforeSetColumns,(i,o)=>{this.sharedService.gridOptions.headerMenu=this.addHeaderMenuCustomCommands(o.newColumns)}),this._eventHandler.subscribe(this.grid.onHeaderCellRendered,this.handleHeaderCellRendered.bind(this)),this._eventHandler.subscribe(this.grid.onBeforeHeaderCellDestroy,this.handleBeforeHeaderCellDestroy.bind(this)),this._eventHandler.subscribe(this.grid.onClick,this.hideMenu.bind(this)),this.grid.setColumns(this.grid.getColumns()),this._bindEventService.bind(document.body,"mousedown",this.handleBodyMouseDown.bind(this))}dispose(){super.dispose(),this._menuElm=this._menuElm||document.body.querySelector(`.slick-header-menu${this.gridUidSelector}`),this._menuElm?.remove(),this._activeHeaderColumnElm=void 0}hideColumn(e){if(this.sharedService?.slickGrid?.getColumnIndex){const i=this.sharedService.slickGrid.getColumnIndex(e.id),o=this.sharedService.slickGrid.getColumns(),l=this.sharedService.gridOptions.frozenColumn??-1;l>=0&&l>=i&&(this.sharedService.gridOptions.frozenColumn=l-1,this.sharedService.slickGrid.setOptions({frozenColumn:this.sharedService.gridOptions.frozenColumn}));const c=(0,w.arrayRemoveItemByIndex)(o,i);this.sharedService.visibleColumns=c,this.sharedService.slickGrid.setColumns(c),this.pubSubService.publish("onHeaderMenuHideColumns",{columns:c,hiddenColumn:e})}}hideMenu(){this.disposeSubMenus(),this._menuElm?.remove(),this._menuElm=void 0}repositionSubMenu(e,i,o,l){const c=this.createCommandMenu(i.commandItems||[],l,o+1,i);document.body.appendChild(c),this.repositionMenu(e,c)}repositionMenu(e,i){const o=e.target,l=i.classList.contains("slick-submenu"),c=l?e.target.closest(".slick-menu-item"):o,u=(0,w.getOffsetRelativeToParent)(this.sharedService.gridContainerElement,o),g=this.grid.getGridPosition(),y=i.offsetWidth,M=(0,w.getOffset)(c);let V=l?M.left:u?.left??0,te=l?M.top:(u?.top??0)+(this.addonOptions?.menuOffsetTop??0)+o.clientHeight;if(l){const ve=i?.clientHeight||0,{bottom:Ae,top:ze}=(0,w.calculateAvailableSpace)(c);"top"==(Ae<ve&&ze>Ae?"top":"bottom")?(i.classList.remove("dropdown"),i.classList.add("dropup"),te-=ve-c.clientHeight):(i.classList.remove("dropup"),i.classList.add("dropdown"))}if(l&&c){const ve=V+Number(y)+c.clientWidth,Ae=document.documentElement.clientWidth;"left"==(ve>=g.width||ve>=Ae?"left":"right")?(i.classList.remove("dropright"),i.classList.add("dropleft"),V-=y):(i.classList.remove("dropleft"),i.classList.add("dropright"),V+=c.offsetWidth)}else V=u?.left??0,this.addonOptions.autoAlign&&g?.width&&V+(i.clientWidth??0)>=g.width&&(V=V+o.clientWidth-i.clientWidth+(this.addonOptions?.autoAlignOffset||0));i.style.top=`${te}px`,i.style.left=`${V}px`}translateHeaderMenu(){this.sharedService.gridOptions?.headerMenu&&this.resetHeaderMenuTranslations(this.sharedService.visibleColumns)}handleHeaderCellRendered(e,i){const l=i.column.header?.menu;if(l&&i.node){if(!this.extensionUtility.runOverrideFunctionWhenExists(this.addonOptions.menuUsabilityOverride,i))return;const c=(0,w.createDomElement)("div",{className:"slick-header-menu-button",ariaLabel:"Header Menu"},i.node);this.addonOptions.buttonCssClass&&c.classList.add(...(0,w.classNameToList)(this.addonOptions.buttonCssClass)),this.addonOptions.tooltip&&(c.title=this.addonOptions.tooltip),this._bindEventService.bind(c,"click",u=>{this.disposeAllMenus(),this.createParentMenu(u,i.column,l)})}}handleBeforeHeaderCellDestroy(e,i){i.column.header?.menu&&i.node.querySelectorAll(".slick-header-menu-button").forEach(l=>l.remove())}handleBodyMouseDown(e){if(this.menuElement){let i=!1;const o=e.target.closest(`.${this.menuCssClass}`);(this.menuElement.contains(e.target)||o)&&(i=!0),(this._menuElm!==e.target&&!i&&!e.defaultPrevented||"close"===e.target.className&&o)&&this.hideMenu()}}handleMenuItemCommandClick(e,i,o,l=0,c){if("divider"!==o&&!o.disabled&&!o.divider)if(o.command&&!o.commandItems){const g={grid:this.grid,command:o.command,column:c,item:o};this.executeHeaderMenuInternalCommands(e,g),this.pubSubService.publish("onHeaderMenuCommand",g),"function"==typeof this.addonOptions?.onCommand&&this.addonOptions.onCommand(e,g),"function"==typeof o.action&&o.action.call(this,e,g),e.defaultPrevented||this.hideMenu(),e.preventDefault(),e.stopPropagation()}else o.commandItems&&this.repositionSubMenu(e,o,l,c)}handleMenuItemMouseOver(e,i,o,l=0,c){"divider"!==o&&!o.disabled&&!o.divider&&(o.commandItems?this.repositionSubMenu(e,o,l,c):0===l&&this.disposeSubMenus())}addHeaderMenuCustomCommands(e){const i=this.sharedService.gridOptions,o=i.headerMenu||{},l=Z(i);return Array.isArray(e)&&i.enableHeaderMenu&&e.forEach(c=>{if(c&&!c.excludeFromHeaderMenu){c.header?c.header.menu||(c.header.menu={commandItems:[]}):c.header={menu:{commandItems:[]}};const u=c?.header?.menu?.commandItems??[];let g=!1;if(o&&!o.hideFreezeColumnsCommand&&(g=!0,u.some(y=>"divider"!==y&&"freeze-columns"===y?.command)||u.push({iconCssClass:o.iconFreezeColumns||"mdi mdi-pin-outline",titleKey:`${l}FREEZE_COLUMNS`,command:"freeze-columns",positionOrder:45})),o&&!o.hideColumnResizeByContentCommand&&this.sharedService.gridOptions.enableColumnResizeOnDoubleClick&&(g=!0,u.some(y=>"divider"!==y&&"column-resize-by-content"===y?.command)||u.push({iconCssClass:o.iconColumnResizeByContentCommand||"mdi mdi-arrow-expand-horizontal",titleKey:`${l}COLUMN_RESIZE_BY_CONTENT`,command:"column-resize-by-content",positionOrder:47})),g&&!u.some(y=>"divider"!==y&&48===y.positionOrder)&&u.push({divider:!0,command:"",positionOrder:48}),i.enableSorting&&c.sortable&&o&&!o.hideSortCommands&&(u.some(y=>"divider"!==y&&"sort-asc"===y?.command)||u.push({iconCssClass:o.iconSortAscCommand||"mdi mdi-sort-ascending",titleKey:`${l}SORT_ASCENDING`,command:"sort-asc",positionOrder:50}),u.some(y=>"divider"!==y&&"sort-desc"===y?.command)||u.push({iconCssClass:o.iconSortDescCommand||"mdi mdi-sort-descending",titleKey:`${l}SORT_DESCENDING`,command:"sort-desc",positionOrder:51}),u.some(y=>"divider"!==y&&52===y.positionOrder)||u.push({divider:!0,command:"",positionOrder:52}),!o.hideClearSortCommand&&!u.some(y=>"divider"!==y&&"clear-sort"===y?.command)&&u.push({iconCssClass:o.iconClearSortCommand||"mdi mdi-sort-variant-off",titleKey:`${l}REMOVE_SORT`,command:"clear-sort",positionOrder:58})),c.filter?.filterShortcuts&&!u.some(y=>"divider"!==y&&"filter-shortcuts-root-menu"===y?.command)){const y=[];c.filter.filterShortcuts.forEach(V=>{const te=V.title?(0,w.toKebabCase)(V.title):(V.titleKey||"").toLowerCase().replaceAll("_","-");y.push({...V,command:te,action:(ve,Ae)=>{this.filterService.getFiltersMetadata().find(Ye=>Ye.columnDef.id===Ae.column.id)?.setValues(V.searchTerms,V.operator,!0)}})});const M=o.filterShortcutsPositionOrder??55;u.push({iconCssClass:o.iconFilterShortcutSubMenu||"mdi mdi-filter-outline",titleKey:`${l}FILTER_SHORTCUTS`,command:"filter-shortcuts-root-menu",positionOrder:M,commandItems:y}),g&&!u.some(V=>"divider"!==V&&V.positionOrder===M+1)&&u.push({divider:!0,command:"",positionOrder:M+1})}i.enableFiltering&&c.filterable&&o&&!o.hideFilterCommand&&!o.hideClearFilterCommand&&!u.some(y=>"divider"!==y&&"clear-filter"===y?.command)&&u.push({iconCssClass:o.iconClearFilterCommand||"mdi mdi-filter-remove-outline",titleKey:`${l}REMOVE_FILTER`,command:"clear-filter",positionOrder:57}),o&&!o.hideColumnHideCommand&&!u.some(y=>"divider"!==y&&"hide-column"===y?.command)&&u.push({iconCssClass:o.iconColumnHideCommand||"mdi mdi-close",titleKey:`${l}HIDE_COLUMN`,command:"hide-column",positionOrder:59}),this.extensionUtility.translateMenuItemsFromTitleKey(u),this.extensionUtility.sortItems(u,"positionOrder")}}),o}clearColumnFilter(e,i){i?.column&&this.filterService.clearFilterByColumnId(e,i.column.id)}clearColumnSort(e,i){i?.column&&this.sharedService&&this.sortService.clearSortByColumnId(e,i.column.id)}executeHeaderMenuInternalCommands(e,i){if(i?.command)switch(i.command){case"hide-column":this.hideColumn(i.column),this.sharedService.gridOptions?.enableAutoSizeColumns&&this.sharedService.slickGrid.autosizeColumns();break;case"clear-filter":this.clearColumnFilter(e,i);break;case"clear-sort":this.clearColumnSort(e,i);break;case"column-resize-by-content":this.pubSubService.publish("onHeaderMenuColumnResizeByContent",{columnId:i.column.id});break;case"freeze-columns":const o=[...this.sharedService.visibleColumns],c={frozenColumn:o.findIndex(M=>M.id===i.column.id),enableMouseWheelScrollHandler:!0},u=this.sharedService.slickGrid.getColumns();this.sharedService.slickGrid.setOptions(c,!1,!0),this.sharedService.gridOptions.frozenColumn=c.frozenColumn,this.sharedService.gridOptions.enableMouseWheelScrollHandler=c.enableMouseWheelScrollHandler,this.sharedService.frozenVisibleColumnId=i.column.id,this.sharedService.hasColumnsReordered||Array.isArray(o)&&Array.isArray(this.sharedService.allColumns)&&o.length!==this.sharedService.allColumns.length?this.sharedService.slickGrid.setColumns(o):this.sharedService.slickGrid.setColumns(u),this.sharedService.slickGrid.getOptions().enableAutoSizeColumns&&this.sharedService.slickGrid.autosizeColumns();break;case"sort-asc":case"sort-desc":this.sortColumn(e,i,"sort-asc"===i.command)}}createParentMenu(e,i,o){const l={grid:this.grid,column:i,menu:o};"function"==typeof e.stopPropagation&&(this.pubSubService.publish("onHeaderMenuBeforeMenuShow",l),"function"==typeof this.addonOptions?.onBeforeMenuShow&&!1===this.addonOptions?.onBeforeMenuShow(e,l))||(this._menuElm=this.createCommandMenu(o.commandItems,i),this.grid.getContainerNode()?.appendChild(this._menuElm),this.repositionMenu(e,this._menuElm),this.pubSubService.publish("onHeaderMenuAfterMenuShow",l),("function"!=typeof this.addonOptions?.onAfterMenuShow||!1!==this.addonOptions?.onAfterMenuShow(e,l))&&(e.preventDefault(),e.stopPropagation()))}createCommandMenu(e,i,o=0,l){const c=l?.command;let u=1===o&&c?c.replace(/\s/g,""):"";u&&(this._subMenuParentId=u),o>1&&(u=this._subMenuParentId);const g=`${this.menuCssClass} slick-menu-level-${o} ${this.gridUid}`,y=document.body.querySelector(`.${this.menuCssClass}.slick-menu-level-${o}${this.gridUidSelector}`);if(y){if(y.dataset.subMenuParent===u)return y;this.disposeSubMenus()}const M=(0,w.createDomElement)("div",{ariaExpanded:"true",ariaLabel:o>1?"SubMenu":"Header Menu",role:"menu",className:g,style:{minWidth:`${this.addonOptions.minWidth}px`}});o>0&&(M.classList.add("slick-submenu"),u&&(M.dataset.subMenuParent=u),this.gridOptions?.darkMode&&M.classList.add("slick-dark-mode"));const V=(0,w.createDomElement)("div",{className:`${this._menuCssPrefix}-command-list`,role:"menu"},M),te={grid:this.grid,column:i,level:o,menu:{commandItems:e}};return l&&o>0&&this.addSubMenuTitleWhenExists(l,V),this.populateCommandOrOptionItems("command",this.addonOptions,V,e,te,this.handleMenuItemCommandClick,this.handleMenuItemMouseOver),o++,M}resetHeaderMenuTranslations(e){e.forEach(i=>{i?.header?.menu?.commandItems&&!i.excludeFromHeaderMenu&&this.extensionUtility.translateMenuItemsFromTitleKey(i.header.menu.commandItems||[])})}sortColumn(e,i,o=!0){if(i?.column){const l=i.column,c=this.sharedService.gridOptions.multiColumnSort?this.sortService.getCurrentColumnSorts(l.id+""):[];let u=Y.local;c.push({columnId:l.id,sortCol:l,sortAsc:o}),this.sharedService.gridOptions.backendServiceApi?(this.sortService.onBackendSortChanged(e,{multiColumnSort:!0,sortCols:c,grid:this.sharedService.slickGrid}),u=Y.remote):this.sharedService.dataView?(this.sortService.onLocalSortChanged(this.sharedService.slickGrid,c),u=Y.local):i.grid.onSort.notify(c);const g=c.map(y=>({columnId:y?.sortCol?.id??"",sortAsc:y?.sortAsc??!0}));if(this.sharedService.slickGrid.setSortColumns(g),u){const y=[];g.forEach(M=>{y.push({columnId:`${M.columnId}`,direction:M.sortAsc?"ASC":"DESC"})}),this.sortService.emitSortChanged(u,y)}}}}const _r="slick-rbe-editmode",Rl="slick-rbe-unsaved-highlight",sc="action-btns--delete",Ba="action-btns--edit",Fl="action-btns--update",Ha="action-btns--cancel";class oc{constructor(e,i,o){this.extensionUtility=e,this.pubSubService=i,this.pluginName="RowBasedEdit",this._defaults={actionsColumnLabel:"Actions",allowMultipleRows:!1,columnId:"_slick_rowbasededit_action",columnIndexPosition:-1,reorderable:!1},this._editedRows=new Map,this._currentLang="en",this._translations={},this.onBeforeEditCellHandler=(l,c)=>this._editedRows.has(c.item?.[this.gridOptions.datasetIdPropertyName??"id"]),this._eventHandler=new tn,this._addonOptions=o}get addonOptions(){return this._addonOptions}get gridOptions(){return this._grid.getOptions()||{}}get eventHandler(){return this._eventHandler}init(e,i){this._grid=e,this._gridService=i,this._addonOptions={...this._defaults,...this.addonOptions};const o=this._grid.getData();if(this._eventHandler.subscribe(this._grid.onBeforeEditCell,this.onBeforeEditCellHandler),this.checkOptionsRequirements(this.gridOptions),this.gridOptions.autoEdit||(this._grid.setOptions({autoEdit:!0}),console.warn('[Slickgrid-Universal] The Row Based Edit Plugin works best with the gridOption "autoEdit" enabled, the option has now been set automatically for you.')),this._existingEditCommandHandler=this.gridOptions.editCommandHandler,this._grid.setOptions({editCommandHandler:this.rowBasedEditCommandHandler.bind(this)}),!0===this.gridOptions.enableExcelCopyBuffer){const c=this.gridOptions.excelCopyBufferOptions?.onBeforePasteCell;this._grid.setOptions({excelCopyBufferOptions:{...this.gridOptions.excelCopyBufferOptions,onBeforePasteCell:(u,g)=>{let y=!0;if(c&&(y=c(u,g),!1===y))return!1;const M=o.getItem(g.row);return!(!this._editedRows.has(M[this.gridOptions.datasetIdPropertyName??"id"])||!0!==y)}}})}const l=o.getItemMetadata;o.getItemMetadata=this.updateItemMetadata(l?.bind?.(o)),this._eventHandler.subscribe(this._grid.onSetOptions,this.optionsUpdatedHandler.bind(this)),this._eventHandler.subscribe(o.onRowsOrCountChanged,this.handleAllRowRerender.bind(this)),this.translate()}destroy(){this.dispose()}dispose(){this._eventHandler?.unsubscribeAll(),this.pubSubService?.unsubscribeAll()}create(e,i){if(this._addonOptions={...this._defaults,...i.rowBasedEditOptions},Array.isArray(e)&&i){const o=this.getColumnDefinition();if(!e.some(l=>l.id===o.id)){const l=i?.rowBasedEditOptions?.columnIndexPosition??-1;-1===l?e.push(o):l>0&&l<e.length?e.splice(l,0,o):e.unshift(o),this.pubSubService.publish("onPluginColumnsChanged",{columns:e,pluginName:this.pluginName})}}return this}getColumnDefinition(){return{id:String(this._addonOptions?.columnId??this._defaults.columnId),name:this._addonOptions?.actionsColumnLabel,field:"action",minWidth:70,width:75,maxWidth:75,excludeFromExport:!0,reorderable:this._addonOptions?.reorderable,formatter:this.actionColumnFormatter.bind(this),onCellClick:this.onCellClickHandler.bind(this),...this._addonOptions?.actionColumnConfig??{}}}rowBasedEditCommandHandler(e,i,o){this._existingEditCommandHandler&&this._existingEditCommandHandler(e,i,o);const l=Array.isArray(o.prevSerializedValue)?o.prevSerializedValue:[o.prevSerializedValue],c=Array.isArray(o.serializedValue)?o.serializedValue:[o.serializedValue],u=this._gridService?.getAllColumnDefinitions().filter(te=>void 0!==te.editor),g=[],y=this.gridOptions.datasetIdPropertyName??"id";l.forEach((te,ve)=>{const ze=c[ve];if(l[ve]!==ze||""===ze){const Ye=Array.isArray(o.prevSerializedValue)?u?.[ve]:i;if(!Ye)return;this._grid.invalidate(),o.execute(),this.renderUnsavedCellStyling(e[y],Ye),g.push(Ye)}});const M=this._editedRows.get(e[y]),V=[...M?.editCommands||[]];g.length>0&&V.push(o),this._editedRows.set(e[y],{columns:[...M?.columns||[],...g],editCommands:V,cssStyleKeys:M?.cssStyleKeys||[]})}translate(e=!1){return this._currentLang=this.extensionUtility.translaterService?.getCurrentLanguage()??"en",(!this._translations[this._currentLang]||e)&&(this._translations[this._currentLang]={btnUpdateTitle:this.getTitleOrDefault("updateButtonTitle","Update the row"),btnEditTitle:this.getTitleOrDefault("editButtonTitle","Edit the Row"),btnDeleteTitle:this.getTitleOrDefault("deleteButtonTitle","Delete the Row"),btnCancelTitle:this.getTitleOrDefault("cancelButtonTitle","Cancel changes of the Row")}),this._translations[this._currentLang]}checkOptionsRequirements(e){if(!e?.enableCellNavigation)throw new Error("[Slickgrid-Universal] Row Based Edit Plugin requires the gridOption cell navigation (enableCellNavigation = true)");if(!e?.editable)throw new Error("[Slickgrid-Universal] Row Based Edit Plugin requires the gridOption editable (editable = true)")}undoRowEdit(e){const o=this._editedRows.get(e[this.gridOptions.datasetIdPropertyName??"id"]),l=this._grid.getData().getRowByItem(e);if(void 0!==l&&o?.editCommands&&o.editCommands.length||yl.cancelCurrentEdit()){for(;o.editCommands.length>0;){const c=o.editCommands.pop();c&&c.undo()}o.columns.forEach(c=>{this.removeUnsavedStylingFromCell(c,l)}),o.columns=[],this._grid.invalidate()}}renderUnsavedCellStyling(e,i){if(i){const o=this._grid.getData()?.getRowById(e);if(void 0!==o&&o>=0){const c=`${Rl}_${[i.id]}${o}`;this._grid.setCellCssStyles(c,{[o]:{[i.id]:"slick-rbe-unsaved-cell"}}),this._editedRows.get(e)?.cssStyleKeys.push(c)}}}handleAllRowRerender(e,i){this._editedRows.forEach((o,l)=>{o.cssStyleKeys.forEach(c=>{this._grid.removeCellCssStyles(c)}),o.cssStyleKeys=[],o.columns.forEach(c=>{this.renderUnsavedCellStyling(l,c)})})}removeUnsavedStylingFromCell(e,i){this._grid.removeCellCssStyles(`${Rl}_${[e.id]}${i}`)}removeUnsavedStylingFromRow(e){this._grid.getColumns().forEach(i=>{this.removeUnsavedStylingFromCell(i,e)})}optionsUpdatedHandler(e,i){this._addonOptions={...this._defaults,...i.optionsAfter.rowBasedEditOptions}}onCellClickHandler(e,i){var o=this;return(0,yt.A)(function*(){const l=i.dataContext,c=e.target,g=o._editedRows.get(l[o.gridOptions.datasetIdPropertyName??"id"]);if((c.classList.contains(sc)||c.parentElement?.classList.contains(sc))&&o._gridService){if(o._addonOptions?.actionButtons?.deleteButtonPrompt&&!window.confirm(o._addonOptions.actionButtons.deleteButtonPrompt))return;o.toggleEditmode(l,!1),o._gridService.deleteItem(l)}else if(c.classList.contains(Ba)||c.parentElement?.classList.contains(Ba)){if(!o._addonOptions?.allowMultipleRows&&o._editedRows.size>0)return;"function"==typeof o._addonOptions?.onBeforeEditMode&&o._addonOptions.onBeforeEditMode(i),o.toggleEditmode(l,!0)}else if(c.classList.contains(Fl)||c.parentElement?.classList.contains(Fl)){if(o._addonOptions?.actionButtons?.updateButtonPrompt&&(g?.editCommands.length||0)>0&&!window.confirm(o._addonOptions.actionButtons.updateButtonPrompt)||(o._grid.getCellEditor()&&o._grid.getActiveCell()?.row===i.row&&o._grid.getEditController()?.commitCurrentEdit(),o._addonOptions?.onBeforeRowUpdated&&!0!==(yield o._addonOptions.onBeforeRowUpdated(i))))return;o.removeUnsavedStylingFromRow(i.row),o.toggleEditmode(l,!1)}else if(c.classList.contains(Ha)||c.parentElement?.classList.contains(Ha)){if(o._addonOptions?.actionButtons?.cancelButtonPrompt&&(g?.editCommands.length||0)>0&&!window.confirm(o._addonOptions.actionButtons.cancelButtonPrompt))return;o.undoRowEdit(l),o.toggleEditmode(l,!1)}})()}actionColumnFormatter(e,i,o,l,c){const u=this.gridOptions,g=this._editedRows.has(c?.[u.datasetIdPropertyName??"id"]),y=this._translations[this._currentLang]??this.translate(),M=document.createDocumentFragment();return M.appendChild((0,w.createDomElement)("span",{className:`${u.rowBasedEditOptions?.actionButtons?.editButtonClassName||"button-style padding-1px mr-2"} action-btns `+Ba,title:y.btnEditTitle,style:{display:g?"none":""}})).appendChild((0,w.createDomElement)("span",{className:u.rowBasedEditOptions?.actionButtons?.iconEditButtonClassName||"mdi mdi-table-edit text-color-primary"})),M.appendChild((0,w.createDomElement)("span",{className:`${u.rowBasedEditOptions?.actionButtons?.deleteButtonClassName||"button-style padding-1px"} action-btns `+sc,title:y.btnDeleteTitle,style:{display:g?"none":""}})).appendChild((0,w.createDomElement)("span",{className:u.rowBasedEditOptions?.actionButtons?.iconDeleteButtonClassName||"mdi mdi-close text-color-danger"})),M.appendChild((0,w.createDomElement)("span",{className:`${u.rowBasedEditOptions?.actionButtons?.updateButtonClassName||"button-style padding-1px mr-2"} action-btns `+Fl,title:y.btnUpdateTitle,style:{display:g?"":"none"}})).appendChild((0,w.createDomElement)("span",{className:u.rowBasedEditOptions?.actionButtons?.iconUpdateButtonClassName||"mdi mdi-check-bold text-color-success"})),M.appendChild((0,w.createDomElement)("span",{className:`${u.rowBasedEditOptions?.actionButtons?.cancelButtonClassName||"button-style padding-1px"} action-btns `+Ha,title:y.btnCancelTitle,style:{display:g?"":"none"}})).appendChild((0,w.createDomElement)("span",{className:u.rowBasedEditOptions?.actionButtons?.iconCancelButtonClassName||"mdi mdi-cancel text-color-danger"})),M}toggleEditmode(e,i){const o=this.gridOptions.datasetIdPropertyName??"id";i?this._editedRows.set(e[o],{columns:[],editCommands:[],cssStyleKeys:[]}):this._editedRows.delete(e[o]),this._grid.invalidate()}updateItemMetadata(e){return i=>{const o=this._grid.getData().getItem(i);let l={cssClasses:""};if("function"==typeof e){const c=e(i);c&&(l=c)}if(l&&o){const c=this.gridOptions.datasetIdPropertyName??"id";this._editedRows.has(o[c])&&!l.cssClasses.includes(_r)?l.cssClasses=(l.cssClasses||"")+" "+_r:!this._editedRows.has(o[c])&&l.cssClasses.includes(_r)&&(l.cssClasses=l.cssClasses.replace(_r,""))}return l}}getTitleOrDefault(e,i){const o=this.gridOptions.rowBasedEditOptions?.actionButtons;return o?.[e+"Key"]&&this.extensionUtility.translaterService?.translate?.(o?.[e+"Key"]||"")||o?.[e]||i}}class rc{constructor(e){this.pubSubService=e,this.pluginName="RowMoveManager",this._dragging=!1,this._defaults={autoScroll:!0,columnId:"_move",cssClass:"slick-row-move-column",cancelEditOnDrag:!1,disableRowSelection:!1,hideRowMoveShadow:!0,reorderable:!1,rowMoveShadowMarginTop:0,rowMoveShadowMarginLeft:0,rowMoveShadowOpacity:.9,rowMoveShadowScale:.75,singleRowMove:!1,width:40},this.onBeforeMoveRows=new Dt("onBeforeMoveRows"),this.onMoveRows=new Dt("onMoveRows"),this._eventHandler=new tn}get addonOptions(){return this._addonOptions}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()??{}}init(e,i){this._addonOptions={...this._defaults,...i},this._grid=e,this._canvas=this._grid.getCanvasNode(),Je.addSlickEventPubSubWhenDefined(this.pubSubService,this),"function"==typeof this._addonOptions?.usabilityOverride&&this.usabilityOverride(this._addonOptions.usabilityOverride),this._eventHandler.subscribe(this._grid.onDragInit,this.handleDragInit.bind(this)).subscribe(this._grid.onDragStart,this.handleDragStart.bind(this)).subscribe(this._grid.onDrag,this.handleDrag.bind(this)).subscribe(this._grid.onDragEnd,this.handleDragEnd.bind(this))}dispose(){this._eventHandler?.unsubscribeAll()}create(e,i){if(this._addonOptions={...this._defaults,...i.rowMoveManager},Array.isArray(e)&&i){const o=this.getColumnDefinition();if(!e.some(l=>l.id===o.id)){const c=Array.isArray(e)&&e.find(g=>"selectAndMove"===g?.behavior)||o,u=i?.rowMoveManager?.columnIndexPosition??0;u>0?e.splice(u,0,c):e.unshift(c),this.pubSubService.publish("onPluginColumnsChanged",{columns:e,pluginName:this.pluginName})}}return this}getColumnDefinition(){const e=String(this._addonOptions?.columnId??this._defaults.columnId);return{id:e,name:"",behavior:"selectAndMove",excludeFromExport:!0,excludeFromColumnPicker:!0,excludeFromGridMenu:!0,excludeFromQuery:!0,excludeFromHeaderMenu:!0,field:e,reorderable:this._addonOptions.reorderable,resizable:!1,width:this._addonOptions.width||40,formatter:this.moveIconFormatter.bind(this)}}usabilityOverride(e){this._usabilityOverride=e}setOptions(e){this._addonOptions={...this._addonOptions,...e}}handleDragInit(e){e.stopImmediatePropagation()}handleDragEnd(e,i){if(this._dragging&&(this._dragging=!1,e.stopImmediatePropagation(),i.guide?.remove(),i.selectionProxy?.remove(),i.clonedSlickRow?.remove(),i.canMove)){const o={grid:this._grid,rows:i.selectedRows,insertBefore:i.insertBefore};"function"==typeof this._addonOptions.onMoveRows&&this._addonOptions.onMoveRows(e instanceof wn?e.getNativeEvent():e,o),this.onMoveRows.notify(o)}}handleDrag(e,i){if(this._dragging){e.stopImmediatePropagation();const o=e.getNativeEvent(),c=(o?.touches?.[0]??o).pageY-(0,w.getOffset)(this._canvas).top;i.selectionProxy.style.top=c-5+"px",i.selectionProxy.style.display="block",i.clonedSlickRow&&(i.clonedSlickRow.style.top=c-6+"px",i.clonedSlickRow.style.display="block");const u=Math.max(0,Math.min(Math.round(c/(this.gridOptions.rowHeight||0)),this._grid.getDataLength()));if(u!==i.insertBefore){const g={grid:this._grid,rows:i.selectedRows,insertBefore:u};if(i.canMove=!1!==this._addonOptions?.onBeforeMoveRows?.(o,g)&&!1!==this.onBeforeMoveRows.notify(g).getReturnValue(),this._usabilityOverride&&i.canMove){const y=this._grid.getDataItem(u);i.canMove=this.checkUsabilityOverride(u,y,this._grid)}i.guide.style.top=i.canMove?u*(this.gridOptions.rowHeight||0)+"px":"-1000px",i.insertBefore=u}}}handleDragStart(e,i){const o=this._grid.getCellFromEvent(e)||{cell:-1,row:-1},l=o.row,c=this._grid.getDataItem(l);if(this.checkUsabilityOverride(l,c,this._grid)){if(this._addonOptions.cancelEditOnDrag&&this._grid.getEditorLock().isActive()&&this._grid.getEditorLock().cancelCurrentEdit(),this._grid.getEditorLock().isActive()||!/move|selectAndMove/.test(this._grid.getColumns()[o.cell].behavior||""))return!1;if(this._dragging=!0,e.stopImmediatePropagation(),!this.addonOptions.hideRowMoveShadow){const y=this._grid.getCellNode(o.row,o.cell)?.closest(".slick-row");y&&(i.clonedSlickRow=y.cloneNode(!0),i.clonedSlickRow.classList.add("slick-reorder-shadow-row"),i.clonedSlickRow.style.display="none",i.clonedSlickRow.style.marginLeft=(0,w.findWidthOrDefault)(this._addonOptions?.rowMoveShadowMarginLeft,"0px"),i.clonedSlickRow.style.marginTop=(0,w.findWidthOrDefault)(this._addonOptions?.rowMoveShadowMarginTop,"0px"),i.clonedSlickRow.style.opacity=`${this._addonOptions?.rowMoveShadowOpacity??.95}`,i.clonedSlickRow.style.transform=`scale(${this.addonOptions?.rowMoveShadowScale??.75})`,this._canvas.appendChild(i.clonedSlickRow))}let u=this._addonOptions.singleRowMove?[o.row]:this._grid.getSelectedRows();(0===u.length||!u.some(y=>y===o.row))&&(u=[o.row],this._addonOptions.disableRowSelection||this._grid.setSelectedRows(u));const g=this.gridOptions.rowHeight;i.selectedRows=u,i.selectionProxy=(0,w.createDomElement)("div",{className:"slick-reorder-proxy",style:{display:"none",position:"absolute",zIndex:"99999",width:`${this._canvas.clientWidth}px`,height:g*u.length+"px"}},this._canvas),i.guide=(0,w.createDomElement)("div",{className:"slick-reorder-guide",style:{position:"absolute",zIndex:"99999",width:`${this._canvas.clientWidth}px`,top:"-1000px"}},this._canvas),i.insertBefore=-1}}checkUsabilityOverride(e,i,o){return"function"!=typeof this._usabilityOverride||this._usabilityOverride(e,i,o)}moveIconFormatter(e,i,o,l,c,u){return this.checkUsabilityOverride(e,c,u)?{addClasses:"cell-reorder dnd",html:(0,w.createDomElement)("div",{className:this._addonOptions.cssClass||""})}:""}}class jh{get extensionList(){return this._extensionList}get gridOptions(){return this.sharedService.gridOptions||{}}constructor(e,i,o,l,c,u,g,y){this.extensionUtility=e,this.filterService=i,this.pubSubService=o,this.sharedService=l,this.sortService=c,this.treeDataService=u,this.translaterService=g,this.lazyGridService=y,this._extensionCreatedList={},this._extensionList={},this._requireInitExternalExtensions=[]}dispose(){if(this.sharedService.visibleColumns=[],"object"==typeof this._extensionList){const e=Object.keys(this._extensionList);e.forEach(i=>{if(this._extensionList.hasOwnProperty(i)){const o=this._extensionList[i];"function"==typeof o?.instance?.dispose&&o.instance.dispose()}}),e.forEach(i=>{delete this._extensionList[i]})}this._cellMenuPlugin=null,this._cellExcelCopyManagerPlugin=null,this._checkboxSelectColumn=null,this._contextMenuPlugin=null,this._columnPickerControl=null,this._draggleGroupingPlugin=null,this._gridMenuControl=null,this._groupItemMetadataProviderService=null,this._headerMenuPlugin=null,this._rowMoveManagerPlugin=null,this._rowSelectionModel=null,this._extensionCreatedList=null,this._extensionList={}}addExtensionToList(e,i){this._extensionList[e]=i}getAllColumns(){return this.sharedService.allColumns||[]}getVisibleColumns(){return this.sharedService.visibleColumns||[]}getCreatedExtensionByName(e){if(this._extensionCreatedList?.hasOwnProperty(e))return this._extensionCreatedList[e]}getExtensionByName(e){return this._extensionList?.[e]}getExtensionInstanceByName(e){return this.getExtensionByName(e)?.instance}autoResizeColumns(){this.sharedService.slickGrid.autosizeColumns()}bindDifferentExtensions(){if(this.gridOptions){if(this.gridOptions.enableTranslate&&this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.gridOptions.enableRowBasedEdit){this._rowBasedEdit=this._rowBasedEdit||new oc(this.extensionUtility,this.pubSubService,this.gridOptions.rowBasedEditOptions);const e=this.lazyGridService?.();if(!e)throw new Error("[Slickgrid-Universal] the RowBasedEdit Plugin requires a GridService to be configured and available");this._rowBasedEdit.init(this.sharedService.slickGrid,e),this.gridOptions.rowBasedEditOptions?.onExtensionRegistered&&this.gridOptions.rowBasedEditOptions.onExtensionRegistered(this._rowBasedEdit),this._extensionList[x.rowBasedEdit]={name:x.rowBasedEdit,instance:this._rowBasedEdit}}if(this.gridOptions.enableAutoTooltip){const e=new Zd(this.gridOptions?.autoTooltipOptions);this.sharedService.slickGrid.registerPlugin(e),this._extensionList[x.autoTooltip]={name:x.autoTooltip,instance:e}}if(this.gridOptions.enableExcelCopyBuffer&&(this._cellExcelCopyManagerPlugin=new vr,this._cellExcelCopyManagerPlugin.init(this.sharedService.slickGrid,this.sharedService.gridOptions.excelCopyBufferOptions),this.gridOptions.excelCopyBufferOptions?.onExtensionRegistered&&this.gridOptions.excelCopyBufferOptions.onExtensionRegistered(this._cellExcelCopyManagerPlugin),this._extensionList[x.cellExternalCopyManager]={name:x.cellExternalCopyManager,instance:this._cellExcelCopyManagerPlugin}),this.gridOptions.enableCellMenu&&(this._cellMenuPlugin=new wh(this.extensionUtility,this.pubSubService,this.sharedService),this.gridOptions.cellMenu?.onExtensionRegistered&&this.gridOptions.cellMenu.onExtensionRegistered(this._cellMenuPlugin),this._extensionList[x.cellMenu]={name:x.cellMenu,instance:this._cellMenuPlugin}),!this._rowSelectionModel&&(this.gridOptions.enableRowSelection||this.gridOptions.enableCheckboxSelector||this.gridOptions.enableRowDetailView||this.gridOptions.enableRowMoveManager)){if(!this._rowSelectionModel||!this.sharedService.slickGrid.getSelectionModel()){const e=this.gridOptions.rowSelectionOptions??{};this.gridOptions.enableRowMoveManager&&!1!==this.gridOptions.rowMoveManager?.dragToSelect&&(e.dragToSelect=!0),this._rowSelectionModel=new Na(e),this.sharedService.slickGrid.setSelectionModel(this._rowSelectionModel)}this._extensionList[x.rowSelection]={name:x.rowSelection,instance:this._rowSelectionModel}}if(this.gridOptions.enableCheckboxSelector){this._checkboxSelectColumn=this._checkboxSelectColumn||new lt(this.pubSubService,this.gridOptions.checkboxSelector),this._checkboxSelectColumn.init(this.sharedService.slickGrid);const i=this.getCreatedExtensionByName(x.checkboxSelector)?.instance;i&&(this.gridOptions.checkboxSelector?.onExtensionRegistered&&this.gridOptions.checkboxSelector.onExtensionRegistered(i),this._extensionList[x.checkboxSelector]={name:x.checkboxSelector,instance:this._checkboxSelectColumn})}if(this.gridOptions.enableColumnPicker&&(this._columnPickerControl=new Uh(this.extensionUtility,this.pubSubService,this.sharedService),this.gridOptions.columnPicker?.onExtensionRegistered&&this.gridOptions.columnPicker.onExtensionRegistered(this._columnPickerControl),this._extensionList[x.columnPicker]={name:x.columnPicker,instance:this._columnPickerControl}),this.gridOptions.enableContextMenu&&(this._contextMenuPlugin=new Gh(this.extensionUtility,this.pubSubService,this.sharedService,this.treeDataService),this.gridOptions.contextMenu?.onExtensionRegistered&&this.gridOptions.contextMenu.onExtensionRegistered(this._contextMenuPlugin),this._extensionList[x.contextMenu]={name:x.contextMenu,instance:this._contextMenuPlugin}),this.gridOptions.enableDraggableGrouping&&(this._draggleGroupingPlugin&&(this._draggleGroupingPlugin.init(this.sharedService.slickGrid,this.gridOptions.draggableGrouping),this.gridOptions.draggableGrouping?.onExtensionRegistered&&this.gridOptions.draggableGrouping.onExtensionRegistered(this._draggleGroupingPlugin),this._extensionList[x.contextMenu]={name:x.contextMenu,instance:this._draggleGroupingPlugin}),this._extensionList[x.draggableGrouping]={name:x.draggableGrouping,instance:this._draggleGroupingPlugin}),this.gridOptions.enableGridMenu&&(this._gridMenuControl=new bn(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService),this.gridOptions.gridMenu?.onExtensionRegistered&&this.gridOptions.gridMenu.onExtensionRegistered(this._gridMenuControl),this._extensionList[x.gridMenu]={name:x.gridMenu,instance:this._gridMenuControl}),this.gridOptions.enableHeaderButton){const e=new Vf(this.extensionUtility,this.pubSubService,this.sharedService);this.gridOptions.headerButton?.onExtensionRegistered&&this.gridOptions.headerButton.onExtensionRegistered(e),this._extensionList[x.headerButton]={name:x.headerButton,instance:e}}this.gridOptions.enableHeaderMenu&&(this._headerMenuPlugin=new nc(this.extensionUtility,this.filterService,this.pubSubService,this.sharedService,this.sortService),this.gridOptions.headerMenu?.onExtensionRegistered&&this.gridOptions.headerMenu.onExtensionRegistered(this._headerMenuPlugin),this._extensionList[x.headerMenu]={name:x.headerMenu,instance:this._headerMenuPlugin}),this.gridOptions.enableRowMoveManager&&(this._rowMoveManagerPlugin=this._rowMoveManagerPlugin||new rc(this.pubSubService),this._rowMoveManagerPlugin.init(this.sharedService.slickGrid,this.gridOptions.rowMoveManager),this.getCreatedExtensionByName(x.rowMoveManager)?.instance&&(this._extensionList[x.rowMoveManager]={name:x.rowMoveManager,instance:this._rowMoveManagerPlugin})),this._requireInitExternalExtensions.length&&this._requireInitExternalExtensions.forEach(e=>{e.instance.init(this.sharedService.slickGrid,void 0)})}}createExtensionsBeforeGridCreation(e,i){const o=[];i.enableCheckboxSelector&&(this.getCreatedExtensionByName(x.checkboxSelector)||(this._checkboxSelectColumn=new lt(this.pubSubService,this.sharedService.gridOptions.checkboxSelector),o.push({name:x.checkboxSelector,instance:this._checkboxSelectColumn,columnIndexPosition:i?.checkboxSelector?.columnIndexPosition??o.length}))),i.enableRowMoveManager&&(this.getCreatedExtensionByName(x.rowMoveManager)||(this._rowMoveManagerPlugin=new rc(this.pubSubService),o.push({name:x.rowMoveManager,instance:this._rowMoveManagerPlugin,columnIndexPosition:i?.rowMoveManager?.columnIndexPosition??o.length}))),i.enableRowBasedEdit&&(this.getCreatedExtensionByName(x.rowBasedEdit)||(this._rowBasedEdit=new oc(this.extensionUtility,this.pubSubService),o.push({name:x.rowBasedEdit,instance:this._rowBasedEdit,columnIndexPosition:i?.rowMoveManager?.columnIndexPosition??o.length}))),i.preRegisterExternalExtensions&&i.preRegisterExternalExtensions(this.pubSubService).forEach(c=>{o.push(c),this._requireInitExternalExtensions.push(c)}),this.createExtensionByTheirColumnIndex(o,e,i),i.enableDraggableGrouping&&(this.getCreatedExtensionByName(x.draggableGrouping)||(this._draggleGroupingPlugin=new wf(this.extensionUtility,this.pubSubService,this.sharedService),this._draggleGroupingPlugin&&(i.enableColumnReorder=this._draggleGroupingPlugin.setupColumnReorder.bind(this._draggleGroupingPlugin),this._extensionCreatedList[x.draggableGrouping]={name:x.draggableGrouping,instance:this._draggleGroupingPlugin})))}hideColumn(e){if("function"==typeof this.sharedService?.slickGrid?.getColumns){const i=this.sharedService.slickGrid.getColumnIndex(e.id);this.sharedService.visibleColumns=this.removeColumnByIndex(this.sharedService.slickGrid.getColumns(),i),this.sharedService.slickGrid.setColumns(this.sharedService.visibleColumns)}}refreshBackendDataset(e){this.extensionUtility.refreshBackendDataset(e)}removeColumnByIndex(e,i){return Array.isArray(e)?e.filter((o,l)=>i!==l):e}translateAllExtensions(e){this.translateCellMenu(),this.translateContextMenu(),this.translateHeaderMenu(),this.translateRowEditPlugin(),this.translateColumnHeaders(e)}translateCellMenu(){this._cellMenuPlugin?.translateCellMenu()}translateColumnPicker(){this._columnPickerControl?.translateColumnPicker()}translateContextMenu(){this._contextMenuPlugin?.translateContextMenu()}translateGridMenu(){this._gridMenuControl?.translateGridMenu()}translateHeaderMenu(){this._headerMenuPlugin?.translateHeaderMenu()}translateRowEditPlugin(){this._rowBasedEdit?.translate()}translateColumnHeaders(e,i){if(this.sharedService&&this.gridOptions&&this.gridOptions.enableTranslate&&(!this.translaterService||!this.translaterService.translate))throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');e&&this.translaterService?.use&&this.translaterService.getCurrentLanguage()!==e&&this.translaterService.use(e);let o=i;o||(o=this.sharedService.columnDefinitions),this.translateItems(o,"nameKey","name"),this.translateItems(this.sharedService.allColumns,"nameKey","name"),this.translateItems(this.sharedService.allColumns,"columnGroupKey","columnGroup"),this.renderColumnHeaders(o,Array.isArray(i))}renderColumnHeaders(e,i=!1){let o=e;o||(o=this.sharedService.columnDefinitions),Array.isArray(o)&&this.sharedService.slickGrid?.setColumns&&((o.length>this.sharedService.allColumns.length||i)&&(this.sharedService.allColumns=o),this.sharedService.slickGrid.setColumns(o)),this.gridOptions.enableColumnPicker&&this._columnPickerControl&&(this._columnPickerControl.columns=this.sharedService.allColumns,this._columnPickerControl.translateColumnPicker()),this.gridOptions.enableGridMenu&&this._gridMenuControl&&(this._gridMenuControl.columns=this.sharedService.allColumns??[],this._gridMenuControl.recreateGridMenu(),this._gridMenuControl.translateGridMenu())}createExtensionByTheirColumnIndex(e,i,o){e.sort((l,c)=>(l?.columnIndexPosition??0)-(c?.columnIndexPosition??0)),e.forEach(l=>{const c=l.instance.create(i,o);c&&(this._extensionCreatedList[l.name]={name:l.name,instance:c})})}translateItems(e,i,o){if(this.gridOptions?.enableTranslate&&!this.translaterService?.translate)throw new Error('[Slickgrid-Universal] requires a Translate Service to be installed and configured when the grid option "enableTranslate" is enabled.');this.extensionUtility.translateItems(e,i,o)}}function Ua(d,e,i){if(i&&(d?.hasOwnProperty(i)||e?.hasOwnProperty(i)))return d[i]===e||d===e[i]||d[i]===e[i];if("object"==typeof d&&"object"==typeof e&&Object.keys(d).length!==Object.keys(e).length)return!1;for(const o in d)if(d.hasOwnProperty(o)&&d[o]!==e[o])return!1;return!0}const ri=(d,e,i)=>{switch(d.toUpperCase()){case"<":case"LT":return e<i;case"<=":case"LE":return e<=i;case">":case"GT":return e>i;case">=":case"GE":return e>=i;case"!=":case"<>":case"NE":return e!==i;case"=":case"==":case"EQ":return e===i;case"IN":return!(!i||!Array.isArray(i))&&i.includes(e);case"NIN":case"NOT_IN":return!(!i||!Array.isArray(i)||i.includes(e));case"IN_CONTAINS":return!(!i||!Array.isArray(i)||"string"!=typeof e)&&i.some(o=>e.split(/[,]+/).map(l=>l.trim()).includes(o));case"NIN_CONTAINS":case"NOT_IN_CONTAINS":return!(!i||!Array.isArray(i)||"string"!=typeof e||i.some(o=>e.split(/[,]+/).map(l=>l.trim()).includes(o)));case"IN_COLLECTION":return!!(e&&i&&Array.isArray(e)&&Array.isArray(i))&&i.some(o=>e.includes(o));case"NOT_IN_COLLECTION":return!!(e&&i&&Array.isArray(e)&&Array.isArray(i))&&!i.some(o=>e.includes(o))}return!0};function Ga(d,e,i,o){return"*"===d||d===le.endsWith||"*z"===d?e.endsWith(i):""===d&&"*"===o||d===le.startsWith||"a*"===d?e.startsWith(i):""===d||d===le.contains?e.indexOf(i)>-1:"<>"===d||d===le.notContains?-1===e.indexOf(i):ri(d||"==",e,i)}function tl(d,e){let o;switch(dc(e)){case"boolean":o=function Wh(d){const e=Array.isArray(d)&&d[0]||!1;return(0,w.parseBoolean)(e)}(d);break;case"date":o=function Gf(d,e){const i=Array.isArray(d)&&d||[],l=ke(e||p.dateIso),c=[];if(2===i.length||"string"==typeof i[0]&&i[0].indexOf("..")>0){const u=2===i.length?i:i[0].split(".."),g=Array.isArray(u)&&u[0]||"",y=Array.isArray(u)&&u[1]||"",M=_e(g,l,!0),V=_e(y,l,!0);if(!M||!V)return[];c.push(M,V)}else{const u=_e(i[0],l,!0);if(!u)return[];c.push(u)}return c}(d,e);break;case"number":o=function Uf(d){const i=Array.isArray(d)&&d||[0],o=[];let l,c;if(2===i.length||"string"==typeof i[0]&&i[0].indexOf("..")>0){const u=2===i.length?i:i[0].split("..");l=parseFloat(Array.isArray(u)?u[0]:""),c=parseFloat(Array.isArray(u)?u[1]:"")}else l=parseFloat(i[0]);return(0,w.isNumber)(l,!0)&&(0,w.isNumber)(c,!0)?o.push(l,c):(0,w.isNumber)(l,!0)&&o.push(l),o}(d);break;case"object":o=function Wa(d){return(Array.isArray(d)&&d.length>0?d[0]:"")||""}(d);break;case"string":o=function qn(d){let i=Array.isArray(d)&&d||[""];const o=[];let l,c;if(1===i.length&&"string"==typeof i[0]){const u=i[0];u.indexOf("..")>0?i=u.split(".."):u.indexOf("*")>0&&u.indexOf("*")<u.length-1&&(i=u.split("*"))}if(2===i.length)l=`${i[0]}`,c=`${i[1]}`;else{const u=Array.isArray(d)&&d.length>0?d[0]:"";l=null==u?"":`${u}`}return void 0!==l&&void 0!==c?o.push(l,c):void 0!==l&&o.push(l),o}(d)}return o}function dc(d){switch(d){case p.boolean:return"boolean";case p.date:case p.dateIso:case p.dateUtc:case p.dateTime:case p.dateTimeIso:case p.dateTimeIsoAmPm:case p.dateTimeIsoAM_PM:case p.dateTimeShortIso:case p.dateEuro:case p.dateEuroShort:case p.dateTimeShortEuro:case p.dateTimeEuro:case p.dateTimeEuroAmPm:case p.dateTimeEuroAM_PM:case p.dateTimeEuroShort:case p.dateTimeEuroShortAmPm:case p.dateTimeEuroShortAM_PM:case p.dateUs:case p.dateUsShort:case p.dateTimeShortUs:case p.dateTimeUs:case p.dateTimeUsAmPm:case p.dateTimeUsAM_PM:case p.dateTimeUsShort:case p.dateTimeUsShortAmPm:case p.dateTimeUsShortAM_PM:return"date";case p.integer:case p.float:case p.number:return"number";case p.object:return"object";default:return"string"}}const cc_executeFilterConditionTest=(d,e)=>{if(function Bf(d){switch(d&&d.toUpperCase()||""){case"IN":case"NIN":case"NOT_IN":case"IN_CONTAINS":case"NIN_CONTAINS":case"NOT_IN_CONTAINS":case"IN_COLLECTION":case"NOT_IN_COLLECTION":return!0;default:return!1}}(d.operator))return(d=>{const e=d.operator;let i;return i=!Array.isArray(d.cellValue)||"IN_COLLECTION"!==e&&"NOT_IN_COLLECTION"!==e?null==d.cellValue?"":`${d.cellValue}`:d.cellValue.length?d.cellValue.map(o=>`${o}`):[],ri(e||"IN",i,d.searchTerms||[])})(d);switch(dc(d.filterSearchType||d.fieldType)){case"boolean":return((d,e)=>(0,w.parseBoolean)(d.cellValue)===(0,w.parseBoolean)(e))(d,e);case"date":return function fo(d,e){const o=ke(d&&(d.filterSearchType||d.fieldType)||p.dateIso),[l,c]=e,u=_e(d.cellValue,o,!0);if(!l&&!c||!u)return!1;const g="ISO8601"===o||o.toLowerCase().includes("h")?u.valueOf():(0,xe.J7)(new Date(u)).valueOf();if(l&&c){let M=d?.operator??d.defaultFilterRangeOperator;M!==le.rangeInclusive&&M!==le.rangeExclusive&&(M=d.defaultFilterRangeOperator);const V=M===le.rangeInclusive,te=ri(V?">=":">",g,l.valueOf()),ve=ri(V?"<=":"<",g,c.valueOf());return te&&ve}const y="ISO8601"===o||o.toLowerCase().includes("h")?l.valueOf():(0,xe.J7)(new Date(l)).valueOf();return ri(d.operator||"==",g,y)}(d,e||[]);case"number":return((d,e)=>{const i=parseFloat(d.cellValue),[o,l]=e;if(void 0===o&&!d.operator)return!0;if(void 0!==o&&void 0!==l){let c=d?.operator??d.defaultFilterRangeOperator;c!==le.rangeInclusive&&c!==le.rangeExclusive&&(c=d.defaultFilterRangeOperator);const u=c===le.rangeInclusive,g=ri(u?">=":">",i,+o),y=ri(u?"<=":"<",i,+l);return g&&y}return ri(d.operator||"==",i,+o)})(d,e||[]);case"object":return((d,e)=>{if(void 0===e&&!d.operator)return!0;switch((d.operator||"").toUpperCase()){case"!=":case"<>":case"NE":return!Ua(d.cellValue,e,d.dataKey);default:return Ua(d.cellValue,e,d.dataKey)}})(d,e);default:return((d,e)=>{let[i,o]=e;if(void 0===i&&!d.operator)return!0;d.cellValue=null==d.cellValue?"":d.cellValue.toString();const l=d?.ignoreAccentOnStringFilterAndSort?(0,w.removeAccentFromText)(d.cellValue,!0):d.cellValue.toLowerCase();if("string"==typeof i&&(i=d?.ignoreAccentOnStringFilterAndSort?(0,w.removeAccentFromText)(i,!0):i.toLowerCase()),"string"==typeof o&&(o=d?.ignoreAccentOnStringFilterAndSort?(0,w.removeAccentFromText)(o,!0):o.toLowerCase()),d.operator===le.startsWithEndsWith&&void 0!==i&&void 0!==o)return function Hf(d,[e,i]){return d.startsWith(e)&&d.endsWith(i)}(l,[i,o]);if(void 0!==i&&void 0!==o){let u=d?.operator??d.defaultFilterRangeOperator;u!==le.rangeInclusive&&u!==le.rangeExclusive&&(u=d.defaultFilterRangeOperator);const g=u===le.rangeInclusive,y=Ga(g?">=":">",l,i,d.searchInputLastChar),M=Ga(g?"<=":"<",l,o,d.searchInputLastChar);return y&&M}return Ga(d.operator,l,i,d.searchInputLastChar)})(d,e||[])}};class jf{constructor(e,i,o,l,c){this.filterFactory=e,this.pubSubService=i,this.sharedService=o,this.backendUtilities=l,this.rxjs=c,this._isFilterFirstRender=!0,this._firstColumnIdRendered="",this._filtersMetadata=[],this._columnFilters={},this._isTreePresetExecuted=!1,this._previousFilters=[],this._onSearchChange=new Dt,this._eventHandler=new tn,this.rxjs&&(this.httpCancelRequests$=this.rxjs.createSubject())}get eventHandler(){return this._eventHandler}get isFilterFirstRender(){return this._isFilterFirstRender}get onSearchChange(){return this._onSearchChange}get _gridOptions(){return this._grid?.getOptions()??{}}get _columnDefinitions(){return this._grid?.getColumns()??[]}get _dataView(){return this._grid?.getData()??{}}addRxJsResource(e){this.rxjs=e}init(e){this._grid=e,this._gridOptions&&this._gridOptions.enableTreeData&&this._gridOptions.treeDataOptions&&this._grid.setSortColumns([{columnId:this._gridOptions.treeDataOptions.columnId,sortAsc:!0}])}dispose(){this._eventHandler.unsubscribeAll(),this.httpCancelRequests$&&this.rxjs?.isObservable(this.httpCancelRequests$)&&(this.httpCancelRequests$.next(),this.httpCancelRequests$.complete()),this.disposeColumnFilters(),this._onSearchChange=null}disposeColumnFilters(){if(this.removeAllColumnFiltersProperties(),Array.isArray(this._filtersMetadata)){let e=this._filtersMetadata.pop();for(;e;)"function"==typeof e?.destroy&&e.destroy(),e=this._filtersMetadata.pop()}}bindBackendOnFilter(e){this._filtersMetadata=[],this._eventHandler.subscribe(e.onHeaderRowCellRendered,(i,o)=>{o.column.id===this._firstColumnIdRendered&&(this._isFilterFirstRender=!1),this.addFilterTemplateToHeaderRow(o,this._isFilterFirstRender),""===this._firstColumnIdRendered&&(this._firstColumnIdRendered=o.column.id)}),this.subscribeToOnHeaderRowCellRendered(e),this._onSearchChange&&this._eventHandler.subscribe(this._onSearchChange,this.onBackendFilterChange.bind(this))}bindLocalOnFilter(e){var i=this;this._filtersMetadata=[],this._dataView.setFilterArgs({columnFilters:this._columnFilters,grid:this._grid,dataView:this._dataView}),this._dataView.setFilter(this.customLocalFilter.bind(this)),this._onSearchChange&&this._eventHandler.subscribe(this._onSearchChange,function(){var o=(0,yt.A)(function*(l,c){const u=c?.clearFilterTriggered??!1;u||(yield i.emitFilterChanged(Y.local,!0)),!0===i._gridOptions.enableTreeData&&(i._tmpPreFilteredData=i.preFilterTreeData(i._dataView.getItems(),i._columnFilters)),u||(yield i.emitFilterChanged(Y.local)),null!==c.columnId&&i._dataView.refresh(),i._previousFilters=i.extractBasicFilterDetails(i._columnFilters)});return function(l,c){return o.apply(this,arguments)}}()),this._eventHandler.subscribe(e.onHeaderRowCellRendered,(o,l)=>{this.addFilterTemplateToHeaderRow(l)}),this.subscribeToOnHeaderRowCellRendered(e)}clearFilterByColumnId(e,i){var o=this;return(0,yt.A)(function*(){yield o.pubSubService.publish("onBeforeFilterClear",{columnId:i},0);const l=o._gridOptions.backendServiceApi??!1,c=l?Y.remote:Y.local,u=Object.keys(o._columnFilters);let g;Array.isArray(u)&&(g=u.find(M=>M===`${i}`));const y=o._filtersMetadata.find(M=>M.columnDef.id===i);return y?.clear&&y.clear(!0),l&&void 0!==g&&o.onBackendFilterChange(e,{grid:o._grid,columnFilters:o._columnFilters}),yield o.emitFilterChanged(c),!0})()}clearFilters(e=!0){var i=this;return(0,yt.A)(function*(){e&&(yield i.pubSubService.publish("onBeforeFilterClear",!0,0)),i._filtersMetadata.forEach(l=>{l?.clear&&l.clear(!1)}),i.removeAllColumnFiltersProperties(),Array.isArray(i._columnDefinitions)&&i._columnDefinitions.forEach(l=>{l.filter?.searchTerms&&delete l.filter.searchTerms}),i._dataView&&i._grid&&(i._dataView.refresh(),i._grid.invalidate());const o=i._gridOptions.backendServiceApi;if(o&&e){const l={clearFilterTriggered:!0,shouldTriggerQuery:e,grid:i._grid,columnFilters:i._columnFilters},u=o.service.processOnFilterChanged(void 0,l),g=i._gridOptions.pagination?.totalItems??0;i.backendUtilities?.executeBackendCallback(o,u,l,new Date,g,{errorCallback:i.resetToPreviousSearchFilters.bind(i),successCallback:y=>i._previousFilters=i.extractBasicFilterDetails(y.columnFilters),emitActionChangedCallback:i.emitFilterChanged.bind(i)})}else i._previousFilters=i.extractBasicFilterDetails(i._columnFilters);e&&i.pubSubService.publish("onFilterCleared",!0)})()}customLocalFilter(e,i){const o=i?.grid,l=i?.columnFilters??{},u=this._gridOptions.treeDataOptions;if(this._gridOptions.enableTreeData&&u){const g=u.collapsedPropName??B.treeDataProperties.COLLAPSED_PROP,y=u.parentPropName??B.treeDataProperties.PARENT_PROP,M=u?.childrenPropName??B.treeDataProperties.CHILDREN_PROP,V=this._gridOptions.datasetIdPropertyName??"id",te=u.autoRecalcTotalsOnFilterChange??!1;let ve=!1;if(null!==e[y]){let Ae=this._dataView.getItemById(e[y]);for(;Ae;){if(Ae[g]){if(!te)return!1;ve=!0}Ae=this._dataView.getItemById(Ae[y])}}if(this._tmpPreFilteredData instanceof Set){const Ae=this._tmpPreFilteredData.has(e[V]);if(te){const ze=he(this.sharedService.hierarchicalDataset,Ye=>Ye[V]===e[V],M);if(ze&&(ze.__filteredOut=!Ae),ve)return!1}return Ae}}else if("object"==typeof l)for(const g of Object.keys(l)){const y=l[g],M=y.columnDef?.filter;if("function"==typeof M?.filterPredicate){if(!M.filterPredicate(e,y))return!1}else{const V=this.preProcessFilterConditionOnDataContext(e,y,o);if("boolean"==typeof V)return V;let te=y?.parsedSearchTerms;if(void 0===te&&(te=tl(y.searchTerms,y.columnDef.type||p.string),void 0!==te&&(y.parsedSearchTerms=te)),!cc_executeFilterConditionTest(V,te))return!1}}return!0}parseFormInputFilterConditions(e,i){const o=(0,w.extend)(!0,[],e)||[];let l=Array.isArray(o)&&1===o.length?o[0]:"";const c=i.columnDef,u=c.filter?.type??c.type??p.string;let g=null;u!==p.object&&(l=null==l?"":`${l}`,g=!1!==(c.autoParseInputFilterOperator??this._gridOptions.autoParseInputFilterOperator)?l.match(/^((.*[^\\*\r\n])[*]{1}(.*[^*\r\n]))|^([<>!=*]{0,2})(.*[^<>!=*])([*]?)$/)||[]:[l,"","","","",l,""]);const y=g?.[2]||"",M=g?.[3]||"";let V=g?.[4]||i.operator,te=g?.[1]||g?.[5]||"";const ve=g?.[6]||("*z"===V?"*":"");return"string"==typeof l&&(l=l.replace("'","''"),y&&M?(te=l,V=le.startsWithEndsWith):"*"===V||"*z"===V?V=le.endsWith:("a*"===V||"*"===ve)&&(V=le.startsWith)),Array.isArray(g)&&g.length>=1&&Array.isArray(o)&&1===o.length&&(o[0]=te.length>0&&" "===te.substring(0,1)?te.substring(1):te),{dataKey:c.dataKey,fieldType:u,searchTerms:o||[],operator:V,searchInputLastChar:ve,filterSearchType:c.filterSearchType,defaultFilterRangeOperator:this._gridOptions.defaultFilterRangeOperator}}preProcessFilterConditionOnDataContext(e,i,o){const l=i.columnDef,c=i.columnId;let u=o.getColumnIndex(c);if(!l&&this.sharedService&&Array.isArray(this.sharedService.allColumns)&&(u=this.sharedService.allColumns.findIndex(ve=>ve.field===c)),!l)return!0;if(this._gridOptions.enableRowDetailView){const ve=this._gridOptions.rowDetailView&&this._gridOptions.rowDetailView.keyPrefix||"__";e[`${ve}isPadding`]&&e[`${ve}parent`]&&(e=e[`${ve}parent`])}let g=l.filter?.queryField||l.queryFieldFilter||l.queryField||l.field||"";"function"==typeof l.queryFieldNameGetterFn&&(g=l.queryFieldNameGetterFn(e));const y=l.filter?.type??l.type??p.string;let M=e[g];g?.indexOf(".")>=0&&(M=ee(e,g));const V=i.operator,te=i.searchTerms||[];if(!te||Array.isArray(te)&&(0===te.length||1===te.length&&V===te[0]))return!0;if(te&&Array.isArray(te)&&y!==p.object)for(let ve=0,Ae=te.length;ve<Ae;ve++)te[ve]=(null==te[ve]?"":te[ve])+"";if(!0===l?.params?.useFormatterOuputToFilter){const ve=o.getData(),ze=ve&&"function"==typeof ve.getIdxById?ve.getIdxById(e[this._gridOptions.datasetIdPropertyName||"id"]):0,Ye=l&&"function"==typeof l.formatter?l.formatter(ze||0,u,M,l,e,this._grid):"";M=(0,w.stripTags)(Ye)}return"number"==typeof M&&(M=M.toString()),{dataKey:l.dataKey,fieldType:y,searchTerms:te,cellValue:M,operator:V,searchInputLastChar:i.searchInputLastChar,filterSearchType:l.filterSearchType,ignoreAccentOnStringFilterAndSort:this._gridOptions.ignoreAccentOnStringFilterAndSort??!1,defaultFilterRangeOperator:this._gridOptions.defaultFilterRangeOperator}}preFilterTreeData(e,i){const o=this._gridOptions.treeDataOptions,l=o?.collapsedPropName??B.treeDataProperties.COLLAPSED_PROP,c=o?.parentPropName??B.treeDataProperties.PARENT_PROP,u=o?.hasChildrenPropName??B.treeDataProperties.HAS_CHILDREN_PROP,g=this._gridOptions.datasetIdPropertyName??"id",y=this._gridOptions.presets?.treeData?.toggledItems,M=this._gridOptions.treeDataOptions?.initiallyCollapsed??!1,V=this._gridOptions.treeDataOptions?.columnId,te=this._gridOptions.treeDataOptions?.excludeChildrenWhenFilteringTree,ve=!te&&!0===this._gridOptions.treeDataOptions?.autoApproveParentItemWhenTreeColumnIsValid,Ae={},ze=new Set,Ye=new Map;return Array.isArray(e)&&(e.forEach(nt=>{Ae[nt[g]]=nt,delete Ae[nt[g]].__used}),"object"==typeof i&&Object.keys(i).forEach(nt=>{const et=i[nt],Ot=et?.searchTerms?(0,w.extend)(!0,[],et.searchTerms):[],gt=this.parseFormInputFilterConditions(Ot,et),rt=et.columnDef,Nt=tl(gt.searchTerms,rt?.filter?.type??rt?.type??p.string);void 0!==Nt&&(et.parsedSearchTerms=Nt)}),e.forEach(nt=>{const et=nt[u];let Ot=!0;for(const gt of Object.keys(i)){const rt=i[gt],At=this.preProcessFilterConditionOnDataContext(nt,rt,this._grid);if(At){const Nt=rt?.parsedSearchTerms,ln="boolean"==typeof At?At:cc_executeFilterConditionTest(At,Nt);if(ln&&ve&&et&&rt.columnId===V){Ye.set(nt[g],!0);break}if(ln||!te&&!0===Ye.get(nt[c])){if(et&&rt.columnId===V&&Ye.set(nt[g],!0),ln||!te&&rt.columnId===V)continue}else et&&!0!==Ye.get(nt[c])&&rt.columnId!==V&&Ye.set(nt[g],!1)}Ot=!1}if(Ot){ze.add(nt[g]);let gt=Ae[nt[c]]??!1;const rt=!M;for(!this._isTreePresetExecuted&&Array.isArray(y)&&y.some(At=>At.itemId===gt.id&&At.isCollapsed===rt)&&(gt[l]=rt);gt;)gt.__used??ze.add(gt[g]),Ae[gt[g]].__used=!0,gt=Ae[gt[c]]??!1}})),this._isTreePresetExecuted=!0,ze}getColumnFilters(){return this._columnFilters}getPreviousFilters(){return this._previousFilters}getFiltersMetadata(){return this._filtersMetadata}getCurrentLocalFilters(){const e=[];if(this._columnFilters)for(const i of Object.keys(this._columnFilters)){const o=this._columnFilters[i],l={columnId:i||""},u=this.sharedService.allColumns.find(g=>g.id===l.columnId)?.filter?.emptySearchTermReturnAllValues??!0;o?.searchTerms&&(l.searchTerms=o.searchTerms),o.operator&&(l.operator=o.operator),o.targetSelector&&(l.targetSelector=o.targetSelector),Array.isArray(l.searchTerms)&&l.searchTerms.length>0&&(!u||""!==l.searchTerms[0])&&e.push(l)}return e}emitFilterChanged(e,i=!1){const o=i?"onBeforeFilterChange":"onFilterChanged";if(e===Y.remote&&this._gridOptions.backendServiceApi){let l=[];const c=this._gridOptions.backendServiceApi.service;return c?.getCurrentFilters&&(l=c.getCurrentFilters()),this.pubSubService.publish(o,l)}if(e===Y.local)return this.pubSubService.publish(o,this.getCurrentLocalFilters())}onBackendFilterChange(e,i){var o=this;return(0,yt.A)(function*(){const l=i?.shouldTriggerQuery;if(l&&(yield o.emitFilterChanged(Y.remote,!0)),!i||!i.grid)throw new Error('Something went wrong when trying to bind the "onBackendFilterChange(event, args)" function, it seems that "args" is not populated correctly');const c=o._gridOptions.backendServiceApi;if(!c||!c.process||!c.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');const u=new Date;if(c.preProcess&&c.preProcess(),l){const g=yield c.service.processOnFilterChanged(e,i),y=o._gridOptions.pagination?.totalItems??0;o.backendUtilities?.executeBackendCallback(c,g,i,u,y,{errorCallback:o.resetToPreviousSearchFilters.bind(o),successCallback:M=>o._previousFilters=o.extractBasicFilterDetails(M.columnFilters),emitActionChangedCallback:o.emitFilterChanged.bind(o),httpCancelRequestSubject:o.httpCancelRequests$})}})()}populateColumnFilterSearchTermPresets(e){return Array.isArray(e)&&(this._columnDefinitions.forEach(i=>{i.filter?.searchTerms&&delete i.filter.searchTerms;const o=e.find(l=>l.columnId===i.id);o&&Array.isArray(o?.searchTerms)&&(i.filter=i.filter||{},i.filter.operator=o.operator||i.filter.operator||"",i.filter.searchTerms=o.searchTerms)}),this._gridOptions.enableTreeData&&this.refreshTreeDataFilters(),this._previousFilters=this.extractBasicFilterDetails(this._columnFilters)),this._columnDefinitions}refreshTreeDataFilters(e){const i=e??this._dataView?.getItems()??[];this._dataView&&this._gridOptions.enableTreeData&&i.length>0?(this._tmpPreFilteredData=this.preFilterTreeData(i,this._columnFilters),this._dataView.refresh()):0===i.length&&Array.isArray(this.sharedService.hierarchicalDataset)&&this.sharedService.hierarchicalDataset.length>0&&queueMicrotask(()=>this.refreshTreeDataFilters())}disableFilterFunctionality(e=!0,i=!0){const l=!this._gridOptions.enableFiltering;l!==e&&(i&&e&&this.clearFilters(),this.disableAllFilteringCommands(e),this._grid.setOptions({enableFiltering:l},!1,!0),this._grid.setHeaderRowVisibility(l),this._gridOptions.enableFiltering=!e,this.sharedService.gridOptions=this._gridOptions,this._grid.setColumns(this.sharedService.columnDefinitions))}resetToPreviousSearchFilters(){this.updateFilters(this._previousFilters,!1,!1,!1)}toggleFilterFunctionality(e=!0){this.disableFilterFunctionality(this._gridOptions.enableFiltering,e)}toggleHeaderFilterRow(){let e=this._gridOptions.showHeaderRow??!1;e=!e,this._grid.setHeaderRowVisibility(e),!0===e&&this._grid.setColumns(this.sharedService.columnDefinitions)}setSortColumnIcons(e){this._grid&&Array.isArray(e)&&this._grid.setSortColumns(e)}updateFilters(e,i=!0,o=!0,l=!1){var c=this;return(0,yt.A)(function*(){if(!c._gridOptions||!c._gridOptions.enableFiltering)throw new Error('[Slickgrid-Universal] in order to use "updateFilters" method, you need to have Filterable Columns defined in your grid and "enableFiltering" set in your Grid Options');if(Array.isArray(e)){c.clearFilters(!1),e.forEach(y=>{const M=c.sharedService.allColumns.find(V=>y.columnId===V.id);if(y&&M){const V=y.operator||M.defaultOperator;c.updateColumnFilters(y.searchTerms,M,V),M.setValues(y.searchTerms||[],V),(l||c._gridOptions.enableTreeData)&&c.callbackSearchEvent(void 0,{columnDef:M,operator:V,searchTerms:y.searchTerms,shouldTriggerQuery:!0,forceOnSearchChangeEvent:!0})}});const u=c._gridOptions.backendServiceApi,g=u?Y.remote:Y.local;if(i&&(yield c.emitFilterChanged(g,!0)),c._dataView.refresh(),u){const y=u?.service;y?.updateFilters&&(y.updateFilters(e,!0),o&&c.backendUtilities?.refreshBackendDataset(c._gridOptions))}i&&(yield c.emitFilterChanged(g))}return!0})()}updateSingleFilter(e,i=!0,o=!0){var l=this;return(0,yt.A)(function*(){const c=l.sharedService.allColumns.find(u=>u.id===e.columnId);if(c&&e.columnId){l._columnFilters={};const u=c.filter?.emptySearchTermReturnAllValues??!0;Array.isArray(e.searchTerms)&&(e.searchTerms.length>1||1===e.searchTerms.length&&(!u||""!==e.searchTerms[0]))&&(l._columnFilters[e.columnId]={columnId:e.columnId,operator:e.operator,searchTerms:e.searchTerms,columnDef:c,type:c.type??p.string});const g=l._gridOptions.backendServiceApi,y=g?Y.remote:Y.local;if(i&&(yield l.emitFilterChanged(y,!0)),g){const M=g?.service;M?.updateFilters&&(M.updateFilters(l._columnFilters,!0),o&&l.backendUtilities?.refreshBackendDataset(l._gridOptions))}else l._dataView.setFilterArgs({columnFilters:l._columnFilters,grid:l._grid}),l._gridOptions.enableTreeData&&l.refreshTreeDataFilters(),l._dataView.refresh();i&&(yield l.emitFilterChanged(y))}return!0})()}drawFilterTemplate(e,i){let o;if("string"==typeof i){if(o=document.querySelector(i),null===o)return null}else o=i;const l="string"==typeof e?this.sharedService.allColumns.find(u=>u.id===e):e;if("selector"!==(l?.id??"")&&l?.filterable){let u,g;const y=this.filterFactory.createFilter(l.filter);g=l&&l.filter&&l.filter.operator||y&&y.operator,this._columnFilters[l.id]?(u=this._columnFilters[l.id].searchTerms||void 0,g=this._columnFilters[l.id].operator||void 0):l.filter&&(u=l.filter.searchTerms||void 0,this.updateColumnFilters(u,l,g));const M={grid:this._grid,operator:g,searchTerms:u,columnDef:l,filterContainerElm:o,callback:this.callbackSearchEvent.bind(this)};return y&&(y.init(M),u&&y.setValues&&y.setValues(u,g)),y}return null}addFilterTemplateToHeaderRow(e,i=!0){const o=e.column,l=o?.id??"";if("selector"!==l&&o?.filterable){let c,u;const g=this.filterFactory.createFilter(o.filter);u=o&&o.filter&&o.filter.operator||g&&g.operator,this._columnFilters[o.id]?(c=this._columnFilters[o.id].searchTerms||void 0,u=this._columnFilters[o.id].operator||void 0):o.filter&&(c=o.filter.searchTerms||void 0,this.updateColumnFilters(c,o,u));const y={grid:this._grid,operator:u,searchTerms:c,columnDef:o,filterContainerElm:this._grid.getHeaderRowColumn(l),callback:this.callbackSearchEvent.bind(this)};if(g){g.init(y,i);const M=this._filtersMetadata.findIndex(V=>g.columnDef.id===V.columnDef.id);-1===M?this._filtersMetadata.push(g):this._filtersMetadata[M]=g,c&&g.setValues&&g.setValues(c,u)}}}callbackSearchEvent(e,i){if(i){const o=e?.target?e.target.value:void 0,l=i.searchTerms&&Array.isArray(i.searchTerms)?i.searchTerms:o?[o]:void 0,c=i.columnDef||null,u=c?.id??"",g=c?.filter?.type??c?.type??p.string,y=i.operator||void 0,M=l&&Array.isArray(l),V=M&&l&&l.length,te={...this._columnFilters},ve=c.filter?.emptySearchTermReturnAllValues??!0;let Ae;if(c&&u)if(!M||0===V||1===V&&Array.isArray(l)&&ve&&""===l[0])delete this._columnFilters[u];else{const nt=`${u}`,et={columnId:nt,columnDef:c,parsedSearchTerms:[],type:g,targetSelector:this.getSelectorStringFromElement(e?.target)},Ot=this.parseFormInputFilterConditions(l,et);et.operator=y||Ot.operator||Re(g),Ae=tl(Ot.searchTerms,g),void 0!==Ae&&(et.parsedSearchTerms=Ae),et.searchTerms=Ot.searchTerms||[],this._columnFilters[nt]=et}const ze=e&&"function"!=typeof e.isPropagationStopped?(0,w.extend)({},new wn,e):e,Ye=e?.key;if(this._onSearchChange&&(i.forceOnSearchChangeEvent||"Enter"===Ye||!(0,Mt.j)(te,this._columnFilters))){const nt={clearFilterTriggered:i.clearFilterTriggered,shouldTriggerQuery:i.shouldTriggerQuery,columnId:u,columnDef:c,columnFilters:this._columnFilters,operator:y||Re(g),searchTerms:l,parsedSearchTerms:Ae,grid:this._grid,target:e?.target};!1===this.pubSubService.publish("onBeforeSearchChange",nt)?this._gridOptions.resetFilterSearchValueAfterOnBeforeCancellation&&this.resetToPreviousSearchFilters():this._onSearchChange.notify(nt,ze)}}}disableAllFilteringCommands(e=!0){const i=this._grid.getColumns();i.forEach(l=>{l?.header?.menu&&l.header.menu.commandItems?.forEach(c=>{c&&"string"!=typeof c&&"clear-filter"===c.command&&(c.hidden=e)})});const o=this._gridOptions.gridMenu?.commandItems;return o&&o.forEach(l=>{if(l&&"string"!=typeof l){const c=l.command;("clear-filter"===c||"toggle-filter"===c)&&(l.hidden=e)}}),i}extractBasicFilterDetails(e){const i=[];if(e&&"object"==typeof e)for(const o of Object.keys(e)){const{operator:l,searchTerms:c}=e[`${o}`];i.push({columnId:o,operator:l,searchTerms:c})}return i}getSelectorStringFromElement(e){return e?.localName?e?.className?`${e.localName}.${Array.from(e.classList).join(".")}`:e.localName:""}removeAllColumnFiltersProperties(){"object"==typeof this._columnFilters&&Object.keys(this._columnFilters).forEach(e=>{e&&this._columnFilters[e]&&delete this._columnFilters[e]})}subscribeToOnHeaderRowCellRendered(e){this._eventHandler.subscribe(e.onBeforeHeaderRowCellDestroy,(i,o)=>{this._filtersMetadata.find(c=>c.columnDef.id===o.column.id)?.destroy?.()})}updateColumnFilters(e,i,o){const l=i.filter?.type??i.type??p.string,c=tl(e,l);e&&i&&(this._columnFilters[i.id]={columnId:i.id,columnDef:i,searchTerms:e,operator:o,parsedSearchTerms:c,type:l})}}const Ro={skipError:!1,triggerEvent:!0},Fo={highlightRow:!0,resortGrid:!1,selectRow:!1,scrollRowIntoView:!0,skipError:!1,triggerEvent:!0},hc={highlightRow:!1,selectRow:!1,scrollRowIntoView:!1,skipError:!1,triggerEvent:!0},za={autoResizeColumns:!0,triggerEvent:!0,hideFromColumnPicker:!1,hideFromGridMenu:!1};class Wf{constructor(e,i,o,l,c,u,g){this.gridStateService=e,this.filterService=i,this.pubSubService=o,this.paginationService=l,this.sharedService=c,this.sortService=u,this.treeDataService=g}get _dataView(){return this._grid?.getData()}get _gridOptions(){return this._grid?.getOptions()??{}}dispose(){this._rowSelectionPlugin?.dispose()}init(e){this._grid=e}clearAllFiltersAndSorts(){this.sortService&&this.sortService.clearSorting&&this.sortService.clearSorting(!1),this.filterService&&this.filterService.clearFilters&&this.filterService.clearFilters()}clearPinning(e=!0){const i=[...this.sharedService.visibleColumns];this.sharedService.slickGrid.setOptions({frozenColumn:-1,frozenRow:-1,frozenBottom:!1,enableMouseWheelScrollHandler:!1}),e&&Array.isArray(i)&&this.sharedService.slickGrid.setColumns(i)}setPinning(e,i=!0,o=!1,l=!0){(0,w.isObjectEmpty)(e)?this.clearPinning():(this.sharedService.slickGrid.setOptions(e,o,l),this.sharedService.gridOptions={...this.sharedService.gridOptions,...e}),i&&this.sharedService.slickGrid.autosizeColumns()}getAllColumnDefinitions(){return this.sharedService.allColumns}getVisibleColumnDefinitions(){return this.sharedService.visibleColumns}getColumnFromEventArguments(e){if(!(e&&e.grid&&e.grid.getColumns&&e.grid.getDataItem))throw new Error("[Slickgrid-Universal] To get the column definition and data, we need to have these arguments passed as objects (row, cell, grid)");return{row:e.row,cell:e.cell,columnDef:e.grid.getColumns()[e.cell],dataContext:e.grid.getDataItem(e.row),dataView:this._dataView,grid:this._grid}}getDataItemByRowNumber(e){if(!this._grid||"function"!=typeof this._grid.getDataItem)throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object or it\'s "getDataItem" method');return this._grid.getDataItem(e)}getDataItemByRowIndex(e){if(!this._grid||"function"!=typeof this._grid.getDataItem)throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getDataItem" method');return this._grid.getDataItem(e)}getDataItemByRowIndexes(e){if(!this._grid||"function"!=typeof this._grid.getDataItem)throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getDataItem" method');const i=[];return Array.isArray(e)&&e.forEach(o=>{i.push(this._grid.getDataItem(o))}),i}getSelectedRows(){if(!this._grid||"function"!=typeof this._grid.getSelectedRows)throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getSelectedRows" method');return this._grid.getSelectedRows()}getSelectedRowsDataItem(){if(!this._grid||"function"!=typeof this._grid.getSelectedRows)throw new Error('[Slickgrid-Universal] We could not find SlickGrid Grid object and/or "getSelectedRows" method');const e=this._grid.getSelectedRows();return this.getDataItemByRowIndexes(e)}hideColumnById(e,i){if(i={...za,...i},this._grid&&this._grid.getColumns&&this._grid.setColumns){const o=this._grid.getColumns(),l=o.findIndex(c=>c.id===e);if(l>=0){const c=(0,w.arrayRemoveItemByIndex)(o,l);this.sharedService.visibleColumns=c,this._grid.setColumns(c);const u=this.sharedService.allColumns.findIndex(g=>g.id===e);return u&&(i?.hideFromColumnPicker&&(this.sharedService.allColumns[u].excludeFromColumnPicker=!0),i?.hideFromGridMenu&&(this.sharedService.allColumns[u].excludeFromGridMenu=!0)),i?.autoResizeColumns&&this._grid.autosizeColumns(),i?.triggerEvent&&this.pubSubService.publish("onHeaderMenuHideColumns",{columns:c}),l}}return-1}hideColumnByIds(e,i){if(i={...za,...i},Array.isArray(e)){for(const o of e)this.hideColumnById(o,{...i,triggerEvent:!1,autoResizeColumns:!1});i?.autoResizeColumns&&this._grid.autosizeColumns(),i?.triggerEvent&&this.pubSubService.publish("onHeaderMenuHideColumns",{columns:this.sharedService.visibleColumns})}}highlightRow(e,i){this._grid.getSelectionModel()||(this._rowSelectionPlugin=new Na(this._gridOptions.rowSelectionOptions),this._grid.setSelectionModel(this._rowSelectionPlugin)),i||=this._gridOptions.rowHighlightDuration,Array.isArray(e)?e.forEach(o=>this._grid.highlightRow(o)):this._grid.highlightRow(e,i)}HighlightSelectedRow(e){}setSelectedRow(e){this._grid?.setSelectedRows&&this._grid.setSelectedRows([e])}setSelectedRows(e){this._grid?.setSelectedRows&&this._grid.setSelectedRows(e)}renderGrid(){"function"==typeof this._grid?.invalidate&&this._grid.invalidate()}resetGrid(e){if(this.clearPinning(!1),this._grid){const i=this.sharedService.allColumns||[];Array.isArray(i)&&i.length>0&&(this._grid.setColumns(i),this._gridOptions?.enableAutoSizeColumns&&this._grid.autosizeColumns(),this.gridStateService.resetColumns(e))}"function"==typeof this.filterService?.clearFilters&&this.filterService.clearFilters(),"function"==typeof this.sortService?.clearSorting&&this.sortService.clearSorting()}addItem(e,i){const o={...Fo,...i};if(!(o?.skipError||this._grid&&this._gridOptions&&this._dataView))throw new Error("[Slickgrid-Universal] We could not find SlickGrid Grid, DataView objects");const l=this._gridOptions.datasetIdPropertyName||"id";if(!(o?.skipError||e&&e.hasOwnProperty(l)))throw new Error(`[Slickgrid-Universal] Adding an item requires the item to include an "${l}" property`);if(this._gridOptions?.enableTreeData&&"top"===i?.position)throw new Error('[Slickgrid-Universal] Please note that `addItem({ position: "top" })` is not supported when used with Tree Data because of the extra complexity.');const c=o?.position;"bottom"===c||this._gridOptions?.enableTreeData?this._dataView.addItem(e):this._dataView.insertItem(0,e);let u=0;const g=e?.[l]??"";return this._gridOptions?.enableTreeData?(this.invalidateHierarchicalDataset(),u=this._dataView.getRowById(g),o.scrollRowIntoView&&this._grid.scrollRowIntoView(u??0,!1)):o.resortGrid?(this._dataView.reSort(),u=this._dataView.getRowById(g)):(u="bottom"===c?this._dataView.getRowById(g):0,o.scrollRowIntoView&&this._grid.scrollRowIntoView(u??0)),o.highlightRow&&void 0!==u&&this.highlightRow(u),void 0!==u&&o.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(u),o.triggerEvent&&this.pubSubService.publish("onItemAdded",e),!this._gridOptions?.backendServiceApi&&this._gridOptions.enablePagination&&("bottom"===c?this.paginationService.goToLastPage():this.paginationService.goToFirstPage()),u}addItems(e,i){const o={...Fo,...i},l=this._gridOptions.datasetIdPropertyName||"id",c=o?.position,u=[];if(!Array.isArray(e))return[this.addItem(e,o)||0];if(this._dataView.beginUpdate(!0),"bottom"===c||this._gridOptions?.enableTreeData?this._dataView.addItems(e):this._dataView.insertItems(0,e),this._dataView.endUpdate(),this._gridOptions?.enableTreeData){this.invalidateHierarchicalDataset();const y=this._dataView.getRowById(e[0]?.[l]??"");o.scrollRowIntoView&&this._grid.scrollRowIntoView(y??0,!1)}else o.resortGrid&&this._dataView.reSort();return c&&o.scrollRowIntoView&&!this._gridOptions?.enableTreeData&&("bottom"===c?this._grid.navigateBottom():this._grid.navigateTop()),e.forEach(g=>u.push(this._dataView.getRowById(g[l]))),o.highlightRow&&this.highlightRow(u),o.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(u),o.triggerEvent&&this.pubSubService.publish("onItemAdded",e),u}deleteItem(e,i){i={...Ro,...i};const o=this._gridOptions.datasetIdPropertyName||"id";if(!(i?.skipError||e&&e.hasOwnProperty(o)))throw new Error(`[Slickgrid-Universal] Deleting an item requires the item to include an "${o}" property`);return this.deleteItemById(e[o],i)}deleteItems(e,i){i={...Ro,...i};const o=this._gridOptions.datasetIdPropertyName||"id";if(!Array.isArray(e))return this.deleteItem(e,i),[e[o]];this._dataView.beginUpdate(!0);const l=[];return e.forEach(c=>{void 0!==c?.[o]&&l.push(c[o])}),this._dataView.deleteItems(l),this._dataView.endUpdate(),i.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),l}deleteItemById(e,i){if(i={...Ro,...i},!i?.skipError&&null==e)throw new Error('[Slickgrid-Universal] Cannot delete a row without a valid "id"');return!(this.gridStateService&&this.gridStateService.needToPreserveRowSelection())&&this._grid&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows([]),this._dataView.deleteItem(e),i.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),e}deleteItemByIds(e,i){if(i={...Ro,...i},Array.isArray(e)){this._dataView.beginUpdate(!0);for(let o=0;o<e.length;o++)null!==e[o]&&this.deleteItemById(e[o],{triggerEvent:!1});return this._dataView.endUpdate(),i.triggerEvent&&this.pubSubService.publish("onItemDeleted",e),e}return[]}updateItem(e,i){i={...hc,...i};const o=this._gridOptions.datasetIdPropertyName||"id",l=e&&e.hasOwnProperty(o)?e[o]:void 0;if(!i?.skipError&&void 0===l)throw new Error(`[Slickgrid-Universal] Calling Update of an item requires the item to include an "${o}" property`);return this.updateItemById(l,e,i)}updateItems(e,i){i={...hc,...i};const o=this._gridOptions.datasetIdPropertyName||"id";if(!Array.isArray(e))return[this.updateItem(e,i)];this._dataView.beginUpdate(!0);const l=[],c=[];return e.forEach(u=>{const g=u&&u.hasOwnProperty(o)?u[o]:void 0;if(c.push(g),void 0!==this._dataView.getIdxById(g)){const y=this._dataView.getRowById(g);void 0!==y&&(l.push(y),this._grid.updateRow(y))}}),this._dataView.updateItems(c,e),this._dataView.endUpdate(),this._gridOptions?.enableTreeData&&this.invalidateHierarchicalDataset(),i.highlightRow&&this.highlightRow(l),i.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(l),i.triggerEvent&&this.pubSubService.publish("onItemUpdated",e),l}updateItemById(e,i,o){if(o={...hc,...o},!o?.skipError&&void 0===e)throw new Error('[Slickgrid-Universal] Cannot update a row without a valid "id"');const l=this._dataView.getRowById(e);if(!o?.skipError&&!i&&!this._gridOptions.enablePagination)throw new Error(`[Slickgrid-Universal] The item to update in the grid was not found with id: ${e}`);return void 0!==this._dataView.getIdxById(e)&&(this._dataView.updateItem(e,i),void 0!==l&&this._grid.updateRow(l),this._gridOptions?.enableTreeData&&this.invalidateHierarchicalDataset(),o.scrollRowIntoView&&void 0!==l&&this._grid.scrollRowIntoView(l),o.highlightRow&&void 0!==l&&this.highlightRow(l),void 0!==l&&o.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRow(l),o.triggerEvent&&this.pubSubService.publish("onItemUpdated",i)),l}upsertItem(e,i){i={...Fo,...i};const o=this._gridOptions.datasetIdPropertyName||"id",l=e&&e.hasOwnProperty(o)?e[o]:void 0;if(!i?.skipError&&void 0===l)throw new Error(`[Slickgrid-Universal] Calling Upsert of an item requires the item to include an "${o}" property`);return this.upsertItemById(l,e,i)}upsertItems(e,i){if(i={...Fo,...i},!Array.isArray(e))return[this.upsertItem(e,i)];this._dataView.beginUpdate(!0);const o=[];e.forEach(c=>{o.push(this.upsertItem(c,{...i,highlightRow:!1,resortGrid:!1,selectRow:!1,triggerEvent:!1}))}),this._dataView.endUpdate();const l=o.map(c=>void 0!==c.added?c.added:c.updated);if(i.highlightRow&&this.highlightRow(l),i.selectRow&&this._gridOptions&&(this._gridOptions.enableCheckboxSelector||this._gridOptions.enableRowSelection)&&this.setSelectedRows(l),i.triggerEvent){this.pubSubService.publish("onItemUpserted",e);const c=o.filter(g=>void 0!==g.added);Array.isArray(c)&&c.length>0&&this.pubSubService.publish("onItemAdded",c);const u=o.filter(g=>void 0!==g.updated);Array.isArray(u)&&u.length>0&&this.pubSubService.publish("onItemUpdated",u)}return o}upsertItemById(e,i,o){let c,u,l=!1;if(o={...Fo,...o},!o?.skipError&&void 0===e&&!this.hasRowSelectionEnabled())throw new Error('[Slickgrid-Universal] Calling Upsert of an item requires the item to include a valid and unique "id" property');return void 0===this._dataView.getRowById(e)?(c=this.addItem(i,o),l=!0):(u=this.updateItem(i,{highlightRow:o.highlightRow,selectRow:o.selectRow,triggerEvent:o.triggerEvent}),l=!1),o.triggerEvent&&(this.pubSubService.publish("onItemUpserted",i),this.pubSubService.publish(l?"onItemAdded":"onItemUpdated",i)),{added:c,updated:u}}invalidateHierarchicalDataset(e){if(this._gridOptions?.enableTreeData&&this.treeDataService){const i=e??this._dataView.getItems(),o=this.sortService.getCurrentColumnSorts(),l=this.treeDataService.convertFlatParentChildToTreeDatasetAndSort(i||[],this.sharedService.allColumns,this._gridOptions,o);this.sharedService.hierarchicalDataset=l.hierarchical,this.filterService.refreshTreeDataFilters(e),this._dataView.setItems(l.flat),this._grid.invalidate()}}hasRowSelectionEnabled(){const e=this._grid.getSelectionModel();return!(!this._gridOptions.enableRowSelection&&!this._gridOptions.enableCheckboxSelector||!e)}}class $f{get eventHandler(){return this._eventHandler}constructor(){this._eventHandler=new tn}dispose(){this._eventHandler.unsubscribeAll()}bindOnBeforeEditCell(e){const i=e?.getData();this._eventHandler.subscribe(e.onBeforeEditCell,(o,l)=>{if(!(o&&l&&e&&void 0!==l.cell&&e.getColumns&&e.getDataItem))return;const c=e.getColumns()[l.cell];if("function"==typeof c.onBeforeEditCell){const u={row:l.row,cell:l.cell,dataView:i,grid:e,columnDef:c,dataContext:e.getDataItem(l.row)};c.onBeforeEditCell(o instanceof wn?o.getNativeEvent():o,u)}})}bindOnCellChange(e){const i=e?.getData();this._eventHandler.subscribe(e.onCellChange,(o,l)=>{if(!(o&&l&&e&&void 0!==l.cell&&e.getColumns&&e.getDataItem))return;const c=e.getColumns()[l.cell];if("function"==typeof c.onCellChange){const u={row:l.row,cell:l.cell,dataView:i,grid:e,columnDef:c,dataContext:e.getDataItem(l.row)};c.onCellChange(o instanceof wn?o.getNativeEvent():o,u)}})}bindOnClick(e){const i=e?.getData();this._eventHandler.subscribe(e.onClick,(o,l)=>{if(!(o&&l&&e&&void 0!==l.cell&&e.getColumns&&e.getDataItem))return;const c=e.getColumns()[l.cell];if("function"==typeof c.onCellClick){const u={row:l.row,cell:l.cell,dataView:i,grid:e,columnDef:c,dataContext:e.getDataItem(l.row)};c.onCellClick(o instanceof wn?o.getNativeEvent():o,u)}})}}class zf{constructor(e,i,o,l,c,u){this.extensionService=e,this.filterService=i,this.pubSubService=o,this.sharedService=l,this.sortService=c,this.treeDataService=u,this._columns=[],this._subscriptions=[],this._selectedRowIndexes=[],this._selectedRowDataContextIds=[],this._wasRecheckedAfterPageChange=!0,this._eventHandler=new tn}get _dataView(){return this._grid?.getData()??{}}get _gridOptions(){return this._grid?.getOptions()??{}}get selectedRowDataContextIds(){return this._selectedRowDataContextIds}set selectedRowDataContextIds(e){this._selectedRowDataContextIds=e}init(e){this._grid=e,this.subscribeToAllGridChanges(e)}dispose(){this._columns=[],this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}changeColumnsArrangement(e,i=!0,o=!1){if(Array.isArray(e)&&e.length>0){const l=this.getAssociatedGridColumns(this._grid,e);if(l&&Array.isArray(l)&&l.length>0){if(Array.isArray(this.sharedService.allColumns)){const c=[];this._gridOptions.enableCheckboxSelector&&c.push({columnId:"_checkbox_selector",columnIndexPosition:this._gridOptions?.checkboxSelector?.columnIndexPosition??0}),this._gridOptions.enableRowDetailView&&c.push({columnId:"_detail_selector",columnIndexPosition:this._gridOptions?.rowDetailView?.columnIndexPosition??0}),this._gridOptions.enableRowMoveManager&&c.push({columnId:"_move",columnIndexPosition:this._gridOptions?.rowMoveManager?.columnIndexPosition??0}),this.addColumnDynamicWhenFeatureEnabled(c,this.sharedService.allColumns,l)}l.forEach(c=>c.originalWidth=c.width||c.originalWidth),this._grid.setColumns(l),this.sharedService.visibleColumns=l,i?this._grid.autosizeColumns():(o||this._gridOptions.enableAutoResizeColumnsByCellContent&&!this._gridOptions.autosizeColumnsByCellContentOnFirstLoad)&&this.pubSubService.publish("onFullResizeByContentRequested",{caller:"GridStateService"})}}}getCurrentGridState(){const{frozenColumn:e,frozenRow:i,frozenBottom:o}=this.sharedService.gridOptions,l={columns:this.getCurrentColumns(),filters:this.getCurrentFilters(),sorters:this.getCurrentSorters(),pinning:{frozenColumn:e,frozenRow:i,frozenBottom:o}},c=this.getCurrentPagination();if(c&&(l.pagination=c),this.hasRowSelectionEnabled()){const u=this.getCurrentRowSelections();u&&(l.rowSelection=u)}if(this._gridOptions?.enableTreeData){const u=this.getCurrentTreeDataToggleState();u&&(l.treeData=u)}return l}getColumns(){return this._columns}getAssociatedCurrentColumns(e){const i=[];return e&&Array.isArray(e)&&e.forEach(o=>{o?.id&&i.push({columnId:o.id,cssClass:o.cssClass||"",headerCssClass:o.headerCssClass||"",width:o.width||0})}),i}getAssociatedGridColumns(e,i){const o=[],l=this.sharedService.allColumns||e.getColumns();return i&&Array.isArray(i)&&i.forEach(c=>{const u=l.find(g=>g.id===c.columnId);u?.id&&o.push({...u,cssClass:c.cssClass||u.cssClass,headerCssClass:c.headerCssClass||u.headerCssClass,width:c.width})}),this._columns=o,o}getCurrentColumns(){return this.getAssociatedCurrentColumns(this._grid.getColumns()||[])}getCurrentFilters(){if(this._gridOptions?.backendServiceApi){const e=this._gridOptions.backendServiceApi.service;if(e?.getCurrentFilters)return e.getCurrentFilters()}else if(this.filterService?.getCurrentLocalFilters)return this.filterService.getCurrentLocalFilters();return null}getCurrentPagination(){if(this._gridOptions?.enablePagination){if(!this._gridOptions.backendServiceApi)return this.sharedService.currentPagination;{const e=this._gridOptions.backendServiceApi.service;if(e?.getCurrentPagination)return e.getCurrentPagination()}}return null}getCurrentRowSelections(){return this._grid&&this._dataView&&this.hasRowSelectionEnabled()?{gridRowIndexes:this._grid.getSelectedRows()||[],dataContextIds:this._dataView.getAllSelectedIds()||[],filteredDataContextIds:this._dataView.getAllSelectedFilteredIds()||[]}:null}getCurrentSorters(){if(this._gridOptions?.backendServiceApi){const e=this._gridOptions.backendServiceApi.service;if(e?.getCurrentSorters)return e.getCurrentSorters()}else if(this.sortService?.getCurrentLocalSorters)return this.sortService.getCurrentLocalSorters();return null}getCurrentTreeDataToggleState(){return this._gridOptions?.enableTreeData&&this.treeDataService?this.treeDataService.getCurrentToggleState():null}needToPreserveRowSelection(){let e=!1;if(this._gridOptions?.dataView&&this._gridOptions.dataView.hasOwnProperty("syncGridSelection")){const i=this._gridOptions.dataView.syncGridSelection;"boolean"==typeof i?e=this._gridOptions.dataView.syncGridSelection:"object"==typeof i&&(e=i.preserveHidden||i.preserveHiddenOnSelectionChange),e&&this._gridOptions.backendServiceApi&&this._gridOptions.dataView.hasOwnProperty("syncGridSelectionWithBackendService")&&(e=this._gridOptions.dataView.syncGridSelectionWithBackendService)}return e}resetColumns(e){const o=this.getAssociatedCurrentColumns(e||this._columns);this.pubSubService.publish("onGridStateChanged",{change:{newValues:o,type:R.columns},gridState:this.getCurrentGridState()})}resetToOriginalColumns(e=!0){this._grid.setColumns(this.sharedService.allColumns),this.sharedService.visibleColumns=this.sharedService.allColumns,e&&this._grid.autosizeColumns()}resetRowSelectionWhenRequired(){!this.needToPreserveRowSelection()&&(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&this.extensionService?.getExtensionByName?.(x.rowSelection)?.instance&&this._grid.setSelectedRows([])}subscribeToAllGridChanges(e){this._subscriptions.push(this.pubSubService.subscribe("onFilterChanged",i=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:i,type:R.filter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onFilterCleared",()=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:[],type:R.filter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onSortChanged",i=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:i,type:R.sorter},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onSortCleared",()=>{this.resetRowSelectionWhenRequired(),this.pubSubService.publish("onGridStateChanged",{change:{newValues:[],type:R.sorter},gridState:this.getCurrentGridState()})})),this.bindExtensionAddonEventToGridStateChange(x.columnPicker,"onColumnsChanged"),this.bindExtensionAddonEventToGridStateChange(x.gridMenu,"onColumnsChanged"),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsReordered",e),this.bindSlickGridColumnChangeEventToGridStateChange("onColumnsResized",e),this.bindSlickGridOnSetOptionsEventToGridStateChange(e),(this._gridOptions.enableRowSelection||this._gridOptions.enableCheckboxSelector)&&this._eventHandler.subscribe(this._dataView.onSelectedRowIdsChanged,(i,o)=>{const l=(this._selectedRowIndexes||[]).slice(),c=(this.selectedRowDataContextIds||[]).slice();this.selectedRowDataContextIds=o.filteredIds,this._selectedRowIndexes=o.rows,(0,Mt.j)(this.selectedRowDataContextIds,c)&&(0,Mt.j)(this._selectedRowIndexes,l)||this.pubSubService.publish("onGridStateChanged",{change:{newValues:{gridRowIndexes:this._selectedRowIndexes||[],dataContextIds:o.selectedRowIds,filteredDataContextIds:o.filteredIds},type:R.rowSelection},gridState:this.getCurrentGridState()})}),this._subscriptions.push(this.pubSubService.subscribe("onHeaderMenuHideColumns",i=>{const o=this.getAssociatedCurrentColumns(i);this.pubSubService.publish("onGridStateChanged",{change:{newValues:o,type:R.columns},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onTreeItemToggled",i=>{this.pubSubService.publish("onGridStateChanged",{change:{newValues:i,type:R.treeData},gridState:this.getCurrentGridState()})})),this._subscriptions.push(this.pubSubService.subscribe("onTreeFullToggleEnd",i=>{this.pubSubService.publish("onGridStateChanged",{change:{newValues:i,type:R.treeData},gridState:this.getCurrentGridState()})}))}addColumnDynamicWhenFeatureEnabled(e,i,o){e.sort((l,c)=>l.columnIndexPosition-c.columnIndexPosition),e.forEach(l=>{const c=i.findIndex(g=>g.id===l.columnId),u=o.findIndex(g=>g.id===l.columnId);if(c>=0&&-1===u){const g=i[c];0===c?o.unshift(g):o.splice(c,0,g)}})}bindExtensionAddonEventToGridStateChange(e,i){const l=this.extensionService?.getExtensionByName?.(e)?.instance?.[i];l&&"function"==typeof l.subscribe&&this._eventHandler.subscribe(l,(c,u)=>{const g=u?.columns,y=this.getAssociatedCurrentColumns(g);this.pubSubService.publish("onGridStateChanged",{change:{newValues:y,type:R.columns},gridState:this.getCurrentGridState()})})}bindSlickGridColumnChangeEventToGridStateChange(e,i){const o=i?.[e];o&&"function"==typeof o.subscribe&&this._eventHandler.subscribe(o,()=>{const l=i.getColumns(),c=this.getAssociatedCurrentColumns(l);this.pubSubService.publish("onGridStateChanged",{change:{newValues:c,type:R.columns},gridState:this.getCurrentGridState()})})}bindSlickGridOnSetOptionsEventToGridStateChange(e){this._eventHandler.subscribe(e.onSetOptions,(o,l)=>{const{frozenBottom:c,frozenColumn:u,frozenRow:g}=l.optionsBefore,{frozenBottom:y,frozenColumn:M,frozenRow:V}=l.optionsAfter;if(c!==y||u!==M||g!==V){const te={frozenBottom:y,frozenColumn:M,frozenRow:V},ve=this.getCurrentGridState();this.pubSubService.publish("onGridStateChanged",{change:{newValues:te,type:R.pinning},gridState:ve})}})}hasRowSelectionEnabled(){const e=this._grid.getSelectionModel();return!(!this._gridOptions.enableRowSelection&&!this._gridOptions.enableCheckboxSelector||!e)}}class Qp{constructor(e,i){this.extensionUtility=e,this.pubSubService=i,this._subscriptions=[],this._eventHandler=new tn}get _dataView(){return this._grid?.getData()??{}}get eventHandler(){return this._eventHandler}get _gridOptions(){return this._grid?.getOptions()??{}}get _columnDefinitions(){return this._grid?.getColumns()??[]}init(e){if(this._grid=e,e&&this._gridOptions&&this._gridOptions.createPreHeaderPanel){this._gridOptions.enableTranslate&&this.translateGroupingAndColSpan(),this._eventHandler.subscribe(e.onSort,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onRendered,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onAutosizeColumns,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onColumnsResized,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onColumnsReordered,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(this._dataView.onRowCountChanged,()=>this.delayRenderPreHeaderRowGroupingTitles(0)),this._subscriptions.push(this.pubSubService.subscribe("onColumnPickerColumnsChanged",()=>this.renderPreHeaderRowGroupingTitles()),this.pubSubService.subscribe("onHeaderMenuHideColumns",()=>this.delayRenderPreHeaderRowGroupingTitles(0)),this.pubSubService.subscribe("onGridMenuColumnsChanged",()=>this.renderPreHeaderRowGroupingTitles()),this.pubSubService.subscribe("onGridMenuMenuClose",()=>this.renderPreHeaderRowGroupingTitles()));const i=e.getPluginByName("Resizer");i?.onGridAfterResize&&this._eventHandler.subscribe(i.onGridAfterResize,()=>this.renderPreHeaderRowGroupingTitles()),this._eventHandler.subscribe(e.onSetOptions,(o,l)=>{l?.optionsBefore?.frozenColumn!==l?.optionsAfter?.frozenColumn&&this.delayRenderPreHeaderRowGroupingTitles(0)}),this.delayRenderPreHeaderRowGroupingTitles(75)}}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}delayRenderPreHeaderRowGroupingTitles(e=0){window.setTimeout(()=>this.renderPreHeaderRowGroupingTitles(),e)}renderPreHeaderRowGroupingTitles(){const e=this._columnDefinitions.length;if(void 0!==this._gridOptions?.frozenColumn&&this._gridOptions.frozenColumn>=0){const i=this._gridOptions.frozenColumn;this.renderHeaderGroups(this._grid.getPreHeaderPanelLeft(),0,i+1),this.renderHeaderGroups(this._grid.getPreHeaderPanelRight(),i+1,e)}else this.renderHeaderGroups(this._grid.getPreHeaderPanel(),0,e)}renderHeaderGroups(e,i,o){(0,w.emptyElement)(e),e.className="slick-header-columns",e.style.left="-1000px",e.style.width=`${this._grid.getHeadersWidth()}px`,e.parentElement?.classList.add("slick-header");const l=this._grid.getHeaderColumnWidthDiff();let c,u=null,g="",y=0;const M=this._gridOptions?.frozenHeaderWidthCalcDifferential??0,V=void 0!==this._gridOptions?.frozenColumn&&this._gridOptions.frozenColumn>=0;for(let te=i;te<o;te++)c=this._columnDefinitions[te],c&&(g===c.columnGroup&&te>0?(y+=c.width||0,u?.style&&(u.style.width=y-l-M+"px")):(y=c.width||0,u=(0,w.createDomElement)("div",{className:"slick-state-default slick-header-column "+(V?"frozen":""),dataset:{group:c.columnGroup},style:{width:y-l+"px"}}),(0,w.createDomElement)("span",{className:"slick-column-name",textContent:c.columnGroup||""},u),e.appendChild(u)),g=c.columnGroup||"")}translateGroupingAndColSpan(){const e=this._grid.getColumns();this.extensionUtility.translateItems(e,"columnGroupKey","columnGroup"),this._grid.setColumns(e),this.renderPreHeaderRowGroupingTitles()}}class Zp{constructor(e,i,o,l){this.pubSubService=e,this.sharedService=i,this.backendUtilities=o,this.rxjs=l,this._initialized=!1,this._isLocalGrid=!0,this._dataFrom=1,this._dataTo=1,this._itemsPerPage=0,this._pageCount=1,this._pageNumber=1,this._totalItems=0,this._availablePageSizes=[],this._subscriptions=[],this._isCursorBased=!1,this._eventHandler=new tn}get dataView(){return this.grid?.getData()??{}}set paginationOptions(e){this._paginationOptions=e}get paginationOptions(){return this._paginationOptions}get availablePageSizes(){return this._availablePageSizes}get dataFrom(){return this._dataFrom}get dataTo(){return this._dataTo}get itemsPerPage(){return this._itemsPerPage}get pageCount(){return this._pageCount}get pageNumber(){return this._pageNumber}get totalItems(){return this._totalItems}set totalItems(e){this._totalItems=e,this._initialized&&this.refreshPagination()}get isCursorBased(){return this._isCursorBased}addRxJsResource(e){this.rxjs=e}init(e,i,o){if(this._availablePageSizes=i.pageSizes||[],this.grid=e,this._backendServiceApi=o,this._paginationOptions=i,this._isLocalGrid=!o,this._pageNumber=i.pageNumber||1,this._isCursorBased=o?.options?.useCursor??!1,o&&(!o.service||!o.process))throw new Error('BackendServiceApi requires the following 2 properties "process" and "service" to be defined.');this._isLocalGrid&&this.dataView&&(this._eventHandler.subscribe(this.dataView.onPagingInfoChanged,(c,u)=>{this._totalItems!==u.totalRows&&(this.updateTotalItems(u.totalRows),this._previousPagination={pageNumber:u.pageNum,pageSize:u.pageSize,pageSizes:this.availablePageSizes,totalItems:u.totalRows})}),queueMicrotask(()=>{this.dataView&&(this.dataView.setRefreshHints({isFilterUnchanged:!0}),this.dataView.setPagingOptions({pageSize:this.paginationOptions.pageSize,pageNum:this._pageNumber-1}))})),this._subscriptions.push(this.pubSubService.subscribe("onFilterChanged",()=>this.resetPagination())),this._subscriptions.push(this.pubSubService.subscribe("onFilterCleared",()=>this.resetPagination())),o?.options?.infiniteScroll&&this._subscriptions.push(this.pubSubService.subscribe("onSortChanged",()=>this.resetPagination())),this.dataView&&(this._subscriptions.push(this.pubSubService.subscribe("onItemAdded",c=>this.processOnItemAddedOrRemoved(c,!0))),this._subscriptions.push(this.pubSubService.subscribe("onItemDeleted",c=>this.processOnItemAddedOrRemoved(c,!1)))),this.refreshPagination(!1,!1,!0);const l=this.getFullPagination();this._previousPagination={pageNumber:l.pageNumber,pageSize:l.pageSize,pageSizes:l.pageSizes,totalItems:this.totalItems},this._initialized=!0,k(i,"totalItems",c=>this._totalItems=c)}dispose(){this._initialized=!1,this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}getCurrentPagination(){return{pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes}}getFullPagination(){return{pageCount:this._pageCount,pageNumber:this._pageNumber,pageSize:this._itemsPerPage,pageSizes:this._availablePageSizes,totalItems:this._totalItems,dataFrom:this._dataFrom,dataTo:this._dataTo}}getCurrentPageNumber(){return this._pageNumber}getCurrentItemPerPage(){return this._itemsPerPage}changeItemPerPage(e,i,o=!0){return this._pageNumber=1,this._pageCount=Math.ceil(this._totalItems/e),this._itemsPerPage=e,o?this.processOnPageChanged(this._pageNumber,i):Promise.resolve(this.getFullPagination())}goToFirstPage(e,i=!0){return this._pageNumber=1,i?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,first:this._itemsPerPage}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())}goToLastPage(e,i=!0){return this._pageNumber=this._pageCount||1,i?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,last:this._itemsPerPage}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())}goToNextPage(e,i=!0){return this._pageNumber<this._pageCount?(this._pageNumber++,i?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,first:this._itemsPerPage,after:this._cursorPageInfo.endCursor}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())):Promise.resolve(!1)}goToPageNumber(e,i,o=!0){if(this.isCursorBased)return console.assert(!0,"Cursor based navigation cannot navigate to arbitrary page"),Promise.resolve(!1);const l=this._pageNumber;return this._pageNumber=e<1?1:e>this._pageCount?this._pageCount:e,this._pageNumber!==l?o?this.processOnPageChanged(this._pageNumber,i):Promise.resolve(this.getFullPagination()):Promise.resolve(!1)}goToPreviousPage(e,i=!0){return this._pageNumber>1?(this._pageNumber--,i?this.isCursorBased&&this._cursorPageInfo?this.processOnPageChanged(this._pageNumber,e,{newPage:this._pageNumber,pageSize:this._itemsPerPage,last:this._itemsPerPage,before:this._cursorPageInfo.startCursor}):this.processOnPageChanged(this._pageNumber,e):Promise.resolve(this.getFullPagination())):Promise.resolve(!1)}refreshPagination(e=!1,i=!0,o=!1){const l={...this.getFullPagination()};if(this._paginationOptions){const u=this._paginationOptions;this._itemsPerPage||(this._itemsPerPage=this._isLocalGrid?u.pageSize:+(this._backendServiceApi?.options?.paginationOptions?.first?this._backendServiceApi.options.paginationOptions.first:u.pageSize)),(e||this._totalItems!==u.totalItems)&&(e?(this._pageNumber=1,this.paginationOptions.pageNumber=1):!this._initialized&&u.pageNumber&&u.pageNumber>1&&(this._pageNumber=u.pageNumber||1),1===this._pageNumber&&this._backendServiceApi&&this._backendServiceApi.service.resetPaginationOptions()),this._availablePageSizes=u.pageSizes||[],!this._totalItems&&u.totalItems&&(this._totalItems=u.totalItems),this.recalculateFromToIndexes()}this._pageCount=Math.ceil(this._totalItems/this._itemsPerPage),this.sharedService.currentPagination=this.getCurrentPagination(),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),i&&!(0,Mt.j)(l,this.getFullPagination())&&this.pubSubService.publish("onPaginationChanged",this.getFullPagination()),o&&!(0,Mt.j)(l,this.getFullPagination())&&this.pubSubService.publish("onPaginationPresetsInitialized",this.getFullPagination());const c=this.getFullPagination();this._previousPagination={pageNumber:c.pageNumber,pageSize:c.pageSize,pageSizes:c.pageSizes,totalItems:this.totalItems}}resetPagination(e=!0,i=!0){this._isLocalGrid&&this.dataView&&this.sharedService?.gridOptions?.enablePagination&&this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:0}),this._cursorPageInfo=void 0,this.refreshPagination(!0,e),i&&this.grid.scrollTo(0)}togglePaginationVisibility(e){if(this.grid&&this.sharedService?.gridOptions){const i=void 0!==e?e:!this.sharedService.gridOptions.enablePagination;i&&this.goToFirstPage(),this._isLocalGrid&&this.dataView&&this.dataView.setPagingOptions({pageSize:e?this._itemsPerPage:0,pageNum:0}),this.sharedService.gridOptions.enablePagination=i,this.pubSubService.publish("onPaginationVisibilityChanged",{visible:i})}}processOnPageChanged(e,i,o){return console.assert(!this.isCursorBased||o,"Configured for cursor based pagination - cursorArgs expected"),!1===this.pubSubService.publish("onBeforePaginationChange",this.getFullPagination())?(this.resetToPreviousPagination(),Promise.resolve(this.getFullPagination())):new Promise((l,c)=>{if(this.recalculateFromToIndexes(),this._isLocalGrid&&this.dataView)this.dataView.setPagingOptions({pageSize:this._itemsPerPage,pageNum:e-1}),this.pubSubService.publish("onPaginationChanged",this.getFullPagination()),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),l(this.getFullPagination());else{const u=+this._itemsPerPage,g=new Date;if(this._backendServiceApi?.preProcess&&this._backendServiceApi.preProcess(),this._backendServiceApi?.process){const y=this._backendServiceApi.service.processOnPaginationChanged(i,this.isCursorBased&&o?o:{newPage:e,pageSize:u}),M=this._backendServiceApi.process(y);M instanceof Promise?M.then(V=>{this.backendUtilities?.executeBackendProcessesCallback(g,V,this._backendServiceApi,this._totalItems);const te=this.getFullPagination();this._previousPagination={pageNumber:te.pageNumber,pageSize:te.pageSize,pageSizes:te.pageSizes,totalItems:this.totalItems},l(this.getFullPagination())}).catch(V=>{this.resetToPreviousPagination(),this.backendUtilities?.onBackendError(V,this._backendServiceApi),(!this._backendServiceApi?.onError||!this.backendUtilities?.onBackendError)&&c(M)}):this.rxjs?.isObservable(M)&&this._subscriptions.push(M.subscribe(V=>{const te=this.getFullPagination();this._previousPagination={pageNumber:te.pageNumber,pageSize:te.pageSize,pageSizes:te.pageSizes,totalItems:this.totalItems},l(this.backendUtilities?.executeBackendProcessesCallback(g,V,this._backendServiceApi,this._totalItems))},V=>{this.resetToPreviousPagination(),this.backendUtilities?.onBackendError(V,this._backendServiceApi),(!this._backendServiceApi?.onError||!this.backendUtilities?.onBackendError)&&c(M)})),this.pubSubService.publish("onPaginationRefreshed",this.getFullPagination()),this.pubSubService.publish("onPaginationChanged",this.getFullPagination())}}})}recalculateFromToIndexes(){((this._pageNumber-1)*this._itemsPerPage>this._totalItems||this._totalItems>0&&0===this._pageNumber)&&(this._pageNumber=1),0===this._totalItems?(this._dataFrom=0,this._dataTo=1,this._pageNumber=0):(this._dataFrom=this._pageNumber>1?this._pageNumber*this._itemsPerPage-this._itemsPerPage+1:1,this._dataTo=this._totalItems<this._itemsPerPage?this._totalItems:(this._pageNumber||1)*this._itemsPerPage,this._dataTo>this._totalItems&&(this._dataTo=this._totalItems)),(this._dataTo>this._totalItems||this._totalItems<this._itemsPerPage)&&(this._dataTo=this._totalItems)}resetToPreviousPagination(){const e=this._previousPagination?.pageNumber!==this.getFullPagination().pageNumber,i=this._previousPagination?.pageSize!==this.getFullPagination().pageSize;i&&this.changeItemPerPage(this._previousPagination?.pageSize??0,null,!1),e&&this.goToPageNumber(this._previousPagination?.pageNumber??0,null,!1),(e||i)&&(this.refreshPagination(),this._backendServiceApi?.service?.updatePagination?.(this._previousPagination?.pageNumber??0,this._previousPagination?.pageSize??0))}setCursorBased(e){this._isCursorBased=e,e&&this.setCursorPageInfo({startCursor:"",endCursor:"",hasNextPage:!1,hasPreviousPage:!1}),this.goToFirstPage(),this.pubSubService.publish("onPaginationSetCursorBased",{isCursorBased:e})}setCursorPageInfo(e){this._cursorPageInfo=e}updateTotalItems(e,i=!1){this._totalItems=e,this._paginationOptions&&(this._paginationOptions.totalItems=e,this.refreshPagination(!1,i))}processOnItemAddedOrRemoved(e,i=!0){if(null!==e){const o=this._dataTo,l=Array.isArray(e)?e.length:1,c=i?+l:-l;this._totalItems+=c,this.recalculateFromToIndexes(),this._dataTo=o+c,this.pubSubService.publish("onPaginationChanged",this.getFullPagination())}}}class kp{get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()??{}}get dataView(){return this._grid?.getData()}get gridUid(){return this._grid?.getUID()??""}get gridUidSelector(){return this.gridUid?`.${this.gridUid}`:""}get intervalRetryDelay(){return this._intervalRetryDelay}set intervalRetryDelay(e){this._intervalRetryDelay=e}get resizeByContentOptions(){return this.gridOptions?.resizeByContentOptions??{}}constructor(e){this.pubSubService=e,this._intervalRetryDelay=200,this._isStopResizeIntervalRequested=!1,this._hasResizedByContentAtLeastOnce=!1,this._totalColumnsWidthByContent=0,this._resizePaused=!1,this._subscriptions=[],this._eventHandler=new tn,this._bindingEventService=new Ft.P}dispose(){this._eventHandler?.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions),window.clearInterval(this._intervalId),window.clearTimeout(this._timer),"container"===this.gridOptions.autoResize?.resizeDetection&&this._resizeObserver&&this._resizeObserver.disconnect(),this._bindingEventService.unbindAll()}init(e,i){if(!e||!this.gridOptions||!i)throw new Error('\n      [Slickgrid-Universal] Resizer Service requires a valid Grid object and DOM Element Container to be provided.\n      You can fix this by setting your gridOption to use "enableAutoResize" or create an instance of the ResizerService by calling bindAutoResizeDataGrid() once.');this._grid=e,this._gridContainerElm=i;const o=this.gridOptions?.gridHeight||this.gridOptions?.gridWidth?{height:this.gridOptions?.gridHeight,width:this.gridOptions?.gridWidth}:void 0;this._autoResizeOptions=this.gridOptions?.autoResize??{container:"grid1",bottomPadding:0},o?.width&&i?.style&&(i.style.width="string"==typeof o.width?o.width:`${o.width}px`),this._gridDomElm=e.getContainerNode(),this._pageContainerElm="string"==typeof this._autoResizeOptions.container&&"string"==typeof this._autoResizeOptions.container?document.querySelector(this._autoResizeOptions.container):this._autoResizeOptions.container,o&&(this._fixedHeight=o.height,this._fixedWidth=o.width),this.gridOptions.enableAutoResize&&this.bindAutoResizeDataGrid(),this.gridOptions.autoResize&&this._subscriptions.push(this.pubSubService.subscribe("onFullResizeByContentRequested",()=>this.resizeColumnsByCellContent(!0))),this.gridOptions.enableColumnResizeOnDoubleClick&&(this._subscriptions.push(this.pubSubService.subscribe("onHeaderMenuColumnResizeByContent",l=>{this.handleSingleColumnResizeByContent(l.columnId)})),this._eventHandler.subscribe(this._grid.onColumnsResizeDblClick,(l,c)=>{this.handleSingleColumnResizeByContent(c.triggeredByColumn)}))}bindAutoResizeDataGrid(e){if("container"===this.gridOptions.autoResize?.resizeDetection){if(!this._pageContainerElm||!this._pageContainerElm)throw new Error('\n          [Slickgrid-Universal] Resizer Service requires a container when gridOption.autoResize.resizeDetection="container"\n          You can fix this by setting your gridOption.autoResize.container');this._resizeObserver||(this._resizeObserver=new ResizeObserver(()=>this.resizeObserverCallback())),this._resizeObserver.observe(this._pageContainerElm)}else{if(void 0===this._gridDomElm)return null;this.resizeGrid().then(()=>this.resizeGridWhenStylingIsBrokenUntilCorrected()).catch(i=>console.log("Error:",i)),this.resizeGrid(10,e),this._bindingEventService.bind(window,"resize",this.handleResizeGrid.bind(this,e))}}handleResizeGrid(e){this.pubSubService.publish("onGridBeforeResize"),this._resizePaused||(this.resizeGrid(0,e),this.resizeGrid(0,e))}resizeObserverCallback(){this._resizePaused||this.resizeGrid()}calculateGridNewDimensions(e){const i=e?.autoResize??{},o=(0,w.getOffset)(this._gridDomElm);if(!window||!this._gridDomElm)return null;let l=void 0!==i?.bottomPadding?i.bottomPadding:20;l&&e.enablePagination&&(l+=35),l&&e.showCustomFooter&&(l+=parseInt(`${this.gridOptions?.customFooterOptions?.footerHeight??25}`,10));let c=0,u=0;"container"===i.calculateAvailableSizeBy?c=(0,w.getInnerSize)(this._pageContainerElm,"height")||0:(c=window.innerHeight||0,u=o.top);const g=c-u-l,y=(0,w.getInnerSize)(this._pageContainerElm,"width")||window.innerWidth||0,M=i?.maxHeight,V=i?.minHeight??180,te=i?.maxWidth,ve=i?.minWidth??300;let Ae=g,ze=i?.rightPadding?y-i.rightPadding:y;return Ae<V&&(Ae=V),M&&Ae>M&&(Ae=M),ze<ve&&(ze=ve),te&&ze>te&&(ze=te),{height:this._fixedHeight||Ae,width:this._fixedWidth||ze}}getLastResizeDimensions(){return this._lastDimensions}pauseResizer(e){this._resizePaused=e}resizeGrid(e,i){return new Promise(o=>{(e=e||0)>0?(window.clearTimeout(this._timer),this._timer=window.setTimeout(()=>o(this.resizeGridCallback(i)),e)):o(this.resizeGridCallback(i))})}resizeGridCallback(e){const i=this.resizeGridWithDimensions(e);return this.pubSubService.publish("onGridAfterResize",i),this.gridOptions.enableAutoResizeColumnsByCellContent&&(!this._lastDimensions?.width||i?.width!==this._lastDimensions?.width)&&this.resizeColumnsByCellContent(!1),this._lastDimensions=i,i}resizeColumnsManual(){let e=this._gridDomElm.getBoundingClientRect().width,i=this._grid.getColumns().map(o=>o.ColumnWidth).reduce((o,l)=>o+l,0);e>i&&this._grid.getColumns&&this._grid.getColumns().length>0&&(this._grid.getColumns()[this._grid.getColumns().length-1].width=(this._grid.getColumns()[this._grid.getColumns().length-1]?.ColumnWidth?this._grid.getColumns()[this._grid.getColumns().length-1]?.ColumnWidth:0)+(e-i)-20)}resizeGridWithDimensions(e){const i=this.calculateGridNewDimensions(this.gridOptions);if((e||i)&&this._gridDomElm){const o=e?.height?e.height:i?.height,l=e?.width?e.width:i?.width;this.gridOptions.autoHeight||(this._gridDomElm.style.height=`${o}px`),this._gridDomElm.style.width=`${l}px`,this._gridContainerElm&&(this._gridContainerElm.style.width=`${l}px`),this.gridOptions.gridId?.startsWith("slkgrdRPT")||this.resizeColumnsManual(),this._grid?.resizeCanvas&&this._gridContainerElm&&this._grid.resizeCanvas(),this._grid&&this.gridOptions?.enableAutoSizeColumns?this.gridUid&&document.querySelector(this.gridUidSelector)&&(!this._lastDimensions||this._lastDimensions.height!==o||this._lastDimensions.width!==l)&&this._grid.autosizeColumns():this.gridOptions.enableAutoResizeColumnsByCellContent&&(!this._lastDimensions?.width||l!==this._lastDimensions?.width)&&this.resizeColumnsByCellContent(!1),this._lastDimensions={height:o||0,width:l||0}}return this._lastDimensions}requestStopOfAutoFixResizeGrid(e=!0){this._isStopResizeIntervalRequested=e}resizeColumnsByCellContent(e=!1){const i=this._grid.getColumns(),o=this.dataView.getItems(),l={};let c=!1,u=0;const g=this._gridContainerElm?.offsetWidth??0;if(!Array.isArray(o)||0===o.length||!e&&this._totalColumnsWidthByContent>0&&this._totalColumnsWidthByContent<g)return void this._grid.autosizeColumns();if(this._hasResizedByContentAtLeastOnce&&this.gridOptions?.resizeByContentOnlyOnFirstLoad&&!e)return;if(this.pubSubService.publish("onBeforeResizeByContent",void 0,0),0===this._totalColumnsWidthByContent||e){for(const V of i)l[V.id]=V.originalWidth??V.minWidth??0;u=this.calculateCellWidthByReadingDataset(i,l,this.resizeByContentOptions.maxItemToInspectCellContentWidth);let M=0;for(const V of i)V.originalWidth&&!(V.resizeAlwaysRecalculateWidth??this.resizeByContentOptions.alwaysRecalculateColumnWidth)?V.width=V.originalWidth:void 0!==l[V.id]&&(V.rerenderOnResize&&(c=!0),this.applyNewCalculatedColumnWidthByReference(V,l[V.id])),M+=V.width||0,this._totalColumnsWidthByContent=M}this._grid.setColumns(i),this._hasResizedByContentAtLeastOnce=!0;const y={};for(const M of i)y[M.id]=M.width;this._totalColumnsWidthByContent>g?this._grid.reRenderColumns(c):this._grid.autosizeColumns(),this.pubSubService.publish("onAfterResizeByContent",{readItemCount:u,calculateColumnWidths:y})}calculateCellWidthByReadingDataset(e,i,o=1e3,l){const c=Array.isArray(e)?e:[e],u=this.dataView.getItems();let g=0;for(const[y,M]of u.entries()){if(y>o)break;Array.isArray(c)&&"object"==typeof i&&c.forEach((V,te)=>{const ve=this.calculateCellWidthByContent(M,V,y,l??te,i[V.id]);void 0!==ve&&(i[V.id]=ve)}),g=y+1}return g}calculateCellWidthByContent(e,i,o,l,c){const u=this.resizeByContentOptions.cellCharWidthInPx??7;if(!i.originalWidth){const g=i?.resizeCharWidthInPx??u,y=Va(i?.formatter,o,l,i,e,this._grid),M=(0,w.isPrimitiveOrHTML)(y)?(0,w.stripTags)(y):"",V=Math.ceil(M.length*g),te=i.resizeMaxWidthThreshold;i&&(void 0===c||V>c)&&(c=void 0!==te&&V>te?te:void 0!==i.maxWidth&&V>i.maxWidth?i.maxWidth:V)}return c}applyNewCalculatedColumnWidthByReference(e,i){const o=this.resizeByContentOptions.cellPaddingWidthInPx??6,l=this.resizeByContentOptions.formatterPaddingWidthInPx??6;let u=i;u*="string"===(e?.filter?.type??e?.type??p.string)?e?.resizeCalcWidthRatio??this.resizeByContentOptions.defaultRatioForStringType??.9:1,u+=o,e.resizeExtraWidthPadding&&(u+=e.resizeExtraWidthPadding),e.editor&&this.gridOptions.editable&&(u+=l),void 0!==e.maxWidth&&u>e.maxWidth&&(u=e.maxWidth),void 0!==e.resizeMaxWidthThreshold&&u>e.resizeMaxWidthThreshold&&(u=e.resizeMaxWidthThreshold),u=Math.ceil(u),(void 0===e.originalWidth||!0===e.resizeAlwaysRecalculateWidth||!0===this.resizeByContentOptions.alwaysRecalculateColumnWidth)&&(e.width=this.readjustNewColumnWidthWhenOverLimit(e,u))}handleSingleColumnResizeByContent(e){const i=this._grid.getColumns(),o=i.findIndex(l=>l.id===e);if(o>=0){const l=i[o],c={[e]:l.originalWidth??l.minWidth??0};l.originalWidth=void 0,this.calculateCellWidthByReadingDataset(l,c,this.resizeByContentOptions.maxItemToInspectSingleColumnWidthByContent,o),this.applyNewCalculatedColumnWidthByReference(l,c[e]),this._grid.reRenderColumns(l?.rerenderOnResize??!1)}}readjustNewColumnWidthWhenOverLimit(e,i){const o=this.gridOptions.frozenColumn??-1,l=this._grid.getColumns().findIndex(u=>u.id===e.id)??0;let c=i;if(o>=0&&l<=o){const u=Array.from(this._grid.getViewports());if(u){const g=u.find(ve=>ve.classList.contains("slick-viewport-left"))?.clientWidth??0,y=u.find(ve=>ve.classList.contains("slick-viewport-right"))?.clientWidth??0,V=g-(e.width??0);V+i>g+y&&(c=g-V+y-(this.resizeByContentOptions.widthToRemoveFromExceededWidthReadjustment??50))}}return Math.ceil(c)}checkIsGridShown(){return!!document.querySelector(`${this.gridUidSelector}`)?.offsetParent}resizeGridWhenStylingIsBrokenUntilCorrected(){var e=this;const i=this.gridOptions?.autoFixResizeTimeout??18e3,o=this.gridOptions?.autoFixResizeRequiredGoodCount??5,l=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-header`),c=this._gridContainerElm.querySelector(`${this.gridUidSelector} .slick-viewport`);let u=0,g=0;if(l&&c&&this.gridOptions.autoFixResizeWhenBrokenStyleDetected){const y=this.dataView.getItemCount(),M=this._grid.getColumns()||[];this._intervalId=window.setInterval((0,yt.A)(function*(){const te=(0,w.getOffset)(l);let ve=te.top;e.gridOptions?.enableFiltering&&e.gridOptions.headerRowHeight&&(ve+=e.gridOptions.headerRowHeight),e.gridOptions?.createPreHeaderPanel&&e.gridOptions.showPreHeaderPanel&&e.gridOptions.preHeaderPanelHeight&&(ve+=e.gridOptions.preHeaderPanelHeight),ve+=44;const ze=(0,w.getOffset)(c).top,Ye=(0,w.getOffset)(e._gridContainerElm);let nt=0===te?.top||ve-ze>2||0===Ye.left&&0===Ye.top;const et=e._grid.getRenderedRange()?.rightPx??0;!nt&&y>0&&0===et&&M.length>1&&(nt=!0),e._isStopResizeIntervalRequested&&(nt=!1,u=i),e.checkIsGridShown()&&(nt||0===Ye.left||0===Ye.top)&&(yield e.resizeGrid(),g<5&&e._grid.updateColumns(),e.checkIsGridShown()&&(nt=!1)),e.checkIsGridShown()&&g++,e.checkIsGridShown()&&!nt&&(g>=o||u++>=i)&&window.clearInterval(e._intervalId)}),this.intervalRetryDelay)}}}class $h{constructor(){this._hasColumnsReordered=!1,this._hideHeaderRowAfterPageLoad=!1}get allColumns(){return this._allColumns}set allColumns(e){this._allColumns=e}get columnDefinitions(){return this._grid?.getColumns()??[]}get currentPagination(){return this._currentPagination}set currentPagination(e){this._currentPagination=e}get dataView(){return this._dataView}set dataView(e){this._dataView=e}get frozenVisibleColumnId(){return this._frozenVisibleColumnId}set frozenVisibleColumnId(e){this._frozenVisibleColumnId=e}get hasColumnsReordered(){return this._hasColumnsReordered}set hasColumnsReordered(e){this._hasColumnsReordered=e}get slickGrid(){return this._grid}set slickGrid(e){this._grid=e}get gridContainerElement(){return this._gridContainerElm}set gridContainerElement(e){this._gridContainerElm=e}get gridOptions(){return this._gridOptions||this._grid?.getOptions()||{}}set gridOptions(e){this._gridOptions=e}get groupItemMetadataProvider(){return this._groupItemMetadataProvider}set groupItemMetadataProvider(e){this._groupItemMetadataProvider=e}get hideHeaderRowAfterPageLoad(){return this._hideHeaderRowAfterPageLoad}set hideHeaderRowAfterPageLoad(e){this._hideHeaderRowAfterPageLoad=e}get externalRegisteredResources(){return this._externalRegisteredResources}set externalRegisteredResources(e){this._externalRegisteredResources=e}get visibleColumns(){return this._visibleColumns}set visibleColumns(e){this._visibleColumns=e}get hierarchicalDataset(){return this._hierarchicalDataset}set hierarchicalDataset(e){this._hierarchicalDataset=e}}class zh{constructor(e,i,o,l){this.sharedService=e,this.pubSubService=i,this.backendUtilities=o,this.rxjs=l,this._currentLocalSorters=[],this._isBackendGrid=!1,this._eventHandler=new tn,this.rxjs&&(this.httpCancelRequests$=this.rxjs.createSubject())}get eventHandler(){return this._eventHandler}get _gridOptions(){return this._grid?.getOptions()??{}}get _columnDefinitions(){return this._grid?.getColumns()??[]}dispose(){this._eventHandler?.unsubscribeAll&&this._eventHandler.unsubscribeAll(),this.httpCancelRequests$&&this.rxjs?.isObservable(this.httpCancelRequests$)&&(this.httpCancelRequests$.next(),this.httpCancelRequests$.complete())}addRxJsResource(e){this.rxjs=e}bindBackendOnSort(e){this._isBackendGrid=!0,this._grid=e,this._dataView=e?.getData(),this._eventHandler.subscribe(e.onSort,this.onBackendSortChanged.bind(this))}bindLocalOnSort(e){this._isBackendGrid=!1,this._grid=e,this._dataView=e?.getData(),this.processTreeDataInitialSort(),this._eventHandler.subscribe(e.onSort,this.handleLocalOnSort.bind(this))}handleLocalOnSort(e,i){const o=i.multiColumnSort?i.sortCols:new Array({columnId:i.sortCol?.id??"",sortAsc:i.sortAsc,sortCol:i.sortCol});this._currentLocalSorters=[],Array.isArray(o)&&o.forEach(l=>{l.sortCol&&this._currentLocalSorters.push({columnId:l.sortCol.id,direction:l.sortAsc?j.ASC:j.DESC})}),this.onLocalSortChanged(this._grid,o),this.emitSortChanged(Y.local)}clearSortByColumnId(e,i){const o=this.getCurrentColumnSorts(),l=this.getCurrentColumnSorts(`${i}`);if(Array.isArray(o)&&Array.isArray(l)&&o.length!==l.length){this._gridOptions.backendServiceApi?this.onBackendSortChanged(e,{multiColumnSort:!0,sortCols:l,grid:this._grid}):this._dataView?this.onLocalSortChanged(this._grid,l,!0,!0):this._grid.onSort.notify(this._gridOptions?.multiColumnSort?l:l[0]);const c=l.map(u=>({columnId:u?.sortCol?.id??"",sortAsc:u?.sortAsc,sortCol:u?.sortCol}));this._grid.setSortColumns(c)}Array.isArray(l)&&0===l.length&&this.sortLocalGridByDefaultSortFieldId()}clearSorting(e=!0){if(this._grid&&this._gridOptions&&this._dataView)if(this._grid.setSortColumns([]),e)this._isBackendGrid?this.onBackendSortChanged(void 0,{grid:this._grid,multiColumnSort:!0,sortCols:[],clearSortTriggered:!0}):this._columnDefinitions&&Array.isArray(this._columnDefinitions)&&this._columnDefinitions.length>0&&this.sortLocalGridByDefaultSortFieldId();else if(this._isBackendGrid){const i=this._gridOptions?.backendServiceApi?.service;i?.clearSorters&&i.clearSorters()}this._currentLocalSorters=[],this.pubSubService.publish("onSortCleared",!0)}disableSortFunctionality(e=!0,i=!0){let c;this._gridOptions.enableSorting=!this._gridOptions.enableSorting,e?(i&&this.clearSorting(),this._eventHandler.unsubscribeAll(),c=this.disableAllSortingCommands(!0)):(c=this.disableAllSortingCommands(!1),this._eventHandler.subscribe(this._grid.onSort,(u,g)=>this.handleLocalOnSort(u,g))),this._grid.setOptions({enableSorting:this._gridOptions.enableSorting},!1,!0),this.sharedService.gridOptions=this._gridOptions,this._grid.setColumns(c)}toggleSortFunctionality(e=!0){this.disableSortFunctionality(this._gridOptions.enableSorting,e)}emitSortChanged(e,i){if(e===Y.remote&&this._gridOptions?.backendServiceApi){let o=[];const l=this._gridOptions.backendServiceApi.service;l?.getCurrentSorters&&(o=l.getCurrentSorters()),this.pubSubService.publish("onSortChanged",o)}else e===Y.local&&(i&&(this._currentLocalSorters=i),this.pubSubService.publish("onSortChanged",this.getCurrentLocalSorters()))}getCurrentLocalSorters(){return this._currentLocalSorters}getCurrentColumnSorts(e){if(this._grid){const i=this._grid.getSortColumns();if(Array.isArray(i))return i.reduce((l,c)=>(c&&(!e||c.columnId!==e)&&l.push({columnId:c.columnId||"",sortCol:this._columnDefinitions[this._grid.getColumnIndex(c.columnId||"")],sortAsc:c.sortAsc}),l),[])}return[]}loadGridSorters(e){this._currentLocalSorters=[];const i=[];return Array.isArray(e)&&((this._gridOptions.multiColumnSort?e:e.slice(0,1)).forEach(l=>{const c=this._columnDefinitions.find(u=>u.id===l.columnId);if(c){if(!c.sortable){let u="[Slickgrid-Universal] Cannot add sort icon to a column that is not sortable, please add `sortable: true` to your column or remove it from your list of columns to sort.";throw this._gridOptions.enableTreeData&&(u+=" Also note that TreeData feature requires the column holding the tree (expand/collapse icons) to be sortable."),new Error(u)}i.push({columnId:c.id,sortAsc:l.direction.toUpperCase()===j.ASC,sortCol:c}),this._currentLocalSorters.push({columnId:String(c.id),direction:l.direction.toUpperCase()})}}),this.onLocalSortChanged(this._grid,i),this._grid.setSortColumns(i.map(l=>({columnId:l.columnId,sortAsc:l.sortAsc})))),i}processTreeDataInitialSort(){if(this._gridOptions?.enableTreeData&&this._gridOptions.treeDataOptions){const e=this._gridOptions.treeDataOptions,i=this._columnDefinitions.find(o=>o.id===e.columnId);if(i){let o=j.ASC,l={columnId:e.columnId,sortCol:i,sortAsc:!0};if(e?.initialSort?.columnId){const c=e.initialSort.columnId,u=this._columnDefinitions.find(g=>g.id===c);o=(e.initialSort.direction||j.ASC).toUpperCase(),l={columnId:c,sortCol:u,sortAsc:o===j.ASC}}l?.columnId&&this.sharedService?.hierarchicalDataset&&this.updateSorting([{columnId:l.columnId||"",direction:o}])}}}onBackendSortChanged(e,i){if(!i||!i.grid)throw new Error('Something went wrong when trying to bind the "onBackendSortChanged(event, args)" function, it seems that "args" is not populated correctly');const o=i.grid?.getOptions()??{},l=o.backendServiceApi;if(!l||!l.process||!l.service)throw new Error('BackendServiceApi requires at least a "process" function and a "service" defined');const c=new Date;l.preProcess&&l.preProcess();const u=l.service.processOnSortChanged(e,i),g=o?.pagination?.totalItems||0;this.backendUtilities?.executeBackendCallback(l,u,i,c,g,{emitActionChangedCallback:this.emitSortChanged.bind(this),errorCallback:()=>{this._grid.setSortColumns(i.previousSortColumns||[]);const y=i.previousSortColumns?.map(M=>({columnId:M.columnId,sortAsc:M.sortAsc,sortCol:this._columnDefinitions.find(V=>V.id===M.columnId)}));l?.service?.updateSorters?.(y||[])},httpCancelRequestSubject:this.httpCancelRequests$})}onLocalSortChanged(e,i,o=!1,l=!1){var c=this;return(0,yt.A)(function*(){const u=c._gridOptions?.datasetIdPropertyName??"id",g=c._gridOptions?.enableTreeData??!1,y=e.getData();if(yield c.pubSubService.publish("onBeforeSortChange",{sortColumns:i},0),e&&y){if(o&&!g&&y.reSort(),g&&c.sharedService&&Array.isArray(c.sharedService.hierarchicalDataset)){const M=c.sortHierarchicalDataset(c.sharedService.hierarchicalDataset,i);c._dataView.setItems(M.flat,u),c._dataView.onRowCountChanged.notify({previous:c._dataView.getFilteredItemCount(),current:c._dataView.getLength(),itemCount:c._dataView.getItemCount(),dataView:c._dataView,callingOnRowsChanged:!0})}else y.sort(c.sortComparers.bind(c,i));e.invalidate(),l&&c.emitSortChanged(Y.local,i.map(M=>({columnId:M.sortCol?.id??"id",direction:M.sortAsc?j.ASC:j.DESC})))}})()}sortHierarchicalDataset(e,i,o=!1){this.sortTreeData(e,i);const l=this._gridOptions?.datasetIdPropertyName??"id",c=this._gridOptions?.treeDataOptions??{columnId:""},g=ce(e,{...c,identifierPropName:c.identifierPropName??l,shouldAddTreeLevelNumber:!0});return o&&(this._currentLocalSorters=[],i.forEach(M=>{this._currentLocalSorters.push({columnId:M.columnId,direction:M.sortAsc?"ASC":"DESC"})}),this.emitSortChanged(this._gridOptions?.backendServiceApi?Y.remote:Y.local)),{hierarchical:e,flat:g}}sortLocalGridByDefaultSortFieldId(){const e=this._gridOptions&&this._gridOptions.defaultColumnSortFieldId||this._gridOptions.datasetIdPropertyName||"id",i={id:e,field:e};this.onLocalSortChanged(this._grid,new Array({columnId:i.id,sortAsc:!0,sortCol:i,clearSortTriggered:!0}),!1,!0)}sortComparers(e,i,o){if(Array.isArray(e))for(const l of e){const c=this.sortComparer(l,i,o);if(void 0!==c)return c}return F.neutral}sortComparer(e,i,o,l){if(e?.sortCol){const c=e.sortCol,u=e.sortAsc?F.asc:F.desc;let g=l||c.queryFieldSorter||c.queryField||c.field,y=g;const M=c.type||p.string;"function"==typeof c.queryFieldNameGetterFn&&(g=c.queryFieldNameGetterFn(i),y=c.queryFieldNameGetterFn(o));let V=i[g],te=o[y];if(g?.indexOf(".")>=0&&(V=ee(i,g)),y?.indexOf(".")>=0&&(te=ee(o,y)),c.sortComparer){const ve=c.sortComparer(V,te,u,c,this._gridOptions);if(ve!==F.neutral)return ve}else{const ve=Tt(M,V,te,u,c,this._gridOptions);if(ve!==F.neutral)return ve}}}sortTreeData(e,i){Array.isArray(i)&&i.forEach(o=>{this.sortTreeChildren(e,o,0)})}sortTreeChildren(e,i,o){const c=this._gridOptions?.treeDataOptions?.childrenPropName??"children";e.sort((u,g)=>this.sortComparer(i,u,g)??F.neutral),e.forEach(u=>{u&&u.hasOwnProperty(c)&&Array.isArray(u[c])&&(o++,this.sortTreeChildren(u[c],i,o),o--)})}updateSorting(e,i=!0,o=!0){if(!this._gridOptions||!this._gridOptions.enableSorting)throw new Error('[Slickgrid-Universal] in order to use "updateSorting" method, you need to have Sortable Columns defined in your grid and "enableSorting" set in your Grid Options');if(Array.isArray(e)){const l=this._gridOptions?.backendServiceApi;if(l){const c=l?.service;c?.updateSorters&&(c.updateSorters(void 0,e),o&&this.backendUtilities?.refreshBackendDataset(this._gridOptions))}else this.loadGridSorters(e);i&&this.emitSortChanged(l?Y.remote:Y.local)}}disableAllSortingCommands(e=!0){const i=this._grid.getColumns();i.forEach(l=>{void 0!==l.sortable&&(l.sortable=!e),l?.header?.menu&&l.header.menu.commandItems?.forEach(c=>{if(c&&"string"!=typeof c){const u=c.command;("sort-asc"===u||"sort-desc"===u||"clear-sort"===u)&&(c.hidden=e)}})});const o=this._gridOptions?.gridMenu?.commandItems;return o&&o.forEach(l=>{l&&"string"!=typeof l&&"clear-sorting"===l.command&&(l.hidden=e)}),i}}class Yf{constructor(e,i,o){this.pubSubService=e,this.sharedService=i,this.sortService=o,this._currentToggledItems=[],this._isLastFullToggleCollapsed=!1,this._isOneCpuCyclePassed=!1,this._isTreeDataEnabled=!1,this._subscriptions=[],this._treeDataRecalcHandler=null,this._eventHandler=new tn,window.setTimeout(()=>this._isOneCpuCyclePassed=!0)}set currentToggledItems(e){this._currentToggledItems=e}get dataset(){return this.dataView?.getItems()}get datasetHierarchical(){return this.sharedService.hierarchicalDataset}get dataView(){return this._grid?.getData()}get eventHandler(){return this._eventHandler}get gridOptions(){return this._grid?.getOptions()??{}}get treeDataOptions(){return this.gridOptions.treeDataOptions}dispose(){this._eventHandler.unsubscribeAll(),this.pubSubService.unsubscribeAll(this._subscriptions)}init(e){if(this._grid=e,this._isTreeDataEnabled=this.gridOptions?.enableTreeData??!1,this._isLastFullToggleCollapsed=this.treeDataOptions?.initiallyCollapsed??!1,this._currentToggledItems=this.gridOptions.presets?.treeData?.toggledItems??[],this._lastToggleStateChange={type:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",previousFullToggleType:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",toggledItems:this._currentToggledItems},this._isTreeDataEnabled){if(this.gridOptions?.multiColumnSort)throw new Error('[Slickgrid-Universal] It looks like you are trying to use Tree Data with multi-column sorting, unfortunately it is not supported because of its complexity, you can disable it via "multiColumnSort: false" grid option and/or help in providing support for this feature.');if(!this.gridOptions?.enableFiltering)throw new Error('[Slickgrid-Universal] It looks like you are trying to use Tree Data without using the filtering option, unfortunately that is not possible with Tree Data since it relies heavily on the filters to expand/collapse the tree. You need to enable it via "enableFiltering: true"');if(this.gridOptions?.backendServiceApi||this.gridOptions?.enablePagination)throw new Error("[Slickgrid-Universal] It looks like you are trying to use Tree Data with Pagination and/or a Backend Service (OData, GraphQL) but unfortunately that is simply not supported because of its complexity.");if(!this.gridOptions.treeDataOptions||!this.gridOptions.treeDataOptions.columnId)throw new Error('[Slickgrid-Universal] When enabling tree data, you must also provide the "treeDataOption" property in your Grid Options with "childrenPropName" or "parentPropName" (depending if your array is hierarchical or flat) for the Tree Data to work properly.')}this._eventHandler.subscribe(e.onClick,this.handleOnCellClick.bind(this)),this._subscriptions.push(this.pubSubService.subscribe("onGridMenuClearAllSorting",this.clearSorting.bind(this))),this._treeDataRecalcHandler=this.setAutoRecalcTotalsCallbackWhenFeatEnabled(this.gridOptions),this._eventHandler.subscribe(this.dataView.onRowCountChanged,()=>{"function"==typeof this._treeDataRecalcHandler&&this._isOneCpuCyclePassed&&(window.clearTimeout(this._timer),this._timer=window.setTimeout(()=>this._treeDataRecalcHandler?.(),this.treeDataOptions?.autoRecalcTotalsDebounce??0))})}applyToggledItemStateChanges(e,i,o=!0,l=!1){if(Array.isArray(e)){const c=this.getTreeDataOptionPropName("collapsedPropName"),u=this.getTreeDataOptionPropName("hasChildrenPropName");this.dataView.beginUpdate(!0);const y="full-collapse"===(i??this._lastToggleStateChange.previousFullToggleType);i&&(this._lastToggleStateChange.previousFullToggleType=i),o&&(this.dataView.getItems()||[]).forEach(M=>{M[u]&&(M[c]=y)}),this.dynamicallyToggleItemState(e,l)}}dynamicallyToggleItemState(e,i=!0){Array.isArray(e)&&(this.dataView.beginUpdate(!0),e.forEach(o=>{const l=this.dataView.getItemById(o.itemId);if(this.updateToggledItem(l,o.isCollapsed),i){const c=this._currentToggledItems.findIndex(u=>u.itemId===o.itemId);c>=0?this._currentToggledItems[c].isCollapsed=o.isCollapsed:this._currentToggledItems.push({itemId:o.itemId,isCollapsed:o.isCollapsed}),this.pubSubService.publish("onTreeItemToggled",{...this._lastToggleStateChange,fromItemId:o.itemId,toggledItems:this._currentToggledItems,type:o.isCollapsed?ne.toggleCollapse:ne.toggleExpand})}}),this.dataView.endUpdate(),this.dataView.refresh())}getCurrentToggleState(){return this._lastToggleStateChange}getInitialSort(e,i){const o=i?.treeDataOptions,l=o?.initialSort??{columnId:o?.columnId??"",direction:"ASC"},c=e.find(u=>u.id===l.columnId);return{columnId:l.columnId,sortAsc:"DESC"!==l?.direction?.toUpperCase(),sortCol:c}}getItemCount(e){if(void 0!==e){const i=this.getTreeDataOptionPropName("levelPropName");return this.dataView.getItems().filter(o=>o[i]===e).length}return this.dataView.getItemCount()}getToggledItems(){return this._currentToggledItems}getTreeDataOptionPropName(e){let i="";switch(e){case"childrenPropName":i=this.treeDataOptions?.childrenPropName??B.treeDataProperties.CHILDREN_PROP;break;case"collapsedPropName":i=this.treeDataOptions?.collapsedPropName??B.treeDataProperties.COLLAPSED_PROP;break;case"hasChildrenPropName":i=this.treeDataOptions?.hasChildrenPropName??B.treeDataProperties.HAS_CHILDREN_PROP;break;case"identifierPropName":i=this.treeDataOptions?.identifierPropName??this.gridOptions?.datasetIdPropertyName??"id";break;case"levelPropName":i=this.treeDataOptions?.levelPropName??B.treeDataProperties.TREE_LEVEL_PROP;break;case"parentPropName":i=this.treeDataOptions?.parentPropName??B.treeDataProperties.PARENT_PROP}return i}clearSorting(){const e=this.getInitialSort(this.sharedService.columnDefinitions,this.sharedService.gridOptions);this.sortService.loadGridSorters([{columnId:e.columnId,direction:e.sortAsc?"ASC":"DESC"}])}convertFlatParentChildToTreeDatasetAndSort(e,i,o,l){const c=this.convertFlatParentChildToTreeDataset(e,o),u=Array.isArray(l)&&l.length?l[0]:this.getInitialSort(i,o),g=this.sortService.sortHierarchicalDataset(c,[u],!0);return this._grid?.setSortColumns([u]),g}convertFlatParentChildToTreeDataset(e,i){const o=i?.datasetIdPropertyName??"id",l=i?.treeDataOptions??{columnId:"id"};return Ce(e,{...l,identifierPropName:l.identifierPropName??o,initiallyCollapsed:this._isLastFullToggleCollapsed})}enableAutoRecalcTotalsFeature(e=!0){this._treeDataRecalcHandler=e&&this._isTreeDataEnabled?this.recalculateTreeTotals.bind(this,this.gridOptions):null}recalculateTreeTotals(e){const i=e.treeDataOptions,o=i?.childrenPropName??B.treeDataProperties.CHILDREN_PROP,l=i?.levelPropName??B.treeDataProperties.TREE_LEVEL_PROP;i?.aggregators&&(i.aggregators.forEach(c=>{ie(this.sharedService.hierarchicalDataset||[],{childrenPropName:o,levelPropName:l,aggregator:c})}),this._grid.invalidate())}sortHierarchicalDataset(e,i){const o=i??this.getInitialSort(this.sharedService.allColumns,this.gridOptions),l=Array.isArray(o)?o:[o];return this.sortService.sortHierarchicalDataset(e,l)}toggleTreeDataCollapse(e,i=!0){var o=this;return(0,yt.A)(function*(){if(o.gridOptions?.enableTreeData){const c=o.getTreeDataOptionPropName("hasChildrenPropName");i&&(yield o.pubSubService.publish("onTreeFullToggleStart",{collapsing:e})),o.dataView.beginUpdate(!0),(o.dataView.getItems()||[]).forEach(u=>{u[c]&&o.updateToggledItem(u,e)}),o.dataView.endUpdate(),o.dataView.refresh(),o._isLastFullToggleCollapsed=e}const l=e?ne.fullCollapse:ne.fullExpand;o._lastToggleStateChange={type:l,previousFullToggleType:l,toggledItems:null},i&&o.pubSubService.publish("onTreeFullToggleEnd",o._lastToggleStateChange)})()}handleOnCellClick(e,i){if(e&&i){const o=e.target||{},l=this.gridOptions.datasetIdPropertyName??"id",c=this.getTreeDataOptionPropName("collapsedPropName"),u=this.getTreeDataOptionPropName("childrenPropName");if("string"==typeof o?.className&&o.className.indexOf("toggle")>=0){const y=this.dataView.getItem(i.row);if(y){y[c]=!y[c];const M=y[c],V=y[l],te=this._currentToggledItems.findIndex(ze=>ze.itemId===V);te>=0?this._currentToggledItems[te].isCollapsed=M:this._currentToggledItems.push({itemId:V,isCollapsed:M}),this.dataView.updateItem(V,y);const Ae=he(this.sharedService.hierarchicalDataset||[],ze=>ze[l]===V,u);Ae&&(Ae[c]=M),this._grid.invalidate(),this._lastToggleStateChange={type:M?ne.toggleCollapse:ne.toggleExpand,previousFullToggleType:this._isLastFullToggleCollapsed?"full-collapse":"full-expand",toggledItems:this._currentToggledItems},this.pubSubService.publish("onTreeItemToggled",{...this._lastToggleStateChange,fromItemId:V})}e.stopImmediatePropagation()}}}updateToggledItem(e,i){const o=this.gridOptions?.datasetIdPropertyName??"id",l=this.getTreeDataOptionPropName("childrenPropName"),c=this.getTreeDataOptionPropName("collapsedPropName");if(e){e[c]=i,this.dataView.updateItem(e[o],e);const g=he(this.sharedService.hierarchicalDataset||[],y=>y[o]===e[o],l);g&&(g[c]=i)}}setAutoRecalcTotalsCallbackWhenFeatEnabled(e){return e?.enableTreeData&&e?.treeDataOptions?.autoRecalcTotalsOnFilterChange&&e?.treeDataOptions?.aggregators?this.recalculateTreeTotals.bind(this,e):null}}class ji{constructor(e){this.translaterService=e,this._debounceTypingDelay=0,this._shouldTriggerQuery=!0,this._inputType="text",this.inputFilterType="single",this.searchTerms=[],this._bindEventService=new Ft.P}get columnFilter(){return this.columnDef?.filter??{}}get defaultOperator(){return le.empty}get inputType(){return this._inputType}set inputType(e){this._inputType=e}get operator(){return this.columnFilter?.operator??this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}get gridOptions(){return this.grid?.getOptions()??{}}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,"compound"===this.inputFilterType&&(this.operator=e.operator||""),this.searchTerms=e?.searchTerms??[],this._cellContainerElm=e.filterContainerElm;const i=this.gridOptions?.backendServiceApi;this._debounceTypingDelay=(i?i?.filterTypingDebounce??this.gridOptions?.defaultBackendServiceFilterTypingDebounce:this.gridOptions?.filterTypingDebounce)??0;const o=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.createDomFilterElement(o),this._bindEventService.bind(this._filterInputElm,["keyup","blur","change"],this.onTriggerEvent.bind(this)),this._bindEventService.bind(this._filterInputElm,"wheel",this.onTriggerEvent.bind(this),{passive:!0}),"compound"===this.inputFilterType&&this._selectOperatorElm&&this._bindEventService.bind(this._selectOperatorElm,"change",this.onTriggerEvent.bind(this))}clear(e=!0){this._filterInputElm&&(this._shouldTriggerQuery=e,this.searchTerms=[],this._filterInputElm.value="",this._currentValue=void 0,this.updateFilterStyle(!1),"compound"===this.inputFilterType&&this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this.onTriggerEvent(void 0,!0))}destroy(){this._bindEventService.unbindAll(),this._selectOperatorElm?.remove?.(),this._filterInputElm?.remove?.()}getValues(){return this._filterInputElm.value}setValues(e,i,o=!1){const l=Array.isArray(e)?e:[e];let c="";for(const u of l)c="single"===this.inputFilterType?i?this.addOptionalOperatorIntoSearchString(u,i):u:`${u}`,this._filterInputElm.value=`${c??""}`,this._currentValue=this._filterInputElm.value;if(this.updateFilterStyle(""!==this.getValues()),this.operator=i||this.defaultOperator,i&&this._selectOperatorElm){const u=Me(this.operator);this._selectOperatorElm.value=u}o&&this.onTriggerEvent(void 0,!1)}addOptionalOperatorIntoSearchString(e,i){let o="",l="",c=null==e?"":`${e}`;if(i&&c){switch(i){case"<>":case"!=":case"=":case"==":case">":case">=":case"<":case"<=":o=i;break;case"EndsWith":case"*z":o="*";break;case"StartsWith":case"a*":l="*"}c=`${o}${c}${l}`}return c}getCompoundOperatorOptionValues(){const e=this.columnDef.type&&this.columnDef.type?this.columnDef.type:p.string;let i,o="text";if(this.columnFilter?.compoundOperatorList)i=this.columnFilter.compoundOperatorList;else switch(e){case p.string:case p.text:case p.readonly:case p.password:o="text",i=function gi(d,e){return[{operator:"",desc:Qt("CONTAINS","TEXT_CONTAINS","Contains",d,e)},{operator:"<>",desc:Qt("NOT_CONTAINS","TEXT_NOT_CONTAINS","Not Contains",d,e)},{operator:"=",desc:Qt("EQUALS","TEXT_EQUALS","Equals",d,e)},{operator:"!=",desc:Qt("NOT_EQUAL_TO","TEXT_NOT_EQUAL_TO","Not equal to",d,e)},{operator:"a*",desc:Qt("STARTS_WITH","TEXT_STARTS_WITH","Starts with",d,e)},{operator:"*z",desc:Qt("ENDS_WITH","TEXT_ENDS_WITH","Ends with",d,e)}]}(this.gridOptions,this.translaterService);break;default:o="numeric",i=Ge(this.gridOptions,this.translaterService)}return Ze(this.gridOptions,i,o),i}createDomFilterElement(e){const i=this.columnDef?.id??"";(0,w.emptyElement)(this._cellContainerElm);let o=this.gridOptions?.defaultFilterPlaceholder??"";this.columnFilter?.placeholder&&(o=this.columnFilter.placeholder);const l=`${e??""}`;if(this._filterInputElm=(0,w.createDomElement)("input",{type:this._inputType||"text",autocomplete:"off",ariaAutoComplete:"none",placeholder:o,ariaLabel:this.columnFilter?.ariaLabel??`${(0,w.toSentenceCase)(i+"")} Search Filter`,className:`form-control filter-${i}`,value:l,dataset:{columnid:`${i}`}}),this.updateFilterStyle(!!e),void 0!==e&&(this._currentValue=l),"single"===this.inputFilterType)this._filterContainerElm=this._filterInputElm,this._filterInputElm.classList.add("search-filter"),this._cellContainerElm.appendChild(this._filterInputElm),this._cellContainerElm.appendChild(document.createElement("span"));else{this._filterInputElm.classList.add("compound-input"),this._selectOperatorElm=$t(this.getCompoundOperatorOptionValues(),this.grid),this._filterContainerElm=(0,w.createDomElement)("div",{className:`form-group search-filter filter-${i}`});const c=(0,w.createDomElement)("div",{className:"input-group"},this._filterContainerElm);(0,w.createDomElement)("div",{className:"input-group-addon input-group-prepend operator"},c).appendChild(this._selectOperatorElm),c.appendChild(this._filterInputElm),c.appendChild((0,w.createDomElement)("span")),this.operator&&(this._selectOperatorElm.value=Me(this.operator)),this._filterContainerElm&&this._cellContainerElm.appendChild(this._filterContainerElm)}}onTriggerEvent(e,i=!1){if(i)this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:i,shouldTriggerQuery:this._shouldTriggerQuery}),this.updateFilterStyle(!1);else{const o=e?.type??"",l=this._selectOperatorElm?.value??this.operator;let c=this._filterInputElm.value;"string"==typeof c&&(this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace)&&(c=c.trim()),"select"!==e?.target?.tagName.toLowerCase()&&(this._currentValue=c),this.updateFilterStyle(""!==c);const g={columnDef:this.columnDef,operator:l,searchTerms:c?[c]:null,shouldTriggerQuery:this._shouldTriggerQuery},y="keyup"===o&&"Enter"!==e?.key?this._debounceTypingDelay:0,M=this.columnFilter.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput,V=M&&(0,w.isDefined)(this._currentValue)||""===this._currentValue&&(0,w.isDefined)(this._lastSearchValue);("single"===this.inputFilterType||!M||V)&&(y>0?(window.clearTimeout(this._timer),this._timer=window.setTimeout(()=>this.callback(e,g),y)):this.callback(e,g)),this._lastSearchValue=c}this._shouldTriggerQuery=!0}updateFilterStyle(e){e?(this._filterContainerElm?.classList.add("filled"),this._filterInputElm.classList.add("filled")):(this._filterContainerElm?.classList.remove("filled"),this._filterInputElm.classList.remove("filled"))}}class Kh extends ji{constructor(e){super(e),this.translaterService=e,this.inputType="text",this.inputFilterType="compound"}}const Xa="#86bff8";class pc{constructor(e){this.translaterService=e,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this._sliderTrackFilledColor=Xa,this.sliderType="double",this.searchTerms=[],this._bindEventService=new Ft.P}get columnFilter(){return this.columnDef?.filter??{}}get currentValue(){return this._currentValue}get currentValues(){return this._currentValues}get defaultOperator(){return"compound"===this.sliderType?le.empty:"single"===this.sliderType?le.greaterThanOrEqual:this.gridOptions.defaultFilterRangeOperator||le.rangeInclusive}get filterOptions(){return{...this.gridOptions.defaultFilterOptions?.slider,...this.columnFilter?.filterOptions}}get gridOptions(){return this.grid?.getOptions()??{}}get sliderOptions(){return this._sliderOptions}get operator(){return this._operator||(this.columnFilter.operator??this.defaultOperator)}set operator(e){this._operator=e}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.operator=e.operator||"",this.searchTerms=e?.searchTerms??[],this._argFilterContainerElm=e.filterContainerElm,this._sliderTrackFilledColor=window.getComputedStyle(document.documentElement).getPropertyValue("--slick-slider-filter-filled-track-color")||Xa,this._filterElm=this.createDomFilterElement(this.searchTerms)}clear(e=!0){if(this._filterElm){this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[];const i=+(this.filterOptions?.sliderStartValue??B.SLIDER_DEFAULT_MIN_VALUE),o=+(this.filterOptions?.sliderEndValue??B.SLIDER_DEFAULT_MAX_VALUE);"double"===this.sliderType?(this._sliderLeftInputElm&&(this._sliderLeftInputElm.value=`${i}`),this._sliderRightInputElm&&(this._sliderRightInputElm.value=`${o}`),this._currentValues=[i,o],this._sliderLeftInputElm?.dispatchEvent(new Event("change")),this._sliderRightInputElm?.dispatchEvent(new Event("change"))):(this._sliderRightInputElm&&(this._sliderRightInputElm.value=`${i}`),this._selectOperatorElm&&(this._selectOperatorElm.selectedIndex=0),this._currentValue=i,this._sliderRightInputElm?.dispatchEvent(new Event("change"))),(this.filterOptions?.hideSliderNumber??this.filterOptions?.hideSliderNumbers)||("double"===this.sliderType?this.renderSliderValues(i,o):this.renderSliderValues(void 0,i)),this.updateFilterStyle(!1),this.callback(void 0,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:e,searchTerms:[]})}}destroy(){this._bindEventService.unbindAll(),this._sliderTrackElm?.remove(),this._sliderLeftInputElm?.remove(),this._sliderRightInputElm?.remove()}renderSliderValues(e,i,o=!0){const l=e?.toString()||"",c=i?.toString()||"";this._leftSliderNumberElm?.textContent&&(this._leftSliderNumberElm.textContent=l),this._rightSliderNumberElm?.textContent&&(this._rightSliderNumberElm.textContent=c),this._sliderRangeContainElm.title="double"===this.sliderType?`${l} - ${c}`:`${c}`,o&&this.grid.onHeaderRowMouseLeave.notify({column:this.columnDef,grid:this.grid})}getValues(){return"double"===this.sliderType?this._currentValues:this._currentValue}setValues(e,i,o=!1){if(e){let u=[];const g=Array.isArray(e)?e?.[0]:e;if(Array.isArray(e)&&2===e.length?u=e:"string"==typeof g&&g.indexOf("..")>0?(u=g.split(".."),this._currentValue=+(u?.[0]??0)):((0,w.isDefined)(g)||""===g)&&(this._currentValue=null===g?void 0:+g,u=[g]),"double"!==this.sliderType&&this._sliderRightInputElm)this._sliderRightInputElm.value="string"==typeof e?e:`${g}`,this.renderSliderValues(void 0,this._sliderRightInputElm.value);else if(Array.isArray(u)&&2===u.length&&!this.filterOptions?.hideSliderNumbers){const[y,M]=u;this._sliderLeftInputElm&&(this._sliderLeftInputElm.value=String(y??B.SLIDER_DEFAULT_MIN_VALUE)),this._sliderRightInputElm&&(this._sliderRightInputElm.value=String(M??B.SLIDER_DEFAULT_MAX_VALUE)),this.renderSliderValues(...u)}}else this._currentValue=void 0,this._currentValues=void 0;const l=this.getValues(),c=void 0===l?[]:Array.isArray(l)?l:[l];if(this.updateFilterStyle(c.length>0),void 0!==i&&(this.operator=i),this.operator&&this._selectOperatorElm){const u=Me(this.operator);this._selectOperatorElm.value=u}o&&this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:c,shouldTriggerQuery:!0})}createDomFilterElement(e){const i=this.columnDef?.id??"",o=+(this.columnFilter.minValue??B.SLIDER_DEFAULT_MIN_VALUE),l=+(this.columnFilter.maxValue??B.SLIDER_DEFAULT_MAX_VALUE),c=+(this.columnFilter.valueStep??B.SLIDER_DEFAULT_STEP);(0,w.emptyElement)(this._argFilterContainerElm);const u=+((Array.isArray(e)&&e?.[0])??this.filterOptions?.sliderStartValue??o),g=+((Array.isArray(e)&&e?.[1])??this.filterOptions?.sliderEndValue??l);if(this._sliderRangeContainElm=(0,w.createDomElement)("div",{className:`filter-input filter-${i} slider-input-container slider-values`,title:"double"===this.sliderType?`${u} - ${g}`:`${u}`}),this._sliderTrackElm=(0,w.createDomElement)("div",{className:"slider-track"}),"compound"===this.sliderType){const te=(0,w.createDomElement)("span",{className:"input-group-addon input-group-prepend operator"});this._selectOperatorElm=$t(this.getOperatorOptionValues(),this.grid),te.appendChild(this._selectOperatorElm)}"double"===this.sliderType&&(this._sliderLeftInputElm=(0,w.createDomElement)("input",{type:"range",className:"slider-filter-input",ariaLabel:this.columnFilter.ariaLabel??`${(0,w.toSentenceCase)(i+"")} Search Filter`,defaultValue:`${u}`,value:`${u}`,min:`${o}`,max:`${l}`,step:`${c}`}));const y="double"===this.sliderType?g:u;this._sliderRightInputElm=(0,w.createDomElement)("input",{type:"range",className:"slider-filter-input",ariaLabel:this.columnFilter.ariaLabel??`${(0,w.toSentenceCase)(i+"")} Search Filter`,defaultValue:`${y}`,value:`${y}`,min:`${o}`,max:`${l}`,step:`${c}`});const M=this.filterOptions?.hideSliderNumber??this.filterOptions?.hideSliderNumbers;if(this._divContainerFilterElm=(0,w.createDomElement)("div",{className:`${M?"":"input-group"} search-filter slider-container slider-values filter-${i}`.trim()}),this._sliderRangeContainElm.appendChild(this._sliderTrackElm),"double"===this.sliderType&&this._sliderLeftInputElm&&this._sliderRangeContainElm.appendChild(this._sliderLeftInputElm),this._sliderRangeContainElm.appendChild(this._sliderRightInputElm),M)this._divContainerFilterElm.appendChild(this._sliderRangeContainElm);else{let te;"compound"===this.sliderType&&this._selectOperatorElm?(te=(0,w.createDomElement)("span",{className:"input-group-addon input-group-prepend operator"}),te.appendChild(this._selectOperatorElm)):"double"===this.sliderType&&(te=(0,w.createDomElement)("div",{className:"input-group-addon input-group-prepend slider-range-value"}),this._leftSliderNumberElm=(0,w.createDomElement)("span",{className:`input-group-text lowest-range-${i}`,textContent:`${u}`}),te.appendChild(this._leftSliderNumberElm));const ve=(0,w.createDomElement)("div",{className:"input-group-addon input-group-append slider-range-value"});this._rightSliderNumberElm=(0,w.createDomElement)("span",{className:`input-group-text highest-range-${i}`,textContent:`${y}`},ve),te&&this._divContainerFilterElm.appendChild(te),this._divContainerFilterElm.appendChild(this._sliderRangeContainElm),this._divContainerFilterElm.appendChild(ve)}return this._sliderOptions={minValue:o,maxValue:l,step:c},this._currentValues=[u,g],Array.isArray(e)&&e.length>0&&""!==e[0]&&(this.updateFilterStyle(!0),this._currentValue=u),(void 0!==this.filterOptions.sliderStartValue||void 0!==this.columnFilter.minValue)&&(this._currentValue=u),this._argFilterContainerElm.appendChild(this._divContainerFilterElm),this.updateTrackFilledColorWhenEnabled(),this._bindEventService.bind(this._sliderTrackElm,"click",this.sliderTrackClicked.bind(this)),this._bindEventService.bind(this._sliderRightInputElm,["input","change"],this.slideRightInputChanged.bind(this)),this._bindEventService.bind(this._sliderRightInputElm,["change","mouseup","touchend"],this.onValueChanged.bind(this)),"compound"===this.sliderType&&this._selectOperatorElm?this._bindEventService.bind(this._selectOperatorElm,["change"],this.onValueChanged.bind(this)):"double"===this.sliderType&&this._sliderLeftInputElm&&(this._bindEventService.bind(this._sliderLeftInputElm,["input","change"],this.slideLeftInputChanged.bind(this)),this._bindEventService.bind(this._sliderLeftInputElm,["change","mouseup","touchend"],this.onValueChanged.bind(this))),this._divContainerFilterElm}getOperatorOptionValues(){let e;return e=this.columnFilter.compoundOperatorList?this.columnFilter.compoundOperatorList:Ge(this.gridOptions,this.translaterService),Ze(this.gridOptions,e,"numeric"),e}onValueChanged(e){const i=parseInt(this._sliderRightInputElm?.value??"",10);let o,l;if("compound"===this.sliderType||"single"===this.sliderType)"select"!==e?.target?.tagName?.toLowerCase()&&(this._currentValue=+i),o=this._currentValue,l=[o||"0"];else if("double"===this.sliderType){const u=[parseInt(this._sliderLeftInputElm?.value??"",10),i];o=u.join(".."),l=u}if(this._clearFilterTriggered)this.updateFilterStyle(!1),this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:this._clearFilterTriggered,searchTerms:[],shouldTriggerQuery:this._shouldTriggerQuery});else{const c=this._selectOperatorElm?.value??this.operator;this.updateFilterStyle(""!==o);const u=this.columnFilter.skipCompoundOperatorFilterWithNullInput??this.gridOptions.skipCompoundOperatorFilterWithNullInput,g=u&&(0,w.isDefined)(this._currentValue)||!(0,w.isDefined)(this._currentValue)&&(0,w.isDefined)(this._lastSearchValue);("compound"!==this.sliderType||!u||g)&&this.callback(e,{columnDef:this.columnDef,operator:c||"",searchTerms:l,shouldTriggerQuery:this._shouldTriggerQuery})}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.changeBothSliderFocuses(!1),this.grid.onHeaderRowMouseEnter.notify({column:this.columnDef,grid:this.grid},new wn(e)),this._lastSearchValue=o}changeBothSliderFocuses(e){const i=e?"add":"remove";this._sliderLeftInputElm?.classList[i]("focus"),this._sliderRightInputElm?.classList[i]("focus")}slideLeftInputChanged(e){const i=parseInt(this._sliderLeftInputElm?.value??"",10),o=parseInt(this._sliderRightInputElm?.value??"",10);this._sliderLeftInputElm&&o-i<=(this.filterOptions?.stopGapBetweenSliderHandles??0)&&(this._sliderLeftInputElm.value=String(i-(this.filterOptions?.stopGapBetweenSliderHandles??0))),this._sliderLeftInputElm&&this._sliderRightInputElm&&(+this._sliderLeftInputElm.value>=+this._sliderRightInputElm.value-20?(this._sliderLeftInputElm.style.zIndex="1",this._sliderRightInputElm.style.zIndex="0"):(this._sliderLeftInputElm.style.zIndex="0",this._sliderRightInputElm.style.zIndex="1")),this.sliderLeftOrRightChanged(e,"left",i,o)}slideRightInputChanged(e){const i=parseInt(this._sliderLeftInputElm?.value??"",10),o=parseInt(this._sliderRightInputElm?.value??"",10);"double"===this.sliderType&&this._sliderRightInputElm&&o-i<=(this.filterOptions?.stopGapBetweenSliderHandles??0)&&(this._sliderRightInputElm.value=String(i+(this.filterOptions?.stopGapBetweenSliderHandles??0))),this.sliderLeftOrRightChanged(e,"right",i,o)}sliderLeftOrRightChanged(e,i,o,l){let c=!0;this.updateTrackFilledColorWhenEnabled(),this.changeBothSliderFocuses(!0),this._sliderRangeContainElm.title="double"===this.sliderType?`${o} - ${l}`:`${l}`,"double"===this.sliderType&&this._sliderLeftInputElm&&this._sliderRightInputElm&&("left"===i&&o>l?(this._sliderLeftInputElm.value=`${l}`,c=!1):"right"===i&&o>l&&(this._sliderRightInputElm.value=`${o}`,c=!1)),(this.filterOptions?.hideSliderNumber??this.filterOptions?.hideSliderNumbers)||(this._leftSliderNumberElm?.textContent&&(this._leftSliderNumberElm.textContent=this._sliderLeftInputElm?.value??""),this._rightSliderNumberElm?.textContent&&(this._rightSliderNumberElm.textContent=this._sliderRightInputElm?.value??"")),c&&this.grid.onHeaderRowMouseEnter.notify({column:this.columnDef,grid:this.grid},new wn(e))}sliderTrackClicked(e){e.preventDefault();const l=100*(e.offsetX+0)/this._sliderTrackElm.offsetWidth;this._sliderRightInputElm&&"double"!==this.sliderType?(this._sliderRightInputElm.value=`${l}`,this._sliderRightInputElm.dispatchEvent(new Event("change"))):this._sliderLeftInputElm&&this._sliderRightInputElm&&(l<=50?(this._sliderLeftInputElm.value=`${l}`,this._sliderLeftInputElm.dispatchEvent(new Event("change"))):(this._sliderRightInputElm.value=`${l}`,this._sliderRightInputElm.dispatchEvent(new Event("change"))))}updateTrackFilledColorWhenEnabled(){if(this.filterOptions?.enableSliderTrackColoring&&this._sliderRightInputElm){let e=0;this._sliderLeftInputElm&&(e=(+this._sliderLeftInputElm.value-+this._sliderLeftInputElm.min)/(this.sliderOptions?.maxValue??0-+this._sliderLeftInputElm.min)*100);const i=(+this._sliderRightInputElm.value-+this._sliderRightInputElm.min)/(this.sliderOptions?.maxValue??0-+this._sliderRightInputElm.min)*100,o="linear-gradient(to right, %b %p1, %c %p1, %c %p2, %b %p2)".replace(/%b/g,"#eee").replace(/%c/g,this.filterOptions?.sliderTrackFilledColor||this._sliderTrackFilledColor||Xa).replace(/%p1/g,`${e}%`).replace(/%p2/g,`${i}%`);this._sliderTrackElm.style.background=o,this._sliderOptions.sliderTrackBackground=o}}updateFilterStyle(e){e?(this._divContainerFilterElm.classList.add("filled"),this._filterElm?.classList.add("filled")):(this._divContainerFilterElm.classList.remove("filled"),this._filterElm?.classList.remove("filled"))}}var Ja=Object.defineProperty,Kt=(d,e,i)=>((d,e,i)=>e in d?Ja(d,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[e]=i)(d,"symbol"!=typeof e?e+"":e,i),Zh=class{constructor(d){Kt(this,"_distinctEvent"),Kt(this,"_boundedEvents",[]),this._distinctEvent=d?.distinctEvent??!1}get boundedEvents(){return this._boundedEvents}dispose(){this.unbindAll(),this._boundedEvents=[]}bind(d,e,i,o,l=""){let c=Array.isArray(e)?e:[e];if("function"==typeof d?.forEach)d.forEach(u=>{for(let g of c)(!this._distinctEvent||this._distinctEvent&&!this.hasBinding(u,g))&&(u.addEventListener(g,i,o),this._boundedEvents.push({element:u,eventName:g,listener:i,groupName:l}))});else for(let u of c)(!this._distinctEvent||this._distinctEvent&&!this.hasBinding(d,u))&&(d.addEventListener(u,i,o),this._boundedEvents.push({element:d,eventName:u,listener:i,groupName:l}))}hasBinding(d,e){return this._boundedEvents.some(i=>i.element===d&&(!e||i.eventName===e))}unbind(d,e,i){if(d){let o=Array.isArray(d)?d:[d],l=Array.isArray(e)?e||"":[e||""];for(let c of o){i||(i=this._boundedEvents.find(u=>{if(u.element===c&&(!e||u.eventName===e))return u.listener}));for(let u of l)c?.removeEventListener?.(u,i)}}}unbindAll(d){if(d){let e=Array.isArray(d)?d:[d];for(let i=this._boundedEvents.length-1;i>=0;--i){let o=this._boundedEvents[i];if(e.some(l=>l===o.groupName)){let{element:l,eventName:c,listener:u}=o;this.unbind(l,c,u),this._boundedEvents.splice(i,1)}}}else for(;this._boundedEvents.length>0;){let e=this._boundedEvents.pop(),{element:i,eventName:o,listener:l}=e;this.unbind(i,o,l)}}},Cc=typeof window<"u"&&void 0!==window.multipleSelect?window.multipleSelect:{locales:{}};Cc.locales["en-US"]={formatSelectAll:()=>"[Select all]",formatAllSelected:()=>"All selected",formatCountSelected:(d,e)=>`${d} of ${e} selected`,formatNoMatchesFound:()=>"No matches found",formatOkButton:()=>"OK"};var Tr=Cc.locales,yc={name:"",placeholder:"",classes:"",classPrefix:"",data:void 0,locale:void 0,selectAll:!0,single:void 0,singleRadio:!1,multiple:!1,hideOptgroupCheckboxes:!1,multipleWidth:80,width:void 0,dropWidth:void 0,maxHeight:250,maxHeightUnit:"px",position:"bottom",displayValues:!1,displayTitle:!1,displayDelimiter:", ",minimumCountSelected:3,ellipsis:!1,isOpen:!1,keepOpen:!1,openOnHover:!1,container:null,filter:!1,filterGroup:!1,filterPlaceholder:"",filterAcceptOnEnter:!1,filterByDataLength:void 0,customFilter(d){let{text:e,label:i,search:o}=d;return(i||e||"").includes(o)},showClear:!1,autoAdjustDropHeight:!1,autoAdjustDropPosition:!1,autoAdjustDropWidthByTextSize:!1,adjustedHeightPadding:10,useSelectOptionLabel:!1,useSelectOptionLabelToHtml:!1,navigationHighlight:!0,infiniteScroll:!1,virtualScroll:!0,cssStyler:()=>null,textTemplate:d=>d.innerHTML.trim(),labelTemplate:d=>d.label,onOpen:()=>!1,onClose:()=>!1,onCheckAll:()=>!1,onUncheckAll:()=>!1,onFocus:()=>!1,onBlur:()=>!1,onOptgroupClick:()=>!1,onBeforeClick:()=>!0,onClick:()=>!1,onFilter:()=>!1,onFilterClear:()=>!1,onClear:()=>!1,onAfterCreate:()=>!1,onDestroy:()=>!1,onAfterDestroy:()=>!1,onDestroyed:()=>!1};Object.assign(yc,Tr["en-US"]);var ws={BLOCK_ROWS:50,CLUSTER_BLOCKS:4,DEFAULTS:yc,METHODS:["init","getOptions","refreshOptions","getSelects","setSelects","enable","disable","open","close","check","uncheck","checkAll","uncheckAll","checkInvert","focus","blur","refresh","destroy"]};function vc(d){let o=Object.prototype.toString.call(d).slice(8,-1).toLowerCase();return"object"===o?(()=>{let l={};for(let c in d)Object.prototype.hasOwnProperty.call(d,c)&&(l[c]=vc(d[c]));return l})():"array"===o?d.map(l=>vc(l)):d}function Za(d){return null!=d&&""!==d}function wl(d,e,i){if(Array.isArray(d))for(let o of d){if(o[e]===i||o[e]===""+ +o[e]&&+o[e]===i)return o;if("optgroup"===o.type)for(let l of o.children)if(l&&(l[e]===i||l[e]===""+ +l[e]&&+l[e]===i))return l}}function Sc(d){return Object.keys(d).forEach(e=>void 0===d[e]?delete d[e]:""),d}function Ir(d,e){if("string"!=typeof d)return d;if("function"==typeof e)return e(d);if("function"==typeof d.normalize)return d.normalize("NFD").replace(/[\u0300-\u036F]/g,"");throw new Error("[Multiple-Select-Vanilla] `normalize()` function is not defined, you can optionally provide a custom parser via the `diacriticParser` option.")}function Tc(d){let e=0,i=0,o=0,l=0,c=window.innerHeight??0,u=window.innerWidth??0,g=function eu(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}(),y=g.top,M=g.left,V=_a(d);if(V){let te=V.top??0,ve=V.left??0;i=te-y,e=c-(te-y),o=ve-M,l=u-(ve-M)}return{top:i,bottom:e,left:o,right:l}}function qa(d=""){return d.split(" ").filter(e=>e)}function Qi(d,e,i){let o=document.createElement(d);return e&&Object.keys(e).forEach(l=>{let c=e[l];"object"==typeof c?Object.assign(o[l],c):o[l]=e[l]}),i?.appendChild&&i.appendChild(o),o}function kh(d,e,i){let o=d.props?.innerHTML?function _p(d,e){let{[e]:i,...o}=d;return o}(d.props,"innerHTML"):d.props,l=Qi(d.tagName,function Ec(d,e){return"object"==typeof d?Object.fromEntries(e?Object.entries(d).filter(([i,o])=>!Za(o)&&!e.includes(i)||Za(o)):Object.entries(d).filter(([i,o])=>Za(o))):d}(o,["className","title","style"]),e),c=i;if(c||(c=l),d.props.innerHTML&&(l.innerHTML=d.props.innerHTML),d.attrs)for(let u of Object.keys(d.attrs))l.setAttribute(u,d.attrs[u]);if(d.children)for(let u of d.children)kh(u,l,c);return e?.appendChild(l),l}function qh(d){return d.hasOwnProperty("tagName")?kh(d):document.createElement("li")}function Vl(d){for(;d?.firstChild;)d.lastChild&&d.removeChild(d.lastChild);return d}function _a(d){if(!d)return;let e=d?.getBoundingClientRect?.(),i=0,o=0,l=0,c=0;return void 0!==e?.top&&void 0!==e.left&&(i=e.top+window.pageYOffset,o=e.left+window.pageXOffset,c=e.right,l=e.bottom),{top:i,left:o,bottom:l,right:c}}function Zi(d,e,i){if(!d)return 0;let o=Number.parseFloat(d.style[i]);if(!o||Number.isNaN(o)){switch(e){case"outer":o=d["width"===i?"offsetWidth":"offsetHeight"];break;case"scroll":o=d["width"===i?"scrollWidth":"scrollHeight"];break;default:o=d["width"===i?"clientWidth":"clientHeight"]}o=d.getBoundingClientRect()[i]}if(!o||Number.isNaN(o)){let l=d.style.display,c=d.style.position;d.style.display="block",d.style.position="absolute";let u=window.getComputedStyle(d)[i];o=Number.parseFloat(u),Number.isNaN(o)&&(o=0),d.style.display=l,d.style.position=c}return o||0}function kf(d,e){let i=null,o=d?.parentElement;for(;o;){let[l,c,u,g]=e.match(/^([a-z]*)([#.]{1})([a-z\-]+)$/i)||[];if(u&&g)for(let y of g.replace(u,"").split(" "))o.classList.contains(y)&&(c?o?.tagName.toLowerCase()===c&&(i=o):i=o);o=o.parentElement}return i}function ed(d,e){d?.style&&(d.style.display="none"===d.style.display&&!1!==e||!0===e?"block":"none")}var Ar=class{constructor(d){Kt(this,"clusterRows"),Kt(this,"cache"),Kt(this,"scrollEl"),Kt(this,"blockHeight"),Kt(this,"clusterHeight"),Kt(this,"contentEl"),Kt(this,"parentEl"),Kt(this,"itemHeight"),Kt(this,"lastCluster"),Kt(this,"scrollTop"),Kt(this,"dataStart"),Kt(this,"dataEnd"),Kt(this,"rows"),Kt(this,"destroy"),Kt(this,"callback"),Kt(this,"sanitizer"),this.rows=d.rows,this.scrollEl=d.scrollEl,this.contentEl=d.contentEl,this.parentEl=d.contentEl?.parentElement,this.callback=d.callback,this.cache={},this.scrollTop=this.scrollEl.scrollTop,this.initDOM(this.rows),this.scrollEl.scrollTop=this.scrollTop,this.lastCluster=0;let e=()=>{this.lastCluster!==(this.lastCluster=this.getNum())&&(this.initDOM(this.rows),this.callback())};this.scrollEl.addEventListener("scroll",e,!1),this.destroy=()=>{this.scrollEl.removeEventListener("scroll",e,!1),Vl(this.contentEl)}}reset(d){this.lastCluster=0,this.cache={},Vl(this.contentEl),this.initDOM(d)}initDOM(d){if(typeof this.clusterHeight>"u"){this.cache.scrollTop=this.scrollEl.scrollTop;let c=qh(d[0]);this.contentEl.appendChild(c),this.contentEl.appendChild(c),this.contentEl.appendChild(c),this.cache.data=[d[0]],this.getRowsHeight()}let e=this.initData(d,this.getNum()),i=this.checkChanges("data",e.rows),o=this.checkChanges("top",e.topOffset),l=this.checkChanges("bottom",e.bottomOffset);Vl(this.contentEl),i&&o?(e.topOffset&&this.contentEl.appendChild(this.getExtra("top",e.topOffset)),e.rows.forEach(c=>this.contentEl.appendChild(qh(c))),e.bottomOffset&&this.contentEl.appendChild(this.getExtra("bottom",e.bottomOffset))):l&&this.contentEl.lastChild&&(this.contentEl.lastChild.style.height=`${e.bottomOffset}px`)}getRowsHeight(){if(typeof this.itemHeight>"u"){let d=this.parentEl?.style.display||"";this.parentEl&&(""===d||"none"===d)&&(this.parentEl.style.display="block");let e=this.contentEl.children,i=e[Math.floor(e.length/2)];this.itemHeight=i.offsetHeight,this.parentEl&&(this.parentEl.style.display=d)}this.blockHeight=this.itemHeight*ws.BLOCK_ROWS,this.clusterRows=ws.BLOCK_ROWS*ws.CLUSTER_BLOCKS,this.clusterHeight=this.blockHeight*ws.CLUSTER_BLOCKS}getNum(){this.scrollTop=this.scrollEl.scrollTop;let d=(this.clusterHeight||0)-(this.blockHeight||0);return d&&Math.floor(this.scrollTop/d)||0}initData(d,e){if(d.length<ws.BLOCK_ROWS)return{topOffset:0,bottomOffset:0,rowsAbove:0,rows:d};let i=Math.max((this.clusterRows-ws.BLOCK_ROWS)*e,0),o=i+this.clusterRows,l=Math.max(i*this.itemHeight,0),c=Math.max((d.length-o)*this.itemHeight,0),u=[],g=i;l<1&&g++;for(let y=i;y<o;y++)d[y]&&u.push(d[y]);return this.dataStart=i,this.dataEnd=o,{topOffset:l,bottomOffset:c,rowsAbove:g,rows:u}}checkChanges(d,e){let i=e!==this.cache[d];return this.cache[d]=e,i}getExtra(d,e){let i=document.createElement("li");return i.className=`virtual-scroll-${d}`,e&&(i.style.height=`${e}px`),i}},Bl=".ms-select-all, ul li[data-key]",tu=class{constructor(d,e){this.elm=d,Kt(this,"_bindEventService"),Kt(this,"isAllSelected",!1),Kt(this,"isPartiallyAllSelected",!1),Kt(this,"fromHtml",!1),Kt(this,"choiceElm"),Kt(this,"selectClearElm"),Kt(this,"closeElm"),Kt(this,"clearSearchIconElm"),Kt(this,"filterText",""),Kt(this,"updateData",[]),Kt(this,"data",[]),Kt(this,"dataTotal"),Kt(this,"dropElm"),Kt(this,"okButtonElm"),Kt(this,"filterParentElm"),Kt(this,"lastFocusedItemKey",""),Kt(this,"lastMouseOverPosition",""),Kt(this,"ulElm"),Kt(this,"parentElm"),Kt(this,"labelElm"),Kt(this,"selectAllParentElm"),Kt(this,"selectAllElm"),Kt(this,"searchInputElm"),Kt(this,"selectGroupElms"),Kt(this,"selectItemElms"),Kt(this,"noResultsElm"),Kt(this,"options"),Kt(this,"selectAllName",""),Kt(this,"selectGroupName",""),Kt(this,"selectItemName",""),Kt(this,"scrolledByMouse",!1),Kt(this,"openDelayTimer"),Kt(this,"updateDataStart"),Kt(this,"updateDataEnd"),Kt(this,"virtualScroll"),Kt(this,"_currentHighlightIndex",-1),Kt(this,"_currentSelectedElm"),Kt(this,"isMoveUpRecalcRequired",!1),Kt(this,"locales",{}),this.options=Object.assign({},ws.DEFAULTS,this.elm.dataset,e),this._bindEventService=new Zh({distinctEvent:!0})}get isRenderAsHtml(){return this.options.renderOptionLabelAsHtml||this.options.useSelectOptionLabelToHtml}init(){this.initLocale(),this.initContainer(),this.initData(),this.initSelected(!0),this.initFilter(),this.initDrop(),this.initView(),this.options.onAfterCreate()}destroy(d=!0){this.elm&&this.parentElm&&(this.options.onDestroy({hardDestroy:d}),d&&this.options.onHardDestroy(),this.elm.parentElement&&this.parentElm.parentElement&&this.elm.parentElement.insertBefore(this.elm,this.parentElm.parentElement.firstChild),this.elm.classList.remove("ms-offscreen"),this._bindEventService.unbindAll(),this.virtualScroll?.destroy(),this.dropElm?.remove(),this.dropElm=void 0,this.parentElm.parentNode?.removeChild(this.parentElm),this.fromHtml&&(delete this.options.data,this.fromHtml=!1),this.options.onAfterDestroy({hardDestroy:d}),d&&(this.options.onAfterHardDestroy?.(),Object.keys(this.options).forEach(e=>delete this[e])))}initLocale(){if(this.options.locale){if("object"==typeof this.options.locale)return void Object.assign(this.options,this.options.locale);let d=window.multipleSelect.locales,e=this.options.locale.split(/-|_/);if(e[0]=e[0].toLowerCase(),e[1]&&(e[1]=e[1].toUpperCase()),d[this.options.locale])Object.assign(this.options,d[this.options.locale]);else if(d[e.join("-")])Object.assign(this.options,d[e.join("-")]);else{if(!d[e[0]])throw new Error(`[multiple-select-vanilla] invalid locales "${this.options.locale}", make sure to import it before using it`);Object.assign(this.options,d[e[0]])}}}initContainer(){let d=this.elm.getAttribute("name")||this.options.name||"";this.options.classes&&this.elm.classList.add(this.options.classes),this.options.classPrefix&&(this.elm.classList.add(this.options.classPrefix),this.options.size&&this.elm.classList.add(`${this.options.classPrefix}-${this.options.size}`)),this.elm.style.display="none",this.labelElm=this.elm.closest("label"),!this.labelElm&&this.elm.id&&(this.labelElm=document.createElement("label"),this.labelElm.htmlFor=this.elm.id),this.labelElm?.querySelector("input")&&(this.labelElm=null),typeof this.options.single>"u"&&(this.options.single=!this.elm.multiple),this.parentElm=Qi("div",{className:qa(`ms-parent ${this.elm.className||""} ${this.options.classes}`).join(" "),dataset:{test:"sel"}}),this.options.darkMode&&this.parentElm.classList.add("ms-dark-mode");let e=this.elm.getAttribute("title")||"";e&&(this.parentElm.title=e),this.options.placeholder=this.options.placeholder||this.elm.getAttribute("placeholder")||"",this.choiceElm=Qi("button",{className:"ms-choice",type:"button"},this.parentElm),this.options.labelId&&(this.choiceElm.id=this.options.labelId,this.choiceElm.setAttribute("aria-labelledby",this.options.labelId)),this.choiceElm.appendChild(Qi("span",{className:"ms-placeholder",textContent:this.options.placeholder})),this.options.showClear&&(this.selectClearElm=Qi("div",{className:"ms-icon ms-icon-close"}),this.selectClearElm.style.display="none",this.choiceElm.appendChild(this.selectClearElm)),this.choiceElm.appendChild(Qi("div",{className:"ms-icon ms-icon-caret"})),this.dropElm=Qi("div",{className:`ms-drop ${this.options.position}`,ariaExpanded:"false"},this.parentElm),this.options.darkMode&&this.dropElm.classList.add("ms-dark-mode"),d&&(this.dropElm.dataset.name=d);let i=this.elm.getAttribute("data-test")||this.options.dataTest;i&&(this.parentElm.dataset.test=i,this.dropElm.dataset.test=i),this.closeElm=this.choiceElm.querySelector(".ms-icon-close"),this.options.dropWidth&&(this.dropElm.style.width="string"==typeof this.options.dropWidth?this.options.dropWidth:`${this.options.dropWidth}px`),function _h(d,e){d.parentNode?.insertBefore(e,d.nextSibling)}(this.elm,this.parentElm),this.elm.disabled&&(this.choiceElm.classList.add("disabled"),this.choiceElm.disabled=!0),this.selectAllName=`selectAll${d}`,this.selectGroupName=`selectGroup${d}`,this.selectItemName=`selectItem${d}`,this.options.keepOpen||(this._bindEventService.unbindAll("body-click"),this._bindEventService.bind(document.body,"click",o=>{this.getEventTarget(o)===this.choiceElm||kf(this.getEventTarget(o),".ms-choice")===this.choiceElm||(this.getEventTarget(o)===this.dropElm||kf(this.getEventTarget(o),".ms-drop")!==this.dropElm&&this.getEventTarget(o)!==this.elm)&&this.options.isOpen&&this.close("body.click")},void 0,"body-click"))}initData(){let d=[];if(this.options.data){if(Array.isArray(this.options.data))this.data=this.options.data.map(e=>"string"==typeof e||"number"==typeof e?{text:e,value:e}:e);else if("object"==typeof this.options.data){for(let[e,i]of Object.entries(this.options.data))d.push({value:e,text:`${i}`});this.data=d}}else this.elm.childNodes.forEach(e=>{let i=this.initRow(e);i&&d.push(i)}),this.options.data=d,this.data=d,this.fromHtml=!0;this.dataTotal=function ka(d){let e=0;return d.forEach((i,o)=>{"optgroup"===i.type?(i._key=`group_${o}`,i.visible=typeof i.visible>"u"||i.visible,i.children.forEach((l,c)=>{l&&(l.visible=typeof l?.visible>"u"||l.visible,l.divider||(l._key=`option_${o}_${c}`,e+=1))})):(i.visible=typeof i.visible>"u"||i.visible,i.divider||(i._key=`option_${o}`,e+=1))}),e}(this.data||[])}initRow(d,e){let i={};return"option"===d.tagName?.toLowerCase()?(i.type="option",i.text=this.options.textTemplate(d),i.value=d.value,i.visible=!0,i.selected=!!d.selected,i.disabled=e||d.disabled,i.classes=d.getAttribute("class")||"",i.title=d.getAttribute("title")||"",d.dataset.value&&(i._value=d.dataset.value),Object.keys(d.dataset).length&&(i._data=d.dataset,i._data.divider&&(i.divider=i._data.divider)),i):"optgroup"===d.tagName?.toLowerCase()?(i.type="optgroup",i.label=this.options.labelTemplate(d),i.visible=!0,i.selected=!!d.selected,i.disabled=d.disabled,i.children=[],Object.keys(d.dataset).length&&(i._data=d.dataset),d.childNodes.forEach(o=>{i.children.push(this.initRow(o,i.disabled))}),i):null}initDrop(){this.initList(),this.update(!0),this.options.isOpen&&this.open(10),this.options.openOnHover&&this.parentElm&&(this._bindEventService.bind(this.parentElm,"mouseover",()=>this.open(null)),this._bindEventService.bind(this.parentElm,"mouseout",()=>this.close("hover.mouseout")))}initFilter(){if(this.filterText="",this.options.filter||!this.options.filterByDataLength)return;let d=0;for(let e of this.data||[])d+="optgroup"===e.type?e.children.length:1;this.options.filter=d>this.options.filterByDataLength}initList(){if(this.options.filter&&(this.filterParentElm=Qi("div",{className:"ms-search"},this.dropElm),this.filterParentElm.appendChild(Qi("input",{autocomplete:"off",autocapitalize:"off",spellcheck:!1,type:"text",placeholder:this.options.filterPlaceholder||"\u{1f50e}\ufe0e"})),this.options.showSearchClear&&this.filterParentElm.appendChild(Qi("span",{className:"ms-icon ms-icon-close"}))),this.options.selectAll&&!this.options.single){let d=this.elm.getAttribute("name")||this.options.name||"";this.selectAllParentElm=Qi("div",{className:"ms-select-all",dataset:{key:"select_all"}});let e=document.createElement("label"),i="ms-icon "+(this.isAllSelected?"ms-icon-check":this.isPartiallyAllSelected?"ms-icon-minus":"ms-icon-uncheck"),o=Qi("div",{className:"icon-checkbox-container"},e);Qi("input",{type:"checkbox",ariaChecked:String(this.isAllSelected),checked:this.isAllSelected,dataset:{name:`selectAll${d}`}},o),Qi("div",{className:i},o),e.appendChild(Qi("span",{textContent:this.formatSelectAll()})),this.selectAllParentElm.appendChild(e),this.dropElm?.appendChild(this.selectAllParentElm)}this.ulElm=document.createElement("ul"),this.ulElm.role="combobox",this.ulElm.ariaExpanded="false",this.ulElm.ariaMultiSelectable=String(!this.options.single),this.dropElm?.appendChild(this.ulElm),this.options.showOkButton&&!this.options.single&&(this.okButtonElm=Qi("button",{className:"ms-ok-button",type:"button",textContent:this.formatOkButton()},this.dropElm)),this.initListItems()}initListItems(){let d=0,e=this.getListRows();if(this.options.selectAll&&!this.options.single&&(d=-1),e.length>ws.BLOCK_ROWS*ws.CLUSTER_BLOCKS){let i=this.dropElm&&"none"!==this.dropElm?.style.display;!i&&this.dropElm&&(this.dropElm.style.left="-10000",this.dropElm.style.display="block",this.dropElm.ariaExpanded="true");let o=()=>{if(this.virtualScroll){this._currentHighlightIndex=0,this.updateDataStart=this.virtualScroll.dataStart+d,this.updateDataEnd=this.virtualScroll.dataEnd+d,this.updateDataStart<0&&(this.updateDataStart=0,this._currentHighlightIndex=0);let l=this.getDataLength();this.updateDataEnd>l&&(this.updateDataEnd=l),this.ulElm&&(this.isMoveUpRecalcRequired?this.recalculateArrowMove("up"):this.virtualScroll.dataStart>this.updateDataStart&&this.recalculateArrowMove("down"))}};this.ulElm&&(this.virtualScroll?this.virtualScroll.reset(e):this.virtualScroll=new Ar({rows:e,scrollEl:this.ulElm,contentEl:this.ulElm,sanitizer:this.options.sanitizer,callback:()=>{o(),this.events()}})),o(),!i&&this.dropElm&&(this.dropElm.style.left="0",this.dropElm.style.display="none",this.dropElm.ariaExpanded="false")}else this.ulElm&&(Vl(this.ulElm),e.forEach(i=>this.ulElm.appendChild(qh(i)))),this.updateDataStart=0,this.updateDataEnd=this.updateData.length;return this.events(),e}getEventTarget(d){return d.composedPath?d.composedPath()[0]:d.target}getListRows(){let d=[];return this.updateData=[],this.data?.forEach(e=>d.push(...this.initListItem(e))),this.options.infiniteScroll&&d.push({tagName:"li",props:{className:"ms-infinite-option",role:"option"}}),d.push({tagName:"li",props:{className:"ms-no-results",textContent:this.formatNoMatchesFound()}}),d}initListItem(d,e=0){let i=d?.title||"",o=this.options.multiple?"multiple":"",l=this.options.single?"radio":"checkbox",c=!!d?.selected,u=this.options.single&&!this.options.singleRadio,g="";if(!d?.visible)return[];if(this.updateData.push(d),u&&(g="hide-radio "),d.selected&&(g+="selected "),"optgroup"===d.type){let nt,Ye=[];if(this.options.hideOptgroupCheckboxes||this.options.single)nt={tagName:"span",props:{dataset:{name:this.selectGroupName,key:d._key}}};else{let rt={tagName:"input",props:{type:"checkbox",dataset:{name:this.selectGroupName,key:d._key},checked:c,disabled:d.disabled}};nt=u?rt:{tagName:"div",props:{className:"icon-checkbox-container"+("radio"===l?" radio":"")},children:[rt,{tagName:"div",props:{className:"ms-icon "+(c?"radio"===l?"ms-icon-radio":"ms-icon-check":"ms-icon-uncheck")}}]}}!g.includes("hide-radio")&&(this.options.hideOptgroupCheckboxes||this.options.single)&&(g+="hide-radio ");let et={tagName:"span",props:{}};this.applyAsTextOrHtmlWhenEnabled(et.props,d.label);let Ot={tagName:"li",props:{className:qa(`group${this.options.single||d.disabled?" disabled":""} ${g}`).join(" "),role:"option",ariaSelected:String(c),dataset:{key:d._key}},children:[{tagName:"label",props:{className:qa("optgroup"+(this.options.single||d.disabled?" disabled":"")).join(" ")},children:[nt,et]}]},gt=this.options.cssStyler(d);return gt&&(Ot.props.style=gt),Ye.push(Ot),d.children.forEach(rt=>Ye.push(...this.initListItem(rt,1))),Ye}if(g+=d.classes||"",e&&this.options.single&&(g+=`option-level-${e} `),d.divider)return[{tagName:"li",props:{className:"option-divider"}}];let y=o||g?(o+g).trim():"";d.disabled&&(y+=" disabled");let M=d.disabled?"disabled":"",V={tagName:"span",props:{}};this.applyAsTextOrHtmlWhenEnabled(V.props,d.text);let te={tagName:"input",props:{type:l,value:encodeURI(d.value),dataset:{key:d._key,name:this.selectItemName},checked:c,disabled:!!d.disabled}};d.selected&&(te.attrs={checked:"checked"});let ve={tagName:"div",props:{className:"icon-checkbox-container"+("radio"===l?" radio":"")},children:[te,{tagName:"div",props:{className:"ms-icon "+(te.props.checked?"radio"===l?"ms-icon-radio":"ms-icon-check":"ms-icon-uncheck")}}]},Ae={tagName:"li",props:{role:"option",title:i,ariaSelected:String(c),dataset:{key:d._key}},children:[{tagName:"label",props:{className:M},children:[u?te:ve,V]}]};y&&(Ae.props.className=y);let ze=this.options.cssStyler(d);return ze&&(Ae.props.style=ze),[Ae]}initSelected(d=!1){let e=0;for(let i of this.data||[])if("optgroup"===i.type){let o=i.children.filter(l=>l?.selected&&!l.disabled&&l.visible).length;i.children.length&&(i.selected=!this.options.single&&o&&o===i.children.filter(l=>l&&!l.disabled&&l.visible&&!l.divider).length),e+=o}else e+=i.selected&&!i.disabled&&i.visible?1:0;this.isAllSelected=this.data?.filter(i=>i.selected&&!i.disabled&&i.visible).length===this.data?.filter(i=>!i.disabled&&i.visible&&!i.divider).length,this.isPartiallyAllSelected=!this.isAllSelected&&e>0,d||(this.isAllSelected?this.options.onCheckAll():0===e&&this.options.onUncheckAll())}initView(){let d;window.getComputedStyle?(d=window.getComputedStyle(this.elm).width,"auto"===d&&(d=Zi(this.dropElm,"outer","width")+20)):d=Zi(this.elm,"outer","width")+20,this.parentElm.style.width=`${this.options.width||d}px`,this.elm.classList.add("ms-offscreen")}events(){this._bindEventService.unbindAll(["ok-button","search-input","select-all-checkbox","input-checkbox-list","group-checkbox-list","hover-highlight","arrow-highlight","option-list-scroll"]),this.clearSearchIconElm=this.filterParentElm?.querySelector(".ms-icon-close"),this.searchInputElm=this.dropElm?.querySelector(".ms-search input"),this.selectAllElm=this.dropElm?.querySelector(`input[data-name="${this.selectAllName}"]`),this.selectGroupElms=this.dropElm?.querySelectorAll(`input[data-name="${this.selectGroupName}"],span[data-name="${this.selectGroupName}"]`),this.selectItemElms=this.dropElm?.querySelectorAll(`input[data-name="${this.selectItemName}"]:enabled`),this.noResultsElm=this.dropElm?.querySelector(".ms-no-results");let d=e=>{e.preventDefault(),!this.getEventTarget(e).classList.contains("ms-icon-close")&&(this.options.isOpen?this.close("toggle.close"):this.open())};this.labelElm&&this._bindEventService.bind(this.labelElm,"click",e=>{"label"===this.getEventTarget(e).nodeName.toLowerCase()&&(d(e),(!this.options.filter||!this.options.isOpen)&&this.focus(),e.stopPropagation())}),this._bindEventService.bind(this.choiceElm,"click",d),this.options.onFocus&&this._bindEventService.bind(this.choiceElm,"focus",this.options.onFocus),this.options.onBlur&&this._bindEventService.bind(this.choiceElm,"blur",this.options.onBlur),this._bindEventService.bind(this.parentElm,"keydown",e=>{"Escape"===e.code&&this.handleEscapeKey()}),this.closeElm&&this._bindEventService.bind(this.closeElm,"click",e=>{e.preventDefault(),this._checkAll(!1,!0),this.initSelected(!1),this.updateSelected(),this.update(),this.options.onClear()}),this.clearSearchIconElm&&this._bindEventService.bind(this.clearSearchIconElm,"click",e=>{e.preventDefault(),this.searchInputElm&&(this.searchInputElm.value="",this.searchInputElm.focus()),this._currentHighlightIndex=-1,this.moveHighlightDown(),this.filter(),this.options.onFilterClear()}),this.searchInputElm&&(this._bindEventService.bind(this.searchInputElm,"keydown",e=>{"Tab"===e.code&&e.shiftKey&&this.close("key.shift+tab")},void 0,"search-input"),this._bindEventService.bind(this.searchInputElm,"keyup",e=>{if(this.options.filterAcceptOnEnter&&["Enter","Space"].includes(e.code)&&this.searchInputElm?.value){if(this.options.single){let i=[];this.selectItemElms?.forEach(o=>{"none"!==o.closest("li")?.style.display&&i.push(o)}),i.length&&i[0].hasAttribute("data-name")&&this.setSelects([i[0].value])}else this.selectAllElm?.click();return this.close(`key.${e.code.toLowerCase()}`),void this.focus()}this.filter()},void 0,"search-input")),this.selectAllElm&&this._bindEventService.bind(this.selectAllElm,"click",e=>this._checkAll(e.currentTarget?.checked),void 0,"select-all-checkbox"),this.okButtonElm&&this._bindEventService.bind(this.okButtonElm,"click",e=>{d(e),e.stopPropagation()},void 0,"ok-button"),this.selectGroupElms&&this._bindEventService.bind(this.selectGroupElms,"click",e=>{let i=e.currentTarget,o=i.checked,l=wl(this.data,"_key",i.dataset.key);this._checkGroup(l,o),this.options.onOptgroupClick(Sc({label:l.label,selected:l.selected,data:l._data,children:l.children.map(c=>{if(c)return Sc({text:c.text,value:c.value,selected:c.selected,disabled:c.disabled,data:c._data})})}))},void 0,"group-checkbox-list"),this.selectItemElms&&this._bindEventService.bind(this.selectItemElms,"click",e=>{let i=e.currentTarget,o=i.checked,l=wl(this.data,"_key",i.dataset.key),c=()=>{this.options.single&&this.options.isOpen&&!this.options.keepOpen&&this.close("selection")};!1!==this.options.onBeforeClick(l)?(this._check(l,o),this.options.onClick(Sc({text:l.text,value:l.value,selected:l.selected,data:l._data})),c()):c()},void 0,"input-checkbox-list"),this.lastFocusedItemKey&&this.dropElm&&this.dropElm.querySelector(`li[data-key=${this.lastFocusedItemKey}]`)?.focus(),this.options.navigationHighlight&&this.dropElm&&(this._bindEventService.bind(this.dropElm,"mouseover",e=>{let i=this.getEventTarget(e).closest(".ms-select-all")||this.getEventTarget(e).closest("li");if(this.dropElm?.contains(i)&&this.lastMouseOverPosition!==`${e.clientX}:${e.clientY}`){let o=this.dropElm?.querySelectorAll(Bl)||[],l=Array.from(o).findIndex(c=>c.dataset.key===i.dataset.key);this._currentHighlightIndex!==l&&!i.classList.contains("disabled")&&(this._currentSelectedElm=i,this._currentHighlightIndex=l,this.changeCurrentOptionHighlight(i))}this.lastMouseOverPosition=`${e.clientX}:${e.clientY}`},void 0,"hover-highlight"),this._bindEventService.bind(this.dropElm,"keydown",e=>{switch(e.key){case"ArrowUp":e.preventDefault(),this.moveHighlightUp();break;case"ArrowDown":e.preventDefault(),this.moveHighlightDown();break;case"Escape":this.handleEscapeKey();break;case"Enter":case" ":if(document.activeElement!==this.okButtonElm){let i=this.getEventTarget(e).closest(".ms-select-all")||this.getEventTarget(e).closest("li");if(" "===e.key&&this.options.filter||this.options.filterAcceptOnEnter&&!i)return;e.preventDefault(),this._currentSelectedElm?.querySelector("input")?.click(),this.options.single&&(this.choiceElm.focus(),this.lastFocusedItemKey=this.choiceElm?.dataset.key||"")}break;case"Tab":e.preventDefault(),e.shiftKey?document.activeElement===this.okButtonElm?(this.focusSelectAllOrList(),this.highlightCurrentOption()):(this.close("key.shift+tab"),this.choiceElm.focus()):(this.changeCurrentOptionHighlight(),this.okButtonElm?.focus())}},void 0,"arrow-highlight")),this.ulElm&&this.options.infiniteScroll&&this._bindEventService.bind(this.ulElm,"scroll",this.infiniteScrollHandler.bind(this),void 0,"option-list-scroll")}handleEscapeKey(){this.options.keepOpen||(this.close("key.escape"),this.choiceElm.focus())}infiniteScrollHandler(d,e,i){let o=!1;d&&this.getEventTarget(d)&&this.ulElm&&this.scrolledByMouse?this.getEventTarget(d).scrollTop+this.getEventTarget(d).clientHeight===this.ulElm.scrollHeight&&(o=!0):void 0!==e&&e+1===i&&(o=!0),o&&this.ulElm&&(this.virtualScroll?this.initListItems():this.ulElm.scrollTop=0,this._currentHighlightIndex=0,this.highlightCurrentOption())}open(d=0){return new Promise(e=>{null!==d&&d>=0?(clearTimeout(this.openDelayTimer),this.openDelayTimer=setTimeout(()=>{this.openDrop(),e()},d)):(this.openDrop(),e())})}openDrop(){if(!this.dropElm||this.choiceElm?.classList.contains("disabled"))return;if(this.options.isOpen=!0,this.parentElm.classList.add("ms-parent-open"),this.choiceElm?.querySelector("div.ms-icon-caret")?.classList.add("open"),this.dropElm.style.display="block",this.dropElm.ariaExpanded="true",this.selectAllElm?.parentElement&&(this.selectAllElm.parentElement.style.display="inline-flex"),this.noResultsElm&&(this.noResultsElm.style.display="none"),this.getDataLength()||(this.selectAllElm?.parentElement&&(this.selectAllElm.parentElement.style.display="none"),this.noResultsElm&&(this.noResultsElm.style.display="block")),this.options.container){let l,o=_a(this.dropElm);this.options.container instanceof Node?l=this.options.container:"string"==typeof this.options.container&&(l="body"===this.options.container?document.body:document.querySelector(this.options.container)),l.appendChild(this.dropElm),this.dropElm.style.top=`${o?.top??0}px`,this.dropElm.style.left=`${o?.left??0}px`,this.dropElm.style.minWidth="auto",this.dropElm.style.width=`${Zi(this.parentElm,"outer","width")}px`}let d=this.options.minHeight,e=this.options.maxHeight;"row"===this.options.maxHeightUnit&&(e=Zi(this.dropElm.querySelector("ul>li"),"outer","height")*this.options.maxHeight),this.ulElm??=this.dropElm.querySelector("ul"),this.ulElm&&(d&&(this.ulElm.style.minHeight=`${d}px`),this.ulElm.style.maxHeight=`${e}px`),this.dropElm.querySelectorAll(".multiple").forEach(o=>{o.style.width=`${this.options.multipleWidth}px`}),this.getDataLength()&&this.options.filter?(this.searchInputElm&&(this.searchInputElm.value="",this.searchInputElm.focus()),this.filter(!0)):this.focusSelectAllOrList(),this._currentHighlightIndex<0?this.moveHighlightDown():this.highlightCurrentOption(),this.options.autoAdjustDropWidthByTextSize&&this.adjustDropWidthByText();let i=this.options.position;if(this.options.autoAdjustDropHeight){if(this.options.autoAdjustDropPosition){let{bottom:o,top:l}=Tc(this.dropElm);i=o<this.dropElm.getBoundingClientRect().height&&l>o?"top":"bottom"}this.adjustDropHeight(i)}this.options.autoAdjustDropPosition&&this.adjustDropPosition(!0),this.options.onOpen()}focusSelectAllOrList(){this.selectAllElm?this.selectAllElm.focus():this.ulElm&&(this.ulElm.tabIndex=0,this.ulElm.focus())}highlightCurrentOption(){let d=this.dropElm?.querySelectorAll(Bl)||[];if(this._currentHighlightIndex<=d.length){let e=d[this._currentHighlightIndex];e&&(this.lastFocusedItemKey=e.dataset.key||"",this._currentSelectedElm=e,this.scrolledByMouse=!1,e.scrollIntoView({block:"nearest"}),this.changeCurrentOptionHighlight(e),setTimeout(()=>this.scrolledByMouse=!0,10))}}changeCurrentOptionHighlight(d){d?.classList.add("highlighted"),(this.dropElm?.querySelectorAll(".ms-select-all.highlighted, ul li[data-key].highlighted")||[]).forEach(e=>{e!==d&&e.classList.remove("highlighted")})}moveHighlightDown(){let d=this.dropElm?.querySelectorAll(Bl)||[],e=d.length;this._currentHighlightIndex<e-1?(this._currentHighlightIndex++,d[this._currentHighlightIndex]?.classList.contains("disabled")&&this.moveHighlightDown()):this.options.infiniteScroll&&this.infiniteScrollHandler(null,this._currentHighlightIndex,e),this.highlightCurrentOption()}moveHighlightUp(){let d=this.dropElm?.querySelectorAll(Bl)||[];if(this.virtualScroll&&this._currentHighlightIndex<=(this.options.single?0:1)&&this.updateDataStart>0&&this.ulElm){let i=d[this._currentHighlightIndex+(this.options.single?0:1)],o=i?.dataset.key;return this.lastFocusedItemKey=o,this.ulElm.scrollTop=this.ulElm.scrollTop-i?.getBoundingClientRect().height||10,void(this.isMoveUpRecalcRequired=!0)}this._currentHighlightIndex>0&&(this._currentHighlightIndex--,d[this._currentHighlightIndex]?.classList.contains("disabled")&&this.moveHighlightUp()),this.highlightCurrentOption()}recalculateArrowMove(d){let e=this.dropElm?.querySelectorAll(Bl)||[],i=Array.from(e).findIndex(o=>o.dataset.key===this.lastFocusedItemKey);this._currentHighlightIndex=i-1,"down"===d?this.moveHighlightDown():"up"===d&&(this.moveHighlightUp(),this.isMoveUpRecalcRequired=!1)}close(d){this.options.isOpen=!1,this.parentElm.classList.remove("ms-parent-open"),this.choiceElm?.querySelector("div.ms-icon-caret")?.classList.remove("open"),this.dropElm&&(this.dropElm.style.display="none",this.dropElm.ariaExpanded="false",this.options.container&&(this.parentElm.appendChild(this.dropElm),this.dropElm.style.top="auto",this.dropElm.style.left="auto")),this.options.onClose(d)}applyAsTextOrHtmlWhenEnabled(d,e){d||(d={}),this.isRenderAsHtml?d.innerHTML="function"==typeof this.options.sanitizer?this.options.sanitizer(e):e:d.textContent=e}update(d=!1){let e=this.getSelects(),i=this.getSelects("text");this.options.displayValues&&(i=e);let o=this.choiceElm?.querySelector("span"),l=e.length,c=null,u=()=>{if(this.options.useSelectOptionLabel||this.options.useSelectOptionLabelToHtml){let y=e.join(this.options.displayDelimiter);return this.options.useSelectOptionLabelToHtml?function Zf(d){return d.replace(/(\b)(on[a-z]+)(\s*)=([^>]*)|javascript:([^>]*)[^>]*|(<\s*)(\/*)script([<>]*).*(<\s*)(\/*)script(>*)|(&lt;|&#60;)(\/*)(script|script defer)(.*)(&#62;|&gt;|&gt;">)/gi,"")}(y):y}return i.join(this.options.displayDelimiter)};if(o){if(0===l){let y=this.options.placeholder||"";o.classList.add("ms-placeholder"),this.applyAsTextOrHtmlWhenEnabled(o,y)}else c=l<this.options.minimumCountSelected?u():this.formatAllSelected()&&l===this.dataTotal?this.formatAllSelected():this.options.ellipsis&&l>this.options.minimumCountSelected?`${i.slice(0,this.options.minimumCountSelected).join(this.options.displayDelimiter)}...`:this.formatCountSelected(l,this.dataTotal)&&l>this.options.minimumCountSelected?this.formatCountSelected(l,this.dataTotal):u();null!==c&&(o?.classList.remove("ms-placeholder"),this.applyAsTextOrHtmlWhenEnabled(o,c)),this.options.showClear&&this.selectClearElm&&(this.selectClearElm.style.display=c?"block":"none"),this.options.displayTitle&&(o.title=this.getSelects(this.options.useSelectOptionLabel||this.options.useSelectOptionLabelToHtml?"value":"text").join(this.options.displayDelimiter))}let g=this.getSelects();this.options.single?this.elm.value=g.length?g[0]:"":Array.from(this.elm.options).forEach(y=>{y.selected=g.some(M=>M===y.value)}),d||this.elm.dispatchEvent(new Event("change"))}updateSelected(d){for(let i=this.updateDataStart;i<this.updateDataEnd;i++){let o=this.updateData[i],l=this.dropElm?.querySelector(`input[data-key=${o._key}]`);if(l){l.checked=o.selected;let c=l.closest("li"),u=c?.querySelector(".icon-checkbox-container div");c&&(o.selected&&!c.classList.contains("selected")?(c.classList.add("selected"),c.ariaSelected="true",u&&(u.className="ms-icon ms-icon-"+("radio"===l.type?"radio":"check"))):o.selected||(c.classList.remove("selected"),c.ariaSelected="false",u&&(u.className="ms-icon ms-icon-uncheck")))}}let e=0===this.data?.filter(i=>i.visible).length;if(this.selectAllElm){this.selectAllElm.ariaChecked=String(this.isAllSelected);let i=this.dropElm?.querySelector(".ms-select-all .icon-checkbox-container div");if(i){let o="";o=this.isAllSelected?"ms-icon-check":this.isPartiallyAllSelected?"ms-icon-minus":"ms-icon-uncheck",i.className=`ms-icon ${o}`}this.selectAllElm.checked=this.isAllSelected,ed(this.selectAllElm.closest("li"),!e)}ed(this.noResultsElm,e),this.virtualScroll&&(this.virtualScroll.rows=d??this.getListRows())}getData(){return this.options.data}getDataLength(){return this.data?.length??0}getOptions(d=!0){let e=Object.assign({},this.options);return delete e.data,d?vc(e):this.options}refreshOptions(d){(function Qa(d,e,i=!1){let o=Object.keys(d),l=Object.keys(e);if(i&&o.length!==l.length)return!1;for(let c of o)if(l.includes(c)&&d[c]!==e[c])return!1;return!0})(this.options,d,!0)||(this.options=Object.assign(this.options,d),this.destroy(!1),this.init())}getDropElement(){return this.dropElm}getParentElement(){return this.parentElm}getSelects(d="value"){let e=[];for(let i of this.data||[])if("optgroup"===i.type){let o=i.children.filter(l=>l?.selected);if(!o.length)continue;if("value"===d||this.options.single)e.push(...o.map(l=>"value"===d&&l._value||l[d]));else{let l=[];l.push("["),l.push(i.label),l.push(`: ${o.map(c=>c[d]).join(", ")}`),l.push("]"),e.push(l.join(""))}}else i.selected&&e.push("value"===d&&i._value||i[d]);return e}setSelects(d,e="value",i=!1){let o=!1,l=c=>{for(let u of c){let g=!1;if("text"===e){let y=document.createElement("div");this.applyAsTextOrHtmlWhenEnabled(y,u.text),g=d.includes(y.textContent?.trim()??"")}else g=d.includes(u._value||u.value),!g&&u.value===""+ +u.value&&(g=d.includes(+u.value));u.selected!==g&&(o=!0),u.selected=g}};for(let c of this.data||[])l("optgroup"===c.type?c.children:[c]);o&&(this.initSelected(i),this.updateSelected(),this.update(i))}enable(){this.choiceElm&&(this.choiceElm.classList.remove("disabled"),this.choiceElm.disabled=!1)}disable(){this.choiceElm&&(this.choiceElm?.classList.add("disabled"),this.choiceElm.disabled=!0)}check(d){let e=wl(this.data,"value",d);e&&this._check(e,!0)}uncheck(d){let e=wl(this.data,"value",d);e&&this._check(e,!1)}_check(d,e){this.options.single&&this._checkAll(!1,!0),d.selected=e,this.initSelected(),this.updateSelected(),this.update()}checkAll(){this._checkAll(!0)}uncheckAll(){this._checkAll(!1)}_checkAll(d,e){for(let i of this.data||[])"optgroup"===i.type?this._checkGroup(i,d,!0):!i.disabled&&!i.divider&&(e||i.visible)&&(i.selected=d);e||(this.initSelected(),this.updateSelected(),this.update())}_checkGroup(d,e,i){d.selected=e,d.children.forEach(o=>{o&&!o.disabled&&!o.divider&&(i||o.visible)&&(o.selected=e)}),i||(this.initSelected(),this.updateSelected(),this.update())}checkInvert(){if(!this.options.single){for(let d of this.data||[])if("optgroup"===d.type)for(let e of d.children)e&&(e.divider||(e.selected=!e.selected));else d&&!d.divider&&(d.selected=!d.selected);this.initSelected(),this.updateSelected(),this.update()}}focus(){this.choiceElm?.focus(),this.options.onFocus()}blur(){this.choiceElm?.blur(),this.options.onBlur()}refresh(){this.destroy(!1),this.init()}filter(d){let e=this.searchInputElm?.value.trim()??"",i=e.toLowerCase();if(this.filterText===i)return;this.filterText=i;for(let l of this.data||[])if("optgroup"===l.type)if(this.options.filterGroup){let c=`${l?.label??""}`;if(null!=l){let u=this.options.customFilter({label:Ir(c.toString().toLowerCase(),this.options.diacriticParser),search:Ir(i,this.options.diacriticParser),originalLabel:c,originalSearch:e,row:l});l.visible=u;for(let g of l.children)g&&(g.visible=u)}}else{for(let c of l.children)if(null!=c){let u=`${c?.text??""}`;c.visible=this.options.customFilter({text:Ir(u.toString().toLowerCase(),this.options.diacriticParser),search:Ir(i,this.options.diacriticParser),originalText:u,originalSearch:e,row:c,parent:l})}l.visible=l.children.filter(c=>c?.visible).length>0}else{let c=`${l?.text??""}`;l.visible=this.options.customFilter({text:Ir(c.toString().toLowerCase(),this.options.diacriticParser),search:Ir(i,this.options.diacriticParser),originalText:c,originalSearch:e,row:l})}let o=this.initListItems();this.initSelected(d),this.updateSelected(o),d||this.options.onFilter(e)}adjustDropHeight(d){let e="top"!==d,c=(this.filterParentElm?.getBoundingClientRect().height??0)+(this.okButtonElm?.getBoundingClientRect().height??0)+(this.options.single?0:this.selectAllParentElm?.getBoundingClientRect().height??0)+5,{bottom:u,top:g}=Tc(this.parentElm),y=this.options.maxHeight;if(y=e?u-c-this.options.adjustedHeightPadding:g-c-this.options.adjustedHeightPadding,!this.options.maxHeight||this.options.maxHeight&&y<this.options.maxHeight){let M=this.dropElm?.querySelector("ul");return M&&(M.style.maxHeight=`${y}px`),!0}return!1}adjustDropPosition(d){let e="bottom";if(this.dropElm&&this.parentElm){let{bottom:i,top:o}=Tc(this.dropElm),{top:l,left:c}=_a(this.parentElm),u=this.dropElm.getBoundingClientRect().height,g=this.dropElm.getBoundingClientRect().width,y=document.body.offsetWidth||window.innerWidth,M=this.parentElm.getBoundingClientRect().width;if(i>u)e="bottom";else if(u>i&&o>i){if(this.options.container){let V=l-u;V<0&&(V=0),(V>0||d)&&(e="top",this.dropElm.style.top=`${V<0?0:V}px`)}else e="top",this.dropElm.classList.add(e);this.dropElm.classList.remove("bottom")}y-g<c&&(this.dropElm.style.left=c-(g-M)+"px")}return e}adjustDropWidthByText(){if(this.dropElm){let d=this.parentElm.scrollWidth;(this.options.dropWidth||this.options.width)&&(d=this.options.dropWidth||this.options.width||0);let e=this.dropElm.querySelector(".ms-select-all span"),i=this.dropElm.querySelector("ul"),o=26,l=e?.clientWidth??0+o,c=i.scrollHeight>i.clientHeight?this.getScrollbarWidth():0,u=0;this.dropElm.querySelectorAll("li label").forEach(g=>{g.scrollWidth>u&&(u=g.scrollWidth)}),u+=o+c,u<l&&(u=l),this.options.maxWidth&&u>this.options.maxWidth&&(u=this.options.maxWidth),this.options.minWidth&&u<this.options.minWidth&&(u=this.options.minWidth),("100%"===d||+d<u)&&(this.dropElm.style.width=`${u}px`,this.dropElm.style.maxWidth=`${u}px`)}}getScrollbarWidth(){let d=document.createElement("div");d.style.visibility="hidden",d.style.width="100px",document.body.appendChild(d);let e=d.offsetWidth;d.style.overflow="scroll";let i=document.createElement("div");i.style.width="100%",d.appendChild(i);let o=i.offsetWidth;return d.parentNode?.removeChild(d),e-o}formatAllSelected(){return this.options.allSelectedText||this.options.formatAllSelected()}formatCountSelected(d,e){return this.options.countSelectedText?this.options.countSelectedText.replace("#",`${d}`).replace("%",`${e}`):this.options.formatCountSelected(d,e)}formatNoMatchesFound(){return this.options.noMatchesFoundText||this.options.formatNoMatchesFound()}formatOkButton(){return this.options.okButtonText||this.options.formatOkButton()}formatSelectAll(){return this.options.selectAllText||this.options.formatSelectAll()}},Hl=(d,e)=>"string"==typeof d?nu(document.querySelectorAll(d),e):d instanceof Node?nu([d],e):nu(d,e);function nu(d,e){let i=Array.from(d),o=[];for(let l=0;l<i.length;l++){let c=i[l];try{void 0!==c._multipleSelect&&(c._multipleSelect.destroy(),delete c._multipleSelect),c._multipleSelect=new tu(c,e||{}),c._multipleSelect.init();let u=c._multipleSelect.getOptions(!1);u.onHardDestroy=()=>delete c._multipleSelect,u.onAfterHardDestroyed=()=>o[l]=null,o.push(c._multipleSelect)}catch(u){console.error(u)}}return 1===o.length?o[0]:o}Hl.defaults=ws.DEFAULTS,Hl.locales={...Tr},Hl.methods=ws.METHODS,typeof window<"u"&&(window.multipleSelect=Hl);class Ic{constructor(e,i,o,l=!0){this.translaterService=e,this.collectionService=i,this.rxjs=o,this._isMultipleSelect=!0,this._collectionLength=0,this._shouldTriggerQuery=!0,this.isFilled=!1,this.enableTranslateLabel=!1,this.subscriptions=[],this._isMultipleSelect=l}get collectionOptions(){return this.columnDef?.filter?.collectionOptions??{}}get columnFilter(){return this.columnDef?.filter??{}}get customStructure(){return this.columnDef?.filter?.customStructure}get gridOptions(){return this.grid?.getOptions()??{}}get defaultOperator(){return this.isMultipleSelect?le.in:le.equal}get filterOptions(){return{...this.gridOptions.defaultFilterOptions?.select,...this.columnFilter?.filterOptions}}get isMultipleSelect(){return this._isMultipleSelect}get msInstance(){return this._msInstance}get selectOptions(){return this.defaultOptions}get operator(){return this.columnFilter?.operator??this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){var i=this;if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,!this.grid||!this.columnDef||!this.columnFilter||!this.columnFilter.collection&&!this.columnFilter.collectionAsync)throw new Error("[Slickgrid-Universal] You need to pass a \"collection\" (or \"collectionAsync\") for the MultipleSelect/SingleSelect Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.multipleSelect, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }");if(this.enableTranslateLabel=this.columnFilter?.enableTranslateLabel??!1,this.labelName=this.customStructure?.label??"label",this.labelPrefixName=this.customStructure?.labelPrefix??"labelPrefix",this.labelSuffixName=this.customStructure?.labelSuffix??"labelSuffix",this.optionLabel=this.customStructure?.optionLabel??"value",this.valueName=this.customStructure?.value??"value",this.enableTranslateLabel&&(!this.translaterService||"function"!=typeof this.translaterService.translate))throw new Error('[select-filter] The Translate Service is required for the Select Filter to work correctly when "enableTranslateLabel" is set.');this._locales=this.gridOptions?.locales??B.locales,this.initMultipleSelectTemplate();let o=this.gridOptions?.defaultFilterPlaceholder||"";this.columnFilter?.placeholder&&(o=this.columnFilter.placeholder),this.defaultOptions.placeholder=o||"",this._isMultipleSelect&&this.columnDef?.filter&&(this.columnDef.filter.emptySearchTermReturnAllValues=this.columnDef.filter?.emptySearchTermReturnAllValues??!1);const l=this.columnFilter.collection||[];return new Promise(function(){var c=(0,yt.A)(function*(u,g){try{let y;i.columnFilter.collectionAsync&&!i.columnFilter.collection?(y=Wt(i.columnFilter.collectionAsync,i.columnDef,i.renderDomElement.bind(i),i.rxjs,i.subscriptions),u(y)):(y=l,i.renderDomElement(l),u(l)),(i.columnFilter.collectionAsync||i.columnFilter.enableCollectionWatch)&&(yield y??i.columnFilter.collectionAsync,i.watchCollectionChanges())}catch(y){g(y)}});return function(u,g){return c.apply(this,arguments)}}())}clear(e=!0){this._msInstance&&this._collectionLength>0&&(this._msInstance.setSelects([]),this.updateFilterStyle(!1),this.searchTerms=[],this._shouldTriggerQuery=e,this.callback(void 0,{columnDef:this.columnDef,clearFilterTriggered:!0,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0)}destroy(){"function"==typeof this._msInstance?.destroy&&this._msInstance.destroy(),this.filterElm?.remove(),ot(this.subscriptions)}getValues(){return this._msInstance?.getSelects()??[]}setValues(e,i,o=!1){void 0!==e&&this._msInstance&&(e=Array.isArray(e)?e.every(l=>(0,w.isPrimitiveValue)(l))?e.map(String):e:[e],this._msInstance.setSelects(e)),this.updateFilterStyle(this.getValues().length>0),this.operator=i||this.defaultOperator,o&&this.onTriggerEvent()}filterCollection(e){let i=e;if(this.columnFilter&&this.columnFilter.collectionFilterBy){const o=this.columnFilter.collectionFilterBy,l=this.columnFilter.collectionOptions?.filterResultAfterEachPass||null;i=this.collectionService?.filterCollection(i,o,l)||[]}return i}sortCollection(e){let i=e;if(this.columnFilter&&this.columnFilter.collectionSortBy){const o=this.columnFilter.collectionSortBy;i=this.collectionService?.sortCollection(this.columnDef,i,o,this.enableTranslateLabel)||[]}return i}watchCollectionChanges(){this.columnFilter?.collection&&(X(this.columnFilter.collection,this.watchCallback.bind(this)),k(this.columnFilter,"collection",this.propertyObserverCallback.bind(this)))}propertyObserverCallback(e){this.renderDomElement(e||[]),this.columnFilter.collection&&X(this.columnFilter.collection,this.watchCallback.bind(this))}watchCallback(e){this.renderDomElement(this.columnFilter.collection||e||[])}renderDomElement(e){if(!Array.isArray(e)&&this.collectionOptions?.collectionInsideObjectProperty&&(e=ee(e,this.collectionOptions.collectionInsideObjectProperty||"")),!Array.isArray(e))throw new Error('The "collection" passed to the Select Filter is not a valid array.');let i=[];e.length>0&&(i=[...e]),this.collectionOptions?.addBlankEntry&&Array.isArray(i)&&i.length>0&&""!==i[0][this.valueName]&&i.unshift(this.createBlankEntry()),this.collectionOptions?.addCustomFirstEntry&&Array.isArray(i)&&i.length>0&&i[0][this.valueName]!==this.collectionOptions.addCustomFirstEntry[this.valueName]&&i.unshift(this.collectionOptions.addCustomFirstEntry),this.collectionOptions?.addCustomLastEntry&&Array.isArray(i)&&i.length>0&&i[i.length-1][this.valueName]!==this.collectionOptions.addCustomLastEntry[this.valueName]&&i.push(this.collectionOptions.addCustomLastEntry);let o=i;o=this.filterCollection(o),o=this.sortCollection(o);const l=function ca(d,e,i,o,l=!1,c,u){const g=i?.id??"",y=o.getOptions(),M=("editor"===d?i?.editor:i?.filter)??{},te=(M?.collectionOptions??{})?.separatorBetweenTextLabels??"",ve=M?.enableTranslateLabel??!1,Ae=y?.enableTranslate??!1,ze=M?.enableRenderHtml??!1,Ye=M?.customStructure?.label??"label",nt=M?.customStructure?.labelPrefix??"labelPrefix",et=M?.customStructure?.labelSuffix??"labelSuffix",Ot=M?.customStructure?.optionLabel??"value",gt=M?.customStructure?.value??"value",rt=(0,w.createDomElement)("select",{className:"ms-filter search-filter"});rt.classList.add(..."filter"===d?["search-filter",`filter-${g}`]:["select-editor",`editor-${g}`]),rt.multiple=l;const Nt=[];let ln=!1;return Array.isArray(e)&&(e.every(kt=>"number"==typeof kt||"string"==typeof kt)?e.forEach(kt=>{const un={text:String(kt),value:kt};"filter"===d&&Array.isArray(u)&&(un.selected=u.findIndex(Ri=>Ri===kt)>=0),Nt.push(un),(un.selected&&l||un.selected&&!l&&""!==kt)&&(ln=!0)}):e.forEach(kt=>{if(void 0===kt||"object"==typeof kt&&void 0===kt[Ye]&&void 0===kt.labelKey)throw new Error("[Slickgrid-Universal] Select Filter/Editor collection with value/label (or value/labelKey when using Locale) is required to populate the Select list, for example:: { filter: model: Filters.multipleSelect, collection: [ { value: '1', label: 'One' } ]')");const un=kt.labelKey||kt[Ye],Ri=(kt.labelKey||ve&&c)&&un&&Ae?c?.translate(un||" "):un;let li=kt[nt]||"",Fi=kt[et]||"",mi=kt.hasOwnProperty(Ot)?kt[Ot]:"";mi?.toString&&(mi=mi.toString().replace(/"/g,"'")),li=ve&&c&&li&&"string"==typeof li?c.translate(li||" "):li,Fi=ve&&c&&Fi&&"string"==typeof Fi?c.translate(Fi||" "):Fi,mi=ve&&c&&mi&&"string"==typeof mi?c.translate(mi||" "):mi;let Ts=[li,"string"==typeof Ri||"number"==typeof Ri?Ri.toString():Ri,Fi].filter(Bs=>Bs).join(te);const Ci={text:"",value:""};ze&&(Ts=o.sanitizeHtmlString(Ts)),Ci.text=Ts;let os=kt[gt];null==os&&(os=""),"filter"===d&&Array.isArray(u)&&(Ci.selected=u.findIndex(Bs=>`${Bs}`==`${kt[gt]}`)>=0),Ci.value=`${os??""}`,Nt.push(Ci),(Ci.selected&&l||Ci.selected&&!l&&""!==kt[gt])&&(ln=!0)})),{selectElement:rt,dataCollection:Nt,hasFoundSearchTerm:ln}}("filter",o,this.columnDef,this.grid,this.isMultipleSelect,this.translaterService,this.searchTerms||[]);this.isFilled=l.hasFoundSearchTerm,this.createFilterElement(l.selectElement,l.dataCollection),this._collectionLength=o.length}createBlankEntry(){const e={[this.labelName]:"",[this.valueName]:""};return this.labelPrefixName&&(e[this.labelPrefixName]=""),this.labelSuffixName&&(e[this.labelSuffixName]=""),e}createFilterElement(e,i){const o=this.columnDef?.id??"";this.elementName=`filter-${o}`,this.defaultOptions.name=this.elementName,(0,w.emptyElement)(this.filterContainerElm),this.filterElm=e,this.filterElm.dataset.columnId=`${o}`,this.updateFilterStyle(this.isFilled),this.filterContainerElm.appendChild(e),this.filterElmOptions={...this.defaultOptions,...this.filterOptions,data:i},this._msInstance=Hl(e,this.filterElmOptions)}initMultipleSelectTemplate(){const e=this.gridOptions?.enableTranslate??!1,o={autoAdjustDropHeight:!0,autoAdjustDropPosition:!0,autoAdjustDropWidthByTextSize:!0,name:`${this.columnDef?.id??""}`,container:"body",darkMode:!!this.gridOptions.darkMode,filter:!1,maxHeight:275,single:!0,singleRadio:!0,showSearchClear:!0,renderOptionLabelAsHtml:this.columnFilter?.enableRenderHtml??!1,sanitizer:l=>this.grid.sanitizeHtmlString(l),onClose:()=>this.onTriggerEvent(),onClear:()=>this.clear()};if(this._isMultipleSelect){o.single=!1,o.singleRadio=!1,o.showOkButton=!0,o.displayTitle=!0;const l=Z(this.gridOptions);o.countSelectedText=e&&this.translaterService?.translate?this.translaterService.translate(`${l}X_OF_Y_SELECTED`):this._locales?.TEXT_X_OF_Y_SELECTED,o.allSelectedText=e&&this.translaterService?.translate?this.translaterService.translate(`${l}ALL_SELECTED`):this._locales?.TEXT_ALL_SELECTED,o.noMatchesFoundText=e&&this.translaterService?.translate?this.translaterService.translate(`${l}NO_MATCHES_FOUND`):this._locales?.TEXT_NO_MATCHES_FOUND,o.okButtonText=e&&this.translaterService?.translate?this.translaterService.translate(`${l}OK`):this._locales?.TEXT_OK,o.selectAllText=e&&this.translaterService?.translate?this.translaterService.translate(`${l}SELECT_ALL`):this._locales?.TEXT_SELECT_ALL}this.defaultOptions=o}onTriggerEvent(){if(this._msInstance){const e=this.getValues();this.updateFilterStyle(Array.isArray(e)&&e.length>1||1===e.length&&""!==e[0]),this.searchTerms=e,this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:e,shouldTriggerQuery:this._shouldTriggerQuery}),this._shouldTriggerQuery=!0}}updateFilterStyle(e){e?(this.isFilled=!0,this.filterElm?.classList.add("filled"),this._msInstance?.getParentElement()?.classList.add("filled")):(this.isFilled=!1,this.filterElm?.classList.remove("filled"),this._msInstance?.getParentElement()?.classList.remove("filled"))}}const sl={autocompleter:class Fe{constructor(e,i,o){this.translaterService=e,this.collectionService=i,this.rxjs=o,this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0,this.searchTerms=[],this.isFilled=!1,this.isItemSelected=!1,this.valueName="label",this.enableTranslateLabel=!1,this.subscriptions=[],this._bindEventService=new Ft.P}get autocompleterOptions(){return this._autocompleterOptions||{}}get collectionOptions(){return this.columnDef?.filter?.collectionOptions??{}}get collection(){return this._collection}get columnFilter(){return this.columnDef?.filter||{}}get filterDomElement(){return this._filterElm}get filterOptions(){return{...this.gridOptions.defaultFilterOptions?.autocompleter,...this.columnFilter?.filterOptions}}get customStructure(){let e=this.columnFilter?.customStructure;return!e&&(this.columnFilter?.type??this.columnDef?.type)===p.object&&this.columnDef?.dataKey&&this.columnDef?.labelKey&&(e={label:this.columnDef.labelKey,value:this.columnDef.dataKey}),e}get defaultOperator(){return le.equal}get gridOptions(){return this.grid?.getOptions()??{}}get instance(){return this._instance}get operator(){return this.columnFilter?.operator??this.defaultOperator}set operator(e){this.columnFilter&&(this.columnFilter.operator=e)}init(e){var i=this;if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this.filterContainerElm=e.filterContainerElm,!(this.grid&&this.columnDef&&this.columnFilter&&(this.columnFilter.collection||this.columnFilter.collectionAsync||this.columnFilter.filterOptions)))throw new Error("[Slickgrid-Universal] You need to pass a \"collection\" (or \"collectionAsync\") for the AutoComplete Filter to work correctly. Also each option should include a value/label pair (or value/labelKey when using Locale). For example:: { filter: model: Filters.autocompleter, collection: [{ value: true, label: 'True' }, { value: false, label: 'False'}] }");this.enableTranslateLabel=this.columnFilter?.enableTranslateLabel??!1,this.labelName=this.customStructure?.label??"label",this.valueName=this.customStructure?.value??"value",this.labelPrefixName=this.customStructure?.labelPrefix??"labelPrefix",this.labelSuffixName=this.customStructure?.labelSuffix??"labelSuffix",this._locales=this.gridOptions?.locales??B.locales;const o=this.columnFilter.collection;return this._collection=o,this.renderDomElement(o),new Promise(function(){var l=(0,yt.A)(function*(c,u){try{const g=i.columnFilter.collectionAsync;let y;g&&!i.columnFilter.collection?(y=Wt(g,i.columnDef,i.renderDomElement.bind(i),i.rxjs,i.subscriptions),c(y)):(y=o,c(o)),(g||i.columnFilter.enableCollectionWatch)&&(yield y??g,i.watchCollectionChanges())}catch(g){u(g)}});return function(c,u){return l.apply(this,arguments)}}())}clear(e=!0){this._filterElm&&(this._clearFilterTriggered=!0,this._shouldTriggerQuery=e,this.searchTerms=[],this._filterElm.value="",this._filterElm.dispatchEvent(new CustomEvent("input")),this.updateFilterStyle(!1))}destroy(){"function"==typeof this._instance?.destroy&&this._instance.destroy(),this._filterElm?.remove?.(),this._collection=void 0,this._bindEventService.unbindAll(),ot(this.subscriptions)}getValues(){return this._filterElm?.value||""}setValues(e,i,o=!1){e&&this._filterElm&&(this._filterElm.value=e),this.updateFilterStyle(""!==this.getValues()),this.operator=i||this.defaultOperator,o&&this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:[this.getValues()],shouldTriggerQuery:!0})}filterCollection(e){let i=e;if(this.columnFilter&&this.columnFilter.collectionFilterBy){const o=this.columnFilter.collectionFilterBy,l=this.columnFilter.collectionOptions&&this.columnFilter.collectionOptions.filterResultAfterEachPass||null;i=this.collectionService?.filterCollection(i,o,l)||[]}return i}sortCollection(e){let i=e;if(this.columnFilter&&this.columnFilter.collectionSortBy){const o=this.columnFilter.collectionSortBy;i=this.collectionService?.sortCollection(this.columnDef,i,o,this.enableTranslateLabel)||[]}return i}watchCollectionChanges(){this.columnFilter?.collection&&(X(this.columnFilter.collection,e=>{this.renderDomElement(this.columnFilter.collection||e||[])}),k(this.columnFilter,"collection",e=>{this.renderDomElement(e||[]),this.columnFilter.collection&&X(this.columnFilter.collection,i=>{this.renderDomElement(this.columnFilter.collection||i||[])})}))}renderDomElement(e){!Array.isArray(e)&&this.collectionOptions?.collectionInsideObjectProperty&&(e=ee(e,this.collectionOptions.collectionInsideObjectProperty||""));let i=e;i&&(i=this.filterCollection(i),i=this.sortCollection(i));const o=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this._collection=i,this._filterElm=this.createFilterElement(i,o),this._bindEventService.bind(this._filterElm,"input",this.handleOnInputChange.bind(this)),this._bindEventService.bind(this._filterElm,"blur",()=>{this.isItemSelected||this.clear()})}createFilterElement(e,i){this._collection=e;const o=this.columnDef?.id??"";(0,w.emptyElement)(this.filterContainerElm);let l=this.gridOptions?.defaultFilterPlaceholder??"";this.columnFilter?.placeholder&&(l=this.columnFilter.placeholder),this._filterElm=(0,w.createDomElement)("input",{type:"text",ariaLabel:this.columnFilter?.ariaLabel??`${(0,w.toSentenceCase)(o+"")} Search Filter`,autocomplete:"off",ariaAutoComplete:"none",placeholder:l,className:`form-control search-filter filter-${o} slick-autocomplete-container`,value:i??"",dataset:{columnid:`${o}`}});const c=i;Array.isArray(e)&&(e=e.every(g=>(0,w.isPrimitiveValue)(g))?e.map(g=>({label:g,value:g})):e.map(g=>({label:g?.[this.labelName],value:g?.[this.valueName],labelPrefix:g?.[this.labelPrefixName]??"",labelSuffix:g?.[this.labelSuffixName]??""}))),this._autocompleterOptions={input:this._filterElm,debounceWaitMs:200,className:`slick-autocomplete ${this.filterOptions?.className??""}`.trim(),emptyMsg:this.gridOptions.enableTranslate&&this.translaterService?.translate?this.translaterService.translate("NO_ELEMENTS_FOUND"):this._locales?.TEXT_NO_ELEMENTS_FOUND??"No elements found",customize:(g,y,M)=>{M.style.width=""},onSelect:g=>{this.isItemSelected=!0,this.handleSelect(g)},...this.filterOptions},this.gridOptions?.darkMode&&(this._autocompleterOptions.className+=" slick-dark-mode"),this.autocompleterOptions.className=(0,w.classNameToList)(this.autocompleterOptions.className).join(" "),this._autocompleterOptions.renderItem?.layout?(this._autocompleterOptions.className+=` autocomplete-custom-${(0,w.toKebabCase)(this._autocompleterOptions.renderItem.layout)}`,this._autocompleterOptions.render=this.renderCustomItem.bind(this)):Array.isArray(e)?this._autocompleterOptions.render=this._autocompleterOptions.render?.bind(this)??this.renderCollectionItem.bind(this):this._autocompleterOptions.render||(this._autocompleterOptions.render=this.renderRegularItem.bind(this)),this.filterOptions?.fetch?(function qt(d,e){const i=e.fetch;i&&(e.fetch=(o,l,c,u)=>{d.classList.add("slick-autocomplete-loading");const g=l;i(o,M=>{g(M),d.classList.remove("slick-autocomplete-loading")},c,u)})}(this._filterElm,this._autocompleterOptions),this._instance=Et(this._autocompleterOptions)):this._instance=Et({...this._autocompleterOptions,fetch:(g,y)=>{e&&y(e.filter(M=>(("string"==typeof M?M:M?.label)||"").toLowerCase().includes(g.toLowerCase())))}}),this._filterElm.value=c??"";const u=(0,w.createDomElement)("div",{className:"autocomplete-filter-container"});return u.appendChild(this._filterElm),u.appendChild((0,w.createDomElement)("span")),i&&this._filterElm.classList.add("filled"),this.filterContainerElm.appendChild(u),this.filterContainerElm.appendChild(document.createElement("span")),this._filterElm}handleSelect(e){if(void 0!==e){const o=this.filterOptions?.renderItem??!1,l="string"==typeof e?e:o?e[this.labelName]:e.label;let c="string"==typeof e?e:o?e[this.valueName]:e.value;c=this.trimWhitespaceWhenEnabled(c),this.updateFilterStyle(""!==c),this.setValues(l),this.callback(void 0,{columnDef:this.columnDef,operator:this.operator,searchTerms:[c],shouldTriggerQuery:this._shouldTriggerQuery}),this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}return!1}handleOnInputChange(e){let i=e?.target?.value??"";const o=this.filterOptions.triggerOnEveryKeyStroke??!1;if(i=this.trimWhitespaceWhenEnabled(i),this._clearFilterTriggered||""===i||o){const l={columnDef:this.columnDef,shouldTriggerQuery:this._shouldTriggerQuery};this._clearFilterTriggered?l.clearFilterTriggered=this._clearFilterTriggered:(l.operator=this.operator,l.searchTerms=[i]),this.updateFilterStyle(""!==i),this.callback(e,l)}this._clearFilterTriggered=!1,this._shouldTriggerQuery=!0}renderRegularItem(e){return(0,w.createDomElement)("div",{textContent:("string"==typeof e?e:e?.label??"")||""})}renderCustomItem(e){const i=this._autocompleterOptions?.renderItem?.templateCallback(e)??"",o=document.createElement("div");return this.grid.applyHtmlCode(o,i),o}renderCollectionItem(e){const i=this.columnFilter?.enableRenderHtml??!1,g=this.grid.sanitizeHtmlString((e.labelPrefix||"")+(e.label||"")+(e.labelSuffix||""))||"",y=document.createElement("div");return y[i?"innerHTML":"textContent"]=g,y}trimWhitespaceWhenEnabled(e){let i=e;return"string"==typeof e&&(this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace)&&(i=e.trim()),i}updateFilterStyle(e){this.isItemSelected=e,e?this._filterElm.classList.add("filled"):this._filterElm.classList.remove("filled")}},compoundDate:class Jo extends Ds{constructor(e){super(e),this.translaterService=e,this.inputFilterType="compound"}},compoundInput:Kh,compoundInputNumber:class Ya extends ji{constructor(e){super(e),this.translaterService=e,this.inputType="number",this.inputFilterType="compound"}},compoundInputPassword:class mc extends ji{constructor(e){super(e),this.translaterService=e,this.inputType="password",this.inputFilterType="compound"}},compoundInputText:Kh,compoundSlider:class Yh extends pc{constructor(e){super(e),this.translaterService=e,this.sliderType="compound"}},dateRange:class Xh extends Ds{constructor(e){super(e),this.translaterService=e,this.inputFilterType="range"}},input:ji,inputMask:class Jh extends ji{constructor(e){super(e),this.translaterService=e,this._inputMask="",this.inputType="text"}get inputMask(){return this._inputMask}init(e){if(!e)throw new Error('[Slickgrid-Universal] A filter must always have an "init()" with valid arguments.');if(this.grid=e.grid,this.callback=e.callback,this.columnDef=e.columnDef,this.searchTerms=(e.hasOwnProperty("searchTerms")?e.searchTerms:[])||[],this._cellContainerElm=e.filterContainerElm,this.columnDef?.params?.mask?this._inputMask=this.columnDef.params.mask:this.columnFilter?.params?.mask&&(this._inputMask=this.columnFilter.params.mask),!this._inputMask)throw new Error("[Slickgrid-Universal] The Filters.inputMask requires the mask to be passed in the filter params or the column definition params\n        for example:: this.columnDefinitions: [{ id: 'phone', field: 'phone', filter: { model: Filters.inputMask, params: { mask: '000-000-0000' }}}]");const i=Array.isArray(this.searchTerms)&&this.searchTerms.length>=0?this.searchTerms[0]:"";this.createDomFilterElement(i),this._bindEventService.bind(this._filterInputElm,["keyup","blur","change"],this.onTriggerEvent.bind(this))}onTriggerEvent(e,i=!1){let o="";if(e?.target?.value){let l=e?.target?.value??"";"string"==typeof l&&(this.gridOptions.enableFilterTrimWhiteSpace||this.columnFilter.enableTrimWhiteSpace)&&(l=l.trim());const u=this.unmaskValue(l),g=this.maskValue(u);o=u,e?.keyCode>=48&&(this._filterInputElm.value=g,e.preventDefault())}i?(this.callback(e,{columnDef:this.columnDef,clearFilterTriggered:i,shouldTriggerQuery:this._shouldTriggerQuery}),this._filterInputElm.classList.remove("filled")):(this._filterInputElm.classList.add("filled"),this.callback(e,{columnDef:this.columnDef,operator:this.operator,searchTerms:[o],shouldTriggerQuery:this._shouldTriggerQuery})),this._shouldTriggerQuery=!0}maskValue(e){let i=0,o="";return this._inputMask&&(o=this._inputMask.replace(/[09A]/gi,l=>(("0"===l||"9"===l)&&/\d+/g.test(e[i])||"A"===l.toUpperCase()&&/[^\d]+/gi.test(e[i]))&&e[i++]||"")),o}unmaskValue(e){const i=e.replace(/[^0-9a-z]*/gi,""),o=this._inputMask.replace(/[^0-9a-z]*/gi,"");let l="";for(let c=0;c<o.length;c++)i[c]&&(("0"===o[c]||"9"===o[c])&&/\d+/g.test(i[c])||"A"===o[c].toUpperCase()&&/[^\d]+/gi.test(i[c]))&&(l+=i[c]);return l}},inputNumber:class Qh extends ji{constructor(e){super(e),this.translaterService=e,this.inputType="number"}},inputPassword:class Xf extends ji{constructor(e){super(e),this.translaterService=e,this.inputType="password"}},inputText:ji,multipleSelect:class _f extends Ic{constructor(e,i,o){super(e,i,o,!0),this.translaterService=e,this.collectionService=i,this.rxjs=o}},singleSelect:class em extends Ic{constructor(e,i,o){super(e,i,o,!1),this.translaterService=e,this.collectionService=i,this.rxjs=o}},slider:class tm extends pc{constructor(e){super(e),this.translaterService=e,this.sliderType="single"}},sliderRange:class il extends pc{constructor(e){super(e),this.translaterService=e,this.sliderType="double"}}};class iu{constructor(e,i,o,l){this.config=e,this.translaterService=i,this.collectionService=o,this.rxjs=l,this._options=this.config?.options??{}}addRxJsResource(e){this.rxjs=e}createFilter(e){let i;return e?.model&&(i="function"==typeof e.model?new e.model(this.translaterService,this.collectionService,this.rxjs):e.model),!i&&this._options.defaultFilter&&(i=new this._options.defaultFilter(this.translaterService,this.collectionService,this.rxjs)),i}}const nm={alwaysShowVerticalScroll:!0,autoEdit:!1,asyncEditorLoading:!1,autoFitColumnsOnFirstLoad:!0,autoFixResizeTimeout:1500,autoFixResizeRequiredGoodCount:2,autoFixResizeWhenBrokenStyleDetected:!1,autoParseInputFilterOperator:!0,autoResize:{applyResizeToContainer:!0,calculateAvailableSizeBy:"window",bottomPadding:20,minHeight:180,minWidth:300,rightPadding:0},cellHighlightCssClass:"slick-cell-modified",checkboxSelector:{cssClass:"slick-cell-checkboxsel",width:40},columnGroupSeparator:" - ",columnPicker:{hideForceFitButton:!1,hideSyncResizeButton:!0,headerColumnValueExtractor:td},cellMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideCommandSection:!1,hideOptionSection:!1,showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},compositeEditorOptions:{labels:{cancelButtonKey:"CANCEL",cloneButtonKey:"CLONE",resetEditorButtonTooltipKey:"RESET_INPUT_VALUE",resetFormButtonKey:"RESET_FORM",massSelectionButtonKey:"APPLY_TO_SELECTION",massSelectionStatusKey:"X_OF_Y_MASS_SELECTED",massUpdateButtonKey:"APPLY_MASS_UPDATE",massUpdateStatusKey:"ALL_X_RECORDS_SELECTED",saveButtonKey:"SAVE"}},contextMenu:{autoAdjustDrop:!0,autoAlignSide:!0,hideCloseButton:!0,hideClearAllGrouping:!1,hideCollapseAllGroups:!1,hideCommandSection:!1,hideCopyCellValueCommand:!1,hideExpandAllGroups:!1,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideMenuOnScroll:!0,hideOptionSection:!1,iconCollapseAllGroupsCommand:"mdi mdi-arrow-collapse",iconExpandAllGroupsCommand:"mdi mdi-arrow-expand",iconClearGroupingCommand:"mdi mdi-close",iconCopyCellValueCommand:"mdi mdi-content-copy",iconExportCsvCommand:"mdi mdi-download",iconExportExcelCommand:"mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"mdi mdi-download",showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},customFooterOptions:{dateFormat:"YYYY-MM-DD, hh:mm a",hideRowSelectionCount:!1,hideTotalItemCount:!1,hideLastUpdateTimestamp:!0,footerHeight:25,leftContainerClass:"col-xs-12 col-sm-5",rightContainerClass:"col-xs-6 col-sm-7",metricSeparator:"|",metricTexts:{itemsKey:"ITEMS",ofKey:"OF",itemsSelectedKey:"ITEMS_SELECTED"}},customTooltip:{tooltipTextMaxLength:700,maxWidth:500},dataView:{syncGridSelection:{preserveHidden:!1,preserveHiddenOnSelectionChange:!0},syncGridSelectionWithBackendService:!1},datasetIdPropertyName:"id",defaultFilter:sl.input,defaultBackendServiceFilterTypingDebounce:500,enableFilterTrimWhiteSpace:!1,defaultFilterPlaceholder:"\u{1f50e}\ufe0e",defaultFilterRangeOperator:le.rangeInclusive,defaultColumnSortFieldId:"id",draggableGrouping:{hideToggleAllButton:!1,toggleAllButtonText:"",dropPlaceHolderTextKey:"DROP_COLUMN_HEADER_TO_GROUP_BY"},editable:!1,editorTypingDebounce:450,filterTypingDebounce:0,enableEmptyDataWarningMessage:!0,emptyDataWarning:{className:"slick-empty-data-warning",messageKey:"",hideFrozenLeftWarning:!1,hideFrozenRightWarning:!1,leftViewportMarginLeft:"40%",rightViewportMarginLeft:"40%",frozenLeftViewportMarginLeft:"0px",frozenRightViewportMarginLeft:"40%"},enableAutoResize:!0,enableAutoSizeColumns:!0,enableCellNavigation:!1,enableColumnPicker:!0,enableColumnReorder:!0,enableColumnResizeOnDoubleClick:!0,enableContextMenu:!0,enableExcelExport:!1,enableTextExport:!1,enableGridMenu:!0,enableHeaderMenu:!0,enableMouseHoverHighlightRow:!0,enableSorting:!0,enableTextSelectionOnCells:!0,explicitInitialization:!0,excelExportOptions:{addGroupIndentation:!0,autoDetectCellFormat:!0,exportWithFormatter:!1,filename:"export",format:W.xlsx,groupingColumnHeaderTitle:"Group By",groupCollapsedSymbol:"\u2b9e",groupExpandedSymbol:"\u2b9f",groupingAggregatorRowText:"",sanitizeDataExport:!0},textExportOptions:{delimiter:D.comma,exportWithFormatter:!1,filename:"export",format:W.csv,groupingColumnHeaderTitle:"Group By",groupingAggregatorRowText:"",sanitizeDataExport:!0,useUtf8WithBom:!0},eventNamingStyle:bt.i.lowerCase,forceFitColumns:!1,frozenHeaderWidthCalcDifferential:1,gridMenu:{dropSide:"left",commandLabels:{clearAllFiltersCommandKey:"CLEAR_ALL_FILTERS",clearAllSortingCommandKey:"CLEAR_ALL_SORTING",clearFrozenColumnsCommandKey:"CLEAR_PINNING",exportCsvCommandKey:"EXPORT_TO_CSV",exportExcelCommandKey:"EXPORT_TO_EXCEL",exportTextDelimitedCommandKey:"EXPORT_TO_TAB_DELIMITED",refreshDatasetCommandKey:"REFRESH_DATASET",toggleDarkModeCommandKey:"TOGGLE_DARK_MODE",toggleFilterCommandKey:"TOGGLE_FILTER_ROW",togglePreHeaderCommandKey:"TOGGLE_PRE_HEADER_ROW"},hideClearAllFiltersCommand:!1,hideClearAllSortingCommand:!1,hideClearFrozenColumnsCommand:!0,hideExportCsvCommand:!1,hideExportExcelCommand:!1,hideExportTextDelimitedCommand:!0,hideForceFitButton:!1,hideRefreshDatasetCommand:!1,hideSyncResizeButton:!0,hideToggleFilterCommand:!1,hideToggleDarkModeCommand:!0,hideTogglePreHeaderCommand:!1,iconCssClass:"mdi mdi-menu",iconClearAllFiltersCommand:"mdi mdi-filter-remove-outline",iconClearAllSortingCommand:"mdi mdi-sort-variant-off",iconClearFrozenColumnsCommand:"mdi mdi-pin-off-outline",iconExportCsvCommand:"mdi mdi-download",iconExportExcelCommand:"mdi mdi-file-excel-outline",iconExportTextDelimitedCommand:"mdi mdi-download",iconRefreshDatasetCommand:"mdi mdi-sync",iconToggleDarkModeCommand:"mdi mdi-brightness-4",iconToggleFilterCommand:"mdi mdi-flip-vertical",iconTogglePreHeaderCommand:"mdi mdi-flip-vertical",menuWidth:16,resizeOnShowHeaderRow:!0,showBulletWhenIconMissing:!0,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270",headerColumnValueExtractor:td},headerMenu:{autoAlign:!0,autoAlignOffset:4,minWidth:140,iconClearFilterCommand:"mdi mdi-filter-remove-outline",iconClearSortCommand:"mdi mdi-sort-variant-off",iconFilterShortcutSubMenu:"mdi mdi-filter-outline",iconFreezeColumns:"mdi mdi-pin-outline",iconSortAscCommand:"mdi mdi-sort-ascending",iconSortDescCommand:"mdi mdi-sort-descending",iconColumnHideCommand:"mdi mdi-close",iconColumnResizeByContentCommand:"mdi mdi-arrow-expand-horizontal",hideColumnResizeByContentCommand:!1,hideColumnHideCommand:!1,hideClearFilterCommand:!1,hideClearSortCommand:!1,hideFreezeColumnsCommand:!0,hideSortCommands:!1,subItemChevronClass:"mdi mdi-chevron-down mdi-rotate-270"},ignoreAccentOnStringFilterAndSort:!1,multiColumnSort:!0,numberedMultiColumnSort:!0,tristateMultiColumnSort:!1,sortColNumberInSeparateSpan:!0,suppressActiveCellChangeOnEdit:!1,pagination:{pageSizes:[10,15,20,25,30,40,50,75,100],pageSize:25,totalItems:0},headerRowHeight:35,rowHeight:35,topPanelHeight:30,translationNamespaceSeparator:":",resetFilterSearchValueAfterOnBeforeCancellation:!0,resizeByContentOnlyOnFirstLoad:!0,resizeByContentOptions:{alwaysRecalculateColumnWidth:!1,cellCharWidthInPx:7.8,cellPaddingWidthInPx:14,defaultRatioForStringType:.88,formatterPaddingWidthInPx:0,maxItemToInspectCellContentWidth:1e3,maxItemToInspectSingleColumnWidthByContent:5e3,widthToRemoveFromExceededWidthReadjustment:50},treeDataOptions:{exportIndentMarginLeft:5,exportIndentationLeadingChar:"\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\u034f\xb7"}};function td(d,e){let i=d?.columnPickerLabel??d?.name??"";(i instanceof HTMLElement||i instanceof DocumentFragment)&&(i=i.textContent||"");const o=d?.columnGroup||"";return o?o+(e?.columnGroupSeparator??" - ")+i:i}const Wl=(d,e,i)=>{if(Array.isArray(i)&&i.length>0){const o=i.join(", ");return(0,w.createDomElement)("span",{title:o,textContent:o})}return i},Rc=(d,e,i,o,l)=>{if(!o)return"";const c=o.params||{},u=c?.complexField??c?.complexFieldLabel??o.field;if(!u)throw new Error("For the Formatters.complexObject to work properly, you need to tell it which property of the complex object to use.\n      There are 3 ways to provide it:\n      1- via the generic \"params\" with a \"complexField\" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', params: { complexField: 'user.firstName' } }]\n      2- via the generic \"params\" with a \"complexField\" and a \"labelKey\" property on your Column Definition, example: this.columnDefs = [{ id: 'user', field: 'user', labelKey: 'firstName', params: { complexField: 'user' } }]\n      3- via the field name that includes a dot notation, example: this.columnDefs = [{ id: 'user', field: 'user.firstName'}] ");if(o.labelKey&&l.hasOwnProperty(u))return l[u]?.[o.labelKey];if("string"==typeof u&&u.indexOf(".")>0){let g=u.split(".").reduce((y,M)=>y?.hasOwnProperty(M)?y[M]:"",l);return(null==g||"object"==typeof g&&0===Object.entries(g).length&&!(g instanceof Date))&&(g=""),g}return i},Fc={arrayObjectToCsv:(d,e,i,o,l)=>{const c=o&&o.params||{},u=c.propertyNames,g=c?.includeTitle??!0;let y=c.dataContextProperty;if(y||(y=o?.field?.split(".")[0]||""),!u||!Array.isArray(u)||!y)throw new Error('Formatters.arrayObjectToCsv requires you to pass an array of "propertyNames" (declared in "params") that you want to pull the data from.\n      For example, if we have an array of user objects that have the property of firstName & lastName then we need to pass in your column definition:: { params: { propertyNames: [\'firtName\'] }}.\n      Optionally, you can also pass the "dataContextProperty" if you wish to run this on another completely different field of the dataContext object.');if(l[y]&&Array.isArray(l[y])&&Array.isArray(l[y])&&l[y].length>0){const M=[];l[y].forEach(ve=>{const Ae=[];u.forEach(ze=>{Ae.push(ve[ze])}),M.push(Ae.join(" "))});const V=M.join(", "),te=(0,w.createDomElement)("span",{textContent:V});return g&&(te.title=V),te}return i},arrayToCsv:Wl,checkmarkMaterial:(d,e,i)=>{let o=!1;const l=(0,w.isNumber)(i);return l&&(i=+i),(!0===i||l&&+i>0||"string"==typeof i&&i.length>0&&"false"!==i.toLowerCase()&&"0"!==i)&&(o=!0),o?(0,w.createDomElement)("i",{className:"mdi mdi-18px mdi-check checkmark-icon",ariaHidden:"true"}):""},complex:Rc,complexObject:Rc,collection:(d,e,i,o,l,c)=>{if(!(i&&o&&o.params&&o.params.collection&&o.params.collection.length))return i;const{params:u,params:{collection:g}}=o,y=u.customStructure?u.customStructure.label:"label",M=u.customStructure?u.customStructure.value:"value";return Array.isArray(i)?Wl(0,0,i.map(V=>ct(g,te=>te[M]===V)[y])):ct(g,V=>V[M]===i)[y]||""},collectionEditor:(d,e,i,o,l,c)=>{if(!(i&&o&&o.editor&&o.editor.collection&&o.editor.collection.length))return i;const{editor:u,editor:{collection:g}}=o,y=u.customStructure?u.customStructure.label:"label",M=u.customStructure?u.customStructure.value:"value";return Array.isArray(i)?g.every(V=>"string"==typeof V)?Wl(0,0,i.map(V=>ct(g,te=>te===V))):Wl(0,0,i.map(V=>ct(g,te=>te[M]===V)[y])):ct(g,V=>V[M]===i)[y]||""},currency:(d,e,i,o,l,c)=>{const{currencyPrefix:u,currencySuffix:g,minDecimal:y,maxDecimal:M,numberPrefix:V,numberSuffix:te,decimalSeparator:ve,thousandSeparator:Ae,wrapNegativeNumber:ze}=jn(o,c,"decimal","cell");return(0,w.isNumber)(i)?`${V}${z(i,y,M,ze,u,g,ve,Ae)}${te}`:i},dateIso:Ln(p.dateIso,"-"),dateTimeIso:Ln(p.dateTimeIso,"-"),dateTimeShortIso:Ln(p.dateTimeShortIso,"-"),dateTimeIsoAmPm:Ln(p.dateTimeIsoAmPm,"-"),dateTimeIsoAM_PM:Ln(p.dateTimeIsoAM_PM,"-"),dateEuro:Ln(p.dateEuro,"/"),dateEuroShort:Ln(p.dateEuroShort,"/"),dateTimeEuro:Ln(p.dateTimeEuro,"/"),dateTimeEuroShort:Ln(p.dateTimeEuroShort,"/"),dateTimeShortEuro:Ln(p.dateTimeShortEuro,"/"),dateTimeEuroAmPm:Ln(p.dateTimeEuroAmPm,"/"),dateTimeEuroAM_PM:Ln(p.dateTimeEuroAM_PM,"/"),dateTimeEuroShortAmPm:Ln(p.dateTimeEuroShortAmPm,"/"),dateTimeEuroShortAM_PM:Ln(p.dateTimeEuroShortAM_PM,"/"),dateUs:Ln(p.dateUs,"/"),dateTimeUs:Ln(p.dateTimeUs,"/"),dateTimeShortUs:Ln(p.dateTimeShortUs,"/"),dateTimeUsAmPm:Ln(p.dateTimeUsAmPm,"/"),dateTimeUsAM_PM:Ln(p.dateTimeUsAM_PM,"/"),dateTimeUsShort:Ln(p.dateTimeUsShort,"/"),dateTimeUsShortAmPm:Ln(p.dateTimeUsShortAmPm,"/"),dateTimeUsShortAM_PM:Ln(p.dateTimeUsShortAM_PM,"/"),dateUsShort:Ln(p.dateUsShort,"/"),dateUtc:Ln(p.dateUtc,"-"),decimal:(d,e,i,o,l,c)=>{if("ExchangeRate"==o.field&&null!=i){let Ae=i.toString().split(".");Ae.length>1&&o.params&&("0"===o.params.minDecimalActual||""==o.params.minDecimalActual||null==o.params.minDecimalActual)?(o.params.minDecimal=Ae[1].length.toString(),o.params.maxDecimal=Ae[1].length.toString()):1==Ae.length&&o.params&&(o.params.minDecimal=o.params.minDecimalActual,o.params.maxDecimal=o.params.minDecimalActual)}const{minDecimal:u,maxDecimal:g,numberPrefix:y,numberSuffix:M,decimalSeparator:V,thousandSeparator:te,wrapNegativeNumber:ve}=jn(o,c,"decimal","cell");return(0,w.isNumber)(i)?z(i,u,g,ve,y,M,V,te):i},dollar:(d,e,i,o,l,c)=>{const{minDecimal:u,maxDecimal:g,decimalSeparator:y,thousandSeparator:M,wrapNegativeNumber:V}=jn(o,c,"currency","cell");return(0,w.isNumber)(i)?z(i,u,g,V,"$","",y,M):i},dollarColored:(d,e,i,o,l,c)=>{const{minDecimal:u,maxDecimal:g,decimalSeparator:y,thousandSeparator:M,wrapNegativeNumber:V}=jn(o,c,"currency","cell");if((0,w.isNumber)(i)){const te=i>=0?"green":"red",ve=z(i,u,g,V,"$","",y,M),Ae=(0,w.createDomElement)("span",{ariaHidden:"true",textContent:ve});return Ae.style.color=te,Ae}return i},dollarColoredBold:(d,e,i,o,l,c)=>{const{minDecimal:u,maxDecimal:g,decimalSeparator:y,thousandSeparator:M,wrapNegativeNumber:V}=jn(o,c,"currency","cell");if((0,w.isNumber)(i)){const te=i>=0?"green":"red",ve=z(i,u,g,V,"$","",y,M),Ae=(0,w.createDomElement)("span",{ariaHidden:"true",textContent:ve});return Ae.style.color=te,Ae.style.fontWeight="bold",Ae}return i},hyperlink:(d,e,i,o,l,c)=>{const u=o&&o.params||{};let g=u.hyperlinkText?u.hyperlinkText:i;g=c.sanitizeHtmlString(g);let y=u.hyperlinkUrl?u.hyperlinkUrl:i;y=c.sanitizeHtmlString(y);const M=y.match(/^(http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-.,@?^=%&amp;:/~+#]*[\w\-@?^=%&amp;/~+#])?/i);return M&&Array.isArray(M)&&M.length>0?(0,w.createDomElement)("a",{href:M[0],textContent:g}):i},icon:(d,e,i,o)=>{const l=o?.params??{},c=l.iconCssClass||l.icon||l.formatterIcon;if(!c)throw new Error('[Slickgrid-Universal] When using `Formatters.icon`, you must provide the "iconCssClass" via the generic "params". (e.g.: `{ formatter: Formatters.icon, params: { iconCssClass: "mdi mdi-magnify" }}`');return(0,w.createDomElement)("i",{className:c,ariaHidden:"true",title:l.title||null})},iconBoolean:(d,e,i,o)=>{const c=(o?.params||{}).cssClass;if(!c)throw new Error('[Slickgrid-Universal] When using `Formatters.iconBoolean`, you must provide You must provide the "cssClass", e.g.: { formatter: Formatters.iconBoolean, params: { cssClass: "mdi mdi-check" }}');let u=!1;const g=!isNaN(i);return(!0===i||g&&parseFloat(i)>0||!g&&"string"==typeof i&&"false"!==i.toLowerCase()&&"0"!==i)&&(u=!0),u?(0,w.createDomElement)("i",{className:c,ariaHidden:"true"}):""},mask:(d,e,i,o,l,c)=>{const g=(o.params||{}).mask;if(!g)throw new Error('You must provide a "mask" via the generic "params" options (e.g.: { formatter: Formatters.mask, params: { mask: \'000-000\' }}');if(i){let y=0;const M=i.toString(),te=(c.getOptions()||{})?.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment;return te.textContent=g.replace(/[09A]/gi,()=>M[y++]||""),te}return i},multiple:bl,percent:(d,e,i,o,l,c)=>{const{minDecimal:u,maxDecimal:g,decimalSeparator:y,thousandSeparator:M,wrapNegativeNumber:V}=jn(o,c,"percent","cell");return(0,w.isNumber)(i)?z(100*i,u,g,V,"","%",y,M):i},percentComplete:(d,e,i,o,l,c)=>{const{minDecimal:u,maxDecimal:g,decimalSeparator:y,thousandSeparator:M,wrapNegativeNumber:V}=jn(o,c,"percent","cell");if((0,w.isNumber)(i)){const te=i<50?"red":"green",ve=z(i,u,g,V,"","%",y,M);return(0,w.createDomElement)("span",{textContent:i>100?"100%":ve,style:{color:te}})}return i},percentCompleteBar:(d,e,i)=>{if(!(0,w.isNumber)(i))return"";let o="",l=parseFloat(i);return l>100&&(l=100),o=l<30?"red":l<70?"silver":"green",(0,w.createDomElement)("span",{className:"percent-complete-bar",title:`${l}%`,style:{background:o,width:`${l}%`}})},percentCompleteBarWithText:(d,e,i)=>{if(!(0,w.isNumber)(i))return"";let o="",l=parseFloat(i);return l>100&&(l=100),o=l<30?"red":l<70?"silver":"green",(0,w.createDomElement)("div",{className:"percent-complete-bar-with-text",title:`${l}%`,textContent:`${l}%`,style:{background:o,width:`${l}%`}})},percentSymbol:(d,e,i,o,l,c)=>{const{minDecimal:u,maxDecimal:g,decimalSeparator:y,thousandSeparator:M,wrapNegativeNumber:V}=jn(o,c,"percent","cell");return(0,w.isNumber)(i)?z(i,u,g,V,"","%",y,M):i},progressBar:(d,e,i)=>{if(!(0,w.isNumber)(i))return"";let o="",l=parseFloat(i);l>100&&(l=100),o=l<30?"danger":l<70?"warning":"success";const c=(0,w.createDomElement)("div",{className:"progress"});return c.appendChild((0,w.createDomElement)("div",{className:`progress-bar progress-bar-${o} bg-${o}`,role:"progressbar",ariaValueNow:String(l),ariaValueMin:"0",ariaValueMax:"100",textContent:`${l}%`,style:{minWidth:"2em",width:`${l}%`}})),c},translate:(d,e,i,o,l,c)=>{const g=(c?.getOptions()??{}).translater||o&&o.params&&o.params.translater;if(!g||"function"!=typeof g.translate)throw new Error('"Formatters.translate" requires the Translate Service to be provided as a Grid Options "translater" (or "i18n" depending on which framework you use).\n    For example: this.gridOptions = { enableTranslate: true, translater: this.translateService }');return null!=i&&"string"!=typeof i&&(i+=""),i?g.translate(i):""},translateBoolean:(d,e,i,o,l,c)=>{const g=(c?.getOptions()??{}).translater||o&&o.params&&o.params.translater;if(!g||"function"!=typeof g.translate)throw new Error('"Formatters.translateBoolean" requires the Translate Service to be provided as a Grid Options "translater" (or "i18n" depending on which framework you use).\n    For example: this.gridOptions = { enableTranslate: true, translater: this.translateService }');return null!=i&&"string"!=typeof i&&(i+=""),i?g.translate(i.toUpperCase()):""},tree:(d,e,i,o,l,c)=>{const u=c.getOptions(),g=u?.treeDataOptions,y=g?.indentMarginLeft??15,M=g?.collapsedPropName??B.treeDataProperties.COLLAPSED_PROP,V=g?.hasChildrenPropName??B.treeDataProperties.HAS_CHILDREN_PROP,te=g?.levelPropName??B.treeDataProperties.TREE_LEVEL_PROP;let ve=i;if(ve=N(o,l,i),null==ve||void 0===l)return"";if(!l.hasOwnProperty(te))throw new Error('[Slickgrid-Universal] You must provide valid "treeDataOptions" in your Grid Options, however it seems that we could not find any tree level info on the current item datacontext row.');const Ae=l?.[te]??0,ze=document.createElement("span");ze.style.display="inline-block",ze.style.width=y*Ae+"px";const Ye=`slick-tree-level-${Ae}`;let nt="";l[V]&&(nt=l?.[M]?"collapsed":"expanded"),g?.titleFormatter&&(ve=Va(g.titleFormatter,d,e,o,l,c));const et=`slick-group-toggle ${nt}`.trim(),Ot=(0,w.createDomElement)("div",{className:et,ariaExpanded:String("expanded"===nt)}),gt=(0,w.createDomElement)("span",{className:"slick-tree-title"});c.applyHtmlCode(gt,ve),gt.setAttribute("level",Ae);const rt=u?.preventDocumentFragmentUsage?document.createElement("span"):new DocumentFragment;return rt.appendChild(ze),rt.appendChild(Ot),rt.appendChild(gt),{addClasses:Ye,html:rt}},treeParseTotals:(d,e,i,o,l,c)=>{const g=c.getOptions()?.treeDataOptions?.hasChildrenPropName??B.treeDataProperties.HAS_CHILDREN_PROP,{groupTotalsFormatter:y,treeTotalsFormatter:M,params:V}=o;if(!y&&!M)throw new Error('[Slickgrid-Universal] When using Formatters.treeParseTotals, you must provide a total formatter via "groupTotalsFormatter" or "treeTotalsFormatter".');if(l[g]&&l?.__treeTotals&&(y||M))return(M??y)(l?.__treeTotals,o,c);if(V.formatters){let te=i;for(const ve of V.formatters)!l[g]&&!l?.__treeTotals&&"function"==typeof ve&&(te=ve(d,e,te,o,l,c)||i);return te}return i},treeExport:(d,e,i,o,l,c)=>{const u=c.getOptions(),g=u?.treeDataOptions,y=g?.collapsedPropName??B.treeDataProperties.COLLAPSED_PROP,M=g?.hasChildrenPropName??B.treeDataProperties.HAS_CHILDREN_PROP,V=g?.levelPropName??B.treeDataProperties.TREE_LEVEL_PROP,te=g?.exportIndentMarginLeft??5,ve=g?.exportIndentationLeadingChar??".",Ae=g?.exportIndentationLeadingSpaceCount??3,ze=u?.excelExportOptions?.groupCollapsedSymbol??"\u2b9e",Ye=u?.excelExportOptions?.groupExpandedSymbol??"\u2b9f";let nt=i;if(nt=N(o,l,i),null==nt||void 0===l)return"";if(!l.hasOwnProperty(V))throw new Error('[Slickgrid-Universal] You must provide valid "treeDataOptions" in your Grid Options, however it seems that we could not find any tree level info on the current item datacontext row.');const et=l?.[V]??0;let Ot="",gt=0;l[M]?(Ot=l?.[y]?ze:Ye,gt=0===et?0:te*et):gt=te*(0===et?0:et+1);const rt=(0,w.addWhiteSpaces)(gt);return g?.titleFormatter&&(nt=Va(g.titleFormatter,d,e,o,l,c)),nt=`${0===et&&Ot?"":0===et?`${ve}${(0,w.addWhiteSpaces)(Ae)}`:ve}${rt}${Ot} ${nt}`,(0,w.stripTags)(nt)}};class Lc{constructor(){this.options=nm}}},38465:(qe,be,t)=>{"use strict";t.d(be,{i:()=>A,n:()=>G});var m=t(34475),A=function(J){return J.camelCase="camelCase",J.kebabCase="kebabCase",J.lowerCase="lowerCase",J.lowerCaseWithoutOnPrefix="lowerCaseWithoutOnPrefix",J}(A||{});class G{get elementSource(){return this._elementSource}set elementSource(Y){this._elementSource=Y}get subscribedEvents(){return this._subscribedEvents}get subscribedEventNames(){return this._subscribedEvents.map(Y=>Y.name)}constructor(Y){this._subscribedEvents=[],this.eventNamingStyle=A.camelCase,this._elementSource=Y||document.createElement("div")}dispose(){this.unsubscribeAll(),this._subscribedEvents=[],window.clearTimeout(this._timer),this._elementSource?.remove(),this._elementSource=null}dispatchCustomEvent(Y,oe,X=!0,k=!0,H){const ue={bubbles:X,cancelable:k};oe&&(ue.detail=oe);const q=new CustomEvent(Y,ue);return"function"==typeof H&&H(q),this._elementSource?.dispatchEvent(q)}getEventNameByNamingConvention(Y,oe){let X="";switch(this.eventNamingStyle){case A.camelCase:X=""!==oe?`${oe}${(0,m.titleCase)(Y)}`:Y;break;case A.kebabCase:X=""!==oe?`${oe}-${(0,m.toKebabCase)(Y)}`:(0,m.toKebabCase)(Y);break;case A.lowerCase:X=`${oe}${Y}`.toLowerCase();break;case A.lowerCaseWithoutOnPrefix:X=`${oe}${Y.replace(/^on/,"")}`.toLowerCase()}return X}publish(Y,oe,X,k){const H=this.getEventNameByNamingConvention(Y,"");return X?new Promise(ue=>{window.clearTimeout(this._timer),this._timer=window.setTimeout(()=>ue(this.dispatchCustomEvent(H,oe,!0,!0,k)),X)}):this.dispatchCustomEvent(H,oe,!0,!0,k)}subscribe(Y,oe){const X=this.getEventNameByNamingConvention(Y,"");return this._elementSource.addEventListener(X,k=>oe.call(null,k.detail)),this._subscribedEvents.push({name:X,listener:oe}),{unsubscribe:()=>this.unsubscribe(X,oe)}}subscribeEvent(Y,oe){const X=this.getEventNameByNamingConvention(Y,"");return this._elementSource.addEventListener(X,oe),this._subscribedEvents.push({name:X,listener:oe}),{unsubscribe:()=>this.unsubscribe(X,oe)}}unsubscribe(Y,oe,X=!0){const k=this.getEventNameByNamingConvention(Y,"");this._elementSource.removeEventListener(k,oe),X&&this.removeSubscribedEventWhenFound(Y,oe)}unsubscribeAll(Y){if(Array.isArray(Y)){let oe;do{oe=Y.pop(),oe?.dispose?oe.dispose():oe?.unsubscribe&&oe.unsubscribe()}while(oe)}else{let oe=this._subscribedEvents.pop();for(;oe;)this.unsubscribe(oe.name,oe.listener,!1),oe=this._subscribedEvents.pop()}}removeSubscribedEventWhenFound(Y,oe){const X=this._subscribedEvents.findIndex(k=>k.name===Y&&k.listener===oe);X>=0&&this._subscribedEvents.splice(X,1)}}},34475:(qe,be,t)=>{"use strict";function m(Te){let Oe=0,Xe=0,Ue=0,it=0;const Tt=window.innerHeight||0,bt=window.innerWidth||0,yt=D(),vt=yt.top,Et=yt.left,Ft=k(Te);if(Ft){const Mt=Ft.top,qt=Ft.left;Xe=Mt-vt,Ue=qt-Et,Oe=Tt-(Mt-vt+Te.clientHeight),it=bt-(qt-Et+Te.clientWidth)}return{top:Xe,bottom:Oe,left:Ue,right:it}}function A(Te,Oe,Xe){const Ue=document.createElement(Te);return Oe&&Object.keys(Oe).forEach(it=>{"innerHTML"===it&&console.warn(`[Slickgrid-Universal] For better CSP (Content Security Policy) support, do not use "innerHTML" directly in "createDomElement('${Te}', { innerHTML: 'some html'})", it is better as separate assignment: "const elm = createDomElement('span'); elm.innerHTML = 'some html';"`);const Tt=Oe[it];"object"==typeof Tt?Object.assign(Ue[it],Tt):Ue[it]=Oe[it]}),Xe?.appendChild&&Xe.appendChild(Ue),Ue}function G(Te=""){return Te.split(" ").filter(Oe=>Oe)}function J(Te){"object"==typeof Te&&Object.keys(Te).forEach(Oe=>{Array.isArray(Te[Oe])&&J(Te[Oe]),Te[Oe]instanceof HTMLElement&&(Te[Oe]=null)})}function Y(Te){for(;Te?.firstChild;)Te.removeChild(Te.firstChild);return Te}function oe(Te,Oe="innerHTML"){return Te instanceof DocumentFragment?[].map.call(Te.childNodes,Xe=>Xe[Oe]).join("")||Te.textContent||"":Te instanceof HTMLElement?Te[Oe]:String(Te??"")}function X(Te,Oe){if(!Te||!Oe)return;const Xe=Te.getBoundingClientRect(),Ue=Oe.getBoundingClientRect();return{top:Ue.top-Xe.top,right:Ue.right-Xe.right,bottom:Ue.bottom-Xe.bottom,left:Ue.left-Xe.left}}function k(Te){let Oe=0,Xe=0,Ue=0,it=0;if(!Te||!Te.getBoundingClientRect)return{top:Oe,bottom:Ue,left:Xe,right:it};const Tt=Te.getBoundingClientRect(),bt=document.documentElement;return void 0!==Tt?.top&&void 0!==Tt.left&&(Oe=Tt.top+window.pageYOffset-bt.clientTop,Xe=Tt.left+window.pageXOffset-bt.clientLeft,it=Tt.right,Ue=Tt.bottom),{top:Oe,left:Xe,bottom:Ue,right:it}}function H(Te,Oe){let Xe=0;if(Te){const it="height"===Oe?["top","bottom"]:["left","right"];Xe=Te["height"===Oe?"clientHeight":"clientWidth"];for(const Tt of it)Xe-=parseFloat(ue(Te,`padding-${Tt}`)||"")||0}return Xe}function ue(Te,Oe){return Te?window.getComputedStyle(Te).getPropertyValue(Oe):null}function q(Te,Oe){if(Te)for(const Xe of Oe){const Ue=Te.getAttribute(Xe);if(Ue)return Ue}return null}function ye(Te,Oe="auto"){return(/^[0-9]+$/i.test(`${Te}`)?+Te+"px":Te)||Oe}function re(Te){const Oe="string"==typeof Te?Te:String(Te),Xe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return(Oe||"").toString().replace(/[&<>"']/g,Ue=>Xe[Ue])}function O(Te){return Te.replace(/&#(\d+);/g,(Oe,Xe)=>String.fromCharCode(Xe))}function B(Te,Oe){const Xe=Te.length;let Ue=re(Te);if(Xe<Oe)for(let it=Xe;it<Oe;it++)Ue+="&nbsp;";return Ue}function me(Te,Oe){Te.parentNode?.insertBefore(Oe,Te.nextSibling)}function D(){return{left:window.pageXOffset||document.documentElement.scrollLeft||0,top:window.pageYOffset||document.documentElement.scrollTop||0}}t.r(be),t.d(be,{addToArrayWhenNotExists:()=>v,addWhiteSpaces:()=>E,arrayRemoveItemByIndex:()=>L,calculateAvailableSpace:()=>m,classNameToList:()=>G,createDomElement:()=>A,deepCopy:()=>I,deepMerge:()=>ie,destroyAllElementProps:()=>J,emptyElement:()=>Y,emptyObject:()=>ce,extend:()=>ne,findFirstAttribute:()=>q,findWidthOrDefault:()=>ye,getFunctionDetails:()=>Ce,getHtmlStringOutput:()=>oe,getInnerSize:()=>H,getOffset:()=>k,getOffsetRelativeToParent:()=>X,getStyleProp:()=>ue,htmlEncode:()=>re,htmlEncodeWithPadding:()=>B,htmlEntityDecode:()=>O,insertAfterElement:()=>me,isDefined:()=>se,isDefinedNumber:()=>z,isEmptyObject:()=>he,isNumber:()=>fe,isObject:()=>N,isObjectEmpty:()=>U,isPrimitiveOrHTML:()=>Z,isPrimitiveValue:()=>ee,parseBoolean:()=>Ee,removeAccentFromText:()=>Me,setDeepValue:()=>Re,stripTags:()=>_e,titleCase:()=>st,toCamelCase:()=>je,toKebabCase:()=>ct,toSentenceCase:()=>ot,toSnakeCase:()=>Pe,uniqueArray:()=>we,uniqueObjectArray:()=>w,windowScrollPosition:()=>D});const x=Object.prototype.hasOwnProperty,p=Object.prototype.toString,W=Object.defineProperty,T=Object.getOwnPropertyDescriptor,R=function(Oe){return"function"==typeof Array.isArray?Array.isArray(Oe):"[object Array]"===p.call(Oe)},le=function(Oe){if(!Oe||"[object Object]"!==p.call(Oe))return!1;const Xe=x.call(Oe,"constructor"),Ue=Oe.constructor&&Oe.constructor.prototype&&x.call(Oe.constructor.prototype,"isPrototypeOf");if(Oe.constructor&&!Xe&&!Ue)return!1;let it;for(it in Oe);return typeof it>"u"||x.call(Oe,it)},j=function(Oe,Xe){W&&"__proto__"===Xe.name?W(Oe,Xe.name,{enumerable:!0,configurable:!0,value:Xe.newValue,writable:!0}):Oe[Xe.name]=Xe.newValue},F=function(Oe,Xe){if("__proto__"===Xe){if(!x.call(Oe,Xe))return;if(T)return T(Oe,Xe).value}return Oe[Xe]};function ne(...Te){let Oe,Xe,Ue,it,Tt,bt,yt=Te[0],vt=1;const Et=Te.length;let Ft=!1;for("boolean"==typeof yt&&(Ft=yt,yt=Te[1]||{},vt=2),(null==yt||"object"!=typeof yt&&"function"!=typeof yt)&&(yt={});vt<Et;++vt)if(Oe=Te[vt],null!=Oe)for(Xe in Oe)Ue=F(yt,Xe),it=F(Oe,Xe),yt!==it&&(Ft&&it&&(le(it)||(Tt=R(it)))?(Tt?(Tt=!1,bt=Ue&&R(Ue)?Ue:[]):bt=Ue&&le(Ue)?Ue:{},j(yt,{name:Xe,newValue:ne(Ft,bt,it)})):typeof it<"u"&&j(yt,{name:Xe,newValue:it}));return yt}function v(Te,Oe,Xe="id"){let Ue=-1;Ue=Te.findIndex(Oe&&"object"==typeof Oe&&Xe in Oe?it=>it[Xe]===Oe[Xe]:it=>it===Oe),Ue<0&&Te.push(Oe)}function E(Te,Oe=" "){let Xe="";for(let Ue=0;Ue<Te;Ue++)Xe+=Oe;return Xe}function L(Te,Oe){return Te.filter((Xe,Ue)=>Oe!==Ue)}function I(Te){return Array.isArray(Te)||N(Te)?ne(!0,Array.isArray(Te)?[]:{},Te):Te}function ie(Te,...Oe){if(!Oe.length)return Te;const Xe=Oe.shift();return Te=!N(Te)&&N(Xe)?{}:Te,N(Te)&&N(Xe)&&Object.keys(Xe).forEach(Ue=>{Xe.hasOwnProperty(Ue)&&(Te[Ue]=Ue in Te?"object"!=typeof Te[Ue]||"object"!=typeof Xe[Ue]?Xe[Ue]:Te[Ue].concat&&Xe[Ue].concat?Te[Ue].concat(Xe[Ue]):ie(Te[Ue],Xe[Ue]):Xe[Ue])}),ie(Te,...Oe)}function ce(Te){return N(Te)&&Object.keys(Te).forEach(Oe=>{Te.hasOwnProperty(Oe)&&delete Te[Oe]}),Te=null,Te={}}function Ce(Te,Oe=!0){let Xe=!1;return{params:(Tt=>{const vt=Tt.toString().replace(/(\/\/.*$)|(\/\*[\s\S]*?\*\/)|(\s*=[^,)]*(('(?:\\'|[^'\r\n])*')|("(?:\\"|[^"\r\n])*"))|(\s*=[^,)]*))/gm,"");return vt.slice(vt.indexOf("(")+1,vt.indexOf(")")).match(/([^\s,]+)/g)??[]})(Te),body:(Tt=>{const bt=Tt.toString();if(Xe=bt.includes("async "),bt.replaceAll(" ","").includes("=>({")){const Et=bt.match(/(({.*}))/g)||[];return Et.length>=1?`return ${Et[0].trimStart()}`:bt}const yt=!bt.includes("{")&&bt.includes("=>"),vt=bt.substring(bt.indexOf("{")+1||bt.indexOf("=>")+2,bt.includes("}")?bt.lastIndexOf("}"):bt.length);return Oe&&yt&&!vt.startsWith("return")?"return "+vt.trimStart():vt})(Te),isAsync:Xe}}function he(Te){return null==Te||0===Object.entries(Te).length}function se(Te){return null!=Te&&""!==Te}function z(Te){return null!==Te&&!isNaN(Te)&&""!==Te}function N(Te){return!(null===Te||"object"!=typeof Te||Array.isArray(Te)||Te instanceof Date)}function ee(Te){return"boolean"==typeof Te||"number"==typeof Te||"string"==typeof Te||null==Te}function Z(Te){return Te instanceof HTMLElement||Te instanceof DocumentFragment||ee(Te)}function fe(Te,Oe=!1){return Oe?null!=Te&&"string"!=typeof Te&&!isNaN(Te):null!=Te&&""!==Te&&!isNaN(+Te)}function U(Te){return!Te||Te&&"object"==typeof Te&&0===Object.keys(Te).length}function Ee(Te){return/(true|1)/i.test(Te+"")}function Me(Te,Oe=!1){const Xe="function"==typeof Te.normalize?Te.normalize("NFD").replace(/[\u0300-\u036f]/g,""):Te;return Oe?Xe.toLowerCase():Xe}function Re(Te,Oe,Xe){if("string"==typeof Oe&&(Oe=Oe.split(".")),Oe.length>1){const Ue=Oe.shift();Te&&void 0!==Ue&&Re(Te[Ue]=se(Te[Ue])&&(Array.isArray(Te[Ue])||"[object Object]"===Object.prototype.toString.call(Te[Ue]))?Te[Ue]:{},Oe,Xe)}else Te&&Oe[0]&&(Te[Oe[0]]=Xe)}function st(Te,Oe=!1){return"string"==typeof Te?Oe?Te.replace(/\w\S*/g,Xe=>Xe.charAt(0).toUpperCase()+Xe.substring(1).toLowerCase()):Te.charAt(0).toUpperCase()+Te.slice(1):Te}function je(Te){return"string"==typeof Te?Te.replace(/(?:^\w|[A-Z]|\b\w|[\s+\-_/])/g,(Oe,Xe)=>/[\s+\-_/]/.test(Oe)?"":0===Xe?Oe.toLowerCase():Oe.toUpperCase()):Te}function ct(Te){return"string"==typeof Te?je(Te).replace(/([A-Z])|([-_])/g,"-$1").toLowerCase():Te}function ot(Te){if("string"==typeof Te){const Oe=Te.replace(/([A-Z])|([-_])/g," $1").replace(/\s+/g," ").trim();return Oe.charAt(0).toUpperCase()+Oe.slice(1)}return Te}function Pe(Te){return"string"==typeof Te?je(Te).replace(/([A-Z])/g,"_$1").toLowerCase():Te}function we(Te){return Array.isArray(Te)&&Te.length>0?Te.filter((Oe,Xe)=>Te.indexOf(Oe)>=Xe):Te}function w(Te,Oe="id"){if(Array.isArray(Te)&&Te.length>0){const Xe=[],Ue=new Map;for(const it of Te)it&&!Ue.has(it[Oe])&&(Ue.set(it[Oe],!0),Xe.push({id:it[Oe],name:it.name}));return Xe}return Te}const Le=Symbol("plaintext"),Ke=Symbol("html"),xe=Symbol("comment"),ke=/<(\w*)>/g,Ve=/<\/?([^\s/>]+)/;function _e(Te,Oe,Xe){function bt(vt){let Et=new Set;if("string"==typeof vt){let Ft;for(;Ft=ke.exec(vt);)Et.add(Ft[1])}else"function"==typeof vt[Symbol.iterator]&&(Et=new Set(vt));return Et}function yt(vt){const Et=Ve.exec(vt);return Et?Et[1].toLowerCase():null}return function Ue(vt,Et,Ft){if("string"!=typeof vt&&(fe(vt)||"boolean"==typeof vt))return String(vt);if(vt instanceof HTMLElement&&(vt=vt.innerHTML),"string"!=typeof vt&&null!=vt)throw new TypeError("'html' parameter must be a string");return function Tt(vt,Et){const Ft=Et.allowable_tags,Mt=Et.tag_replacement;let qt=Et.state,Bt=Et.tag_buffer,$t=Et.depth,fn=Et.in_quote_char,Wt="";for(let yn=0,ai=vt.length;yn<ai;yn++){const Qt=vt[yn];if(qt===Le)"<"===Qt?(qt=Ke,Bt+=Qt):Wt+=Qt;else if(qt===Ke)switch(Qt){case"<":if(fn)break;$t++;break;case">":if(fn)break;if($t){$t--;break}fn="",qt=Le,Bt+=">",Ft.has(yt(Bt))?Wt+=Bt:Wt+=Mt,Bt="";break;case'"':case"'":fn=Qt===fn?"":fn||Qt,Bt+=Qt;break;case"-":"<!-"===Bt&&(qt=xe),Bt+=Qt;break;case" ":case"\n":if("<"===Bt){qt=Le,Wt+="< ",Bt="";break}Bt+=Qt;break;default:Bt+=Qt}else qt===xe&&(">"===Qt?("--"===Bt.slice(-2)&&(qt=Le),Bt=""):Bt+=Qt)}return Et.state=qt,Et.tag_buffer=Bt,Et.depth=$t,Et.in_quote_char=fn,Wt}(vt||"",function it(vt,Et){return{allowable_tags:bt(vt),tag_replacement:Et,state:Le,tag_buffer:"",depth:0,in_quote_char:""}}(Et||"",Ft||""))}(Te,Oe,Xe)}},70807:function(qe,be,t){var m;qe.exports=(m=t(95275),t(21272),t(1236),t(26528),t(90033),function(){var A=m,J=A.lib.BlockCipher,Y=A.algo,oe=[],X=[],k=[],H=[],ue=[],q=[],ye=[],re=[],O=[],B=[];!function(){for(var x=[],p=0;p<256;p++)x[p]=p<128?p<<1:p<<1^283;var W=0,T=0;for(p=0;p<256;p++){var R=T^T<<1^T<<2^T<<3^T<<4;oe[W]=R=R>>>8^255&R^99,X[R]=W;var ne,le=x[W],j=x[le],F=x[j];k[W]=(ne=257*x[R]^16843008*R)<<24|ne>>>8,H[W]=ne<<16|ne>>>16,ue[W]=ne<<8|ne>>>24,q[W]=ne,ye[R]=(ne=16843009*F^65537*j^257*le^16843008*W)<<24|ne>>>8,re[R]=ne<<16|ne>>>16,O[R]=ne<<8|ne>>>24,B[R]=ne,W?(W=le^x[x[x[F^le]]],T^=x[x[T]]):W=T=1}}();var me=[0,1,2,4,8,16,32,64,128,27,54],D=Y.AES=J.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var p=this._keyPriorReset=this._key,W=p.words,T=p.sigBytes/4,le=4*((this._nRounds=T+6)+1),j=this._keySchedule=[],F=0;F<le;F++)F<T?j[F]=W[F]:(x=j[F-1],F%T?T>6&&F%T==4&&(x=oe[x>>>24]<<24|oe[x>>>16&255]<<16|oe[x>>>8&255]<<8|oe[255&x]):(x=oe[(x=x<<8|x>>>24)>>>24]<<24|oe[x>>>16&255]<<16|oe[x>>>8&255]<<8|oe[255&x],x^=me[F/T|0]<<24),j[F]=j[F-T]^x);for(var ne=this._invKeySchedule=[],v=0;v<le;v++){if(F=le-v,v%4)var x=j[F];else x=j[F-4];ne[v]=v<4||F<=4?x:ye[oe[x>>>24]]^re[oe[x>>>16&255]]^O[oe[x>>>8&255]]^B[oe[255&x]]}}},encryptBlock:function(x,p){this._doCryptBlock(x,p,this._keySchedule,k,H,ue,q,oe)},decryptBlock:function(x,p){var W=x[p+1];x[p+1]=x[p+3],x[p+3]=W,this._doCryptBlock(x,p,this._invKeySchedule,ye,re,O,B,X),W=x[p+1],x[p+1]=x[p+3],x[p+3]=W},_doCryptBlock:function(x,p,W,T,R,le,j,F){for(var ne=this._nRounds,v=x[p]^W[0],E=x[p+1]^W[1],L=x[p+2]^W[2],I=x[p+3]^W[3],ie=4,ce=1;ce<ne;ce++){var Ce=T[v>>>24]^R[E>>>16&255]^le[L>>>8&255]^j[255&I]^W[ie++],he=T[E>>>24]^R[L>>>16&255]^le[I>>>8&255]^j[255&v]^W[ie++],se=T[L>>>24]^R[I>>>16&255]^le[v>>>8&255]^j[255&E]^W[ie++],z=T[I>>>24]^R[v>>>16&255]^le[E>>>8&255]^j[255&L]^W[ie++];v=Ce,E=he,L=se,I=z}Ce=(F[v>>>24]<<24|F[E>>>16&255]<<16|F[L>>>8&255]<<8|F[255&I])^W[ie++],he=(F[E>>>24]<<24|F[L>>>16&255]<<16|F[I>>>8&255]<<8|F[255&v])^W[ie++],se=(F[L>>>24]<<24|F[I>>>16&255]<<16|F[v>>>8&255]<<8|F[255&E])^W[ie++],z=(F[I>>>24]<<24|F[v>>>16&255]<<16|F[E>>>8&255]<<8|F[255&L])^W[ie++],x[p]=Ce,x[p+1]=he,x[p+2]=se,x[p+3]=z},keySize:8});A.AES=J._createHelper(D)}(),m.AES)},67650:function(qe,be,t){var m;qe.exports=(m=t(95275),t(21272),t(1236),t(26528),t(90033),function(){var A=m,J=A.lib.BlockCipher;const oe=16,X=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],k=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var H={pbox:[],sbox:[]};function ue(B,me){let T=B.sbox[0][me>>24&255]+B.sbox[1][me>>16&255];return T^=B.sbox[2][me>>8&255],T+=B.sbox[3][255&me],T}function q(B,me,D){let W,x=me,p=D;for(let T=0;T<oe;++T)x^=B.pbox[T],p=ue(B,x)^p,W=x,x=p,p=W;return W=x,x=p,p=W,p^=B.pbox[oe],x^=B.pbox[oe+1],{left:x,right:p}}var O=A.algo.Blowfish=J.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var B=this._keyPriorReset=this._key;!function re(B,me,D){for(let R=0;R<4;R++){B.sbox[R]=[];for(let le=0;le<256;le++)B.sbox[R][le]=k[R][le]}let x=0;for(let R=0;R<oe+2;R++)B.pbox[R]=X[R]^me[x],x++,x>=D&&(x=0);let p=0,W=0,T=0;for(let R=0;R<oe+2;R+=2)T=q(B,p,W),p=T.left,W=T.right,B.pbox[R]=p,B.pbox[R+1]=W;for(let R=0;R<4;R++)for(let le=0;le<256;le+=2)T=q(B,p,W),p=T.left,W=T.right,B.sbox[R][le]=p,B.sbox[R][le+1]=W;return!0}(H,B.words,B.sigBytes/4)}},encryptBlock:function(B,me){var D=q(H,B[me],B[me+1]);B[me]=D.left,B[me+1]=D.right},decryptBlock:function(B,me){var D=function ye(B,me,D){let W,x=me,p=D;for(let T=oe+1;T>1;--T)x^=B.pbox[T],p=ue(B,x)^p,W=x,x=p,p=W;return W=x,x=p,p=W,p^=B.pbox[1],x^=B.pbox[0],{left:x,right:p}}(H,B[me],B[me+1]);B[me]=D.left,B[me+1]=D.right},blockSize:2,keySize:4,ivSize:2});A.Blowfish=J._createHelper(O)}(),m.Blowfish)},90033:function(qe,be,t){var G,J,Y,oe,X,k,ue,ye,re,B,me,D,p,T,le,j,ne,v,m;qe.exports=(m=t(95275),t(26528),void(m.lib.Cipher||(G=m,J=G.lib,Y=J.Base,oe=J.WordArray,X=J.BufferedBlockAlgorithm,k=G.enc,ue=k.Base64,ye=G.algo.EvpKDF,re=J.Cipher=X.extend({cfg:Y.extend(),createEncryptor:function(E,L){return this.create(this._ENC_XFORM_MODE,E,L)},createDecryptor:function(E,L){return this.create(this._DEC_XFORM_MODE,E,L)},init:function(E,L,I){this.cfg=this.cfg.extend(I),this._xformMode=E,this._key=L,this.reset()},reset:function(){X.reset.call(this),this._doReset()},process:function(E){return this._append(E),this._process()},finalize:function(E){return E&&this._append(E),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function E(L){return"string"==typeof L?v:j}return function(L){return{encrypt:function(I,ie,ce){return E(ie).encrypt(L,I,ie,ce)},decrypt:function(I,ie,ce){return E(ie).decrypt(L,I,ie,ce)}}}}()}),J.StreamCipher=re.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),B=G.mode={},me=J.BlockCipherMode=Y.extend({createEncryptor:function(E,L){return this.Encryptor.create(E,L)},createDecryptor:function(E,L){return this.Decryptor.create(E,L)},init:function(E,L){this._cipher=E,this._iv=L}}),D=B.CBC=function(){var E=me.extend();function L(I,ie,ce){var Ce,he=this._iv;he?(Ce=he,this._iv=undefined):Ce=this._prevBlock;for(var se=0;se<ce;se++)I[ie+se]^=Ce[se]}return E.Encryptor=E.extend({processBlock:function(I,ie){var ce=this._cipher,Ce=ce.blockSize;L.call(this,I,ie,Ce),ce.encryptBlock(I,ie),this._prevBlock=I.slice(ie,ie+Ce)}}),E.Decryptor=E.extend({processBlock:function(I,ie){var ce=this._cipher,Ce=ce.blockSize,he=I.slice(ie,ie+Ce);ce.decryptBlock(I,ie),L.call(this,I,ie,Ce),this._prevBlock=he}}),E}(),p=(G.pad={}).Pkcs7={pad:function(E,L){for(var I=4*L,ie=I-E.sigBytes%I,ce=ie<<24|ie<<16|ie<<8|ie,Ce=[],he=0;he<ie;he+=4)Ce.push(ce);var se=oe.create(Ce,ie);E.concat(se)},unpad:function(E){E.sigBytes-=255&E.words[E.sigBytes-1>>>2]}},J.BlockCipher=re.extend({cfg:re.cfg.extend({mode:D,padding:p}),reset:function(){var E;re.reset.call(this);var L=this.cfg,I=L.iv,ie=L.mode;this._xformMode==this._ENC_XFORM_MODE?E=ie.createEncryptor:(E=ie.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==E?this._mode.init(this,I&&I.words):(this._mode=E.call(ie,this,I&&I.words),this._mode.__creator=E)},_doProcessBlock:function(E,L){this._mode.processBlock(E,L)},_doFinalize:function(){var E,L=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(L.pad(this._data,this.blockSize),E=this._process(!0)):(E=this._process(!0),L.unpad(E)),E},blockSize:4}),T=J.CipherParams=Y.extend({init:function(E){this.mixIn(E)},toString:function(E){return(E||this.formatter).stringify(this)}}),le=(G.format={}).OpenSSL={stringify:function(E){var I=E.ciphertext,ie=E.salt;return(ie?oe.create([1398893684,1701076831]).concat(ie).concat(I):I).toString(ue)},parse:function(E){var L,I=ue.parse(E),ie=I.words;return 1398893684==ie[0]&&1701076831==ie[1]&&(L=oe.create(ie.slice(2,4)),ie.splice(0,4),I.sigBytes-=16),T.create({ciphertext:I,salt:L})}},j=J.SerializableCipher=Y.extend({cfg:Y.extend({format:le}),encrypt:function(E,L,I,ie){ie=this.cfg.extend(ie);var ce=E.createEncryptor(I,ie),Ce=ce.finalize(L),he=ce.cfg;return T.create({ciphertext:Ce,key:I,iv:he.iv,algorithm:E,mode:he.mode,padding:he.padding,blockSize:E.blockSize,formatter:ie.format})},decrypt:function(E,L,I,ie){return ie=this.cfg.extend(ie),L=this._parse(L,ie.format),E.createDecryptor(I,ie).finalize(L.ciphertext)},_parse:function(E,L){return"string"==typeof E?L.parse(E,this):E}}),ne=(G.kdf={}).OpenSSL={execute:function(E,L,I,ie,ce){if(ie||(ie=oe.random(8)),ce)var Ce=ye.create({keySize:L+I,hasher:ce}).compute(E,ie);else Ce=ye.create({keySize:L+I}).compute(E,ie);var he=oe.create(Ce.words.slice(L),4*I);return Ce.sigBytes=4*L,T.create({key:Ce,iv:he,salt:ie})}},v=J.PasswordBasedCipher=j.extend({cfg:j.cfg.extend({kdf:ne}),encrypt:function(E,L,I,ie){var ce=(ie=this.cfg.extend(ie)).kdf.execute(I,E.keySize,E.ivSize,ie.salt,ie.hasher);ie.iv=ce.iv;var Ce=j.encrypt.call(this,E,L,ce.key,ie);return Ce.mixIn(ce),Ce},decrypt:function(E,L,I,ie){ie=this.cfg.extend(ie),L=this._parse(L,ie.format);var ce=ie.kdf.execute(I,E.keySize,E.ivSize,L.salt,ie.hasher);return ie.iv=ce.iv,j.decrypt.call(this,E,L,ce.key,ie)}}))))},95275:function(qe,be,t){var m;qe.exports=(m=m||function(A,G){var J;if(typeof window<"u"&&window.crypto&&(J=window.crypto),typeof self<"u"&&self.crypto&&(J=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(J=globalThis.crypto),!J&&typeof window<"u"&&window.msCrypto&&(J=window.msCrypto),!J&&typeof global<"u"&&global.crypto&&(J=global.crypto),!J)try{J=t(72858)}catch{}var Y=function(){if(J){if("function"==typeof J.getRandomValues)try{return J.getRandomValues(new Uint32Array(1))[0]}catch{}if("function"==typeof J.randomBytes)try{return J.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},oe=Object.create||function(){function x(){}return function(p){var W;return x.prototype=p,W=new x,x.prototype=null,W}}(),X={},k=X.lib={},H=k.Base=function(){return{extend:function(x){var p=oe(this);return x&&p.mixIn(x),(!p.hasOwnProperty("init")||this.init===p.init)&&(p.init=function(){p.$super.init.apply(this,arguments)}),p.init.prototype=p,p.$super=this,p},create:function(){var x=this.extend();return x.init.apply(x,arguments),x},init:function(){},mixIn:function(x){for(var p in x)x.hasOwnProperty(p)&&(this[p]=x[p]);x.hasOwnProperty("toString")&&(this.toString=x.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),ue=k.WordArray=H.extend({init:function(x,p){x=this.words=x||[],this.sigBytes=null!=p?p:4*x.length},toString:function(x){return(x||ye).stringify(this)},concat:function(x){var p=this.words,W=x.words,T=this.sigBytes,R=x.sigBytes;if(this.clamp(),T%4)for(var le=0;le<R;le++)p[T+le>>>2]|=(W[le>>>2]>>>24-le%4*8&255)<<24-(T+le)%4*8;else for(var F=0;F<R;F+=4)p[T+F>>>2]=W[F>>>2];return this.sigBytes+=R,this},clamp:function(){var x=this.words,p=this.sigBytes;x[p>>>2]&=4294967295<<32-p%4*8,x.length=A.ceil(p/4)},clone:function(){var x=H.clone.call(this);return x.words=this.words.slice(0),x},random:function(x){for(var p=[],W=0;W<x;W+=4)p.push(Y());return new ue.init(p,x)}}),q=X.enc={},ye=q.Hex={stringify:function(x){for(var p=x.words,W=x.sigBytes,T=[],R=0;R<W;R++){var le=p[R>>>2]>>>24-R%4*8&255;T.push((le>>>4).toString(16)),T.push((15&le).toString(16))}return T.join("")},parse:function(x){for(var p=x.length,W=[],T=0;T<p;T+=2)W[T>>>3]|=parseInt(x.substr(T,2),16)<<24-T%8*4;return new ue.init(W,p/2)}},re=q.Latin1={stringify:function(x){for(var p=x.words,W=x.sigBytes,T=[],R=0;R<W;R++)T.push(String.fromCharCode(p[R>>>2]>>>24-R%4*8&255));return T.join("")},parse:function(x){for(var p=x.length,W=[],T=0;T<p;T++)W[T>>>2]|=(255&x.charCodeAt(T))<<24-T%4*8;return new ue.init(W,p)}},O=q.Utf8={stringify:function(x){try{return decodeURIComponent(escape(re.stringify(x)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(x){return re.parse(unescape(encodeURIComponent(x)))}},B=k.BufferedBlockAlgorithm=H.extend({reset:function(){this._data=new ue.init,this._nDataBytes=0},_append:function(x){"string"==typeof x&&(x=O.parse(x)),this._data.concat(x),this._nDataBytes+=x.sigBytes},_process:function(x){var p,W=this._data,T=W.words,R=W.sigBytes,le=this.blockSize,F=R/(4*le),ne=(F=x?A.ceil(F):A.max((0|F)-this._minBufferSize,0))*le,v=A.min(4*ne,R);if(ne){for(var E=0;E<ne;E+=le)this._doProcessBlock(T,E);p=T.splice(0,ne),W.sigBytes-=v}return new ue.init(p,v)},clone:function(){var x=H.clone.call(this);return x._data=this._data.clone(),x},_minBufferSize:0}),D=(k.Hasher=B.extend({cfg:H.extend(),init:function(x){this.cfg=this.cfg.extend(x),this.reset()},reset:function(){B.reset.call(this),this._doReset()},update:function(x){return this._append(x),this._process(),this},finalize:function(x){return x&&this._append(x),this._doFinalize()},blockSize:16,_createHelper:function(x){return function(p,W){return new x.init(W).finalize(p)}},_createHmacHelper:function(x){return function(p,W){return new D.HMAC.init(x,W).finalize(p)}}}),X.algo={});return X}(Math),m)},21272:function(qe,be,t){var m,J;qe.exports=(m=t(95275),J=m.lib.WordArray,m.enc.Base64={stringify:function(k){var H=k.words,ue=k.sigBytes,q=this._map;k.clamp();for(var ye=[],re=0;re<ue;re+=3)for(var D=(H[re>>>2]>>>24-re%4*8&255)<<16|(H[re+1>>>2]>>>24-(re+1)%4*8&255)<<8|H[re+2>>>2]>>>24-(re+2)%4*8&255,x=0;x<4&&re+.75*x<ue;x++)ye.push(q.charAt(D>>>6*(3-x)&63));var p=q.charAt(64);if(p)for(;ye.length%4;)ye.push(p);return ye.join("")},parse:function(k){var H=k.length,ue=this._map,q=this._reverseMap;if(!q){q=this._reverseMap=[];for(var ye=0;ye<ue.length;ye++)q[ue.charCodeAt(ye)]=ye}var re=ue.charAt(64);if(re){var O=k.indexOf(re);-1!==O&&(H=O)}return function X(k,H,ue){for(var q=[],ye=0,re=0;re<H;re++)if(re%4){var O=ue[k.charCodeAt(re-1)]<<re%4*2,B=ue[k.charCodeAt(re)]>>>6-re%4*2;q[ye>>>2]|=(O|B)<<24-ye%4*8,ye++}return J.create(q,ye)}(k,H,q)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},m.enc.Base64)},84217:function(qe,be,t){var m,J;qe.exports=(m=t(95275),J=m.lib.WordArray,m.enc.Base64url={stringify:function(k,H){void 0===H&&(H=!0);var ue=k.words,q=k.sigBytes,ye=H?this._safe_map:this._map;k.clamp();for(var re=[],O=0;O<q;O+=3)for(var x=(ue[O>>>2]>>>24-O%4*8&255)<<16|(ue[O+1>>>2]>>>24-(O+1)%4*8&255)<<8|ue[O+2>>>2]>>>24-(O+2)%4*8&255,p=0;p<4&&O+.75*p<q;p++)re.push(ye.charAt(x>>>6*(3-p)&63));var W=ye.charAt(64);if(W)for(;re.length%4;)re.push(W);return re.join("")},parse:function(k,H){void 0===H&&(H=!0);var ue=k.length,q=H?this._safe_map:this._map,ye=this._reverseMap;if(!ye){ye=this._reverseMap=[];for(var re=0;re<q.length;re++)ye[q.charCodeAt(re)]=re}var O=q.charAt(64);if(O){var B=k.indexOf(O);-1!==B&&(ue=B)}return function X(k,H,ue){for(var q=[],ye=0,re=0;re<H;re++)if(re%4){var O=ue[k.charCodeAt(re-1)]<<re%4*2,B=ue[k.charCodeAt(re)]>>>6-re%4*2;q[ye>>>2]|=(O|B)<<24-ye%4*8,ye++}return J.create(q,ye)}(k,ue,ye)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"},m.enc.Base64url)},52923:function(qe,be,t){var m;qe.exports=(m=t(95275),function(){var J=m.lib.WordArray,Y=m.enc;function X(k){return k<<8&4278255360|k>>>8&16711935}Y.Utf16=Y.Utf16BE={stringify:function(k){for(var H=k.words,ue=k.sigBytes,q=[],ye=0;ye<ue;ye+=2)q.push(String.fromCharCode(H[ye>>>2]>>>16-ye%4*8&65535));return q.join("")},parse:function(k){for(var H=k.length,ue=[],q=0;q<H;q++)ue[q>>>1]|=k.charCodeAt(q)<<16-q%2*16;return J.create(ue,2*H)}},Y.Utf16LE={stringify:function(k){for(var H=k.words,ue=k.sigBytes,q=[],ye=0;ye<ue;ye+=2){var re=X(H[ye>>>2]>>>16-ye%4*8&65535);q.push(String.fromCharCode(re))}return q.join("")},parse:function(k){for(var H=k.length,ue=[],q=0;q<H;q++)ue[q>>>1]|=X(k.charCodeAt(q)<<16-q%2*16);return J.create(ue,2*H)}}}(),m.enc.Utf16)},26528:function(qe,be,t){var A,G,J,Y,oe,k,m;qe.exports=(m=t(95275),t(57605),t(15487),Y=(G=(A=m).lib).WordArray,k=(oe=A.algo).EvpKDF=(J=G.Base).extend({cfg:J.extend({keySize:4,hasher:oe.MD5,iterations:1}),init:function(H){this.cfg=this.cfg.extend(H)},compute:function(H,ue){for(var q,ye=this.cfg,re=ye.hasher.create(),O=Y.create(),B=O.words,me=ye.keySize,D=ye.iterations;B.length<me;){q&&re.update(q),q=re.update(H).finalize(ue),re.reset();for(var x=1;x<D;x++)q=re.finalize(q),re.reset();O.concat(q)}return O.sigBytes=4*me,O}}),A.EvpKDF=function(H,ue,q){return k.create(q).compute(H,ue)},m.EvpKDF)},42183:function(qe,be,t){var m,Y,X;qe.exports=(m=t(95275),t(90033),Y=m.lib.CipherParams,X=m.enc.Hex,m.format.Hex={stringify:function(ue){return ue.ciphertext.toString(X)},parse:function(ue){var q=X.parse(ue);return Y.create({ciphertext:q})}},m.format.Hex)},15487:function(qe,be,t){var m,oe;qe.exports=(m=t(95275),oe=m.enc.Utf8,void(m.algo.HMAC=m.lib.Base.extend({init:function(H,ue){H=this._hasher=new H.init,"string"==typeof ue&&(ue=oe.parse(ue));var q=H.blockSize,ye=4*q;ue.sigBytes>ye&&(ue=H.finalize(ue)),ue.clamp();for(var re=this._oKey=ue.clone(),O=this._iKey=ue.clone(),B=re.words,me=O.words,D=0;D<q;D++)B[D]^=1549556828,me[D]^=909522486;re.sigBytes=O.sigBytes=ye,this.reset()},reset:function(){var H=this._hasher;H.reset(),H.update(this._iKey)},update:function(H){return this._hasher.update(H),this},finalize:function(H){var ue=this._hasher,q=ue.finalize(H);return ue.reset(),ue.finalize(this._oKey.clone().concat(q))}})))},53852:function(qe,be,t){var m;qe.exports=(m=t(95275),t(46882),t(11204),t(52923),t(21272),t(84217),t(1236),t(57605),t(92787),t(61606),t(43266),t(39306),t(81371),t(32828),t(15487),t(65357),t(26528),t(90033),t(11771),t(46717),t(93438),t(64319),t(91353),t(67951),t(5135),t(51428),t(14583),t(74980),t(42183),t(70807),t(94896),t(62969),t(95176),t(88952),t(67650),m)},11204:function(qe,be,t){var m;qe.exports=(m=t(95275),function(){if("function"==typeof ArrayBuffer){var J=m.lib.WordArray,Y=J.init,oe=J.init=function(X){if(X instanceof ArrayBuffer&&(X=new Uint8Array(X)),(X instanceof Int8Array||typeof Uint8ClampedArray<"u"&&X instanceof Uint8ClampedArray||X instanceof Int16Array||X instanceof Uint16Array||X instanceof Int32Array||X instanceof Uint32Array||X instanceof Float32Array||X instanceof Float64Array)&&(X=new Uint8Array(X.buffer,X.byteOffset,X.byteLength)),X instanceof Uint8Array){for(var k=X.byteLength,H=[],ue=0;ue<k;ue++)H[ue>>>2]|=X[ue]<<24-ue%4*8;Y.call(this,H,k)}else Y.apply(this,arguments)};oe.prototype=J}}(),m.lib.WordArray)},1236:function(qe,be,t){var m;qe.exports=(m=t(95275),function(A){var G=m,J=G.lib,Y=J.WordArray,oe=J.Hasher,X=G.algo,k=[];!function(){for(var O=0;O<64;O++)k[O]=4294967296*A.abs(A.sin(O+1))|0}();var H=X.MD5=oe.extend({_doReset:function(){this._hash=new Y.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(O,B){for(var me=0;me<16;me++){var D=B+me,x=O[D];O[D]=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8)}var p=this._hash.words,W=O[B+0],T=O[B+1],R=O[B+2],le=O[B+3],j=O[B+4],F=O[B+5],ne=O[B+6],v=O[B+7],E=O[B+8],L=O[B+9],I=O[B+10],ie=O[B+11],ce=O[B+12],Ce=O[B+13],he=O[B+14],se=O[B+15],z=p[0],N=p[1],ee=p[2],Z=p[3];z=ue(z,N,ee,Z,W,7,k[0]),Z=ue(Z,z,N,ee,T,12,k[1]),ee=ue(ee,Z,z,N,R,17,k[2]),N=ue(N,ee,Z,z,le,22,k[3]),z=ue(z,N,ee,Z,j,7,k[4]),Z=ue(Z,z,N,ee,F,12,k[5]),ee=ue(ee,Z,z,N,ne,17,k[6]),N=ue(N,ee,Z,z,v,22,k[7]),z=ue(z,N,ee,Z,E,7,k[8]),Z=ue(Z,z,N,ee,L,12,k[9]),ee=ue(ee,Z,z,N,I,17,k[10]),N=ue(N,ee,Z,z,ie,22,k[11]),z=ue(z,N,ee,Z,ce,7,k[12]),Z=ue(Z,z,N,ee,Ce,12,k[13]),ee=ue(ee,Z,z,N,he,17,k[14]),z=q(z,N=ue(N,ee,Z,z,se,22,k[15]),ee,Z,T,5,k[16]),Z=q(Z,z,N,ee,ne,9,k[17]),ee=q(ee,Z,z,N,ie,14,k[18]),N=q(N,ee,Z,z,W,20,k[19]),z=q(z,N,ee,Z,F,5,k[20]),Z=q(Z,z,N,ee,I,9,k[21]),ee=q(ee,Z,z,N,se,14,k[22]),N=q(N,ee,Z,z,j,20,k[23]),z=q(z,N,ee,Z,L,5,k[24]),Z=q(Z,z,N,ee,he,9,k[25]),ee=q(ee,Z,z,N,le,14,k[26]),N=q(N,ee,Z,z,E,20,k[27]),z=q(z,N,ee,Z,Ce,5,k[28]),Z=q(Z,z,N,ee,R,9,k[29]),ee=q(ee,Z,z,N,v,14,k[30]),z=ye(z,N=q(N,ee,Z,z,ce,20,k[31]),ee,Z,F,4,k[32]),Z=ye(Z,z,N,ee,E,11,k[33]),ee=ye(ee,Z,z,N,ie,16,k[34]),N=ye(N,ee,Z,z,he,23,k[35]),z=ye(z,N,ee,Z,T,4,k[36]),Z=ye(Z,z,N,ee,j,11,k[37]),ee=ye(ee,Z,z,N,v,16,k[38]),N=ye(N,ee,Z,z,I,23,k[39]),z=ye(z,N,ee,Z,Ce,4,k[40]),Z=ye(Z,z,N,ee,W,11,k[41]),ee=ye(ee,Z,z,N,le,16,k[42]),N=ye(N,ee,Z,z,ne,23,k[43]),z=ye(z,N,ee,Z,L,4,k[44]),Z=ye(Z,z,N,ee,ce,11,k[45]),ee=ye(ee,Z,z,N,se,16,k[46]),z=re(z,N=ye(N,ee,Z,z,R,23,k[47]),ee,Z,W,6,k[48]),Z=re(Z,z,N,ee,v,10,k[49]),ee=re(ee,Z,z,N,he,15,k[50]),N=re(N,ee,Z,z,F,21,k[51]),z=re(z,N,ee,Z,ce,6,k[52]),Z=re(Z,z,N,ee,le,10,k[53]),ee=re(ee,Z,z,N,I,15,k[54]),N=re(N,ee,Z,z,T,21,k[55]),z=re(z,N,ee,Z,E,6,k[56]),Z=re(Z,z,N,ee,se,10,k[57]),ee=re(ee,Z,z,N,ne,15,k[58]),N=re(N,ee,Z,z,Ce,21,k[59]),z=re(z,N,ee,Z,j,6,k[60]),Z=re(Z,z,N,ee,ie,10,k[61]),ee=re(ee,Z,z,N,R,15,k[62]),N=re(N,ee,Z,z,L,21,k[63]),p[0]=p[0]+z|0,p[1]=p[1]+N|0,p[2]=p[2]+ee|0,p[3]=p[3]+Z|0},_doFinalize:function(){var O=this._data,B=O.words,me=8*this._nDataBytes,D=8*O.sigBytes;B[D>>>5]|=128<<24-D%32;var x=A.floor(me/4294967296),p=me;B[15+(D+64>>>9<<4)]=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8),B[14+(D+64>>>9<<4)]=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),O.sigBytes=4*(B.length+1),this._process();for(var W=this._hash,T=W.words,R=0;R<4;R++){var le=T[R];T[R]=16711935&(le<<8|le>>>24)|4278255360&(le<<24|le>>>8)}return W},clone:function(){var O=oe.clone.call(this);return O._hash=this._hash.clone(),O}});function ue(O,B,me,D,x,p,W){var T=O+(B&me|~B&D)+x+W;return(T<<p|T>>>32-p)+B}function q(O,B,me,D,x,p,W){var T=O+(B&D|me&~D)+x+W;return(T<<p|T>>>32-p)+B}function ye(O,B,me,D,x,p,W){var T=O+(B^me^D)+x+W;return(T<<p|T>>>32-p)+B}function re(O,B,me,D,x,p,W){var T=O+(me^(B|~D))+x+W;return(T<<p|T>>>32-p)+B}G.MD5=oe._createHelper(H),G.HmacMD5=oe._createHmacHelper(H)}(Math),m.MD5)},11771:function(qe,be,t){var m;qe.exports=(m=t(95275),t(90033),m.mode.CFB=function(){var A=m.lib.BlockCipherMode.extend();function G(J,Y,oe,X){var k,H=this._iv;H?(k=H.slice(0),this._iv=void 0):k=this._prevBlock,X.encryptBlock(k,0);for(var ue=0;ue<oe;ue++)J[Y+ue]^=k[ue]}return A.Encryptor=A.extend({processBlock:function(J,Y){var oe=this._cipher,X=oe.blockSize;G.call(this,J,Y,X,oe),this._prevBlock=J.slice(Y,Y+X)}}),A.Decryptor=A.extend({processBlock:function(J,Y){var oe=this._cipher,X=oe.blockSize,k=J.slice(Y,Y+X);G.call(this,J,Y,X,oe),this._prevBlock=k}}),A}(),m.mode.CFB)},93438:function(qe,be,t){var m;qe.exports=(m=t(95275),t(90033),m.mode.CTRGladman=function(){var A=m.lib.BlockCipherMode.extend();function G(oe){if(255&~(oe>>24))oe+=1<<24;else{var X=oe>>16&255,k=oe>>8&255,H=255&oe;255===X?(X=0,255===k?(k=0,255===H?H=0:++H):++k):++X,oe=0,oe+=X<<16,oe+=k<<8,oe+=H}return oe}var Y=A.Encryptor=A.extend({processBlock:function(oe,X){var k=this._cipher,H=k.blockSize,ue=this._iv,q=this._counter;ue&&(q=this._counter=ue.slice(0),this._iv=void 0),function J(oe){return 0===(oe[0]=G(oe[0]))&&(oe[1]=G(oe[1])),oe}(q);var ye=q.slice(0);k.encryptBlock(ye,0);for(var re=0;re<H;re++)oe[X+re]^=ye[re]}});return A.Decryptor=Y,A}(),m.mode.CTRGladman)},46717:function(qe,be,t){var A,G,m;qe.exports=(m=t(95275),t(90033),m.mode.CTR=(G=(A=m.lib.BlockCipherMode.extend()).Encryptor=A.extend({processBlock:function(J,Y){var oe=this._cipher,X=oe.blockSize,k=this._iv,H=this._counter;k&&(H=this._counter=k.slice(0),this._iv=void 0);var ue=H.slice(0);oe.encryptBlock(ue,0),H[X-1]=H[X-1]+1|0;for(var q=0;q<X;q++)J[Y+q]^=ue[q]}}),A.Decryptor=G,A),m.mode.CTR)},91353:function(qe,be,t){var A,m;qe.exports=(m=t(95275),t(90033),m.mode.ECB=((A=m.lib.BlockCipherMode.extend()).Encryptor=A.extend({processBlock:function(G,J){this._cipher.encryptBlock(G,J)}}),A.Decryptor=A.extend({processBlock:function(G,J){this._cipher.decryptBlock(G,J)}}),A),m.mode.ECB)},64319:function(qe,be,t){var A,G,m;qe.exports=(m=t(95275),t(90033),m.mode.OFB=(G=(A=m.lib.BlockCipherMode.extend()).Encryptor=A.extend({processBlock:function(J,Y){var oe=this._cipher,X=oe.blockSize,k=this._iv,H=this._keystream;k&&(H=this._keystream=k.slice(0),this._iv=void 0),oe.encryptBlock(H,0);for(var ue=0;ue<X;ue++)J[Y+ue]^=H[ue]}}),A.Decryptor=G,A),m.mode.OFB)},67951:function(qe,be,t){var m;qe.exports=(m=t(95275),t(90033),m.pad.AnsiX923={pad:function(A,G){var J=A.sigBytes,Y=4*G,oe=Y-J%Y,X=J+oe-1;A.clamp(),A.words[X>>>2]|=oe<<24-X%4*8,A.sigBytes+=oe},unpad:function(A){A.sigBytes-=255&A.words[A.sigBytes-1>>>2]}},m.pad.Ansix923)},5135:function(qe,be,t){var m;qe.exports=(m=t(95275),t(90033),m.pad.Iso10126={pad:function(A,G){var J=4*G,Y=J-A.sigBytes%J;A.concat(m.lib.WordArray.random(Y-1)).concat(m.lib.WordArray.create([Y<<24],1))},unpad:function(A){A.sigBytes-=255&A.words[A.sigBytes-1>>>2]}},m.pad.Iso10126)},51428:function(qe,be,t){var m;qe.exports=(m=t(95275),t(90033),m.pad.Iso97971={pad:function(A,G){A.concat(m.lib.WordArray.create([2147483648],1)),m.pad.ZeroPadding.pad(A,G)},unpad:function(A){m.pad.ZeroPadding.unpad(A),A.sigBytes--}},m.pad.Iso97971)},74980:function(qe,be,t){var m;qe.exports=(m=t(95275),t(90033),m.pad.NoPadding={pad:function(){},unpad:function(){}},m.pad.NoPadding)},14583:function(qe,be,t){var m;qe.exports=(m=t(95275),t(90033),m.pad.ZeroPadding={pad:function(A,G){var J=4*G;A.clamp(),A.sigBytes+=J-(A.sigBytes%J||J)},unpad:function(A){var G=A.words,J=A.sigBytes-1;for(J=A.sigBytes-1;J>=0;J--)if(G[J>>>2]>>>24-J%4*8&255){A.sigBytes=J+1;break}}},m.pad.ZeroPadding)},65357:function(qe,be,t){var A,G,J,Y,oe,k,H,m;qe.exports=(m=t(95275),t(92787),t(15487),Y=(G=(A=m).lib).WordArray,k=(oe=A.algo).HMAC,H=oe.PBKDF2=(J=G.Base).extend({cfg:J.extend({keySize:4,hasher:oe.SHA256,iterations:25e4}),init:function(ue){this.cfg=this.cfg.extend(ue)},compute:function(ue,q){for(var ye=this.cfg,re=k.create(ye.hasher,ue),O=Y.create(),B=Y.create([1]),me=O.words,D=B.words,x=ye.keySize,p=ye.iterations;me.length<x;){var W=re.update(q).finalize(B);re.reset();for(var T=W.words,R=T.length,le=W,j=1;j<p;j++){le=re.finalize(le),re.reset();for(var F=le.words,ne=0;ne<R;ne++)T[ne]^=F[ne]}O.concat(W),D[0]++}return O.sigBytes=4*x,O}}),A.PBKDF2=function(ue,q,ye){return H.create(ye).compute(ue,q)},m.PBKDF2)},88952:function(qe,be,t){var m;qe.exports=(m=t(95275),t(21272),t(1236),t(26528),t(90033),function(){var A=m,J=A.lib.StreamCipher,oe=[],X=[],k=[],H=A.algo.RabbitLegacy=J.extend({_doReset:function(){var q=this._key.words,ye=this.cfg.iv,re=this._X=[q[0],q[3]<<16|q[2]>>>16,q[1],q[0]<<16|q[3]>>>16,q[2],q[1]<<16|q[0]>>>16,q[3],q[2]<<16|q[1]>>>16],O=this._C=[q[2]<<16|q[2]>>>16,4294901760&q[0]|65535&q[1],q[3]<<16|q[3]>>>16,4294901760&q[1]|65535&q[2],q[0]<<16|q[0]>>>16,4294901760&q[2]|65535&q[3],q[1]<<16|q[1]>>>16,4294901760&q[3]|65535&q[0]];this._b=0;for(var B=0;B<4;B++)ue.call(this);for(B=0;B<8;B++)O[B]^=re[B+4&7];if(ye){var me=ye.words,D=me[0],x=me[1],p=16711935&(D<<8|D>>>24)|4278255360&(D<<24|D>>>8),W=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8),T=p>>>16|4294901760&W,R=W<<16|65535&p;for(O[0]^=p,O[1]^=T,O[2]^=W,O[3]^=R,O[4]^=p,O[5]^=T,O[6]^=W,O[7]^=R,B=0;B<4;B++)ue.call(this)}},_doProcessBlock:function(q,ye){var re=this._X;ue.call(this),oe[0]=re[0]^re[5]>>>16^re[3]<<16,oe[1]=re[2]^re[7]>>>16^re[5]<<16,oe[2]=re[4]^re[1]>>>16^re[7]<<16,oe[3]=re[6]^re[3]>>>16^re[1]<<16;for(var O=0;O<4;O++)oe[O]=16711935&(oe[O]<<8|oe[O]>>>24)|4278255360&(oe[O]<<24|oe[O]>>>8),q[ye+O]^=oe[O]},blockSize:4,ivSize:2});function ue(){for(var q=this._X,ye=this._C,re=0;re<8;re++)X[re]=ye[re];for(ye[0]=ye[0]+1295307597+this._b|0,ye[1]=ye[1]+3545052371+(ye[0]>>>0<X[0]>>>0?1:0)|0,ye[2]=ye[2]+886263092+(ye[1]>>>0<X[1]>>>0?1:0)|0,ye[3]=ye[3]+1295307597+(ye[2]>>>0<X[2]>>>0?1:0)|0,ye[4]=ye[4]+3545052371+(ye[3]>>>0<X[3]>>>0?1:0)|0,ye[5]=ye[5]+886263092+(ye[4]>>>0<X[4]>>>0?1:0)|0,ye[6]=ye[6]+1295307597+(ye[5]>>>0<X[5]>>>0?1:0)|0,ye[7]=ye[7]+3545052371+(ye[6]>>>0<X[6]>>>0?1:0)|0,this._b=ye[7]>>>0<X[7]>>>0?1:0,re=0;re<8;re++){var O=q[re]+ye[re],B=65535&O,me=O>>>16;k[re]=((B*B>>>17)+B*me>>>15)+me*me^((4294901760&O)*O|0)+((65535&O)*O|0)}q[0]=k[0]+(k[7]<<16|k[7]>>>16)+(k[6]<<16|k[6]>>>16)|0,q[1]=k[1]+(k[0]<<8|k[0]>>>24)+k[7]|0,q[2]=k[2]+(k[1]<<16|k[1]>>>16)+(k[0]<<16|k[0]>>>16)|0,q[3]=k[3]+(k[2]<<8|k[2]>>>24)+k[1]|0,q[4]=k[4]+(k[3]<<16|k[3]>>>16)+(k[2]<<16|k[2]>>>16)|0,q[5]=k[5]+(k[4]<<8|k[4]>>>24)+k[3]|0,q[6]=k[6]+(k[5]<<16|k[5]>>>16)+(k[4]<<16|k[4]>>>16)|0,q[7]=k[7]+(k[6]<<8|k[6]>>>24)+k[5]|0}A.RabbitLegacy=J._createHelper(H)}(),m.RabbitLegacy)},95176:function(qe,be,t){var m;qe.exports=(m=t(95275),t(21272),t(1236),t(26528),t(90033),function(){var A=m,J=A.lib.StreamCipher,oe=[],X=[],k=[],H=A.algo.Rabbit=J.extend({_doReset:function(){for(var q=this._key.words,ye=this.cfg.iv,re=0;re<4;re++)q[re]=16711935&(q[re]<<8|q[re]>>>24)|4278255360&(q[re]<<24|q[re]>>>8);var O=this._X=[q[0],q[3]<<16|q[2]>>>16,q[1],q[0]<<16|q[3]>>>16,q[2],q[1]<<16|q[0]>>>16,q[3],q[2]<<16|q[1]>>>16],B=this._C=[q[2]<<16|q[2]>>>16,4294901760&q[0]|65535&q[1],q[3]<<16|q[3]>>>16,4294901760&q[1]|65535&q[2],q[0]<<16|q[0]>>>16,4294901760&q[2]|65535&q[3],q[1]<<16|q[1]>>>16,4294901760&q[3]|65535&q[0]];for(this._b=0,re=0;re<4;re++)ue.call(this);for(re=0;re<8;re++)B[re]^=O[re+4&7];if(ye){var me=ye.words,D=me[0],x=me[1],p=16711935&(D<<8|D>>>24)|4278255360&(D<<24|D>>>8),W=16711935&(x<<8|x>>>24)|4278255360&(x<<24|x>>>8),T=p>>>16|4294901760&W,R=W<<16|65535&p;for(B[0]^=p,B[1]^=T,B[2]^=W,B[3]^=R,B[4]^=p,B[5]^=T,B[6]^=W,B[7]^=R,re=0;re<4;re++)ue.call(this)}},_doProcessBlock:function(q,ye){var re=this._X;ue.call(this),oe[0]=re[0]^re[5]>>>16^re[3]<<16,oe[1]=re[2]^re[7]>>>16^re[5]<<16,oe[2]=re[4]^re[1]>>>16^re[7]<<16,oe[3]=re[6]^re[3]>>>16^re[1]<<16;for(var O=0;O<4;O++)oe[O]=16711935&(oe[O]<<8|oe[O]>>>24)|4278255360&(oe[O]<<24|oe[O]>>>8),q[ye+O]^=oe[O]},blockSize:4,ivSize:2});function ue(){for(var q=this._X,ye=this._C,re=0;re<8;re++)X[re]=ye[re];for(ye[0]=ye[0]+1295307597+this._b|0,ye[1]=ye[1]+3545052371+(ye[0]>>>0<X[0]>>>0?1:0)|0,ye[2]=ye[2]+886263092+(ye[1]>>>0<X[1]>>>0?1:0)|0,ye[3]=ye[3]+1295307597+(ye[2]>>>0<X[2]>>>0?1:0)|0,ye[4]=ye[4]+3545052371+(ye[3]>>>0<X[3]>>>0?1:0)|0,ye[5]=ye[5]+886263092+(ye[4]>>>0<X[4]>>>0?1:0)|0,ye[6]=ye[6]+1295307597+(ye[5]>>>0<X[5]>>>0?1:0)|0,ye[7]=ye[7]+3545052371+(ye[6]>>>0<X[6]>>>0?1:0)|0,this._b=ye[7]>>>0<X[7]>>>0?1:0,re=0;re<8;re++){var O=q[re]+ye[re],B=65535&O,me=O>>>16;k[re]=((B*B>>>17)+B*me>>>15)+me*me^((4294901760&O)*O|0)+((65535&O)*O|0)}q[0]=k[0]+(k[7]<<16|k[7]>>>16)+(k[6]<<16|k[6]>>>16)|0,q[1]=k[1]+(k[0]<<8|k[0]>>>24)+k[7]|0,q[2]=k[2]+(k[1]<<16|k[1]>>>16)+(k[0]<<16|k[0]>>>16)|0,q[3]=k[3]+(k[2]<<8|k[2]>>>24)+k[1]|0,q[4]=k[4]+(k[3]<<16|k[3]>>>16)+(k[2]<<16|k[2]>>>16)|0,q[5]=k[5]+(k[4]<<8|k[4]>>>24)+k[3]|0,q[6]=k[6]+(k[5]<<16|k[5]>>>16)+(k[4]<<16|k[4]>>>16)|0,q[7]=k[7]+(k[6]<<8|k[6]>>>24)+k[5]|0}A.Rabbit=J._createHelper(H)}(),m.Rabbit)},62969:function(qe,be,t){var m;qe.exports=(m=t(95275),t(21272),t(1236),t(26528),t(90033),function(){var A=m,J=A.lib.StreamCipher,Y=A.algo,oe=Y.RC4=J.extend({_doReset:function(){for(var H=this._key,ue=H.words,q=H.sigBytes,ye=this._S=[],re=0;re<256;re++)ye[re]=re;re=0;for(var O=0;re<256;re++){var B=re%q,D=ye[re];ye[re]=ye[O=(O+ye[re]+(ue[B>>>2]>>>24-B%4*8&255))%256],ye[O]=D}this._i=this._j=0},_doProcessBlock:function(H,ue){H[ue]^=X.call(this)},keySize:8,ivSize:0});function X(){for(var H=this._S,ue=this._i,q=this._j,ye=0,re=0;re<4;re++){var O=H[ue=(ue+1)%256];H[ue]=H[q=(q+H[ue])%256],H[q]=O,ye|=H[(H[ue]+H[q])%256]<<24-8*re}return this._i=ue,this._j=q,ye}A.RC4=J._createHelper(oe);var k=Y.RC4Drop=oe.extend({cfg:oe.cfg.extend({drop:192}),_doReset:function(){oe._doReset.call(this);for(var H=this.cfg.drop;H>0;H--)X.call(this)}});A.RC4Drop=J._createHelper(k)}(),m.RC4)},32828:function(qe,be,t){var m;qe.exports=(m=t(95275),function(A){var G=m,J=G.lib,Y=J.WordArray,oe=J.Hasher,X=G.algo,k=Y.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),H=Y.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),ue=Y.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),q=Y.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),ye=Y.create([0,1518500249,1859775393,2400959708,2840853838]),re=Y.create([1352829926,1548603684,1836072691,2053994217,0]),O=X.RIPEMD160=oe.extend({_doReset:function(){this._hash=Y.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(T,R){for(var le=0;le<16;le++){var j=R+le,F=T[j];T[j]=16711935&(F<<8|F>>>24)|4278255360&(F<<24|F>>>8)}var Ce,he,se,z,N,ee,Z,fe,U,Ee,Me,ne=this._hash.words,v=ye.words,E=re.words,L=k.words,I=H.words,ie=ue.words,ce=q.words;for(ee=Ce=ne[0],Z=he=ne[1],fe=se=ne[2],U=z=ne[3],Ee=N=ne[4],le=0;le<80;le+=1)Me=Ce+T[R+L[le]]|0,Me+=le<16?B(he,se,z)+v[0]:le<32?me(he,se,z)+v[1]:le<48?D(he,se,z)+v[2]:le<64?x(he,se,z)+v[3]:p(he,se,z)+v[4],Me=(Me=W(Me|=0,ie[le]))+N|0,Ce=N,N=z,z=W(se,10),se=he,he=Me,Me=ee+T[R+I[le]]|0,Me+=le<16?p(Z,fe,U)+E[0]:le<32?x(Z,fe,U)+E[1]:le<48?D(Z,fe,U)+E[2]:le<64?me(Z,fe,U)+E[3]:B(Z,fe,U)+E[4],Me=(Me=W(Me|=0,ce[le]))+Ee|0,ee=Ee,Ee=U,U=W(fe,10),fe=Z,Z=Me;Me=ne[1]+se+U|0,ne[1]=ne[2]+z+Ee|0,ne[2]=ne[3]+N+ee|0,ne[3]=ne[4]+Ce+Z|0,ne[4]=ne[0]+he+fe|0,ne[0]=Me},_doFinalize:function(){var T=this._data,R=T.words,le=8*this._nDataBytes,j=8*T.sigBytes;R[j>>>5]|=128<<24-j%32,R[14+(j+64>>>9<<4)]=16711935&(le<<8|le>>>24)|4278255360&(le<<24|le>>>8),T.sigBytes=4*(R.length+1),this._process();for(var F=this._hash,ne=F.words,v=0;v<5;v++){var E=ne[v];ne[v]=16711935&(E<<8|E>>>24)|4278255360&(E<<24|E>>>8)}return F},clone:function(){var T=oe.clone.call(this);return T._hash=this._hash.clone(),T}});function B(T,R,le){return T^R^le}function me(T,R,le){return T&R|~T&le}function D(T,R,le){return(T|~R)^le}function x(T,R,le){return T&le|R&~le}function p(T,R,le){return T^(R|~le)}function W(T,R){return T<<R|T>>>32-R}G.RIPEMD160=oe._createHelper(O),G.HmacRIPEMD160=oe._createHmacHelper(O)}(Math),m.RIPEMD160)},57605:function(qe,be,t){var A,G,J,Y,X,k,m;qe.exports=(m=t(95275),J=(G=(A=m).lib).WordArray,X=[],k=A.algo.SHA1=(Y=G.Hasher).extend({_doReset:function(){this._hash=new J.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(H,ue){for(var q=this._hash.words,ye=q[0],re=q[1],O=q[2],B=q[3],me=q[4],D=0;D<80;D++){if(D<16)X[D]=0|H[ue+D];else{var x=X[D-3]^X[D-8]^X[D-14]^X[D-16];X[D]=x<<1|x>>>31}var p=(ye<<5|ye>>>27)+me+X[D];p+=D<20?1518500249+(re&O|~re&B):D<40?1859775393+(re^O^B):D<60?(re&O|re&B|O&B)-1894007588:(re^O^B)-899497514,me=B,B=O,O=re<<30|re>>>2,re=ye,ye=p}q[0]=q[0]+ye|0,q[1]=q[1]+re|0,q[2]=q[2]+O|0,q[3]=q[3]+B|0,q[4]=q[4]+me|0},_doFinalize:function(){var H=this._data,ue=H.words,q=8*this._nDataBytes,ye=8*H.sigBytes;return ue[ye>>>5]|=128<<24-ye%32,ue[14+(ye+64>>>9<<4)]=Math.floor(q/4294967296),ue[15+(ye+64>>>9<<4)]=q,H.sigBytes=4*ue.length,this._process(),this._hash},clone:function(){var H=Y.clone.call(this);return H._hash=this._hash.clone(),H}}),A.SHA1=Y._createHelper(k),A.HmacSHA1=Y._createHmacHelper(k),m.SHA1)},61606:function(qe,be,t){var A,J,Y,oe,X,m;qe.exports=(m=t(95275),t(92787),J=(A=m).lib.WordArray,X=(Y=A.algo).SHA224=(oe=Y.SHA256).extend({_doReset:function(){this._hash=new J.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var k=oe._doFinalize.call(this);return k.sigBytes-=4,k}}),A.SHA224=oe._createHelper(X),A.HmacSHA224=oe._createHmacHelper(X),m.SHA224)},92787:function(qe,be,t){var m;qe.exports=(m=t(95275),function(A){var G=m,J=G.lib,Y=J.WordArray,oe=J.Hasher,X=G.algo,k=[],H=[];!function(){function ye(me){for(var D=A.sqrt(me),x=2;x<=D;x++)if(!(me%x))return!1;return!0}function re(me){return 4294967296*(me-(0|me))|0}for(var O=2,B=0;B<64;)ye(O)&&(B<8&&(k[B]=re(A.pow(O,.5))),H[B]=re(A.pow(O,1/3)),B++),O++}();var ue=[],q=X.SHA256=oe.extend({_doReset:function(){this._hash=new Y.init(k.slice(0))},_doProcessBlock:function(ye,re){for(var O=this._hash.words,B=O[0],me=O[1],D=O[2],x=O[3],p=O[4],W=O[5],T=O[6],R=O[7],le=0;le<64;le++){if(le<16)ue[le]=0|ye[re+le];else{var j=ue[le-15],ne=ue[le-2];ue[le]=((j<<25|j>>>7)^(j<<14|j>>>18)^j>>>3)+ue[le-7]+((ne<<15|ne>>>17)^(ne<<13|ne>>>19)^ne>>>10)+ue[le-16]}var L=B&me^B&D^me&D,ce=R+((p<<26|p>>>6)^(p<<21|p>>>11)^(p<<7|p>>>25))+(p&W^~p&T)+H[le]+ue[le];R=T,T=W,W=p,p=x+ce|0,x=D,D=me,me=B,B=ce+(((B<<30|B>>>2)^(B<<19|B>>>13)^(B<<10|B>>>22))+L)|0}O[0]=O[0]+B|0,O[1]=O[1]+me|0,O[2]=O[2]+D|0,O[3]=O[3]+x|0,O[4]=O[4]+p|0,O[5]=O[5]+W|0,O[6]=O[6]+T|0,O[7]=O[7]+R|0},_doFinalize:function(){var ye=this._data,re=ye.words,O=8*this._nDataBytes,B=8*ye.sigBytes;return re[B>>>5]|=128<<24-B%32,re[14+(B+64>>>9<<4)]=A.floor(O/4294967296),re[15+(B+64>>>9<<4)]=O,ye.sigBytes=4*re.length,this._process(),this._hash},clone:function(){var ye=oe.clone.call(this);return ye._hash=this._hash.clone(),ye}});G.SHA256=oe._createHelper(q),G.HmacSHA256=oe._createHmacHelper(q)}(Math),m.SHA256)},81371:function(qe,be,t){var m;qe.exports=(m=t(95275),t(46882),function(A){var G=m,J=G.lib,Y=J.WordArray,oe=J.Hasher,k=G.x64.Word,H=G.algo,ue=[],q=[],ye=[];!function(){for(var B=1,me=0,D=0;D<24;D++){ue[B+5*me]=(D+1)*(D+2)/2%64;var p=(2*B+3*me)%5;B=me%5,me=p}for(B=0;B<5;B++)for(me=0;me<5;me++)q[B+5*me]=me+(2*B+3*me)%5*5;for(var W=1,T=0;T<24;T++){for(var R=0,le=0,j=0;j<7;j++){if(1&W){var F=(1<<j)-1;F<32?le^=1<<F:R^=1<<F-32}128&W?W=W<<1^113:W<<=1}ye[T]=k.create(R,le)}}();var re=[];!function(){for(var B=0;B<25;B++)re[B]=k.create()}();var O=H.SHA3=oe.extend({cfg:oe.cfg.extend({outputLength:512}),_doReset:function(){for(var B=this._state=[],me=0;me<25;me++)B[me]=new k.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(B,me){for(var D=this._state,x=this.blockSize/2,p=0;p<x;p++){var W=B[me+2*p],T=B[me+2*p+1];W=16711935&(W<<8|W>>>24)|4278255360&(W<<24|W>>>8),(R=D[p]).high^=T=16711935&(T<<8|T>>>24)|4278255360&(T<<24|T>>>8),R.low^=W}for(var le=0;le<24;le++){for(var j=0;j<5;j++){for(var F=0,ne=0,v=0;v<5;v++)F^=(R=D[j+5*v]).high,ne^=R.low;var E=re[j];E.high=F,E.low=ne}for(j=0;j<5;j++){var L=re[(j+4)%5],I=re[(j+1)%5],ie=I.high,ce=I.low;for(F=L.high^(ie<<1|ce>>>31),ne=L.low^(ce<<1|ie>>>31),v=0;v<5;v++)(R=D[j+5*v]).high^=F,R.low^=ne}for(var Ce=1;Ce<25;Ce++){var he=(R=D[Ce]).high,se=R.low,z=ue[Ce];z<32?(F=he<<z|se>>>32-z,ne=se<<z|he>>>32-z):(F=se<<z-32|he>>>64-z,ne=he<<z-32|se>>>64-z);var N=re[q[Ce]];N.high=F,N.low=ne}var ee=re[0],Z=D[0];for(ee.high=Z.high,ee.low=Z.low,j=0;j<5;j++)for(v=0;v<5;v++){var fe=re[Ce=j+5*v],U=re[(j+1)%5+5*v],Ee=re[(j+2)%5+5*v];(R=D[Ce]).high=fe.high^~U.high&Ee.high,R.low=fe.low^~U.low&Ee.low}var R,Me=ye[le];(R=D[0]).high^=Me.high,R.low^=Me.low}},_doFinalize:function(){var B=this._data,me=B.words,x=8*B.sigBytes,p=32*this.blockSize;me[x>>>5]|=1<<24-x%32,me[(A.ceil((x+1)/p)*p>>>5)-1]|=128,B.sigBytes=4*me.length,this._process();for(var W=this._state,T=this.cfg.outputLength/8,R=T/8,le=[],j=0;j<R;j++){var F=W[j],ne=F.high,v=F.low;ne=16711935&(ne<<8|ne>>>24)|4278255360&(ne<<24|ne>>>8),le.push(v=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8)),le.push(ne)}return new Y.init(le,T)},clone:function(){for(var B=oe.clone.call(this),me=B._state=this._state.slice(0),D=0;D<25;D++)me[D]=me[D].clone();return B}});G.SHA3=oe._createHelper(O),G.HmacSHA3=oe._createHmacHelper(O)}(Math),m.SHA3)},39306:function(qe,be,t){var A,G,J,Y,oe,X,k,m;qe.exports=(m=t(95275),t(46882),t(43266),J=(G=(A=m).x64).Word,Y=G.WordArray,k=(oe=A.algo).SHA384=(X=oe.SHA512).extend({_doReset:function(){this._hash=new Y.init([new J.init(3418070365,3238371032),new J.init(1654270250,914150663),new J.init(2438529370,812702999),new J.init(355462360,4144912697),new J.init(1731405415,4290775857),new J.init(2394180231,1750603025),new J.init(3675008525,1694076839),new J.init(1203062813,3204075428)])},_doFinalize:function(){var H=X._doFinalize.call(this);return H.sigBytes-=16,H}}),A.SHA384=X._createHelper(k),A.HmacSHA384=X._createHmacHelper(k),m.SHA384)},43266:function(qe,be,t){var m;qe.exports=(m=t(95275),t(46882),function(){var A=m,J=A.lib.Hasher,Y=A.x64,oe=Y.Word,X=Y.WordArray,k=A.algo;function H(){return oe.create.apply(oe,arguments)}var ue=[H(1116352408,3609767458),H(1899447441,602891725),H(3049323471,3964484399),H(3921009573,2173295548),H(961987163,4081628472),H(1508970993,3053834265),H(2453635748,2937671579),H(2870763221,3664609560),H(3624381080,2734883394),H(310598401,1164996542),H(607225278,1323610764),H(1426881987,3590304994),H(1925078388,4068182383),H(2162078206,991336113),H(2614888103,633803317),H(3248222580,3479774868),H(3835390401,2666613458),H(4022224774,944711139),H(264347078,2341262773),H(604807628,2007800933),H(770255983,1495990901),H(1249150122,1856431235),H(1555081692,3175218132),H(1996064986,2198950837),H(2554220882,3999719339),H(2821834349,766784016),H(2952996808,2566594879),H(3210313671,3203337956),H(3336571891,1034457026),H(3584528711,2466948901),H(113926993,3758326383),H(338241895,168717936),H(666307205,1188179964),H(773529912,1546045734),H(1294757372,1522805485),H(1396182291,2643833823),H(1695183700,2343527390),H(1986661051,1014477480),H(2177026350,1206759142),H(2456956037,344077627),H(2730485921,1290863460),H(2820302411,3158454273),H(3259730800,3505952657),H(3345764771,106217008),H(3516065817,3606008344),H(3600352804,1432725776),H(4094571909,1467031594),H(275423344,851169720),H(430227734,3100823752),H(506948616,1363258195),H(659060556,3750685593),H(883997877,3785050280),H(958139571,3318307427),H(1322822218,3812723403),H(1537002063,2003034995),H(1747873779,3602036899),H(1955562222,1575990012),H(2024104815,1125592928),H(2227730452,2716904306),H(2361852424,442776044),H(2428436474,593698344),H(2756734187,3733110249),H(3204031479,2999351573),H(3329325298,3815920427),H(3391569614,3928383900),H(3515267271,566280711),H(3940187606,3454069534),H(4118630271,4000239992),H(116418474,1914138554),H(174292421,2731055270),H(289380356,3203993006),H(460393269,320620315),H(685471733,587496836),H(852142971,1086792851),H(1017036298,365543100),H(1126000580,2618297676),H(1288033470,3409855158),H(1501505948,4234509866),H(1607167915,987167468),H(1816402316,1246189591)],q=[];!function(){for(var re=0;re<80;re++)q[re]=H()}();var ye=k.SHA512=J.extend({_doReset:function(){this._hash=new X.init([new oe.init(1779033703,4089235720),new oe.init(3144134277,2227873595),new oe.init(1013904242,4271175723),new oe.init(2773480762,1595750129),new oe.init(1359893119,2917565137),new oe.init(2600822924,725511199),new oe.init(528734635,4215389547),new oe.init(1541459225,327033209)])},_doProcessBlock:function(re,O){for(var B=this._hash.words,me=B[0],D=B[1],x=B[2],p=B[3],W=B[4],T=B[5],R=B[6],le=B[7],j=me.high,F=me.low,ne=D.high,v=D.low,E=x.high,L=x.low,I=p.high,ie=p.low,ce=W.high,Ce=W.low,he=T.high,se=T.low,z=R.high,N=R.low,ee=le.high,Z=le.low,fe=j,U=F,Ee=ne,Me=v,Re=E,st=L,je=I,ct=ie,ot=ce,Pe=Ce,we=he,w=se,Le=z,Ke=N,xe=ee,ke=Z,Ve=0;Ve<80;Ve++){var _e,Te,Oe=q[Ve];if(Ve<16)Te=Oe.high=0|re[O+2*Ve],_e=Oe.low=0|re[O+2*Ve+1];else{var Xe=q[Ve-15],Ue=Xe.high,it=Xe.low,bt=(it>>>1|Ue<<31)^(it>>>8|Ue<<24)^(it>>>7|Ue<<25),yt=q[Ve-2],vt=yt.high,Et=yt.low,Mt=(Et>>>19|vt<<13)^(Et<<3|vt>>>29)^(Et>>>6|vt<<26),qt=q[Ve-7],fn=q[Ve-16],yn=fn.low;Oe.high=Te=(Te=(Te=((Ue>>>1|it<<31)^(Ue>>>8|it<<24)^Ue>>>7)+qt.high+((_e=bt+qt.low)>>>0<bt>>>0?1:0))+((vt>>>19|Et<<13)^(vt<<3|Et>>>29)^vt>>>6)+((_e+=Mt)>>>0<Mt>>>0?1:0))+fn.high+((_e+=yn)>>>0<yn>>>0?1:0),Oe.low=_e}var Pt,ai=ot&we^~ot&Le,Qt=Pe&w^~Pe&Ke,gi=fe&Ee^fe&Re^Ee&Re,Fe=(U>>>28|fe<<4)^(U<<30|fe>>>2)^(U<<25|fe>>>7),xt=ue[Ve],En=xt.low,Ct=xe+((ot>>>14|Pe<<18)^(ot>>>18|Pe<<14)^(ot<<23|Pe>>>9))+((Pt=ke+((Pe>>>14|ot<<18)^(Pe>>>18|ot<<14)^(Pe<<23|ot>>>9)))>>>0<ke>>>0?1:0),nn=Fe+(U&Me^U&st^Me&st);xe=Le,ke=Ke,Le=we,Ke=w,we=ot,w=Pe,ot=je+(Ct=(Ct=(Ct=Ct+ai+((Pt+=Qt)>>>0<Qt>>>0?1:0))+xt.high+((Pt+=En)>>>0<En>>>0?1:0))+Te+((Pt+=_e)>>>0<_e>>>0?1:0))+((Pe=ct+Pt|0)>>>0<ct>>>0?1:0)|0,je=Re,ct=st,Re=Ee,st=Me,Ee=fe,Me=U,fe=Ct+(((fe>>>28|U<<4)^(fe<<30|U>>>2)^(fe<<25|U>>>7))+gi+(nn>>>0<Fe>>>0?1:0))+((U=Pt+nn|0)>>>0<Pt>>>0?1:0)|0}F=me.low=F+U,me.high=j+fe+(F>>>0<U>>>0?1:0),v=D.low=v+Me,D.high=ne+Ee+(v>>>0<Me>>>0?1:0),L=x.low=L+st,x.high=E+Re+(L>>>0<st>>>0?1:0),ie=p.low=ie+ct,p.high=I+je+(ie>>>0<ct>>>0?1:0),Ce=W.low=Ce+Pe,W.high=ce+ot+(Ce>>>0<Pe>>>0?1:0),se=T.low=se+w,T.high=he+we+(se>>>0<w>>>0?1:0),N=R.low=N+Ke,R.high=z+Le+(N>>>0<Ke>>>0?1:0),Z=le.low=Z+ke,le.high=ee+xe+(Z>>>0<ke>>>0?1:0)},_doFinalize:function(){var re=this._data,O=re.words,B=8*this._nDataBytes,me=8*re.sigBytes;return O[me>>>5]|=128<<24-me%32,O[30+(me+128>>>10<<5)]=Math.floor(B/4294967296),O[31+(me+128>>>10<<5)]=B,re.sigBytes=4*O.length,this._process(),this._hash.toX32()},clone:function(){var re=J.clone.call(this);return re._hash=this._hash.clone(),re},blockSize:32});A.SHA512=J._createHelper(ye),A.HmacSHA512=J._createHmacHelper(ye)}(),m.SHA512)},94896:function(qe,be,t){var m;qe.exports=(m=t(95275),t(21272),t(1236),t(26528),t(90033),function(){var A=m,G=A.lib,J=G.WordArray,Y=G.BlockCipher,oe=A.algo,X=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],k=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],H=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],ue=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],q=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],ye=oe.DES=Y.extend({_doReset:function(){for(var D=this._key.words,x=[],p=0;p<56;p++){var W=X[p]-1;x[p]=D[W>>>5]>>>31-W%32&1}for(var T=this._subKeys=[],R=0;R<16;R++){var le=T[R]=[],j=H[R];for(p=0;p<24;p++)le[p/6|0]|=x[(k[p]-1+j)%28]<<31-p%6,le[4+(p/6|0)]|=x[28+(k[p+24]-1+j)%28]<<31-p%6;for(le[0]=le[0]<<1|le[0]>>>31,p=1;p<7;p++)le[p]=le[p]>>>4*(p-1)+3;le[7]=le[7]<<5|le[7]>>>27}var F=this._invSubKeys=[];for(p=0;p<16;p++)F[p]=T[15-p]},encryptBlock:function(me,D){this._doCryptBlock(me,D,this._subKeys)},decryptBlock:function(me,D){this._doCryptBlock(me,D,this._invSubKeys)},_doCryptBlock:function(me,D,x){this._lBlock=me[D],this._rBlock=me[D+1],re.call(this,4,252645135),re.call(this,16,65535),O.call(this,2,858993459),O.call(this,8,16711935),re.call(this,1,1431655765);for(var p=0;p<16;p++){for(var W=x[p],T=this._lBlock,R=this._rBlock,le=0,j=0;j<8;j++)le|=ue[j][((R^W[j])&q[j])>>>0];this._lBlock=R,this._rBlock=T^le}var F=this._lBlock;this._lBlock=this._rBlock,this._rBlock=F,re.call(this,1,1431655765),O.call(this,8,16711935),O.call(this,2,858993459),re.call(this,16,65535),re.call(this,4,252645135),me[D]=this._lBlock,me[D+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function re(me,D){var x=(this._lBlock>>>me^this._rBlock)&D;this._rBlock^=x,this._lBlock^=x<<me}function O(me,D){var x=(this._rBlock>>>me^this._lBlock)&D;this._lBlock^=x,this._rBlock^=x<<me}A.DES=Y._createHelper(ye);var B=oe.TripleDES=Y.extend({_doReset:function(){var D=this._key.words;if(2!==D.length&&4!==D.length&&D.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var x=D.slice(0,2),p=D.length<4?D.slice(0,2):D.slice(2,4),W=D.length<6?D.slice(0,2):D.slice(4,6);this._des1=ye.createEncryptor(J.create(x)),this._des2=ye.createEncryptor(J.create(p)),this._des3=ye.createEncryptor(J.create(W))},encryptBlock:function(me,D){this._des1.encryptBlock(me,D),this._des2.decryptBlock(me,D),this._des3.encryptBlock(me,D)},decryptBlock:function(me,D){this._des3.decryptBlock(me,D),this._des2.encryptBlock(me,D),this._des1.decryptBlock(me,D)},keySize:6,ivSize:2,blockSize:2});A.TripleDES=Y._createHelper(B)}(),m.TripleDES)},46882:function(qe,be,t){var J,Y,oe,X,m;qe.exports=(m=t(95275),Y=(J=m.lib).Base,oe=J.WordArray,(X=m.x64={}).Word=Y.extend({init:function(ue,q){this.high=ue,this.low=q}}),X.WordArray=Y.extend({init:function(ue,q){ue=this.words=ue||[],this.sigBytes=null!=q?q:8*ue.length},toX32:function(){for(var ue=this.words,q=ue.length,ye=[],re=0;re<q;re++){var O=ue[re];ye.push(O.high),ye.push(O.low)}return oe.create(ye,this.sigBytes)},clone:function(){for(var ue=Y.clone.call(this),q=ue.words=this.words.slice(0),ye=q.length,re=0;re<ye;re++)q[re]=q[re].clone();return ue}}),m)},62031:(qe,be,t)=>{"use strict";t.d(be,{t:()=>A});var m=t(43794);class A extends m.B{constructor(J){super(),this._value=J}get value(){return this.getValue()}_subscribe(J){const Y=super._subscribe(J);return!Y.closed&&J.next(this._value),Y}getValue(){const{hasError:J,thrownError:Y,_value:oe}=this;if(J)throw Y;return this._throwIfClosed(),oe}next(J){super.next(this._value=J)}}},94366:(qe,be,t)=>{"use strict";t.d(be,{c:()=>k});var m=t(70088),A=t(40740),G=t(81113),J=t(93584),Y=t(18645),oe=t(20452),X=t(27405);let k=(()=>{class ye{constructor(O){O&&(this._subscribe=O)}lift(O){const B=new ye;return B.source=this,B.operator=O,B}subscribe(O,B,me){const D=function q(ye){return ye&&ye instanceof m.vU||function ue(ye){return ye&&(0,oe.T)(ye.next)&&(0,oe.T)(ye.error)&&(0,oe.T)(ye.complete)}(ye)&&(0,A.Uv)(ye)}(O)?O:new m.Ms(O,B,me);return(0,X.Y)(()=>{const{operator:x,source:p}=this;D.add(x?x.call(D,p):p?this._subscribe(D):this._trySubscribe(D))}),D}_trySubscribe(O){try{return this._subscribe(O)}catch(B){O.error(B)}}forEach(O,B){return new(B=H(B))((me,D)=>{const x=new m.Ms({next:p=>{try{O(p)}catch(W){D(W),x.unsubscribe()}},error:D,complete:me});this.subscribe(x)})}_subscribe(O){var B;return null===(B=this.source)||void 0===B?void 0:B.subscribe(O)}[G.s](){return this}pipe(...O){return(0,J.m)(O)(this)}toPromise(O){return new(O=H(O))((B,me)=>{let D;this.subscribe(x=>D=x,x=>me(x),()=>B(D))})}}return ye.create=re=>new ye(re),ye})();function H(ye){var re;return null!==(re=ye??Y.$.Promise)&&void 0!==re?re:Promise}},15152:(qe,be,t)=>{"use strict";t.d(be,{m:()=>G});var m=t(43794),A=t(8510);class G extends m.B{constructor(Y=1/0,oe=1/0,X=A.U){super(),this._bufferSize=Y,this._windowTime=oe,this._timestampProvider=X,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=oe===1/0,this._bufferSize=Math.max(1,Y),this._windowTime=Math.max(1,oe)}next(Y){const{isStopped:oe,_buffer:X,_infiniteTimeWindow:k,_timestampProvider:H,_windowTime:ue}=this;oe||(X.push(Y),!k&&X.push(H.now()+ue)),this._trimBuffer(),super.next(Y)}_subscribe(Y){this._throwIfClosed(),this._trimBuffer();const oe=this._innerSubscribe(Y),{_infiniteTimeWindow:X,_buffer:k}=this,H=k.slice();for(let ue=0;ue<H.length&&!Y.closed;ue+=X?1:2)Y.next(H[ue]);return this._checkFinalizedStatuses(Y),oe}_trimBuffer(){const{_bufferSize:Y,_timestampProvider:oe,_buffer:X,_infiniteTimeWindow:k}=this,H=(k?1:2)*Y;if(Y<1/0&&H<X.length&&X.splice(0,X.length-H),!k){const ue=oe.now();let q=0;for(let ye=1;ye<X.length&&X[ye]<=ue;ye+=2)q=ye;q&&X.splice(0,q+1)}}}},43794:(qe,be,t)=>{"use strict";t.d(be,{B:()=>X});var m=t(94366),A=t(40740);const J=(0,t(4234).L)(H=>function(){H(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Y=t(35527),oe=t(27405);let X=(()=>{class H extends m.c{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(q){const ye=new k(this,this);return ye.operator=q,ye}_throwIfClosed(){if(this.closed)throw new J}next(q){(0,oe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const ye of this.currentObservers)ye.next(q)}})}error(q){(0,oe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=q;const{observers:ye}=this;for(;ye.length;)ye.shift().error(q)}})}complete(){(0,oe.Y)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:q}=this;for(;q.length;)q.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var q;return(null===(q=this.observers)||void 0===q?void 0:q.length)>0}_trySubscribe(q){return this._throwIfClosed(),super._trySubscribe(q)}_subscribe(q){return this._throwIfClosed(),this._checkFinalizedStatuses(q),this._innerSubscribe(q)}_innerSubscribe(q){const{hasError:ye,isStopped:re,observers:O}=this;return ye||re?A.Kn:(this.currentObservers=null,O.push(q),new A.yU(()=>{this.currentObservers=null,(0,Y.o)(O,q)}))}_checkFinalizedStatuses(q){const{hasError:ye,thrownError:re,isStopped:O}=this;ye?q.error(re):O&&q.complete()}asObservable(){const q=new m.c;return q.source=this,q}}return H.create=(ue,q)=>new k(ue,q),H})();class k extends X{constructor(ue,q){super(),this.destination=ue,this.source=q}next(ue){var q,ye;null===(ye=null===(q=this.destination)||void 0===q?void 0:q.next)||void 0===ye||ye.call(q,ue)}error(ue){var q,ye;null===(ye=null===(q=this.destination)||void 0===q?void 0:q.error)||void 0===ye||ye.call(q,ue)}complete(){var ue,q;null===(q=null===(ue=this.destination)||void 0===ue?void 0:ue.complete)||void 0===q||q.call(ue)}_subscribe(ue){var q,ye;return null!==(ye=null===(q=this.source)||void 0===q?void 0:q.subscribe(ue))&&void 0!==ye?ye:A.Kn}}},70088:(qe,be,t)=>{"use strict";t.d(be,{Ms:()=>me,vU:()=>ye});var m=t(20452),A=t(40740),G=t(18645),J=t(22953),Y=t(7724);const oe=H("C",void 0,void 0);function H(T,R,le){return{kind:T,value:R,error:le}}var ue=t(96889),q=t(27405);class ye extends A.yU{constructor(R){super(),this.isStopped=!1,R?(this.destination=R,(0,A.Uv)(R)&&R.add(this)):this.destination=W}static create(R,le,j){return new me(R,le,j)}next(R){this.isStopped?p(function k(T){return H("N",T,void 0)}(R),this):this._next(R)}error(R){this.isStopped?p(function X(T){return H("E",void 0,T)}(R),this):(this.isStopped=!0,this._error(R))}complete(){this.isStopped?p(oe,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(R){this.destination.next(R)}_error(R){try{this.destination.error(R)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const re=Function.prototype.bind;function O(T,R){return re.call(T,R)}class B{constructor(R){this.partialObserver=R}next(R){const{partialObserver:le}=this;if(le.next)try{le.next(R)}catch(j){D(j)}}error(R){const{partialObserver:le}=this;if(le.error)try{le.error(R)}catch(j){D(j)}else D(R)}complete(){const{partialObserver:R}=this;if(R.complete)try{R.complete()}catch(le){D(le)}}}class me extends ye{constructor(R,le,j){let F;if(super(),(0,m.T)(R)||!R)F={next:R??void 0,error:le??void 0,complete:j??void 0};else{let ne;this&&G.$.useDeprecatedNextContext?(ne=Object.create(R),ne.unsubscribe=()=>this.unsubscribe(),F={next:R.next&&O(R.next,ne),error:R.error&&O(R.error,ne),complete:R.complete&&O(R.complete,ne)}):F=R}this.destination=new B(F)}}function D(T){G.$.useDeprecatedSynchronousErrorHandling?(0,q.l)(T):(0,J.m)(T)}function p(T,R){const{onStoppedNotification:le}=G.$;le&&ue.f.setTimeout(()=>le(T,R))}const W={closed:!0,next:Y.l,error:function x(T){throw T},complete:Y.l}},40740:(qe,be,t)=>{"use strict";t.d(be,{Kn:()=>oe,yU:()=>Y,Uv:()=>X});var m=t(20452);const G=(0,t(4234).L)(H=>function(q){H(this),this.message=q?`${q.length} errors occurred during unsubscription:\n${q.map((ye,re)=>`${re+1}) ${ye.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=q});var J=t(35527);class Y{constructor(ue){this.initialTeardown=ue,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ue;if(!this.closed){this.closed=!0;const{_parentage:q}=this;if(q)if(this._parentage=null,Array.isArray(q))for(const O of q)O.remove(this);else q.remove(this);const{initialTeardown:ye}=this;if((0,m.T)(ye))try{ye()}catch(O){ue=O instanceof G?O.errors:[O]}const{_finalizers:re}=this;if(re){this._finalizers=null;for(const O of re)try{k(O)}catch(B){ue=ue??[],B instanceof G?ue=[...ue,...B.errors]:ue.push(B)}}if(ue)throw new G(ue)}}add(ue){var q;if(ue&&ue!==this)if(this.closed)k(ue);else{if(ue instanceof Y){if(ue.closed||ue._hasParent(this))return;ue._addParent(this)}(this._finalizers=null!==(q=this._finalizers)&&void 0!==q?q:[]).push(ue)}}_hasParent(ue){const{_parentage:q}=this;return q===ue||Array.isArray(q)&&q.includes(ue)}_addParent(ue){const{_parentage:q}=this;this._parentage=Array.isArray(q)?(q.push(ue),q):q?[q,ue]:ue}_removeParent(ue){const{_parentage:q}=this;q===ue?this._parentage=null:Array.isArray(q)&&(0,J.o)(q,ue)}remove(ue){const{_finalizers:q}=this;q&&(0,J.o)(q,ue),ue instanceof Y&&ue._removeParent(this)}}Y.EMPTY=(()=>{const H=new Y;return H.closed=!0,H})();const oe=Y.EMPTY;function X(H){return H instanceof Y||H&&"closed"in H&&(0,m.T)(H.remove)&&(0,m.T)(H.add)&&(0,m.T)(H.unsubscribe)}function k(H){(0,m.T)(H)?H():H.unsubscribe()}},18645:(qe,be,t)=>{"use strict";t.d(be,{$:()=>m});const m={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},77224:(qe,be,t)=>{"use strict";t.d(be,{_:()=>G});var m=t(86969),A=t(70088);function G(J,Y){const oe="object"==typeof Y;return new Promise((X,k)=>{const H=new A.Ms({next:ue=>{X(ue),H.unsubscribe()},error:k,complete:()=>{oe?X(Y.defaultValue):k(new m.G)}});J.subscribe(H)})}},51174:(qe,be,t)=>{"use strict";t.d(be,{x:()=>Y});var m=t(48746),G=t(86945),J=t(425);function Y(...oe){return function A(){return(0,m.U)(1)}()((0,J.H)(oe,(0,G.lI)(oe)))}},36649:(qe,be,t)=>{"use strict";t.d(be,{v:()=>G});var m=t(94366),A=t(36369);function G(J){return new m.c(Y=>{(0,A.Tg)(J()).subscribe(Y)})}},23364:(qe,be,t)=>{"use strict";t.d(be,{w:()=>A});const A=new(t(94366).c)(Y=>Y.complete())},5087:(qe,be,t)=>{"use strict";t.d(be,{p:()=>k});var m=t(94366),A=t(15454),G=t(36369),J=t(86945),Y=t(31979),oe=t(84069),X=t(13734);function k(...H){const ue=(0,J.ms)(H),{args:q,keys:ye}=(0,A.D)(H),re=new m.c(O=>{const{length:B}=q;if(!B)return void O.complete();const me=new Array(B);let D=B,x=B;for(let p=0;p<B;p++){let W=!1;(0,G.Tg)(q[p]).subscribe((0,Y._)(O,T=>{W||(W=!0,x--),me[p]=T},()=>D--,void 0,()=>{(!D||!W)&&(x||O.next(ye?(0,X.e)(ye,me):me),O.complete())}))}});return ue?re.pipe((0,oe.I)(ue)):re}},425:(qe,be,t)=>{"use strict";t.d(be,{H:()=>le});var m=t(36369),A=t(63322),G=t(17593);function J(j,F=0){return(0,G.N)((ne,v)=>{v.add(j.schedule(()=>ne.subscribe(v),F))})}var X=t(94366),H=t(27142),ue=t(20452),q=t(67606);function re(j,F){if(!j)throw new Error("Iterable cannot be null");return new X.c(ne=>{(0,q.N)(ne,F,()=>{const v=j[Symbol.asyncIterator]();(0,q.N)(ne,F,()=>{v.next().then(E=>{E.done?ne.complete():ne.next(E.value)})},0,!0)})})}var O=t(77436),B=t(37477),me=t(69822),D=t(7778),x=t(60334),p=t(72972),W=t(92815);function le(j,F){return F?function R(j,F){if(null!=j){if((0,O.l)(j))return function Y(j,F){return(0,m.Tg)(j).pipe(J(F),(0,A.Q)(F))}(j,F);if((0,me.X)(j))return function k(j,F){return new X.c(ne=>{let v=0;return F.schedule(function(){v===j.length?ne.complete():(ne.next(j[v++]),ne.closed||this.schedule())})})}(j,F);if((0,B.y)(j))return function oe(j,F){return(0,m.Tg)(j).pipe(J(F),(0,A.Q)(F))}(j,F);if((0,x.T)(j))return re(j,F);if((0,D.x)(j))return function ye(j,F){return new X.c(ne=>{let v;return(0,q.N)(ne,F,()=>{v=j[H.l](),(0,q.N)(ne,F,()=>{let E,L;try{({value:E,done:L}=v.next())}catch(I){return void ne.error(I)}L?ne.complete():ne.next(E)},0,!0)}),()=>(0,ue.T)(v?.return)&&v.return()})}(j,F);if((0,W.U)(j))return function T(j,F){return re((0,W.C)(j),F)}(j,F)}throw(0,p.L)(j)}(j,F):(0,m.Tg)(j)}},11345:(qe,be,t)=>{"use strict";t.d(be,{R:()=>ue});var m=t(36369),A=t(94366),G=t(53778),J=t(69822),Y=t(20452),oe=t(84069);const X=["addListener","removeListener"],k=["addEventListener","removeEventListener"],H=["on","off"];function ue(B,me,D,x){if((0,Y.T)(D)&&(x=D,D=void 0),x)return ue(B,me,D).pipe((0,oe.I)(x));const[p,W]=function O(B){return(0,Y.T)(B.addEventListener)&&(0,Y.T)(B.removeEventListener)}(B)?k.map(T=>R=>B[T](me,R,D)):function ye(B){return(0,Y.T)(B.addListener)&&(0,Y.T)(B.removeListener)}(B)?X.map(q(B,me)):function re(B){return(0,Y.T)(B.on)&&(0,Y.T)(B.off)}(B)?H.map(q(B,me)):[];if(!p&&(0,J.X)(B))return(0,G.Z)(T=>ue(T,me,D))((0,m.Tg)(B));if(!p)throw new TypeError("Invalid event target");return new A.c(T=>{const R=(...le)=>T.next(1<le.length?le:le[0]);return p(R),()=>W(R)})}function q(B,me){return D=>x=>B[D](me,x)}},36369:(qe,be,t)=>{"use strict";t.d(be,{Tg:()=>re});var m=t(54016),A=t(69822),G=t(37477),J=t(94366),Y=t(77436),oe=t(60334),X=t(72972),k=t(7778),H=t(92815),ue=t(20452),q=t(22953),ye=t(81113);function re(T){if(T instanceof J.c)return T;if(null!=T){if((0,Y.l)(T))return function O(T){return new J.c(R=>{const le=T[ye.s]();if((0,ue.T)(le.subscribe))return le.subscribe(R);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(T);if((0,A.X)(T))return function B(T){return new J.c(R=>{for(let le=0;le<T.length&&!R.closed;le++)R.next(T[le]);R.complete()})}(T);if((0,G.y)(T))return function me(T){return new J.c(R=>{T.then(le=>{R.closed||(R.next(le),R.complete())},le=>R.error(le)).then(null,q.m)})}(T);if((0,oe.T)(T))return x(T);if((0,k.x)(T))return function D(T){return new J.c(R=>{for(const le of T)if(R.next(le),R.closed)return;R.complete()})}(T);if((0,H.U)(T))return function p(T){return x((0,H.C)(T))}(T)}throw(0,X.L)(T)}function x(T){return new J.c(R=>{(function W(T,R){var le,j,F,ne;return(0,m.sH)(this,void 0,void 0,function*(){try{for(le=(0,m.xN)(T);!(j=yield le.next()).done;)if(R.next(j.value),R.closed)return}catch(v){F={error:v}}finally{try{j&&!j.done&&(ne=le.return)&&(yield ne.call(le))}finally{if(F)throw F.error}}R.complete()})})(T,R).catch(le=>R.error(le))})}},30054:(qe,be,t)=>{"use strict";t.d(be,{of:()=>G});var m=t(86945),A=t(425);function G(...J){const Y=(0,m.lI)(J);return(0,A.H)(J,Y)}},31979:(qe,be,t)=>{"use strict";t.d(be,{_:()=>A});var m=t(70088);function A(J,Y,oe,X,k){return new G(J,Y,oe,X,k)}class G extends m.vU{constructor(Y,oe,X,k,H,ue){super(Y),this.onFinalize=H,this.shouldUnsubscribe=ue,this._next=oe?function(q){try{oe(q)}catch(ye){Y.error(ye)}}:super._next,this._error=k?function(q){try{k(q)}catch(ye){Y.error(ye)}finally{this.unsubscribe()}}:super._error,this._complete=X?function(){try{X()}catch(q){Y.error(q)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Y;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:oe}=this;super.unsubscribe(),!oe&&(null===(Y=this.onFinalize)||void 0===Y||Y.call(this))}}}},47893:(qe,be,t)=>{"use strict";t.d(be,{H:()=>G});var m=t(53778),A=t(20452);function G(J,Y){return(0,A.T)(Y)?(0,m.Z)(J,Y,1):(0,m.Z)(J,1)}},47771:(qe,be,t)=>{"use strict";t.d(be,{B:()=>J});var m=t(20855),A=t(17593),G=t(31979);function J(Y,oe=m.E){return(0,A.N)((X,k)=>{let H=null,ue=null,q=null;const ye=()=>{if(H){H.unsubscribe(),H=null;const O=ue;ue=null,k.next(O)}};function re(){const O=q+Y,B=oe.now();if(B<O)return H=this.schedule(void 0,O-B),void k.add(H);ye()}X.subscribe((0,G._)(k,O=>{ue=O,q=oe.now(),H||(H=oe.schedule(re,Y),k.add(H))},()=>{ye(),k.complete()},void 0,()=>{ue=H=null}))})}},73973:(qe,be,t)=>{"use strict";t.d(be,{T:()=>G});var m=t(17593),A=t(31979);function G(J,Y){return(0,m.N)((oe,X)=>{let k=0;oe.subscribe((0,A._)(X,H=>{X.next(J.call(Y,H,k++))}))})}},48746:(qe,be,t)=>{"use strict";t.d(be,{U:()=>G});var m=t(53778),A=t(56050);function G(J=1/0){return(0,m.Z)(A.D,J)}},53778:(qe,be,t)=>{"use strict";t.d(be,{Z:()=>k});var m=t(73973),A=t(36369),G=t(17593),J=t(67606),Y=t(31979),X=t(20452);function k(H,ue,q=1/0){return(0,X.T)(ue)?k((ye,re)=>(0,m.T)((O,B)=>ue(ye,O,re,B))((0,A.Tg)(H(ye,re))),q):("number"==typeof ue&&(q=ue),(0,G.N)((ye,re)=>function oe(H,ue,q,ye,re,O,B,me){const D=[];let x=0,p=0,W=!1;const T=()=>{W&&!D.length&&!x&&ue.complete()},R=j=>x<ye?le(j):D.push(j),le=j=>{O&&ue.next(j),x++;let F=!1;(0,A.Tg)(q(j,p++)).subscribe((0,Y._)(ue,ne=>{re?.(ne),O?R(ne):ue.next(ne)},()=>{F=!0},void 0,()=>{if(F)try{for(x--;D.length&&x<ye;){const ne=D.shift();B?(0,J.N)(ue,B,()=>le(ne)):le(ne)}T()}catch(ne){ue.error(ne)}}))};return H.subscribe((0,Y._)(ue,R,()=>{W=!0,T()})),()=>{me?.()}}(ye,re,H,q)))}},63322:(qe,be,t)=>{"use strict";t.d(be,{Q:()=>J});var m=t(67606),A=t(17593),G=t(31979);function J(Y,oe=0){return(0,A.N)((X,k)=>{X.subscribe((0,G._)(k,H=>(0,m.N)(k,Y,()=>k.next(H),oe),()=>(0,m.N)(k,Y,()=>k.complete(),oe),H=>(0,m.N)(k,Y,()=>k.error(H),oe)))})}},20028:(qe,be,t)=>{"use strict";t.d(be,{u:()=>Y});var m=t(36369),A=t(43794),G=t(70088),J=t(17593);function Y(X={}){const{connector:k=(()=>new A.B),resetOnError:H=!0,resetOnComplete:ue=!0,resetOnRefCountZero:q=!0}=X;return ye=>{let re,O,B,me=0,D=!1,x=!1;const p=()=>{O?.unsubscribe(),O=void 0},W=()=>{p(),re=B=void 0,D=x=!1},T=()=>{const R=re;W(),R?.unsubscribe()};return(0,J.N)((R,le)=>{me++,!x&&!D&&p();const j=B=B??k();le.add(()=>{me--,0===me&&!x&&!D&&(O=oe(T,q))}),j.subscribe(le),!re&&me>0&&(re=new G.Ms({next:F=>j.next(F),error:F=>{x=!0,p(),O=oe(W,H,F),j.error(F)},complete:()=>{D=!0,p(),O=oe(W,ue),j.complete()}}),(0,m.Tg)(R).subscribe(re))})(ye)}}function oe(X,k,...H){if(!0===k)return void X();if(!1===k)return;const ue=new G.Ms({next:()=>{ue.unsubscribe(),X()}});return(0,m.Tg)(k(...H)).subscribe(ue)}},22287:(qe,be,t)=>{"use strict";t.d(be,{t:()=>G});var m=t(15152),A=t(20028);function G(J,Y,oe){let X,k=!1;return J&&"object"==typeof J?({bufferSize:X=1/0,windowTime:Y=1/0,refCount:k=!1,scheduler:oe}=J):X=J??1/0,(0,A.u)({connector:()=>new m.m(X,Y,oe),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:k})}},3177:(qe,be,t)=>{"use strict";t.d(be,{n:()=>J});var m=t(36369),A=t(17593),G=t(31979);function J(Y,oe){return(0,A.N)((X,k)=>{let H=null,ue=0,q=!1;const ye=()=>q&&!H&&k.complete();X.subscribe((0,G._)(k,re=>{H?.unsubscribe();let O=0;const B=ue++;(0,m.Tg)(Y(re,B)).subscribe(H=(0,G._)(k,me=>k.next(oe?oe(re,me,B,O++):me),()=>{H=null,ye()}))},()=>{q=!0,ye()}))})}},19078:(qe,be,t)=>{"use strict";t.d(be,{s:()=>J});var m=t(23364),A=t(17593),G=t(31979);function J(Y){return Y<=0?()=>m.w:(0,A.N)((oe,X)=>{let k=0;oe.subscribe((0,G._)(X,H=>{++k<=Y&&(X.next(H),Y<=k&&X.complete())}))})}},79358:(qe,be,t)=>{"use strict";t.d(be,{Q:()=>Y});var m=t(17593),A=t(31979),G=t(36369),J=t(7724);function Y(oe){return(0,m.N)((X,k)=>{(0,G.Tg)(oe).subscribe((0,A._)(k,()=>k.complete(),J.l)),!k.closed&&X.subscribe(k)})}},74399:(qe,be,t)=>{"use strict";t.d(be,{R:()=>Y});var m=t(40740);class A extends m.yU{constructor(X,k){super()}schedule(X,k=0){return this}}const G={setInterval(oe,X,...k){const{delegate:H}=G;return H?.setInterval?H.setInterval(oe,X,...k):setInterval(oe,X,...k)},clearInterval(oe){const{delegate:X}=G;return(X?.clearInterval||clearInterval)(oe)},delegate:void 0};var J=t(35527);class Y extends A{constructor(X,k){super(X,k),this.scheduler=X,this.work=k,this.pending=!1}schedule(X,k=0){var H;if(this.closed)return this;this.state=X;const ue=this.id,q=this.scheduler;return null!=ue&&(this.id=this.recycleAsyncId(q,ue,k)),this.pending=!0,this.delay=k,this.id=null!==(H=this.id)&&void 0!==H?H:this.requestAsyncId(q,this.id,k),this}requestAsyncId(X,k,H=0){return G.setInterval(X.flush.bind(X,this),H)}recycleAsyncId(X,k,H=0){if(null!=H&&this.delay===H&&!1===this.pending)return k;null!=k&&G.clearInterval(k)}execute(X,k){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const H=this._execute(X,k);if(H)return H;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(X,k){let ue,H=!1;try{this.work(X)}catch(q){H=!0,ue=q||new Error("Scheduled action threw falsy error")}if(H)return this.unsubscribe(),ue}unsubscribe(){if(!this.closed){const{id:X,scheduler:k}=this,{actions:H}=k;this.work=this.state=this.scheduler=null,this.pending=!1,(0,J.o)(H,this),null!=X&&(this.id=this.recycleAsyncId(k,X,null)),this.delay=null,super.unsubscribe()}}}},62068:(qe,be,t)=>{"use strict";t.d(be,{q:()=>G});var m=t(8510);class A{constructor(Y,oe=A.now){this.schedulerActionCtor=Y,this.now=oe}schedule(Y,oe=0,X){return new this.schedulerActionCtor(this,Y).schedule(X,oe)}}A.now=m.U.now;class G extends A{constructor(Y,oe=A.now){super(Y,oe),this.actions=[],this._active=!1}flush(Y){const{actions:oe}=this;if(this._active)return void oe.push(Y);let X;this._active=!0;do{if(X=Y.execute(Y.state,Y.delay))break}while(Y=oe.shift());if(this._active=!1,X){for(;Y=oe.shift();)Y.unsubscribe();throw X}}}},20855:(qe,be,t)=>{"use strict";t.d(be,{E:()=>G,b:()=>J});var m=t(74399);const G=new(t(62068).q)(m.R),J=G},8510:(qe,be,t)=>{"use strict";t.d(be,{U:()=>m});const m={now:()=>(m.delegate||Date).now(),delegate:void 0}},96889:(qe,be,t)=>{"use strict";t.d(be,{f:()=>m});const m={setTimeout(A,G,...J){const{delegate:Y}=m;return Y?.setTimeout?Y.setTimeout(A,G,...J):setTimeout(A,G,...J)},clearTimeout(A){const{delegate:G}=m;return(G?.clearTimeout||clearTimeout)(A)},delegate:void 0}},27142:(qe,be,t)=>{"use strict";t.d(be,{l:()=>A});const A=function m(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},81113:(qe,be,t)=>{"use strict";t.d(be,{s:()=>m});const m="function"==typeof Symbol&&Symbol.observable||"@@observable"},86969:(qe,be,t)=>{"use strict";t.d(be,{G:()=>A});const A=(0,t(4234).L)(G=>function(){G(this),this.name="EmptyError",this.message="no elements in sequence"})},86945:(qe,be,t)=>{"use strict";t.d(be,{R0:()=>oe,lI:()=>Y,ms:()=>J});var m=t(20452),A=t(57089);function G(X){return X[X.length-1]}function J(X){return(0,m.T)(G(X))?X.pop():void 0}function Y(X){return(0,A.m)(G(X))?X.pop():void 0}function oe(X,k){return"number"==typeof G(X)?X.pop():k}},15454:(qe,be,t)=>{"use strict";t.d(be,{D:()=>Y});const{isArray:m}=Array,{getPrototypeOf:A,prototype:G,keys:J}=Object;function Y(X){if(1===X.length){const k=X[0];if(m(k))return{args:k,keys:null};if(function oe(X){return X&&"object"==typeof X&&A(X)===G}(k)){const H=J(k);return{args:H.map(ue=>k[ue]),keys:H}}}return{args:X,keys:null}}},35527:(qe,be,t)=>{"use strict";function m(A,G){if(A){const J=A.indexOf(G);0<=J&&A.splice(J,1)}}t.d(be,{o:()=>m})},4234:(qe,be,t)=>{"use strict";function m(A){const J=A(Y=>{Error.call(Y),Y.stack=(new Error).stack});return J.prototype=Object.create(Error.prototype),J.prototype.constructor=J,J}t.d(be,{L:()=>m})},13734:(qe,be,t)=>{"use strict";function m(A,G){return A.reduce((J,Y,oe)=>(J[Y]=G[oe],J),{})}t.d(be,{e:()=>m})},27405:(qe,be,t)=>{"use strict";t.d(be,{Y:()=>G,l:()=>J});var m=t(18645);let A=null;function G(Y){if(m.$.useDeprecatedSynchronousErrorHandling){const oe=!A;if(oe&&(A={errorThrown:!1,error:null}),Y(),oe){const{errorThrown:X,error:k}=A;if(A=null,X)throw k}}else Y()}function J(Y){m.$.useDeprecatedSynchronousErrorHandling&&A&&(A.errorThrown=!0,A.error=Y)}},67606:(qe,be,t)=>{"use strict";function m(A,G,J,Y=0,oe=!1){const X=G.schedule(function(){J(),oe?A.add(this.schedule(null,Y)):this.unsubscribe()},Y);if(A.add(X),!oe)return X}t.d(be,{N:()=>m})},56050:(qe,be,t)=>{"use strict";function m(A){return A}t.d(be,{D:()=>m})},69822:(qe,be,t)=>{"use strict";t.d(be,{X:()=>m});const m=A=>A&&"number"==typeof A.length&&"function"!=typeof A},60334:(qe,be,t)=>{"use strict";t.d(be,{T:()=>A});var m=t(20452);function A(G){return Symbol.asyncIterator&&(0,m.T)(G?.[Symbol.asyncIterator])}},20452:(qe,be,t)=>{"use strict";function m(A){return"function"==typeof A}t.d(be,{T:()=>m})},77436:(qe,be,t)=>{"use strict";t.d(be,{l:()=>G});var m=t(81113),A=t(20452);function G(J){return(0,A.T)(J[m.s])}},7778:(qe,be,t)=>{"use strict";t.d(be,{x:()=>G});var m=t(27142),A=t(20452);function G(J){return(0,A.T)(J?.[m.l])}},52021:(qe,be,t)=>{"use strict";t.d(be,{A:()=>G});var m=t(94366),A=t(20452);function G(J){return!!J&&(J instanceof m.c||(0,A.T)(J.lift)&&(0,A.T)(J.subscribe))}},37477:(qe,be,t)=>{"use strict";t.d(be,{y:()=>A});var m=t(20452);function A(G){return(0,m.T)(G?.then)}},92815:(qe,be,t)=>{"use strict";t.d(be,{C:()=>G,U:()=>J});var m=t(54016),A=t(20452);function G(Y){return(0,m.AQ)(this,arguments,function*(){const X=Y.getReader();try{for(;;){const{value:k,done:H}=yield(0,m.N3)(X.read());if(H)return yield(0,m.N3)(void 0);yield yield(0,m.N3)(k)}}finally{X.releaseLock()}})}function J(Y){return(0,A.T)(Y?.getReader)}},57089:(qe,be,t)=>{"use strict";t.d(be,{m:()=>A});var m=t(20452);function A(G){return G&&(0,m.T)(G.schedule)}},17593:(qe,be,t)=>{"use strict";t.d(be,{N:()=>G,S:()=>A});var m=t(20452);function A(J){return(0,m.T)(J?.lift)}function G(J){return Y=>{if(A(Y))return Y.lift(function(oe){try{return J(oe,this)}catch(X){this.error(X)}});throw new TypeError("Unable to lift unknown Observable type")}}},84069:(qe,be,t)=>{"use strict";t.d(be,{I:()=>J});var m=t(73973);const{isArray:A}=Array;function J(Y){return(0,m.T)(oe=>function G(Y,oe){return A(oe)?Y(...oe):Y(oe)}(Y,oe))}},7724:(qe,be,t)=>{"use strict";function m(){}t.d(be,{l:()=>m})},93584:(qe,be,t)=>{"use strict";t.d(be,{F:()=>A,m:()=>G});var m=t(56050);function A(...J){return G(J)}function G(J){return 0===J.length?m.D:1===J.length?J[0]:function(oe){return J.reduce((X,k)=>k(X),oe)}}},22953:(qe,be,t)=>{"use strict";t.d(be,{m:()=>G});var m=t(18645),A=t(96889);function G(J){A.f.setTimeout(()=>{const{onUnhandledError:Y}=m.$;if(!Y)throw J;Y(J)})}},72972:(qe,be,t)=>{"use strict";function m(A){return new TypeError(`You provided ${null!==A&&"object"==typeof A?"an invalid object":`'${A}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}t.d(be,{L:()=>m})},72858:()=>{},82558:(qe,be,t)=>{"use strict";t.d(be,{AJ:()=>vo,B3:()=>_t,Jj:()=>gn,MD:()=>Wo,N0:()=>so,P9:()=>Ys,QT:()=>G,QX:()=>ts,Sm:()=>me,Sq:()=>rs,T3:()=>Mn,UE:()=>hi,VF:()=>Y,Vy:()=>Ur,Xr:()=>So,YU:()=>dn,ZD:()=>J,_b:()=>_i,aZ:()=>x,bT:()=>Nr,e1:()=>dr,fw:()=>D,hb:()=>O,hj:()=>H,qQ:()=>X,ux:()=>ps,vh:()=>Uo});var m=t(32057);let A=null;function G(){return A}function J(b){A??=b}class Y{}const X=new m.nKC("");let k=(()=>{class b{historyGo(Q){throw new Error("")}static#e=this.\u0275fac=function(ae){return new(ae||b)};static#t=this.\u0275prov=m.jDH({token:b,factory:()=>(0,m.WQX)(ue),providedIn:"platform"})}return b})();const H=new m.nKC("");let ue=(()=>{class b extends k{constructor(){super(),this._doc=(0,m.WQX)(X),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return G().getBaseHref(this._doc)}onPopState(Q){const ae=G().getGlobalEventTarget(this._doc,"window");return ae.addEventListener("popstate",Q,!1),()=>ae.removeEventListener("popstate",Q)}onHashChange(Q){const ae=G().getGlobalEventTarget(this._doc,"window");return ae.addEventListener("hashchange",Q,!1),()=>ae.removeEventListener("hashchange",Q)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(Q){this._location.pathname=Q}pushState(Q,ae,Ne){this._history.pushState(Q,ae,Ne)}replaceState(Q,ae,Ne){this._history.replaceState(Q,ae,Ne)}forward(){this._history.forward()}back(){this._history.back()}historyGo(Q=0){this._history.go(Q)}getState(){return this._history.state}static#e=this.\u0275fac=function(ae){return new(ae||b)};static#t=this.\u0275prov=m.jDH({token:b,factory:()=>new b,providedIn:"platform"})}return b})();function q(b,De){if(0==b.length)return De;if(0==De.length)return b;let Q=0;return b.endsWith("/")&&Q++,De.startsWith("/")&&Q++,2==Q?b+De.substring(1):1==Q?b+De:b+"/"+De}function ye(b){const De=b.match(/#|\?|$/),Q=De&&De.index||b.length;return b.slice(0,Q-("/"===b[Q-1]?1:0))+b.slice(Q)}function re(b){return b&&"?"!==b[0]?"?"+b:b}let O=(()=>{class b{historyGo(Q){throw new Error("")}static#e=this.\u0275fac=function(ae){return new(ae||b)};static#t=this.\u0275prov=m.jDH({token:b,factory:()=>(0,m.WQX)(me),providedIn:"root"})}return b})();const B=new m.nKC("");let me=(()=>{class b extends O{constructor(Q,ae){super(),this._platformLocation=Q,this._removeListenerFns=[],this._baseHref=ae??this._platformLocation.getBaseHrefFromDOM()??(0,m.WQX)(X).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Q){this._removeListenerFns.push(this._platformLocation.onPopState(Q),this._platformLocation.onHashChange(Q))}getBaseHref(){return this._baseHref}prepareExternalUrl(Q){return q(this._baseHref,Q)}path(Q=!1){const ae=this._platformLocation.pathname+re(this._platformLocation.search),Ne=this._platformLocation.hash;return Ne&&Q?`${ae}${Ne}`:ae}pushState(Q,ae,Ne,tt){const ht=this.prepareExternalUrl(Ne+re(tt));this._platformLocation.pushState(Q,ae,ht)}replaceState(Q,ae,Ne,tt){const ht=this.prepareExternalUrl(Ne+re(tt));this._platformLocation.replaceState(Q,ae,ht)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(Q=0){this._platformLocation.historyGo?.(Q)}static#e=this.\u0275fac=function(ae){return new(ae||b)(m.KVO(k),m.KVO(B,8))};static#t=this.\u0275prov=m.jDH({token:b,factory:b.\u0275fac,providedIn:"root"})}return b})(),D=(()=>{class b extends O{constructor(Q,ae){super(),this._platformLocation=Q,this._baseHref="",this._removeListenerFns=[],null!=ae&&(this._baseHref=ae)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(Q){this._removeListenerFns.push(this._platformLocation.onPopState(Q),this._platformLocation.onHashChange(Q))}getBaseHref(){return this._baseHref}path(Q=!1){const ae=this._platformLocation.hash??"#";return ae.length>0?ae.substring(1):ae}prepareExternalUrl(Q){const ae=q(this._baseHref,Q);return ae.length>0?"#"+ae:ae}pushState(Q,ae,Ne,tt){let ht=this.prepareExternalUrl(Ne+re(tt));0==ht.length&&(ht=this._platformLocation.pathname),this._platformLocation.pushState(Q,ae,ht)}replaceState(Q,ae,Ne,tt){let ht=this.prepareExternalUrl(Ne+re(tt));0==ht.length&&(ht=this._platformLocation.pathname),this._platformLocation.replaceState(Q,ae,ht)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(Q=0){this._platformLocation.historyGo?.(Q)}static#e=this.\u0275fac=function(ae){return new(ae||b)(m.KVO(k),m.KVO(B,8))};static#t=this.\u0275prov=m.jDH({token:b,factory:b.\u0275fac})}return b})(),x=(()=>{class b{constructor(Q){this._subject=new m.bkB,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=Q;const ae=this._locationStrategy.getBaseHref();this._basePath=function R(b){if(new RegExp("^(https?:)?//").test(b)){const[,Q]=b.split(/\/\/[^\/]+/);return Q}return b}(ye(T(ae))),this._locationStrategy.onPopState(Ne=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ne.state,type:Ne.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(Q=!1){return this.normalize(this._locationStrategy.path(Q))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(Q,ae=""){return this.path()==this.normalize(Q+re(ae))}normalize(Q){return b.stripTrailingSlash(function W(b,De){if(!b||!De.startsWith(b))return De;const Q=De.substring(b.length);return""===Q||["/",";","?","#"].includes(Q[0])?Q:De}(this._basePath,T(Q)))}prepareExternalUrl(Q){return Q&&"/"!==Q[0]&&(Q="/"+Q),this._locationStrategy.prepareExternalUrl(Q)}go(Q,ae="",Ne=null){this._locationStrategy.pushState(Ne,"",Q,ae),this._notifyUrlChangeListeners(this.prepareExternalUrl(Q+re(ae)),Ne)}replaceState(Q,ae="",Ne=null){this._locationStrategy.replaceState(Ne,"",Q,ae),this._notifyUrlChangeListeners(this.prepareExternalUrl(Q+re(ae)),Ne)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(Q=0){this._locationStrategy.historyGo?.(Q)}onUrlChange(Q){return this._urlChangeListeners.push(Q),this._urlChangeSubscription??=this.subscribe(ae=>{this._notifyUrlChangeListeners(ae.url,ae.state)}),()=>{const ae=this._urlChangeListeners.indexOf(Q);this._urlChangeListeners.splice(ae,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(Q="",ae){this._urlChangeListeners.forEach(Ne=>Ne(Q,ae))}subscribe(Q,ae,Ne){return this._subject.subscribe({next:Q,error:ae,complete:Ne})}static#e=this.normalizeQueryParams=re;static#t=this.joinWithSlash=q;static#n=this.stripTrailingSlash=ye;static#i=this.\u0275fac=function(ae){return new(ae||b)(m.KVO(O))};static#s=this.\u0275prov=m.jDH({token:b,factory:()=>function p(){return new x((0,m.KVO)(O))}(),providedIn:"root"})}return b})();function T(b){return b.replace(/\/index.html$/,"")}var j=function(b){return b[b.Decimal=0]="Decimal",b[b.Percent=1]="Percent",b[b.Currency=2]="Currency",b[b.Scientific=3]="Scientific",b}(j||{}),ne=function(b){return b[b.Format=0]="Format",b[b.Standalone=1]="Standalone",b}(ne||{}),v=function(b){return b[b.Narrow=0]="Narrow",b[b.Abbreviated=1]="Abbreviated",b[b.Wide=2]="Wide",b[b.Short=3]="Short",b}(v||{}),E=function(b){return b[b.Short=0]="Short",b[b.Medium=1]="Medium",b[b.Long=2]="Long",b[b.Full=3]="Full",b}(E||{});const L={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function ee(b,De){return Le((0,m.H5H)(b)[m.KH2.DateFormat],De)}function Z(b,De){return Le((0,m.H5H)(b)[m.KH2.TimeFormat],De)}function fe(b,De){return Le((0,m.H5H)(b)[m.KH2.DateTimeFormat],De)}function U(b,De){const Q=(0,m.H5H)(b),ae=Q[m.KH2.NumberSymbols][De];if(typeof ae>"u"){if(De===L.CurrencyDecimal)return Q[m.KH2.NumberSymbols][L.Decimal];if(De===L.CurrencyGroup)return Q[m.KH2.NumberSymbols][L.Group]}return ae}function ot(b){if(!b[m.KH2.ExtraData])throw new Error(`Missing extra locale data for the locale "${b[m.KH2.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Le(b,De){for(let Q=De;Q>-1;Q--)if(typeof b[Q]<"u")return b[Q];throw new Error("Locale data API: locale data undefined")}function Ke(b){const[De,Q]=b.split(":");return{hours:+De,minutes:+Q}}const _e=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Te={},Oe=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Xe=function(b){return b[b.Short=0]="Short",b[b.ShortGMT=1]="ShortGMT",b[b.Long=2]="Long",b[b.Extended=3]="Extended",b}(Xe||{}),Ue=function(b){return b[b.FullYear=0]="FullYear",b[b.Month=1]="Month",b[b.Date=2]="Date",b[b.Hours=3]="Hours",b[b.Minutes=4]="Minutes",b[b.Seconds=5]="Seconds",b[b.FractionalSeconds=6]="FractionalSeconds",b[b.Day=7]="Day",b}(Ue||{}),it=function(b){return b[b.DayPeriods=0]="DayPeriods",b[b.Days=1]="Days",b[b.Months=2]="Months",b[b.Eras=3]="Eras",b}(it||{});function Tt(b,De,Q,ae){let Ne=function jt(b){if(Pt(b))return b;if("number"==typeof b&&!isNaN(b))return new Date(b);if("string"==typeof b){if(b=b.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(b)){const[Ne,tt=1,ht=1]=b.split("-").map(It=>+It);return bt(Ne,tt-1,ht)}const Q=parseFloat(b);if(!isNaN(b-Q))return new Date(Q);let ae;if(ae=b.match(_e))return function En(b){const De=new Date(0);let Q=0,ae=0;const Ne=b[8]?De.setUTCFullYear:De.setFullYear,tt=b[8]?De.setUTCHours:De.setHours;b[9]&&(Q=Number(b[9]+b[10]),ae=Number(b[9]+b[11])),Ne.call(De,Number(b[1]),Number(b[2])-1,Number(b[3]));const ht=Number(b[4]||0)-Q,It=Number(b[5]||0)-ae,Yn=Number(b[6]||0),$n=Math.floor(1e3*parseFloat("0."+(b[7]||0)));return tt.call(De,ht,It,Yn,$n),De}(ae)}const De=new Date(b);if(!Pt(De))throw new Error(`Unable to convert "${b}" into a date`);return De}(b);De=yt(Q,De)||De;let It,ht=[];for(;De;){if(It=Oe.exec(De),!It){ht.push(De);break}{ht=ht.concat(It.slice(1));const zn=ht.pop();if(!zn)break;De=zn}}let Yn=Ne.getTimezoneOffset();ae&&(Yn=We(ae,Yn),Ne=function xt(b,De,Q){const ae=Q?-1:1,Ne=b.getTimezoneOffset();return function dt(b,De){return(b=new Date(b.getTime())).setMinutes(b.getMinutes()+De),b}(b,ae*(We(De,Ne)-Ne))}(Ne,ae,!0));let $n="";return ht.forEach(zn=>{const Cn=function Fe(b){if(Ze[b])return Ze[b];let De;switch(b){case"G":case"GG":case"GGG":De=Bt(it.Eras,v.Abbreviated);break;case"GGGG":De=Bt(it.Eras,v.Wide);break;case"GGGGG":De=Bt(it.Eras,v.Narrow);break;case"y":De=Mt(Ue.FullYear,1,0,!1,!0);break;case"yy":De=Mt(Ue.FullYear,2,0,!0,!0);break;case"yyy":De=Mt(Ue.FullYear,3,0,!1,!0);break;case"yyyy":De=Mt(Ue.FullYear,4,0,!1,!0);break;case"Y":De=Ge(1);break;case"YY":De=Ge(2,!0);break;case"YYY":De=Ge(3);break;case"YYYY":De=Ge(4);break;case"M":case"L":De=Mt(Ue.Month,1,1);break;case"MM":case"LL":De=Mt(Ue.Month,2,1);break;case"MMM":De=Bt(it.Months,v.Abbreviated);break;case"MMMM":De=Bt(it.Months,v.Wide);break;case"MMMMM":De=Bt(it.Months,v.Narrow);break;case"LLL":De=Bt(it.Months,v.Abbreviated,ne.Standalone);break;case"LLLL":De=Bt(it.Months,v.Wide,ne.Standalone);break;case"LLLLL":De=Bt(it.Months,v.Narrow,ne.Standalone);break;case"w":De=gi(1);break;case"ww":De=gi(2);break;case"W":De=gi(1,!0);break;case"d":De=Mt(Ue.Date,1);break;case"dd":De=Mt(Ue.Date,2);break;case"c":case"cc":De=Mt(Ue.Day,1);break;case"ccc":De=Bt(it.Days,v.Abbreviated,ne.Standalone);break;case"cccc":De=Bt(it.Days,v.Wide,ne.Standalone);break;case"ccccc":De=Bt(it.Days,v.Narrow,ne.Standalone);break;case"cccccc":De=Bt(it.Days,v.Short,ne.Standalone);break;case"E":case"EE":case"EEE":De=Bt(it.Days,v.Abbreviated);break;case"EEEE":De=Bt(it.Days,v.Wide);break;case"EEEEE":De=Bt(it.Days,v.Narrow);break;case"EEEEEE":De=Bt(it.Days,v.Short);break;case"a":case"aa":case"aaa":De=Bt(it.DayPeriods,v.Abbreviated);break;case"aaaa":De=Bt(it.DayPeriods,v.Wide);break;case"aaaaa":De=Bt(it.DayPeriods,v.Narrow);break;case"b":case"bb":case"bbb":De=Bt(it.DayPeriods,v.Abbreviated,ne.Standalone,!0);break;case"bbbb":De=Bt(it.DayPeriods,v.Wide,ne.Standalone,!0);break;case"bbbbb":De=Bt(it.DayPeriods,v.Narrow,ne.Standalone,!0);break;case"B":case"BB":case"BBB":De=Bt(it.DayPeriods,v.Abbreviated,ne.Format,!0);break;case"BBBB":De=Bt(it.DayPeriods,v.Wide,ne.Format,!0);break;case"BBBBB":De=Bt(it.DayPeriods,v.Narrow,ne.Format,!0);break;case"h":De=Mt(Ue.Hours,1,-12);break;case"hh":De=Mt(Ue.Hours,2,-12);break;case"H":De=Mt(Ue.Hours,1);break;case"HH":De=Mt(Ue.Hours,2);break;case"m":De=Mt(Ue.Minutes,1);break;case"mm":De=Mt(Ue.Minutes,2);break;case"s":De=Mt(Ue.Seconds,1);break;case"ss":De=Mt(Ue.Seconds,2);break;case"S":De=Mt(Ue.FractionalSeconds,1);break;case"SS":De=Mt(Ue.FractionalSeconds,2);break;case"SSS":De=Mt(Ue.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":De=fn(Xe.Short);break;case"ZZZZZ":De=fn(Xe.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":De=fn(Xe.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":De=fn(Xe.Long);break;default:return null}return Ze[b]=De,De}(zn);$n+=Cn?Cn(Ne,Q,Yn):"''"===zn?"'":zn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),$n}function bt(b,De,Q){const ae=new Date(0);return ae.setFullYear(b,De,Q),ae.setHours(0,0,0),ae}function yt(b,De){const Q=function ie(b){return(0,m.H5H)(b)[m.KH2.LocaleId]}(b);if(Te[Q]??={},Te[Q][De])return Te[Q][De];let ae="";switch(De){case"shortDate":ae=ee(b,E.Short);break;case"mediumDate":ae=ee(b,E.Medium);break;case"longDate":ae=ee(b,E.Long);break;case"fullDate":ae=ee(b,E.Full);break;case"shortTime":ae=Z(b,E.Short);break;case"mediumTime":ae=Z(b,E.Medium);break;case"longTime":ae=Z(b,E.Long);break;case"fullTime":ae=Z(b,E.Full);break;case"short":const Ne=yt(b,"shortTime"),tt=yt(b,"shortDate");ae=vt(fe(b,E.Short),[Ne,tt]);break;case"medium":const ht=yt(b,"mediumTime"),It=yt(b,"mediumDate");ae=vt(fe(b,E.Medium),[ht,It]);break;case"long":const Yn=yt(b,"longTime"),$n=yt(b,"longDate");ae=vt(fe(b,E.Long),[Yn,$n]);break;case"full":const zn=yt(b,"fullTime"),Cn=yt(b,"fullDate");ae=vt(fe(b,E.Full),[zn,Cn])}return ae&&(Te[Q][De]=ae),ae}function vt(b,De){return De&&(b=b.replace(/\{([^}]+)}/g,function(Q,ae){return null!=De&&ae in De?De[ae]:Q})),b}function Et(b,De,Q="-",ae,Ne){let tt="";(b<0||Ne&&b<=0)&&(Ne?b=1-b:(b=-b,tt=Q));let ht=String(b);for(;ht.length<De;)ht="0"+ht;return ae&&(ht=ht.slice(ht.length-De)),tt+ht}function Mt(b,De,Q=0,ae=!1,Ne=!1){return function(tt,ht){let It=function qt(b,De){switch(b){case Ue.FullYear:return De.getFullYear();case Ue.Month:return De.getMonth();case Ue.Date:return De.getDate();case Ue.Hours:return De.getHours();case Ue.Minutes:return De.getMinutes();case Ue.Seconds:return De.getSeconds();case Ue.FractionalSeconds:return De.getMilliseconds();case Ue.Day:return De.getDay();default:throw new Error(`Unknown DateType value "${b}".`)}}(b,tt);if((Q>0||It>-Q)&&(It+=Q),b===Ue.Hours)0===It&&-12===Q&&(It=12);else if(b===Ue.FractionalSeconds)return function Ft(b,De){return Et(b,3).substring(0,De)}(It,De);const Yn=U(ht,L.MinusSign);return Et(It,De,Yn,ae,Ne)}}function Bt(b,De,Q=ne.Format,ae=!1){return function(Ne,tt){return function $t(b,De,Q,ae,Ne,tt){switch(Q){case it.Months:return function he(b,De,Q){const ae=(0,m.H5H)(b),tt=Le([ae[m.KH2.MonthsFormat],ae[m.KH2.MonthsStandalone]],De);return Le(tt,Q)}(De,Ne,ae)[b.getMonth()];case it.Days:return function Ce(b,De,Q){const ae=(0,m.H5H)(b),tt=Le([ae[m.KH2.DaysFormat],ae[m.KH2.DaysStandalone]],De);return Le(tt,Q)}(De,Ne,ae)[b.getDay()];case it.DayPeriods:const ht=b.getHours(),It=b.getMinutes();if(tt){const $n=function Pe(b){const De=(0,m.H5H)(b);return ot(De),(De[m.KH2.ExtraData][2]||[]).map(ae=>"string"==typeof ae?Ke(ae):[Ke(ae[0]),Ke(ae[1])])}(De),zn=function we(b,De,Q){const ae=(0,m.H5H)(b);ot(ae);const tt=Le([ae[m.KH2.ExtraData][0],ae[m.KH2.ExtraData][1]],De)||[];return Le(tt,Q)||[]}(De,Ne,ae),Cn=$n.findIndex(Zn=>{if(Array.isArray(Zn)){const[Fn,Xn]=Zn,Vn=ht>=Fn.hours&&It>=Fn.minutes,ut=ht<Xn.hours||ht===Xn.hours&&It<Xn.minutes;if(Fn.hours<Xn.hours){if(Vn&&ut)return!0}else if(Vn||ut)return!0}else if(Zn.hours===ht&&Zn.minutes===It)return!0;return!1});if(-1!==Cn)return zn[Cn]}return function ce(b,De,Q){const ae=(0,m.H5H)(b),tt=Le([ae[m.KH2.DayPeriodsFormat],ae[m.KH2.DayPeriodsStandalone]],De);return Le(tt,Q)}(De,Ne,ae)[ht<12?0:1];case it.Eras:return function se(b,De){return Le((0,m.H5H)(b)[m.KH2.Eras],De)}(De,ae)[b.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${Q}`)}}(Ne,tt,b,De,Q,ae)}}function fn(b){return function(De,Q,ae){const Ne=-1*ae,tt=U(Q,L.MinusSign),ht=Ne>0?Math.floor(Ne/60):Math.ceil(Ne/60);switch(b){case Xe.Short:return(Ne>=0?"+":"")+Et(ht,2,tt)+Et(Math.abs(Ne%60),2,tt);case Xe.ShortGMT:return"GMT"+(Ne>=0?"+":"")+Et(ht,1,tt);case Xe.Long:return"GMT"+(Ne>=0?"+":"")+Et(ht,2,tt)+":"+Et(Math.abs(Ne%60),2,tt);case Xe.Extended:return 0===ae?"Z":(Ne>=0?"+":"")+Et(ht,2,tt)+":"+Et(Math.abs(Ne%60),2,tt);default:throw new Error(`Unknown zone width "${b}"`)}}}const Wt=0,yn=4;function Qt(b){const De=b.getDay(),Q=0===De?-3:yn-De;return bt(b.getFullYear(),b.getMonth(),b.getDate()+Q)}function gi(b,De=!1){return function(Q,ae){let Ne;if(De){const tt=new Date(Q.getFullYear(),Q.getMonth(),1).getDay()-1,ht=Q.getDate();Ne=1+Math.floor((ht+tt)/7)}else{const tt=Qt(Q),ht=function ai(b){const De=bt(b,Wt,1).getDay();return bt(b,0,1+(De<=yn?yn:yn+7)-De)}(tt.getFullYear()),It=tt.getTime()-ht.getTime();Ne=1+Math.round(It/6048e5)}return Et(Ne,b,U(ae,L.MinusSign))}}function Ge(b,De=!1){return function(Q,ae){return Et(Qt(Q).getFullYear(),b,U(ae,L.MinusSign),De)}}const Ze={};function We(b,De){b=b.replace(/:/g,"");const Q=Date.parse("Jan 01, 1970 00:00:00 "+b)/6e4;return isNaN(Q)?De:Q}function Pt(b){return b instanceof Date&&!isNaN(b.valueOf())}const Ct=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function ni(b){const De=parseInt(b);if(isNaN(De))throw new Error("Invalid integer literal when parsing "+b);return De}function _i(b,De){De=encodeURIComponent(De);for(const Q of b.split(";")){const ae=Q.indexOf("="),[Ne,tt]=-1==ae?[Q,""]:[Q.slice(0,ae),Q.slice(ae+1)];if(Ne.trim()===De)return decodeURIComponent(tt)}return null}const Vi=/\s+/,ci=[];let dn=(()=>{class b{constructor(Q,ae){this._ngEl=Q,this._renderer=ae,this.initialClasses=ci,this.stateMap=new Map}set klass(Q){this.initialClasses=null!=Q?Q.trim().split(Vi):ci}set ngClass(Q){this.rawClass="string"==typeof Q?Q.trim().split(Vi):Q}ngDoCheck(){for(const ae of this.initialClasses)this._updateState(ae,!0);const Q=this.rawClass;if(Array.isArray(Q)||Q instanceof Set)for(const ae of Q)this._updateState(ae,!0);else if(null!=Q)for(const ae of Object.keys(Q))this._updateState(ae,!!Q[ae]);this._applyStateDiff()}_updateState(Q,ae){const Ne=this.stateMap.get(Q);void 0!==Ne?(Ne.enabled!==ae&&(Ne.changed=!0,Ne.enabled=ae),Ne.touched=!0):this.stateMap.set(Q,{enabled:ae,changed:!0,touched:!0})}_applyStateDiff(){for(const Q of this.stateMap){const ae=Q[0],Ne=Q[1];Ne.changed?(this._toggleClass(ae,Ne.enabled),Ne.changed=!1):Ne.touched||(Ne.enabled&&this._toggleClass(ae,!1),this.stateMap.delete(ae)),Ne.touched=!1}}_toggleClass(Q,ae){(Q=Q.trim()).length>0&&Q.split(Vi).forEach(Ne=>{ae?this._renderer.addClass(this._ngEl.nativeElement,Ne):this._renderer.removeClass(this._ngEl.nativeElement,Ne)})}static#e=this.\u0275fac=function(ae){return new(ae||b)(m.rXU(m.aKT),m.rXU(m.sFG))};static#t=this.\u0275dir=m.FsC({type:b,selectors:[["","ngClass",""]],inputs:{klass:[m.Mj6.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}return b})();class Fr{constructor(De,Q,ae,Ne){this.$implicit=De,this.ngForOf=Q,this.index=ae,this.count=Ne}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let rs=(()=>{class b{set ngForOf(Q){this._ngForOf=Q,this._ngForOfDirty=!0}set ngForTrackBy(Q){this._trackByFn=Q}get ngForTrackBy(){return this._trackByFn}constructor(Q,ae,Ne){this._viewContainer=Q,this._template=ae,this._differs=Ne,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(Q){Q&&(this._template=Q)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const Q=this._ngForOf;!this._differ&&Q&&(this._differ=this._differs.find(Q).create(this.ngForTrackBy))}if(this._differ){const Q=this._differ.diff(this._ngForOf);Q&&this._applyChanges(Q)}}_applyChanges(Q){const ae=this._viewContainer;Q.forEachOperation((Ne,tt,ht)=>{if(null==Ne.previousIndex)ae.createEmbeddedView(this._template,new Fr(Ne.item,this._ngForOf,-1,-1),null===ht?void 0:ht);else if(null==ht)ae.remove(null===tt?void 0:tt);else if(null!==tt){const It=ae.get(tt);ae.move(It,ht),po(It,Ne)}});for(let Ne=0,tt=ae.length;Ne<tt;Ne++){const It=ae.get(Ne).context;It.index=Ne,It.count=tt,It.ngForOf=this._ngForOf}Q.forEachIdentityChange(Ne=>{po(ae.get(Ne.currentIndex),Ne)})}static ngTemplateContextGuard(Q,ae){return!0}static#e=this.\u0275fac=function(ae){return new(ae||b)(m.rXU(m.c1b),m.rXU(m.C4Q),m.rXU(m._q3))};static#t=this.\u0275dir=m.FsC({type:b,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}return b})();function po(b,De){b.context.$implicit=De.item}let Nr=(()=>{class b{constructor(Q,ae){this._viewContainer=Q,this._context=new Os,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ae}set ngIf(Q){this._context.$implicit=this._context.ngIf=Q,this._updateView()}set ngIfThen(Q){na("ngIfThen",Q),this._thenTemplateRef=Q,this._thenViewRef=null,this._updateView()}set ngIfElse(Q){na("ngIfElse",Q),this._elseTemplateRef=Q,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(Q,ae){return!0}static#e=this.\u0275fac=function(ae){return new(ae||b)(m.rXU(m.c1b),m.rXU(m.C4Q))};static#t=this.\u0275dir=m.FsC({type:b,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}return b})();class Os{constructor(){this.$implicit=null,this.ngIf=null}}function na(b,De){if(De&&!De.createEmbeddedView)throw new Error(`${b} must be a TemplateRef, but received '${(0,m.Tbb)(De)}'.`)}class gs{constructor(De,Q){this._viewContainerRef=De,this._templateRef=Q,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(De){De&&!this._created?this.create():!De&&this._created&&this.destroy()}}let ps=(()=>{class b{constructor(){this._defaultViews=[],this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(Q){this._ngSwitch=Q,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(Q){this._defaultViews.push(Q)}_matchCase(Q){const ae=Q===this._ngSwitch;return this._lastCasesMatched||=ae,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),ae}_updateDefaultCases(Q){if(this._defaultViews.length>0&&Q!==this._defaultUsed){this._defaultUsed=Q;for(const ae of this._defaultViews)ae.enforceState(Q)}}static#e=this.\u0275fac=function(ae){return new(ae||b)};static#t=this.\u0275dir=m.FsC({type:b,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0})}return b})(),dr=(()=>{class b{constructor(Q,ae,Ne){this.ngSwitch=Ne,Ne._addCase(),this._view=new gs(Q,ae)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}static#e=this.\u0275fac=function(ae){return new(ae||b)(m.rXU(m.c1b),m.rXU(m.C4Q),m.rXU(ps,9))};static#t=this.\u0275dir=m.FsC({type:b,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0})}return b})(),_t=(()=>{class b{constructor(Q,ae,Ne){this._ngEl=Q,this._differs=ae,this._renderer=Ne,this._ngStyle=null,this._differ=null}set ngStyle(Q){this._ngStyle=Q,!this._differ&&Q&&(this._differ=this._differs.find(Q).create())}ngDoCheck(){if(this._differ){const Q=this._differ.diff(this._ngStyle);Q&&this._applyChanges(Q)}}_setStyle(Q,ae){const[Ne,tt]=Q.split("."),ht=-1===Ne.indexOf("-")?void 0:m.czy.DashCase;null!=ae?this._renderer.setStyle(this._ngEl.nativeElement,Ne,tt?`${ae}${tt}`:ae,ht):this._renderer.removeStyle(this._ngEl.nativeElement,Ne,ht)}_applyChanges(Q){Q.forEachRemovedItem(ae=>this._setStyle(ae.key,null)),Q.forEachAddedItem(ae=>this._setStyle(ae.key,ae.currentValue)),Q.forEachChangedItem(ae=>this._setStyle(ae.key,ae.currentValue))}static#e=this.\u0275fac=function(ae){return new(ae||b)(m.rXU(m.aKT),m.rXU(m.MKu),m.rXU(m.sFG))};static#t=this.\u0275dir=m.FsC({type:b,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0})}return b})(),Mn=(()=>{class b{constructor(Q){this._viewContainerRef=Q,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(Q){if(this._shouldRecreateView(Q)){const ae=this._viewContainerRef;if(this._viewRef&&ae.remove(ae.indexOf(this._viewRef)),!this.ngTemplateOutlet)return void(this._viewRef=null);const Ne=this._createContextForwardProxy();this._viewRef=ae.createEmbeddedView(this.ngTemplateOutlet,Ne,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(Q){return!!Q.ngTemplateOutlet||!!Q.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(Q,ae,Ne)=>!!this.ngTemplateOutletContext&&Reflect.set(this.ngTemplateOutletContext,ae,Ne),get:(Q,ae,Ne)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,ae,Ne)}})}static#e=this.\u0275fac=function(ae){return new(ae||b)(m.rXU(m.c1b))};static#t=this.\u0275dir=m.FsC({type:b,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[m.OA$]})}return b})();function es(b,De){return new m.wOt(2100,!1)}class cr{createSubscription(De,Q){return(0,m.O8t)(()=>De.subscribe({next:Q,error:ae=>{throw ae}}))}dispose(De){(0,m.O8t)(()=>De.unsubscribe())}}class ra{createSubscription(De,Q){return De.then(Q,ae=>{throw ae})}dispose(De){}}const Ho=new ra,hr=new cr;let gn=(()=>{class b{constructor(Q){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=Q}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(Q){if(!this._obj){if(Q)try{this.markForCheckOnValueUpdate=!1,this._subscribe(Q)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return Q!==this._obj?(this._dispose(),this.transform(Q)):this._latestValue}_subscribe(Q){this._obj=Q,this._strategy=this._selectStrategy(Q),this._subscription=this._strategy.createSubscription(Q,ae=>this._updateLatestValue(Q,ae))}_selectStrategy(Q){if((0,m.jNT)(Q))return Ho;if((0,m.zjR)(Q))return hr;throw es()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(Q,ae){Q===this._obj&&(this._latestValue=ae,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static#e=this.\u0275fac=function(ae){return new(ae||b)(m.rXU(m.gRc,16))};static#t=this.\u0275pipe=m.EJ8({name:"async",type:b,pure:!1,standalone:!0})}return b})();const la=new m.nKC(""),Rs=new m.nKC("");let Uo=(()=>{class b{constructor(Q,ae,Ne){this.locale=Q,this.defaultTimezone=ae,this.defaultOptions=Ne}transform(Q,ae,Ne,tt){if(null==Q||""===Q||Q!=Q)return null;try{return Tt(Q,ae??this.defaultOptions?.dateFormat??"mediumDate",tt||this.locale,Ne??this.defaultOptions?.timezone??this.defaultTimezone??void 0)}catch(ht){throw es()}}static#e=this.\u0275fac=function(ae){return new(ae||b)(m.rXU(m.xe9,16),m.rXU(la,24),m.rXU(Rs,24))};static#t=this.\u0275pipe=m.EJ8({name:"date",type:b,pure:!0,standalone:!0})}return b})(),ts=(()=>{class b{constructor(Q){this._locale=Q}transform(Q,ae,Ne){if(!function Do(b){return!(null==b||""===b||b!=b)}(Q))return null;Ne||=this._locale;try{return function xs(b,De,Q){return function Yi(b,De,Q,ae,Ne,tt,ht=!1){let It="",Yn=!1;if(isFinite(b)){let $n=function Lt(b){let ae,Ne,tt,ht,It,De=Math.abs(b)+"",Q=0;for((Ne=De.indexOf("."))>-1&&(De=De.replace(".","")),(tt=De.search(/e/i))>0?(Ne<0&&(Ne=tt),Ne+=+De.slice(tt+1),De=De.substring(0,tt)):Ne<0&&(Ne=De.length),tt=0;"0"===De.charAt(tt);tt++);if(tt===(It=De.length))ae=[0],Ne=1;else{for(It--;"0"===De.charAt(It);)It--;for(Ne-=tt,ae=[],ht=0;tt<=It;tt++,ht++)ae[ht]=Number(De.charAt(tt))}return Ne>22&&(ae=ae.splice(0,21),Q=Ne-1,Ne=1),{digits:ae,exponent:Q,integerLen:Ne}}(b);ht&&($n=function Bo(b){if(0===b.digits[0])return b;const De=b.digits.length-b.integerLen;return b.exponent?b.exponent+=2:(0===De?b.digits.push(0,0):1===De&&b.digits.push(0),b.integerLen+=2),b}($n));let zn=De.minInt,Cn=De.minFrac,Zn=De.maxFrac;if(tt){const mt=tt.match(Ct);if(null===mt)throw new Error(`${tt} is not a valid digit info`);const In=mt[1],Ut=mt[3],vn=mt[5];null!=In&&(zn=ni(In)),null!=Ut&&(Cn=ni(Ut)),null!=vn?Zn=ni(vn):null!=Ut&&Cn>Zn&&(Zn=Cn)}!function Yt(b,De,Q){if(De>Q)throw new Error(`The minimum number of digits after fraction (${De}) is higher than the maximum (${Q}).`);let ae=b.digits,Ne=ae.length-b.integerLen;const tt=Math.min(Math.max(De,Ne),Q);let ht=tt+b.integerLen,It=ae[ht];if(ht>0){ae.splice(Math.max(b.integerLen,ht));for(let Cn=ht;Cn<ae.length;Cn++)ae[Cn]=0}else{Ne=Math.max(0,Ne),b.integerLen=1,ae.length=Math.max(1,ht=tt+1),ae[0]=0;for(let Cn=1;Cn<ht;Cn++)ae[Cn]=0}if(It>=5)if(ht-1<0){for(let Cn=0;Cn>ht;Cn--)ae.unshift(0),b.integerLen++;ae.unshift(1),b.integerLen++}else ae[ht-1]++;for(;Ne<Math.max(0,tt);Ne++)ae.push(0);let Yn=0!==tt;const $n=De+b.integerLen,zn=ae.reduceRight(function(Cn,Zn,Fn,Xn){return Xn[Fn]=(Zn+=Cn)<10?Zn:Zn-10,Yn&&(0===Xn[Fn]&&Fn>=$n?Xn.pop():Yn=!1),Zn>=10?1:0},0);zn&&(ae.unshift(zn),b.integerLen++)}($n,Cn,Zn);let Fn=$n.digits,Xn=$n.integerLen;const Vn=$n.exponent;let ut=[];for(Yn=Fn.every(mt=>!mt);Xn<zn;Xn++)Fn.unshift(0);for(;Xn<0;Xn++)Fn.unshift(0);Xn>0?ut=Fn.splice(Xn,Fn.length):(ut=Fn,Fn=[0]);const Rt=[];for(Fn.length>=De.lgSize&&Rt.unshift(Fn.splice(-De.lgSize,Fn.length).join(""));Fn.length>De.gSize;)Rt.unshift(Fn.splice(-De.gSize,Fn.length).join(""));Fn.length&&Rt.unshift(Fn.join("")),It=Rt.join(U(Q,ae)),ut.length&&(It+=U(Q,Ne)+ut.join("")),Vn&&(It+=U(Q,L.Exponential)+"+"+Vn)}else It=U(Q,L.Infinity);return It=b<0&&!Yn?De.negPre+It+De.negSuf:De.posPre+It+De.posSuf,It}(b,function Rn(b,De="-"){const Q={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},ae=b.split(";"),Ne=ae[0],tt=ae[1],ht=-1!==Ne.indexOf(".")?Ne.split("."):[Ne.substring(0,Ne.lastIndexOf("0")+1),Ne.substring(Ne.lastIndexOf("0")+1)],It=ht[0],Yn=ht[1]||"";Q.posPre=It.substring(0,It.indexOf("#"));for(let zn=0;zn<Yn.length;zn++){const Cn=Yn.charAt(zn);"0"===Cn?Q.minFrac=Q.maxFrac=zn+1:"#"===Cn?Q.maxFrac=zn+1:Q.posSuf+=Cn}const $n=It.split(",");if(Q.gSize=$n[1]?$n[1].length:0,Q.lgSize=$n[2]||$n[1]?($n[2]||$n[1]).length:0,tt){const zn=Ne.length-Q.posPre.length-Q.posSuf.length,Cn=tt.indexOf("#");Q.negPre=tt.substring(0,Cn).replace(/'/g,""),Q.negSuf=tt.slice(Cn+zn).replace(/'/g,"")}else Q.negPre=De+Q.posPre,Q.negSuf=Q.posSuf;return Q}(function Ee(b,De){return(0,m.H5H)(b)[m.KH2.NumberFormats][De]}(De,j.Decimal),U(De,L.MinusSign)),De,L.Group,L.Decimal,Q)}(function en(b){if("string"==typeof b&&!isNaN(Number(b)-parseFloat(b)))return Number(b);if("number"!=typeof b)throw new Error(`${b} is not a number`);return b}(Q),Ne,ae)}catch(tt){throw es()}}static#e=this.\u0275fac=function(ae){return new(ae||b)(m.rXU(m.xe9,16))};static#t=this.\u0275pipe=m.EJ8({name:"number",type:b,pure:!0,standalone:!0})}return b})();let Ys=(()=>{class b{transform(Q,ae,Ne){if(null==Q)return null;if(!this.supports(Q))throw es();return Q.slice(ae,Ne)}supports(Q){return"string"==typeof Q||Array.isArray(Q)}static#e=this.\u0275fac=function(ae){return new(ae||b)};static#t=this.\u0275pipe=m.EJ8({name:"slice",type:b,pure:!1,standalone:!0})}return b})(),Wo=(()=>{class b{static#e=this.\u0275fac=function(ae){return new(ae||b)};static#t=this.\u0275mod=m.$C({type:b});static#n=this.\u0275inj=m.G2t({})}return b})();const vo="browser",mr="server";function hi(b){return b===vo}function Ur(b){return b===mr}let So=(()=>{class b{static#e=this.\u0275prov=(0,m.jDH)({token:b,providedIn:"root",factory:()=>hi((0,m.WQX)(m.Agw))?new Xt((0,m.WQX)(X),window):new gr})}return b})();class Xt{constructor(De,Q){this.document=De,this.window=Q,this.offset=()=>[0,0]}setOffset(De){this.offset=Array.isArray(De)?()=>De:De}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(De){this.window.scrollTo(De[0],De[1])}scrollToAnchor(De){const Q=function ls(b,De){const Q=b.getElementById(De)||b.getElementsByName(De)[0];if(Q)return Q;if("function"==typeof b.createTreeWalker&&b.body&&"function"==typeof b.body.attachShadow){const ae=b.createTreeWalker(b.body,NodeFilter.SHOW_ELEMENT);let Ne=ae.currentNode;for(;Ne;){const tt=Ne.shadowRoot;if(tt){const ht=tt.getElementById(De)||tt.querySelector(`[name="${De}"]`);if(ht)return ht}Ne=ae.nextNode()}}return null}(this.document,De);Q&&(this.scrollToElement(Q),Q.focus())}setHistoryScrollRestoration(De){this.window.history.scrollRestoration=De}scrollToElement(De){const Q=De.getBoundingClientRect(),ae=Q.left+this.window.pageXOffset,Ne=Q.top+this.window.pageYOffset,tt=this.offset();this.window.scrollTo(ae-tt[0],Ne-tt[1])}}class gr{setOffset(De){}getScrollPosition(){return[0,0]}scrollToPosition(De){}scrollToAnchor(De){}setHistoryScrollRestoration(De){}}class so{}},32057:(qe,be,t)=>{"use strict";function A(n,s){return Object.is(n,s)}t.d(be,{bc$:()=>o0,iLQ:()=>xp,sZ2:()=>Im,hnV:()=>IE,Hbi:()=>_P,o8S:()=>hl,BIS:()=>r0,gRc:()=>BE,Ql9:()=>AP,OM3:()=>qc,Ocv:()=>NP,abz:()=>Ar,Z63:()=>ro,aKT:()=>sl,uvJ:()=>yi,zcH:()=>ir,bkB:()=>mo,y_5:()=>$o,$GK:()=>gn,nKC:()=>dn,zZn:()=>Zi,_q3:()=>wp,MKu:()=>Vp,xe9:()=>Ef,Co$:()=>py,Vns:()=>Zl,SKi:()=>Ni,Xx1:()=>hi,Agw:()=>yu,PLl:()=>Am,rOR:()=>nd,sFG:()=>TI,_9s:()=>TC,czy:()=>xu,WPN:()=>Xl,kdw:()=>zo,C4Q:()=>Xc,NYb:()=>yP,giA:()=>SE,RxE:()=>mE,c1b:()=>Yu,gXe:()=>Js,mal:()=>RC,Tzd:()=>bC,Af3:()=>lo,L39:()=>PO,EWP:()=>RO,sbv:()=>iA,a0P:()=>BO,Ol2:()=>xg,w6W:()=>SA,oH4:()=>NE,QZP:()=>mS,Rfq:()=>gi,WQX:()=>en,hFB:()=>em,naY:()=>HP,Hps:()=>Sg,QuC:()=>hs,EmA:()=>Wr,Udg:()=>OO,fpN:()=>qP,HJs:()=>HO,N4e:()=>qo,vPA:()=>kC,O8t:()=>FO,An2:()=>Wu,H3F:()=>gE,H8p:()=>Sl,KH2:()=>Fd,TgB:()=>fd,wOt:()=>xe,WHO:()=>vE,e01:()=>EE,lNU:()=>Ke,h9k:()=>y0,$MX:()=>Tu,ZF7:()=>Ei,Kcf:()=>DS,e5t:()=>TS,UyX:()=>ES,cWb:()=>vS,osQ:()=>SS,H5H:()=>np,Zy3:()=>ke,mq5:()=>SD,JZv:()=>Mt,LfX:()=>ni,plB:()=>ll,jNT:()=>Ap,zjR:()=>TE,TL$:()=>n0,Tbb:()=>Wt,rcV:()=>Wi,Vt3:()=>Ig,Mj6:()=>Qs,GFd:()=>gy,OA$:()=>Ml,Jv_:()=>Lv,aNF:()=>wv,R7$:()=>Y0,BMQ:()=>Hg,x72:()=>Ug,qtP:()=>Gg,HbH:()=>tD,ZvI:()=>aD,STu:()=>dD,ZWY:()=>cD,AVh:()=>Xg,vxM:()=>mD,wni:()=>dv,C6U:()=>fv,VBU:()=>Je,FsC:()=>ua,jDH:()=>Rn,G2t:()=>Lt,$C:()=>Dl,EJ8:()=>cs,rXU:()=>ad,nrm:()=>_g,eu8:()=>ep,bVm:()=>df,qex:()=>af,k0s:()=>lf,j41:()=>rf,RV6:()=>vD,xGo:()=>yc,Mr5:()=>tp,KVO:()=>si,kS0:()=>Qa,QTQ:()=>J0,bIt:()=>op,lsd:()=>uv,joV:()=>lc,qSk:()=>Ga,XpG:()=>_D,nI1:()=>Xv,bMT:()=>Jv,i5U:()=>Qv,brH:()=>Zv,ii3:()=>kv,SdG:()=>tv,NAR:()=>ev,Y8G:()=>zg,FS9:()=>lp,Mz_:()=>mf,FCK:()=>ap,lJ4:()=>Hv,eq3:()=>Uv,l_i:()=>Gv,sMw:()=>jv,NyB:()=>mv,mGM:()=>hv,sdS:()=>gv,Dyx:()=>CD,Z7z:()=>pD,fX1:()=>gD,Njj:()=>ec,EBC:()=>M0,tSv:()=>A0,eBV:()=>_d,npT:()=>D0,B4B:()=>bm,n$t:()=>E0,wjB:()=>Vv,Aen:()=>Lo,xc7:()=>Yg,jIU:()=>dp,DNE:()=>md,C5r:()=>qv,EFF:()=>Iv,JRh:()=>cp,SpI:()=>gf,Lme:()=>hp,E5c:()=>up,DH7:()=>Fv,mxI:()=>mp,R50:()=>fp,GBs:()=>cv}),t(10467);let G=null,J=!1,Y=1;const oe=Symbol("SIGNAL");function X(n){const s=G;return G=n,s}const q={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function ye(n){if(J)throw new Error("");if(null===G)return;G.consumerOnSignalRead(n);const s=G.nextProducerIndex++;F(G),s<G.producerNode.length&&G.producerNode[s]!==n&&j(G)&&le(G.producerNode[s],G.producerIndexOfThis[s]),G.producerNode[s]!==n&&(G.producerNode[s]=n,G.producerIndexOfThis[s]=j(G)?R(n,G,s):0),G.producerLastReadVersion[s]=n.version}function O(n){if((!j(n)||n.dirty)&&(n.dirty||n.lastCleanEpoch!==Y)){if(!n.producerMustRecompute(n)&&!W(n))return n.dirty=!1,void(n.lastCleanEpoch=Y);n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=Y}}function B(n){if(void 0===n.liveConsumerNode)return;const s=J;J=!0;try{for(const r of n.liveConsumerNode)r.dirty||D(r)}finally{J=s}}function me(){return!1!==G?.consumerAllowSignalWrites}function D(n){n.dirty=!0,B(n),n.consumerMarkedDirty?.(n)}function x(n){return n&&(n.nextProducerIndex=0),X(n)}function p(n,s){if(X(s),n&&void 0!==n.producerNode&&void 0!==n.producerIndexOfThis&&void 0!==n.producerLastReadVersion){if(j(n))for(let r=n.nextProducerIndex;r<n.producerNode.length;r++)le(n.producerNode[r],n.producerIndexOfThis[r]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function W(n){F(n);for(let s=0;s<n.producerNode.length;s++){const r=n.producerNode[s],a=n.producerLastReadVersion[s];if(a!==r.version||(O(r),a!==r.version))return!0}return!1}function T(n){if(F(n),j(n))for(let s=0;s<n.producerNode.length;s++)le(n.producerNode[s],n.producerIndexOfThis[s]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function R(n,s,r){if(ne(n),F(n),0===n.liveConsumerNode.length)for(let a=0;a<n.producerNode.length;a++)n.producerIndexOfThis[a]=R(n.producerNode[a],n,a);return n.liveConsumerIndexOfThis.push(r),n.liveConsumerNode.push(s)-1}function le(n,s){if(ne(n),F(n),1===n.liveConsumerNode.length)for(let a=0;a<n.producerNode.length;a++)le(n.producerNode[a],n.producerIndexOfThis[a]);const r=n.liveConsumerNode.length-1;if(n.liveConsumerNode[s]=n.liveConsumerNode[r],n.liveConsumerIndexOfThis[s]=n.liveConsumerIndexOfThis[r],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,s<n.liveConsumerNode.length){const a=n.liveConsumerIndexOfThis[s],h=n.liveConsumerNode[s];F(h),h.producerIndexOfThis[a]=s}}function j(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function F(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function ne(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function v(n){const s=Object.create(ie);s.computation=n;const r=()=>{if(O(s),ye(s),s.value===I)throw s.error;return s.value};return r[oe]=s,r}const E=Symbol("UNSET"),L=Symbol("COMPUTING"),I=Symbol("ERRORED"),ie={...q,value:E,dirty:!0,error:null,equal:A,producerMustRecompute:n=>n.value===E||n.value===L,producerRecomputeValue(n){if(n.value===L)throw new Error("Detected cycle in computations.");const s=n.value;n.value=L;const r=x(n);let a;try{a=n.computation()}catch(h){a=I,n.error=h}finally{p(n,r)}s!==E&&s!==I&&a!==I&&n.equal(s,a)?n.value=s:(n.value=a,n.version++)}};let Ce=function ce(){throw new Error};function he(){Ce()}let z=null;function fe(n,s){me()||he(),n.equal(n.value,s)||(n.value=s,function Me(n){n.version++,function re(){Y++}(),B(n),z?.()}(n))}const Ee={...q,equal:A,value:void 0};const st=()=>{},je={...q,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:n=>{null!==n.schedule&&n.schedule(n.ref)},hasRun:!1,cleanupFn:st};var ot=t(43794),Pe=t(40740),we=t(62031),w=t(73973);const Ke="https://g.co/ng/security#xss";class xe extends Error{constructor(s,r){super(ke(s,r)),this.code=s}}function ke(n,s){return`NG0${Math.abs(n)}${s?": "+s:""}`}const Ve=Symbol("InputSignalNode#UNSET"),_e={...Ee,transformFn:void 0,applyValueToInputSignal(n,s){fe(n,s)}};function Xe(n,s){const r=Object.create(_e);function a(){if(ye(r),r.value===Ve)throw new xe(-950,!1);return r.value}return r.value=n,r.transformFn=s?.transform,a[oe]=r,a}function Ue(n){return{toString:n}.toString()}const Tt="__parameters__";function Et(n,s,r){return Ue(()=>{const a=function vt(n){return function(...r){if(n){const a=n(...r);for(const h in a)this[h]=a[h]}}}(s);function h(...f){if(this instanceof h)return a.apply(this,f),this;const C=new h(...f);return S.annotation=C,S;function S(P,_,pe){const Ie=P.hasOwnProperty(Tt)?P[Tt]:Object.defineProperty(P,Tt,{value:[]})[Tt];for(;Ie.length<=pe;)Ie.push(null);return(Ie[pe]=Ie[pe]||[]).push(C),P}}return r&&(h.prototype=Object.create(r.prototype)),h.prototype.ngMetadataName=n,h.annotationCls=h,h})}const Mt=globalThis;function $t(n){for(let s in n)if(n[s]===$t)return s;throw Error("Could not find renamed property on target object.")}function fn(n,s){for(const r in s)s.hasOwnProperty(r)&&!n.hasOwnProperty(r)&&(n[r]=s[r])}function Wt(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Wt).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const s=n.toString();if(null==s)return""+s;const r=s.indexOf("\n");return-1===r?s:s.substring(0,r)}function yn(n,s){return null==n||""===n?null===s?"":s:null==s||""===s?n:n+" "+s}const Qt=$t({__forward_ref__:$t});function gi(n){return n.__forward_ref__=gi,n.toString=function(){return Wt(this())},n}function Ge(n){return Ze(n)?n():n}function Ze(n){return"function"==typeof n&&n.hasOwnProperty(Qt)&&n.__forward_ref__===gi}function Rn(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Lt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Yt(n){return Jt(n,wi)||Jt(n,Vi)}function ni(n){return null!==Yt(n)}function Jt(n,s){return n.hasOwnProperty(s)?n[s]:null}function Nn(n){return n&&(n.hasOwnProperty(_i)||n.hasOwnProperty(ci))?n[_i]:null}const wi=$t({\u0275prov:$t}),_i=$t({\u0275inj:$t}),Vi=$t({ngInjectableDef:$t}),ci=$t({ngInjectorDef:$t});class dn{constructor(s,r){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof r?this.__NG_ELEMENT_ID__=r:void 0!==r&&(this.\u0275prov=Rn({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function gs(n){return n&&!!n.\u0275providers}const ps=$t({\u0275cmp:$t}),dr=$t({\u0275dir:$t}),Lr=$t({\u0275pipe:$t}),sa=$t({\u0275mod:$t}),bs=$t({\u0275fac:$t}),zs=$t({__NG_ELEMENT_ID__:$t}),wr=$t({__NG_ENV_ID__:$t});function _t(n){return"string"==typeof n?n:null==n?"":String(n)}function hr(n,s){throw new xe(-201,!1)}var gn=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(gn||{});let ur;function Co(){return ur}function pi(n){const s=ur;return ur=n,s}function Vr(n,s,r){const a=Yt(n);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:r&gn.Optional?null:void 0!==s?s:void hr()}const Rs={},Uo="__NG_DI_FLAG__",Ks="ngTempTokenPath",Go=/\n/gm,yo="__source";let Cs;function ts(n){const s=Cs;return Cs=n,s}function Br(n,s=gn.Default){if(void 0===Cs)throw new xe(-203,!1);return null===Cs?Vr(n,void 0,s):Cs.get(n,s&gn.Optional?null:void 0,s)}function si(n,s=gn.Default){return(Co()||Br)(Ge(n),s)}function en(n,s=gn.Default){return si(n,Ys(s))}function Ys(n){return typeof n>"u"||"number"==typeof n?n:(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Hr(n){const s=[];for(let r=0;r<n.length;r++){const a=Ge(n[r]);if(Array.isArray(a)){if(0===a.length)throw new xe(900,!1);let h,f=gn.Default;for(let C=0;C<a.length;C++){const S=a[C],P=vo(S);"number"==typeof P?-1===P?h=S.token:f|=P:h=S}s.push(si(h,f))}else s.push(si(a))}return s}function Wo(n,s){return n[Uo]=s,n.prototype[Uo]=s,n}function vo(n){return n[Uo]}const $o=Wo(Et("Inject",n=>({token:n})),-1),hi=Wo(Et("Optional"),8),zo=Wo(Et("SkipSelf"),4);function Xs(n,s){return n.hasOwnProperty(bs)?n[bs]:null}function ls(n,s){n.forEach(r=>Array.isArray(r)?ls(r,s):s(r))}function gr(n,s,r){s>=n.length?n.push(r):n.splice(s,0,r)}function so(n,s){return s>=n.length-1?n.pop():n.splice(s,1)[0]}function Bi(n,s,r){let a=ys(n,s);return a>=0?n[1|a]=r:(a=~a,function jr(n,s,r,a){let h=n.length;if(h==s)n.push(r,a);else if(1===h)n.push(a,n[0]),n[0]=r;else{for(h--,n.push(n[h-1],n[h]);h>s;)n[h]=n[h-2],h--;n[s]=r,n[s+1]=a}}(n,a,s,r)),a}function oo(n,s){const r=ys(n,s);if(r>=0)return n[1|r]}function ys(n,s){return function gl(n,s,r){let a=0,h=n.length>>r;for(;h!==a;){const f=a+(h-a>>1),C=n[f<<r];if(s===C)return f<<r;C>s?h=f:a=f+1}return~(h<<r)}(n,s,1)}const Hi={},xn=[],ro=new dn(""),da=new dn("",-1),Yo=new dn("");class Xo{get(s,r=Rs){if(r===Rs){const a=new Error(`NullInjectorError: No provider for ${Wt(s)}!`);throw a.name="NullInjectorError",a}return r}}var To=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(To||{}),Js=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Js||{}),Qs=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Qs||{});function pl(n,s,r){let a=n.length;for(;;){const h=n.indexOf(s,r);if(-1===h)return h;if(0===h||n.charCodeAt(h-1)<=32){const f=s.length;if(h+f===a||n.charCodeAt(h+f)<=32)return h}r=h+1}}function Cr(n,s,r){let a=0;for(;a<r.length;){const h=r[a];if("number"==typeof h){if(0!==h)break;a++;const f=r[a++],C=r[a++],S=r[a++];n.setAttribute(s,C,S,f)}else{const f=h,C=r[++a];ge(f)?n.setProperty(s,f,C):n.setAttribute(s,f,C),a++}}return a}function de(n){return 3===n||4===n||6===n}function ge(n){return 64===n.charCodeAt(0)}function K(n,s){if(null!==s&&0!==s.length)if(null===n||0===n.length)n=s.slice();else{let r=-1;for(let a=0;a<s.length;a++){const h=s[a];"number"==typeof h?r=h:0===r||Se(n,r,h,null,-1===r||2===r?s[++a]:null)}}return n}function Se(n,s,r,a,h){let f=0,C=n.length;if(-1===s)C=-1;else for(;f<n.length;){const S=n[f++];if("number"==typeof S){if(S===s){C=-1;break}if(S>s){C=f-1;break}}}for(;f<n.length;){const S=n[f];if("number"==typeof S)break;if(S===r){if(null===a)return void(null!==h&&(n[f+1]=h));if(a===n[f+1])return void(n[f+2]=h)}f++,null!==a&&f++,null!==h&&f++}-1!==C&&(n.splice(C,0,s),f=C+1),n.splice(f++,0,r),null!==a&&n.splice(f++,0,a),null!==h&&n.splice(f++,0,h)}const He="ng-template";function Ht(n,s,r,a){let h=0;if(a){for(;h<s.length&&"string"==typeof s[h];h+=2)if("class"===s[h]&&-1!==pl(s[h+1].toLowerCase(),r,0))return!0}else if(pn(n))return!1;if(h=s.indexOf(1,h),h>-1){let f;for(;++h<s.length&&"string"==typeof(f=s[h]);)if(f.toLowerCase()===r)return!0}return!1}function pn(n){return 4===n.type&&n.value!==He}function Ds(n,s,r){return s===(4!==n.type||r?n.value:He)}function Jo(n,s,r){let a=4;const h=n.attrs,f=null!==h?function Dt(n){for(let s=0;s<n.length;s++)if(de(n[s]))return s;return n.length}(h):0;let C=!1;for(let S=0;S<s.length;S++){const P=s[S];if("number"!=typeof P){if(!C)if(4&a){if(a=2|1&a,""!==P&&!Ds(n,P,r)||""===P&&1===s.length){if(Mi(a))return!1;C=!0}}else if(8&a){if(null===h||!Ht(n,h,P,r)){if(Mi(a))return!1;C=!0}}else{const _=s[++S],pe=ca(P,h,pn(n),r);if(-1===pe){if(Mi(a))return!1;C=!0;continue}if(""!==_){let Ie;if(Ie=pe>f?"":h[pe+1].toLowerCase(),2&a&&_!==Ie){if(Mi(a))return!1;C=!0}}}}else{if(!C&&!Mi(a)&&!Mi(P))return!1;if(C&&Mi(P))continue;C=!1,a=P|1&a}}return Mi(a)||C}function Mi(n){return!(1&n)}function ca(n,s,r,a){if(null===s)return-1;let h=0;if(a||!r){let f=!1;for(;h<s.length;){const C=s[h];if(C===n)return h;if(3===C||6===C)f=!0;else{if(1===C||2===C){let S=s[++h];for(;"string"==typeof S;)S=s[++h];continue}if(4===C)break;if(0===C){h+=4;continue}}h+=f?1:2}return-1}return function tn(n,s){let r=n.indexOf(4);if(r>-1)for(r++;r<n.length;){const a=n[r];if("number"==typeof a)return-1;if(a===s)return r;r++}return-1}(s,n)}function Hd(n,s,r=!1){for(let a=0;a<s.length;a++)if(Jo(n,s[a],r))return!0;return!1}function ds(n,s){e:for(let r=0;r<s.length;r++){const a=s[r];if(n.length===a.length){for(let h=0;h<n.length;h++)if(n[h]!==a[h])continue e;return!0}}return!1}function ha(n,s){return n?":not("+s.trim()+")":s}function Cl(n){let s=n[0],r=1,a=2,h="",f=!1;for(;r<n.length;){let C=n[r];if("string"==typeof C)if(2&a){const S=n[++r];h+="["+C+(S.length>0?'="'+S+'"':"")+"]"}else 8&a?h+="."+C:4&a&&(h+=" "+C);else""!==h&&!Mi(C)&&(s+=ha(f,h),h=""),a=C,f=f||!Mi(a);r++}return""!==h&&(s+=ha(f,h)),s}function Je(n){return Ue(()=>{const s=jd(n),r={...s,decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===To.OnPush,directiveDefs:null,pipeDefs:null,dependencies:s.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Js.Emulated,styles:n.styles||xn,_:null,schemas:n.schemas||null,tView:null,id:""};vl(r);const a=n.dependencies;return r.directiveDefs=yr(a,!1),r.pipeDefs=yr(a,!0),r.id=function fa(n){let s=0;const r=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(const h of r)s=Math.imul(31,s)+h.charCodeAt(0)|0;return s+=2147483648,"c"+s}(r),r})}function yl(n){return Dn(n)||ui(n)}function Ud(n){return null!==n}function Dl(n){return Ue(()=>({type:n.type,bootstrap:n.bootstrap||xn,declarations:n.declarations||xn,imports:n.imports||xn,exports:n.exports||xn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Gd(n,s){if(null==n)return Hi;const r={};for(const a in n)if(n.hasOwnProperty(a)){const h=n[a];let f,C,S=Qs.None;Array.isArray(h)?(S=h[0],f=h[1],C=h[2]??f):(f=h,C=h),s?(r[f]=S!==Qs.None?[a,S]:a,s[f]=C):r[f]=a}return r}function ua(n){return Ue(()=>{const s=jd(n);return vl(s),s})}function cs(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Dn(n){return n[ps]||null}function ui(n){return n[dr]||null}function Bn(n){return n[Lr]||null}function hs(n){const s=Dn(n)||ui(n)||Bn(n);return null!==s&&s.standalone}function Ui(n,s){const r=n[sa]||null;if(!r&&!0===s)throw new Error(`Type ${Wt(n)} does not have '\u0275mod' property.`);return r}function jd(n){const s={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputTransforms:null,inputConfig:n.inputs||Hi,exportAs:n.exportAs||null,standalone:!0===n.standalone,signals:!0===n.signals,selectors:n.selectors||xn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:Gd(n.inputs,s),outputs:Gd(n.outputs),debugInfo:null}}function vl(n){n.features?.forEach(s=>s(n))}function yr(n,s){if(!n)return null;const r=s?Bn:yl;return()=>("function"==typeof n?n():n).map(a=>r(a)).filter(Ud)}function Wr(n){return{\u0275providers:n}}function ma(...n){return{\u0275providers:us(0,n),\u0275fromNgModule:!0}}function us(n,...s){const r=[],a=new Set;let h;const f=C=>{r.push(C)};return ls(s,C=>{const S=C;Io(S,f,[],a)&&(h||=[],h.push(S))}),void 0!==h&&Ns(h,f),r}function Ns(n,s){for(let r=0;r<n.length;r++){const{ngModule:a,providers:h}=n[r];Qo(h,f=>{s(f,a)})}}function Io(n,s,r,a){if(!(n=Ge(n)))return!1;let h=null,f=Nn(n);const C=!f&&Dn(n);if(f||C){if(C&&!C.standalone)return!1;h=n}else{const P=n.ngModule;if(f=Nn(P),!f)return!1;h=P}const S=a.has(h);if(C){if(S)return!1;if(a.add(h),C.dependencies){const P="function"==typeof C.dependencies?C.dependencies():C.dependencies;for(const _ of P)Io(_,s,r,a)}}else{if(!f)return!1;{if(null!=f.imports&&!S){let _;a.add(h);try{ls(f.imports,pe=>{Io(pe,s,r,a)&&(_||=[],_.push(pe))})}finally{}void 0!==_&&Ns(_,s)}if(!S){const _=Xs(h)||(()=>new h);s({provide:h,useFactory:_,deps:xn},h),s({provide:Yo,useValue:h,multi:!0},h),s({provide:ro,useValue:()=>si(h),multi:!0},h)}const P=f.providers;if(null!=P&&!S){const _=n;Qo(P,pe=>{s(pe,_)})}}}return h!==n&&void 0!==n.providers}function Qo(n,s){for(let r of n)gs(r)&&(r=r.\u0275providers),Array.isArray(r)?Qo(r,s):s(r)}const Wd=$t({provide:String,useValue:$t});function El(n){return null!==n&&"object"==typeof n&&Wd in n}function cn(n){return"function"==typeof n}const Sl=new dn(""),Xi={},pa={};let Jn;function Gt(){return void 0===Jn&&(Jn=new Xo),Jn}class yi{}class Zo extends yi{get destroyed(){return this._destroyed}constructor(s,r,a,h){super(),this.parent=r,this.source=a,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Zs(s,C=>this.processProvider(C)),this.records.set(da,Ao(void 0,this)),h.has("environment")&&this.records.set(yi,Ao(void 0,this));const f=this.records.get(Sl);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(Yo,xn,gn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const s=X(null);try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const r=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of r)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),X(s)}}onDestroy(s){return this.assertNotDestroyed(),this._onDestroyHooks.push(s),()=>this.removeOnDestroy(s)}runInContext(s){this.assertNotDestroyed();const r=ts(this),a=pi(void 0);try{return s()}finally{ts(r),pi(a)}}get(s,r=Rs,a=gn.Default){if(this.assertNotDestroyed(),s.hasOwnProperty(wr))return s[wr](this);a=Ys(a);const f=ts(this),C=pi(void 0);try{if(!(a&gn.SkipSelf)){let P=this.records.get(s);if(void 0===P){const _=function Mh(n){return"function"==typeof n||"object"==typeof n&&n instanceof dn}(s)&&Yt(s);P=_&&this.injectableDefInScope(_)?Ao(vs(s),Xi):null,this.records.set(s,P)}if(null!=P)return this.hydrate(s,P)}return(a&gn.Self?Gt():this.parent).get(s,r=a&gn.Optional&&r===Rs?null:r)}catch(S){if("NullInjectorError"===S.name){if((S[Ks]=S[Ks]||[]).unshift(Wt(s)),f)throw S;return function mr(n,s,r,a){const h=n[Ks];throw s[yo]&&h.unshift(s[yo]),n.message=function Eo(n,s,r,a=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let h=Wt(s);if(Array.isArray(s))h=s.map(Wt).join(" -> ");else if("object"==typeof s){let f=[];for(let C in s)if(s.hasOwnProperty(C)){let S=s[C];f.push(C+":"+("string"==typeof S?JSON.stringify(S):Wt(S)))}h=`{${f.join(", ")}}`}return`${r}${a?"("+a+")":""}[${h}]: ${n.replace(Go,"\n  ")}`}("\n"+n.message,h,r,a),n.ngTokenPath=h,n[Ks]=null,n}(S,s,"R3InjectorError",this.source)}throw S}finally{pi(C),ts(f)}}resolveInjectorInitializers(){const s=X(null),r=ts(this),a=pi(void 0);try{const f=this.get(ro,xn,gn.Self);for(const C of f)C()}finally{ts(r),pi(a),X(s)}}toString(){const s=[],r=this.records;for(const a of r.keys())s.push(Wt(a));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new xe(205,!1)}processProvider(s){let r=cn(s=Ge(s))?s:Ge(s&&s.provide);const a=function $d(n){return El(n)?Ao(void 0,n.useValue):Ao(ko(n),Xi)}(s);if(!cn(s)&&!0===s.multi){let h=this.records.get(r);h||(h=Ao(void 0,Xi,!0),h.factory=()=>Hr(h.multi),this.records.set(r,h)),r=s,h.multi.push(s)}this.records.set(r,a)}hydrate(s,r){const a=X(null);try{return r.value===Xi&&(r.value=pa,r.value=r.factory()),"object"==typeof r.value&&r.value&&function zd(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(r.value)&&this._ngOnDestroyHooks.add(r.value),r.value}finally{X(a)}}injectableDefInScope(s){if(!s.providedIn)return!1;const r=Ge(s.providedIn);return"string"==typeof r?"any"===r||this.scopes.has(r):this.injectorDefTypes.has(r)}removeOnDestroy(s){const r=this._onDestroyHooks.indexOf(s);-1!==r&&this._onDestroyHooks.splice(r,1)}}function vs(n){const s=Yt(n),r=null!==s?s.factory:Xs(n);if(null!==r)return r;if(n instanceof dn)throw new xe(204,!1);if(n instanceof Function)return function Qn(n){if(n.length>0)throw new xe(204,!1);const r=function mn(n){return n&&(n[wi]||n[Vi])||null}(n);return null!==r?()=>r.factory(n):()=>new n}(n);throw new xe(204,!1)}function ko(n,s,r){let a;if(cn(n)){const h=Ge(n);return Xs(h)||vs(h)}if(El(n))a=()=>Ge(n.useValue);else if(function Pn(n){return!(!n||!n.useFactory)}(n))a=()=>n.useFactory(...Hr(n.deps||[]));else if(function ga(n){return!(!n||!n.useExisting)}(n))a=()=>si(Ge(n.useExisting));else{const h=Ge(n&&(n.useClass||n.provide));if(!function oi(n){return!!n.deps}(n))return Xs(h)||vs(h);a=()=>new h(...Hr(n.deps))}return a}function Ao(n,s,r=!1){return{factory:n,value:s,multi:r?[]:void 0}}function Zs(n,s){for(const r of n)Array.isArray(r)?Zs(r,s):r&&gs(r)?Zs(r.\u0275providers,s):s(r)}function qo(n,s){n instanceof Zo&&n.assertNotDestroyed();const a=ts(n),h=pi(void 0);try{return s()}finally{ts(a),pi(h)}}function Tl(){return void 0!==Co()||null!=function Fs(){return Cs}()}function lo(n){if(!Tl())throw new xe(-203,!1)}const Vn=0,ut=1,Rt=2,mt=3,In=4,Ut=5,vn=6,Ji=7,Kn=8,Sn=9,xi=10,Zt=11,Gi=12,zr=13,Es=14,kn=15,fi=16,ks=17,Ls=18,_o=19,er=20,Pi=21,Kr=22,Mo=23,hn=25,Ca=1,ns=7,ao=9,ii=10;var Yr=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(Yr||{});function Gn(n){return Array.isArray(n)&&"object"==typeof n[Ca]}function Oi(n){return Array.isArray(n)&&!0===n[Ca]}function Il(n){return!!(4&n.flags)}function co(n){return n.componentOffset>-1}function Dr(n){return!(1&~n.flags)}function fs(n){return!!n.template}function ya(n){return!!(512&n[Rt])}class Al{constructor(s,r,a){this.previousValue=s,this.currentValue=r,this.firstChange=a}isFirstChange(){return this.firstChange}}function Ea(n,s,r,a){null!==s?s.applyValueToInputSignal(s,a):n[r]=a}function Ml(){return Sa}function Sa(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ta),Xd}function Xd(){const n=Nh(this),s=n?.current;if(s){const r=n.previous;if(r===Hi)n.previous=s;else for(let a in s)r[a]=s[a];n.current=null,this.ngOnChanges(s)}}function Ta(n,s,r,a,h){const f=this.declaredInputs[a],C=Nh(n)||function Ia(n,s){return n[Jr]=s}(n,{previous:Hi,current:null}),S=C.current||(C.current={}),P=C.previous,_=P[f];S[f]=new Al(_&&_.currentValue,r,P===Hi),Ea(n,s,h,r)}Ml.ngInherit=!0;const Jr="__ngSimpleChanges__";function Nh(n){return n[Jr]||null}const qs=function(n,s,r){},Ma="svg";let Ss=!1;function wt(n){for(;Array.isArray(n);)n=n[Vn];return n}function Po(n,s){return wt(s[n])}function ti(n,s){return wt(s[n.index])}function bi(n,s){return n.data[s]}function _s(n,s){return n[s]}function On(n,s){const r=s[n];return Gn(r)?r:r[Vn]}function Qr(n){return!(128&~n[Rt])}function ho(n,s){return null==s?null:n[s]}function Qd(n){n[ks]=0}function Pa(n){1024&n[Rt]||(n[Rt]|=1024,Qr(n)&&Zr(n))}function Oa(n){return!!(9216&n[Rt]||n[Mo]?.dirty)}function ba(n){n[xi].changeDetectionScheduler?.notify(1),Oa(n)?Zr(n):64&n[Rt]&&(function Yp(){return Ss}()?(n[Rt]|=1024,Zr(n)):n[xi].changeDetectionScheduler?.notify())}function Zr(n){n[xi].changeDetectionScheduler?.notify();let s=vr(n);for(;null!==s&&!(8192&s[Rt])&&(s[Rt]|=8192,Qr(s));)s=vr(s)}function Ra(n,s){if(!(256&~n[Rt]))throw new xe(911,!1);null===n[Pi]&&(n[Pi]=[]),n[Pi].push(s)}function vr(n){const s=n[mt];return Oi(s)?s[mt]:s}const on={lFrame:oc(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function wh(){return on.bindingsEnabled}function kr(){return null!==on.skipHydrationRootTNode}function lt(){return on.lFrame.lView}function bn(){return on.lFrame.tView}function _d(n){return on.lFrame.contextLView=n,n[Kn]}function ec(n){return on.lFrame.contextLView=null,n}function Wn(){let n=tc();for(;null!==n&&64===n.type;)n=n.parent;return n}function tc(){return on.lFrame.currentTNode}function eo(n,s){const r=on.lFrame;r.currentTNode=n,r.isParent=s}function Ol(){return on.lFrame.isParent}function La(){on.lFrame.isParent=!1}function ss(){const n=on.lFrame;let s=n.bindingRootIndex;return-1===s&&(s=n.bindingRootIndex=n.tView.bindingStartIndex),s}function jn(){return on.lFrame.bindingIndex}function Ln(){return on.lFrame.bindingIndex++}function bo(n){const s=on.lFrame,r=s.bindingIndex;return s.bindingIndex=s.bindingIndex+n,r}function wf(n,s){const r=on.lFrame;r.bindingIndex=r.bindingRootIndex=n,nc(s)}function nc(n){on.lFrame.currentDirectiveIndex=n}function ic(){return on.lFrame.currentQueryIndex}function Rl(n){on.lFrame.currentQueryIndex=n}function sc(n){const s=n[ut];return 2===s.type?s.declTNode:1===s.type?n[Ut]:null}function Ba(n,s,r){if(r&gn.SkipSelf){let h=s,f=n;for(;!(h=h.parent,null!==h||r&gn.Host||(h=sc(f),null===h||(f=f[Es],10&h.type))););if(null===h)return!1;s=h,n=f}const a=on.lFrame=Ha();return a.currentTNode=s,a.lView=n,!0}function Fl(n){const s=Ha(),r=n[ut];on.lFrame=s,s.currentTNode=r.firstChild,s.lView=n,s.tView=r,s.contextLView=n,s.bindingIndex=r.bindingStartIndex,s.inI18n=!1}function Ha(){const n=on.lFrame,s=null===n?null:n.child;return null===s?oc(n):s}function oc(n){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=s),s}function rc(){const n=on.lFrame;return on.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const jh=rc;function Ua(){const n=rc();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ri(){return on.lFrame.selectedIndex}function nr(n){on.lFrame.selectedIndex=n}function qn(){const n=on.lFrame;return bi(n.tView,n.selectedIndex)}function Ga(){on.lFrame.currentNamespace=Ma}function lc(){!function Uf(){on.lFrame.currentNamespace=null}()}let Wh=!0;function el(){return Wh}function fo(n){Wh=n}function ja(n,s){for(let r=s.directiveStart,a=s.directiveEnd;r<a;r++){const f=n.data[r].type.prototype,{ngAfterContentInit:C,ngAfterContentChecked:S,ngAfterViewInit:P,ngAfterViewChecked:_,ngOnDestroy:pe}=f;C&&(n.contentHooks??=[]).push(-r,C),S&&((n.contentHooks??=[]).push(r,S),(n.contentCheckHooks??=[]).push(r,S)),P&&(n.viewHooks??=[]).push(-r,P),_&&((n.viewHooks??=[]).push(r,_),(n.viewCheckHooks??=[]).push(r,_)),null!=pe&&(n.destroyHooks??=[]).push(r,pe)}}function Wa(n,s,r){dc(n,s,3,r)}function $a(n,s,r,a){(3&n[Rt])===r&&dc(n,s,r,a)}function tl(n,s){let r=n[Rt];(3&r)===s&&(r&=16383,r+=1,n[Rt]=r)}function dc(n,s,r,a){const f=a??-1,C=s.length-1;let S=0;for(let P=void 0!==a?65535&n[ks]:0;P<C;P++)if("number"==typeof s[P+1]){if(S=s[P],null!=a&&S>=a)break}else s[P]<0&&(n[ks]+=65536),(S<f||-1==f)&&(jf(n,r,s,P),n[ks]=(4294901760&n[ks])+P+2),P++}function cc(n,s){qs(4,n,s);const r=X(null);try{s.call(n)}finally{X(r),qs(5,n,s)}}function jf(n,s,r,a){const h=r[a]<0,f=r[a+1],S=n[h?-r[a]:r[a]];h?n[Rt]>>14<n[ks]>>16&&(3&n[Rt])===s&&(n[Rt]+=16384,cc(S,f)):cc(S,f)}const Ro=-1;class Fo{constructor(s,r,a){this.factory=s,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=a}}function uc(n){return n!==Ro}function Nl(n){return 32767&n}function Ll(n,s){let r=function Kf(n){return n>>16}(n),a=s;for(;r>0;)a=a[Es],r--;return a}let fc=!0;function Ka(n){const s=fc;return fc=n,s}const $h=255,zh=5;let Yf=0;const ji={};function Ya(n,s){const r=Xa(n,s);if(-1!==r)return r;const a=s[ut];a.firstCreatePass&&(n.injectorIndex=s.length,mc(a.data,n),mc(s,null),mc(a.blueprint,null));const h=Er(n,s),f=n.injectorIndex;if(uc(h)){const C=Nl(h),S=Ll(h,s),P=S[ut].data;for(let _=0;_<8;_++)s[f+_]=S[C+_]|P[C+_]}return s[f+8]=h,f}function mc(n,s){n.push(0,0,0,0,0,0,0,0,s)}function Xa(n,s){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===s[n.injectorIndex+8]?-1:n.injectorIndex}function Er(n,s){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let r=0,a=null,h=s;for(;null!==h;){if(a=ws(h),null===a)return Ro;if(r++,h=h[Es],-1!==a.injectorIndex)return a.injectorIndex|r<<16}return Ro}function gc(n,s,r){!function Kh(n,s,r){let a;"string"==typeof r?a=r.charCodeAt(0)||0:r.hasOwnProperty(zs)&&(a=r[zs]),null==a&&(a=r[zs]=Yf++);const h=a&$h;s.data[n+(h>>zh)]|=1<<h}(n,s,r)}function Yh(n,s,r){if(r&gn.Optional||void 0!==n)return n;hr()}function Xh(n,s,r,a){if(r&gn.Optional&&void 0===a&&(a=null),!(r&(gn.Self|gn.Host))){const h=n[Sn],f=pi(void 0);try{return h?h.get(s,a,r&gn.Optional):Vr(s,a,r&gn.Optional)}finally{pi(f)}}return Yh(a,0,r)}function Jh(n,s,r,a=gn.Default,h){if(null!==n){if(2048&s[Rt]&&!(a&gn.Self)){const C=function Qf(n,s,r,a,h){let f=n,C=s;for(;null!==f&&null!==C&&2048&C[Rt]&&!(512&C[Rt]);){const S=Qh(f,C,r,a|gn.Self,ji);if(S!==ji)return S;let P=f.parent;if(!P){const _=C[er];if(_){const pe=_.get(r,ji,a);if(pe!==ji)return pe}P=ws(C),C=C[Es]}f=P}return h}(n,s,r,a,ji);if(C!==ji)return C}const f=Qh(n,s,r,a,ji);if(f!==ji)return f}return Xh(s,r,a,h)}function Qh(n,s,r,a,h){const f=function Kt(n){if("string"==typeof n)return n.charCodeAt(0)||0;const s=n.hasOwnProperty(zs)?n[zs]:void 0;return"number"==typeof s?s>=0?s&$h:Jf:s}(r);if("function"==typeof f){if(!Ba(s,n,a))return a&gn.Host?Yh(h,0,a):Xh(s,r,a,h);try{let C;if(C=f(a),null!=C||a&gn.Optional)return C;hr()}finally{jh()}}else if("number"==typeof f){let C=null,S=Xa(n,s),P=Ro,_=a&gn.Host?s[kn][Ut]:null;for((-1===S||a&gn.SkipSelf)&&(P=-1===S?Er(n,s):s[S+8],P!==Ro&&Cc(a,!1)?(C=s[ut],S=Nl(P),s=Ll(P,s)):S=-1);-1!==S;){const pe=s[ut];if(Zh(f,S,pe.data)){const Ie=Xf(S,s,r,C,a,_);if(Ie!==ji)return Ie}P=s[S+8],P!==Ro&&Cc(a,s[ut].data[S+8]===_)&&Zh(f,S,s)?(C=pe,S=Nl(P),s=Ll(P,s)):S=-1}}return h}function Xf(n,s,r,a,h,f){const C=s[ut],S=C.data[n+8],pe=Ja(S,C,r,null==a?co(S)&&fc:a!=C&&!!(3&S.type),h&gn.Host&&f===S);return null!==pe?Sr(s,C,pe,S):ji}function Ja(n,s,r,a,h){const f=n.providerIndexes,C=s.data,S=1048575&f,P=n.directiveStart,pe=f>>20,Be=h?S+pe:n.directiveEnd;for(let $e=a?S:S+pe;$e<Be;$e++){const Qe=C[$e];if($e<P&&r===Qe||$e>=P&&Qe.type===r)return $e}if(h){const $e=C[P];if($e&&fs($e)&&$e.type===r)return P}return null}function Sr(n,s,r,a){let h=n[r];const f=s.data;if(function hc(n){return n instanceof Fo}(h)){const C=h;C.resolving&&function cr(n,s){throw s&&s.join(" > "),new xe(-200,n)}(function Mn(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():_t(n)}(f[r]));const S=Ka(C.canSeeViewProviders);C.resolving=!0;const _=C.injectImpl?pi(C.injectImpl):null;Ba(n,a,gn.Default);try{h=n[r]=C.factory(void 0,f,n,a),s.firstCreatePass&&r>=a.directiveStart&&function Gf(n,s,r){const{ngOnChanges:a,ngOnInit:h,ngDoCheck:f}=s.type.prototype;if(a){const C=Sa(s);(r.preOrderHooks??=[]).push(n,C),(r.preOrderCheckHooks??=[]).push(n,C)}h&&(r.preOrderHooks??=[]).push(0-n,h),f&&((r.preOrderHooks??=[]).push(n,f),(r.preOrderCheckHooks??=[]).push(n,f))}(r,f[r],s)}finally{null!==_&&pi(_),Ka(S),C.resolving=!1,jh()}}return h}function Zh(n,s,r){return!!(r[s+(n>>zh)]&1<<n)}function Cc(n,s){return!(n&gn.Self||n&gn.Host&&s)}class vi{constructor(s,r){this._tNode=s,this._lView=r}get(s,r,a){return Jh(this._tNode,this._lView,s,Ys(a),r)}}function Jf(){return new vi(Wn(),lt())}function yc(n){return Ue(()=>{const s=n.prototype.constructor,r=s[bs]||Dc(s),a=Object.prototype;let h=Object.getPrototypeOf(n.prototype).constructor;for(;h&&h!==a;){const f=h[bs]||Dc(h);if(f&&f!==r)return f;h=Object.getPrototypeOf(h)}return f=>new f})}function Dc(n){return Ze(n)?()=>{const s=Dc(Ge(n));return s&&s()}:Xs(n)}function ws(n){const s=n[ut],r=s.type;return 2===r?s.declTNode:1===r?n[Ut]:null}function Qa(n){return function pc(n,s){if("class"===s)return n.classes;if("style"===s)return n.styles;const r=n.attrs;if(r){const a=r.length;let h=0;for(;h<a;){const f=r[h];if(de(f))break;if(0===f)h+=2;else if("number"==typeof f)for(h++;h<a&&"string"==typeof r[h];)h++;else{if(f===s)return r[h+1];h+=2}}}return null}(Wn(),n)}function Vl(n,s=null,r=null,a){const h=_a(n,s,r,a);return h.resolveInjectorInitializers(),h}function _a(n,s=null,r=null,a,h=new Set){const f=[r||xn,ma(n)];return a=a||("object"==typeof n?void 0:Wt(n)),new Zo(f,s||Gt(),a||null,h)}let Zi=(()=>{class n{static#e=this.THROW_IF_NOT_FOUND=Rs;static#t=this.NULL=new Xo;static create(r,a){if(Array.isArray(r))return Vl({name:""},a,r,"");{const h=r.name??"";return Vl({name:h},r.parent,r.providers,h)}}static#n=this.\u0275prov=Rn({token:n,providedIn:"any",factory:()=>si(da)});static#i=this.__NG_ELEMENT_ID__=-1}return n})();function ed(n){return n.ngOriginalError}class ir{constructor(){this._console=console}handleError(s){const r=this._findOriginalError(s);this._console.error("ERROR",s),r&&this._console.error("ORIGINAL ERROR",r)}_findOriginalError(s){let r=s&&ed(s);for(;r&&ed(r);)r=ed(r);return r||null}}const eu=new dn("",{providedIn:"root",factory:()=>en(ir).handleError.bind(void 0)});let Ar=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=qf;static#t=this.__NG_ENV_ID__=r=>r}return n})();class Bl extends Ar{constructor(s){super(),this._lView=s}onDestroy(s){return Ra(this._lView,s),()=>function Zd(n,s){if(null===n[Pi])return;const r=n[Pi].indexOf(s);-1!==r&&n[Pi].splice(r,1)}(this._lView,s)}}function qf(){return new Bl(lt())}function Ic(n,s){return Xe(n,s)}const em=(Ic.required=function _f(n){return Xe(Ve,n)},Ic);function tm(){return il(Wn(),lt())}function il(n,s){return new sl(ti(n,s))}let sl=(()=>{class n{constructor(r){this.nativeElement=r}static#e=this.__NG_ELEMENT_ID__=tm}return n})();function iu(n){return n instanceof sl?n.nativeElement:n}function td(n){return s=>{setTimeout(n,void 0,s)}}const mo=class nm extends ot.B{constructor(s=!1){super(),this.destroyRef=void 0,this.__isAsync=s,Tl()&&(this.destroyRef=en(Ar,{optional:!0})??void 0)}emit(s){const r=X(null);try{super.next(s)}finally{X(r)}}subscribe(s,r,a){let h=s,f=r||(()=>null),C=a;if(s&&"object"==typeof s){const P=s;h=P.next?.bind(P),f=P.error?.bind(P),C=P.complete?.bind(P)}this.__isAsync&&(f=td(f),h&&(h=td(h)),C&&(C=td(C)));const S=super.subscribe({next:h,error:f,complete:C});return s instanceof Pe.yU&&s.add(S),S}};function im(){return this._results[Symbol.iterator]()}class nd{static#e=Symbol.iterator;get changes(){return this._changes??=new mo}constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;const r=nd.prototype;r[Symbol.iterator]||(r[Symbol.iterator]=im)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,r){return this._results.reduce(s,r)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,r){this.dirty=!1;const a=function Xt(n){return n.flat(Number.POSITIVE_INFINITY)}(s);(this._changesDetected=!function So(n,s,r){if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++){let h=n[a],f=s[a];if(r&&(h=r(h),f=r(f)),f!==h)return!1}return!0}(this._results,a,r))&&(this._results=a,this.length=a.length,this.last=a[this.length-1],this.first=a[0])}notifyOnChanges(){void 0!==this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(s){this._onDirty=s}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){void 0!==this._changes&&(this._changes.complete(),this._changes.unsubscribe())}}function Ac(n){return!(128&~n.flags)}const Mc=new Map;let om=0;const Oc="__ngContext__";function ki(n,s){Gn(s)?(n[Oc]=s[_o],function lm(n){Mc.set(n[_o],n)}(s)):n[Oc]=s}function du(n){return hu(n[Gi])}function cu(n){return hu(n[In])}function hu(n){for(;null!==n&&!Oi(n);)n=n[In];return n}let Fc;function n0(n){Fc=n}function xr(){if(void 0!==Fc)return Fc;if(typeof document<"u")return document;throw new xe(210,!1)}const Im=new dn("",{providedIn:"root",factory:()=>s0}),s0="ng",Am=new dn(""),yu=new dn("",{providedIn:"platform",factory:()=>"unknown"}),o0=new dn(""),r0=new dn("",{providedIn:"root",factory:()=>xr().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let ve=()=>null;function Ye(n,s,r=!1){return ve(n,s,r)}const sd=new dn("",{providedIn:"root",factory:()=>!1});let Pr,Kl;function Or(n){return function ol(){if(void 0===Pr&&(Pr=null,Mt.trustedTypes))try{Pr=Mt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Pr}()?.createHTML(n)||n}function od(){if(void 0===Kl&&(Kl=null,Mt.trustedTypes))try{Kl=Mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Kl}function Eu(n){return od()?.createHTML(n)||n}function zt(n){return od()?.createScriptURL(n)||n}class An{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Ke})`}}class qi extends An{getTypeName(){return"HTML"}}class Hs extends An{getTypeName(){return"Style"}}class Is extends An{getTypeName(){return"Script"}}class As extends An{getTypeName(){return"URL"}}class rl extends An{getTypeName(){return"ResourceURL"}}function Wi(n){return n instanceof An?n.changingThisBreaksApplicationSecurity:n}function Ei(n,s){const r=function Yl(n){return n instanceof An&&n.getTypeName()||null}(n);if(null!=r&&r!==s){if("ResourceURL"===r&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${r} (see ${Ke})`)}return r===s}function DS(n){return new qi(n)}function vS(n){return new Hs(n)}function ES(n){return new Is(n)}function SS(n){return new As(n)}function TS(n){return new rl(n)}class IS{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const r=(new window.DOMParser).parseFromString(Or(s),"text/html").body;return null===r?this.inertDocumentHelper.getInertBodyElement(s):(r.removeChild(r.firstChild),r)}catch{return null}}}class AS{constructor(s){this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(s){const r=this.inertDocument.createElement("template");return r.innerHTML=Or(s),r}}const xS=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Tu(n){return(n=String(n)).match(xS)?n:"unsafe:"+n}function br(n){const s={};for(const r of n.split(","))s[r]=!0;return s}function Vc(...n){const s={};for(const r of n)for(const a in r)r.hasOwnProperty(a)&&(s[a]=!0);return s}const h0=br("area,br,col,hr,img,wbr"),u0=br("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),f0=br("rp,rt"),xm=Vc(h0,Vc(u0,br("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Vc(f0,br("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Vc(f0,u0)),Pm=br("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),m0=Vc(Pm,br("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),br("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),PS=br("script,style,template");class OS{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let r=s.firstChild,a=!0,h=[];for(;r;)if(r.nodeType===Node.ELEMENT_NODE?a=this.startElement(r):r.nodeType===Node.TEXT_NODE?this.chars(r.nodeValue):this.sanitizedSomething=!0,a&&r.firstChild)h.push(r),r=FS(r);else for(;r;){r.nodeType===Node.ELEMENT_NODE&&this.endElement(r);let f=RS(r);if(f){r=f;break}r=h.pop()}return this.buf.join("")}startElement(s){const r=g0(s).toLowerCase();if(!xm.hasOwnProperty(r))return this.sanitizedSomething=!0,!PS.hasOwnProperty(r);this.buf.push("<"),this.buf.push(r);const a=s.attributes;for(let h=0;h<a.length;h++){const f=a.item(h),C=f.name,S=C.toLowerCase();if(!m0.hasOwnProperty(S)){this.sanitizedSomething=!0;continue}let P=f.value;Pm[S]&&(P=Tu(P)),this.buf.push(" ",C,'="',C0(P),'"')}return this.buf.push(">"),!0}endElement(s){const r=g0(s).toLowerCase();xm.hasOwnProperty(r)&&!h0.hasOwnProperty(r)&&(this.buf.push("</"),this.buf.push(r),this.buf.push(">"))}chars(s){this.buf.push(C0(s))}}function RS(n){const s=n.nextSibling;if(s&&n!==s.previousSibling)throw p0(s);return s}function FS(n){const s=n.firstChild;if(s&&function bS(n,s){return(n.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(n,s))throw p0(s);return s}function g0(n){const s=n.nodeName;return"string"==typeof s?s:"FORM"}function p0(n){return new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`)}const NS=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,LS=/([^\#-~ |!])/g;function C0(n){return n.replace(/&/g,"&amp;").replace(NS,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(LS,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Iu;function y0(n,s){let r=null;try{Iu=Iu||function c0(n){const s=new AS(n);return function MS(){try{return!!(new window.DOMParser).parseFromString(Or(""),"text/html")}catch{return!1}}()?new IS(s):s}(n);let a=s?String(s):"";r=Iu.getInertBodyElement(a);let h=5,f=a;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,a=f,f=r.innerHTML,r=Iu.getInertBodyElement(a)}while(a!==f);return Or((new OS).sanitizeChildren(Om(r)||r))}finally{if(r){const a=Om(r)||r;for(;a.firstChild;)a.removeChild(a.firstChild)}}}function Om(n){return"content"in n&&function wS(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Xl=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Xl||{});function D0(n){const s=Bc();return s?Eu(s.sanitize(Xl.HTML,n)||""):Ei(n,"HTML")?Eu(Wi(n)):y0(xr(),_t(n))}function bm(n){const s=Bc();return s?s.sanitize(Xl.URL,n)||"":Ei(n,"URL")?Wi(n):Tu(_t(n))}function v0(n){const s=Bc();if(s)return zt(s.sanitize(Xl.RESOURCE_URL,n)||"");if(Ei(n,"ResourceURL"))return zt(Wi(n));throw new xe(904,!1)}function E0(n,s,r){return function GS(n,s){return"src"===s&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===s&&("base"===n||"link"===n)?v0:bm}(s,r)(n)}function Bc(){const n=lt();return n&&n[xi].sanitizer}const jS=/^>|^->|<!--|-->|--!>|<!-$/g,WS=/(<|>)/g,$S="\u200b$1\u200b";function A0(n){return n.ownerDocument.defaultView}function M0(n){return n.ownerDocument}function to(n){return n instanceof Function?n():n}function No(n){return"browser"===(n??en(Zi)).get(yu)}var xu=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(xu||{});let Lm;function wm(n,s){return Lm(n,s)}function ld(n,s,r,a,h){if(null!=a){let f,C=!1;Oi(a)?f=a:Gn(a)&&(C=!0,a=a[Vn]);const S=wt(a);0===n&&null!==r?null==h?w0(s,r,S):Jl(s,r,S,h||null,!0):1===n&&null!==r?Jl(s,r,S,h||null,!0):2===n?function Gc(n,s,r){const a=bu(n,s);a&&function rT(n,s,r,a){n.removeChild(s,r,a)}(n,a,s,r)}(s,S,C):3===n&&s.destroyNode(S),null!=f&&function dT(n,s,r,a,h){const f=r[ns];f!==wt(r)&&ld(s,n,a,f,h);for(let S=ii;S<r.length;S++){const P=r[S];Fu(P[ut],P,n,s,a,f)}}(s,n,f,r,h)}}function Bm(n,s){return n.createComment(function S0(n){return n.replace(jS,s=>s.replace(WS,$S))}(s))}function Pu(n,s,r){return n.createElement(s,r)}function F0(n,s){s[xi].changeDetectionScheduler?.notify(1),Fu(n,s,s[Zt],2,null,null)}function N0(n,s){const r=n[ao],a=r.indexOf(s);r.splice(a,1)}function Hc(n,s){if(n.length<=ii)return;const r=ii+s,a=n[r];if(a){const h=a[fi];null!==h&&h!==n&&N0(h,a),s>0&&(n[r-1][In]=a[In]);const f=so(n,ii+s);!function _S(n,s){F0(n,s),s[Vn]=null,s[Ut]=null}(a[ut],a);const C=f[Ls];null!==C&&C.detachView(f[ut]),a[mt]=null,a[In]=null,a[Rt]&=-129}return a}function Ou(n,s){if(!(256&s[Rt])){const r=s[Zt];r.destroyNode&&Fu(n,s,r,3,null,null),function tT(n){let s=n[Gi];if(!s)return Hm(n[ut],n);for(;s;){let r=null;if(Gn(s))r=s[Gi];else{const a=s[ii];a&&(r=a)}if(!r){for(;s&&!s[In]&&s!==n;)Gn(s)&&Hm(s[ut],s),s=s[mt];null===s&&(s=n),Gn(s)&&Hm(s[ut],s),r=s&&s[In]}s=r}}(s)}}function Hm(n,s){if(256&s[Rt])return;const r=X(null);try{s[Rt]&=-129,s[Rt]|=256,s[Mo]&&T(s[Mo]),function oT(n,s){let r;if(null!=n&&null!=(r=n.destroyHooks))for(let a=0;a<r.length;a+=2){const h=s[r[a]];if(!(h instanceof Fo)){const f=r[a+1];if(Array.isArray(f))for(let C=0;C<f.length;C+=2){const S=h[f[C]],P=f[C+1];qs(4,S,P);try{P.call(S)}finally{qs(5,S,P)}}else{qs(4,h,f);try{f.call(h)}finally{qs(5,h,f)}}}}}(n,s),function sT(n,s){const r=n.cleanup,a=s[Ji];if(null!==r)for(let f=0;f<r.length-1;f+=2)if("string"==typeof r[f]){const C=r[f+3];C>=0?a[C]():a[-C].unsubscribe(),f+=2}else r[f].call(a[r[f+1]]);null!==a&&(s[Ji]=null);const h=s[Pi];if(null!==h){s[Pi]=null;for(let f=0;f<h.length;f++)(0,h[f])()}}(n,s),1===s[ut].type&&s[Zt].destroy();const a=s[fi];if(null!==a&&Oi(s[mt])){a!==s[mt]&&N0(a,s);const h=s[Ls];null!==h&&h.detachView(n)}!function ru(n){Mc.delete(n[_o])}(s)}finally{X(r)}}function Um(n,s,r){return function L0(n,s,r){let a=s;for(;null!==a&&40&a.type;)a=(s=a).parent;if(null===a)return r[Vn];{const{componentOffset:h}=a;if(h>-1){const{encapsulation:f}=n.data[a.directiveStart+h];if(f===Js.None||f===Js.Emulated)return null}return ti(a,r)}}(n,s.parent,r)}function Jl(n,s,r,a,h){n.insertBefore(s,r,a,h)}function w0(n,s,r){n.appendChild(s,r)}function V0(n,s,r,a,h){null!==a?Jl(n,s,r,a,h):w0(n,s,r)}function bu(n,s){return n.parentNode(s)}function B0(n,s,r){return U0(n,s,r)}let Gm,U0=function H0(n,s,r){return 40&n.type?ti(n,r):null};function Ru(n,s,r,a){const h=Um(n,a,s),f=s[Zt],S=B0(a.parent||s[Ut],a,s);if(null!=h)if(Array.isArray(r))for(let P=0;P<r.length;P++)V0(f,h,r[P],S,!1);else V0(f,h,r,S,!1);void 0!==Gm&&Gm(f,a,s,r,h)}function Uc(n,s){if(null!==s){const r=s.type;if(3&r)return ti(s,n);if(4&r)return jm(-1,n[s.index]);if(8&r){const a=s.child;if(null!==a)return Uc(n,a);{const h=n[s.index];return Oi(h)?jm(-1,h):wt(h)}}if(32&r)return wm(s,n)()||wt(n[s.index]);{const a=j0(n,s);return null!==a?Array.isArray(a)?a[0]:Uc(vr(n[kn]),a):Uc(n,s.next)}}return null}function j0(n,s){return null!==s?n[kn][Ut].projection[s.projection]:null}function jm(n,s){const r=ii+n+1;if(r<s.length){const a=s[r],h=a[ut].firstChild;if(null!==h)return Uc(a,h)}return s[ns]}function Wm(n,s,r,a,h,f,C){for(;null!=r;){const S=a[r.index],P=r.type;if(C&&0===s&&(S&&ki(wt(S),a),r.flags|=2),32&~r.flags)if(8&P)Wm(n,s,r.child,a,h,f,!1),ld(s,n,h,S,f);else if(32&P){const _=wm(r,a);let pe;for(;pe=_();)ld(s,n,h,pe,f);ld(s,n,h,S,f)}else 16&P?$0(n,s,a,r,h,f):ld(s,n,h,S,f);r=C?r.projectionNext:r.next}}function Fu(n,s,r,a,h,f){Wm(r,a,n.firstChild,s,h,f,!1)}function $0(n,s,r,a,h,f){const C=r[kn],P=C[Ut].projection[a.projection];if(Array.isArray(P))for(let _=0;_<P.length;_++)ld(s,n,h,P[_],f);else{let _=P;const pe=C[mt];Ac(a)&&(_.flags|=128),Wm(n,s,_,pe,h,f,!0)}}function z0(n,s,r){""===r?n.removeAttribute(s,"class"):n.setAttribute(s,"class",r)}function K0(n,s,r){const{mergedAttrs:a,classes:h,styles:f}=r;null!==a&&Cr(n,s,a),null!==h&&z0(n,s,h),null!==f&&function hT(n,s,r){n.setAttribute(s,"style",r)}(n,s,f)}const Tn={};function Y0(n=1){X0(bn(),lt(),ri()+n,!1)}function X0(n,s,r,a){if(!a)if(3&~s[Rt]){const f=n.preOrderHooks;null!==f&&$a(s,f,0,r)}else{const f=n.preOrderCheckHooks;null!==f&&Wa(s,f,r)}nr(r)}function ad(n,s=gn.Default){const r=lt();return null===r?si(n,s):Jh(Wn(),r,Ge(n),s)}function J0(){throw new Error("invalid")}function Q0(n,s,r,a,h,f){const C=X(null);try{let S=null;h&Qs.SignalBased&&(S=s[a][oe]),null!==S&&void 0!==S.transformFn&&(f=S.transformFn(f)),h&Qs.HasDecoratorInputTransform&&(f=n.inputTransforms[a].call(s,f)),null!==n.setInput?n.setInput(s,S,f,r,a):Ea(s,S,a,f)}finally{X(C)}}function Nu(n,s,r,a,h,f,C,S,P,_,pe){const Ie=s.blueprint.slice();return Ie[Vn]=h,Ie[Rt]=204|a,(null!==_||n&&2048&n[Rt])&&(Ie[Rt]|=2048),Qd(Ie),Ie[mt]=Ie[Es]=n,Ie[Kn]=r,Ie[xi]=C||n&&n[xi],Ie[Zt]=S||n&&n[Zt],Ie[Sn]=P||n&&n[Sn]||null,Ie[Ut]=f,Ie[_o]=function rm(){return om++}(),Ie[vn]=pe,Ie[er]=_,Ie[kn]=2==s.type?n[kn]:Ie,Ie}function dd(n,s,r,a,h){let f=n.data[s];if(null===f)f=function $m(n,s,r,a,h){const f=tc(),C=Ol(),P=n.data[s]=function DT(n,s,r,a,h,f){let C=s?s.injectorIndex:-1,S=0;return kr()&&(S|=128),{type:r,index:a,insertBeforeIndex:null,injectorIndex:C,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:S,providerIndexes:0,value:h,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?f:f&&f.parent,r,s,a,h);return null===n.firstChild&&(n.firstChild=P),null!==f&&(C?null==f.child&&null!==P.parent&&(f.child=P):null===f.next&&(f.next=P,P.prev=f)),P}(n,s,r,a,h),function Va(){return on.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=r,f.value=a,f.attrs=h;const C=function qr(){const n=on.lFrame,s=n.currentTNode;return n.isParent?s:s.parent}();f.injectorIndex=null===C?-1:C.injectorIndex}return eo(f,!0),f}function jc(n,s,r,a){if(0===r)return-1;const h=s.length;for(let f=0;f<r;f++)s.push(a),n.blueprint.push(a),n.data.push(null);return h}function Z0(n,s,r,a,h){const f=ri(),C=2&a;try{nr(-1),C&&s.length>hn&&X0(n,s,hn,!1),qs(C?2:0,h),r(a,h)}finally{nr(f),qs(C?3:1,h)}}function zm(n,s,r){if(Il(s)){const a=X(null);try{const f=s.directiveEnd;for(let C=s.directiveStart;C<f;C++){const S=n.data[C];S.contentQueries&&S.contentQueries(1,r[C],C)}}finally{X(a)}}}function Km(n,s,r){wh()&&(function MT(n,s,r,a){const h=r.directiveStart,f=r.directiveEnd;co(r)&&function NT(n,s,r){const a=ti(s,n),h=k0(r);let C=16;r.signals?C=4096:r.onPush&&(C=64);const S=Lu(n,Nu(n,h,null,C,a,s,null,n[xi].rendererFactory.createRenderer(a,r),null,null,null));n[s.index]=S}(s,r,n.data[h+r.componentOffset]),n.firstCreatePass||Ya(r,s),ki(a,s);const C=r.initialInputs;for(let S=h;S<f;S++){const P=n.data[S],_=Sr(s,n,S,r);ki(_,s),null!==C&&LT(0,S-h,_,P,0,C),fs(P)&&(On(r.index,s)[Kn]=Sr(s,n,S,r))}}(n,s,r,ti(r,s)),!(64&~r.flags)&&nC(n,s,r))}function Ym(n,s,r=ti){const a=s.localNames;if(null!==a){let h=s.index+1;for(let f=0;f<a.length;f+=2){const C=a[f+1],S=-1===C?r(s,n):n[C];n[h++]=S}}}function k0(n){const s=n.tView;return null===s||s.incompleteFirstPass?n.tView=Xm(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):s}function Xm(n,s,r,a,h,f,C,S,P,_,pe){const Ie=hn+a,Be=Ie+h,$e=function fT(n,s){const r=[];for(let a=0;a<s;a++)r.push(a<n?null:Tn);return r}(Ie,Be),Qe="function"==typeof _?_():_;return $e[ut]={type:n,blueprint:$e,template:r,queries:null,viewQuery:S,declTNode:s,data:$e.slice().fill(null,Ie),bindingStartIndex:Ie,expandoStartIndex:Be,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:P,consts:Qe,incompleteFirstPass:!1,ssrId:pe}}let q0=()=>null;function _0(n,s,r,a,h){for(let f in s){if(!s.hasOwnProperty(f))continue;const C=s[f];if(void 0===C)continue;a??={};let S,P=Qs.None;Array.isArray(C)?(S=C[0],P=C[1]):S=C;let _=f;if(null!==h){if(!h.hasOwnProperty(f))continue;_=h[f]}0===n?eC(a,r,_,S,P):eC(a,r,_,S)}return a}function eC(n,s,r,a,h){let f;n.hasOwnProperty(r)?(f=n[r]).push(s,a):f=n[r]=[s,a],void 0!==h&&f.push(h)}function Us(n,s,r,a,h,f,C,S){const P=ti(s,r);let pe,_=s.inputs;!S&&null!=_&&(pe=_[a])?(qm(n,r,pe,a,h),co(s)&&function ST(n,s){const r=On(s,n);16&r[Rt]||(r[Rt]|=64)}(r,s.index)):3&s.type&&(a=function ET(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(a),h=null!=C?C(h,s.value||"",a):h,f.setProperty(P,a,h))}function Jm(n,s,r,a){if(wh()){const h=null===a?null:{"":-1},f=function PT(n,s){const r=n.directiveRegistry;let a=null,h=null;if(r)for(let f=0;f<r.length;f++){const C=r[f];if(Hd(s,C.selectors,!1))if(a||(a=[]),fs(C))if(null!==C.findHostDirectiveDefs){const S=[];h=h||new Map,C.findHostDirectiveDefs(C,S,h),a.unshift(...S,C),Qm(n,s,S.length)}else a.unshift(C),Qm(n,s,0);else h=h||new Map,C.findHostDirectiveDefs?.(C,a,h),a.push(C)}return null===a?null:[a,h]}(n,r);let C,S;null===f?C=S=null:[C,S]=f,null!==C&&tC(n,s,r,C,h,S),h&&function OT(n,s,r){if(s){const a=n.localNames=[];for(let h=0;h<s.length;h+=2){const f=r[s[h+1]];if(null==f)throw new xe(-301,!1);a.push(s[h],f)}}}(r,a,h)}r.mergedAttrs=K(r.mergedAttrs,r.attrs)}function tC(n,s,r,a,h,f){for(let _=0;_<a.length;_++)gc(Ya(r,s),n,a[_].type);!function RT(n,s,r){n.flags|=1,n.directiveStart=s,n.directiveEnd=s+r,n.providerIndexes=s}(r,n.data.length,a.length);for(let _=0;_<a.length;_++){const pe=a[_];pe.providersResolver&&pe.providersResolver(pe)}let C=!1,S=!1,P=jc(n,s,a.length,null);for(let _=0;_<a.length;_++){const pe=a[_];r.mergedAttrs=K(r.mergedAttrs,pe.hostAttrs),FT(n,r,s,P,pe),bT(P,pe,h),null!==pe.contentQueries&&(r.flags|=4),(null!==pe.hostBindings||null!==pe.hostAttrs||0!==pe.hostVars)&&(r.flags|=64);const Ie=pe.type.prototype;!C&&(Ie.ngOnChanges||Ie.ngOnInit||Ie.ngDoCheck)&&((n.preOrderHooks??=[]).push(r.index),C=!0),!S&&(Ie.ngOnChanges||Ie.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(r.index),S=!0),P++}!function vT(n,s,r){const h=s.directiveEnd,f=n.data,C=s.attrs,S=[];let P=null,_=null;for(let pe=s.directiveStart;pe<h;pe++){const Ie=f[pe],Be=r?r.get(Ie):null,Qe=Be?Be.outputs:null;P=_0(0,Ie.inputs,pe,P,Be?Be.inputs:null),_=_0(1,Ie.outputs,pe,_,Qe);const at=null===P||null===C||pn(s)?null:wT(P,pe,C);S.push(at)}null!==P&&(P.hasOwnProperty("class")&&(s.flags|=8),P.hasOwnProperty("style")&&(s.flags|=16)),s.initialInputs=S,s.inputs=P,s.outputs=_}(n,r,f)}function nC(n,s,r){const a=r.directiveStart,h=r.directiveEnd,f=r.index,C=function Vf(){return on.lFrame.currentDirectiveIndex}();try{nr(f);for(let S=a;S<h;S++){const P=n.data[S],_=s[S];nc(S),(null!==P.hostBindings||0!==P.hostVars||null!==P.hostAttrs)&&xT(P,_)}}finally{nr(-1),nc(C)}}function xT(n,s){null!==n.hostBindings&&n.hostBindings(1,s)}function Qm(n,s,r){s.componentOffset=r,(n.components??=[]).push(s.index)}function bT(n,s,r){if(r){if(s.exportAs)for(let a=0;a<s.exportAs.length;a++)r[s.exportAs[a]]=n;fs(s)&&(r[""]=n)}}function FT(n,s,r,a,h){n.data[a]=h;const f=h.factory||(h.factory=Xs(h.type)),C=new Fo(f,fs(h),ad);n.blueprint[a]=C,r[a]=C,function IT(n,s,r,a,h){const f=h.hostBindings;if(f){let C=n.hostBindingOpCodes;null===C&&(C=n.hostBindingOpCodes=[]);const S=~s.index;(function AT(n){let s=n.length;for(;s>0;){const r=n[--s];if("number"==typeof r&&r<0)return r}return 0})(C)!=S&&C.push(S),C.push(r,a,f)}}(n,s,a,jc(n,r,h.hostVars,Tn),h)}function sr(n,s,r,a,h,f){const C=ti(n,s);!function Zm(n,s,r,a,h,f,C){if(null==f)n.removeAttribute(s,h,r);else{const S=null==C?_t(f):C(f,a||"",h);n.setAttribute(s,h,S,r)}}(s[Zt],C,f,n.value,r,a,h)}function LT(n,s,r,a,h,f){const C=f[s];if(null!==C)for(let S=0;S<C.length;)Q0(a,r,C[S++],C[S++],C[S++],C[S++])}function wT(n,s,r){let a=null,h=0;for(;h<r.length;){const f=r[h];if(0!==f)if(5!==f){if("number"==typeof f)break;if(n.hasOwnProperty(f)){null===a&&(a=[]);const C=n[f];for(let S=0;S<C.length;S+=3)if(C[S]===s){a.push(f,C[S+1],C[S+2],r[h+1]);break}}h+=2}else h+=2;else h+=4}return a}function iC(n,s,r,a){return[n,!0,0,s,null,a,null,r,null,null]}function sC(n,s){const r=n.contentQueries;if(null!==r){const a=X(null);try{for(let h=0;h<r.length;h+=2){const C=r[h+1];if(-1!==C){const S=n.data[C];Rl(r[h]),S.contentQueries(2,s[C],C)}}}finally{X(a)}}}function Lu(n,s){return n[Gi]?n[zr][In]=s:n[Gi]=s,n[zr]=s,s}function km(n,s,r){Rl(0);const a=X(null);try{s(n,r)}finally{X(a)}}function oC(n){return n[Ji]||(n[Ji]=[])}function rC(n){return n.cleanup||(n.cleanup=[])}function wu(n,s){const r=n[Sn],a=r?r.get(ir,null):null;a&&a.handleError(s)}function qm(n,s,r,a,h){for(let f=0;f<r.length;){const C=r[f++],S=r[f++],P=r[f++];Q0(n.data[C],s[C],a,S,P,h)}}function Rr(n,s,r){const a=Po(s,n);!function R0(n,s,r){n.setValue(s,r)}(n[Zt],a,r)}function VT(n,s){const r=On(s,n),a=r[ut];!function BT(n,s){for(let r=s.length;r<n.blueprint.length;r++)s.push(n.blueprint[r])}(a,r);const h=r[Vn];null!==h&&null===r[vn]&&(r[vn]=Ye(h,r[Sn])),_m(a,r,r[Kn])}function _m(n,s,r){Fl(s);try{const a=n.viewQuery;null!==a&&km(1,a,r);const h=n.template;null!==h&&Z0(n,s,h,1,r),n.firstCreatePass&&(n.firstCreatePass=!1),s[Ls]?.finishViewCreation(n),n.staticContentQueries&&sC(n,s),n.staticViewQueries&&km(2,n.viewQuery,r);const f=n.components;null!==f&&function HT(n,s){for(let r=0;r<s.length;r++)VT(n,s[r])}(s,f)}catch(a){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),a}finally{s[Rt]&=-5,Ua()}}function Wc(n,s,r,a){const h=X(null);try{const f=s.tView,P=Nu(n,f,r,4096&n[Rt]?4096:16,null,s,null,null,a?.injector??null,a?.embeddedViewInjector??null,a?.dehydratedView??null);P[fi]=n[s.index];const pe=n[Ls];return null!==pe&&(P[Ls]=pe.createEmbeddedView(f)),_m(f,P,r),P}finally{X(h)}}function aC(n,s){const r=ii+s;if(r<n.length)return n[r]}function cd(n,s){return!s||null===s.firstChild||Ac(n)}function $c(n,s,r,a=!0){const h=s[ut];if(function nT(n,s,r,a){const h=ii+a,f=r.length;a>0&&(r[h-1][In]=s),a<f-ii?(s[In]=r[h],gr(r,ii+a,s)):(r.push(s),s[In]=null),s[mt]=r;const C=s[fi];null!==C&&r!==C&&function iT(n,s){const r=n[ao];s[kn]!==s[mt][mt][kn]&&(n[Rt]|=Yr.HasTransplantedViews),null===r?n[ao]=[s]:r.push(s)}(C,s);const S=s[Ls];null!==S&&S.insertView(n),ba(s),s[Rt]|=128}(h,s,n,r),a){const C=jm(r,n),S=s[Zt],P=bu(S,n[ns]);null!==P&&function eT(n,s,r,a,h,f){a[Vn]=h,a[Ut]=s,Fu(n,a,r,1,h,f)}(h,n[Ut],S,s,P,C)}const f=s[vn];null!==f&&null!==f.firstChild&&(f.firstChild=null)}function eg(n,s){const r=Hc(n,s);return void 0!==r&&Ou(r[ut],r),r}function zc(n,s,r,a,h=!1){for(;null!==r;){const f=s[r.index];null!==f&&a.push(wt(f)),Oi(f)&&dC(f,a);const C=r.type;if(8&C)zc(n,s,r.child,a);else if(32&C){const S=wm(r,s);let P;for(;P=S();)a.push(P)}else if(16&C){const S=j0(s,r);if(Array.isArray(S))a.push(...S);else{const P=vr(s[kn]);zc(P[ut],P,S,a,!0)}}r=h?r.projectionNext:r.next}return a}function dC(n,s){for(let r=ii;r<n.length;r++){const a=n[r],h=a[ut].firstChild;null!==h&&zc(a[ut],a,h,s)}n[ns]!==n[Vn]&&s.push(n[ns])}let cC=[];const WT={...q,consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Zr(n.lView)},consumerOnSignalRead(){this.lView[Mo]=this}},hC=100;function Vu(n,s=!0,r=0){const a=n[xi],h=a.rendererFactory;h.begin?.();try{!function $T(n,s){tg(n,s);let r=0;for(;Oa(n);){if(r===hC)throw new xe(103,!1);r++,tg(n,1)}}(n,r)}catch(C){throw s&&wu(n,C),C}finally{h.end?.(),a.inlineEffectRunner?.flush()}}function zT(n,s,r,a){const h=s[Rt];if(!(256&~h))return;s[xi].inlineEffectRunner?.flush(),Fl(s);let C=null,S=null;(function KT(n){return 2!==n.type})(n)&&(S=function UT(n){return n[Mo]??function GT(n){const s=cC.pop()??Object.create(WT);return s.lView=n,s}(n)}(s),C=x(S));try{Qd(s),function uo(n){return on.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==r&&Z0(n,s,r,2,a);const P=!(3&~h);if(P){const Ie=n.preOrderCheckHooks;null!==Ie&&Wa(s,Ie,null)}else{const Ie=n.preOrderHooks;null!==Ie&&$a(s,Ie,0,null),tl(s,0)}if(function YT(n){for(let s=du(n);null!==s;s=cu(s)){if(!(s[Rt]&Yr.HasTransplantedViews))continue;const r=s[ao];for(let a=0;a<r.length;a++){Pa(r[a])}}}(s),uC(s,0),null!==n.contentQueries&&sC(n,s),P){const Ie=n.contentCheckHooks;null!==Ie&&Wa(s,Ie)}else{const Ie=n.contentHooks;null!==Ie&&$a(s,Ie,1),tl(s,1)}!function uT(n,s){const r=n.hostBindingOpCodes;if(null!==r)try{for(let a=0;a<r.length;a++){const h=r[a];if(h<0)nr(~h);else{const f=h,C=r[++a],S=r[++a];wf(C,f),S(2,s[f])}}}finally{nr(-1)}}(n,s);const _=n.components;null!==_&&mC(s,_,0);const pe=n.viewQuery;if(null!==pe&&km(2,pe,a),P){const Ie=n.viewCheckHooks;null!==Ie&&Wa(s,Ie)}else{const Ie=n.viewHooks;null!==Ie&&$a(s,Ie,2),tl(s,2)}if(!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s[Kr]){for(const Ie of s[Kr])Ie();s[Kr]=null}s[Rt]&=-73}catch(P){throw Zr(s),P}finally{null!==S&&(p(S,C),function jT(n){n.lView[Mo]!==n&&(n.lView=null,cC.push(n))}(S)),Ua()}}function uC(n,s){for(let r=du(n);null!==r;r=cu(r))for(let a=ii;a<r.length;a++)fC(r[a],s)}function XT(n,s,r){fC(On(s,n),r)}function fC(n,s){Qr(n)&&tg(n,s)}function tg(n,s){const a=n[ut],h=n[Rt],f=n[Mo];let C=!!(0===s&&16&h);if(C||=!!(64&h&&0===s),C||=!!(1024&h),C||=!(!f?.dirty||!W(f)),f&&(f.dirty=!1),n[Rt]&=-9217,C)zT(a,n,a.template,n[Kn]);else if(8192&h){uC(n,1);const S=a.components;null!==S&&mC(n,S,1)}}function mC(n,s,r){for(let a=0;a<s.length;a++)XT(n,s[a],r)}function Kc(n){for(n[xi].changeDetectionScheduler?.notify();n;){n[Rt]|=64;const s=vr(n);if(ya(n)&&!s)return n;n=s}return null}class Yc{get rootNodes(){const s=this._lView,r=s[ut];return zc(r,s,r.firstChild,[])}constructor(s,r,a=!0){this._lView=s,this._cdRefInjectingView=r,this.notifyErrorHandler=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Kn]}set context(s){this._lView[Kn]=s}get destroyed(){return!(256&~this._lView[Rt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[mt];if(Oi(s)){const r=s[8],a=r?r.indexOf(this):-1;a>-1&&(Hc(s,a),so(r,a))}this._attachedToViewContainer=!1}Ou(this._lView[ut],this._lView)}onDestroy(s){Ra(this._lView,s)}markForCheck(){Kc(this._cdRefInjectingView||this._lView)}detach(){this._lView[Rt]&=-129}reattach(){ba(this._lView),this._lView[Rt]|=128}detectChanges(){this._lView[Rt]|=1024,Vu(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new xe(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,F0(this._lView[ut],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new xe(902,!1);this._appRef=s,ba(this._lView)}}let Xc=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=ZT}return n})();const JT=Xc,QT=class extends JT{constructor(s,r,a){super(),this._declarationLView=s,this._declarationTContainer=r,this.elementRef=a}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(s,r){return this.createEmbeddedViewImpl(s,r)}createEmbeddedViewImpl(s,r,a){const h=Wc(this._declarationLView,this._declarationTContainer,s,{embeddedViewInjector:r,dehydratedView:a});return new Yc(h)}};function ZT(){return Bu(Wn(),lt())}function Bu(n,s){return 4&n.type?new QT(s,n,il(n,s)):null}let vC=()=>null;function hd(n,s){return vC(n,s)}class Wu{}class vI{}class EC{}class SI{resolveComponentFactory(s){throw function EI(n){const s=Error(`No component factory found for ${Wt(n)}.`);return s.ngComponent=n,s}(s)}}let qc=(()=>{class n{static#e=this.NULL=new SI}return n})();class TC{}let TI=(()=>{class n{constructor(){this.destroyNode=null}static#e=this.__NG_ELEMENT_ID__=()=>function II(){const n=lt(),r=On(Wn().index,n);return(Gn(r)?r:n)[Zt]}()}return n})(),AI=(()=>{class n{static#e=this.\u0275prov=Rn({token:n,providedIn:"root",factory:()=>null})}return n})();const lg={},IC=new Set;function or(n){IC.has(n)||(IC.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function AC(...n){}class Ni{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new mo(!1),this.onMicrotaskEmpty=new mo(!1),this.onStable=new mo(!1),this.onError=new mo(!1),typeof Zone>"u")throw new xe(908,!1);Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!a&&r,h.shouldCoalesceRunChangeDetection=a,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function MI(){const n="function"==typeof Mt.requestAnimationFrame;let s=Mt[n?"requestAnimationFrame":"setTimeout"],r=Mt[n?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&s&&r){const a=s[Zone.__symbol__("OriginalDelegate")];a&&(s=a);const h=r[Zone.__symbol__("OriginalDelegate")];h&&(r=h)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function OI(n){const s=()=>{!function PI(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Mt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,dg(n),n.isCheckStableRunning=!0,ag(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),dg(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,a,h,f,C,S)=>{if(function bI(n){return!(!Array.isArray(n)||1!==n.length)&&!0===n[0].data?.__ignore_ng_zone__}(S))return r.invokeTask(h,f,C,S);try{return MC(n),r.invokeTask(h,f,C,S)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||n.shouldCoalesceRunChangeDetection)&&s(),xC(n)}},onInvoke:(r,a,h,f,C,S,P)=>{try{return MC(n),r.invoke(h,f,C,S,P)}finally{n.shouldCoalesceRunChangeDetection&&s(),xC(n)}},onHasTask:(r,a,h,f)=>{r.hasTask(h,f),a===h&&("microTask"==f.change?(n._hasPendingMicrotasks=f.microTask,dg(n),ag(n)):"macroTask"==f.change&&(n.hasPendingMacrotasks=f.macroTask))},onHandleError:(r,a,h,f)=>(r.handleError(h,f),n.runOutsideAngular(()=>n.onError.emit(f)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ni.isInAngularZone())throw new xe(909,!1)}static assertNotInAngularZone(){if(Ni.isInAngularZone())throw new xe(909,!1)}run(s,r,a){return this._inner.run(s,r,a)}runTask(s,r,a,h){const f=this._inner,C=f.scheduleEventTask("NgZoneEvent: "+h,s,xI,AC,AC);try{return f.runTask(C,r,a)}finally{f.cancelTask(C)}}runGuarded(s,r,a){return this._inner.runGuarded(s,r,a)}runOutsideAngular(s){return this._outer.run(s)}}const xI={};function ag(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function dg(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function MC(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function xC(n){n._nesting--,ag(n)}class PC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new mo,this.onMicrotaskEmpty=new mo,this.onStable=new mo,this.onError=new mo}run(s,r,a){return s.apply(r,a)}runGuarded(s,r,a){return s.apply(r,a)}runOutsideAngular(s){return s()}runTask(s,r,a,h){return s.apply(r,a)}}var Ql=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(Ql||{});const OC={destroy(){}};function bC(n,s){!s&&lo();const r=s?.injector??en(Zi);if(!No(r))return OC;or("NgAfterRender");const a=r.get(_c),h=a.handler??=new NC,f=s?.phase??Ql.MixedReadWrite,C=()=>{h.unregister(P),S()},S=r.get(Ar).onDestroy(C),P=qo(r,()=>new FC(f,n));return h.register(P),{destroy:C}}function RC(n,s){!s&&lo();const r=s?.injector??en(Zi);if(!No(r))return OC;or("NgAfterNextRender");const a=r.get(_c),h=a.handler??=new NC,f=s?.phase??Ql.MixedReadWrite,C=()=>{h.unregister(P),S()},S=r.get(Ar).onDestroy(C),P=qo(r,()=>new FC(f,()=>{C(),n()}));return h.register(P),{destroy:C}}class FC{constructor(s,r){this.phase=s,this.callbackFn=r,this.zone=en(Ni),this.errorHandler=en(ir,{optional:!0}),en(Wu,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(s){this.errorHandler?.handleError(s)}}}class NC{constructor(){this.executingCallbacks=!1,this.buckets={[Ql.EarlyRead]:new Set,[Ql.Write]:new Set,[Ql.MixedReadWrite]:new Set,[Ql.Read]:new Set},this.deferredCallbacks=new Set}register(s){(this.executingCallbacks?this.deferredCallbacks:this.buckets[s.phase]).add(s)}unregister(s){this.buckets[s.phase].delete(s),this.deferredCallbacks.delete(s)}execute(){this.executingCallbacks=!0;for(const s of Object.values(this.buckets))for(const r of s)r.invoke();this.executingCallbacks=!1;for(const s of this.deferredCallbacks)this.buckets[s.phase].add(s);this.deferredCallbacks.clear()}destroy(){for(const s of Object.values(this.buckets))s.clear();this.deferredCallbacks.clear()}}let _c=(()=>{class n{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){const r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const a of r)a()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static#e=this.\u0275prov=Rn({token:n,providedIn:"root",factory:()=>new n})}return n})();function ll(n){return!!Ui(n)}function zu(n,s,r){let a=r?n.styles:null,h=r?n.classes:null,f=0;if(null!==s)for(let C=0;C<s.length;C++){const S=s[C];"number"==typeof S?f=S:1==f?h=yn(h,S):2==f&&(a=yn(a,S+": "+s[++C]+";"))}r?n.styles=a:n.stylesWithoutHost=a,r?n.classes=h:n.classesWithoutHost=h}class VC extends qc{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const r=Dn(s);return new nh(r,this.ngModule)}}function BC(n){const s=[];for(const r in n){if(!n.hasOwnProperty(r))continue;const a=n[r];void 0!==a&&s.push({propName:Array.isArray(a)?a[0]:a,templateName:r})}return s}class Ku{constructor(s,r){this.injector=s,this.parentInjector=r}get(s,r,a){a=Ys(a);const h=this.injector.get(s,lg,a);return h!==lg||r===lg?h:this.parentInjector.get(s,r,a)}}class nh extends EC{get inputs(){const s=this.componentDef,r=s.inputTransforms,a=BC(s.inputs);if(null!==r)for(const h of a)r.hasOwnProperty(h.propName)&&(h.transform=r[h.propName]);return a}get outputs(){return BC(this.componentDef.outputs)}constructor(s,r){super(),this.componentDef=s,this.ngModule=r,this.componentType=s.type,this.selector=function Sh(n){return n.map(Cl).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!r}create(s,r,a,h){const f=X(null);try{let C=(h=h||this.ngModule)instanceof yi?h:h?.injector;C&&null!==this.componentDef.getStandaloneInjector&&(C=this.componentDef.getStandaloneInjector(C)||C);const S=C?new Ku(s,C):s,P=S.get(TC,null);if(null===P)throw new xe(407,!1);const _=S.get(AI,null),Be={rendererFactory:P,sanitizer:_,inlineEffectRunner:null,afterRenderEventManager:S.get(_c,null),changeDetectionScheduler:S.get(Wu,null)},$e=P.createRenderer(null,this.componentDef),Qe=this.componentDef.selectors[0][0]||"div",at=a?function mT(n,s,r,a){const f=a.get(sd,!1)||r===Js.ShadowDom,C=n.selectRootElement(s,f);return function gT(n){q0(n)}(C),C}($e,a,this.componentDef.encapsulation,S):Pu($e,Qe,function LI(n){const s=n.toLowerCase();return"svg"===s?Ma:"math"===s?"math":null}(Qe));let pt=512;this.componentDef.signals?pt|=4096:this.componentDef.onPush||(pt|=16);let St=null;null!==at&&(St=Ye(at,S,!0));const ft=Xm(0,null,null,1,0,null,null,null,null,null,null),sn=Nu(null,ft,null,pt,null,null,Be,$e,S,null,St);let Hn,_n;Fl(sn);try{const Ki=this.componentDef;let js,Bd=null;Ki.findHostDirectiveDefs?(js=[],Bd=new Map,Ki.findHostDirectiveDefs(Ki,js,Bd),js.push(Ki)):js=[Ki];const gS=function VI(n,s){const r=n[ut],a=hn;return n[a]=s,dd(r,a,2,"#host",null)}(sn,at),UO=function BI(n,s,r,a,h,f,C){const S=h[ut];!function HI(n,s,r,a){for(const h of n)s.mergedAttrs=K(s.mergedAttrs,h.hostAttrs);null!==s.mergedAttrs&&(zu(s,s.mergedAttrs,!0),null!==r&&K0(a,r,s))}(a,n,s,C);let P=null;null!==s&&(P=Ye(s,h[Sn]));const _=f.rendererFactory.createRenderer(s,r);let pe=16;r.signals?pe=4096:r.onPush&&(pe=64);const Ie=Nu(h,k0(r),null,pe,h[n.index],n,f,_,null,null,P);return S.firstCreatePass&&Qm(S,n,a.length-1),Lu(h,Ie),h[n.index]=Ie}(gS,at,Ki,js,sn,Be,$e);_n=bi(ft,hn),at&&function GI(n,s,r,a){if(a)Cr(n,r,["ng-version","17.3.12"]);else{const{attrs:h,classes:f}=function Th(n){const s=[],r=[];let a=1,h=2;for(;a<n.length;){let f=n[a];if("string"==typeof f)2===h?""!==f&&s.push(f,n[++a]):8===h&&r.push(f);else{if(!Mi(h))break;h=f}a++}return{attrs:s,classes:r}}(s.selectors[0]);h&&Cr(n,r,h),f&&f.length>0&&z0(n,r,f.join(" "))}}($e,Ki,at,a),void 0!==r&&function jI(n,s,r){const a=n.projection=[];for(let h=0;h<s.length;h++){const f=r[h];a.push(null!=f?Array.from(f):null)}}(_n,this.ngContentSelectors,r),Hn=function UI(n,s,r,a,h,f){const C=Wn(),S=h[ut],P=ti(C,h);tC(S,h,C,r,null,a);for(let pe=0;pe<r.length;pe++)ki(Sr(h,S,C.directiveStart+pe,C),h);nC(S,h,C),P&&ki(P,h);const _=Sr(h,S,C.directiveStart+C.componentOffset,C);if(n[Kn]=h[Kn]=_,null!==f)for(const pe of f)pe(_,s);return zm(S,C,h),_}(UO,Ki,js,Bd,sn,[WI]),_m(ft,sn,null)}finally{Ua()}return new wI(this.componentType,Hn,il(_n,sn),sn,_n)}finally{X(f)}}}class wI extends vI{constructor(s,r,a,h,f){super(),this.location=a,this._rootLView=h,this._tNode=f,this.previousInputValues=null,this.instance=r,this.hostView=this.changeDetectorRef=new Yc(h,void 0,!1),this.componentType=s}setInput(s,r){const a=this._tNode.inputs;let h;if(null!==a&&(h=a[s])){if(this.previousInputValues??=new Map,this.previousInputValues.has(s)&&Object.is(this.previousInputValues.get(s),r))return;const f=this._rootLView;qm(f[ut],f,h,s,r),this.previousInputValues.set(s,r),Kc(On(this._tNode.index,f))}}get injector(){return new vi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function WI(){const n=Wn();ja(lt()[ut],n)}let Yu=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=$I}return n})();function $I(){return GC(Wn(),lt())}const zI=Yu,HC=class extends zI{constructor(s,r,a){super(),this._lContainer=s,this._hostTNode=r,this._hostLView=a}get element(){return il(this._hostTNode,this._hostLView)}get injector(){return new vi(this._hostTNode,this._hostLView)}get parentInjector(){const s=Er(this._hostTNode,this._hostLView);if(uc(s)){const r=Ll(s,this._hostLView),a=Nl(s);return new vi(r[ut].data[a+8],r)}return new vi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const r=UC(this._lContainer);return null!==r&&r[s]||null}get length(){return this._lContainer.length-ii}createEmbeddedView(s,r,a){let h,f;"number"==typeof a?h=a:null!=a&&(h=a.index,f=a.injector);const C=hd(this._lContainer,s.ssrId),S=s.createEmbeddedViewImpl(r||{},f,C);return this.insertImpl(S,h,cd(this._hostTNode,C)),S}createComponent(s,r,a,h,f){const C=s&&!function ht(n){return"function"==typeof n}(s);let S;if(C)S=r;else{const Qe=r||{};S=Qe.index,a=Qe.injector,h=Qe.projectableNodes,f=Qe.environmentInjector||Qe.ngModuleRef}const P=C?s:new nh(Dn(s)),_=a||this.parentInjector;if(!f&&null==P.ngModule){const at=(C?_:this.parentInjector).get(yi,null);at&&(f=at)}const pe=Dn(P.componentType??{}),Ie=hd(this._lContainer,pe?.id??null),$e=P.create(_,h,Ie?.firstChild??null,f);return this.insertImpl($e.hostView,S,cd(this._hostTNode,Ie)),$e}insert(s,r){return this.insertImpl(s,r,!0)}insertImpl(s,r,a){const h=s._lView;if(function Jp(n){return Oi(n[mt])}(h)){const S=this.indexOf(s);if(-1!==S)this.detach(S);else{const P=h[mt],_=new HC(P,P[Ut],P[mt]);_.detach(_.indexOf(s))}}const f=this._adjustIndex(r),C=this._lContainer;return $c(C,h,f,a),s.attachToViewContainerRef(),gr(fg(C),f,s),s}move(s,r){return this.insert(s,r)}indexOf(s){const r=UC(this._lContainer);return null!==r?r.indexOf(s):-1}remove(s){const r=this._adjustIndex(s,-1),a=Hc(this._lContainer,r);a&&(so(fg(this._lContainer),r),Ou(a[ut],a))}detach(s){const r=this._adjustIndex(s,-1),a=Hc(this._lContainer,r);return a&&null!=so(fg(this._lContainer),r)?new Yc(a):null}_adjustIndex(s,r=0){return s??this.length+r}};function UC(n){return n[8]}function fg(n){return n[8]||(n[8]=[])}function GC(n,s){let r;const a=s[n.index];return Oi(a)?r=a:(r=iC(a,s,null,n),s[n.index]=r,Lu(s,r)),jC(r,s,n,a),new HC(r,n,s)}let jC=function $C(n,s,r,a){if(n[ns])return;let h;h=8&r.type?wt(a):function KI(n,s){const r=n[Zt],a=r.createComment(""),h=ti(s,n);return Jl(r,bu(r,h),a,function lT(n,s){return n.nextSibling(s)}(r,h),!1),a}(s,r),n[ns]=h},mg=()=>!1;class gg{constructor(s){this.queryList=s,this.matches=null}clone(){return new gg(this.queryList)}setDirty(){this.queryList.setDirty()}}class pg{constructor(s=[]){this.queries=s}createEmbeddedView(s){const r=s.queries;if(null!==r){const a=null!==s.contentQueries?s.contentQueries[0]:r.length,h=[];for(let f=0;f<a;f++){const C=r.getByIndex(f);h.push(this.queries[C.indexInDeclarationView].clone())}return new pg(h)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}finishViewCreation(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let r=0;r<this.queries.length;r++)null!==Eg(s,r).matches&&this.queries[r].setDirty()}}class zC{constructor(s,r,a=null){this.flags=r,this.read=a,this.predicate="string"==typeof s?function _I(n){return n.split(",").map(s=>s.trim())}(s):s}}class Cg{constructor(s=[]){this.queries=s}elementStart(s,r){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(s,r)}elementEnd(s){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(s)}embeddedTView(s){let r=null;for(let a=0;a<this.length;a++){const h=null!==r?r.length:0,f=this.getByIndex(a).embeddedTView(s,h);f&&(f.indexInDeclarationView=a,null!==r?r.push(f):r=[f])}return null!==r?new Cg(r):null}template(s,r){for(let a=0;a<this.queries.length;a++)this.queries[a].template(s,r)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class yg{constructor(s,r=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(s,r){this.isApplyingToNode(r)&&this.matchTNode(s,r)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,r){this.elementStart(s,r)}embeddedTView(s,r){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,r),new yg(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1&~this.metadata.flags){const r=this._declarationNodeIndex;let a=s.parent;for(;null!==a&&8&a.type&&a.index!==r;)a=a.parent;return r===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(s,r){const a=this.metadata.predicate;if(Array.isArray(a))for(let h=0;h<a.length;h++){const f=a[h];this.matchTNodeWithReadOption(s,r,QI(r,f)),this.matchTNodeWithReadOption(s,r,Ja(r,s,f,!1,!1))}else a===Xc?4&r.type&&this.matchTNodeWithReadOption(s,r,-1):this.matchTNodeWithReadOption(s,r,Ja(r,s,a,!1,!1))}matchTNodeWithReadOption(s,r,a){if(null!==a){const h=this.metadata.read;if(null!==h)if(h===sl||h===Yu||h===Xc&&4&r.type)this.addMatch(r.index,-2);else{const f=Ja(r,s,h,!1,!1);null!==f&&this.addMatch(r.index,f)}else this.addMatch(r.index,a)}}addMatch(s,r){null===this.matches?this.matches=[s,r]:this.matches.push(s,r)}}function QI(n,s){const r=n.localNames;if(null!==r)for(let a=0;a<r.length;a+=2)if(r[a]===s)return r[a+1];return null}function kI(n,s,r,a){return-1===r?function ZI(n,s){return 11&n.type?il(n,s):4&n.type?Bu(n,s):null}(s,n):-2===r?function qI(n,s,r){return r===sl?il(s,n):r===Xc?Bu(s,n):r===Yu?GC(s,n):void 0}(n,s,a):Sr(n,n[ut],r,s)}function KC(n,s,r,a){const h=s[Ls].queries[a];if(null===h.matches){const f=n.data,C=r.matches,S=[];for(let P=0;null!==C&&P<C.length;P+=2){const _=C[P];S.push(_<0?null:kI(s,f[_],C[P+1],r.metadata.read))}h.matches=S}return h.matches}function Dg(n,s,r,a){const h=n.queries.getByIndex(r),f=h.matches;if(null!==f){const C=KC(n,s,h,r);for(let S=0;S<f.length;S+=2){const P=f[S];if(P>0)a.push(C[S/2]);else{const _=f[S+1],pe=s[-P];for(let Ie=ii;Ie<pe.length;Ie++){const Be=pe[Ie];Be[fi]===Be[mt]&&Dg(Be[ut],Be,_,a)}if(null!==pe[ao]){const Ie=pe[ao];for(let Be=0;Be<Ie.length;Be++){const $e=Ie[Be];Dg($e[ut],$e,_,a)}}}}}return a}function vg(n,s){return n[Ls].queries[s].queryList}function YC(n,s,r){const a=new nd(!(4&~r));return function yT(n,s,r,a){const h=oC(s);h.push(r),n.firstCreatePass&&rC(n).push(a,h.length-1)}(n,s,a,a.destroy),(s[Ls]??=new pg).queries.push(new gg(a))-1}function JC(n,s,r,a){const h=bn();if(h.firstCreatePass){const f=Wn();QC(h,new zC(s,r,a),f.index),function eA(n,s){const r=n.contentQueries||(n.contentQueries=[]);s!==(r.length?r[r.length-1]:-1)&&r.push(n.queries.length-1,s)}(h,n),!(2&~r)&&(h.staticContentQueries=!0)}return YC(h,lt(),r)}function QC(n,s,r){null===n.queries&&(n.queries=new Cg),n.queries.track(new yg(s,r))}function Eg(n,s){return n.queries.getByIndex(s)}function ZC(n,s){const r=n[ut],a=Eg(r,s);return a.crossesNgTemplate?Dg(r,n,s,[]):KC(r,n,a,s)}function Sg(n){return"function"==typeof n&&void 0!==n[oe]}function kC(n,s){or("NgSignals");const r=function N(n){const s=Object.create(Ee);s.value=n;const r=()=>(ye(s),s.value);return r[oe]=s,r}(n),a=r[oe];return s?.equal&&(a.equal=s.equal),r.set=h=>fe(a,h),r.update=h=>function U(n,s){me()||he(),fe(n,s(n.value))}(a,h),r.asReadonly=qC.bind(r),r}function qC(){const n=this[oe];if(void 0===n.readonlyFn){const s=()=>this();s[oe]=n,n.readonlyFn=s}return n.readonlyFn}function _C(n){return Sg(n)&&"function"==typeof n.set}function Tg(n,s){let r;const a=v(()=>{r._dirtyCounter();const h=function tA(n,s){const r=n._lView,a=n._queryIndex;if(void 0===r||void 0===a||4&r[Rt])return s?void 0:xn;const h=vg(r,a),f=ZC(r,a);return h.reset(f,iu),s?h.first:h._changesDetected||void 0===n._flatValue?n._flatValue=h.toArray():n._flatValue}(r,n);if(s&&void 0===h)throw new xe(-951,!1);return h});return r=a[oe],r._dirtyCounter=kC(0),r._flatValue=void 0,a}function sy(n,s){return function ey(){return Tg(!0,!1)}()}const iA=(sy.required=function nA(n,s){return function ty(){return Tg(!0,!0)}()},sy);function Ig(n){let s=function hy(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),r=!0;const a=[n];for(;s;){let h;if(fs(n))h=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new xe(903,!1);h=s.\u0275dir}if(h){if(r){a.push(h);const C=n;C.inputs=Ju(n.inputs),C.inputTransforms=Ju(n.inputTransforms),C.declaredInputs=Ju(n.declaredInputs),C.outputs=Ju(n.outputs);const S=h.hostBindings;S&&pA(n,S);const P=h.viewQuery,_=h.contentQueries;if(P&&mA(n,P),_&&gA(n,_),uA(n,h),fn(n.outputs,h.outputs),fs(h)&&h.data.animation){const pe=n.data;pe.animation=(pe.animation||[]).concat(h.data.animation)}}const f=h.features;if(f)for(let C=0;C<f.length;C++){const S=f[C];S&&S.ngInherit&&S(n),S===Ig&&(r=!1)}}s=Object.getPrototypeOf(s)}!function fA(n){let s=0,r=null;for(let a=n.length-1;a>=0;a--){const h=n[a];h.hostVars=s+=h.hostVars,h.hostAttrs=K(h.hostAttrs,r=K(r,h.hostAttrs))}}(a)}function uA(n,s){for(const r in s.inputs){if(!s.inputs.hasOwnProperty(r)||n.inputs.hasOwnProperty(r))continue;const a=s.inputs[r];if(void 0!==a&&(n.inputs[r]=a,n.declaredInputs[r]=s.declaredInputs[r],null!==s.inputTransforms)){const h=Array.isArray(a)?a[0]:a;if(!s.inputTransforms.hasOwnProperty(h))continue;n.inputTransforms??={},n.inputTransforms[h]=s.inputTransforms[h]}}}function Ju(n){return n===Hi?{}:n===xn?[]:n}function mA(n,s){const r=n.viewQuery;n.viewQuery=r?(a,h)=>{s(a,h),r(a,h)}:s}function gA(n,s){const r=n.contentQueries;n.contentQueries=r?(a,h,f)=>{s(a,h,f),r(a,h,f)}:s}function pA(n,s){const r=n.hostBindings;n.hostBindings=r?(a,h)=>{s(a,h),r(a,h)}:s}function gy(n){const s=n.inputConfig,r={};for(const a in s)if(s.hasOwnProperty(a)){const h=s[a];Array.isArray(h)&&h[3]&&(r[a]=h[3])}n.inputTransforms=r}class Zl{}class py{}function SA(n,s){return new Ag(n,s??null,[])}class Ag extends Zl{constructor(s,r,a){super(),this._parent=r,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new VC(this);const h=Ui(s);this._bootstrapComponents=to(h.bootstrap),this._r3Injector=_a(s,r,[{provide:Zl,useValue:this},{provide:qc,useValue:this.componentFactoryResolver},...a],Wt(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(r=>r()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class Mg extends py{constructor(s){super(),this.moduleType=s}create(s){return new Ag(this.moduleType,s,[])}}class Cy extends Zl{constructor(s){super(),this.componentFactoryResolver=new VC(this),this.instance=null;const r=new Zo([...s.providers,{provide:Zl,useValue:this},{provide:qc,useValue:this.componentFactoryResolver}],s.parent||Gt(),s.debugName,new Set(["environment"]));this.injector=r,s.runEnvironmentInitializers&&r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function xg(n,s,r=null){return new Cy({providers:n,parent:s,debugName:r,runEnvironmentInitializers:!0}).injector}let fd=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new we.t(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275prov=Rn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Zu(n){return!!Pg(n)&&(Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n)}function Pg(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function rr(n,s,r){return n[s]=r}function Si(n,s,r){return!Object.is(n[s],r)&&(n[s]=r,!0)}function kl(n,s,r,a){const h=Si(n,s,r);return Si(n,s+1,a)||h}function ku(n,s,r,a,h){const f=kl(n,s,r,a);return Si(n,s+2,h)||f}function md(n,s,r,a,h,f,C,S){const P=lt(),_=bn(),pe=n+hn,Ie=_.firstCreatePass?function OA(n,s,r,a,h,f,C,S,P){const _=s.consts,pe=dd(s,n,4,C||null,ho(_,S));Jm(s,r,pe,ho(_,P)),ja(s,pe);const Ie=pe.tView=Xm(2,pe,a,h,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,_,null);return null!==s.queries&&(s.queries.template(s,pe),Ie.queries=s.queries.embeddedTView(pe)),pe}(pe,_,P,s,r,a,h,f,C):_.data[pe];eo(Ie,!1);const Be=yy(_,P,Ie,n);el()&&Ru(_,P,Be,Ie),ki(Be,P);const $e=iC(Be,P,Be,Ie);return P[pe]=$e,Lu(P,$e),function WC(n,s,r){return mg(n,s,r)}($e,Ie,P),Dr(Ie)&&Km(_,P,Ie),null!=C&&Ym(P,Ie,S),md}let yy=function Dy(n,s,r,a){return fo(!0),s[Zt].createComment("")};function Hg(n,s,r,a){const h=lt();return Si(h,Ln(),s)&&(bn(),sr(qn(),h,n,s,r,a)),Hg}function Sd(n,s,r,a){return Si(n,Ln(),r)?s+_t(r)+a:Tn}function Td(n,s,r,a,h,f){const S=kl(n,jn(),r,h);return bo(2),S?s+_t(r)+a+_t(h)+f:Tn}function Id(n,s,r,a,h,f,C,S){const _=ku(n,jn(),r,h,C);return bo(3),_?s+_t(r)+a+_t(h)+f+_t(C)+S:Tn}function Ug(n,s,r,a,h,f){const C=lt(),S=Sd(C,s,r,a);return S!==Tn&&sr(qn(),C,n,S,h,f),Ug}function Gg(n,s,r,a,h,f,C,S){const P=lt(),_=Td(P,s,r,a,h,f);return _!==Tn&&sr(qn(),P,n,_,C,S),Gg}function sf(n,s){return n<<17|s<<2}function cl(n){return n>>17&32767}function jg(n){return 2|n}function _l(n){return(131068&n)>>2}function Wg(n,s){return-131069&n|s<<2}function $g(n){return 1|n}function Jy(n,s,r,a){const h=n[r+1],f=null===s;let C=a?cl(h):_l(h),S=!1;for(;0!==C&&(!1===S||f);){const _=n[C+1];gM(n[C],s)&&(S=!0,n[C+1]=a?$g(_):jg(_)),C=a?cl(_):_l(_)}S&&(n[r+1]=a?jg(h):$g(h))}function gM(n,s){return null===n||null==s||(Array.isArray(n)?n[1]:n)===s||!(!Array.isArray(n)||"string"!=typeof s)&&ys(n,s)>=0}const $i={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Qy(n){return n.substring($i.key,$i.keyEnd)}function pM(n){return n.substring($i.value,$i.valueEnd)}function Zy(n,s){const r=$i.textEnd;return r===s?-1:(s=$i.keyEnd=function DM(n,s,r){for(;s<r&&n.charCodeAt(s)>32;)s++;return s}(n,$i.key=s,r),bd(n,s,r))}function ky(n,s){const r=$i.textEnd;let a=$i.key=bd(n,s,r);return r===a?-1:(a=$i.keyEnd=function vM(n,s,r){let a;for(;s<r&&(45===(a=n.charCodeAt(s))||95===a||(-33&a)>=65&&(-33&a)<=90||a>=48&&a<=57);)s++;return s}(n,a,r),a=_y(n,a,r),a=$i.value=bd(n,a,r),a=$i.valueEnd=function EM(n,s,r){let a=-1,h=-1,f=-1,C=s,S=C;for(;C<r;){const P=n.charCodeAt(C++);if(59===P)return S;34===P||39===P?S=C=eD(n,P,C,r):s===C-4&&85===f&&82===h&&76===a&&40===P?S=C=eD(n,41,C,r):P>32&&(S=C),f=h,h=a,a=-33&P}return S}(n,a,r),_y(n,a,r))}function qy(n){$i.key=0,$i.keyEnd=0,$i.value=0,$i.valueEnd=0,$i.textEnd=n.length}function bd(n,s,r){for(;s<r&&n.charCodeAt(s)<=32;)s++;return s}function _y(n,s,r,a){return(s=bd(n,s,r))<r&&s++,s}function eD(n,s,r,a){let h=-1,f=r;for(;f<a;){const C=n.charCodeAt(f++);if(C==s&&92!==h)return f;h=92==C&&92===h?0:C}throw new Error}function zg(n,s,r){const a=lt();return Si(a,Ln(),s)&&Us(bn(),qn(),a,n,s,a[Zt],r,!1),zg}function Kg(n,s,r,a,h){const C=h?"class":"style";qm(n,r,s.inputs[C],C,a)}function Yg(n,s,r){return wo(n,s,r,!1),Yg}function Xg(n,s){return wo(n,s,null,!0),Xg}function Lo(n){Vo(sD,SM,n,!1)}function SM(n,s){for(let r=function yM(n){return qy(n),ky(n,bd(n,0,$i.textEnd))}(s);r>=0;r=ky(s,r))sD(n,Qy(s),pM(s))}function tD(n){Vo(PM,lr,n,!0)}function lr(n,s){for(let r=function CM(n){return qy(n),Zy(n,bd(n,0,$i.textEnd))}(s);r>=0;r=Zy(s,r))Bi(n,Qy(s),!0)}function wo(n,s,r,a){const h=lt(),f=bn(),C=bo(2);f.firstUpdatePass&&iD(f,n,C,a),s!==Tn&&Si(h,C,s)&&oD(f,f.data[ri()],h,h[Zt],n,h[C+1]=function bM(n,s){return null==n||""===n||("string"==typeof s?n+=s:"object"==typeof n&&(n=Wt(Wi(n)))),n}(s,r),a,C)}function Vo(n,s,r,a){const h=bn(),f=bo(2);h.firstUpdatePass&&iD(h,null,f,a);const C=lt();if(r!==Tn&&Si(C,f,r)){const S=h.data[ri()];if(lD(S,a)&&!nD(h,f)){let P=a?S.classesWithoutHost:S.stylesWithoutHost;null!==P&&(r=yn(P,r||"")),Kg(h,S,C,r,a)}else!function OM(n,s,r,a,h,f,C,S){h===Tn&&(h=xn);let P=0,_=0,pe=0<h.length?h[0]:null,Ie=0<f.length?f[0]:null;for(;null!==pe||null!==Ie;){const Be=P<h.length?h[P+1]:void 0,$e=_<f.length?f[_+1]:void 0;let at,Qe=null;pe===Ie?(P+=2,_+=2,Be!==$e&&(Qe=Ie,at=$e)):null===Ie||null!==pe&&pe<Ie?(P+=2,Qe=pe):(_+=2,Qe=Ie,at=$e),null!==Qe&&oD(n,s,r,a,Qe,at,C,S),pe=P<h.length?h[P]:null,Ie=_<f.length?f[_]:null}}(h,S,C,C[Zt],C[f+1],C[f+1]=function xM(n,s,r){if(null==r||""===r)return xn;const a=[],h=Wi(r);if(Array.isArray(h))for(let f=0;f<h.length;f++)n(a,h[f],!0);else if("object"==typeof h)for(const f in h)h.hasOwnProperty(f)&&n(a,f,h[f]);else"string"==typeof h&&s(a,h);return a}(n,s,r),a,f)}}function nD(n,s){return s>=n.expandoStartIndex}function iD(n,s,r,a){const h=n.data;if(null===h[r+1]){const f=h[ri()],C=nD(n,r);lD(f,a)&&null===s&&!C&&(s=!1),s=function TM(n,s,r,a){const h=function _r(n){const s=on.lFrame.currentDirectiveIndex;return-1===s?null:n[s]}(n);let f=a?s.residualClasses:s.residualStyles;if(null===h)0===(a?s.classBindings:s.styleBindings)&&(r=dh(r=Jg(null,n,s,r,a),s.attrs,a),f=null);else{const C=s.directiveStylingLast;if(-1===C||n[C]!==h)if(r=Jg(h,n,s,r,a),null===f){let P=function IM(n,s,r){const a=r?s.classBindings:s.styleBindings;if(0!==_l(a))return n[cl(a)]}(n,s,a);void 0!==P&&Array.isArray(P)&&(P=Jg(null,n,s,P[1],a),P=dh(P,s.attrs,a),function AM(n,s,r,a){n[cl(r?s.classBindings:s.styleBindings)]=a}(n,s,a,P))}else f=function MM(n,s,r){let a;const h=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<h;f++)a=dh(a,n[f].hostAttrs,r);return dh(a,s.attrs,r)}(n,s,a)}return void 0!==f&&(a?s.residualClasses=f:s.residualStyles=f),r}(h,f,s,a),function fM(n,s,r,a,h,f){let C=f?s.classBindings:s.styleBindings,S=cl(C),P=_l(C);n[a]=r;let pe,_=!1;if(Array.isArray(r)?(pe=r[1],(null===pe||ys(r,pe)>0)&&(_=!0)):pe=r,h)if(0!==P){const Be=cl(n[S+1]);n[a+1]=sf(Be,S),0!==Be&&(n[Be+1]=Wg(n[Be+1],a)),n[S+1]=function hM(n,s){return 131071&n|s<<17}(n[S+1],a)}else n[a+1]=sf(S,0),0!==S&&(n[S+1]=Wg(n[S+1],a)),S=a;else n[a+1]=sf(P,0),0===S?S=a:n[P+1]=Wg(n[P+1],a),P=a;_&&(n[a+1]=jg(n[a+1])),Jy(n,pe,a,!0),Jy(n,pe,a,!1),function mM(n,s,r,a,h){const f=h?n.residualClasses:n.residualStyles;null!=f&&"string"==typeof s&&ys(f,s)>=0&&(r[a+1]=$g(r[a+1]))}(s,pe,n,a,f),C=sf(S,P),f?s.classBindings=C:s.styleBindings=C}(h,f,s,r,C,a)}}function Jg(n,s,r,a,h){let f=null;const C=r.directiveEnd;let S=r.directiveStylingLast;for(-1===S?S=r.directiveStart:S++;S<C&&(f=s[S],a=dh(a,f.hostAttrs,h),f!==n);)S++;return null!==n&&(r.directiveStylingLast=S),a}function dh(n,s,r){const a=r?1:2;let h=-1;if(null!==s)for(let f=0;f<s.length;f++){const C=s[f];"number"==typeof C?h=C:h===a&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Bi(n,C,!!r||s[++f]))}return void 0===n?null:n}function sD(n,s,r){Bi(n,s,Wi(r))}function PM(n,s,r){const a=String(s);""!==a&&!a.includes(" ")&&Bi(n,a,r)}function oD(n,s,r,a,h,f,C,S){if(!(3&s.type))return;const P=n.data,_=P[S+1],pe=function uM(n){return!(1&~n)}(_)?rD(P,s,r,h,_l(_),C):void 0;of(pe)||(of(f)||function cM(n){return!(2&~n)}(_)&&(f=rD(P,null,r,h,S,C)),function cT(n,s,r,a,h){if(s)h?n.addClass(r,a):n.removeClass(r,a);else{let f=-1===a.indexOf("-")?void 0:xu.DashCase;null==h?n.removeStyle(r,a,f):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),f|=xu.Important),n.setStyle(r,a,h,f))}}(a,C,Po(ri(),r),h,f))}function rD(n,s,r,a,h,f){const C=null===s;let S;for(;h>0;){const P=n[h],_=Array.isArray(P),pe=_?P[1]:P,Ie=null===pe;let Be=r[h+1];Be===Tn&&(Be=Ie?xn:void 0);let $e=Ie?oo(Be,a):pe===a?Be:void 0;if(_&&!of($e)&&($e=oo(P,a)),of($e)&&(S=$e,C))return S;const Qe=n[h+1];h=C?cl(Qe):_l(Qe)}if(null!==s){let P=f?s.residualClasses:s.residualStyles;null!=P&&(S=oo(P,a))}return S}function of(n){return void 0!==n}function lD(n,s){return!!(n.flags&(s?8:16))}function aD(n,s,r){Vo(Bi,lr,Sd(lt(),n,s,r),!0)}function dD(n,s,r,a,h){Vo(Bi,lr,Td(lt(),n,s,r,a,h),!0)}function cD(n,s,r,a,h,f,C){Vo(Bi,lr,Id(lt(),n,s,r,a,h,f,C),!0)}class HM{destroy(s){}updateValue(s,r){}swap(s,r){const a=Math.min(s,r),h=Math.max(s,r),f=this.detach(h);if(h-a>1){const C=this.detach(a);this.attach(a,f),this.attach(h,C)}else this.attach(a,f)}move(s,r){this.attach(r,this.detach(s))}}function Qg(n,s,r,a,h){return n===r&&Object.is(s,a)?1:Object.is(h(n,s),h(r,a))?-1:0}function Zg(n,s,r,a){return!(void 0===s||!s.has(a)||(n.attach(r,s.get(a)),s.delete(a),0))}function hD(n,s,r,a,h){if(Zg(n,s,a,r(a,h)))n.updateValue(a,h);else{const f=n.create(a,h);n.attach(a,f)}}function uD(n,s,r,a){const h=new Set;for(let f=s;f<=r;f++)h.add(a(f,n.at(f)));return h}class fD{constructor(){this.kvMap=new Map,this._vMap=void 0}has(s){return this.kvMap.has(s)}delete(s){if(!this.has(s))return!1;const r=this.kvMap.get(s);return void 0!==this._vMap&&this._vMap.has(r)?(this.kvMap.set(s,this._vMap.get(r)),this._vMap.delete(r)):this.kvMap.delete(s),!0}get(s){return this.kvMap.get(s)}set(s,r){if(this.kvMap.has(s)){let a=this.kvMap.get(s);void 0===this._vMap&&(this._vMap=new Map);const h=this._vMap;for(;h.has(a);)a=h.get(a);h.set(a,r)}else this.kvMap.set(s,r)}forEach(s){for(let[r,a]of this.kvMap)if(s(a,r),void 0!==this._vMap){const h=this._vMap;for(;h.has(a);)a=h.get(a),s(a,r)}}}function mD(n,s,r){or("NgControlFlow");const a=lt(),h=Ln(),f=kg(a,hn+n);if(Si(a,h,s)){const S=X(null);try{if(eg(f,0),-1!==s){const P=qg(a[ut],hn+s),_=hd(f,P.tView.ssrId);$c(f,Wc(a,P,r,{dehydratedView:_}),0,cd(P,_))}}finally{X(S)}}else{const S=aC(f,0);void 0!==S&&(S[Kn]=r)}}class GM{constructor(s,r,a){this.lContainer=s,this.$implicit=r,this.$index=a}get $count(){return this.lContainer.length-ii}}function gD(n,s){return s}class WM{constructor(s,r,a){this.hasEmptyBlock=s,this.trackByFn=r,this.liveCollection=a}}function pD(n,s,r,a,h,f,C,S,P,_,pe,Ie,Be){or("NgControlFlow");const $e=void 0!==P,Qe=lt(),at=S?C.bind(Qe[kn][Kn]):C,pt=new WM($e,at);Qe[hn+n]=pt,md(n+1,s,r,a,h,f),$e&&md(n+2,P,_,pe,Ie,Be)}class $M extends HM{constructor(s,r,a){super(),this.lContainer=s,this.hostLView=r,this.templateTNode=a,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-ii}at(s){return this.getLView(s)[Kn].$implicit}attach(s,r){const a=r[vn];this.needsIndexUpdate||=s!==this.length,$c(this.lContainer,r,s,cd(this.templateTNode,a))}detach(s){return this.needsIndexUpdate||=s!==this.length-1,function zM(n,s){return Hc(n,s)}(this.lContainer,s)}create(s,r){const a=hd(this.lContainer,this.templateTNode.tView.ssrId);return Wc(this.hostLView,this.templateTNode,new GM(this.lContainer,r,s),{dehydratedView:a})}destroy(s){Ou(s[ut],s)}updateValue(s,r){this.getLView(s)[Kn].$implicit=r}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let s=0;s<this.length;s++)this.getLView(s)[Kn].$index=s}getLView(s){return function KM(n,s){return aC(n,s)}(this.lContainer,s)}}function CD(n){const s=X(null),r=ri();try{const a=lt(),h=a[ut],f=a[r];if(void 0===f.liveCollection){const S=r+1,P=kg(a,S),_=qg(h,S);f.liveCollection=new $M(P,a,_)}else f.liveCollection.reset();const C=f.liveCollection;if(function UM(n,s,r){let a,h,f=0,C=n.length-1;if(Array.isArray(s)){let S=s.length-1;for(;f<=C&&f<=S;){const P=n.at(f),_=s[f],pe=Qg(f,P,f,_,r);if(0!==pe){pe<0&&n.updateValue(f,_),f++;continue}const Ie=n.at(C),Be=s[S],$e=Qg(C,Ie,S,Be,r);if(0!==$e){$e<0&&n.updateValue(C,Be),C--,S--;continue}const Qe=r(f,P),at=r(C,Ie),pt=r(f,_);if(Object.is(pt,at)){const St=r(S,Be);Object.is(St,Qe)?(n.swap(f,C),n.updateValue(C,Be),S--,C--):n.move(C,f),n.updateValue(f,_),f++}else if(a??=new fD,h??=uD(n,f,C,r),Zg(n,a,f,pt))n.updateValue(f,_),f++,C++;else if(h.has(pt))a.set(Qe,n.detach(f)),C--;else{const St=n.create(f,s[f]);n.attach(f,St),f++,C++}}for(;f<=S;)hD(n,a,r,f,s[f]),f++}else if(null!=s){const S=s[Symbol.iterator]();let P=S.next();for(;!P.done&&f<=C;){const _=n.at(f),pe=P.value,Ie=Qg(f,_,f,pe,r);if(0!==Ie)Ie<0&&n.updateValue(f,pe),f++,P=S.next();else{a??=new fD,h??=uD(n,f,C,r);const Be=r(f,pe);if(Zg(n,a,f,Be))n.updateValue(f,pe),f++,C++,P=S.next();else if(h.has(Be)){const $e=r(f,_);a.set($e,n.detach(f)),C--}else n.attach(f,n.create(f,pe)),f++,C++,P=S.next()}}for(;!P.done;)hD(n,a,r,n.length,P.value),P=S.next()}for(;f<=C;)n.destroy(n.detach(C--));a?.forEach(S=>{n.destroy(S)})}(C,n,f.trackByFn),C.updateIndexes(),f.hasEmptyBlock){const S=Ln(),P=0===C.length;if(Si(a,S,P)){const _=r+2,pe=kg(a,_);if(P){const Ie=qg(h,_),Be=hd(pe,Ie.tView.ssrId);$c(pe,Wc(a,Ie,void 0,{dehydratedView:Be}),0,cd(Ie,Be))}else eg(pe,0)}}}finally{X(s)}}function kg(n,s){return n[s]}function qg(n,s){return bi(n,s)}function rf(n,s,r,a){const h=lt(),f=bn(),C=hn+n,S=h[Zt],P=f.firstCreatePass?function YM(n,s,r,a,h,f){const C=s.consts,P=dd(s,n,2,a,ho(C,h));return Jm(s,r,P,ho(C,f)),null!==P.attrs&&zu(P,P.attrs,!1),null!==P.mergedAttrs&&zu(P,P.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,P),P}(C,f,h,s,r,a):f.data[C],_=yD(f,h,P,S,s,n);h[C]=_;const pe=Dr(P);return eo(P,!0),K0(S,_,P),!function oh(n){return!(32&~n.flags)}(P)&&el()&&Ru(f,h,_,P),0===function Nf(){return on.lFrame.elementDepthCount}()&&ki(_,h),function Fa(){on.lFrame.elementDepthCount++}(),pe&&(Km(f,h,P),zm(f,P,h)),null!==a&&Ym(h,P),rf}function lf(){let n=Wn();Ol()?La():(n=n.parent,eo(n,!1));const s=n;(function Vh(n){return on.skipHydrationRootTNode===n})(s)&&function Hh(){on.skipHydrationRootTNode=null}(),function Lh(){on.lFrame.elementDepthCount--}();const r=bn();return r.firstCreatePass&&(ja(r,n),Il(n)&&r.queries.elementEnd(n)),null!=s.classesWithoutHost&&function $f(n){return!!(8&n.flags)}(s)&&Kg(r,s,lt(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function zf(n){return!!(16&n.flags)}(s)&&Kg(r,s,lt(),s.stylesWithoutHost,!1),lf}function _g(n,s,r,a){return rf(n,s,r,a),lf(),_g}let yD=(n,s,r,a,h,f)=>(fo(!0),Pu(a,h,function ac(){return on.lFrame.currentNamespace}()));function af(n,s,r){const a=lt(),h=bn(),f=n+hn,C=h.firstCreatePass?function QM(n,s,r,a,h){const f=s.consts,C=ho(f,a),S=dd(s,n,8,"ng-container",C);return null!==C&&zu(S,C,!0),Jm(s,r,S,ho(f,h)),null!==s.queries&&s.queries.elementStart(s,S),S}(f,h,a,s,r):h.data[f];eo(C,!0);const S=DD(h,a,C,n);return a[f]=S,el()&&Ru(h,a,S,C),ki(S,a),Dr(C)&&(Km(h,a,C),zm(h,C,a)),null!=r&&Ym(a,C),af}function df(){let n=Wn();const s=bn();return Ol()?La():(n=n.parent,eo(n,!1)),s.firstCreatePass&&(ja(s,n),Il(n)&&s.queries.elementEnd(n)),df}function ep(n,s,r){return af(n,s,r),df(),ep}let DD=(n,s,r,a)=>(fo(!0),Bm(s[Zt],""));function vD(){return lt()}function tp(n,s,r){const a=lt();return Si(a,Ln(),s)&&Us(bn(),qn(),a,n,s,a[Zt],r,!0),tp}const ea=void 0;var _M=["en",[["a","p"],["AM","PM"],ea],[["AM","PM"],ea,ea],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ea,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ea,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ea,"{1} 'at' {0}",ea],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function qM(n){const r=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return 1===r&&0===a?1:5}];let Rd={};function np(n){const s=function ex(n){return n.toLowerCase().replace(/_/g,"-")}(n);let r=TD(s);if(r)return r;const a=s.split("-")[0];if(r=TD(a),r)return r;if("en"===a)return _M;throw new xe(701,!1)}function SD(n){return np(n)[Fd.PluralCase]}function TD(n){return n in Rd||(Rd[n]=Mt.ng&&Mt.ng.common&&Mt.ng.common.locales&&Mt.ng.common.locales[n]),Rd[n]}var Fd=function(n){return n[n.LocaleId=0]="LocaleId",n[n.DayPeriodsFormat=1]="DayPeriodsFormat",n[n.DayPeriodsStandalone=2]="DayPeriodsStandalone",n[n.DaysFormat=3]="DaysFormat",n[n.DaysStandalone=4]="DaysStandalone",n[n.MonthsFormat=5]="MonthsFormat",n[n.MonthsStandalone=6]="MonthsStandalone",n[n.Eras=7]="Eras",n[n.FirstDayOfWeek=8]="FirstDayOfWeek",n[n.WeekendRange=9]="WeekendRange",n[n.DateFormat=10]="DateFormat",n[n.TimeFormat=11]="TimeFormat",n[n.DateTimeFormat=12]="DateTimeFormat",n[n.NumberSymbols=13]="NumberSymbols",n[n.NumberFormats=14]="NumberFormats",n[n.CurrencyCode=15]="CurrencyCode",n[n.CurrencySymbol=16]="CurrencySymbol",n[n.CurrencyName=17]="CurrencyName",n[n.Currencies=18]="Currencies",n[n.Directionality=19]="Directionality",n[n.PluralCase=20]="PluralCase",n[n.ExtraData=21]="ExtraData",n}(Fd||{});const Nd="en-US";let ID=Nd;function op(n,s,r,a){const h=lt(),f=bn(),C=Wn();return rp(f,h,h[Zt],C,n,s,a),op}function rp(n,s,r,a,h,f,C){const S=Dr(a),_=n.firstCreatePass&&rC(n),pe=s[Kn],Ie=oC(s);let Be=!0;if(3&a.type||C){const at=ti(a,s),pt=C?C(at):at,St=Ie.length,ft=C?Hn=>C(wt(Hn[a.index])):a.index;let sn=null;if(!C&&S&&(sn=function Zx(n,s,r,a){const h=n.cleanup;if(null!=h)for(let f=0;f<h.length-1;f+=2){const C=h[f];if(C===r&&h[f+1]===a){const S=s[Ji],P=h[f+2];return S.length>P?S[P]:null}"string"==typeof C&&(f+=2)}return null}(n,s,h,a.index)),null!==sn)(sn.__ngLastListenerFn__||sn).__ngNextListenerFn__=f,sn.__ngLastListenerFn__=f,Be=!1;else{f=qD(a,s,pe,f,!1);const Hn=r.listen(pt,h,f);Ie.push(f,Hn),_&&_.push(h,ft,St,St+1)}}else f=qD(a,s,pe,f,!1);const $e=a.outputs;let Qe;if(Be&&null!==$e&&(Qe=$e[h])){const at=Qe.length;if(at)for(let pt=0;pt<at;pt+=2){const _n=s[Qe[pt]][Qe[pt+1]].subscribe(f),Ki=Ie.length;Ie.push(f,_n),_&&_.push(h,a.index,Ki,-(Ki+1))}}}function kD(n,s,r,a){const h=X(null);try{return qs(6,s,r),!1!==r(a)}catch(f){return wu(n,f),!1}finally{qs(7,s,r),X(h)}}function qD(n,s,r,a,h){return function f(C){if(C===Function)return a;Kc(n.componentOffset>-1?On(n.index,s):s);let P=kD(s,r,a,C),_=f.__ngNextListenerFn__;for(;_;)P=kD(s,r,_,C)&&P,_=_.__ngNextListenerFn__;return h&&!1===P&&C.preventDefault(),P}}function _D(n=1){return function Bf(n){return(on.lFrame.contextLView=function Oo(n,s){for(;n>0;)s=s[Es],n--;return s}(n,on.lFrame.contextLView))[Kn]}(n)}function kx(n,s){let r=null;const a=function wn(n){const s=n.attrs;if(null!=s){const r=s.indexOf(5);if(!(1&r))return s[r+1]}return null}(n);for(let h=0;h<s.length;h++){const f=s[h];if("*"!==f){if(null===a?Hd(n,f,!0):ds(a,f))return h}else r=h}return r}function ev(n){const s=lt()[kn][Ut];if(!s.projection){const a=s.projection=function as(n,s){const r=[];for(let a=0;a<n;a++)r.push(s);return r}(n?n.length:1,null),h=a.slice();let f=s.child;for(;null!==f;){const C=n?kx(f,n):0;null!==C&&(h[C]?h[C].projectionNext=f:a[C]=f,h[C]=f),f=f.next}}}function tv(n,s=0,r){const a=lt(),h=bn(),f=dd(h,hn+n,16,null,r||null);null===f.projection&&(f.projection=s),La(),(!a[vn]||kr())&&32&~f.flags&&function aT(n,s,r){$0(s[Zt],0,s,r,Um(n,r,s),B0(r.parent||s[Ut],r,s))}(h,a,f)}function lp(n,s,r){return mf(n,"",s,"",r),lp}function mf(n,s,r,a,h){const f=lt(),C=Sd(f,s,r,a);return C!==Tn&&Us(bn(),qn(),f,n,C,f[Zt],h,!1),mf}function ap(n,s,r,a,h,f,C){const S=lt(),P=Td(S,s,r,a,h,f);return P!==Tn&&Us(bn(),qn(),S,n,P,S[Zt],C,!1),ap}function dv(n,s,r,a){JC(n,s,r,a)}function cv(n,s,r){!function XC(n,s,r){const a=bn();return a.firstCreatePass&&(QC(a,new zC(n,s,r),-1),!(2&~s)&&(a.staticViewQueries=!0)),YC(a,lt(),s)}(n,s,r)}function hv(n){const s=lt(),r=bn(),a=ic();Rl(a+1);const h=Eg(r,a);if(n.dirty&&function Pl(n){return!(4&~n[Rt])}(s)===!(2&~h.metadata.flags)){if(null===h.matches)n.reset([]);else{const f=ZC(s,a);n.reset(f,iu),n.notifyOnChanges()}return!0}return!1}function uv(){return vg(lt(),ic())}function fv(n,s,r,a,h){!function iy(n,s){const r=n[oe];r._lView=lt(),r._queryIndex=s,r._queryList=vg(r._lView,s),r._queryList.onDirty(()=>r._dirtyCounter.update(a=>a+1))}(s,JC(n,r,a,h))}function mv(n=1){Rl(ic()+n)}function gv(n){return _s(function wa(){return on.lFrame.contextLView}(),hn+n)}function dp(n,s,r,a,h){return wo(n,Sd(lt(),s,r,a),h,!1),dp}function Iv(n,s=""){const r=lt(),a=bn(),h=n+hn,f=a.firstCreatePass?dd(a,h,1,s,null):a.data[h],C=Av(a,r,f,s,n);r[h]=C,el()&&Ru(a,r,C,f),eo(f,!1)}let Av=(n,s,r,a,h)=>(fo(!0),function Vm(n,s){return n.createText(s)}(s[Zt],a));function cp(n){return gf("",n,""),cp}function gf(n,s,r){const a=lt(),h=Sd(a,n,s,r);return h!==Tn&&Rr(a,ri(),h),gf}function hp(n,s,r,a,h){const f=lt(),C=Td(f,n,s,r,a,h);return C!==Tn&&Rr(f,ri(),C),hp}function up(n,s,r,a,h,f,C){const S=lt(),P=Id(S,n,s,r,a,h,f,C);return P!==Tn&&Rr(S,ri(),P),up}function fp(n,s,r){_C(s)&&(s=s());const a=lt();return Si(a,Ln(),s)&&Us(bn(),qn(),a,n,s,a[Zt],r,!1),fp}function Fv(n,s){const r=_C(n);return r&&n.set(s),r}function mp(n,s){const r=lt(),a=bn(),h=Wn();return rp(a,r,r[Zt],h,n,s),mp}function gp(n,s,r,a,h){if(n=Ge(n),Array.isArray(n))for(let f=0;f<n.length;f++)gp(n[f],s,r,a,h);else{const f=bn(),C=lt(),S=Wn();let P=cn(n)?n:Ge(n.provide);const _=ko(n),pe=1048575&S.providerIndexes,Ie=S.directiveStart,Be=S.providerIndexes>>20;if(cn(n)||!n.multi){const $e=new Fo(_,h,ad),Qe=Cp(P,s,h?pe:pe+Be,Ie);-1===Qe?(gc(Ya(S,C),f,P),pp(f,n,s.length),s.push(P),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),r.push($e),C.push($e)):(r[Qe]=$e,C[Qe]=$e)}else{const $e=Cp(P,s,pe+Be,Ie),Qe=Cp(P,s,pe,pe+Be),pt=Qe>=0&&r[Qe];if(h&&!pt||!h&&!($e>=0&&r[$e])){gc(Ya(S,C),f,P);const St=function g1(n,s,r,a,h){const f=new Fo(n,r,ad);return f.multi=[],f.index=s,f.componentProviders=0,Nv(f,h,a&&!r),f}(h?m1:f1,r.length,h,a,_);!h&&pt&&(r[Qe].providerFactory=St),pp(f,n,s.length,0),s.push(P),S.directiveStart++,S.directiveEnd++,h&&(S.providerIndexes+=1048576),r.push(St),C.push(St)}else pp(f,n,$e>-1?$e:Qe,Nv(r[h?Qe:$e],_,!h&&a));!h&&a&&pt&&r[Qe].componentProviders++}}}function pp(n,s,r,a){const h=cn(s),f=function $r(n){return!!n.useClass}(s);if(h||f){const P=(f?Ge(s.useClass):s).prototype.ngOnDestroy;if(P){const _=n.destroyHooks||(n.destroyHooks=[]);if(!h&&s.multi){const pe=_.indexOf(r);-1===pe?_.push(r,[a,P]):_[pe+1].push(a,P)}else _.push(r,P)}}}function Nv(n,s,r){return r&&n.componentProviders++,n.multi.push(s)-1}function Cp(n,s,r,a){for(let h=r;h<a;h++)if(s[h]===n)return h;return-1}function f1(n,s,r,a){return yp(this.multi,[])}function m1(n,s,r,a){const h=this.multi;let f;if(this.providerFactory){const C=this.providerFactory.componentProviders,S=Sr(r,r[ut],this.providerFactory.index,a);f=S.slice(0,C),yp(h,f);for(let P=C;P<S.length;P++)f.push(S[P])}else f=[],yp(h,f);return f}function yp(n,s){for(let r=0;r<n.length;r++)s.push((0,n[r])());return s}function Lv(n,s=[]){return r=>{r.providersResolver=(a,h)=>function u1(n,s,r){const a=bn();if(a.firstCreatePass){const h=fs(n);gp(r,a.data,a.blueprint,h,!0),gp(s,a.data,a.blueprint,h,!1)}}(a,h?h(n):n,s)}}let p1=(()=>{class n{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){const a=us(0,r.type),h=a.length>0?xg([a],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,h)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(const r of this.cachedInjectors.values())null!==r&&r.destroy()}finally{this.cachedInjectors.clear()}}static#e=this.\u0275prov=Rn({token:n,providedIn:"environment",factory:()=>new n(si(yi))})}return n})();function wv(n){or("NgStandalone"),n.getStandaloneInjector=s=>s.get(p1).getOrCreateStandaloneInjector(n)}function Vv(n,s,r){const a=n.\u0275cmp;a.directiveDefs=yr(s,!1),a.pipeDefs=yr(r,!0)}function Hv(n,s,r){const a=ss()+n,h=lt();return h[a]===Tn?rr(h,a,r?s.call(r):s()):function sh(n,s){return n[s]}(h,a)}function Uv(n,s,r,a){return Wv(lt(),ss(),n,s,r,a)}function Gv(n,s,r,a,h){return $v(lt(),ss(),n,s,r,a,h)}function jv(n,s,r,a,h,f){return zv(lt(),ss(),n,s,r,a,h,f)}function ph(n,s){const r=n[s];return r===Tn?void 0:r}function Wv(n,s,r,a,h,f){const C=s+r;return Si(n,C,h)?rr(n,C+1,f?a.call(f,h):a(h)):ph(n,C+1)}function $v(n,s,r,a,h,f,C){const S=s+r;return kl(n,S,h,f)?rr(n,S+2,C?a.call(C,h,f):a(h,f)):ph(n,S+2)}function zv(n,s,r,a,h,f,C,S){const P=s+r;return ku(n,P,h,f,C)?rr(n,P+3,S?a.call(S,h,f,C):a(h,f,C)):ph(n,P+3)}function Kv(n,s,r,a,h,f,C,S,P){const _=s+r;return function go(n,s,r,a,h,f){const C=kl(n,s,r,a);return kl(n,s+2,h,f)||C}(n,_,h,f,C,S)?rr(n,_+4,P?a.call(P,h,f,C,S):a(h,f,C,S)):ph(n,_+4)}function Xv(n,s){const r=bn();let a;const h=n+hn;r.firstCreatePass?(a=function I1(n,s){if(s)for(let r=s.length-1;r>=0;r--){const a=s[r];if(n===a.name)return a}}(s,r.pipeRegistry),r.data[h]=a,a.onDestroy&&(r.destroyHooks??=[]).push(h,a.onDestroy)):a=r.data[h];const f=a.factory||(a.factory=Xs(a.type)),S=pi(ad);try{const P=Ka(!1),_=f();return Ka(P),function _x(n,s,r,a){r>=n.data.length&&(n.data[r]=null,n.blueprint[r]=null),s[r]=a}(r,lt(),h,_),_}finally{pi(S)}}function Jv(n,s,r){const a=n+hn,h=lt(),f=_s(h,a);return Ch(h,a)?Wv(h,ss(),s,f.transform,r,f):f.transform(r)}function Qv(n,s,r,a){const h=n+hn,f=lt(),C=_s(f,h);return Ch(f,h)?$v(f,ss(),s,C.transform,r,a,C):C.transform(r,a)}function Zv(n,s,r,a,h){const f=n+hn,C=lt(),S=_s(C,f);return Ch(C,f)?zv(C,ss(),s,S.transform,r,a,h,S):S.transform(r,a,h)}function kv(n,s,r,a,h,f){const C=n+hn,S=lt(),P=_s(S,C);return Ch(S,C)?Kv(S,ss(),s,P.transform,r,a,h,f,P):P.transform(r,a,h,f)}function Ch(n,s){return n[ut].data[s].pure}function qv(n,s){return Bu(n,s)}class mE{constructor(s){this.full=s;const r=s.split(".");this.major=r[0],this.minor=r[1],this.patch=r.slice(2).join(".")}}let gE=(()=>{class n{log(r){console.log(r)}warn(r){console.warn(r)}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275prov=Rn({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();const vE=new dn(""),EE=new dn("");let Ip,yP=(()=>{class n{constructor(r,a,h){this._ngZone=r,this.registry=a,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Ip||(function DP(n){Ip=n}(h),h.addToWindow(a)),this._watchAngularEvents(),r.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ni.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let r=this._callbacks.pop();clearTimeout(r.timeoutId),r.doneCb()}});else{let r=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(r)||(clearTimeout(a.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(r=>({source:r.source,creationLocation:r.creationLocation,data:r.data})):[]}addCallback(r,a,h){let f=-1;a&&a>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==f),r()},a)),this._callbacks.push({doneCb:r,timeoutId:f,updateCb:h})}whenStable(r,a,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(r,a,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(r){this.registry.registerApplication(r,this)}unregisterApplication(r){this.registry.unregisterApplication(r)}findProviders(r,a,h){return[]}static#e=this.\u0275fac=function(a){return new(a||n)(si(Ni),si(SE),si(EE))};static#t=this.\u0275prov=Rn({token:n,factory:n.\u0275fac})}return n})(),SE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(r,a){this._applications.set(r,a)}unregisterApplication(r){this._applications.delete(r)}unregisterAllApplications(){this._applications.clear()}getTestability(r){return this._applications.get(r)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(r,a=!0){return Ip?.findTestabilityInTree(this,r,a)??null}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275prov=Rn({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})();function Ap(n){return!!n&&"function"==typeof n.then}function TE(n){return!!n&&"function"==typeof n.subscribe}const IE=new dn("");let Mp=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,a)=>{this.resolve=r,this.reject=a}),this.appInits=en(IE,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const r=[];for(const h of this.appInits){const f=h();if(Ap(f))r.push(f);else if(TE(f)){const C=new Promise((S,P)=>{f.subscribe({complete:S,error:P})});r.push(C)}}const a=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{a()}).catch(h=>{this.reject(h)}),0===r.length&&a(),this.initialized=!0}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275prov=Rn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const xp=new dn("");function xE(n,s){return Array.isArray(s)?s.reduce(xE,n):{...n,...s}}let hl=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=en(eu),this.afterRenderEffectManager=en(_c),this.externalTestViews=new Set,this.beforeRender=new ot.B,this.afterTick=new ot.B,this.componentTypes=[],this.components=[],this.isStable=en(fd).hasPendingTasks.pipe((0,w.T)(r=>!r)),this._injector=en(yi)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,a){const h=r instanceof EC;if(!this._injector.get(Mp).done)throw!h&&hs(r),new xe(405,!1);let C;C=h?r:this._injector.get(qc).resolveComponentFactory(r),this.componentTypes.push(C.componentType);const S=function vP(n){return n.isBoundToModule}(C)?void 0:this._injector.get(Zl),_=C.create(Zi.NULL,[],a||C.selector,S),pe=_.location.nativeElement,Ie=_.injector.get(vE,null);return Ie?.registerApplication(pe),_.onDestroy(()=>{this.detachView(_.hostView),Df(this.components,_),Ie?.unregisterApplication(pe)}),this._loadComponent(_),_}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new xe(101,!1);const a=X(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(h){this.internalErrorHandler(h)}finally{this.afterTick.next(),this._runningTick=!1,X(a)}}detectChangesInAttachedViews(r){let a=0;const h=this.afterRenderEffectManager;for(;;){if(a===hC)throw new xe(103,!1);if(r){const f=0===a;this.beforeRender.next(f);for(let{_lView:C,notifyErrorHandler:S}of this._views)SP(C,f,S)}if(a++,h.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:f})=>Pp(f))&&(h.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:f})=>Pp(f))))break}}attachView(r){const a=r;this._views.push(a),a.attachToAppRef(this)}detachView(r){const a=r;Df(this._views,a),a.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);const a=this._injector.get(xp,[]);[...this._bootstrapListeners,...a].forEach(h=>h(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>Df(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new xe(406,!1);const r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275prov=Rn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Df(n,s){const r=n.indexOf(s);r>-1&&n.splice(r,1)}function SP(n,s,r){!s&&!Pp(n)||function TP(n,s,r){let a;r?(a=0,n[Rt]|=1024):a=64&n[Rt]?0:1,Vu(n,s,a)}(n,r,s)}function Pp(n){return Oa(n)}class IP{constructor(s,r){this.ngModuleFactory=s,this.componentFactories=r}}let AP=(()=>{class n{compileModuleSync(r){return new Mg(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){const a=this.compileModuleSync(r),f=to(Ui(r).declarations).reduce((C,S)=>{const P=Dn(S);return P&&C.push(new nh(P)),C},[]);return new IP(a,f)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275prov=Rn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),PP=(()=>{class n{constructor(){this.zone=en(Ni),this.applicationRef=en(hl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275prov=Rn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function OP(){const n=en(Ni),s=en(ir);return r=>n.runOutsideAngular(()=>s.handleError(r))}let RP=(()=>{class n{constructor(){this.subscription=new Pe.yU,this.initialized=!1,this.zone=en(Ni),this.pendingTasks=en(fd)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ni.assertNotInAngularZone(),queueMicrotask(()=>{null!==r&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ni.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static#e=this.\u0275fac=function(a){return new(a||n)};static#t=this.\u0275prov=Rn({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();const Ef=new dn("",{providedIn:"root",factory:()=>en(Ef,gn.Optional|gn.SkipSelf)||function FP(){return typeof $localize<"u"&&$localize.locale||Nd}()}),NP=new dn("",{providedIn:"root",factory:()=>"USD"}),Op=new dn("");let RE=(()=>{class n{constructor(r){this._injector=r,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(r,a){const h=function RI(n="zone.js",s){return"noop"===n?new PC:"zone.js"===n?new Ni(s):n}(a?.ngZone,function bE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}({eventCoalescing:a?.ngZoneEventCoalescing,runCoalescing:a?.ngZoneRunCoalescing}));return h.run(()=>{const f=function TA(n,s,r){return new Ag(n,s,r)}(r.moduleType,this.injector,function OE(n){return[{provide:Ni,useFactory:n},{provide:ro,multi:!0,useFactory:()=>{const s=en(PP,{optional:!0});return()=>s.initialize()}},{provide:ro,multi:!0,useFactory:()=>{const s=en(RP);return()=>{s.initialize()}}},{provide:eu,useFactory:OP}]}(()=>h)),C=f.injector.get(ir,null);return h.runOutsideAngular(()=>{const S=h.onError.subscribe({next:P=>{C.handleError(P)}});f.onDestroy(()=>{Df(this._modules,f),S.unsubscribe()})}),function ME(n,s,r){try{const a=r();return Ap(a)?a.catch(h=>{throw s.runOutsideAngular(()=>n.handleError(h)),h}):a}catch(a){throw s.runOutsideAngular(()=>n.handleError(a)),a}}(C,h,()=>{const S=f.injector.get(Mp);return S.runInitializers(),S.donePromise.then(()=>(function AD(n){"string"==typeof n&&(ID=n.toLowerCase().replace(/_/g,"-"))}(f.injector.get(Ef,Nd)||Nd),this._moduleDoBootstrap(f),f))})})}bootstrapModule(r,a=[]){const h=xE({},a);return function xP(n,s,r){const a=new Mg(r);return Promise.resolve(a)}(0,0,r).then(f=>this.bootstrapModuleFactory(f,h))}_moduleDoBootstrap(r){const a=r.injector.get(hl);if(r._bootstrapComponents.length>0)r._bootstrapComponents.forEach(h=>a.bootstrap(h));else{if(!r.instance.ngDoBootstrap)throw new xe(-403,!1);r.instance.ngDoBootstrap(a)}this._modules.push(r)}onDestroy(r){this._destroyListeners.push(r)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe(404,!1);this._modules.slice().forEach(a=>a.destroy()),this._destroyListeners.forEach(a=>a());const r=this._injector.get(Op,null);r&&(r.forEach(a=>a()),r.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static#e=this.\u0275fac=function(a){return new(a||n)(si(Zi))};static#t=this.\u0275prov=Rn({token:n,factory:n.\u0275fac,providedIn:"platform"})}return n})(),ul=null;const FE=new dn("");function NE(n,s,r=[]){const a=`Platform: ${s}`,h=new dn(a);return(f=[])=>{let C=bp();if(!C||C.injector.get(FE,!1)){const S=[...r,...f,{provide:h,useValue:!0}];n?n(S):function wP(n){if(ul&&!ul.get(FE,!1))throw new xe(400,!1);(function AE(){!function se(n){Ce=n}(()=>{throw new xe(600,!1)})})(),ul=n;const s=n.get(RE);(function wE(n){n.get(Am,null)?.forEach(r=>r())})(n)}(function LE(n=[],s){return Zi.create({name:s,providers:[{provide:Sl,useValue:"platform"},{provide:Op,useValue:new Set([()=>ul=null])},...n]})}(S,a))}return function VP(n){const s=bp();if(!s)throw new xe(401,!1);return s}()}}function bp(){return ul?.get(RE)??null}function HP(){return!1}let BE=(()=>{class n{static#e=this.__NG_ELEMENT_ID__=UP}return n})();function UP(n){return function GP(n,s,r){if(co(n)&&!r){const a=On(n.index,s);return new Yc(a,a)}return 47&n.type?new Yc(s[kn],s):null}(Wn(),lt(),!(16&~n))}class jE{constructor(){}supports(s){return Zu(s)}create(s){return new KP(s)}}const zP=(n,s)=>s;class KP{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||zP}forEachItem(s){let r;for(r=this._itHead;null!==r;r=r._next)s(r)}forEachOperation(s){let r=this._itHead,a=this._removalsHead,h=0,f=null;for(;r||a;){const C=!a||r&&r.currentIndex<$E(a,h,f)?r:a,S=$E(C,h,f),P=C.currentIndex;if(C===a)h--,a=a._nextRemoved;else if(r=r._next,null==C.previousIndex)h++;else{f||(f=[]);const _=S-h,pe=P-h;if(_!=pe){for(let Be=0;Be<_;Be++){const $e=Be<f.length?f[Be]:f[Be]=0,Qe=$e+Be;pe<=Qe&&Qe<_&&(f[Be]=$e+1)}f[C.previousIndex]=pe-_}}S!==P&&s(C,S,P)}}forEachPreviousItem(s){let r;for(r=this._previousItHead;null!==r;r=r._nextPrevious)s(r)}forEachAddedItem(s){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)s(r)}forEachMovedItem(s){let r;for(r=this._movesHead;null!==r;r=r._nextMoved)s(r)}forEachRemovedItem(s){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)s(r)}forEachIdentityChange(s){let r;for(r=this._identityChangesHead;null!==r;r=r._nextIdentityChange)s(r)}diff(s){if(null==s&&(s=[]),!Zu(s))throw new xe(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let h,f,C,r=this._itHead,a=!1;if(Array.isArray(s)){this.length=s.length;for(let S=0;S<this.length;S++)f=s[S],C=this._trackByFn(S,f),null!==r&&Object.is(r.trackById,C)?(a&&(r=this._verifyReinsertion(r,f,C,S)),Object.is(r.item,f)||this._addIdentityChange(r,f)):(r=this._mismatch(r,f,C,S),a=!0),r=r._next}else h=0,function xA(n,s){if(Array.isArray(n))for(let r=0;r<n.length;r++)s(n[r]);else{const r=n[Symbol.iterator]();let a;for(;!(a=r.next()).done;)s(a.value)}}(s,S=>{C=this._trackByFn(h,S),null!==r&&Object.is(r.trackById,C)?(a&&(r=this._verifyReinsertion(r,S,C,h)),Object.is(r.item,S)||this._addIdentityChange(r,S)):(r=this._mismatch(r,S,C,h),a=!0),r=r._next,h++}),this.length=h;return this._truncate(r),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,r,a,h){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(s.item,r)||this._addIdentityChange(s,r),this._reinsertAfter(s,f,h)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(a,h))?(Object.is(s.item,r)||this._addIdentityChange(s,r),this._moveAfter(s,f,h)):s=this._addAfter(new YP(r,a),f,h),s}_verifyReinsertion(s,r,a,h){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==f?s=this._reinsertAfter(f,s._prev,h):s.currentIndex!=h&&(s.currentIndex=h,this._addToMoves(s,h)),s}_truncate(s){for(;null!==s;){const r=s._next;this._addToRemovals(this._unlink(s)),s=r}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,r,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const h=s._prevRemoved,f=s._nextRemoved;return null===h?this._removalsHead=f:h._nextRemoved=f,null===f?this._removalsTail=h:f._prevRemoved=h,this._insertAfter(s,r,a),this._addToMoves(s,a),s}_moveAfter(s,r,a){return this._unlink(s),this._insertAfter(s,r,a),this._addToMoves(s,a),s}_addAfter(s,r,a){return this._insertAfter(s,r,a),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,r,a){const h=null===r?this._itHead:r._next;return s._next=h,s._prev=r,null===h?this._itTail=s:h._prev=s,null===r?this._itHead=s:r._next=s,null===this._linkedRecords&&(this._linkedRecords=new WE),this._linkedRecords.put(s),s.currentIndex=a,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const r=s._prev,a=s._next;return null===r?this._itHead=a:r._next=a,null===a?this._itTail=r:a._prev=r,s}_addToMoves(s,r){return s.previousIndex===r||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new WE),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,r){return s.item=r,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class YP{constructor(s,r){this.item=s,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class XP{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,r){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===r||r<=a.currentIndex)&&Object.is(a.trackById,s))return a;return null}remove(s){const r=s._prevDup,a=s._nextDup;return null===r?this._head=a:r._nextDup=a,null===a?this._tail=r:a._prevDup=r,null===this._head}}class WE{constructor(){this.map=new Map}put(s){const r=s.trackById;let a=this.map.get(r);a||(a=new XP,this.map.set(r,a)),a.add(s)}get(s,r){const h=this.map.get(s);return h?h.get(s,r):null}remove(s){const r=s.trackById;return this.map.get(r).remove(s)&&this.map.delete(r),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function $E(n,s,r){const a=n.previousIndex;if(null===a)return a;let h=0;return r&&a<r.length&&(h=r[a]),a+s+h}class zE{constructor(){}supports(s){return s instanceof Map||Pg(s)}create(){return new JP}}class JP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let r;for(r=this._mapHead;null!==r;r=r._next)s(r)}forEachPreviousItem(s){let r;for(r=this._previousMapHead;null!==r;r=r._nextPrevious)s(r)}forEachChangedItem(s){let r;for(r=this._changesHead;null!==r;r=r._nextChanged)s(r)}forEachAddedItem(s){let r;for(r=this._additionsHead;null!==r;r=r._nextAdded)s(r)}forEachRemovedItem(s){let r;for(r=this._removalsHead;null!==r;r=r._nextRemoved)s(r)}diff(s){if(s){if(!(s instanceof Map||Pg(s)))throw new xe(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let r=this._mapHead;if(this._appendAfter=null,this._forEach(s,(a,h)=>{if(r&&r.key===h)this._maybeAddToChanges(r,a),this._appendAfter=r,r=r._next;else{const f=this._getOrCreateRecordForKey(h,a);r=this._insertBeforeOrAppend(r,f)}}),r){r._prev&&(r._prev._next=null),this._removalsHead=r;for(let a=r;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,r){if(s){const a=s._prev;return r._next=s,r._prev=a,s._prev=r,a&&(a._next=r),s===this._mapHead&&(this._mapHead=r),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=r,r._prev=this._appendAfter):this._mapHead=r,this._appendAfter=r,null}_getOrCreateRecordForKey(s,r){if(this._records.has(s)){const h=this._records.get(s);this._maybeAddToChanges(h,r);const f=h._prev,C=h._next;return f&&(f._next=C),C&&(C._prev=f),h._next=null,h._prev=null,h}const a=new QP(s);return this._records.set(s,a),a.currentValue=r,this._addToAdditions(a),a}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,r){Object.is(r,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=r,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,r){s instanceof Map?s.forEach(r):Object.keys(s).forEach(a=>r(s[a],a))}}class QP{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function KE(){return new wp([new jE])}let wp=(()=>{class n{static#e=this.\u0275prov=Rn({token:n,providedIn:"root",factory:KE});constructor(r){this.factories=r}static create(r,a){if(null!=a){const h=a.factories.slice();r=r.concat(h)}return new n(r)}static extend(r){return{provide:n,useFactory:a=>n.create(r,a||KE()),deps:[[n,new zo,new hi]]}}find(r){const a=this.factories.find(h=>h.supports(r));if(null!=a)return a;throw new xe(901,!1)}}return n})();function YE(){return new Vp([new zE])}let Vp=(()=>{class n{static#e=this.\u0275prov=Rn({token:n,providedIn:"root",factory:YE});constructor(r){this.factories=r}static create(r,a){if(a){const h=a.factories.slice();r=r.concat(h)}return new n(r)}static extend(r){return{provide:n,useFactory:a=>n.create(r,a||YE()),deps:[[n,new zo,new hi]]}}find(r){const a=this.factories.find(h=>h.supports(r));if(a)return a;throw new xe(901,!1)}}return n})();const qP=NE(null,"core",[]);let _P=(()=>{class n{constructor(r){}static#e=this.\u0275fac=function(a){return new(a||n)(si(hl))};static#t=this.\u0275mod=Dl({type:n});static#n=this.\u0275inj=Lt({})}return n})();function PO(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}function OO(n,s=NaN){return isNaN(parseFloat(n))||isNaN(Number(n))?s:Number(n)}function RO(n,s){or("NgSignals");const r=v(n);return s?.equal&&(r[oe].equal=s.equal),r}function FO(n){const s=X(null);try{return n()}finally{X(s)}}const NO=new dn("",{providedIn:"root",factory:()=>en(LO)});let LO=(()=>{class n{static#e=this.\u0275prov=Rn({token:n,providedIn:"root",factory:()=>new wO})}return n})();class wO{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=en(fd),this.taskId=null}scheduleEffect(s){if(this.enqueue(s),null===this.taskId){const r=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(r),this.taskId=null})}}enqueue(s){const r=s.creationZone;this.queues.has(r)||this.queues.set(r,new Set);const a=this.queues.get(r);a.has(s)||(this.queuedEffectCount++,a.add(s))}flush(){for(;this.queuedEffectCount>0;)for(const[s,r]of this.queues)null===s?this.flushQueue(r):s.run(()=>this.flushQueue(r))}flushQueue(s){for(const r of s)s.delete(r),this.queuedEffectCount--,r.run()}}class VO{constructor(s,r,a,h,f,C){this.scheduler=s,this.effectFn=r,this.creationZone=a,this.injector=f,this.watcher=function Re(n,s,r){const a=Object.create(je);r&&(a.consumerAllowSignalWrites=!0),a.fn=n,a.schedule=s;const h=P=>{a.cleanupFn=P};return a.ref={notify:()=>D(a),run:()=>{if(null===a.fn)return;if(function H(){return J}())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(a.dirty=!1,a.hasRun&&!W(a))return;a.hasRun=!0;const P=x(a);try{a.cleanupFn(),a.cleanupFn=st,a.fn(h)}finally{p(a,P)}},cleanup:()=>a.cleanupFn(),destroy:()=>function C(P){(function f(P){return null===P.fn&&null===P.schedule})(P)||(T(P),P.cleanupFn(),P.fn=null,P.schedule=null,P.cleanupFn=st)}(a),[oe]:a},a.ref}(S=>this.runEffect(S),()=>this.schedule(),C),this.unregisterOnDestroy=h?.onDestroy(()=>this.destroy())}runEffect(s){try{this.effectFn(s)}catch(r){this.injector.get(ir,null,{optional:!0})?.handleError(r)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}}function mS(n,s){or("NgSignals"),!s?.injector&&lo();const r=s?.injector??en(Zi),a=!0!==s?.manualCleanup?r.get(Ar):null,h=new VO(r.get(NO),n,typeof Zone>"u"?null:Zone.current,a,r,s?.allowSignalWrites??!1),f=r.get(BE,null,{optional:!0});return f&&8&f._lView[Rt]?(f._lView[Kr]??=[]).push(h.watcher.notify):h.watcher.notify(),h}function BO(n,s){const r=Dn(n),a=s.elementInjector||Gt();return new nh(r).create(a,s.projectableNodes,s.hostElement,s.environmentInjector)}function HO(n){const s=Dn(n);if(!s)return null;const r=new nh(s);return{get selector(){return r.selector},get type(){return r.componentType},get inputs(){return r.inputs},get outputs(){return r.outputs},get ngContentSelectors(){return r.ngContentSelectors},get isStandalone(){return s.standalone},get isSignal(){return s.signals}}}},11798:(qe,be,t)=>{"use strict";t.d(be,{BC:()=>Ke,Fm:()=>gn,JD:()=>Cs,MJ:()=>Os,Q0:()=>cr,R_:()=>oo,X1:()=>Cr,YN:()=>pl,YS:()=>ls,Zm:()=>ue,cV:()=>po,cb:()=>xe,cz:()=>D,gE:()=>xt,j4:()=>Rs,k0:()=>W,kq:()=>k,l_:()=>fr,me:()=>O,ok:()=>Xo,qT:()=>oa,vO:()=>Pe,vS:()=>Mn,wz:()=>si,xH:()=>Do,y7:()=>mr});var m=t(32057),A=t(82558),G=t(425),J=t(5087),Y=t(73973);let oe=(()=>{class de{constructor(K,Se){this._renderer=K,this._elementRef=Se,this.onChange=He=>{},this.onTouched=()=>{}}setProperty(K,Se){this._renderer.setProperty(this._elementRef.nativeElement,K,Se)}registerOnTouched(K){this.onTouched=K}registerOnChange(K){this.onChange=K}setDisabledState(K){this.setProperty("disabled",K)}static#e=this.\u0275fac=function(Se){return new(Se||de)(m.rXU(m.sFG),m.rXU(m.aKT))};static#t=this.\u0275dir=m.FsC({type:de})}return de})(),X=(()=>{class de extends oe{static#e=this.\u0275fac=(()=>{let K;return function(He){return(K||(K=m.xGo(de)))(He||de)}})();static#t=this.\u0275dir=m.FsC({type:de,features:[m.Vt3]})}return de})();const k=new m.nKC(""),H={provide:k,useExisting:(0,m.Rfq)(()=>ue),multi:!0};let ue=(()=>{class de extends X{writeValue(K){this.setProperty("checked",K)}static#e=this.\u0275fac=(()=>{let K;return function(He){return(K||(K=m.xGo(de)))(He||de)}})();static#t=this.\u0275dir=m.FsC({type:de,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(Se,He){1&Se&&m.bIt("change",function(pn){return He.onChange(pn.target.checked)})("blur",function(){return He.onTouched()})},features:[m.Jv_([H]),m.Vt3]})}return de})();const q={provide:k,useExisting:(0,m.Rfq)(()=>O),multi:!0},re=new m.nKC("");let O=(()=>{class de extends oe{constructor(K,Se,He){super(K,Se),this._compositionMode=He,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function ye(){const de=(0,A.QT)()?(0,A.QT)().getUserAgent():"";return/android (\d+)/.test(de.toLowerCase())}())}writeValue(K){this.setProperty("value",K??"")}_handleInput(K){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(K)}_compositionStart(){this._composing=!0}_compositionEnd(K){this._composing=!1,this._compositionMode&&this.onChange(K)}static#e=this.\u0275fac=function(Se){return new(Se||de)(m.rXU(m.sFG),m.rXU(m.aKT),m.rXU(re,8))};static#t=this.\u0275dir=m.FsC({type:de,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(Se,He){1&Se&&m.bIt("input",function(pn){return He._handleInput(pn.target.value)})("blur",function(){return He.onTouched()})("compositionstart",function(){return He._compositionStart()})("compositionend",function(pn){return He._compositionEnd(pn.target.value)})},features:[m.Jv_([q]),m.Vt3]})}return de})();function B(de){return null==de||("string"==typeof de||Array.isArray(de))&&0===de.length}function me(de){return null!=de&&"number"==typeof de.length}const D=new m.nKC(""),x=new m.nKC(""),p=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class W{static min(ge){return function T(de){return ge=>{if(B(ge.value)||B(de))return null;const K=parseFloat(ge.value);return!isNaN(K)&&K<de?{min:{min:de,actual:ge.value}}:null}}(ge)}static max(ge){return function R(de){return ge=>{if(B(ge.value)||B(de))return null;const K=parseFloat(ge.value);return!isNaN(K)&&K>de?{max:{max:de,actual:ge.value}}:null}}(ge)}static required(ge){return le(ge)}static requiredTrue(ge){return function j(de){return!0===de.value?null:{required:!0}}(ge)}static email(ge){return function F(de){return B(de.value)||p.test(de.value)?null:{email:!0}}(ge)}static minLength(ge){return function ne(de){return ge=>B(ge.value)||!me(ge.value)?null:ge.value.length<de?{minlength:{requiredLength:de,actualLength:ge.value.length}}:null}(ge)}static maxLength(ge){return function v(de){return ge=>me(ge.value)&&ge.value.length>de?{maxlength:{requiredLength:de,actualLength:ge.value.length}}:null}(ge)}static pattern(ge){return E(ge)}static nullValidator(ge){return null}static compose(ge){return z(ge)}static composeAsync(ge){return ee(ge)}}function le(de){return B(de.value)?{required:!0}:null}function E(de){if(!de)return L;let ge,K;return"string"==typeof de?(K="","^"!==de.charAt(0)&&(K+="^"),K+=de,"$"!==de.charAt(de.length-1)&&(K+="$"),ge=new RegExp(K)):(K=de.toString(),ge=de),Se=>{if(B(Se.value))return null;const He=Se.value;return ge.test(He)?null:{pattern:{requiredPattern:K,actualValue:He}}}}function L(de){return null}function I(de){return null!=de}function ie(de){return(0,m.jNT)(de)?(0,G.H)(de):de}function ce(de){let ge={};return de.forEach(K=>{ge=null!=K?{...ge,...K}:ge}),0===Object.keys(ge).length?null:ge}function Ce(de,ge){return ge.map(K=>K(de))}function se(de){return de.map(ge=>function he(de){return!de.validate}(ge)?ge:K=>ge.validate(K))}function z(de){if(!de)return null;const ge=de.filter(I);return 0==ge.length?null:function(K){return ce(Ce(K,ge))}}function N(de){return null!=de?z(se(de)):null}function ee(de){if(!de)return null;const ge=de.filter(I);return 0==ge.length?null:function(K){const Se=Ce(K,ge).map(ie);return(0,J.p)(Se).pipe((0,Y.T)(ce))}}function Z(de){return null!=de?ee(se(de)):null}function fe(de,ge){return null===de?[ge]:Array.isArray(de)?[...de,ge]:[de,ge]}function U(de){return de._rawValidators}function Ee(de){return de._rawAsyncValidators}function Me(de){return de?Array.isArray(de)?de:[de]:[]}function Re(de,ge){return Array.isArray(de)?de.includes(ge):de===ge}function st(de,ge){const K=Me(ge);return Me(de).forEach(He=>{Re(K,He)||K.push(He)}),K}function je(de,ge){return Me(ge).filter(K=>!Re(de,K))}class ct{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(ge){this._rawValidators=ge||[],this._composedValidatorFn=N(this._rawValidators)}_setAsyncValidators(ge){this._rawAsyncValidators=ge||[],this._composedAsyncValidatorFn=Z(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(ge){this._onDestroyCallbacks.push(ge)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(ge=>ge()),this._onDestroyCallbacks=[]}reset(ge=void 0){this.control&&this.control.reset(ge)}hasError(ge,K){return!!this.control&&this.control.hasError(ge,K)}getError(ge,K){return this.control?this.control.getError(ge,K):null}}class ot extends ct{get formDirective(){return null}get path(){return null}}class Pe extends ct{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class we{constructor(ge){this._cd=ge}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Ke=(()=>{class de extends we{constructor(K){super(K)}static#e=this.\u0275fac=function(Se){return new(Se||de)(m.rXU(Pe,2))};static#t=this.\u0275dir=m.FsC({type:de,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(Se,He){2&Se&&m.AVh("ng-untouched",He.isUntouched)("ng-touched",He.isTouched)("ng-pristine",He.isPristine)("ng-dirty",He.isDirty)("ng-valid",He.isValid)("ng-invalid",He.isInvalid)("ng-pending",He.isPending)},features:[m.Vt3]})}return de})(),xe=(()=>{class de extends we{constructor(K){super(K)}static#e=this.\u0275fac=function(Se){return new(Se||de)(m.rXU(ot,10))};static#t=this.\u0275dir=m.FsC({type:de,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(Se,He){2&Se&&m.AVh("ng-untouched",He.isUntouched)("ng-touched",He.isTouched)("ng-pristine",He.isPristine)("ng-dirty",He.isDirty)("ng-valid",He.isValid)("ng-invalid",He.isInvalid)("ng-pending",He.isPending)("ng-submitted",He.isSubmitted)},features:[m.Vt3]})}return de})();const $t="VALID",fn="INVALID",Wt="PENDING",yn="DISABLED";function ai(de){return(Ze(de)?de.validators:de)||null}function gi(de,ge){return(Ze(ge)?ge.asyncValidators:de)||null}function Ze(de){return null!=de&&!Array.isArray(de)&&"object"==typeof de}function Fe(de,ge,K){const Se=de.controls;if(!(ge?Object.keys(Se):Se).length)throw new m.wOt(1e3,"");if(!Se[K])throw new m.wOt(1001,"")}function We(de,ge,K){de._forEachChild((Se,He)=>{if(void 0===K[He])throw new m.wOt(1002,"")})}class dt{constructor(ge,K){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(ge),this._assignAsyncValidators(K)}get validator(){return this._composedValidatorFn}set validator(ge){this._rawValidators=this._composedValidatorFn=ge}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(ge){this._rawAsyncValidators=this._composedAsyncValidatorFn=ge}get parent(){return this._parent}get valid(){return this.status===$t}get invalid(){return this.status===fn}get pending(){return this.status==Wt}get disabled(){return this.status===yn}get enabled(){return this.status!==yn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(ge){this._assignValidators(ge)}setAsyncValidators(ge){this._assignAsyncValidators(ge)}addValidators(ge){this.setValidators(st(ge,this._rawValidators))}addAsyncValidators(ge){this.setAsyncValidators(st(ge,this._rawAsyncValidators))}removeValidators(ge){this.setValidators(je(ge,this._rawValidators))}removeAsyncValidators(ge){this.setAsyncValidators(je(ge,this._rawAsyncValidators))}hasValidator(ge){return Re(this._rawValidators,ge)}hasAsyncValidator(ge){return Re(this._rawAsyncValidators,ge)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(ge={}){this.touched=!0,this._parent&&!ge.onlySelf&&this._parent.markAsTouched(ge)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(ge=>ge.markAllAsTouched())}markAsUntouched(ge={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(K=>{K.markAsUntouched({onlySelf:!0})}),this._parent&&!ge.onlySelf&&this._parent._updateTouched(ge)}markAsDirty(ge={}){this.pristine=!1,this._parent&&!ge.onlySelf&&this._parent.markAsDirty(ge)}markAsPristine(ge={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(K=>{K.markAsPristine({onlySelf:!0})}),this._parent&&!ge.onlySelf&&this._parent._updatePristine(ge)}markAsPending(ge={}){this.status=Wt,!1!==ge.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!ge.onlySelf&&this._parent.markAsPending(ge)}disable(ge={}){const K=this._parentMarkedDirty(ge.onlySelf);this.status=yn,this.errors=null,this._forEachChild(Se=>{Se.disable({...ge,onlySelf:!0})}),this._updateValue(),!1!==ge.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...ge,skipPristineCheck:K}),this._onDisabledChange.forEach(Se=>Se(!0))}enable(ge={}){const K=this._parentMarkedDirty(ge.onlySelf);this.status=$t,this._forEachChild(Se=>{Se.enable({...ge,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:ge.emitEvent}),this._updateAncestors({...ge,skipPristineCheck:K}),this._onDisabledChange.forEach(Se=>Se(!1))}_updateAncestors(ge){this._parent&&!ge.onlySelf&&(this._parent.updateValueAndValidity(ge),ge.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(ge){this._parent=ge}getRawValue(){return this.value}updateValueAndValidity(ge={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$t||this.status===Wt)&&this._runAsyncValidator(ge.emitEvent)),!1!==ge.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!ge.onlySelf&&this._parent.updateValueAndValidity(ge)}_updateTreeValidity(ge={emitEvent:!0}){this._forEachChild(K=>K._updateTreeValidity(ge)),this.updateValueAndValidity({onlySelf:!0,emitEvent:ge.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?yn:$t}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(ge){if(this.asyncValidator){this.status=Wt,this._hasOwnPendingAsyncValidator=!0;const K=ie(this.asyncValidator(this));this._asyncValidationSubscription=K.subscribe(Se=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(Se,{emitEvent:ge})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(ge,K={}){this.errors=ge,this._updateControlsErrors(!1!==K.emitEvent)}get(ge){let K=ge;return null==K||(Array.isArray(K)||(K=K.split(".")),0===K.length)?null:K.reduce((Se,He)=>Se&&Se._find(He),this)}getError(ge,K){const Se=K?this.get(K):this;return Se&&Se.errors?Se.errors[ge]:null}hasError(ge,K){return!!this.getError(ge,K)}get root(){let ge=this;for(;ge._parent;)ge=ge._parent;return ge}_updateControlsErrors(ge){this.status=this._calculateStatus(),ge&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(ge)}_initObservables(){this.valueChanges=new m.bkB,this.statusChanges=new m.bkB}_calculateStatus(){return this._allControlsDisabled()?yn:this.errors?fn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wt)?Wt:this._anyControlsHaveStatus(fn)?fn:$t}_anyControlsHaveStatus(ge){return this._anyControls(K=>K.status===ge)}_anyControlsDirty(){return this._anyControls(ge=>ge.dirty)}_anyControlsTouched(){return this._anyControls(ge=>ge.touched)}_updatePristine(ge={}){this.pristine=!this._anyControlsDirty(),this._parent&&!ge.onlySelf&&this._parent._updatePristine(ge)}_updateTouched(ge={}){this.touched=this._anyControlsTouched(),this._parent&&!ge.onlySelf&&this._parent._updateTouched(ge)}_registerOnCollectionChange(ge){this._onCollectionChange=ge}_setUpdateStrategy(ge){Ze(ge)&&null!=ge.updateOn&&(this._updateOn=ge.updateOn)}_parentMarkedDirty(ge){return!ge&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(ge){return null}_assignValidators(ge){this._rawValidators=Array.isArray(ge)?ge.slice():ge,this._composedValidatorFn=function Qt(de){return Array.isArray(de)?N(de):de||null}(this._rawValidators)}_assignAsyncValidators(ge){this._rawAsyncValidators=Array.isArray(ge)?ge.slice():ge,this._composedAsyncValidatorFn=function Ge(de){return Array.isArray(de)?Z(de):de||null}(this._rawAsyncValidators)}}class xt extends dt{constructor(ge,K,Se){super(ai(K),gi(Se,K)),this.controls=ge,this._initObservables(),this._setUpdateStrategy(K),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(ge,K){return this.controls[ge]?this.controls[ge]:(this.controls[ge]=K,K.setParent(this),K._registerOnCollectionChange(this._onCollectionChange),K)}addControl(ge,K,Se={}){this.registerControl(ge,K),this.updateValueAndValidity({emitEvent:Se.emitEvent}),this._onCollectionChange()}removeControl(ge,K={}){this.controls[ge]&&this.controls[ge]._registerOnCollectionChange(()=>{}),delete this.controls[ge],this.updateValueAndValidity({emitEvent:K.emitEvent}),this._onCollectionChange()}setControl(ge,K,Se={}){this.controls[ge]&&this.controls[ge]._registerOnCollectionChange(()=>{}),delete this.controls[ge],K&&this.registerControl(ge,K),this.updateValueAndValidity({emitEvent:Se.emitEvent}),this._onCollectionChange()}contains(ge){return this.controls.hasOwnProperty(ge)&&this.controls[ge].enabled}setValue(ge,K={}){We(this,0,ge),Object.keys(ge).forEach(Se=>{Fe(this,!0,Se),this.controls[Se].setValue(ge[Se],{onlySelf:!0,emitEvent:K.emitEvent})}),this.updateValueAndValidity(K)}patchValue(ge,K={}){null!=ge&&(Object.keys(ge).forEach(Se=>{const He=this.controls[Se];He&&He.patchValue(ge[Se],{onlySelf:!0,emitEvent:K.emitEvent})}),this.updateValueAndValidity(K))}reset(ge={},K={}){this._forEachChild((Se,He)=>{Se.reset(ge?ge[He]:null,{onlySelf:!0,emitEvent:K.emitEvent})}),this._updatePristine(K),this._updateTouched(K),this.updateValueAndValidity(K)}getRawValue(){return this._reduceChildren({},(ge,K,Se)=>(ge[Se]=K.getRawValue(),ge))}_syncPendingControls(){let ge=this._reduceChildren(!1,(K,Se)=>!!Se._syncPendingControls()||K);return ge&&this.updateValueAndValidity({onlySelf:!0}),ge}_forEachChild(ge){Object.keys(this.controls).forEach(K=>{const Se=this.controls[K];Se&&ge(Se,K)})}_setUpControls(){this._forEachChild(ge=>{ge.setParent(this),ge._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(ge){for(const[K,Se]of Object.entries(this.controls))if(this.contains(K)&&ge(Se))return!0;return!1}_reduceValue(){return this._reduceChildren({},(K,Se,He)=>((Se.enabled||this.disabled)&&(K[He]=Se.value),K))}_reduceChildren(ge,K){let Se=ge;return this._forEachChild((He,Ht)=>{Se=K(Se,He,Ht)}),Se}_allControlsDisabled(){for(const ge of Object.keys(this.controls))if(this.controls[ge].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(ge){return this.controls.hasOwnProperty(ge)?this.controls[ge]:null}}class Ct extends xt{}const an=new m.nKC("CallSetDisabledState",{providedIn:"root",factory:()=>di}),di="always";function Li(de,ge){return[...ge.path,de]}function Ai(de,ge,K=di){Yi(de,ge),ge.valueAccessor.writeValue(de.value),(de.disabled||"always"===K)&&ge.valueAccessor.setDisabledState?.(de.disabled),function $s(de,ge){ge.valueAccessor.registerOnChange(K=>{de._pendingValue=K,de._pendingChange=!0,de._pendingDirty=!0,"change"===de.updateOn&&Rn(de,ge)})}(de,ge),function Bo(de,ge){const K=(Se,He)=>{ge.valueAccessor.writeValue(Se),He&&ge.viewToModelUpdate(Se)};de.registerOnChange(K),ge._registerOnDestroy(()=>{de._unregisterOnChange(K)})}(de,ge),function xs(de,ge){ge.valueAccessor.registerOnTouched(()=>{de._pendingTouched=!0,"blur"===de.updateOn&&de._pendingChange&&Rn(de,ge),"submit"!==de.updateOn&&de.markAsTouched()})}(de,ge),function Un(de,ge){if(ge.valueAccessor.setDisabledState){const K=Se=>{ge.valueAccessor.setDisabledState(Se)};de.registerOnDisabledChange(K),ge._registerOnDestroy(()=>{de._unregisterOnDisabledChange(K)})}}(de,ge)}function ei(de,ge,K=!0){const Se=()=>{};ge.valueAccessor&&(ge.valueAccessor.registerOnChange(Se),ge.valueAccessor.registerOnTouched(Se)),Ws(de,ge),de&&(ge._invokeOnDestroyCallbacks(),de._registerOnCollectionChange(()=>{}))}function Vt(de,ge){de.forEach(K=>{K.registerOnValidatorChange&&K.registerOnValidatorChange(ge)})}function Yi(de,ge){const K=U(de);null!==ge.validator?de.setValidators(fe(K,ge.validator)):"function"==typeof K&&de.setValidators([K]);const Se=Ee(de);null!==ge.asyncValidator?de.setAsyncValidators(fe(Se,ge.asyncValidator)):"function"==typeof Se&&de.setAsyncValidators([Se]);const He=()=>de.updateValueAndValidity();Vt(ge._rawValidators,He),Vt(ge._rawAsyncValidators,He)}function Ws(de,ge){let K=!1;if(null!==de){if(null!==ge.validator){const He=U(de);if(Array.isArray(He)&&He.length>0){const Ht=He.filter(pn=>pn!==ge.validator);Ht.length!==He.length&&(K=!0,de.setValidators(Ht))}}if(null!==ge.asyncValidator){const He=Ee(de);if(Array.isArray(He)&&He.length>0){const Ht=He.filter(pn=>pn!==ge.asyncValidator);Ht.length!==He.length&&(K=!0,de.setAsyncValidators(Ht))}}}const Se=()=>{};return Vt(ge._rawValidators,Se),Vt(ge._rawAsyncValidators,Se),K}function Rn(de,ge){de._pendingDirty&&de.markAsDirty(),de.setValue(de._pendingValue,{emitModelToViewChange:!1}),ge.viewToModelUpdate(de._pendingValue),de._pendingChange=!1}function Lt(de,ge){Yi(de,ge)}function _i(de,ge){if(!de.hasOwnProperty("model"))return!1;const K=de.model;return!!K.isFirstChange()||!Object.is(ge,K.currentValue)}function ci(de,ge){de._syncPendingControls(),ge.forEach(K=>{const Se=K.control;"submit"===Se.updateOn&&Se._pendingChange&&(K.viewToModelUpdate(Se._pendingValue),Se._pendingChange=!1)})}function dn(de,ge){if(!ge)return null;let K,Se,He;return Array.isArray(ge),ge.forEach(Ht=>{Ht.constructor===O?K=Ht:function Vi(de){return Object.getPrototypeOf(de.constructor)===X}(Ht)?Se=Ht:He=Ht}),He||Se||K||null}const Fr={provide:ot,useExisting:(0,m.Rfq)(()=>po)},rs=Promise.resolve();let po=(()=>{class de extends ot{constructor(K,Se,He){super(),this.callSetDisabledState=He,this.submitted=!1,this._directives=new Set,this.ngSubmit=new m.bkB,this.form=new xt({},N(K),Z(Se))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(K){rs.then(()=>{const Se=this._findContainer(K.path);K.control=Se.registerControl(K.name,K.control),Ai(K.control,K,this.callSetDisabledState),K.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(K)})}getControl(K){return this.form.get(K.path)}removeControl(K){rs.then(()=>{const Se=this._findContainer(K.path);Se&&Se.removeControl(K.name),this._directives.delete(K)})}addFormGroup(K){rs.then(()=>{const Se=this._findContainer(K.path),He=new xt({});Lt(He,K),Se.registerControl(K.name,He),He.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(K){rs.then(()=>{const Se=this._findContainer(K.path);Se&&Se.removeControl(K.name)})}getFormGroup(K){return this.form.get(K.path)}updateModel(K,Se){rs.then(()=>{this.form.get(K.path).setValue(Se)})}setValue(K){this.control.setValue(K)}onSubmit(K){return this.submitted=!0,ci(this.form,this._directives),this.ngSubmit.emit(K),"dialog"===K?.target?.method}onReset(){this.resetForm()}resetForm(K=void 0){this.form.reset(K),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(K){return K.pop(),K.length?this.form.get(K):this.form}static#e=this.\u0275fac=function(Se){return new(Se||de)(m.rXU(D,10),m.rXU(x,10),m.rXU(an,8))};static#t=this.\u0275dir=m.FsC({type:de,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(Se,He){1&Se&&m.bIt("submit",function(pn){return He.onSubmit(pn)})("reset",function(){return He.onReset()})},inputs:{options:[m.Mj6.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m.Jv_([Fr]),m.Vt3]})}return de})();function ar(de,ge){const K=de.indexOf(ge);K>-1&&de.splice(K,1)}function Nr(de){return"object"==typeof de&&null!==de&&2===Object.keys(de).length&&"value"in de&&"disabled"in de}const Os=class extends dt{constructor(ge=null,K,Se){super(ai(K),gi(Se,K)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(ge),this._setUpdateStrategy(K),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ze(K)&&(K.nonNullable||K.initialValueIsDefault)&&(this.defaultValue=Nr(ge)?ge.value:ge)}setValue(ge,K={}){this.value=this._pendingValue=ge,this._onChange.length&&!1!==K.emitModelToViewChange&&this._onChange.forEach(Se=>Se(this.value,!1!==K.emitViewToModelChange)),this.updateValueAndValidity(K)}patchValue(ge,K={}){this.setValue(ge,K)}reset(ge=this.defaultValue,K={}){this._applyFormState(ge),this.markAsPristine(K),this.markAsUntouched(K),this.setValue(this.value,K),this._pendingChange=!1}_updateValue(){}_anyControls(ge){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(ge){this._onChange.push(ge)}_unregisterOnChange(ge){ar(this._onChange,ge)}registerOnDisabledChange(ge){this._onDisabledChange.push(ge)}_unregisterOnDisabledChange(ge){ar(this._onDisabledChange,ge)}_forEachChild(ge){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(ge){Nr(ge)?(this.value=this._pendingValue=ge.value,ge.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=ge}},wr={provide:Pe,useExisting:(0,m.Rfq)(()=>Mn)},_t=Promise.resolve();let Mn=(()=>{class de extends Pe{constructor(K,Se,He,Ht,pn,Ds){super(),this._changeDetectorRef=pn,this.callSetDisabledState=Ds,this.control=new Os,this._registered=!1,this.name="",this.update=new m.bkB,this._parent=K,this._setValidators(Se),this._setAsyncValidators(He),this.valueAccessor=dn(0,Ht)}ngOnChanges(K){if(this._checkForErrors(),!this._registered||"name"in K){if(this._registered&&(this._checkName(),this.formDirective)){const Se=K.name.previousValue;this.formDirective.removeControl({name:Se,path:this._getPath(Se)})}this._setUpControl()}"isDisabled"in K&&this._updateDisabled(K),_i(K,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(K){this.viewModel=K,this.update.emit(K)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Ai(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(K){_t.then(()=>{this.control.setValue(K,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(K){const Se=K.isDisabled.currentValue,He=0!==Se&&(0,m.L39)(Se);_t.then(()=>{He&&!this.control.disabled?this.control.disable():!He&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(K){return this._parent?Li(K,this._parent):[K]}static#e=this.\u0275fac=function(Se){return new(Se||de)(m.rXU(ot,9),m.rXU(D,10),m.rXU(x,10),m.rXU(k,10),m.rXU(m.gRc,8),m.rXU(an,8))};static#t=this.\u0275dir=m.FsC({type:de,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[m.Mj6.None,"disabled","isDisabled"],model:[m.Mj6.None,"ngModel","model"],options:[m.Mj6.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[m.Jv_([wr]),m.Vt3,m.OA$]})}return de})(),oa=(()=>{class de{static#e=this.\u0275fac=function(Se){return new(Se||de)};static#t=this.\u0275dir=m.FsC({type:de,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}return de})();const es={provide:k,useExisting:(0,m.Rfq)(()=>cr),multi:!0};let cr=(()=>{class de extends X{writeValue(K){this.setProperty("value",K??"")}registerOnChange(K){this.onChange=Se=>{K(""==Se?null:parseFloat(Se))}}static#e=this.\u0275fac=(()=>{let K;return function(He){return(K||(K=m.xGo(de)))(He||de)}})();static#t=this.\u0275dir=m.FsC({type:de,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(Se,He){1&Se&&m.bIt("input",function(pn){return He.onChange(pn.target.value)})("blur",function(){return He.onTouched()})},features:[m.Jv_([es]),m.Vt3]})}return de})();const ra={provide:k,useExisting:(0,m.Rfq)(()=>gn),multi:!0};let hr=(()=>{class de{constructor(){this._accessors=[]}add(K,Se){this._accessors.push([K,Se])}remove(K){for(let Se=this._accessors.length-1;Se>=0;--Se)if(this._accessors[Se][1]===K)return void this._accessors.splice(Se,1)}select(K){this._accessors.forEach(Se=>{this._isSameGroup(Se,K)&&Se[1]!==K&&Se[1].fireUncheck(K.value)})}_isSameGroup(K,Se){return!!K[0].control&&K[0]._parent===Se._control._parent&&K[1].name===Se.name}static#e=this.\u0275fac=function(Se){return new(Se||de)};static#t=this.\u0275prov=m.jDH({token:de,factory:de.\u0275fac,providedIn:"root"})}return de})(),gn=(()=>{class de extends X{constructor(K,Se,He,Ht){super(K,Se),this._registry=He,this._injector=Ht,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=(0,m.WQX)(an,{optional:!0})??di}ngOnInit(){this._control=this._injector.get(Pe),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(K){this._state=K===this.value,this.setProperty("checked",this._state)}registerOnChange(K){this._fn=K,this.onChange=()=>{K(this.value),this._registry.select(this)}}setDisabledState(K){(this.setDisabledStateFired||K||"whenDisabledForLegacyCode"===this.callSetDisabledState)&&this.setProperty("disabled",K),this.setDisabledStateFired=!0}fireUncheck(K){this.writeValue(K)}_checkName(){!this.name&&this.formControlName&&(this.name=this.formControlName)}static#e=this.\u0275fac=function(Se){return new(Se||de)(m.rXU(m.sFG),m.rXU(m.aKT),m.rXU(hr),m.rXU(m.zZn))};static#t=this.\u0275dir=m.FsC({type:de,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(Se,He){1&Se&&m.bIt("change",function(){return He.onChange()})("blur",function(){return He.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[m.Jv_([ra]),m.Vt3]})}return de})();const pi=new m.nKC(""),Vr={provide:Pe,useExisting:(0,m.Rfq)(()=>fr)};let fr=(()=>{class de extends Pe{set isDisabled(K){}static#e=this._ngModelWarningSentOnce=!1;constructor(K,Se,He,Ht,pn){super(),this._ngModelWarningConfig=Ht,this.callSetDisabledState=pn,this.update=new m.bkB,this._ngModelWarningSent=!1,this._setValidators(K),this._setAsyncValidators(Se),this.valueAccessor=dn(0,He)}ngOnChanges(K){if(this._isControlChanged(K)){const Se=K.form.previousValue;Se&&ei(Se,this,!1),Ai(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}_i(K,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&ei(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(K){this.viewModel=K,this.update.emit(K)}_isControlChanged(K){return K.hasOwnProperty("form")}static#t=this.\u0275fac=function(Se){return new(Se||de)(m.rXU(D,10),m.rXU(x,10),m.rXU(k,10),m.rXU(pi,8),m.rXU(an,8))};static#n=this.\u0275dir=m.FsC({type:de,selectors:[["","formControl",""]],inputs:{form:[m.Mj6.None,"formControl","form"],isDisabled:[m.Mj6.None,"disabled","isDisabled"],model:[m.Mj6.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[m.Jv_([Vr]),m.Vt3,m.OA$]})}return de})();const la={provide:ot,useExisting:(0,m.Rfq)(()=>Rs)};let Rs=(()=>{class de extends ot{constructor(K,Se,He){super(),this.callSetDisabledState=He,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new m.bkB,this._setValidators(K),this._setAsyncValidators(Se)}ngOnChanges(K){this._checkFormPresent(),K.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Ws(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(K){const Se=this.form.get(K.path);return Ai(Se,K,this.callSetDisabledState),Se.updateValueAndValidity({emitEvent:!1}),this.directives.push(K),Se}getControl(K){return this.form.get(K.path)}removeControl(K){ei(K.control||null,K,!1),function Ps(de,ge){const K=de.indexOf(ge);K>-1&&de.splice(K,1)}(this.directives,K)}addFormGroup(K){this._setUpFormContainer(K)}removeFormGroup(K){this._cleanUpFormContainer(K)}getFormGroup(K){return this.form.get(K.path)}addFormArray(K){this._setUpFormContainer(K)}removeFormArray(K){this._cleanUpFormContainer(K)}getFormArray(K){return this.form.get(K.path)}updateModel(K,Se){this.form.get(K.path).setValue(Se)}onSubmit(K){return this.submitted=!0,ci(this.form,this.directives),this.ngSubmit.emit(K),"dialog"===K?.target?.method}onReset(){this.resetForm()}resetForm(K=void 0){this.form.reset(K),this.submitted=!1}_updateDomValue(){this.directives.forEach(K=>{const Se=K.control,He=this.form.get(K.path);Se!==He&&(ei(Se||null,K),(de=>de instanceof Os)(He)&&(Ai(He,K,this.callSetDisabledState),K.control=He))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(K){const Se=this.form.get(K.path);Lt(Se,K),Se.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(K){if(this.form){const Se=this.form.get(K.path);Se&&function Yt(de,ge){return Ws(de,ge)}(Se,K)&&Se.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Yi(this.form,this),this._oldForm&&Ws(this._oldForm,this)}_checkFormPresent(){}static#e=this.\u0275fac=function(Se){return new(Se||de)(m.rXU(D,10),m.rXU(x,10),m.rXU(an,8))};static#t=this.\u0275dir=m.FsC({type:de,selectors:[["","formGroup",""]],hostBindings:function(Se,He){1&Se&&m.bIt("submit",function(pn){return He.onSubmit(pn)})("reset",function(){return He.onReset()})},inputs:{form:[m.Mj6.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[m.Jv_([la]),m.Vt3,m.OA$]})}return de})();const yo={provide:Pe,useExisting:(0,m.Rfq)(()=>Cs)};let Cs=(()=>{class de extends Pe{set isDisabled(K){}static#e=this._ngModelWarningSentOnce=!1;constructor(K,Se,He,Ht,pn){super(),this._ngModelWarningConfig=pn,this._added=!1,this.name=null,this.update=new m.bkB,this._ngModelWarningSent=!1,this._parent=K,this._setValidators(Se),this._setAsyncValidators(He),this.valueAccessor=dn(0,Ht)}ngOnChanges(K){this._added||this._setUpControl(),_i(K,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(K){this.viewModel=K,this.update.emit(K)}get path(){return Li(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static#t=this.\u0275fac=function(Se){return new(Se||de)(m.rXU(ot,13),m.rXU(D,10),m.rXU(x,10),m.rXU(k,10),m.rXU(pi,8))};static#n=this.\u0275dir=m.FsC({type:de,selectors:[["","formControlName",""]],inputs:{name:[m.Mj6.None,"formControlName","name"],isDisabled:[m.Mj6.None,"disabled","isDisabled"],model:[m.Mj6.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[m.Jv_([yo]),m.Vt3,m.OA$]})}return de})();const Fs={provide:k,useExisting:(0,m.Rfq)(()=>si),multi:!0};function ts(de,ge){return null==de?`${ge}`:(ge&&"object"==typeof ge&&(ge="Object"),`${de}: ${ge}`.slice(0,50))}let si=(()=>{class de extends X{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(K){this._compareWith=K}writeValue(K){this.value=K;const He=ts(this._getOptionId(K),K);this.setProperty("value",He)}registerOnChange(K){this.onChange=Se=>{this.value=this._getOptionValue(Se),K(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(K){for(const Se of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Se),K))return Se;return null}_getOptionValue(K){const Se=function Br(de){return de.split(":")[0]}(K);return this._optionMap.has(Se)?this._optionMap.get(Se):K}static#e=this.\u0275fac=(()=>{let K;return function(He){return(K||(K=m.xGo(de)))(He||de)}})();static#t=this.\u0275dir=m.FsC({type:de,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(Se,He){1&Se&&m.bIt("change",function(pn){return He.onChange(pn.target.value)})("blur",function(){return He.onTouched()})},inputs:{compareWith:"compareWith"},features:[m.Jv_([Fs]),m.Vt3]})}return de})(),Do=(()=>{class de{constructor(K,Se,He){this._element=K,this._renderer=Se,this._select=He,this._select&&(this.id=this._select._registerOption())}set ngValue(K){null!=this._select&&(this._select._optionMap.set(this.id,K),this._setElementValue(ts(this.id,K)),this._select.writeValue(this._select.value))}set value(K){this._setElementValue(K),this._select&&this._select.writeValue(this._select.value)}_setElementValue(K){this._renderer.setProperty(this._element.nativeElement,"value",K)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(Se){return new(Se||de)(m.rXU(m.aKT),m.rXU(m.sFG),m.rXU(si,9))};static#t=this.\u0275dir=m.FsC({type:de,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return de})();const en={provide:k,useExisting:(0,m.Rfq)(()=>vo),multi:!0};function Ys(de,ge){return null==de?`${ge}`:("string"==typeof ge&&(ge=`'${ge}'`),ge&&"object"==typeof ge&&(ge="Object"),`${de}: ${ge}`.slice(0,50))}let vo=(()=>{class de extends X{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(K){this._compareWith=K}writeValue(K){let Se;if(this.value=K,Array.isArray(K)){const He=K.map(Ht=>this._getOptionId(Ht));Se=(Ht,pn)=>{Ht._setSelected(He.indexOf(pn.toString())>-1)}}else Se=(He,Ht)=>{He._setSelected(!1)};this._optionMap.forEach(Se)}registerOnChange(K){this.onChange=Se=>{const He=[],Ht=Se.selectedOptions;if(void 0!==Ht){const pn=Ht;for(let Ds=0;Ds<pn.length;Ds++){const Mi=this._getOptionValue(pn[Ds].value);He.push(Mi)}}else{const pn=Se.options;for(let Ds=0;Ds<pn.length;Ds++){const Jo=pn[Ds];if(Jo.selected){const Mi=this._getOptionValue(Jo.value);He.push(Mi)}}}this.value=He,K(He)}}_registerOption(K){const Se=(this._idCounter++).toString();return this._optionMap.set(Se,K),Se}_getOptionId(K){for(const Se of this._optionMap.keys())if(this._compareWith(this._optionMap.get(Se)._value,K))return Se;return null}_getOptionValue(K){const Se=function Hr(de){return de.split(":")[0]}(K);return this._optionMap.has(Se)?this._optionMap.get(Se)._value:K}static#e=this.\u0275fac=(()=>{let K;return function(He){return(K||(K=m.xGo(de)))(He||de)}})();static#t=this.\u0275dir=m.FsC({type:de,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(Se,He){1&Se&&m.bIt("change",function(pn){return He.onChange(pn.target)})("blur",function(){return He.onTouched()})},inputs:{compareWith:"compareWith"},features:[m.Jv_([en]),m.Vt3]})}return de})(),mr=(()=>{class de{constructor(K,Se,He){this._element=K,this._renderer=Se,this._select=He,this._select&&(this.id=this._select._registerOption(this))}set ngValue(K){null!=this._select&&(this._value=K,this._setElementValue(Ys(this.id,K)),this._select.writeValue(this._select.value))}set value(K){this._select?(this._value=K,this._setElementValue(Ys(this.id,K)),this._select.writeValue(this._select.value)):this._setElementValue(K)}_setElementValue(K){this._renderer.setProperty(this._element.nativeElement,"value",K)}_setSelected(K){this._renderer.setProperty(this._element.nativeElement,"selected",K)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static#e=this.\u0275fac=function(Se){return new(Se||de)(m.rXU(m.aKT),m.rXU(m.sFG),m.rXU(vo,9))};static#t=this.\u0275dir=m.FsC({type:de,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}return de})(),hi=(()=>{class de{constructor(){this._validator=L}ngOnChanges(K){if(this.inputName in K){const Se=this.normalizeInput(K[this.inputName].currentValue);this._enabled=this.enabled(Se),this._validator=this._enabled?this.createValidator(Se):L,this._onChange&&this._onChange()}}validate(K){return this._validator(K)}registerOnValidatorChange(K){this._onChange=K}enabled(K){return null!=K}static#e=this.\u0275fac=function(Se){return new(Se||de)};static#t=this.\u0275dir=m.FsC({type:de,features:[m.OA$]})}return de})();const So={provide:D,useExisting:(0,m.Rfq)(()=>ls),multi:!0};let ls=(()=>{class de extends hi{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=m.L39,this.createValidator=K=>le}enabled(K){return K}static#e=this.\u0275fac=(()=>{let K;return function(He){return(K||(K=m.xGo(de)))(He||de)}})();static#t=this.\u0275dir=m.FsC({type:de,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(Se,He){2&Se&&m.BMQ("required",He._enabled?"":null)},inputs:{required:"required"},features:[m.Jv_([So]),m.Vt3]})}return de})();const Bi={provide:D,useExisting:(0,m.Rfq)(()=>oo),multi:!0};let oo=(()=>{class de extends hi{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=K=>K,this.createValidator=K=>E(K)}static#e=this.\u0275fac=(()=>{let K;return function(He){return(K||(K=m.xGo(de)))(He||de)}})();static#t=this.\u0275dir=m.FsC({type:de,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(Se,He){2&Se&&m.BMQ("pattern",He._enabled?He.pattern:null)},inputs:{pattern:"pattern"},features:[m.Jv_([Bi]),m.Vt3]})}return de})(),Hi=(()=>{class de{static#e=this.\u0275fac=function(Se){return new(Se||de)};static#t=this.\u0275mod=m.$C({type:de});static#n=this.\u0275inj=m.G2t({})}return de})();class xn extends dt{constructor(ge,K,Se){super(ai(K),gi(Se,K)),this.controls=ge,this._initObservables(),this._setUpdateStrategy(K),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(ge){return this.controls[this._adjustIndex(ge)]}push(ge,K={}){this.controls.push(ge),this._registerControl(ge),this.updateValueAndValidity({emitEvent:K.emitEvent}),this._onCollectionChange()}insert(ge,K,Se={}){this.controls.splice(ge,0,K),this._registerControl(K),this.updateValueAndValidity({emitEvent:Se.emitEvent})}removeAt(ge,K={}){let Se=this._adjustIndex(ge);Se<0&&(Se=0),this.controls[Se]&&this.controls[Se]._registerOnCollectionChange(()=>{}),this.controls.splice(Se,1),this.updateValueAndValidity({emitEvent:K.emitEvent})}setControl(ge,K,Se={}){let He=this._adjustIndex(ge);He<0&&(He=0),this.controls[He]&&this.controls[He]._registerOnCollectionChange(()=>{}),this.controls.splice(He,1),K&&(this.controls.splice(He,0,K),this._registerControl(K)),this.updateValueAndValidity({emitEvent:Se.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(ge,K={}){We(this,0,ge),ge.forEach((Se,He)=>{Fe(this,!1,He),this.at(He).setValue(Se,{onlySelf:!0,emitEvent:K.emitEvent})}),this.updateValueAndValidity(K)}patchValue(ge,K={}){null!=ge&&(ge.forEach((Se,He)=>{this.at(He)&&this.at(He).patchValue(Se,{onlySelf:!0,emitEvent:K.emitEvent})}),this.updateValueAndValidity(K))}reset(ge=[],K={}){this._forEachChild((Se,He)=>{Se.reset(ge[He],{onlySelf:!0,emitEvent:K.emitEvent})}),this._updatePristine(K),this._updateTouched(K),this.updateValueAndValidity(K)}getRawValue(){return this.controls.map(ge=>ge.getRawValue())}clear(ge={}){this.controls.length<1||(this._forEachChild(K=>K._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:ge.emitEvent}))}_adjustIndex(ge){return ge<0?ge+this.length:ge}_syncPendingControls(){let ge=this.controls.reduce((K,Se)=>!!Se._syncPendingControls()||K,!1);return ge&&this.updateValueAndValidity({onlySelf:!0}),ge}_forEachChild(ge){this.controls.forEach((K,Se)=>{ge(K,Se)})}_updateValue(){this.value=this.controls.filter(ge=>ge.enabled||this.disabled).map(ge=>ge.value)}_anyControls(ge){return this.controls.some(K=>K.enabled&&ge(K))}_setUpControls(){this._forEachChild(ge=>this._registerControl(ge))}_allControlsDisabled(){for(const ge of this.controls)if(ge.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(ge){ge.setParent(this),ge._registerOnCollectionChange(this._onCollectionChange)}_find(ge){return this.at(ge)??null}}function Yo(de){return!!de&&(void 0!==de.asyncValidators||void 0!==de.validators||void 0!==de.updateOn)}let Xo=(()=>{class de{constructor(){this.useNonNullable=!1}get nonNullable(){const K=new de;return K.useNonNullable=!0,K}group(K,Se=null){const He=this._reduceControls(K);let Ht={};return Yo(Se)?Ht=Se:null!==Se&&(Ht.validators=Se.validator,Ht.asyncValidators=Se.asyncValidator),new xt(He,Ht)}record(K,Se=null){const He=this._reduceControls(K);return new Ct(He,Se)}control(K,Se,He){let Ht={};return this.useNonNullable?(Yo(Se)?Ht=Se:(Ht.validators=Se,Ht.asyncValidators=He),new Os(K,{...Ht,nonNullable:!0})):new Os(K,Se,He)}array(K,Se,He){const Ht=K.map(pn=>this._createControl(pn));return new xn(Ht,Se,He)}_reduceControls(K){const Se={};return Object.keys(K).forEach(He=>{Se[He]=this._createControl(K[He])}),Se}_createControl(K){return K instanceof Os||K instanceof dt?K:Array.isArray(K)?this.control(K[0],K.length>1?K[1]:null,K.length>2?K[2]:null):this.control(K)}static#e=this.\u0275fac=function(Se){return new(Se||de)};static#t=this.\u0275prov=m.jDH({token:de,factory:de.\u0275fac,providedIn:"root"})}return de})(),pl=(()=>{class de{static withConfig(K){return{ngModule:de,providers:[{provide:an,useValue:K.callSetDisabledState??di}]}}static#e=this.\u0275fac=function(Se){return new(Se||de)};static#t=this.\u0275mod=m.$C({type:de});static#n=this.\u0275inj=m.G2t({imports:[Hi]})}return de})(),Cr=(()=>{class de{static withConfig(K){return{ngModule:de,providers:[{provide:pi,useValue:K.warnOnNgModelWithFormControl??"always"},{provide:an,useValue:K.callSetDisabledState??di}]}}static#e=this.\u0275fac=function(Se){return new(Se||de)};static#t=this.\u0275mod=m.$C({type:de});static#n=this.\u0275inj=m.G2t({imports:[Hi]})}return de})()},22726:(qe,be,t)=>{"use strict";t.d(be,{B7:()=>F,Bb:()=>we,EU:()=>q,hE:()=>Ke,sG:()=>je,up:()=>Ft});var m=t(32057),A=t(82558);class G extends A.VF{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class J extends G{static makeCurrent(){(0,A.ZD)(new J)}onAndCancel(Ze,Fe,We){return Ze.addEventListener(Fe,We),()=>{Ze.removeEventListener(Fe,We)}}dispatchEvent(Ze,Fe){Ze.dispatchEvent(Fe)}remove(Ze){Ze.parentNode&&Ze.parentNode.removeChild(Ze)}createElement(Ze,Fe){return(Fe=Fe||this.getDefaultDocument()).createElement(Ze)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ze){return Ze.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ze){return Ze instanceof DocumentFragment}getGlobalEventTarget(Ze,Fe){return"window"===Fe?window:"document"===Fe?Ze:"body"===Fe?Ze.body:null}getBaseHref(Ze){const Fe=function oe(){return Y=Y||document.querySelector("base"),Y?Y.getAttribute("href"):null}();return null==Fe?null:function X(Ge){return new URL(Ge,document.baseURI).pathname}(Fe)}resetBaseElement(){Y=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ze){return(0,A._b)(document.cookie,Ze)}}let Y=null,H=(()=>{class Ge{build(){return new XMLHttpRequest}static#e=this.\u0275fac=function(We){return new(We||Ge)};static#t=this.\u0275prov=m.jDH({token:Ge,factory:Ge.\u0275fac})}return Ge})();const ue=new m.nKC("");let q=(()=>{class Ge{constructor(Fe,We){this._zone=We,this._eventNameToPlugin=new Map,Fe.forEach(dt=>{dt.manager=this}),this._plugins=Fe.slice().reverse()}addEventListener(Fe,We,dt){return this._findPluginFor(We).addEventListener(Fe,We,dt)}getZone(){return this._zone}_findPluginFor(Fe){let We=this._eventNameToPlugin.get(Fe);if(We)return We;if(We=this._plugins.find(xt=>xt.supports(Fe)),!We)throw new m.wOt(5101,!1);return this._eventNameToPlugin.set(Fe,We),We}static#e=this.\u0275fac=function(We){return new(We||Ge)(m.KVO(ue),m.KVO(m.SKi))};static#t=this.\u0275prov=m.jDH({token:Ge,factory:Ge.\u0275fac})}return Ge})();class ye{constructor(Ze){this._doc=Ze}}const re="ng-app-id";let O=(()=>{class Ge{constructor(Fe,We,dt,xt={}){this.doc=Fe,this.appId=We,this.nonce=dt,this.platformId=xt,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,A.Vy)(xt),this.resetHostNodes()}addStyles(Fe){for(const We of Fe)1===this.changeUsageCount(We,1)&&this.onStyleAdded(We)}removeStyles(Fe){for(const We of Fe)this.changeUsageCount(We,-1)<=0&&this.onStyleRemoved(We)}ngOnDestroy(){const Fe=this.styleNodesInDOM;Fe&&(Fe.forEach(We=>We.remove()),Fe.clear());for(const We of this.getAllStyles())this.onStyleRemoved(We);this.resetHostNodes()}addHost(Fe){this.hostNodes.add(Fe);for(const We of this.getAllStyles())this.addStyleToHost(Fe,We)}removeHost(Fe){this.hostNodes.delete(Fe)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(Fe){for(const We of this.hostNodes)this.addStyleToHost(We,Fe)}onStyleRemoved(Fe){const We=this.styleRef;We.get(Fe)?.elements?.forEach(dt=>dt.remove()),We.delete(Fe)}collectServerRenderedStyles(){const Fe=this.doc.head?.querySelectorAll(`style[${re}="${this.appId}"]`);if(Fe?.length){const We=new Map;return Fe.forEach(dt=>{null!=dt.textContent&&We.set(dt.textContent,dt)}),We}return null}changeUsageCount(Fe,We){const dt=this.styleRef;if(dt.has(Fe)){const xt=dt.get(Fe);return xt.usage+=We,xt.usage}return dt.set(Fe,{usage:We,elements:[]}),We}getStyleElement(Fe,We){const dt=this.styleNodesInDOM,xt=dt?.get(We);if(xt?.parentNode===Fe)return dt.delete(We),xt.removeAttribute(re),xt;{const jt=this.doc.createElement("style");return this.nonce&&jt.setAttribute("nonce",this.nonce),jt.textContent=We,this.platformIsServer&&jt.setAttribute(re,this.appId),Fe.appendChild(jt),jt}}addStyleToHost(Fe,We){const dt=this.getStyleElement(Fe,We),xt=this.styleRef,jt=xt.get(We)?.elements;jt?jt.push(dt):xt.set(We,{elements:[dt],usage:1})}resetHostNodes(){const Fe=this.hostNodes;Fe.clear(),Fe.add(this.doc.head)}static#e=this.\u0275fac=function(We){return new(We||Ge)(m.KVO(A.qQ),m.KVO(m.sZ2),m.KVO(m.BIS,8),m.KVO(m.Agw))};static#t=this.\u0275prov=m.jDH({token:Ge,factory:Ge.\u0275fac})}return Ge})();const B={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},me=/%COMP%/g,D="%COMP%",x=`_nghost-${D}`,p=`_ngcontent-${D}`,T=new m.nKC("",{providedIn:"root",factory:()=>!0});function j(Ge,Ze){return Ze.map(Fe=>Fe.replace(me,Ge))}let F=(()=>{class Ge{constructor(Fe,We,dt,xt,jt,En,Pt,Ct=null){this.eventManager=Fe,this.sharedStylesHost=We,this.appId=dt,this.removeStylesOnCompDestroy=xt,this.doc=jt,this.platformId=En,this.ngZone=Pt,this.nonce=Ct,this.rendererByCompId=new Map,this.platformIsServer=(0,A.Vy)(En),this.defaultRenderer=new ne(Fe,jt,Pt,this.platformIsServer)}createRenderer(Fe,We){if(!Fe||!We)return this.defaultRenderer;this.platformIsServer&&We.encapsulation===m.gXe.ShadowDom&&(We={...We,encapsulation:m.gXe.Emulated});const dt=this.getOrCreateRenderer(Fe,We);return dt instanceof ce?dt.applyToHost(Fe):dt instanceof ie&&dt.applyStyles(),dt}getOrCreateRenderer(Fe,We){const dt=this.rendererByCompId;let xt=dt.get(We.id);if(!xt){const jt=this.doc,En=this.ngZone,Pt=this.eventManager,Ct=this.sharedStylesHost,nn=this.removeStylesOnCompDestroy,an=this.platformIsServer;switch(We.encapsulation){case m.gXe.Emulated:xt=new ce(Pt,Ct,We,this.appId,nn,jt,En,an);break;case m.gXe.ShadowDom:return new I(Pt,Ct,Fe,We,jt,En,this.nonce,an);default:xt=new ie(Pt,Ct,We,nn,jt,En,an)}dt.set(We.id,xt)}return xt}ngOnDestroy(){this.rendererByCompId.clear()}static#e=this.\u0275fac=function(We){return new(We||Ge)(m.KVO(q),m.KVO(O),m.KVO(m.sZ2),m.KVO(T),m.KVO(A.qQ),m.KVO(m.Agw),m.KVO(m.SKi),m.KVO(m.BIS))};static#t=this.\u0275prov=m.jDH({token:Ge,factory:Ge.\u0275fac})}return Ge})();class ne{constructor(Ze,Fe,We,dt){this.eventManager=Ze,this.doc=Fe,this.ngZone=We,this.platformIsServer=dt,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(Ze,Fe){return Fe?this.doc.createElementNS(B[Fe]||Fe,Ze):this.doc.createElement(Ze)}createComment(Ze){return this.doc.createComment(Ze)}createText(Ze){return this.doc.createTextNode(Ze)}appendChild(Ze,Fe){(L(Ze)?Ze.content:Ze).appendChild(Fe)}insertBefore(Ze,Fe,We){Ze&&(L(Ze)?Ze.content:Ze).insertBefore(Fe,We)}removeChild(Ze,Fe){Ze&&Ze.removeChild(Fe)}selectRootElement(Ze,Fe){let We="string"==typeof Ze?this.doc.querySelector(Ze):Ze;if(!We)throw new m.wOt(-5104,!1);return Fe||(We.textContent=""),We}parentNode(Ze){return Ze.parentNode}nextSibling(Ze){return Ze.nextSibling}setAttribute(Ze,Fe,We,dt){if(dt){Fe=dt+":"+Fe;const xt=B[dt];xt?Ze.setAttributeNS(xt,Fe,We):Ze.setAttribute(Fe,We)}else Ze.setAttribute(Fe,We)}removeAttribute(Ze,Fe,We){if(We){const dt=B[We];dt?Ze.removeAttributeNS(dt,Fe):Ze.removeAttribute(`${We}:${Fe}`)}else Ze.removeAttribute(Fe)}addClass(Ze,Fe){Ze.classList.add(Fe)}removeClass(Ze,Fe){Ze.classList.remove(Fe)}setStyle(Ze,Fe,We,dt){dt&(m.czy.DashCase|m.czy.Important)?Ze.style.setProperty(Fe,We,dt&m.czy.Important?"important":""):Ze.style[Fe]=We}removeStyle(Ze,Fe,We){We&m.czy.DashCase?Ze.style.removeProperty(Fe):Ze.style[Fe]=""}setProperty(Ze,Fe,We){null!=Ze&&(Ze[Fe]=We)}setValue(Ze,Fe){Ze.nodeValue=Fe}listen(Ze,Fe,We){if("string"==typeof Ze&&!(Ze=(0,A.QT)().getGlobalEventTarget(this.doc,Ze)))throw new Error(`Unsupported event target ${Ze} for event ${Fe}`);return this.eventManager.addEventListener(Ze,Fe,this.decoratePreventDefault(We))}decoratePreventDefault(Ze){return Fe=>{if("__ngUnwrap__"===Fe)return Ze;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>Ze(Fe)):Ze(Fe))&&Fe.preventDefault()}}}function L(Ge){return"TEMPLATE"===Ge.tagName&&void 0!==Ge.content}class I extends ne{constructor(Ze,Fe,We,dt,xt,jt,En,Pt){super(Ze,xt,jt,Pt),this.sharedStylesHost=Fe,this.hostEl=We,this.shadowRoot=We.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ct=j(dt.id,dt.styles);for(const nn of Ct){const an=document.createElement("style");En&&an.setAttribute("nonce",En),an.textContent=nn,this.shadowRoot.appendChild(an)}}nodeOrShadowRoot(Ze){return Ze===this.hostEl?this.shadowRoot:Ze}appendChild(Ze,Fe){return super.appendChild(this.nodeOrShadowRoot(Ze),Fe)}insertBefore(Ze,Fe,We){return super.insertBefore(this.nodeOrShadowRoot(Ze),Fe,We)}removeChild(Ze,Fe){return super.removeChild(this.nodeOrShadowRoot(Ze),Fe)}parentNode(Ze){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ze)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class ie extends ne{constructor(Ze,Fe,We,dt,xt,jt,En,Pt){super(Ze,xt,jt,En),this.sharedStylesHost=Fe,this.removeStylesOnCompDestroy=dt,this.styles=Pt?j(Pt,We.styles):We.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class ce extends ie{constructor(Ze,Fe,We,dt,xt,jt,En,Pt){const Ct=dt+"-"+We.id;super(Ze,Fe,We,xt,jt,En,Pt,Ct),this.contentAttr=function R(Ge){return p.replace(me,Ge)}(Ct),this.hostAttr=function le(Ge){return x.replace(me,Ge)}(Ct)}applyToHost(Ze){this.applyStyles(),this.setAttribute(Ze,this.hostAttr,"")}createElement(Ze,Fe){const We=super.createElement(Ze,Fe);return super.setAttribute(We,this.contentAttr,""),We}}let Ce=(()=>{class Ge extends ye{constructor(Fe){super(Fe)}supports(Fe){return!0}addEventListener(Fe,We,dt){return Fe.addEventListener(We,dt,!1),()=>this.removeEventListener(Fe,We,dt)}removeEventListener(Fe,We,dt){return Fe.removeEventListener(We,dt)}static#e=this.\u0275fac=function(We){return new(We||Ge)(m.KVO(A.qQ))};static#t=this.\u0275prov=m.jDH({token:Ge,factory:Ge.\u0275fac})}return Ge})();const he=["alt","control","meta","shift"],se={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},z={alt:Ge=>Ge.altKey,control:Ge=>Ge.ctrlKey,meta:Ge=>Ge.metaKey,shift:Ge=>Ge.shiftKey};let N=(()=>{class Ge extends ye{constructor(Fe){super(Fe)}supports(Fe){return null!=Ge.parseEventName(Fe)}addEventListener(Fe,We,dt){const xt=Ge.parseEventName(We),jt=Ge.eventCallback(xt.fullKey,dt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,A.QT)().onAndCancel(Fe,xt.domEventName,jt))}static parseEventName(Fe){const We=Fe.toLowerCase().split("."),dt=We.shift();if(0===We.length||"keydown"!==dt&&"keyup"!==dt)return null;const xt=Ge._normalizeKey(We.pop());let jt="",En=We.indexOf("code");if(En>-1&&(We.splice(En,1),jt="code."),he.forEach(Ct=>{const nn=We.indexOf(Ct);nn>-1&&(We.splice(nn,1),jt+=Ct+".")}),jt+=xt,0!=We.length||0===xt.length)return null;const Pt={};return Pt.domEventName=dt,Pt.fullKey=jt,Pt}static matchEventFullKeyCode(Fe,We){let dt=se[Fe.key]||Fe.key,xt="";return We.indexOf("code.")>-1&&(dt=Fe.code,xt="code."),!(null==dt||!dt)&&(dt=dt.toLowerCase()," "===dt?dt="space":"."===dt&&(dt="dot"),he.forEach(jt=>{jt!==dt&&(0,z[jt])(Fe)&&(xt+=jt+".")}),xt+=dt,xt===We)}static eventCallback(Fe,We,dt){return xt=>{Ge.matchEventFullKeyCode(xt,Fe)&&dt.runGuarded(()=>We(xt))}}static _normalizeKey(Fe){return"esc"===Fe?"escape":Fe}static#e=this.\u0275fac=function(We){return new(We||Ge)(m.KVO(A.qQ))};static#t=this.\u0275prov=m.jDH({token:Ge,factory:Ge.\u0275fac})}return Ge})();const je=(0,m.oH4)(m.fpN,"browser",[{provide:m.Agw,useValue:A.AJ},{provide:m.PLl,useValue:function Ee(){J.makeCurrent()},multi:!0},{provide:A.qQ,useFactory:function Re(){return(0,m.TL$)(document),document},deps:[]}]),ct=new m.nKC(""),ot=[{provide:m.e01,useClass:class k{addToWindow(Ze){m.JZv.getAngularTestability=(We,dt=!0)=>{const xt=Ze.findTestabilityInTree(We,dt);if(null==xt)throw new m.wOt(5103,!1);return xt},m.JZv.getAllAngularTestabilities=()=>Ze.getAllTestabilities(),m.JZv.getAllAngularRootElements=()=>Ze.getAllRootElements(),m.JZv.frameworkStabilizers||(m.JZv.frameworkStabilizers=[]),m.JZv.frameworkStabilizers.push(We=>{const dt=m.JZv.getAllAngularTestabilities();let xt=dt.length;const jt=function(){xt--,0==xt&&We()};dt.forEach(En=>{En.whenStable(jt)})})}findTestabilityInTree(Ze,Fe,We){return null==Fe?null:Ze.getTestability(Fe)??(We?(0,A.QT)().isShadowRoot(Fe)?this.findTestabilityInTree(Ze,Fe.host,!0):this.findTestabilityInTree(Ze,Fe.parentElement,!0):null)}},deps:[]},{provide:m.WHO,useClass:m.NYb,deps:[m.SKi,m.giA,m.e01]},{provide:m.NYb,useClass:m.NYb,deps:[m.SKi,m.giA,m.e01]}],Pe=[{provide:m.H8p,useValue:"root"},{provide:m.zcH,useFactory:function Me(){return new m.zcH},deps:[]},{provide:ue,useClass:Ce,multi:!0,deps:[A.qQ,m.SKi,m.Agw]},{provide:ue,useClass:N,multi:!0,deps:[A.qQ]},F,O,q,{provide:m._9s,useExisting:F},{provide:A.N0,useClass:H,deps:[]},[]];let we=(()=>{class Ge{constructor(Fe){}static withServerTransition(Fe){return{ngModule:Ge,providers:[{provide:m.sZ2,useValue:Fe.appId}]}}static#e=this.\u0275fac=function(We){return new(We||Ge)(m.KVO(ct,12))};static#t=this.\u0275mod=m.$C({type:Ge});static#n=this.\u0275inj=m.G2t({providers:[...Pe,...ot],imports:[A.MD,m.Hbi]})}return Ge})(),Ke=(()=>{class Ge{constructor(Fe){this._doc=Fe}getTitle(){return this._doc.title}setTitle(Fe){this._doc.title=Fe||""}static#e=this.\u0275fac=function(We){return new(We||Ge)(m.KVO(A.qQ))};static#t=this.\u0275prov=m.jDH({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})}return Ge})(),Ft=(()=>{class Ge{static#e=this.\u0275fac=function(We){return new(We||Ge)};static#t=this.\u0275prov=m.jDH({token:Ge,factory:function(We){let dt=null;return dt=We?new(We||Ge):m.KVO(Mt),dt},providedIn:"root"})}return Ge})(),Mt=(()=>{class Ge extends Ft{constructor(Fe){super(),this._doc=Fe}sanitize(Fe,We){if(null==We)return null;switch(Fe){case m.WPN.NONE:return We;case m.WPN.HTML:return(0,m.ZF7)(We,"HTML")?(0,m.rcV)(We):(0,m.h9k)(this._doc,String(We)).toString();case m.WPN.STYLE:return(0,m.ZF7)(We,"Style")?(0,m.rcV)(We):We;case m.WPN.SCRIPT:if((0,m.ZF7)(We,"Script"))return(0,m.rcV)(We);throw new m.wOt(5200,!1);case m.WPN.URL:return(0,m.ZF7)(We,"URL")?(0,m.rcV)(We):(0,m.$MX)(String(We));case m.WPN.RESOURCE_URL:if((0,m.ZF7)(We,"ResourceURL"))return(0,m.rcV)(We);throw new m.wOt(5201,!1);default:throw new m.wOt(5202,!1)}}bypassSecurityTrustHtml(Fe){return(0,m.Kcf)(Fe)}bypassSecurityTrustStyle(Fe){return(0,m.cWb)(Fe)}bypassSecurityTrustScript(Fe){return(0,m.UyX)(Fe)}bypassSecurityTrustUrl(Fe){return(0,m.osQ)(Fe)}bypassSecurityTrustResourceUrl(Fe){return(0,m.e5t)(Fe)}static#e=this.\u0275fac=function(We){return new(We||Ge)(m.KVO(A.qQ))};static#t=this.\u0275prov=m.jDH({token:Ge,factory:Ge.\u0275fac,providedIn:"root"})}return Ge})()},22073:(qe,be,t)=>{"use strict";t.d(be,{J7:()=>he,GP:()=>U,cY:()=>ce,qg:()=>ct,so:()=>Z});var m=/^([0-9]{4})-([0-1][0-9])(?:-([0-3][0-9]))?(?:[T ]?([0-2][0-9])(?::([0-5][0-9]))?(?::([0-5][0-9]))?)?(?:\.[0-9]+)?(Z|(?:\+|\-)[0-9]{2}:?[0-9]{2})?$/;function J(Pe){if(Pe||(Pe=new Date),Pe instanceof Date){const we=new Date(Pe);return we.setMilliseconds(0),we}if(function A(Pe){const we=Pe.match(m);if(we){const w=Number(we[2]);if(w<1||w>12)return!1;if(void 0!==typeof we[3]){const Le=Number(we[3]);if(Le<1||Le>31)return!1}if(void 0!==typeof we[4]){const Le=Number(we[4]);if(Le<0||Le>23)return!1}return!0}return!1}(Pe=Pe.trim()))return new Date(function G(Pe){const we=Pe.match(m);return we&&typeof we[4]>"u"?Pe+="T00:00:00":Pe}(Pe));throw new Error(`Non ISO 8601 compliant date (${Pe}).`)}var Y="1999-03-04T02:05:01.000Z",oe=new Map,X=[["YYYY",{year:"numeric"}],["YY",{year:"2-digit"}],["MMMM",{month:"long"}],["MMM",{month:"short"}],["MM",{month:"2-digit"}],["M",{month:"numeric"}],["DD",{day:"2-digit"}],["D",{day:"numeric"}],["dddd",{weekday:"long"}],["ddd",{weekday:"short"}],["d",{weekday:"narrow"}],["mm",{minute:"2-digit"}],["m",{minute:"numeric"}],["ss",{second:"2-digit"}],["s",{second:"numeric"}],["ZZ",{timeZoneName:"long"}],["Z",{timeZoneName:"short"}]],k=[["HH",{hour:"2-digit"}],["H",{hour:"numeric"}]],H=[["hh",{hour:"2-digit"}],["h",{hour:"numeric"}],["a",{dayPeriod:"narrow"}],["A",{dayPeriod:"narrow"}]],ue={DD:2,HH:2,MM:2,YY:2,YYYY:4,hh:2,mm:2,ss:2};function q(Pe){if(/^[+-]\d{2}:\d{2}/.test(Pe))return 6;if(/^[+-]\d{4}/.test(Pe))return 5;throw new Error("Invalid offset format")}var ye=["MMMM","MMM","dddd","ddd"],re=new Map([...X,...k,...H].map(Pe=>[Pe[0],Pe])),O=new Map,B=["full","long","medium","short"],me=Pe=>String(Pe).padStart(2,"0"),D=Pe=>String(Pe).padStart(2,"0");function x(Pe){return"literal"===Pe.type&&(Pe.value=Pe.value.normalize("NFKC")),Pe}function T(Pe,we="Z"){const w=String(Math.floor(Math.abs(Pe/60))).padStart(2,"0"),Le=String(Math.abs(Pe%60)).padStart(2,"0"),Ke=Pe<0?"-":"+";return"ZZ"===we?`${Ke}${w}${Le}`:`${Ke}${w}:${Le}`}function le(Pe,we="Z"){if(!(Le=>{switch(Le){case"Z":return/^([+-])[0-3][0-9]:[0-6][0-9]$/.test(Pe);case"ZZ":return/^([+-])[0-3][0-9][0-6][0-9]$/.test(Pe)}})(we))throw new Error(`Invalid offset: ${Pe}`);return Pe}function F(Pe){return["numeric","2-digit"].includes(Pe.partValue)}function E(Pe,we){const w=O.get(we);if(w&&w[Pe])return w[Pe];const Le=new Date(Y);Le.setUTCHours("am"===Pe?5:20);const xe=new Intl.DateTimeFormat(we,{timeStyle:"full",timeZone:"UTC",hour12:!0}).formatToParts(Le).map(x).find(ke=>"dayPeriod"===ke.type);return xe?(O.set(we,Object.assign(w||{},{[Pe]:xe.value})),xe.value):Pe}function I(){return Intl.DateTimeFormat().resolvedOptions().timeZone}function ie(Pe,we){const w=new Intl.DateTimeFormat("en-US",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZone:we,hourCycle:"h23"}).formatToParts(Pe).map(x),Le={};return w.forEach(Ke=>{Le[Ke.type]=Ke.value}),new Date(`${Le.year}-${Le.month}-${Le.day}T${Le.hour}:${Le.minute}:${Le.second}Z`)}function ce(Pe,we="UTC",w="device",Le="Z"){var Ke;w="device"===w?null!=(Ke=I())?Ke:"utc":w;const xe=J(Pe),ke=ie(xe,we),Ve=ie(xe,w);return T(Math.round((Ve.getTime()-ke.getTime())/1e3/60),Le)}function he(Pe){const we=J(Pe);return we.setHours(0,0,0),we}function se(Pe,we){if(B.includes(Pe)||"object"==typeof Pe)return function z(Pe,we){const w={timeZone:"UTC"};"string"==typeof Pe?w.dateStyle=Pe:("date"in Pe&&(w.dateStyle=Pe.date),"time"in Pe&&(w.timeStyle=Pe.time));const Le=new Intl.DateTimeFormat(we,w),Ke=Le.formatToParts(new Date(Y)).map(x),ke=Le.formatToParts(new Date("1999-04-05T23:05:01.000Z")).map(x).find(_e=>"hour"===_e.type),Ve=ke&&"23"===ke.value?24:12;return Ke.map(_e=>{const Te=_e.type,Oe=function N(Pe,we,w,Le,Ke){const xe=we.length,ke=!isNaN(Number(we));let Ve;switch(Pe){case"year":return re.get(2===xe?"YY":"YYYY");case"month":return ke?re.get(1===xe?"M":"MM"):"long"===(Ve=ee(w,Pe,we),Ve)?re.get("MMMM"):re.get("MMM");case"day":return re.get(1===xe?"D":"DD");case"weekday":switch(Ve=ee(w,Pe,we),Ve){case"narrow":return re.get("d");case"short":return re.get("ddd");default:return re.get("dddd")}case"hour":return re.get(12===Le?1===xe?"h":"hh":1===xe?"H":"HH");case"minute":return re.get(1===xe?"m":"mm");case"second":return re.get(1===xe?"s":"ss");case"dayPeriod":return/^[A-Z]+$/u.test(we)?re.get("A"):re.get("a");case"literal":return[we,{literal:we},new RegExp("")];case"timeZoneName":return re.get("full"===Ke.timeStyle?"Z":"ZZ");default:return}}(_e.type,_e.value,we,"hour"===_e.type?Ve:void 0,w);if(void 0===Oe)return;const Xe=Oe[1][Te];return Xe?(Oe[2]||(Oe[2]=new RegExp(`${Oe[0]}`,"g")),{option:{[Te]:Xe},partName:Te,partValue:Xe,token:Oe[0],pattern:Oe[2],hour12:12===Ve}):void 0}).filter(_e=>!!_e)}(Pe,we);let w=Pe,Le=0;const Ke=Oe=>{if(Oe[2]||(Oe[2]=new RegExp(`(.)?(${Oe[0]})`,"g")),Oe[2].test(w)){let Xe=0;return w=w.replace(Oe[2],(Ue,it,Tt)=>"\\"===it?Tt:`${"string"==typeof it?it:""}{!${Xe++?Le:Le++}!}`),!!Xe}return!1};function ke(Oe,[Xe,Ue,it]){const Tt=Object.keys(Ue)[0];return{option:Ue,partName:Tt,partValue:Ue[Tt],token:Xe,pattern:it,hour12:Oe}}const _e=function xe(Oe){const Xe=Oe.map(it=>it.partName),Ue=new Set(Xe);if(Xe.length>Ue.size)throw new Error("Cannot reuse format tokens.");return Oe}(X.filter(Ke).concat(k.filter(Ke)).map(ke.bind(null,!1)).concat(H.filter(Ke).map(ke.bind(null,!0)))),Te=/^\{!(\d+)!\}$/;return w.split(/(\{!\d+!\})/).map(Oe=>{const Xe=Oe.match(Te);return Xe?_e[Number(Xe[1])]:{option:{literal:Oe},partName:"literal",partValue:Oe,token:Oe,pattern:new RegExp(""),hour12:!1}}).filter(Oe=>!("literal"===Oe.partName&&""===Oe.partValue))}function ee(Pe,we,w){if(!oe.has(Pe)){const Ke=new Date(Y),xe=[3,8,9,7,6,4,3],ke=["weekday","month","dayPeriod"],Ve=["long","short","narrow"],_e={};for(let Te=0;Te<12;Te++){Ke.setMonth(0+Te),Te in xe&&Ke.setDate(xe[Te]),Ke.setUTCHours(8+Te);for(const Oe of Ve){const Xe=new Intl.DateTimeFormat(Pe,ke.reduce((Ue,it)=>Object.assign(Ue,{[it]:Oe}),{hour12:!0,timeZone:"UTC"})).formatToParts(Ke).map(x);if("long"===Oe||"short"===Oe){const it=new Intl.DateTimeFormat(Pe,{dateStyle:"short"===Oe?"medium":"long",timeZone:"UTC"}).formatToParts(Ke).map(x).find(bt=>"month"===bt.type),Tt=Xe.findIndex(bt=>"month"===bt.type);Tt>-1&&it&&(Xe[Tt]=it)}Xe.forEach(Ue=>{if("literal"===Ue.type)return;const it=Ue.type;_e[it]=Object.assign(_e[it]||{},{[Ue.value]:Oe})})}}oe.set(Pe,_e)}const Le=oe.get(Pe);return Le?Le[we][w]:void 0}function Z(Pe,we="+00:00"){const w="+"===we.slice(0,1);return function L(Pe,we="+00:00"){const w=J(Pe),Le=(()=>{switch(q(we)){case 5:return"ZZ";case 6:return"Z"}})(),Ke=function R(Pe,we){le(Pe,we);const[w,Le,Ke,xe]=Pe.match(/([+-])([0-3][0-9]):?([0-6][0-9])/),ke=60*Number(Ke)+Number(xe);return"+"===Le?ke:-ke}(we,Le);return new Date(w.getTime()+1e3*Ke*60)}(Pe,we.replace(w?"+":"-",w?"-":"+"))}function U(Pe,we="long",w="device",Le=!1,Ke){let xe,ke;return"object"==typeof Pe&&!(Pe instanceof Date)&&({date:Pe,format:we,locale:w,genitive:Le,partFilter:Ke,tz:xe}=Pe),"ISO8601"===we?J(Pe).toISOString():(xe&&(ke=ce(Pe,"utc",xe,function v(Pe){return"string"==typeof Pe?Pe.includes("ZZ")?"ZZ":"Z":"time"in Pe&&"full"===Pe.time?"Z":"ZZ"}(we))),xe??(xe=I()),"utc"!==xe?.toLowerCase()&&(Pe=Z(Pe,ce(Pe,xe,"utc"))),(!w||"device"===w)&&(w=function fe(){return Intl.DateTimeFormat().resolvedOptions().locale}()),function p(Pe,we,w,Le=!1,Ke=null){const xe=function W(Pe,we,w,Le=!1){const Ke=J(Pe),xe=we.filter(Oe=>Oe.hour12),ke=we.filter(Oe=>!Oe.hour12),Ve=[],_e=[];function Te(Oe,Xe=!1){const Ue=`${w}-u-hc-${Xe?"h12":"h23"}`;if(Ve.push(...new Intl.DateTimeFormat(Ue,Oe.reduce((it,Tt)=>"literal"===Tt.partName?it:(Le&&ye.includes(Tt.token)&&_e.push(Tt),Object.assign(it,Tt.option)),{timeZone:"UTC"})).formatToParts(Ke).map(x)),Le&&_e.length)for(const it of _e){let Tt=[];switch(it.token){case"MMMM":Tt=new Intl.DateTimeFormat(Ue,{dateStyle:"long",timeZone:"UTC"}).formatToParts(Ke).map(x);break;case"MMM":Tt=new Intl.DateTimeFormat(Ue,{dateStyle:"medium",timeZone:"UTC"}).formatToParts(Ke).map(x)}const bt=Tt.find(vt=>vt.type===it.partName),yt=Ve.findIndex(vt=>vt.type===it.partName);bt&&yt>-1&&(Ve[yt]=bt)}}return xe.length&&Te(xe,!0),ke.length&&Te(ke),Ve.reduce((Oe,Xe)=>(Oe[Xe.type]=Xe.value,Oe),{})}(Pe,we,w,Le),ke=J(Pe);function Ve({partName:_e,partValue:Te,token:Oe}){if("literal"===_e)return Te;const Xe=xe[_e];if("hour"===_e&&"H"===Oe)return Xe.replace(/^0/,"")||"0";if(["mm","ss","MM"].includes(Oe)&&1===Xe.length)return`0${Xe}`;if("dayPeriod"===_e){const Ue=E(ke.getUTCHours()<12?"am":"pm",w);return"A"===Oe?Ue.toUpperCase():Ue.toLowerCase()}return"timeZoneName"===_e?Ke??T(-1*ke.getTimezoneOffset(),Oe):Xe}return we.map(_e=>({..._e,value:Ve(_e)}))}(Pe,se(we,w).filter(Ke??(()=>!0)),w,Le,ke).map(Ve=>Ve.value).join(""))}function Re(Pe,we="en",w=!1){const Le=(Ke,xe)=>Array(Ke).fill("").map((ke,Ve)=>`${xe(Ve)}`);if("M"===Pe)return Le(12,Ke=>Ke+1);if("MM"===Pe)return Le(12,Ke=>{const xe=Ke+1;return xe<10?`0${xe}`:xe});if(Pe.startsWith("M"))return Re("MM").map(Ke=>U(`2000-${Ke}-05`,Pe,we,w));if(Pe.startsWith("d"))return Le(7,Ke=>`0${Ke+2}`).map(Ke=>U(`2022-10-${Ke}`,Pe,we));if("a"===Pe)return[E("am",we).toLowerCase(),E("pm",we).toLowerCase()];if("A"===Pe)return[E("am",we).toUpperCase(),E("pm",we).toUpperCase()];if(Pe.startsWith("Y")){const Ke=(new Date).getFullYear();return Le(120,xe=>xe+1).reduce((xe,ke)=>("120"!==ke&&xe.push(U(`${Ke+Number(ke)}-06-06`,Pe,we)),xe.unshift(U(Ke-Number(ke)+"-06-06",Pe,we)),xe),[U(`${Ke}-06-06`,Pe,we)])}return Pe.startsWith("D")?Le(31,Ke=>`${"DD"===Pe&&Ke<9?"0":""}${Ke+1}`):Pe.startsWith("H")?Le(24,Ke=>`${"HH"===Pe&&Ke<10?"0":""}${Ke}`):Pe.startsWith("h")?Le(12,Ke=>`${"hh"===Pe&&Ke<9?"0":""}${Ke+1}`):Pe.startsWith("m")||Pe.startsWith("s")?Le(60,Ke=>`${Pe.length>1&&Ke<10?"0":""}${Ke}`):[]}function ct(Pe,we="ISO8601",w="device"){let Ke,Le=()=>!0,xe="backward";if("object"==typeof Pe?({date:Ke,format:we="ISO8601",locale:w="device",dateOverflow:xe="backward",partFilter:Le=(()=>!0)}=Pe):Ke=Pe,!Ke)throw new Error("parse() requires a date string.");const ke=()=>{throw new Error(`Date (${Ke}) does not match format (${function Ee(Pe,we="en",w=!1,Le=(()=>!0)){return se(Pe,we).filter(Le).reduce((Ke,xe)=>Ke+(w&&"literal"===xe.partName?function j(Pe){return X.concat(k).concat(H).sort((we,w)=>we[0].length>w[0].length?1:-1).reduce((we,w)=>we.replace(w[0],`\\${w[0]}`),Pe)}(xe.token):xe.token),"").normalize("NFKC")}(we,w)})`)};if("ISO8601"===we)return J(Ke);const Ve=B.includes(we)||"object"==typeof we,_e=function ne(Pe){let we;for(const w of Pe){if("literal"===w.partName&&!isNaN(parseFloat(w.partValue)))throw new Error(`Numbers in format (${w.partValue}).`);if(we&&"literal"!==we.partName&&"literal"!==w.partName&&!(we.token in ue)&&!(w.token in ue)&&(!F(we)||"a"!==w.token.toLowerCase()))throw new Error(`Illegal adjacent tokens (${we.token}, ${w.token})`);we=w}return Pe}(se(we,w).filter(Le));if(!_e.length)throw new Error("parse() requires a pattern.");let Te;try{Te=function ot(Pe,we){let w=0;const Le=Ve=>[Ve[w++],Ve[w]];let Ke=0;const xe=[];let ke;do{const[Ve,_e]=Le(we);ke=_e;let Te=1;if("literal"===Ve.partName)Te=Ve.partValue.length;else if("timeZoneName"===Ve.partName)Te=q(Pe.substring(Ke));else if(Ve.token in ue)Te=ue[Ve.token];else if(_e)if("literal"===_e.partName){if(Te=Pe.indexOf(_e.partValue,Ke)-Ke,Te<0)throw new Error}else if("dayPeriod"===_e.partName){for(let Oe=1;Oe<=4;Oe++)if(isNaN(Number(Pe.charAt(Ke+Oe)))){Te=Oe;break}}else{const Oe=Pe.substring(Ke).search(/\d/);-1!==Oe&&(Te=Ke+Oe)}else Te=Pe.length;xe.push({...Ve,value:Pe.substring(Ke,Ke+Te)}),Ke+=Te}while(ke);return xe}(Ke,_e)}catch{return ke()}const Oe=new Date,Xe=new Map([["YYYY",Oe.getFullYear()],["MM",Oe.getMonth()+1],["DD",Oe.getDate()],["HH",0],["mm",0],["ss",0]]);let Ue=null,it="";Te.forEach(fn=>{if("literal"===fn.partName)return;if(fn.token===fn.value)return ke();const Wt=Number(fn.value);if(Xe.has(fn.token))Xe.set(fn.token,Wt);else if("YY"===fn.token)Xe.set("YYYY",function Me(Pe){const we=(new Date).getFullYear(),w=we%100,Le=Math.floor(we/100),Ke=Number(Pe);return 100*(Le+(Ke>w+20?-1:0))+Ke}(fn.value));else{const yn=fn.token;if(yn.startsWith("d"))return;if("D"===yn)Xe.set("DD",Wt);else if("H"===yn||yn.startsWith("h"))Xe.set("HH",Wt);else if("M"===yn)Xe.set("MM",Wt);else if("a"===yn||"A"===yn)Ue=fn.value.toLowerCase()===E("am",w).toLowerCase();else if("Z"===yn||"ZZ"===yn)it=le(fn.value,yn);else{const Qt=Re(yn,w,Ve).indexOf(fn.value);if(-1!==Qt)switch(yn){case"MMM":case"MMMM":Xe.set("MM",Qt+1)}}}});let Tt=Xe.get("HH")||0;!1===Ue?(Tt+=12===Tt?0:12,Xe.set("HH",24===Tt?0:Tt)):!0===Ue&&12===Tt&&Xe.set("HH",0),Xe.set("MM",(Xe.get("MM")||1)-1);let[bt,yt,vt,Et,Ft,Mt]=Array.from(Xe.values());const qt=function je(Pe){return function st(Pe){const we=J(Pe);return we.setDate(1),we.setMonth(we.getMonth()+1),we.setDate(0),we}(Pe).getDate()}(new Date(`${D(bt)}-${me(yt+1)}-10`));if(qt<vt&&"throw"===xe)throw new Error(`Invalid date ${D(bt)}-${me(yt+1)}-${me(vt)}`);vt="backward"===xe?Math.min(vt,qt):vt;const Bt=`${D(bt)}-${me(yt+1)}-${me(vt)}T${me(Et)}:${me(Ft)}:${me(Mt)}${it}`,$t=new Date(Bt);return isFinite(+$t)?$t:ke()}},96336:(qe,be,t)=>{"use strict";t.d(be,{D9:()=>ie,Wr:()=>ye,c$:()=>L,h:()=>ce});var m=t(32057),A=t(30054),G=t(52021),J=t(5087),Y=t(51174),oe=t(36649),X=t(19078),k=t(22287),H=t(73973),ue=t(47893),q=t(3177);class ye{}let re=(()=>{class Ce extends ye{getTranslation(se){return(0,A.of)({})}static \u0275fac=(()=>{let se;return function(N){return(se||(se=m.xGo(Ce)))(N||Ce)}})();static \u0275prov=m.jDH({token:Ce,factory:Ce.\u0275fac})}return Ce})();class O{}let B=(()=>{class Ce{handle(se){return se.key}static \u0275fac=function(z){return new(z||Ce)};static \u0275prov=m.jDH({token:Ce,factory:Ce.\u0275fac})}return Ce})();function me(Ce,he){if(Ce===he)return!0;if(null===Ce||null===he)return!1;if(Ce!=Ce&&he!=he)return!0;let N,ee,Z,se=typeof Ce;if(se==typeof he&&"object"==se){if(!Array.isArray(Ce)){if(Array.isArray(he))return!1;for(ee in Z=Object.create(null),Ce){if(!me(Ce[ee],he[ee]))return!1;Z[ee]=!0}for(ee in he)if(!(ee in Z)&&typeof he[ee]<"u")return!1;return!0}if(!Array.isArray(he))return!1;if((N=Ce.length)==he.length){for(ee=0;ee<N;ee++)if(!me(Ce[ee],he[ee]))return!1;return!0}}return!1}function D(Ce){return typeof Ce<"u"&&null!==Ce}function x(Ce){return Ce&&"object"==typeof Ce&&!Array.isArray(Ce)}function p(Ce,he){let se=Object.assign({},Ce);return x(Ce)&&x(he)&&Object.keys(he).forEach(z=>{x(he[z])?z in Ce?se[z]=p(Ce[z],he[z]):Object.assign(se,{[z]:he[z]}):Object.assign(se,{[z]:he[z]})}),se}class W{}let T=(()=>{class Ce extends W{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(se,z){let N;return N="string"==typeof se?this.interpolateString(se,z):"function"==typeof se?this.interpolateFunction(se,z):se,N}getValue(se,z){let N="string"==typeof z?z.split("."):[z];z="";do{z+=N.shift(),!D(se)||!D(se[z])||"object"!=typeof se[z]&&N.length?N.length?z+=".":se=void 0:(se=se[z],z="")}while(N.length);return se}interpolateFunction(se,z){return se(z)}interpolateString(se,z){return z?se.replace(this.templateMatcher,(N,ee)=>{let Z=this.getValue(z,ee);return D(Z)?Z:N}):se}static \u0275fac=(()=>{let se;return function(N){return(se||(se=m.xGo(Ce)))(N||Ce)}})();static \u0275prov=m.jDH({token:Ce,factory:Ce.\u0275fac})}return Ce})();class R{}let le=(()=>{class Ce extends R{compile(se,z){return se}compileTranslations(se,z){return se}static \u0275fac=(()=>{let se;return function(N){return(se||(se=m.xGo(Ce)))(N||Ce)}})();static \u0275prov=m.jDH({token:Ce,factory:Ce.\u0275fac})}return Ce})();class j{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new m.bkB;onLangChange=new m.bkB;onDefaultLangChange=new m.bkB}const F=new m.nKC("USE_STORE"),ne=new m.nKC("USE_DEFAULT_LANG"),v=new m.nKC("DEFAULT_LANGUAGE"),E=new m.nKC("USE_EXTEND");let L=(()=>{class Ce{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;isolate;extend;loadingTranslations;pending=!1;_onTranslationChange=new m.bkB;_onLangChange=new m.bkB;_onDefaultLangChange=new m.bkB;_defaultLang;_currentLang;_langs=[];_translations={};_translationRequests={};get onTranslationChange(){return this.isolate?this._onTranslationChange:this.store.onTranslationChange}get onLangChange(){return this.isolate?this._onLangChange:this.store.onLangChange}get onDefaultLangChange(){return this.isolate?this._onDefaultLangChange:this.store.onDefaultLangChange}get defaultLang(){return this.isolate?this._defaultLang:this.store.defaultLang}set defaultLang(se){this.isolate?this._defaultLang=se:this.store.defaultLang=se}get currentLang(){return this.isolate?this._currentLang:this.store.currentLang}set currentLang(se){this.isolate?this._currentLang=se:this.store.currentLang=se}get langs(){return this.isolate?this._langs:this.store.langs}set langs(se){this.isolate?this._langs=se:this.store.langs=se}get translations(){return this.isolate?this._translations:this.store.translations}set translations(se){this.isolate?this._translations=se:this.store.translations=se}constructor(se,z,N,ee,Z,fe=!0,U=!1,Ee=!1,Me){this.store=se,this.currentLoader=z,this.compiler=N,this.parser=ee,this.missingTranslationHandler=Z,this.useDefaultLang=fe,this.isolate=U,this.extend=Ee,Me&&this.setDefaultLang(Me)}setDefaultLang(se){if(se===this.defaultLang)return;let z=this.retrieveTranslations(se);typeof z<"u"?(null==this.defaultLang&&(this.defaultLang=se),z.pipe((0,X.s)(1)).subscribe(N=>{this.changeDefaultLang(se)})):this.changeDefaultLang(se)}getDefaultLang(){return this.defaultLang}use(se){if(se===this.currentLang)return(0,A.of)(this.translations[se]);let z=this.retrieveTranslations(se);return typeof z<"u"?(this.currentLang||(this.currentLang=se),z.pipe((0,X.s)(1)).subscribe(N=>{this.changeLang(se)}),z):(this.changeLang(se),(0,A.of)(this.translations[se]))}retrieveTranslations(se){let z;return(typeof this.translations[se]>"u"||this.extend)&&(this._translationRequests[se]=this._translationRequests[se]||this.getTranslation(se),z=this._translationRequests[se]),z}getTranslation(se){this.pending=!0;const z=this.currentLoader.getTranslation(se).pipe((0,k.t)(1),(0,X.s)(1));return this.loadingTranslations=z.pipe((0,H.T)(N=>this.compiler.compileTranslations(N,se)),(0,k.t)(1),(0,X.s)(1)),this.loadingTranslations.subscribe({next:N=>{this.translations[se]=this.extend&&this.translations[se]?{...N,...this.translations[se]}:N,this.updateLangs(),this.pending=!1},error:N=>{this.pending=!1}}),z}setTranslation(se,z,N=!1){z=this.compiler.compileTranslations(z,se),this.translations[se]=(N||this.extend)&&this.translations[se]?p(this.translations[se],z):z,this.updateLangs(),this.onTranslationChange.emit({lang:se,translations:this.translations[se]})}getLangs(){return this.langs}addLangs(se){se.forEach(z=>{-1===this.langs.indexOf(z)&&this.langs.push(z)})}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResult(se,z,N){let ee;if(z instanceof Array){let Z={},fe=!1;for(let U of z)Z[U]=this.getParsedResult(se,U,N),(0,G.A)(Z[U])&&(fe=!0);if(fe){const U=z.map(Ee=>(0,G.A)(Z[Ee])?Z[Ee]:(0,A.of)(Z[Ee]));return(0,J.p)(U).pipe((0,H.T)(Ee=>{let Me={};return Ee.forEach((Re,st)=>{Me[z[st]]=Re}),Me}))}return Z}if(se&&(ee=this.parser.interpolate(this.parser.getValue(se,z),N)),typeof ee>"u"&&null!=this.defaultLang&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(ee=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],z),N)),typeof ee>"u"){let Z={key:z,translateService:this};typeof N<"u"&&(Z.interpolateParams=N),ee=this.missingTranslationHandler.handle(Z)}return typeof ee<"u"?ee:z}get(se,z){if(!D(se)||!se.length)throw new Error('Parameter "key" required');if(this.pending)return this.loadingTranslations.pipe((0,ue.H)(N=>(N=this.getParsedResult(N,se,z),(0,G.A)(N)?N:(0,A.of)(N))));{let N=this.getParsedResult(this.translations[this.currentLang],se,z);return(0,G.A)(N)?N:(0,A.of)(N)}}getStreamOnTranslationChange(se,z){if(!D(se)||!se.length)throw new Error('Parameter "key" required');return(0,Y.x)((0,oe.v)(()=>this.get(se,z)),this.onTranslationChange.pipe((0,q.n)(N=>{const ee=this.getParsedResult(N.translations,se,z);return"function"==typeof ee.subscribe?ee:(0,A.of)(ee)})))}stream(se,z){if(!D(se)||!se.length)throw new Error('Parameter "key" required');return(0,Y.x)((0,oe.v)(()=>this.get(se,z)),this.onLangChange.pipe((0,q.n)(N=>{const ee=this.getParsedResult(N.translations,se,z);return(0,G.A)(ee)?ee:(0,A.of)(ee)})))}instant(se,z){if(!D(se)||!se.length)throw new Error('Parameter "key" required');let N=this.getParsedResult(this.translations[this.currentLang],se,z);if((0,G.A)(N)){if(se instanceof Array){let ee={};return se.forEach((Z,fe)=>{ee[se[fe]]=se[fe]}),ee}return se}return N}set(se,z,N=this.currentLang){this.translations[N][se]=this.compiler.compile(z,N),this.updateLangs(),this.onTranslationChange.emit({lang:N,translations:this.translations[N]})}changeLang(se){this.currentLang=se,this.onLangChange.emit({lang:se,translations:this.translations[se]}),null==this.defaultLang&&this.changeDefaultLang(se)}changeDefaultLang(se){this.defaultLang=se,this.onDefaultLangChange.emit({lang:se,translations:this.translations[se]})}reloadLang(se){return this.resetLang(se),this.getTranslation(se)}resetLang(se){this._translationRequests[se]=void 0,this.translations[se]=void 0}getBrowserLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let se=window.navigator.languages?window.navigator.languages[0]:null;return se=se||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,typeof se>"u"?void 0:(-1!==se.indexOf("-")&&(se=se.split("-")[0]),-1!==se.indexOf("_")&&(se=se.split("_")[0]),se)}getBrowserCultureLang(){if(typeof window>"u"||typeof window.navigator>"u")return;let se=window.navigator.languages?window.navigator.languages[0]:null;return se=se||window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage,se}static \u0275fac=function(z){return new(z||Ce)(m.KVO(j),m.KVO(ye),m.KVO(R),m.KVO(W),m.KVO(O),m.KVO(ne),m.KVO(F),m.KVO(E),m.KVO(v))};static \u0275prov=m.jDH({token:Ce,factory:Ce.\u0275fac})}return Ce})(),ie=(()=>{class Ce{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(se,z){this.translate=se,this._ref=z}updateValue(se,z,N){let ee=Z=>{this.value=void 0!==Z?Z:se,this.lastKey=se,this._ref.markForCheck()};if(N){let Z=this.translate.getParsedResult(N,se,z);(0,G.A)(Z.subscribe)?Z.subscribe(ee):ee(Z)}this.translate.get(se,z).subscribe(ee)}transform(se,...z){if(!se||!se.length)return se;if(me(se,this.lastKey)&&me(z,this.lastParams))return this.value;let N;if(D(z[0])&&z.length)if("string"==typeof z[0]&&z[0].length){let ee=z[0].replace(/(\')?([a-zA-Z0-9_]+)(\')?(\s)?:/g,'"$2":').replace(/:(\s)?(\')(.*?)(\')/g,':"$3"');try{N=JSON.parse(ee)}catch{throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${z[0]}`)}}else"object"==typeof z[0]&&!Array.isArray(z[0])&&(N=z[0]);return this.lastKey=se,this.lastParams=z,this.updateValue(se,N),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(ee=>{this.lastKey&&ee.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(se,N,ee.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(ee=>{this.lastKey&&(this.lastKey=null,this.updateValue(se,N,ee.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(se,N))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(z){return new(z||Ce)(m.rXU(L,16),m.rXU(m.gRc,16))};static \u0275pipe=m.EJ8({name:"translate",type:Ce,pure:!1});static \u0275prov=m.jDH({token:Ce,factory:Ce.\u0275fac})}return Ce})(),ce=(()=>{class Ce{static forRoot(se={}){return{ngModule:Ce,providers:[se.loader||{provide:ye,useClass:re},se.compiler||{provide:R,useClass:le},se.parser||{provide:W,useClass:T},se.missingTranslationHandler||{provide:O,useClass:B},j,{provide:F,useValue:se.isolate},{provide:ne,useValue:se.useDefaultLang},{provide:E,useValue:se.extend},{provide:v,useValue:se.defaultLanguage},L]}}static forChild(se={}){return{ngModule:Ce,providers:[se.loader||{provide:ye,useClass:re},se.compiler||{provide:R,useClass:le},se.parser||{provide:W,useClass:T},se.missingTranslationHandler||{provide:O,useClass:B},{provide:F,useValue:se.isolate},{provide:ne,useValue:se.useDefaultLang},{provide:E,useValue:se.extend},{provide:v,useValue:se.defaultLanguage},L]}}static \u0275fac=function(z){return new(z||Ce)};static \u0275mod=m.$C({type:Ce});static \u0275inj=m.G2t({})}return Ce})()},8108:(qe,be,t)=>{"use strict";t.d(be,{j:()=>A});var m=Object.prototype.hasOwnProperty;function A(G,J){var Y,oe;if(G===J)return!0;if(G&&J&&(Y=G.constructor)===J.constructor){if(Y===Date)return G.getTime()===J.getTime();if(Y===RegExp)return G.toString()===J.toString();if(Y===Array){if((oe=G.length)===J.length)for(;oe--&&A(G[oe],J[oe]););return-1===oe}if(!Y||"object"==typeof G){for(Y in oe=0,G)if(m.call(G,Y)&&++oe&&!m.call(J,Y)||!(Y in J)||!A(G[Y],J[Y]))return!1;return Object.keys(J).length===oe}}return G!=G&&J!=J}},46183:(qe,be,t)=>{"use strict";t.d(be,{i9:()=>he,Qs:()=>N});var m=t(10467),A=t(32057);const G={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"],["table"]]},J=new A.nKC("config",{providedIn:"root",factory:()=>({modules:G})});var X=t(82558),k=t(22726),H=t(94366),ue=t(79358);function q(ee){ee||((0,A.Af3)(q),ee=(0,A.WQX)(A.abz));const Z=new H.c(fe=>ee.onDestroy(fe.next.bind(fe)));return fe=>fe.pipe((0,ue.Q)(Z))}var D=t(36649),x=t(52021),p=t(77224),W=t(40740),T=t(11345),R=t(22287),le=t(53778),j=t(47771),F=t(11798);const ne=[[["","above-quill-editor-toolbar",""]],[["","quill-editor-toolbar",""]],[["","below-quill-editor-toolbar",""]]],v=["[above-quill-editor-toolbar]","[quill-editor-toolbar]","[below-quill-editor-toolbar]"];function E(ee,Z){1&ee&&A.nrm(0,"div",0)}function L(ee,Z){1&ee&&A.nrm(0,"div",0)}const I=(ee,Z)=>ee||Z||"html";let ce=(()=>{class ee{constructor(fe,U){var Ee=this;this.config=U,this.quill$=(0,D.v)((0,m.A)(function*(){if(!Ee.Quill){const Me=Ee.document.addEventListener;Ee.document.addEventListener=Ee.document.__zone_symbol__addEventListener||Ee.document.addEventListener;const Re=yield t.e(1206).then(t.bind(t,88825));Ee.document.addEventListener=Me,Ee.Quill=Re.default?.default??Re.default??Re}return Ee.config.customOptions?.forEach(Me=>{const Re=Ee.Quill.import(Me.import);Re.whitelist=Me.whitelist,Ee.Quill.register(Re,!0,Ee.config.suppressGlobalRegisterWarning)}),yield Ee.registerCustomModules(Ee.Quill,Ee.config.customModules,Ee.config.suppressGlobalRegisterWarning)})).pipe((0,R.t)({bufferSize:1,refCount:!0})),this.document=fe.get(X.qQ),this.config||(this.config={modules:G})}getQuill(){return this.quill$}registerCustomModules(fe,U,Ee){return(0,m.A)(function*(){if(Array.isArray(U))for(let{implementation:Me,path:Re}of U)(0,x.A)(Me)&&(Me=yield(0,p._)(Me)),fe.register(Re,Me,Ee);return fe})()}static#e=this.\u0275fac=function(U){return new(U||ee)(A.KVO(A.zZn),A.KVO(J,8))};static#t=this.\u0275prov=A.jDH({token:ee,factory:ee.\u0275fac,providedIn:"root"})}return ee})(),Ce=(()=>{class ee{constructor(){this.format=(0,A.hFB)(void 0),this.theme=(0,A.hFB)(void 0),this.modules=(0,A.hFB)(void 0),this.debug=(0,A.hFB)(!1),this.readOnly=(0,A.hFB)(!1),this.placeholder=(0,A.hFB)(void 0),this.maxLength=(0,A.hFB)(void 0),this.minLength=(0,A.hFB)(void 0),this.required=(0,A.hFB)(!1),this.formats=(0,A.hFB)(void 0),this.customToolbarPosition=(0,A.hFB)("top"),this.sanitize=(0,A.hFB)(void 0),this.beforeRender=(0,A.hFB)(void 0),this.styles=(0,A.hFB)(null),this.registry=(0,A.hFB)(void 0),this.bounds=(0,A.hFB)(void 0),this.customOptions=(0,A.hFB)([]),this.customModules=(0,A.hFB)([]),this.trackChanges=(0,A.hFB)(void 0),this.classes=(0,A.hFB)(void 0),this.trimOnValidation=(0,A.hFB)(!1),this.linkPlaceholder=(0,A.hFB)(void 0),this.compareValues=(0,A.hFB)(!1),this.filterNull=(0,A.hFB)(!1),this.debounceTime=(0,A.hFB)(void 0),this.defaultEmptyValue=(0,A.hFB)(null),this.onEditorCreated=new A.bkB,this.onEditorChanged=new A.bkB,this.onContentChanged=new A.bkB,this.onSelectionChanged=new A.bkB,this.onFocus=new A.bkB,this.onBlur=new A.bkB,this.onNativeFocus=new A.bkB,this.onNativeBlur=new A.bkB,this.disabled=!1,this.toolbarPosition=(0,A.vPA)("top"),this.subscription=null,this.quillSubscription=null,this.elementRef=(0,A.WQX)(A.aKT),this.document=(0,A.WQX)(X.qQ),this.cd=(0,A.WQX)(A.gRc),this.domSanitizer=(0,A.WQX)(k.up),this.platformId=(0,A.WQX)(A.Agw),this.renderer=(0,A.WQX)(A.sFG),this.zone=(0,A.WQX)(A.SKi),this.service=(0,A.WQX)(ce),this.destroyRef=(0,A.WQX)(A.abz),this.valueGetter=(0,A.hFB)(fe=>{let U=fe.getSemanticHTML();this.isEmptyValue(U)&&(U=this.defaultEmptyValue());let Ee=U;const Me=I(this.format(),this.service.config.format);if("text"===Me)Ee=fe.getText();else if("object"===Me)Ee=fe.getContents();else if("json"===Me)try{Ee=JSON.stringify(fe.getContents())}catch{Ee=fe.getText()}return Ee}),this.valueSetter=(0,A.hFB)((fe,U)=>{const Ee=I(this.format(),this.service.config.format);if("html"===Ee)return([!0,!1].includes(this.sanitize())?this.sanitize():this.service.config.sanitize||!1)&&(U=this.domSanitizer.sanitize(A.WPN.HTML,U)),fe.clipboard.convert({html:U});if("json"===Ee)try{return JSON.parse(U)}catch{return[{insert:U}]}return U}),this.selectionChangeHandler=(fe,U,Ee)=>{const Me=this.trackChanges()||this.service.config.trackChanges,Re=!fe&&!!this.onModelTouched&&("user"===Ee||Me&&"all"===Me);!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!Re||this.zone.run(()=>{null===fe?this.onBlur.emit({editor:this.quillEditor,source:Ee}):null===U&&this.onFocus.emit({editor:this.quillEditor,source:Ee}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:U,range:fe,source:Ee}),Re&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(fe,U,Ee)=>{const Me=this.quillEditor.getText(),Re=this.quillEditor.getContents();let st=this.quillEditor.getSemanticHTML();this.isEmptyValue(st)&&(st=this.defaultEmptyValue());const je=this.trackChanges()||this.service.config.trackChanges,ct=("user"===Ee||je&&"all"===je)&&!!this.onModelChange;!this.onContentChanged.observed&&!ct||this.zone.run(()=>{if(ct){const ot=this.valueGetter();this.onModelChange(ot(this.quillEditor))}this.onContentChanged.emit({content:Re,delta:fe,editor:this.quillEditor,html:st,oldDelta:U,source:Ee,text:Me}),this.cd.markForCheck()})},this.editorChangeHandler=(fe,U,Ee,Me)=>{if(this.onEditorChanged.observed)if("text-change"===fe){const Re=this.quillEditor.getText(),st=this.quillEditor.getContents();let je=this.quillEditor.getSemanticHTML();this.isEmptyValue(je)&&(je=this.defaultEmptyValue()),this.zone.run(()=>{this.onEditorChanged.emit({content:st,delta:U,editor:this.quillEditor,event:fe,html:je,oldDelta:Ee,source:Me,text:Re}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:fe,oldRange:Ee,range:U,source:Me}),this.cd.markForCheck()})}}static normalizeClassNames(fe){return fe.trim().split(" ").reduce((Ee,Me)=>{const Re=Me.trim();return Re&&Ee.push(Re),Ee},[])}ngOnInit(){this.toolbarPosition.set(this.customToolbarPosition())}ngAfterViewInit(){(0,X.Vy)(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe((0,le.Z)(fe=>{const U=[this.service.registerCustomModules(fe,this.customModules())],Ee=this.beforeRender()??this.service.config.beforeRender;return Ee&&U.push(Ee()),Promise.all(U).then(()=>fe)})).subscribe(fe=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const U=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),Ee=Object.assign({},this.modules()||this.service.config.modules);U?Ee.toolbar=U:void 0===Ee.toolbar&&(Ee.toolbar=G.toolbar);let Me=void 0!==this.placeholder()?this.placeholder():this.service.config.placeholder;void 0===Me&&(Me="Insert text here ...");const Re=this.styles();Re&&Object.keys(Re).forEach(Pe=>{this.renderer.setStyle(this.editorElem,Pe,Re[Pe])}),this.classes()&&this.addClasses(this.classes()),this.customOptions().forEach(Pe=>{const we=fe.import(Pe.import);we.whitelist=Pe.whitelist,fe.register(we,!0)});let st=this.bounds()&&"self"===this.bounds()?this.editorElem:this.bounds();st||(st=this.service.config.bounds?this.service.config.bounds:this.document.body);let je=this.debug();!je&&!1!==je&&this.service.config.debug&&(je=this.service.config.debug);let ct=this.readOnly();!ct&&!1!==this.readOnly()&&(ct=void 0!==this.service.config.readOnly&&this.service.config.readOnly);let ot=this.formats();if(!ot&&void 0===ot&&(ot=this.service.config.formats?[...this.service.config.formats]:null===this.service.config.formats?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new fe(this.editorElem,{bounds:st,debug:je,formats:ot,modules:Ee,placeholder:Me,readOnly:ct,registry:this.registry(),theme:this.theme()||(this.service.config.theme?this.service.config.theme:"snow")}),this.onNativeBlur.observed&&(this.quillEditor.scroll.domNode.addEventListener("blur",()=>this.onNativeBlur.next({editor:this.quillEditor,source:"dom"})),this.quillEditor.getModule("toolbar").container?.addEventListener("mousedown",we=>we.preventDefault())),this.onNativeFocus.observed&&this.quillEditor.scroll.domNode.addEventListener("focus",()=>this.onNativeFocus.next({editor:this.quillEditor,source:"dom"})),this.linkPlaceholder()){const we=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");we?.dataset&&(we.dataset.link=this.linkPlaceholder())}}),this.content){if("text"===I(this.format(),this.service.config.format))this.quillEditor.setText(this.content,"silent");else{const Le=this.valueSetter()(this.quillEditor,this.content);this.quillEditor.setContents(Le,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),(this.onEditorCreated.observed||this.onValidatorChanged)&&new H.c(ee=>{const Z=requestAnimationFrame(()=>{ee.next(),ee.complete()});return()=>cancelAnimationFrame(Z)}).pipe(q(this.destroyRef)).subscribe(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor)})}))}ngOnDestroy(){this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null}ngOnChanges(fe){if(this.quillEditor){if(fe.readOnly&&this.quillEditor.enable(!fe.readOnly.currentValue),fe.placeholder&&(this.quillEditor.root.dataset.placeholder=fe.placeholder.currentValue),fe.styles){const U=fe.styles.currentValue,Ee=fe.styles.previousValue;Ee&&Object.keys(Ee).forEach(Me=>{this.renderer.removeStyle(this.editorElem,Me)}),U&&Object.keys(U).forEach(Me=>{this.renderer.setStyle(this.editorElem,Me,this.styles()[Me])})}if(fe.classes){const U=fe.classes.currentValue,Ee=fe.classes.previousValue;Ee&&this.removeClasses(Ee),U&&this.addClasses(U)}fe.debounceTime&&this.addQuillEventListeners()}}addClasses(fe){ee.normalizeClassNames(fe).forEach(U=>{this.renderer.addClass(this.editorElem,U)})}removeClasses(fe){ee.normalizeClassNames(fe).forEach(U=>{this.renderer.removeClass(this.editorElem,U)})}writeValue(fe){if(this.filterNull()&&null===fe||(this.content=fe,!this.quillEditor))return;const U=I(this.format(),this.service.config.format),Me=this.valueSetter()(this.quillEditor,fe);if(this.compareValues()){const Re=this.quillEditor.getContents();if(JSON.stringify(Re)===JSON.stringify(Me))return}fe?"text"===U?this.quillEditor.setText(fe):this.quillEditor.setContents(Me):this.quillEditor.setText("")}setDisabledState(fe=this.disabled){this.disabled=fe,this.quillEditor&&(fe?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly()||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(fe){this.onModelChange=fe}registerOnTouched(fe){this.onModelTouched=fe}registerOnValidatorChange(fe){this.onValidatorChanged=fe}validate(){if(!this.quillEditor)return null;const fe={};let U=!0;const Ee=this.quillEditor.getText(),Me=this.trimOnValidation()?Ee.trim().length:1===Ee.length&&0===Ee.trim().length?0:Ee.length-1,Re=this.quillEditor.getContents().ops,st=!!Re&&1===Re.length&&["\n",""].includes(Re[0].insert?.toString());return this.minLength()&&Me&&Me<this.minLength()&&(fe.minLengthError={given:Me,minLength:this.minLength()},U=!1),this.maxLength()&&Me>this.maxLength()&&(fe.maxLengthError={given:Me,maxLength:this.maxLength()},U=!1),this.required()&&!Me&&st&&(fe.requiredError={empty:!0},U=!1),U?null:fe}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new W.yU,this.subscription.add((0,T.R)(this.quillEditor,"selection-change").subscribe(([Ee,Me,Re])=>{this.selectionChangeHandler(Ee,Me,Re)}));let fe=(0,T.R)(this.quillEditor,"text-change"),U=(0,T.R)(this.quillEditor,"editor-change");"number"==typeof this.debounceTime()&&(fe=fe.pipe((0,j.B)(this.debounceTime())),U=U.pipe((0,j.B)(this.debounceTime()))),this.subscription.add(fe.subscribe(([Ee,Me,Re])=>{this.textChangeHandler(Ee,Me,Re)})),this.subscription.add(U.subscribe(([Ee,Me,Re,st])=>{this.editorChangeHandler(Ee,Me,Re,st)}))})}dispose(){null!==this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}isEmptyValue(fe){return"<p></p>"===fe||"<div></div>"===fe||"<p><br></p>"===fe||"<div><br></div>"===fe}static#e=this.\u0275fac=function(U){return new(U||ee)};static#t=this.\u0275dir=A.FsC({type:ee,inputs:{format:[A.Mj6.SignalBased,"format"],theme:[A.Mj6.SignalBased,"theme"],modules:[A.Mj6.SignalBased,"modules"],debug:[A.Mj6.SignalBased,"debug"],readOnly:[A.Mj6.SignalBased,"readOnly"],placeholder:[A.Mj6.SignalBased,"placeholder"],maxLength:[A.Mj6.SignalBased,"maxLength"],minLength:[A.Mj6.SignalBased,"minLength"],required:[A.Mj6.SignalBased,"required"],formats:[A.Mj6.SignalBased,"formats"],customToolbarPosition:[A.Mj6.SignalBased,"customToolbarPosition"],sanitize:[A.Mj6.SignalBased,"sanitize"],beforeRender:[A.Mj6.SignalBased,"beforeRender"],styles:[A.Mj6.SignalBased,"styles"],registry:[A.Mj6.SignalBased,"registry"],bounds:[A.Mj6.SignalBased,"bounds"],customOptions:[A.Mj6.SignalBased,"customOptions"],customModules:[A.Mj6.SignalBased,"customModules"],trackChanges:[A.Mj6.SignalBased,"trackChanges"],classes:[A.Mj6.SignalBased,"classes"],trimOnValidation:[A.Mj6.SignalBased,"trimOnValidation"],linkPlaceholder:[A.Mj6.SignalBased,"linkPlaceholder"],compareValues:[A.Mj6.SignalBased,"compareValues"],filterNull:[A.Mj6.SignalBased,"filterNull"],debounceTime:[A.Mj6.SignalBased,"debounceTime"],defaultEmptyValue:[A.Mj6.SignalBased,"defaultEmptyValue"],valueGetter:[A.Mj6.SignalBased,"valueGetter"],valueSetter:[A.Mj6.SignalBased,"valueSetter"]},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur",onNativeFocus:"onNativeFocus",onNativeBlur:"onNativeBlur"},features:[A.OA$]})}return ee})(),he=(()=>{class ee extends Ce{static#e=this.\u0275fac=(()=>{let fe;return function(Ee){return(fe||(fe=A.xGo(ee)))(Ee||ee)}})();static#t=this.\u0275cmp=A.VBU({type:ee,selectors:[["quill-editor"]],standalone:!0,features:[A.Jv_([{multi:!0,provide:F.kq,useExisting:(0,A.Rfq)(()=>ee)},{multi:!0,provide:F.cz,useExisting:(0,A.Rfq)(()=>ee)}]),A.Vt3,A.aNF],ngContentSelectors:v,decls:5,vars:2,consts:[["quill-editor-element",""]],template:function(U,Ee){1&U&&(A.NAR(ne),A.DNE(0,E,1,0,"div",0),A.SdG(1),A.SdG(2,1),A.SdG(3,2),A.DNE(4,L,1,0,"div",0)),2&U&&(A.vxM(0,"top"!==Ee.toolbarPosition()?0:-1),A.R7$(4),A.vxM(4,"top"===Ee.toolbarPosition()?4:-1))},styles:["[_nghost-%COMP%]{display:inline-block}"]})}return ee})(),N=(()=>{class ee{static forRoot(fe){return{ngModule:ee,providers:[{provide:J,useValue:fe}]}}static#e=this.\u0275fac=function(U){return new(U||ee)};static#t=this.\u0275mod=A.$C({type:ee});static#n=this.\u0275inj=A.G2t({})}return ee})()},54016:(qe,be,t)=>{"use strict";t.d(be,{AQ:()=>R,C6:()=>A,Cg:()=>Y,Cl:()=>G,Ju:()=>me,N3:()=>T,Sn:()=>q,YH:()=>re,gz:()=>x,sH:()=>ye,xN:()=>j,zs:()=>D});var m=function(z,N){return(m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ee,Z){ee.__proto__=Z}||function(ee,Z){for(var fe in Z)Object.prototype.hasOwnProperty.call(Z,fe)&&(ee[fe]=Z[fe])})(z,N)};function A(z,N){if("function"!=typeof N&&null!==N)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");function ee(){this.constructor=z}m(z,N),z.prototype=null===N?Object.create(N):(ee.prototype=N.prototype,new ee)}var G=function(){return G=Object.assign||function(N){for(var ee,Z=1,fe=arguments.length;Z<fe;Z++)for(var U in ee=arguments[Z])Object.prototype.hasOwnProperty.call(ee,U)&&(N[U]=ee[U]);return N},G.apply(this,arguments)};function Y(z,N,ee,Z){var Ee,fe=arguments.length,U=fe<3?N:null===Z?Z=Object.getOwnPropertyDescriptor(N,ee):Z;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)U=Reflect.decorate(z,N,ee,Z);else for(var Me=z.length-1;Me>=0;Me--)(Ee=z[Me])&&(U=(fe<3?Ee(U):fe>3?Ee(N,ee,U):Ee(N,ee))||U);return fe>3&&U&&Object.defineProperty(N,ee,U),U}function q(z,N){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(z,N)}function ye(z,N,ee,Z){return new(ee||(ee=Promise))(function(U,Ee){function Me(je){try{st(Z.next(je))}catch(ct){Ee(ct)}}function Re(je){try{st(Z.throw(je))}catch(ct){Ee(ct)}}function st(je){je.done?U(je.value):function fe(U){return U instanceof ee?U:new ee(function(Ee){Ee(U)})}(je.value).then(Me,Re)}st((Z=Z.apply(z,N||[])).next())})}function re(z,N){var Z,fe,U,Ee,ee={label:0,sent:function(){if(1&U[0])throw U[1];return U[1]},trys:[],ops:[]};return Ee={next:Me(0),throw:Me(1),return:Me(2)},"function"==typeof Symbol&&(Ee[Symbol.iterator]=function(){return this}),Ee;function Me(st){return function(je){return function Re(st){if(Z)throw new TypeError("Generator is already executing.");for(;Ee&&(Ee=0,st[0]&&(ee=0)),ee;)try{if(Z=1,fe&&(U=2&st[0]?fe.return:st[0]?fe.throw||((U=fe.return)&&U.call(fe),0):fe.next)&&!(U=U.call(fe,st[1])).done)return U;switch(fe=0,U&&(st=[2&st[0],U.value]),st[0]){case 0:case 1:U=st;break;case 4:return ee.label++,{value:st[1],done:!1};case 5:ee.label++,fe=st[1],st=[0];continue;case 7:st=ee.ops.pop(),ee.trys.pop();continue;default:if(!(U=(U=ee.trys).length>0&&U[U.length-1])&&(6===st[0]||2===st[0])){ee=0;continue}if(3===st[0]&&(!U||st[1]>U[0]&&st[1]<U[3])){ee.label=st[1];break}if(6===st[0]&&ee.label<U[1]){ee.label=U[1],U=st;break}if(U&&ee.label<U[2]){ee.label=U[2],ee.ops.push(st);break}U[2]&&ee.ops.pop(),ee.trys.pop();continue}st=N.call(z,ee)}catch(je){st=[6,je],fe=0}finally{Z=U=0}if(5&st[0])throw st[1];return{value:st[0]?st[1]:void 0,done:!0}}([st,je])}}}function me(z){var N="function"==typeof Symbol&&Symbol.iterator,ee=N&&z[N],Z=0;if(ee)return ee.call(z);if(z&&"number"==typeof z.length)return{next:function(){return z&&Z>=z.length&&(z=void 0),{value:z&&z[Z++],done:!z}}};throw new TypeError(N?"Object is not iterable.":"Symbol.iterator is not defined.")}function D(z,N){var ee="function"==typeof Symbol&&z[Symbol.iterator];if(!ee)return z;var fe,Ee,Z=ee.call(z),U=[];try{for(;(void 0===N||N-- >0)&&!(fe=Z.next()).done;)U.push(fe.value)}catch(Me){Ee={error:Me}}finally{try{fe&&!fe.done&&(ee=Z.return)&&ee.call(Z)}finally{if(Ee)throw Ee.error}}return U}function x(){for(var z=[],N=0;N<arguments.length;N++)z=z.concat(D(arguments[N]));return z}function T(z){return this instanceof T?(this.v=z,this):new T(z)}function R(z,N,ee){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,Z=ee.apply(z,N||[]),U=[];return fe={},Me("next"),Me("throw"),Me("return",function Ee(Pe){return function(we){return Promise.resolve(we).then(Pe,ct)}}),fe[Symbol.asyncIterator]=function(){return this},fe;function Me(Pe,we){Z[Pe]&&(fe[Pe]=function(w){return new Promise(function(Le,Ke){U.push([Pe,w,Le,Ke])>1||Re(Pe,w)})},we&&(fe[Pe]=we(fe[Pe])))}function Re(Pe,we){try{!function st(Pe){Pe.value instanceof T?Promise.resolve(Pe.value.v).then(je,ct):ot(U[0][2],Pe)}(Z[Pe](we))}catch(w){ot(U[0][3],w)}}function je(Pe){Re("next",Pe)}function ct(Pe){Re("throw",Pe)}function ot(Pe,we){Pe(we),U.shift(),U.length&&Re(U[0][0],U[0][1])}}function j(z){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ee,N=z[Symbol.asyncIterator];return N?N.call(z):(z=me(z),ee={},Z("next"),Z("throw"),Z("return"),ee[Symbol.asyncIterator]=function(){return this},ee);function Z(U){ee[U]=z[U]&&function(Ee){return new Promise(function(Me,Re){!function fe(U,Ee,Me,Re){Promise.resolve(Re).then(function(st){U({value:st,done:Me})},Ee)}(Me,Re,(Ee=z[U](Ee)).done,Ee.value)})}}}"function"==typeof SuppressedError&&SuppressedError}}]);