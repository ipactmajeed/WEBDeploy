"use strict";(self.webpackChunkRevenUWebApp=self.webpackChunkRevenUWebApp||[]).push([[2198],{89817:(ge,y,r)=>{r.r(y),r.d(y,{RibbonExtRental:()=>fe});var I=r(10467),T=r(62846),D=r(86739),d=r(8787),S=r(32647),w=r(49710),v=r(23823),u=r(18569),k=r(98669),P=r(24028),b=r(92701),B=r(89747),G=r(83240),O=r(40044),L=r(81669);class E extends B.d{get ClearSelectedNodes(){return this._ClearSelectedNodes}set ClearSelectedNodes(s){this._ClearSelectedNodes=s,this.tree.length>0&&(this.tree[0].ClearAllSelectedNodes=!this.tree[0].ClearAllSelectedNodes)}CaseIncomeDialogViewModel_1(s,t){this.parent=s,this.Title="Book Income",this.Property.Label="Property",this.FromDate.Label="Month",this.parent.FromDate&&(this.FromDate.Date=this.parent.FromDate),this.FromDate.CustomFormat="MMM/yyyy",this.Property.CCID=92,this.Property.TypeID=2,this.ToDate.Visible=!1,this.Status.Visible=!1,this.Property.SelectedValue=this.parent.Property,this.DateRanges=new b.y$,this.DateRanges.Visible=!1,this.TreeVisibility=!1}constructor(s,t){super(),this.TreeVisibility=!1,this.statusID=null,this.ID=0,this.clickCheck=0,this.Property=new k.y$(0),this.FromDate=new P.Lc(0),this.ToDate=new P.Lc(0),this.Status=new b.y$(0),this.Width="350",this.IsBulkNotification=!1,this.postparent=s,this.Title=s.DisplayName,this.Property.Label="Property",this.FromDate.Label="From",this.ToDate.Label="To",this.Status.Label="Status",this.Status.Items.push(b._p.ComboBoxItems_2(212!=s.FAID?"Pending":"Active","1")),this.Status.Items.push(b._p.ComboBoxItems_2(212!=s.FAID?"Posted":"Terminated","2")),this.Status.SelectedValue="1",s.FromDate&&(this.FromDate.Date=s.FromDate),s.ToDate&&(this.ToDate.Date=s.ToDate),d.J0.IsEmpty(this.postparent.stat)||(this.Status.SelectedValue=this.postparent.stat),212==s.FAID&&(this.ToDate.Visible=!1,this.FromDate.Label="Ason"),this.Property.CCID=92,this.Property.TypeID=2,this.Width="350",this.TreeVisibility=!0,this.Property.SelectedValue=s.Property,this.LoadDates()}CaseIncomeDialogViewModel_2(s,t,o){this.IsBulkNotification=o,this.postparent=s,this.Title=s.DisplayName,this.Property.Label="Property",this.FromDate.Label="From",this.ToDate.Label="To",this.Status.Label="Status",this.Status.Items.push(b._p.ComboBoxItems_2("Pending","1")),this.Status.Items.push(b._p.ComboBoxItems_2("Posted","2")),this.Status.SelectedValue="1",s.FromDate&&(this.FromDate.Date=s.FromDate.Value),s.ToDate&&(this.ToDate.Date=s.ToDate.Value),d.J0.IsEmpty(this.postparent.stat)||(this.Status.SelectedValue=this.postparent.stat),this.Property.CCID=92,this.Property.TypeID=2,this.Property.Visible=!1,this.Width="350",this.Property.SelectedValue=s.Property,this.LoadDates()}LoadDates(){if(this.DateRanges=new b.y$,this.DateRanges.Items=G.w.items_DateRanges,this.DateRanges.SelectionChangedCommand.Subscribe(this,"OnDateRangesSelectionChanged"),!this.IsBulkNotification){if(this.tree=[],this.CostCenterFilters=null!=this.postparent.ccfilter?this.postparent.ccfilter:[],this.CostCenters=new b.y$(0),this.CostCenters.SelectionChangedCommand.Subscribe(this,"OnCostCenterChange"),D.d.SessionManager.Preferences.ContainsKey("BulkInvPostingTreeFilter")&&"True"==D.d.SessionManager.Preferences.BulkInvPostingTreeFilter){this.TreeVisibility=!0;let s=D.d.report.ReportDataSet("RPT022",!1,"select Name,FeatureID from ADM_Features with(nolock)\n              where IsEnabled=1 and (FeatureID>50002 or FeatureID in(92,93,94))");for(let t=0;t<s.Tables[0].length;t++)this.CostCenters.Items.push(b._p.ComboBoxItems_2(s.Tables[0][t][Object.keys(s.Tables[0][t])[0]].toString(),s.Tables[0][t][Object.keys(s.Tables[0][t])[1]].toString()));this.CostCenters.SelectedValue="92",this.CostCenters.SelectedItem=this.CostCenters.GetselectedItem(),this.OnCostCenterChange(null),this.Width="800",this.Property.Visible=!1}else this.TreeVisibility=!1;null!=this.postparent&&212==this.postparent.FAID&&(this.DateRanges.Visible=!1)}}OnDateRangesSelectionChanged(s){null!=this.DateRanges.SelectedValue&&G.w.SetDateRanges(this.DateRanges.SelectedValue,this.FromDate,this.ToDate)}OnCostCenterChange(s){if(!d.J0.IsEmpty(this.CostCenters.SelectedValue)&&(0==this.tree.length||this.tree[0].CostCenterID!=parseInt(this.CostCenters.SelectedValue))){let t=0;null!=this.CostCenters.SelectedItem&&!d.J0.IsEmpty(this.CostCenters.SelectedItem.Parent)&&(t=d.J0.Int(this.CostCenters.SelectedItem.Parent)),this.LoadCostCenterTree(parseInt(this.CostCenters.SelectedValue),t,0,null)}}LoadCostCenterTree(s,t,o,i){this.tree.Clear();let n="";50002==s&&"True"==D.d.SessionManager.Preferences.EnableLocationWise.toString()&&"True"==D.d.SessionManager.Preferences["LW Reports"]&&(n=d.J0.IsEmpty(D.d.SessionManager.LocationWhere)?"a.NodeID IN (-1234)":"a.NodeID IN ("+D.d.SessionManager.LocationWhere+")");let c=new O.T;if(null==i)for(let a=0;a<this.CostCenterFilters.length;a++){const h=this.CostCenterFilters[a];if(h.CostCenterID==s&&h.LookupTypeID==t){i=h.SelectedNodes;break}}null==i?c.TreeViewModel_5(s,this,o,n,""):c.TreeViewModel_6(s,this,o,n,i,""),c.LookupTypeID=t,c.HeaderVisiblity=!1,c.OnNodeSelected||(c.OnNodeSelected=new L.Yk,c.OnNodeSelected.Subscribe(this,"OnNodeSelected")),this.tree.push(c)}GetDimensionFilter(s,t=null){let o="";return this.CostCenterFilters.forEach(i=>{if(null==t||!t.Contains(i.CostCenterID)){let n="";if(92==i.CostCenterID?n="a.Propertyid":93==i.CostCenterID?n="a.UnitID":94==i.CostCenterID?n="a.TenantID":i.CostCenterID>5e4&&(n=s+(i.CostCenterID-5e4)),i.SelectedNodes.length>0){let c="";for(let a=0;a<i.SelectedNodes.length;a++)i.SelectedNodes[a].IsGroup||(c+=i.SelectedNodes[a].Id+",");c.length>1&&(c=c.substr(0,c.length-1),o+=" AND "+n+" in("+c+") ")}else i.DeleteButtonVisibility||(o+=" AND ",o+=n+"=-12912")}}),o.toString()}OnButtonClick(s){if("Cancel"==s.toString())D.d.page.HideDialog(this.PopUpGUID),null!=this.parent?this.parent.DialogResult=!1:null!=this.postparent&&(this.postparent.DialogResult=!1);else{if(null!=this.parent){this.parent.DialogResult=!0,this.parent.Property=this.Property.SelectedValue,this.parent.FromDate=this.FromDate.Date;let t=D.d.rental.GetContractsUnitsinCase(this.parent.Property,this.FromDate.Date);this.parent.FillData(t)}else if(null!=this.postparent&&this.IsBulkNotification)this.postparent.DialogResult=!0,this.postparent.Property=this.Property.SelectedValue,this.postparent.FromDate=this.FromDate.Date,this.postparent.ToDate=this.ToDate.Date,this.postparent.stat=this.Status.SelectedValue,this.postparent.DimWhere=this.TreeVisibility?this.GetDimensionFilter("L.dcCCNID"):"",this.postparent.ButtonPostVisible="1"==this.postparent.stat,this.postparent.FillDataBulkNoficationPosting();else if(null!=this.postparent){this.postparent.DialogResult=!0,this.postparent.Property=this.Property.SelectedValue,this.postparent.FromDate=this.FromDate.Date,this.postparent.ToDate=this.ToDate.Date,this.postparent.stat=this.Status.SelectedValue,this.TreeVisibility?(this.postparent.DimWhere=this.GetDimensionFilter("L.CCNID"),this.postparent.ccfilter=this.CostCenterFilters):this.postparent.DimWhere="",this.postparent.ButtonPostVisible="1"==this.postparent.stat;let t=null;210==this.postparent.FAID?t=D.d.rental.GetContractsSchedules(this.postparent.Property,this.FromDate.Date,this.ToDate.Date,this.Status.SelectedValue,this.postparent.strSelect,this.postparent.strJoin,this.postparent.DimWhere,104):190==this.postparent.FAID?t=D.d.rental.GetContractsSchedules(this.postparent.Property,this.FromDate.Date,this.ToDate.Date,this.Status.SelectedValue,this.postparent.strSelect,this.postparent.strJoin,this.postparent.DimWhere,95):212==this.postparent.FAID&&(t=D.d.rental.GetActiveContracts(this.postparent.Property,this.FromDate.Date,this.Status.SelectedValue,this.postparent.strSelect,this.postparent.strJoin,this.postparent.DimWhere)),this.postparent.TerminationDate.Date=this.FromDate.Date,this.postparent.FillData(t)}D.d.page.HideDialog(this.PopUpGUID)}}}var R=r(89417),e=r(54438),F=r(60177),J=r(79772),V=r(23186),M=r(73955);function W(l,s){if(1&l&&(e.j41(0,"div",15),e.EFF(1,"\n                    "),e.eu8(2,16),e.EFF(3,"\n                "),e.k0s()),2&l){const t=e.XpG(2);e.R7$(2),e.Y8G("obj",t.obj.CostCenters)("group",t.form)}}function $(l,s){if(1&l&&(e.j41(0,"div",15),e.EFF(1,"\n                            "),e.eu8(2,16),e.EFF(3,"\n                        "),e.k0s()),2&l){const t=e.XpG(4);e.R7$(2),e.Y8G("obj",t.obj.CostCenters)("group",t.form)}}function U(l,s){if(1&l&&(e.j41(0,"app-pact-tree",19),e.EFF(1,"\n                        "),e.DNE(2,$,4,2,"div",13),e.EFF(3,"\n                    "),e.k0s()),2&l){const t=s.$implicit,o=e.XpG(3);e.Y8G("obj",t),e.R7$(2),e.Y8G("ngIf",o.obj.CostCenters.Visible)}}function Y(l,s){if(1&l&&(e.j41(0,"div",17),e.EFF(1,"\n                    "),e.DNE(2,U,4,2,"app-pact-tree",18),e.EFF(3,"\n                "),e.k0s()),2&l){const t=e.XpG(2);e.R7$(2),e.Y8G("ngForOf",t.obj.tree)}}function H(l,s){if(1&l&&(e.j41(0,"div",12),e.EFF(1,"\n            "),e.j41(2,"div"),e.EFF(3,"\n                "),e.DNE(4,W,4,2,"div",13),e.EFF(5,"\n                "),e.DNE(6,Y,4,1,"div",14),e.EFF(7,"\n            "),e.k0s(),e.EFF(8,"\n        "),e.k0s()),2&l){const t=e.XpG();e.R7$(4),e.Y8G("ngIf",t.obj.CostCenters.Visible&&0==t.obj.tree.length),e.R7$(2),e.Y8G("ngIf",t.obj.tree.length>0)}}function X(l,s){if(1&l&&(e.j41(0,"div",20),e.EFF(1,"\n                "),e.eu8(2,16),e.EFF(3,"\n            "),e.k0s()),2&l){const t=e.XpG();e.R7$(2),e.Y8G("obj",t.obj.Property)("group",t.form)}}function K(l,s){if(1&l&&(e.j41(0,"div",21),e.EFF(1,"\n                    "),e.eu8(2,16),e.EFF(3,"\n                "),e.k0s()),2&l){const t=e.XpG();e.R7$(2),e.Y8G("obj",t.obj.FromDate)("group",t.form)}}function z(l,s){if(1&l&&(e.j41(0,"div",21),e.EFF(1,"\n                    "),e.eu8(2,16),e.EFF(3,"\n                "),e.k0s()),2&l){const t=e.XpG();e.R7$(2),e.Y8G("obj",t.obj.ToDate)("group",t.form)}}function Q(l,s){if(1&l&&(e.j41(0,"div",20),e.EFF(1,"\n                "),e.eu8(2,16),e.EFF(3,"\n            "),e.k0s()),2&l){const t=e.XpG();e.R7$(2),e.Y8G("obj",t.obj.Status)("group",t.form)}}function Z(l,s){if(1&l){const t=e.RV6();e.j41(0,"span",28),e.nI1(1,"translate"),e.bIt("click",function(){e.eBV(t);const i=e.XpG().$implicit;return e.Njj(i.OnButtonClick("Delete"))}),e.k0s()}2&l&&e.FS9("title",e.bMT(1,1,"Delete"))}function q(l,s){if(1&l){const t=e.RV6();e.qex(0),e.EFF(1,"\n                  "),e.EFF(2,"\n                  "),e.j41(3,"div",24),e.bIt("click",function(){const i=e.eBV(t).$implicit;return e.Njj(i.OnButtonClick())}),e.EFF(4,"\n                    "),e.j41(5,"div",25),e.EFF(6,"\n                      "),e.j41(7,"span"),e.EFF(8),e.k0s(),e.EFF(9,"\n                      "),e.DNE(10,Z,2,3,"span",26),e.EFF(11," \n                    "),e.k0s(),e.EFF(12,"\n                    "),e.j41(13,"div",27),e.EFF(14,"\n                        "),e.j41(15,"span"),e.EFF(16),e.k0s(),e.EFF(17,"\n                    "),e.k0s(),e.EFF(18,"\n                    "),e.k0s(),e.EFF(19,"\n                "),e.bVm()}if(2&l){const t=s.$implicit;e.R7$(8),e.JRh(t.CostCenter),e.R7$(2),e.Y8G("ngIf",t.DeleteButtonVisibility),e.R7$(6),e.JRh(t.SelectedNodesTag)}}function _(l,s){if(1&l&&(e.j41(0,"div",22),e.EFF(1,"\n                "),e.DNE(2,q,20,3,"ng-container",23),e.EFF(3,"\n              "),e.k0s()),2&l){const t=e.XpG();e.R7$(2),e.Y8G("ngForOf",t.obj.CostCenterFilters)}}let j=(()=>{class l{constructor(){this.form=new R.gE({})}ngOnInit(){}static#e=this.\u0275fac=function(o){return new(o||l)};static#t=this.\u0275cmp=e.VBU({type:l,selectors:[["app-case-income-dialog"]],inputs:{obj:"obj"},decls:38,vars:14,consts:[[1,"master-screen",2,"padding-bottom","4px"],[2,"display","flex"],["class","rpttree_div","style","width: 50%;display: flex;flex-direction: column;height: calc(100% - 50px);",4,"ngIf"],[1,"PACTHeaderFields","row","form-row","dialogSubBody",2,"height","calc(100% - 50px)"],["class","form-group col-xl-12 col-md-12 col-sm-12 col-xs-12 PACTControl",4,"ngIf"],[1,"row","form-row"],["class","form-group col-xl-6 col-md-6 col-sm-12 col-xs-12 PACTControl",4,"ngIf"],["style","display: flex;flex-wrap: wrap;",4,"ngIf"],[1,"Pactdailogfooter"],[1,"primary-btn-wicon",3,"click"],[1,"secondary-btn-wicon",3,"click"],[1,"fa-light","fa-rectangle-xmark"],[1,"rpttree_div",2,"width","50%","display","flex","flex-direction","column","height","calc(100% - 50px)"],["class","CostCenters_select","style","margin: 5px;display: flex;align-items: center;",4,"ngIf"],["style","padding-right: 0px !important;height:400px",4,"ngIf"],[1,"CostCenters_select",2,"margin","5px","display","flex","align-items","center"],["FieldDirective","",3,"obj","group"],[2,"padding-right","0px !important","height","400px"],[3,"obj",4,"ngFor","ngForOf"],[3,"obj"],[1,"form-group","col-xl-12","col-md-12","col-sm-12","col-xs-12","PACTControl"],[1,"form-group","col-xl-6","col-md-6","col-sm-12","col-xs-12","PACTControl"],[2,"display","flex","flex-wrap","wrap"],[4,"ngFor","ngForOf"],[1,"CCFilter_div",2,"display","flex","flex-direction","column",3,"click"],[1,"CCFilter_header"],["class","fa-light fa-circle-xmark tabclose",3,"title","click",4,"ngIf"],[1,"CCFilter"],[1,"fa-light","fa-circle-xmark","tabclose",3,"click","title"]],template:function(o,i){1&o&&(e.j41(0,"div",0),e.EFF(1,"\n    "),e.j41(2,"div",1),e.EFF(3,"\n        "),e.DNE(4,H,9,2,"div",2),e.EFF(5,"\n        "),e.j41(6,"div",3),e.EFF(7,"\n            "),e.DNE(8,X,4,2,"div",4),e.EFF(9,"\n            "),e.j41(10,"div",5),e.EFF(11,"\n                "),e.DNE(12,K,4,2,"div",6),e.EFF(13,"\n                "),e.DNE(14,z,4,2,"div",6),e.EFF(15,"\n            "),e.k0s(),e.EFF(16,"\n            "),e.DNE(17,Q,4,2,"div",4),e.EFF(18,"\n            "),e.DNE(19,_,4,1,"div",7),e.EFF(20,"\n        "),e.k0s(),e.EFF(21,"\n    "),e.k0s(),e.EFF(22,"\n    "),e.j41(23,"div",8),e.EFF(24,"\n        "),e.j41(25,"div"),e.EFF(26,"\n            "),e.j41(27,"button",9),e.bIt("click",function(){return i.obj.OnButtonClick("Save")}),e.EFF(28),e.nI1(29,"translate"),e.k0s(),e.EFF(30,"\n            "),e.j41(31,"button",10),e.bIt("click",function(){return i.obj.OnButtonClick("Cancel")}),e.nrm(32,"i",11),e.EFF(33),e.nI1(34,"translate"),e.k0s(),e.EFF(35,"\n        "),e.k0s(),e.EFF(36,"\n    "),e.k0s(),e.EFF(37,"\n"),e.k0s()),2&o&&(e.R7$(4),e.Y8G("ngIf",i.obj.TreeVisibility),e.R7$(2),e.xc7("width",i.obj.TreeVisibility?"50%":"100%"),e.R7$(2),e.Y8G("ngIf",i.obj.Property.Visible),e.R7$(4),e.Y8G("ngIf",i.obj.FromDate.Visible),e.R7$(2),e.Y8G("ngIf",i.obj.ToDate.Visible),e.R7$(3),e.Y8G("ngIf",i.obj.Status.Visible),e.R7$(2),e.Y8G("ngIf",i.obj.TreeVisibility),e.R7$(9),e.JRh(e.bMT(29,10,"Ok")),e.R7$(5),e.JRh(e.bMT(34,12,"Cancel")))},dependencies:[F.Sq,F.bT,J.G,V._,M.D9],encapsulation:2})}return l})();var A=r(95050),N=r(68719),ee=r(22995),te=r(10220),se=r(72099);class ie extends v.g{constructor(s,t,o=!1){if(super(),this.sbSubQuery="",this.SelectAll=!1,this.ClubInvoice=new se.c,this.ButtonPostVisible=!0,this.TerminationDate=new P.Lc,this.TermPostingDate=new P.Lc,this.BtnText="",this.BtnUnpostText="",this.IsBulkNotificationPosting=!1,this.DialogResult=!1,this.Property=0,this.FromDate=null,this.ToDate=null,this.stat="",this.strSelect="",this.strJoin="",this.DimWhere="",this.FAID=0,this.ccfilter=null,this.IsCancel=!1,this.ShowProcessDialog=!1,this.InProgress="",this.ProgressMessage="",this.ProgressValue=0,this.ProgressMax=0,this.ContractList=Array(),this.IdList=Array(),this.DisplayName=s,this.FAID=t,this.InitColumns(),!o){let i=new E(this,"Refresh");D.d.page.ShowDialog(i,j,{HideClose:!0,ShowCenter:!0,Title:this.DisplayName})}212!=this.FAID?(this.TermPostingDate.Visible=this.TerminationDate.Visible=!1,this.BtnText=D.d.GetResource("Post"),this.BtnUnpostText=D.d.GetResource("UnPost")):(this.BtnText=D.d.GetResource("REN_CntrctTerminate"),this.BtnUnpostText="Cancel Terminate",this.TerminationDate.Label=D.d.GetResource("Ren_CntrctTerDate"),this.TermPostingDate.Label="Posting Date"),this.ClubInvoice.IsChecked=!1,this.ClubInvoice.Label="Club Invoice of same contract"}OnBeginEdit(s){let t;if(t=s.item?s.item:s,this.ButtonPostVisible){if(!d.J0.IsEmpty(t.Remarks))return!0}else if(d.J0.IsEmpty(t.Postedvoucherno)&&212!=this.FAID)return!0;return!1}InitColumns(){let s;190==this.FAID?s=D.d.empService.GetQueryData(0,"BulkInvoicePosting","","",""):210==this.FAID?s=D.d.empService.GetQueryData(0,"BulkPurchaseContractScreen","","",""):212==this.FAID&&(s=D.d.empService.GetQueryData(0,"BulkterminateScreen","","","")),this.PstDocGrid=new w.vv,this.PstDocGrid.Columns=[],this.PstDocGrid.Clear(),this.PstDocGrid.Width="",this.PstDocGrid.Height=void 0,this.PstDocGrid.CanUserAddRows=!1,this.PstDocGrid.SearchVisible=!0,this.PstDocGrid.SelectAll.Visible=!0,this.PstDocGrid.CanUserSortColumns=!0,this.PstDocGrid.OnBeginEdit.Subscribe(this,"OnBeginEdit");let t,o=new Array,i=new Array;if(null!=s&&s.Tables.length>0&&s.Tables[0].length>0&&!d.J0.IsEmpty(s.Tables[0][0].Value)){let a=new d.VB;a.LoadXml(s.Tables[0][0].Value.toString()),a.DocumentElement.childNodes.forEach(h=>{if(t=new u.O7,h.attributes)if(t.Header=h.attributes.Header.value,t.DisplayMember=h.attributes.Name.value,t.DisplayIndex=parseInt(h.attributes.index.value),!d.J0.IsEmpty(h.attributes.ID)&&!d.J0.IsEmpty(h.attributes.ID.value)&&(t.CostCenterID=parseInt(h.attributes.ID.value)),t.Width=parseInt(h.attributes.WIDTH.value),o.push(t),d.J0.IsEmpty(h.attributes.Type)||"DIM"!=h.attributes.Type.value)"Narration"==t.DisplayMember&&212!=this.FAID&&(this.strSelect+=",dbo.[fnREN_GetNextScheduleDate](a.ContractID,E.EventTime,E.SchEventID) Todate");else{t=new u.O7,t.Header=h.attributes.Header.value,t.DisplayMember="DIM"+h.attributes.ID.value,t.ReadOnly=!0,t.DisplayIndex=parseInt(h.attributes.index.value),t.Width=parseInt(h.attributes.WIDTH.value),i.push(t),this.PstDocGrid.TableColumns.push(t.DisplayMember);let p=(parseInt(h.attributes.ID.value)-5e4).toString();D.d.SessionManager.Preferences.ContainsKey("DepositLinkDimension")&&h.attributes.ID.value==D.d.SessionManager.Preferences.DepositLinkDimension?this.strSelect+=",(select top 1 Name from INV_DocDetails id  with(nolock)\t\t \n                               join com_docccdata idcc  with(nolock) on id.InvDocDetailsID=idcc.InvDocDetailsID\n                               join "+d.J0.GetTagTableName(d.J0.Int(h.attributes.ID.value))+" AS D"+p+" with(nolock) on idcc.dcccnid"+p+"=D"+p+".NOdeid\n                               where id.docid=D.ID) AS DIM"+h.attributes.ID.value:(this.strSelect+=",L.CCNID"+p+",D"+p+".Name AS DIM"+h.attributes.ID.value,this.strJoin+=" LEFT JOIN "+d.J0.GetTagTableName(d.J0.Int(h.attributes.ID.value))+" AS D"+p+" with(nolock) ON L.CCNID"+p+"=D"+p+".NodeID")}})}t=new u.O7,t.Header="\u221a",t.DisplayMember="Select",t.DataType="CheckBox",t.Width=25,i.push(t),t=new u.O7,t.Click.Subscribe(this,"OpenDoc"),t.Header="OpenDoc",t.DisplayMember="LinkDoc",t.DataType="LINK",t.Width=100,212!=this.FAID&&i.push(t),t=new u.O7,t.Header="Contract SNo",t.DisplayMember="ContractNo",t.DataType="LINK",t.ReadOnly=!0,t.Click.Subscribe(this,"Opencont"),t.Width=100;let n=o.find(a=>a.DisplayMember==t.DisplayMember);null!=n&&null!=n?(t.DisplayIndex=n.DisplayIndex,t.Width=n.Width):o.length>0&&(t.IsVisible=!1),i.push(t),t=new u.O7,t.Header="Start Date",t.DisplayMember="startdate",t.DataType="DATE",t.ReadOnly=!0,t.Width=95,n=o.find(a=>a.DisplayMember==t.DisplayMember),null!=n&&null!=n?(t.DisplayIndex=n.DisplayIndex,t.Width=n.Width):o.length>0&&(t.IsVisible=!1),i.push(t),t=new u.O7,t.Header="End Date",t.DisplayMember="enddate",t.DataType="DATE",t.ReadOnly=!0,t.Width=95,n=o.find(a=>a.DisplayMember==t.DisplayMember),null!=n&&null!=n?(t.DisplayIndex=n.DisplayIndex,t.Width=n.Width):o.length>0&&(t.IsVisible=!1),i.push(t),t=new u.O7,t.Header="Tower",t.DisplayMember="property",t.ReadOnly=!0,t.Width=150,n=o.find(a=>a.DisplayMember==t.DisplayMember),null!=n&&null!=n?(t.DisplayIndex=n.DisplayIndex,t.Width=n.Width):o.length>0&&(t.IsVisible=!1),i.push(t),t=new u.O7,t.Header="Unit",t.DisplayMember="unit",t.ReadOnly=!0,t.Width=100,n=o.find(a=>a.DisplayMember==t.DisplayMember),null!=n&&null!=n?(t.DisplayIndex=n.DisplayIndex,t.Width=n.Width):o.length>0&&(t.IsVisible=!1),i.push(t),t=new u.O7,t.Header="Tenant",t.DisplayMember="Tenant",t.ReadOnly=!0,t.Width=100,n=o.find(a=>a.DisplayMember==t.DisplayMember),null!=n&&null!=n?(t.DisplayIndex=n.DisplayIndex,t.Width=n.Width):o.length>0&&(t.IsVisible=!1),i.push(t),t=new u.O7,t.Header="DocDate",t.DisplayMember="DocDate",t.DataType="DATE",t.ValueMember="EventTime",t.ReadOnly=!D.d.SessionManager.IsActionAssigned(495,"Date Editable in Bulk Posting"),t.Width=90,n=o.find(a=>a.DisplayMember==t.DisplayMember),null!=n&&null!=n?(t.DisplayIndex=n.DisplayIndex,t.Width=n.Width):o.length>0&&(t.IsVisible=!1),i.push(t),t=new u.O7,t.Header="Amount",t.DisplayMember="Amount",t.ReadOnly=!0,t.Width=100,t.DataType="FLOAT",n=o.find(a=>a.DisplayMember==t.DisplayMember),null!=n&&null!=n?(t.DisplayIndex=n.DisplayIndex,t.Width=n.Width):o.length>0&&(t.IsVisible=!1),i.push(t),t=new u.O7,t.Header="No.of invoices",t.DisplayMember="RecurDuration",t.ReadOnly=!0,t.Width=100,t.DataType="FLOAT",n=o.find(a=>a.DisplayMember==t.DisplayMember),null!=n?(t.DisplayIndex=n.DisplayIndex,t.Width=n.Width):o.length>0&&(t.IsVisible=!1),i.push(t),t=new u.O7,t.Header="Doc No",t.DisplayMember="Postedvoucherno",t.DataType="LINK",t.ReadOnly=!0,t.Width=80,t.Click.Subscribe(this,"onClick"),n=o.find(a=>a.DisplayMember==t.DisplayMember),null!=n&&null!=n?(t.DisplayIndex=n.DisplayIndex,t.Width=n.Width):o.length>0&&(t.IsVisible=!1),i.push(t),t=new u.O7,t.Header="Remarks",t.DisplayMember="Remarks",t.ReadOnly=!0,t.Width=90,n=o.find(a=>a.DisplayMember==t.DisplayMember),null!=n&&null!=n?(t.DisplayIndex=n.DisplayIndex,t.Width=n.Width):o.length>0&&(t.IsVisible=!1),i.push(t),t=new u.O7,t.Header="Narration",t.DisplayMember="Narration",t.ReadOnly=!0,t.Width=90,n=o.find(a=>a.DisplayMember==t.DisplayMember),null!=n&&null!=n?(t.DisplayIndex=n.DisplayIndex,t.Width=n.Width):o.length>0&&(t.IsVisible=!1),i.push(t),i.sort((a,h)=>a.DisplayIndex-h.DisplayIndex).forEach(a=>{this.PstDocGrid.Columns.push(a)}),this.PstDocGrid.TableColumns.push("Select"),this.PstDocGrid.TableColumns.push("ContractNo"),this.PstDocGrid.TableColumns.push("LinkDoc"),this.PstDocGrid.TableColumns.push("startdate"),this.PstDocGrid.TableColumns.push("startdate_Key"),this.PstDocGrid.TableColumns.push("enddate"),this.PstDocGrid.TableColumns.push("enddate_Key"),this.PstDocGrid.TableColumns.push("receiveDate"),this.PstDocGrid.TableColumns.push("VoucherNo"),this.PstDocGrid.TableColumns.push("unit"),this.PstDocGrid.TableColumns.push("property"),this.PstDocGrid.TableColumns.push("Tenant"),this.PstDocGrid.TableColumns.push("unitID"),this.PstDocGrid.TableColumns.push("propertyID"),this.PstDocGrid.TableColumns.push("TenantID"),this.PstDocGrid.TableColumns.push("contractID"),this.PstDocGrid.TableColumns.push("CostCenterID"),this.PstDocGrid.TableColumns.push("NodeID"),this.PstDocGrid.TableColumns.push("DocDate"),this.PstDocGrid.TableColumns.push("Postedvoucherno"),this.PstDocGrid.TableColumns.push("EventTime"),this.PstDocGrid.TableColumns.push("SchEventID"),this.PstDocGrid.TableColumns.push("SchGUID"),this.PstDocGrid.TableColumns.push("RecurMethod"),this.PstDocGrid.TableColumns.push("AttachmentID"),this.PstDocGrid.TableColumns.push("SubCostCenterID"),this.PstDocGrid.TableColumns.push("PostedDocid"),this.PstDocGrid.TableColumns.push("Remarks"),this.PstDocGrid.TableColumns.push("Narration"),this.PstDocGrid.TableColumns.push("Amount"),this.PstDocGrid.TableColumns.push("RecurDuration"),this.PstDocGrid.TableColumns.push("TermSetAccID"),this.PstDocGrid.SearchVisible=!0,this.PstDocGrid.AddSearchCols()}onClick(){null!=this.PstDocGrid.SelectedItem&&!d.J0.IsEmpty(this.PstDocGrid.SelectedItem.PostedDocid)&&!d.J0.IsEmpty(this.PstDocGrid.SelectedItem.SubCostCenterID)&&(event.preventDefault(),A.RibbonExtViewModel.LoadDocument_2(parseInt(this.PstDocGrid.SelectedItem.SubCostCenterID.toString()),parseInt(this.PstDocGrid.SelectedItem.PostedDocid.toString())))}OpenDoc(){Logger.InfoLog("BulkInvoicePostingViewModel ::Entering OpenDoc"),null!=this.PstDocGrid.SelectedItem&&(""==d.J0.String(this.PstDocGrid.SelectedItem.Postedvoucherno)?A.RibbonExtViewModel.OpenRecurDocument(this.PstDocGrid.SelectedItem):this.onClick()),Logger.InfoLog("BulkInvoicePostingViewModel ::Exiting OpenDoc")}Opencont(){if(null!=this.PstDocGrid.SelectedItem&&""!=this.PstDocGrid.SelectedItem.contractID.toString()){let s=new N.AddEditRenContractViewModel;s.AddEditRenContractViewModel_1(210==this.FAID?104:95,parseInt(this.PstDocGrid.SelectedItem.contractID.toString()),!1,1,parseInt(this.PstDocGrid.SelectedItem.contractID.toString())),D.d.page.addNewTab({component:te.AddEditRentalContractComponent,params:{obj:s}})}}FillData(s){this.Title=this.FromDate?this.ToDate?this.FromDate.ToString(D.d.SessionManager.Preferences["Date Format"])+" - "+this.ToDate.ToString(D.d.SessionManager.Preferences["Date Format"]):this.FromDate.ToString(D.d.SessionManager.Preferences["Date Format"]):"";var t=this.PstDocGrid.Columns.find(i=>"Postedvoucherno"==i.DisplayMember),o=this.PstDocGrid.Columns.find(i=>"Remarks"==i.DisplayMember);if("1"==this.stat||212==this.FAID?(t.IsVisible=!1,o.IsVisible=!0):(t.IsVisible=!0,o.IsVisible=!1),this.PstDocGrid.Clear(),null!=s&&s.Tables.length>0&&!s.Columns[0].Contains("ErrorMessage"))for(let i=0;i<s.Tables[0].length;i++){let n=this.PstDocGrid.NewRow();n.Select=!1,n.LinkDoc="Document",n.contractID=d.J0.String(s.Tables[0][i].ContractID),n.ContractNo=d.J0.String(s.Tables[0][i].sno),d.J0.IsEmpty(s.Tables[0][i].startdate)||(n.startdate=d.J0.ParseDate(d.J0.String(s.Tables[0][i].startdate)).ToString(D.d.SessionManager.Preferences["Date Format"])),n.startdate_Key=d.J0.ParseDate(d.J0.String(s.Tables[0][i].startdate)),d.J0.IsEmpty(s.Tables[0][i].enddate)||(n.enddate=d.J0.ParseDate(s.Tables[0][i].enddate.toString()).ToString(D.d.SessionManager.Preferences["Date Format"]),n.enddate_Key=d.J0.ParseDate(s.Tables[0][i].enddate.toString())),212!=this.FAID&&(n.VoucherNo=d.J0.String(s.Tables[0][i].VoucherNo),n.Postedvoucherno=d.J0.String(s.Tables[0][i].POstedvoucherno),d.J0.IsEmpty(s.Tables[0][i].EventTime)||(n.DocDate=d.J0.ParseDate(s.Tables[0][i].EventTime.toString()).ToString(D.d.SessionManager.Preferences["Date Format"]),n.EventTime=d.J0.ParseDate(s.Tables[0][i].EventTime.toString()),n.Narration=" for the Period of ("+n.DocDate.toString(),s.Columns[0].Contains("Todate")&&!d.J0.IsEmpty(s.Tables[0][i].Todate)&&(n.Narration=n.Narration.toString()+"-"+new Date(s.Tables[0][i].Todate.toString()).AddDays(-1).ToString(D.d.SessionManager.Preferences["Date Format"])),n.Narration=n.Narration.toString()+")"),n.SchEventID=d.J0.String(s.Tables[0][i].SchEventID),n.SchGUID=d.J0.String(s.Tables[0][i].GUID),n.RecurMethod=d.J0.String(s.Tables[0][i].RecurMethod),n.AttachmentID=d.J0.String(s.Tables[0][i].AttachmentID),n.CostCenterID=d.J0.String(s.Tables[0][i].CostCenterID),n.NodeID=d.J0.String(s.Tables[0][i].NodeID),n.SubCostCenterID=d.J0.String(s.Tables[0][i].SubCostCenterID),n.PostedDocid=d.J0.String(s.Tables[0][i].PostedDocid),n.Amount=d.J0.String(s.Tables[0][i].Amount)),s.Columns[0].Contains("RecurDuration")&&(n.RecurDuration=s.Tables[0][i].RecurDuration),s.Columns[0].Contains("TermSetAccID")&&(n.TermSetAccID=s.Tables[0][i].TermSetAccID),n.unit=s.Tables[0][i].unitName,n.property=d.J0.String(s.Tables[0][i].propertyName),n.Tenant=d.J0.String(s.Tables[0][i].firstName),n.Remarks="",n.unitID=s.Tables[0][i].unitid,n.propertyID=d.J0.String(s.Tables[0][i].Propertyid),n.TenantID=d.J0.String(s.Tables[0][i].TenantID);for(let c=0;c<this.PstDocGrid.Columns.length;c++)this.PstDocGrid.Columns[c].DisplayMember.startsWith("DIM")&&s.Columns[0].Contains(this.PstDocGrid.Columns[c].DisplayMember)&&(n[this.PstDocGrid.Columns[c].DisplayMember]=d.J0.String(s.Tables[0][i][this.PstDocGrid.Columns[c].DisplayMember]));this.PstDocGrid.addRow(n)}this.PstDocGrid.UpdateFooter(),this.PstDocGrid.RefreshColumns()}save(){var s=this;return(0,I.A)(function*(){s.ProgressValue=1;let t=s.PstDocGrid.Table.filter(n=>1==n.Select);s.ProgressMax=t.length;let o,i=null;for(let n=0;n<t.length;n++,s.ProgressValue++){s.InProgress=s.ProgressValue+" of "+s.ProgressMax;let c=0;if(d.J0.IsEmpty(t[n].contractID)||(c=parseInt(t[n].contractID.toString())),c>0)if(s.IsCancel)D.d.rental.CancelTermination(95,c).subscribe(a=>{t[n].Remarks=a.Message,o=a.RetValue},a=>{alert(JSON.stringify(a)),console.log("BulkInvoicePosting : "+JSON.stringify(a))});else{null==i?(i=new N.AddEditRenContractViewModel,i.AddEditRenContractViewModel_1(95,c,!1,1,c)):(i.ContractID=c,i.LoadEditData(null),i.CalculateFooter(),i.PropID=i.Property.SelectedValue,i.UnitTempID=i.Unit.SelectedValue),i.IsBulkterm=!0;let a=i.GetContractNunber();i.TerminateContracts=new ee.L(i,c,a,1),i.TerminateContracts.TerminationDate.Date=s.TerminationDate.Date,i.TerminateContracts.TerminationPostDate.Date=s.TermPostingDate.Date,d.J0.IsEmpty(t[n].TermSetAccID)||(i.TermSetAccID=parseInt(t[n].TermSetAccID.toString())),i.TerminateContract(c,1,s.TerminationDate.Date.Date,1,!0),t[n].Remarks=i.DisplayMessage}}})()}SelectUnselectAll(s){for(let t=0;t<this.PstDocGrid.Table.length;t++)this.PstDocGrid.Table[t].Select=this.ButtonPostVisible?!!d.J0.IsEmpty(this.PstDocGrid.Table[t].Remarks)&&s:!d.J0.IsEmpty(this.PstDocGrid.Table[t].Postedvoucherno)&&s}ButtonSave(s){var t=this;return(0,I.A)(function*(){if(t.DisplayMessage="","Customize"!=s&&"Export"!=s)if("POST"==s.toString()){if(212==t.FAID){for(let o=0;o<t.PstDocGrid.Table.length;o++)if(!d.J0.IsEmpty(t.PstDocGrid.Table[o].Select)&&(0,S.yG0)(t.PstDocGrid.Table[o].Select.toString())){if(!d.J0.IsEmpty(t.PstDocGrid.Table[o].startdate_Key)&&t.TerminationDate.Date<new Date(t.PstDocGrid.Table[o].startdate_Key.toString()))return t.DisplayMessage="Termination date should be higher than contract start date",t.MessageVisibility=!0,void t.PstDocGrid.Setselectedrow(o);if(!d.J0.IsEmpty(t.PstDocGrid.Table[o].enddate_Key)&&t.TerminationDate.Date>=new Date(t.PstDocGrid.Table[o].enddate_Key.toString()))return t.DisplayMessage="Termination date should be lower than contract end date",t.MessageVisibility=!0,void t.PstDocGrid.Setselectedrow(o)}return t.IsCancel=!1,t.ProgressMessage="Terminating Contracts.Please wait...",t.ShowProcessDialog=!0,t.save(),void(t.ShowProcessDialog=!1)}if(t.ClubInvoice.IsChecked){t.PstDocGrid.TableColumns.Contains("DocumentDate")||t.PstDocGrid.TableColumns.push("DocumentDate");let o=t.PstDocGrid.Table.filter(a=>1==a.Select),i="",n=0;o.length>0&&o.SortBy(["contractID"]);let c=[];for(let a=0;a<o.length;a++)if(i!=o[a].contractID.toString()){i=o[a].contractID.toString();let h={};h.contractID=o[a].contractID.toString(),h.sno=o[a].ContractNo.toString(),d.J0.IsEmpty(o[a].EventTime)?(h.Dt=(new Date).OnlyDate().ToString(D.d.SessionManager.Preferences["Date Format"]),h.Dt_Key=(new Date).OnlyDate()):(h.Dt=o[a].DocDate.toString(),h.Dt_Key=d.J0.ParseDate(o[a].EventTime.toString())),c.push(h),n++}if(n>0){const{UpdatePayTermsViewModel:a}=yield r.e(2909).then(r.bind(r,62909)),{UpdatepaytermsComponent:h}=yield r.e(4121).then(r.bind(r,96502));{let p=new a("AddEditRenContractViewModel");p.UpdatePayTermsViewModel_2(t),p.PstDocGrid.Columns=[],p.DisplayName="Post Invoices";let m=new u.O7;m.Header="Tracking No.",m.DisplayMember="sno",m.ReadOnly=!0,m.DisableTab=!0,m.Width=150,p.PstDocGrid.Columns.push(m),m=new u.O7,m.Header="Posting date",m.DisplayMember="Dt",m.Width=150,m.DataType="DATE",p.PstDocGrid.Columns.push(m),p.PstDocGrid.Width="400",p.PstDocGrid.Table=c,p.PstDocGrid.SelectAll.Visible=!1,p.PstDocGrid.SearchVisible=!1,D.d.page.ShowDialog(p,h,{ShowCenter:!0,Title:p.DisplayName},()=>{if(p.DailogResult){for(let C=0;C<p.PstDocGrid.Table.length;C++)o=t.PstDocGrid.Table.filter(g=>g.contractID==p.PstDocGrid.Table[C].contractID.toString()&&1==g.Select),o.forEach(g=>{d.J0.IsEmpty(p.PstDocGrid.Table[C].Dt_Key)||(g.DocumentDate=d.J0.ParseDate(p.PstDocGrid.Table[C].Dt_Key.toString()))});t.TempAutoPostDocs(t.PstDocGrid.Table,t.PstDocGrid.TableColumns,t.ClubInvoice.IsChecked)}})}}}else t.TempAutoPostDocs(t.PstDocGrid.Table,t.PstDocGrid.TableColumns,t.ClubInvoice.IsChecked)}else if("OK"==s.toString())t.vModel&&(t.vModel.ShowProcessDialog=!1);else if("UnPost"==s.toString()){if(212==t.FAID)return t.IsCancel=!0,t.ProgressMessage="Cancelling Terminated Contracts.Please wait...",t.ShowProcessDialog=!0,t.save(),void(t.ShowProcessDialog=!1);t.UnPost()}else{let o=new E(t,"Refresh");D.d.page.ShowDialog(o,j,{HideClose:!0,ShowCenter:!0,Title:t.DisplayName})}})()}get Progress(){return this.vModel?this.vModel.ProgressValue+"/"+this.vModel.ProgressMax:""}AutoPostDocs(s,t=[],o){var i=this;return(0,I.A)(function*(){const{DashBoardNotifViewModel:n}=yield Promise.all([r.e(6447),r.e(4140)]).then(r.bind(r,81759));i.vModel=new n(0),i.vModel.dt=s,i.vModel.ClubInvoice=o,i.vModel.dtGrid=i.PstDocGrid,i.vModel.dtColumns=t,i.ProgressMessage="Posting documents please wait...",yield i.vModel.save()})()}TempAutoPostDocs(s,t=[],o){var i=this;return(0,I.A)(function*(){const{DashBoardNotifViewModel:n}=yield Promise.all([r.e(6447),r.e(4140)]).then(r.bind(r,81759));i.vModel=new n(0),i.vModel.ShowProcessDialog=!0,i.ContractList.Clear(),i.IdList.Clear();let c=s.filter(a=>1==a.Select);for(let a=0;a<c.length;a++)i.ContractList.push(c[a].contractID),Object.keys(c[a]).Contains("id")&&i.IdList.push(c[a].id);D.d.rental.BulkPosting(s,t,o,i.DisplayName,i.FAID).subscribe(a=>{let h=a;if(h&&h.Tables&&h.Tables.length>0&&h.Tables[0].length>0)for(let p=0;p<i.ContractList.length;p++){const m=i.ContractList[p],C=i.IdList[p];let g=i.PstDocGrid.Table.filter(f=>f.contractID==m&&f.id==C),x=h.Tables[0].filter(f=>f.contractID==m&&f.id==C);for(let f=0;f<g.length;f++)i.PstDocGrid.TableColumns.Contains("Remarks")&&(g[f].Remarks=x[0].Remarks,g[f].Postedvoucherno=x[0].Postedvoucherno,g[f].Select=!1),i.PstDocGrid.updateRow(g[f])}i.vModel.ShowProcessDialog=!1})})()}UpdGrid(){var s=this;return(0,I.A)(function*(){for(let t=0;t<s.PstDocGrid.Table.length;t++)1==s.PstDocGrid.Table[t].Select&&(s.PstDocGrid.Table[t].Select=!1,s.PstDocGrid.updateRow(s.PstDocGrid.Table[t]))})()}GetExportHTML(){Logger.InfoLog("BulkInvoicePostingViewModel:: inside GetExportHTML ");let s="",t="";s+="<html><meta charset='utf-8' /><body style='color:blac;background-color:white;'>",t+=".hdr{text-align:cente; padding:5px; background-color:#4F81BD;color:white;font-family:Arial;font-size:11pt} ",t+=".grp{padding:2p; background-color:#87CEEB; color:#FFFCF7;font-family:arial; font-size:10pt;}",t+=".tot{background-color:whit; color:red;font-family:arial; font-weight:bold; font-size:8pt;}",t+=".alt{background-color:whitesmok; color:black; font-family:arial; font-size:9pt; align:right;}",s+="<style>"+t.toString()+"</style>";let n,i=0;for(let c=0;c<this.PstDocGrid.Columns.length;c++)i+=this.PstDocGrid.Columns[c].Width;s+="<table>",s+="\r\n<tr><td align='center'><h2>",s+=D.d.SessionManager.CompanyName,s+="</h2></td></tr>",s+="\r\n<tr><td align='center'><h3 style='vertical-align:middl;'>",s+=this.DisplayName,s+="</h3></td></tr>",s+="\r\n<tr><td align='center'>",s+=" From :  "+this.FromDate.ToString(D.d.SessionManager.Preferences["Date Format"]),s+=" &nbs;&nbsp;&nbsp;To :  "+this.ToDate.ToString(D.d.SessionManager.Preferences["Date Format"]),s+="</td></tr>",s+="<tr><td style='padding-top:10p;'><table border=1 width='"+i+"' style='border-collapse:collapse;  font-family:arial; font-size:9pt;' >",s+="<COLGROUP>";for(let c=0;c<this.PstDocGrid.Columns.length;c++)s+="FLOAT"==this.PstDocGrid.Columns[c].DataType?"<COL style='text-align:righ;'>":"<COL style=''>";s+="</COLGROUP>",s+="<tr style=''>";for(let c=0;c<this.PstDocGrid.Columns.length;c++)s+="<th class='hdr' width='"+this.PstDocGrid.Columns[c].Width,s+="' >",s+=this.PstDocGrid.Columns[c].Header,s+="</th>";s+="</tr>";for(let c=0;c<this.PstDocGrid.Table.length;c++){s+="<tr",c%2==1&&(s+=" class=alt"),s+=">";for(let a=0;a<this.PstDocGrid.Columns.length;a++)s+="<td",s+="FLOAT"==this.PstDocGrid.Columns[a].DataType?" align='right'":" align='left'",s+=">",n="PactComboBox"==this.PstDocGrid.Columns[a].DataType?this.PstDocGrid.Columns[a].ValueBinding+"_Key":this.PstDocGrid.Columns[a].DisplayMember,this.PstDocGrid.TableColumns.Contains(n)&&("ChequeNumber"==n&&this.PstDocGrid.Table[c][n].toString().startsWith("0")?s+="'"+this.PstDocGrid.Table[c][n].toString():s+=this.PstDocGrid.Table[c][n].toString()),s+="</td>";s+="</tr>"}return s+="</table>",s+="</td></tr></table>",s+="</body><html>",Logger.InfoLog("BulkInvoicePostingViewModel:: exiting GetExportHTML "),s}UnPost(){let t,o=0;for(let n=0;n<this.PstDocGrid.Table.length;n++)if(!d.J0.IsEmpty(this.PstDocGrid.Table[n].Postedvoucherno)&&!d.J0.IsEmpty(this.PstDocGrid.Table[n].Select)&&(0,S.yG0)(this.PstDocGrid.Table[n].Select)){t=0;let c=D.d.rental.UnPostInvoice(parseInt(this.PstDocGrid.Table[n].SubCostCenterID.toString()),parseInt(this.PstDocGrid.Table[n].PostedDocid.toString()),parseInt(this.PstDocGrid.Table[n].SchEventID.toString()),95);this.DisplayMessage=c.Message,t=c.RetValue,t>0&&(this.PstDocGrid.Table[n].Postedvoucherno=null,this.PstDocGrid.Table[n].Select=!1,this.PstDocGrid.updateRow(this.PstDocGrid.Table[n]),this.PstDocGrid.SelectAll.IsChecked=!1,o++)}this.MessageVisibility=!0,o>0&&(this.DisplayMessage="Deleted "+o)}}var ne=r(95021);function oe(l,s){if(1&l&&(e.j41(0,"label",16),e.EFF(1),e.k0s()),2&l){const t=e.XpG();e.R7$(),e.SpI("\n                    ",t.obj.Title,"\n                ")}}function ae(l,s){if(1&l&&e.eu8(0,17),2&l){const t=e.XpG();e.Y8G("obj",t.obj.ClubInvoice)}}function le(l,s){if(1&l&&e.eu8(0,17),2&l){const t=e.XpG();e.Y8G("obj",t.obj.TerminationDate)}}function re(l,s){if(1&l&&e.eu8(0,17),2&l){const t=e.XpG();e.Y8G("obj",t.obj.TermPostingDate)}}function ce(l,s){if(1&l){const t=e.RV6();e.j41(0,"span",9),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.obj.ButtonSave("POST"))}),e.nrm(1,"i",18),e.EFF(2),e.k0s()}if(2&l){const t=e.XpG();e.R7$(2),e.JRh(t.obj.BtnText)}}function de(l,s){if(1&l){const t=e.RV6();e.j41(0,"span",9),e.bIt("click",function(){e.eBV(t);const i=e.XpG();return e.Njj(i.obj.ButtonSave("UnPost"))}),e.nrm(1,"i",19),e.EFF(2),e.k0s()}if(2&l){const t=e.XpG();e.R7$(2),e.JRh(t.obj.BtnUnpostText)}}function De(l,s){1&l&&(e.j41(0,"div",20),e.EFF(1,"\n"),e.k0s())}function he(l,s){1&l&&(e.j41(0,"div",21),e.EFF(1,"\n    "),e.EFF(2,"\n    "),e.j41(3,"span"),e.EFF(4,"Posting Documents : "),e.k0s(),e.EFF(5,"\n"),e.k0s())}function pe(l,s){1&l&&(e.j41(0,"div",20),e.EFF(1,"\n"),e.k0s())}function ue(l,s){1&l&&(e.j41(0,"div",21),e.EFF(1,"\n    "),e.EFF(2,"\n    "),e.j41(3,"span"),e.EFF(4,"Posting Documents : "),e.k0s(),e.EFF(5,"\n"),e.k0s())}let me=(()=>{class l extends v.V{constructor(){super(),this.form=new R.gE({})}ngOnInit(){this.obj=this.params.obj,console.log(this.obj)}static#e=this.\u0275fac=function(o){return new(o||l)};static#t=this.\u0275cmp=e.VBU({type:l,selectors:[["app-bulk-invoice-posting"]],inputs:{obj:"obj"},features:[e.Vt3],decls:49,vars:16,consts:[["id","maincontainer",1,"maincontainer"],[2,"flex-direction","column","justify-content","flex-end","width","100%","height","100%"],[1,"page-header"],[1,"page-title"],["style","font-size: 14px;",4,"ngIf"],[2,"display","flex"],["FieldDirective","",3,"obj",4,"ngIf"],[1,"btnMetroDiv","secondary-btn-group"],["class","secondary-btn",3,"click",4,"ngIf"],[1,"secondary-btn",3,"click"],[1,"fa-light","fa-gears"],[1,"main_div"],[1,"documentgrid","row","form-row",2,"width","100%","height","100%","padding","4px"],[2,"width","100%","height","100%",3,"obj","group"],["style","position: absolute; width: 100%; height: 100%; left: 0px; top: 0px; background-color: #666; opacity: 0.1;",4,"ngIf"],["style","position: absolute;   left: 50%; top: 50%; background-color: white; margin: auto; transform: translate(-50%, -50%);font-size: 20px;padding: 10px; z-index: 200;",4,"ngIf"],[2,"font-size","14px"],["FieldDirective","",3,"obj"],[1,"fa-light","fa-floppy-disk-circle-arrow-right"],[1,"fa-light","fa-save"],[2,"position","absolute","width","100%","height","100%","left","0px","top","0px","background-color","#666","opacity","0.1"],[2,"position","absolute","left","50%","top","50%","background-color","white","margin","auto","transform","translate(-50%, -50%)","font-size","20px","padding","10px","z-index","200"]],template:function(o,i){1&o&&(e.j41(0,"div",0),e.EFF(1,"\n    "),e.j41(2,"div",1),e.EFF(3,"\n        "),e.j41(4,"div",2),e.EFF(5,"\n            "),e.j41(6,"label",3),e.EFF(7),e.DNE(8,oe,2,1,"label",4),e.EFF(9,"\n            "),e.k0s(),e.EFF(10,"  \n            "),e.j41(11,"div",5),e.DNE(12,ae,1,1,"ng-container",6),e.EFF(13,"\n                "),e.DNE(14,le,1,1,"ng-container",6),e.EFF(15,"\n                "),e.DNE(16,re,1,1,"ng-container",6),e.k0s(),e.EFF(17,"         \n            "),e.j41(18,"div",7),e.EFF(19,"\n                "),e.DNE(20,ce,3,1,"span",8),e.EFF(21,"\n                "),e.DNE(22,de,3,1,"span",8),e.EFF(23,"\n                "),e.j41(24,"span",9),e.bIt("click",function(){return i.obj.ButtonSave("Regenerate")}),e.nrm(25,"i",10),e.EFF(26),e.nI1(27,"translate"),e.k0s(),e.EFF(28,"\n                "),e.EFF(29,"\n            "),e.k0s(),e.EFF(30,"\n        "),e.k0s(),e.EFF(31,"\n        "),e.j41(32,"div",11),e.EFF(33,"\n            "),e.j41(34,"div",12),e.EFF(35,"\n                "),e.nrm(36,"app-PactGridView",13),e.EFF(37,"\n            "),e.k0s(),e.EFF(38,"\n        "),e.k0s(),e.EFF(39,"\n    "),e.k0s(),e.EFF(40,"\n"),e.k0s(),e.EFF(41,"\n"),e.DNE(42,De,2,0,"div",14),e.EFF(43,"\n"),e.DNE(44,he,6,0,"div",15),e.EFF(45,"\n\n"),e.DNE(46,pe,2,0,"div",14),e.EFF(47,"\n"),e.DNE(48,ue,6,0,"div",15)),2&o&&(e.R7$(7),e.SpI("\n                ",i.obj.DisplayName,"\n                "),e.R7$(),e.Y8G("ngIf",!i.obj.TerminationDate.Visible),e.R7$(4),e.Y8G("ngIf",!i.obj.TerminationDate.Visible),e.R7$(2),e.Y8G("ngIf",i.obj.TerminationDate.Visible),e.R7$(2),e.Y8G("ngIf",i.obj.TermPostingDate.Visible),e.R7$(4),e.Y8G("ngIf",i.obj.ButtonPostVisible),e.R7$(2),e.Y8G("ngIf",!i.obj.ButtonPostVisible),e.R7$(4),e.JRh(e.bMT(27,14,"Regenerate")),e.R7$(10),e.Y8G("obj",i.obj.PstDocGrid)("group",i.form),e.R7$(6),e.Y8G("ngIf",null==i.obj.vModel?null:i.obj.vModel.ShowProcessDialog),e.R7$(2),e.Y8G("ngIf",null==i.obj.vModel?null:i.obj.vModel.ShowProcessDialog),e.R7$(2),e.Y8G("ngIf",i.obj.ShowProcessDialog),e.R7$(2),e.Y8G("ngIf",i.obj.ShowProcessDialog))},dependencies:[F.bT,V._,ne.X,M.D9],encapsulation:2})}return l})();class fe{static LoadRentalScreen(s){if(106!=s.FeatureID||167!=s.FeatureActionTypeID){if(103==s.FeatureID)return{component:T.TreeViewPageComponent,params:{ScreenName:s.ScreenName,FeatureActionID:s.FeatureActionID,CostCenterID:s.FeatureID,Call:"C3"},basedon:"CostCenterID"};if(129==s.FeatureID)return{component:T.TreeViewPageComponent,params:{ScreenName:s.ScreenName,FeatureActionID:s.FeatureActionID,CostCenterID:s.FeatureID,Call:"C3"},basedon:"CostCenterID"}}switch(s.FeatureActionID.ToString()){case"190":case"210":case"212":let t;t=new ie(s.ScreenName,s.FeatureActionID),D.d.page.addNewTab({title:s.ScreenName,component:me,params:{obj:t}});break;case"514":case"3742":return{component:T.TreeViewPageComponent,params:{ScreenName:s.ScreenName,FeatureActionID:s.FeatureActionID,CostCenterID:s.FeatureID,Call:"C3"},basedon:"CostCenterID"};case"3016":return{component:T.TreeViewPageComponent,params:{ScreenName:D.d.GetResource("TNT_List"),FeatureActionID:s.FeatureActionID,CostCenterID:s.FeatureID,Call:"C3"},basedon:"CostCenterID"};case"602":return{component:T.TreeViewPageComponent,params:{ScreenName:D.d.GetResource("RENTALSProperty_ListofProperties"),FeatureActionID:s.FeatureActionID,CostCenterID:s.FeatureID,Call:"C3"},basedon:"CostCenterID"};case"3706":return{component:T.TreeViewPageComponent,params:{ScreenName:D.d.GetResource("REN_Units"),FeatureActionID:s.FeatureActionID,CostCenterID:s.FeatureID,Call:"C3"},basedon:"CostCenterID"}}return{}}static ShowQuickAdd_RENIsQuick(s,t){return(0,I.A)(function*(){if(94==s){const{QuickAddTenantComponent:o}=yield r.e(2527).then(r.bind(r,52527)),{QuickAddTenantViewModel:i}=yield Promise.all([r.e(8326),r.e(2076),r.e(5975)]).then(r.bind(r,58356));let n=new i(t,94,1,!1,null);D.d.page.ShowDialog(n,o,{Title:n.Title,ShowCenter:!0})}return 0})()}static ShowQuickAdd_REN(s,t){return(0,I.A)(function*(){if(92==s){D.d.page.ShowLoading=!0;const{AddEditPropertyComponent:o}=yield r.e(1392).then(r.bind(r,79011)),{AddEditPropertyViewModel:i}=yield Promise.resolve().then(r.bind(r,27630));let n=new i(parseInt(t),1,!1);D.d.page.addNewTab({title:n.Title,component:o,params:{obj:n}})}else if(93==s){D.d.page.ShowLoading=!0;const{AddEditUnitsComponent:o}=yield r.e(9475).then(r.bind(r,41856)),{AddEditUnitsViewModel:i}=yield Promise.resolve().then(r.bind(r,44310));let n=new i(t,!1,0,0);D.d.page.addNewTab({title:n.Title,component:o,params:{obj:n}})}else if(94==s){const{AddEditTenantComponent:o}=yield Promise.all([r.e(2076),r.e(5937)]).then(r.bind(r,52555)),{AddEditTenantViewModel:i}=yield Promise.resolve().then(r.bind(r,55232));let n=new i(t,0,!1);D.d.page.addNewTab({title:n.Title,component:o,params:{obj:n}})}else if(95==s){const{AddEditRentalContractComponent:o}=yield Promise.resolve().then(r.bind(r,10220)),{AddEditRenContractViewModel:i}=yield Promise.resolve().then(r.bind(r,68719));let n=new i;n.AddEditRenContractViewModel_1(s,t,!1,1,t),D.d.page.addNewTab({title:n.Title,component:o,params:{obj:n}})}})()}}}}]);